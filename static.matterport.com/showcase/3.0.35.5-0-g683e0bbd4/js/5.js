(window.webpackJsonp = window.webpackJsonp || []).push([
    [5], {
        1007: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r, i, a = n(19),
                s = n(719),
                c = n(664),
                l = n(718),
                u = n(111),
                p = n(6),
                h = n(45),
                d = n(524),
                f = n(346),
                y = n(253),
                v = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                m = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                g = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.handleClick = function() {
                            n.props.onToggleOpen(d.a.vrSelect, !n.props.open)
                        }, n
                    }
                    return v(e, t), e.prototype.render = function() {
                        return Object(a.h)(y.a, {
                            appendClass: {
                                "view-in-vr": !0
                            },
                            onClick: this.handleClick
                        }, Object(a.h)(f.a, {
                            content: this.context.locale.t(h.a.VIEW_IN_VR),
                            position: f.b.UP,
                            tooltipTimeout: Object(p.c)() ? 1e3 : void 0
                        }, Object(a.h)("span", {
                            class: "icon icon-vr"
                        })))
                    }, e = m([u.b], e)
                }(a.Component),
                b = n(672),
                w = (n(811), function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }()),
                O = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                S = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.handleTermsClick = function() {
                            n.props.toggleOpen(d.a.terms, !n.props.isTermsOpen), n.context.analytics.track("showcase_gui", {
                                gui_action: "click_terms_button",
                                interaction_source: "gui"
                            })
                        }, n.handleHelpClick = function() {
                            n.props.toggleOpen(d.a.help, !n.props.isHelpOpen), n.context.analytics.track("showcase_gui", {
                                gui_action: "click_help_button",
                                interaction_source: "gui"
                            })
                        }, n
                    }
                    return w(e, t), e.prototype.getFooterLogo = function() {
                        var t = "1" !== Object(p.z)("mls"),
                            e = n(813),
                            o = Object(a.h)("img", {
                                class: "footer-logo",
                                src: e
                            });
                        return t ? Object(a.h)("a", {
                            class: "link logo-link",
                            href: "https://matterport.com",
                            target: "_blank"
                        }, o) : o
                    }, e.prototype.render = function() {
                        return Object(a.h)("div", {
                            id: "footer"
                        }, Object(a.h)("span", {
                            onClick: this.handleHelpClick,
                            class: "link"
                        }, this.context.locale.t(h.a.HELP)), Object(a.h)("span", null, " | "), Object(a.h)("span", {
                            onClick: this.handleTermsClick,
                            class: "link"
                        }, this.context.locale.t(h.a.TERMS)), this.getFooterLogo())
                    }, e = O([u.b], e)
                }(a.Component),
                x = n(110),
                P = (n(606), n(674)),
                _ = n(717),
                T = n(676),
                D = (n(814), n(3)),
                k = n(179),
                M = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                E = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                C = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                j = new D.a("pause-button"),
                L = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.justEnded = !1, n.stopTour = n.stopTour.bind(n), n.state = {
                            justPaused: !1
                        }, n
                    }
                    return M(e, t), e.prototype.componentDidUpdate = function() {
                        this.state.justPaused && this.setState({
                            justPaused: !1
                        }), this.justEnded = !1
                    }, e.prototype.componentWillReceiveProps = function(t) {
                        !this.props.tourPlaying || t.tourPlaying || this.justEnded || this.setState({
                            justPaused: !0
                        }), this.props.tourEnded && (this.justEnded = !0)
                    }, e.prototype.stopTour = function() {
                        return E(this, void 0, void 0, (function() {
                            return C(this, (function(t) {
                                try {
                                    this.context.commandBinder.issueCommand(new k.c)
                                } catch (t) {
                                    j.debug(t)
                                }
                                return [2]
                            }))
                        }))
                    }, e.prototype.render = function() {
                        var t = this.props.tourPlaying,
                            e = this.state.justPaused;
                        return Object(a.h)("div", {
                            id: "pause-button",
                            onClick: this.stopTour,
                            onTouchMove: this.stopTour,
                            onTouchStart: this.stopTour
                        }, !t && Object(a.h)("img", {
                            src: n(816),
                            class: x({
                                justPaused: e
                            })
                        }))
                    }, e
                }(a.Component),
                R = (n(817), function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }()),
                A = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                };
            ! function(t) {
                t.UP = "up", t.DOWN = "down"
            }(r || (r = {})),
            function(t) {
                t.SMALL = "sm", t.MEDIUM = "md", t.LARGE = "lg"
            }(i || (i = {}));
            var I, N = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.onOutsideClick = function(t) {
                            n.toggleDropdown(!1)
                        }, n.onToggleClick = function(t) {
                            t.stopPropagation(), n.toggleDropdown()
                        }, n.onTransitionEnd = function(t) {
                            t && t.target !== t.currentTarget || (window.clearTimeout(n.transitionTimeout), n.setState({
                                transitioning: !1
                            }))
                        }, n.toggleDropdown = function(t) {
                            var e = n.state.open,
                                o = void 0 !== t ? t : !e;
                            o ? window.addEventListener("click", n.onOutsideClick) : window.removeEventListener("click", n.onOutsideClick), n.transitionTimeout = window.setTimeout(n.onTransitionEnd, 1e3), n.setState({
                                open: o,
                                transitioning: !0
                            })
                        }, n.state = {
                            open: !1,
                            transitioning: !1
                        }, n
                    }
                    return R(e, t), e.prototype.componentWillUnmount = function() {
                        window.removeEventListener("click", this.onOutsideClick)
                    }, e.prototype.render = function() {
                        var t = this.state,
                            e = t.open,
                            n = t.transitioning,
                            o = this.props,
                            s = o.children,
                            c = o.appendClass,
                            l = o.collapse,
                            u = o.direction,
                            p = Object.assign({
                                dropdown: !l,
                                "dropdown-sm": l === i.SMALL,
                                "dropdown-md": l === i.MEDIUM,
                                "dropdown-lg": l === i.LARGE,
                                open: e,
                                up: u === r.UP,
                                transitioning: n
                            }, c);
                        return Object(a.h)("div", {
                            class: x(p)
                        }, Object(a.h)("div", {
                            class: "dropdown-mask"
                        }, Object(a.h)("div", {
                            class: "dropdown-content"
                        }, Object(a.h)("div", {
                            class: "dropdown-items",
                            onTransitionEnd: this.onTransitionEnd
                        }, s))), Object(a.h)("div", {
                            class: "dropdown-toggle"
                        }, Object(a.h)(y.a, {
                            iconClass: "icon-toolbar-more-horiz",
                            onClick: this.onToggleClick,
                            appendClass: {
                                "dropdown-toggle": !0
                            }
                        })))
                    }, e.defaultProps = {
                        collapse: null,
                        direction: r.DOWN
                    }, e = A([u.b], e)
                }(a.Component),
                F = n(78),
                U = n(129),
                z = n(321),
                V = n(104),
                H = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                B = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                W = function(t) {
                    function e(e, n) {
                        var o = t.call(this, e) || this;
                        return o.handleButtonClick = function() {
                            o.props.onToggleMeasure(!o.props.measurementModeOpen), o.context.analytics.track("showcase_gui", {
                                gui_action: "measure_mode"
                            })
                        }, o.locale = {
                            measurement_mode: n.locale.t(h.a.MEASUREMENT_MODE)
                        }, o
                    }
                    return H(e, t), e.prototype.render = function() {
                        var t = this.props,
                            e = t.measurementModeOpen,
                            n = t.mobile;
                        return Object(a.h)(y.a, {
                            id: "measurement-mode-button",
                            onClick: this.handleButtonClick
                        }, Object(a.h)(f.a, {
                            content: this.locale.measurement_mode,
                            position: f.b.UP,
                            tooltipTimeout: n ? 1e3 : void 0
                        }, Object(a.h)("span", {
                            class: x("icon icon-tape-measure", {
                                open: e
                            })
                        })))
                    }, e = B([u.b], e)
                }(a.Component),
                G = n(141),
                Q = n(251),
                Y = n(55),
                q = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                K = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                Z = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                X = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                J = function(t) {
                    function e(n, o) {
                        var r, i = t.call(this, n) || this;
                        return i.propertiesToRefreshUi = ["vr", "hr", "gt", V.c, F.a.Measurements, F.a.HighlightReel, F.a.TourButtons, V.a, Y.a.MeasurementUserNudge], i.viewmodeToClass = ((r = {})[U.b.INSIDE] = "inside", r[U.b.OUTSIDE] = "outside", r[U.b.DOLLHOUSE] = "dollhouse", r[U.b.FLOORPLAN] = "floorplan", r[U.b.TRANSITIONING] = "transitioning", r), i.onBriefHLR = function() {
                            i.setState((function(t) {
                                return {
                                    briefHlr: !t.briefHlr
                                }
                            }))
                        }, i.updateViewportSize = function() {
                            var t = i.context && i.context.mainDiv ? i.context.mainDiv.offsetHeight : window.innerHeight;
                            i.setState({
                                viewportHeight: t
                            })
                        }, i.updatePerSettings = function() {
                            var t = i.context.settings,
                                e = t.tryGetProperty(V.c, !1) && t.tryGetProperty(F.a.Measurements, !1);
                            i.setState({
                                measurementsModeEnabled: e
                            })
                        }, i.updateNudge = function() {
                            var t = i.context.settings,
                                n = t.tryGetProperty(V.a, !1),
                                o = t.tryGetProperty(Y.a.MeasurementUserNudge, !1);
                            n && !o && (window.clearTimeout(i.nudgeTimeout), i.nudgeTimeout = window.setTimeout((function() {
                                i.setState({
                                    showingNudge: o
                                }), window.clearTimeout(i.dismissNudgeTimeout), i.dismissNudgeTimeout = window.setTimeout((function() {
                                    i.dismissNudge()
                                }), e.DISMISS_NUDGE_TIMEOUT)
                            }), e.SHOW_NUDGE_TIMEOUT))
                        }, i.isReelEnabled = function() {
                            var t = i.context.settings,
                                e = i.state.viewportHeight,
                                n = t.checkUrlParam("hr", 1, 1),
                                o = t.tryGetProperty(F.a.HighlightReel, !0);
                            return e >= _.a && n && o
                        }, i.isTourEnabled = function() {
                            var t = i.context.settings,
                                e = !!t.tryGetProperty("gt", 1),
                                n = t.tryGetProperty(F.a.TourButtons, !0);
                            return e && n
                        }, i.isFloorsEnabled = function() {
                            return !!i.context.settings.checkUrlParam("f", 1, 1)
                        }, i.onToggleHLR = function(t) {
                            i.isReelEnabled() && i.props.tourState.totalSteps > 0 && i.setState({
                                reelOpen: t
                            })
                        }, i.onToggleMeasure = function(t) {
                            i.context.commandBinder.issueCommand(new G.c(t)), i.props.toggleOpen(d.a.measurementMode, t), i.dismissNudge()
                        }, i.toggleShareModal = function() {
                            var t = i.props,
                                e = t.openComponents;
                            (0, t.toggleOpen)(d.a.share, !e.share)
                        }, i.dismissNudge = function() {
                            window.clearTimeout(i.nudgeTimeout), window.clearTimeout(i.dismissNudgeTimeout), i.context.settings.setLocalStorageProperty(Y.a.MeasurementUserNudge, !0), i.setState({
                                showingNudge: !0
                            })
                        }, i.renderHighlightReelControls = function() {
                            var t = i.props.tourState,
                                e = t.totalSteps,
                                n = t.tourPlaying,
                                o = i.isReelEnabled() && e > 0,
                                r = i.isTourEnabled() && e > 0;
                            return Object(a.h)("div", {
                                id: "highlight-tour-controls"
                            }, o && Object(a.h)(P.a, {
                                reelOpen: i.state.reelOpen,
                                onToggleHLR: i.onToggleHLR,
                                reelEnabled: o
                            }), r && Object(a.h)(c.a, {
                                tourEmpty: !1,
                                tourPlaying: n
                            }))
                        }, i.renderModeControls = function() {
                            return Object(a.h)(s.a, {
                                viewmode: i.props.viewmode
                            })
                        }, i.renderFloorPlanControls = function() {
                            var t = i.props.viewmode;
                            return Object(a.h)(l.a, {
                                viewmode: t
                            })
                        }, i.renderMeasurementModeButton = function() {
                            var t = i.props,
                                e = t.openComponents,
                                n = t.mobile,
                                o = i.state.showingNudge,
                                r = i.locale,
                                s = r.nudgeTitleString,
                                c = r.nudgeMessageString;
                            return Object(a.h)("div", {
                                id: "measure-mode-button"
                            }, Object(a.h)(W, {
                                measurementModeOpen: e.measurementMode,
                                onToggleMeasure: i.onToggleMeasure,
                                mobile: n
                            }), Object(a.h)(Q.b, {
                                tooltipId: "nudge-tooltip",
                                appendClass: {
                                    "nudge-tooltip": !0
                                },
                                open: !o,
                                closeButton: !0,
                                onClose: i.dismissNudge,
                                title: s,
                                message: Object(a.h)("div", {
                                    class: "nudge-message"
                                }, Object(a.h)("span", {
                                    class: "message"
                                }, c)),
                                arrowPos: Q.a.BOTTOM_CENTER,
                                appendBodyClass: {
                                    "container--small--width": !0
                                }
                            }))
                        }, i.renderHighlightReel = function() {
                            var t = i.props.tourState,
                                e = t.totalSteps,
                                n = t.tourPlaying,
                                o = t.highlights,
                                r = t.activeStep,
                                s = t.transition,
                                c = i.state,
                                l = c.reelOpen,
                                u = c.briefHlr;
                            return Object(a.h)(_.b, {
                                transition: s,
                                activeStep: r,
                                highlights: o,
                                tourPlaying: n,
                                totalSteps: e,
                                editMode: !1,
                                reelOpen: l,
                                briefHlr: u,
                                onBriefHLR: i.onBriefHLR,
                                onToggleHLR: i.onToggleHLR
                            })
                        }, i.renderFooter = function() {
                            var t = i.state,
                                e = t.reelOpen,
                                n = t.usedTour,
                                o = i.props.tourState,
                                r = o.totalSteps,
                                s = o.tourPlaying,
                                c = o.activeStep,
                                l = i.props,
                                u = l.toggleOpen,
                                p = l.openComponents;
                            return Object(a.h)("div", {
                                class: "footer-ui"
                            }, !p.measurementMode && !p.measurementModeHelp && Object(a.h)(T.a, {
                                activeStep: c,
                                tourPlaying: s,
                                totalSteps: r,
                                reelOpen: e,
                                usedTour: n,
                                onToggleHLR: i.onToggleHLR
                            }), Object(a.h)(S, {
                                isTermsOpen: p.terms,
                                isHelpOpen: p.help,
                                toggleOpen: u
                            }))
                        }, i.renderLeftControls = function() {
                            var t = [],
                                e = i.props,
                                n = e.openComponents,
                                o = e.unaligned,
                                r = i.state.measurementsModeEnabled,
                                a = i.props.tourState.totalSteps,
                                s = i.isReelEnabled() && a > 0;
                            return (i.isTourEnabled() && a > 0 || s) && !n.measurementMode && !n.measurementModeHelp && t.push(i.renderHighlightReelControls()), t.push(i.renderModeControls()), i.isFloorsEnabled() && t.push(i.renderFloorPlanControls()), !r || n.measurementMode || o || n.measurementModeHelp || t.push(i.renderMeasurementModeButton()), t
                        }, i.renderRightControls = function() {
                            var t = [],
                                e = i.props,
                                n = e.vrEnabled,
                                o = e.toggleOpen,
                                r = e.openComponents,
                                s = e.shareEnabled,
                                c = Object(p.x)(),
                                l = n;
                            return s && t.push(Object(a.h)(y.a, {
                                onClick: i.toggleShareModal
                            }, Object(a.h)(f.a, {
                                content: i.context.locale.t(h.a.SOCIAL_SHARING),
                                position: f.b.UP_LEFT,
                                tooltipTimeout: Object(p.c)() ? 1e3 : void 0
                            }, Object(a.h)("span", {
                                class: "icon icon-share"
                            })))), l && t.push(Object(a.h)(g, {
                                onToggleOpen: o,
                                open: r.vrSelect
                            })), c && t.push(Object(a.h)(b.a, null)), t
                        }, i.state = {
                            reelOpen: !1,
                            usedTour: !1,
                            measurementsModeEnabled: !1,
                            briefHlr: !1,
                            showingNudge: !0,
                            viewportHeight: 0
                        }, i.locale = {
                            nudgeTitleString: o.locale.t(h.a.MEASUREMENT_NUDGE_TITLE),
                            nudgeMessageString: o.locale.t(h.a.MEASUREMENT_NUDGE_MESSAGE)
                        }, i.onResize = Object(z.a)(i.updateViewportSize, 250), i.updateViewportSize(), i
                    }
                    return q(e, t), e.prototype.componentDidMount = function() {
                        return K(this, void 0, void 0, (function() {
                            var t, e, n, o, r;
                            return Z(this, (function(i) {
                                try {
                                    for (n = X(this.propertiesToRefreshUi), o = n.next(); !o.done; o = n.next()) r = o.value, this.context.settings.onPropertyChanged(r, this.updatePerSettings)
                                } catch (e) {
                                    t = {
                                        error: e
                                    }
                                } finally {
                                    try {
                                        o && !o.done && (e = n.return) && e.call(n)
                                    } finally {
                                        if (t) throw t.error
                                    }
                                }
                                return this.updatePerSettings(), this.updateNudge(), this.updateViewportSize(), this.onBriefHLR(), window.addEventListener("resize", this.onResize), [2]
                            }))
                        }))
                    }, e.prototype.componentWillUnmount = function() {
                        var t, e;
                        try {
                            for (var n = X(this.propertiesToRefreshUi), o = n.next(); !o.done; o = n.next()) {
                                var r = o.value;
                                this.context.settings.removeOnPropertyChanged(r, this.updatePerSettings)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                        window.removeEventListener("resize", this.onResize)
                    }, e.prototype.componentWillReceiveProps = function(t) {
                        t.tourState.tourPlaying && !this.props.tourState.tourPlaying && this.setState({
                            usedTour: !0
                        })
                    }, e.prototype.render = function() {
                        var t = this.props,
                            e = t.tourState,
                            n = t.viewmode,
                            o = t.modalOpen,
                            s = t.openComponents,
                            c = e.tourPlaying,
                            l = e.tourEnded,
                            u = e.totalSteps,
                            p = this.state,
                            h = p.reelOpen,
                            d = p.usedTour,
                            f = this.viewmodeToClass[n] || "",
                            y = this.isReelEnabled() && u > 0,
                            v = {
                                "reel-open": y && h,
                                "modal-open": o,
                                "tour-playing": c,
                                "used-tour": d
                            },
                            m = {
                                "faded-out": o && !s.measurementMode && !s.measurementModeHelp
                            },
                            g = !s.measurementMode && !s.measurementModeHelp && y,
                            b = !s.measurementMode && !s.measurementModeHelp ? this.renderRightControls() : [],
                            w = b.length;
                        return Object(a.h)("div", {
                            id: "bottom-ui",
                            class: x(v, f)
                        }, Object(a.h)(L, {
                            tourPlaying: c,
                            tourEnded: l
                        }), Object(a.h)("div", {
                            class: x("bottom-controls", m)
                        }, Object(a.h)("div", {
                            class: "controls controls-left"
                        }, this.renderLeftControls()), 1 === w && Object(a.h)("div", {
                            class: "controls controls-right"
                        }, b), w > 1 && Object(a.h)(N, {
                            direction: r.UP,
                            collapse: i.SMALL
                        }, Object(a.h)("div", {
                            class: "controls controls-right controls-collapsible"
                        }, b))), g && this.renderHighlightReel(), this.renderFooter())
                    }, e.SHOW_NUDGE_TIMEOUT = 3e4, e.DISMISS_NUDGE_TIMEOUT = 1e4, e
                }(a.Component),
                $ = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                tt = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                et = function(t) {
                    function e(e) {
                        return t.call(this, e) || this
                    }
                    return $(e, t), e.prototype.render = function() {
                        var t, e = this.props.mode === I.Expanded,
                            n = this.props.mode === I.Collapsed,
                            o = this.props.formattedAddress ? Object(a.h)("div", {
                                class: "address"
                            }, Object(a.h)("i", {
                                class: "icon-pin"
                            }, " "), this.props.formattedAddress) : null,
                            r = this.props.summary ? Object(a.h)("div", {
                                class: "summary-description"
                            }, this.props.summary) : null,
                            i = this.props.contactName ? Object(a.h)("span", {
                                id: "summary-name"
                            }, this.props.contactName, Object(a.h)("br", null)) : null,
                            s = this.props.formattedContactPhone ? this.props.formattedContactPhone : this.props.phone;
                        t = s && Object(p.o)() ? Object(a.h)("div", null, Object(a.h)("a", {
                            id: "phone",
                            class: "link",
                            href: "tel:" + this.props.phone
                        }, s)) : s ? Object(a.h)("span", {
                            id: "summary-phone"
                        }, s, Object(a.h)("br", null)) : null;
                        var c = this.props.contactEmail ? Object(a.h)("a", {
                                id: "email",
                                class: "link",
                                href: "mailto:" + this.props.contactEmail
                            }, this.props.contactEmail, Object(a.h)("br", null)) : null,
                            l = !!(i || t || c),
                            u = l ? Object(a.h)("i", {
                                class: "icon-user"
                            }, " ") : null,
                            d = l ? Object(a.h)("span", {
                                class: "contact-block"
                            }, u, Object(a.h)("div", {
                                class: "contact-data"
                            }, i, t, c)) : null,
                            f = this.props.externalUrl && Object(a.h)("div", {
                                id: "external-link"
                            }, Object(a.h)("hr", null), Object(a.h)("i", {
                                class: "icon-ext-link"
                            }), Object(a.h)("div", null, Object(a.h)("span", null, this.context.locale.t(h.a.WEBVR_LEARN_MORE) + ": "), Object(a.h)("a", {
                                class: "link",
                                onClick: this.props.onExternalLinkClicked,
                                href: this.props.externalUrl,
                                target: "_blank"
                            }, this.props.externalUrl))),
                            y = x({
                                "main-title": !0,
                                expanded: e = !(!e || !(l || o || r)),
                                collapsed: n
                            }),
                            v = x({
                                "summary-details": !0,
                                expanded: e,
                                collapsed: n,
                                hasExternalLink: !!f
                            });
                        return Object(a.h)("div", {
                            id: "summary-wrapper",
                            class: y
                        }, Object(a.h)("div", {
                            class: v
                        }, r, d, o, f))
                    }, e = tt([u.b], e)
                }(a.Component),
                nt = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                ot = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                rt = function(t) {
                    function e(e) {
                        return t.call(this, e) || this
                    }
                    return nt(e, t), e.prototype.render = function() {
                        var t = this.props.mode === I.Collapsed ? "right" : "left";
                        return Object(a.h)("div", {
                            id: "title-toggle",
                            onClick: this.props.handleClick
                        }, Object(a.h)("span", {
                            class: "icon icon-dpad-" + t
                        }))
                    }, e = ot([u.b], e)
                }(a.Component),
                it = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                at = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                st = function(t) {
                    function e(e) {
                        return t.call(this, e) || this
                    }
                    return it(e, t), e.prototype.collapsed = function() {
                        return this.props.mode === I.Collapsed
                    }, e.prototype.expanded = function() {
                        return this.props.mode === I.Expanded
                    }, e.prototype.render = function() {
                        var t = this.props.presentedBy,
                            e = this.expanded() ? this.context.locale.t(h.a.LESS) : this.context.locale.t(h.a.MORE),
                            n = this.expanded() ? "up" : "down",
                            o = x({
                                "main-title": !0,
                                collapsed: this.collapsed()
                            }),
                            r = x({
                                "co-brand": !0,
                                hidden: !t
                            }),
                            i = x({
                                titleText: !0,
                                noCoBrand: !t
                            });
                        return Object(a.h)("div", {
                            type: "button",
                            "data-balloon": this.props.name,
                            "data-balloon-pos": "down",
                            class: x("main-title-row", this.collapsed() || this.expanded() ? "tooltip-hidden" : ""),
                            style: "display: inline-block",
                            onClick: this.props.handleClick
                        }, Object(a.h)("div", {
                            id: "main-title-wrapper"
                        }, Object(a.h)("div", {
                            class: o
                        }, Object(a.h)("div", {
                            class: r
                        }, this.context.locale.t(h.a.PRESENTED_BY), Object(a.h)("span", {
                            class: "title",
                            id: "cobrandTitle"
                        }, " ", t)), this.props.showHint && Object(a.h)("div", {
                            class: "hint"
                        }, Object(a.h)("span", {
                            class: "link-btn"
                        }, e + " ", Object(a.h)("span", {
                            class: "icon icon-dpad-" + n
                        }))), Object(a.h)("div", {
                            id: "gui-name",
                            class: i
                        }, this.props.name))))
                    }, e = at([u.b], e)
                }(a.Component),
                ct = (n(819), function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }()),
                lt = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                };
            ! function(t) {
                t[t.Collapsed = 0] = "Collapsed", t[t.Normal = 1] = "Normal", t[t.Expanded = 2] = "Expanded"
            }(I || (I = {}));
            var ut, pt = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.toggleTitleCollapse = function() {
                            n.setState(n.toggleMode(I.Collapsed))
                        }, n.toggleTitleExpand = function() {
                            n.state.mode === I.Expanded ? n.setState(n.toggleMode(I.Normal)) : n.setState(n.toggleMode(I.Expanded))
                        }, n.onExternalLinkClicked = function(t) {
                            t.preventDefault(), n.context.analytics.track("showcase_share_origin_link_clicked"), window.open(n.props.modelDetails.externalUrl)
                        }, n.state = {
                            mode: I.Normal,
                            lastMode: I.Normal
                        }, n
                    }
                    return ct(e, t), e.prototype.toggleMode = function(t) {
                        return this.props.toggleOpen(d.a.titleBar, t === I.Expanded),
                            function(e, n) {
                                return {
                                    mode: e.mode === t ? e.lastMode : t,
                                    lastMode: e.mode
                                }
                            }
                    }, e.prototype.getFilteredValue = function(t, e, n, o) {
                        return !this.context.settings.tryGetProperty(e, n) || o && !this.props.brandingEnabled ? "" : t
                    }, e.prototype.render = function() {
                        var t = this.props,
                            e = t.modelDetails,
                            n = t.showExternalUrl,
                            o = e.name,
                            r = e.presentedBy,
                            i = e.summary,
                            s = e.formattedAddress,
                            c = e.contact,
                            l = e.externalUrl,
                            u = this.state.mode,
                            p = n ? l : "",
                            h = this.getFilteredValue(o, F.a.DetailsModelName, !0, !1),
                            d = this.getFilteredValue(i, F.a.DetailsSummary, !1, !1),
                            f = this.getFilteredValue(s, F.a.DetailsAddress, !1, !1),
                            y = this.getFilteredValue(r, F.a.PresentedBy, !1, !0),
                            v = this.getFilteredValue(c.name, F.a.DetailsName, !1, !0),
                            m = this.getFilteredValue(c.email, F.a.DetailsEmail, !1, !0),
                            g = this.getFilteredValue(c.phone, F.a.DetailsPhone, !1, !0),
                            b = this.getFilteredValue(c.formattedPhone, F.a.DetailsPhone, !1, !0),
                            w = "" !== d || "" !== f || "" !== m || "" !== v || "" !== b || "" !== g;
                        return Object(a.h)("div", {
                            id: "model-title",
                            className: x(I[u])
                        }, Object(a.h)("div", {
                            class: "title-row"
                        }, Object(a.h)(rt, {
                            mode: u,
                            handleClick: this.toggleTitleCollapse
                        }), Object(a.h)(st, {
                            name: h,
                            mode: u,
                            showHint: w,
                            presentedBy: y,
                            handleClick: this.toggleTitleExpand
                        })), Object(a.h)("div", {
                            class: "details-row"
                        }, Object(a.h)(et, {
                            mode: u,
                            summary: d,
                            formattedAddress: f,
                            phone: g,
                            formattedContactPhone: b,
                            contactEmail: m,
                            contactName: v,
                            externalUrl: p,
                            onExternalLinkClicked: this.onExternalLinkClicked
                        })))
                    }, e = lt([u.b], e)
                }(a.Component),
                ht = (n(821), function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }()),
                dt = function(t) {
                    function e(e) {
                        return t.call(this, e) || this
                    }
                    return ht(e, t), e.prototype.render = function() {
                        var t = this.props,
                            e = t.modalOpen,
                            n = t.toggleOpen,
                            o = t.tourState,
                            r = t.modelDetails,
                            i = t.showExternalUrl,
                            s = t.brandingEnabled,
                            c = t.titleBarEnabled,
                            l = t.openComponents,
                            u = x({
                                "faded-out": e || o.tourPlaying || l.measurementMode || l.measurementModeHelp
                            });
                        return Object(a.h)("div", {
                            id: "top-ui",
                            class: u
                        }, c && r && Object(a.h)(pt, {
                            modelDetails: r,
                            showExternalUrl: i,
                            brandingEnabled: s,
                            toggleOpen: n
                        }))
                    }, e
                }(a.Component),
                ft = n(713),
                yt = n(716),
                vt = n(265),
                mt = n(257),
                gt = n(715),
                bt = n(220),
                wt = (n(829), function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }()),
                Ot = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                St = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                xt = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                Pt = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.propertiesToRefreshUi = [vt.a, mt.a, V.c, F.a.Labels, F.a.Measurements], n.refreshVisibility = function() {
                            var t = n.context.settings,
                                e = t.tryGetProperty(V.c, !1) && t.tryGetProperty(F.a.Measurements, !1);
                            n.setState({
                                labelsOn: t.tryGetProperty(vt.a, !1) && t.tryGetProperty(F.a.Labels, !1),
                                mattertagsOn: t.tryGetProperty(mt.a, !1),
                                measurementsOn: e
                            })
                        }, n.onMeasurementModeUpdate = function(t) {
                            return n.measurementData.onChanged(t)
                        }, n.state = {
                            measurementsOn: !1,
                            mattertagsOn: !1,
                            labelsOn: !1
                        }, n
                    }
                    return wt(e, t), e.prototype.componentDidMount = function() {
                        return Ot(this, void 0, void 0, (function() {
                            var t, e, n, o, r, i = this;
                            return St(this, (function(a) {
                                try {
                                    for (n = xt(this.propertiesToRefreshUi), o = n.next(); !o.done; o = n.next()) r = o.value, this.context.settings.onPropertyChanged(r, this.refreshVisibility)
                                } catch (e) {
                                    t = {
                                        error: e
                                    }
                                } finally {
                                    try {
                                        o && !o.done && (e = n.return) && e.call(n)
                                    } finally {
                                        if (t) throw t.error
                                    }
                                }
                                return this.context.market.waitForData(bt.MeasurementModeData).then((function(t) {
                                    i.measurementData = t
                                })), this.refreshVisibility(), [2]
                            }))
                        }))
                    }, e.prototype.componentWillUnmount = function() {
                        var t, e;
                        try {
                            for (var n = xt(this.propertiesToRefreshUi), o = n.next(); !o.done; o = n.next()) {
                                var r = o.value;
                                this.context.settings.removeOnPropertyChanged(r, this.refreshVisibility)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    }, e.prototype.render = function() {
                        var t = this.state,
                            e = t.labelsOn,
                            n = t.mattertagsOn,
                            o = t.measurementsOn,
                            r = this.props,
                            i = r.viewmode,
                            s = r.toggleOpen,
                            c = r.tourPlaying,
                            l = r.measurementModeOpen,
                            u = r.measurementModeHelpOpen;
                        return Object(a.h)("div", {
                            id: "overlay-ui"
                        }, n && Object(a.h)(ft.a, {
                            tourPlaying: c,
                            editMode: !1,
                            toggleOpen: s
                        }), e && Object(a.h)(yt.a, {
                            viewmode: i,
                            editMode: !1,
                            modes: [U.b.FLOORPLAN]
                        }), this.measurementData && o && Object(a.h)(gt.a, {
                            measurementMode: l,
                            measurementModeHelpOpen: u,
                            editMode: !1,
                            mobile: this.props.mobile,
                            toggleOpen: s,
                            onDataUpdate: this.onMeasurementModeUpdate
                        }))
                    }, e
                }(a.Component),
                _t = (n(831), n(522)),
                Tt = n(217),
                Dt = n(518),
                kt = n(533),
                Mt = n(135),
                Et = (n(833), function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }()),
                Ct = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                jt = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                Lt = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.onScrollPositionChange = function() {
                            n.scrollbars && n.setState({
                                scrollClass: n.scrollbars.scrollPosition.vertical
                            })
                        }, n.onClose = function() {
                            n.setState({
                                showing: !1
                            }), n.props.toggleOpen(d.a.terms, !1)
                        }, n.state = {
                            termsText: "",
                            showing: !1,
                            scrollClass: Dt.c.None
                        }, n
                    }
                    return Et(e, t), e.prototype.componentDidMount = function() {
                        return Ct(this, void 0, void 0, (function() {
                            var t, e, n, o = this;
                            return jt(this, (function(r) {
                                switch (r.label) {
                                    case 0:
                                        t = this.context.locale ? this.context.locale.languageCode : "EN", e = "./terms/terms-" + t + ".html", n = "", r.label = 1;
                                    case 1:
                                        return r.trys.push([1, 3, , 4]), [4, new Mt.RequestQueue({
                                            retries: 0
                                        }).get(e)];
                                    case 2:
                                        return n = r.sent(), [3, 4];
                                    case 3:
                                        return r.sent(), n = this.context.locale.t(h.a.TERMS_FAIL), [3, 4];
                                    case 4:
                                        return window.requestAnimationFrame((function() {
                                            o.setState({
                                                showing: !0,
                                                termsText: n
                                            })
                                        })), [2]
                                }
                            }))
                        }))
                    }, e.prototype.componentDidUpdate = function(t, e) {
                        this.state.termsText !== e.termsText && (this.termsTextDiv.innerHTML = this.state.termsText, [].slice.call(this.termsTextDiv.querySelectorAll("a")).forEach((function(t) {
                            t.setAttribute("target", "_blank"), t.classList.add("link")
                        })))
                    }, e.prototype.render = function() {
                        var t, e = this,
                            n = this.state,
                            o = n.showing,
                            r = n.scrollClass,
                            i = x("modal", ((t = {
                                "faded-in": o
                            })[r] = !0, t));
                        return Object(a.h)("div", {
                            id: "terms-modal",
                            class: i
                        }, Object(a.h)("div", {
                            id: "terms-wrapper"
                        }, Object(a.h)(_t.a, {
                            name: "terms",
                            ref: function(t) {
                                return e.scrollbars = t
                            },
                            onScrollPositionChange: this.onScrollPositionChange,
                            forceHidden: Object(kt.a)(window)
                        }, Object(a.h)("div", {
                            ref: function(t) {
                                return e.termsTextDiv = t
                            },
                            id: "terms-text"
                        }))), Object(a.h)(Tt.a, {
                            buttonStyle: Tt.b.LIGHT,
                            onClose: this.onClose
                        }))
                    }, e
                }(a.Component);
            ! function(t) {
                t.gearVr = "gearvr", t.cardboardAndroid = "googlevr", t.cardboardIos = "googlevrios", t.android = "android", t.ios = "ios"
            }(ut || (ut = {}));
            var Rt, At = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                It = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                Nt = function() {
                    function t(e, n, o) {
                        this.modelSid = e, this.modelDetails = n, this.sessionId = o, t.queue || (t.queue = new Mt.RequestQueue({
                            retries: 0
                        })), this.storeLinks = {}, this.storeLinks[ut.gearVr] = "https://www.oculus.com/experiences/gear-vr/811670972252145/?redirect_uri=", this.storeLinks[ut.cardboardAndroid] = "https://play.google.com/store/apps/details?id=com.matterport.mpvrcardboard&redirect_uri=", this.storeLinks[ut.cardboardIos] = "https://itunes.apple.com/us/app/matterport-vr/id1168808473?redirect_uri="
                    }
                    return t.prototype.getBranchKey = function() {
                        var e = this.getOrigin();
                        return t.branchKeyPromise || (t.branchKeyPromise = t.queue.get(e + "/api/v1/config/showcase", {
                            responseType: "json"
                        }).then((function(t) {
                            return t.branch_key
                        }))), t.branchKeyPromise
                    }, t.prototype.getBranchLink = function(e, n) {
                        return At(this, void 0, Promise, (function() {
                            var o, r, i, a, s, c, l, u, p;
                            return It(this, (function(h) {
                                switch (h.label) {
                                    case 0:
                                        o = "https://support.matterport.com/hc/en-us/articles/224728887-What-do-I-need-for-Virtual-Reality", r = "https://api.branch.io/v1/url", i = this.getAppLink(e, n), a = "", h.label = 1;
                                    case 1:
                                        return h.trys.push([1, 4, , 5]), c = (s = t.queue).post, l = [r], u = {
                                            responseType: "json"
                                        }, p = {}, [4, this.getBranchKey()];
                                    case 2:
                                        return [4, c.apply(s, l.concat([(u.body = (p.branch_key = h.sent(), p.data = {
                                            m: e.sid,
                                            full_url: i,
                                            $desktop_url: o,
                                            $og_app_id: "331853976762864119",
                                            $og_title: e.title,
                                            $og_description: e.description,
                                            $og_image_url: location.origin + "/api/v1/player/models/" + e.sid + "/thumb",
                                            $canonical_url: window.location.href
                                        }, p), u)])).then((function(t) {
                                            a = t.url || i
                                        }))];
                                    case 3:
                                        return h.sent(), [3, 5];
                                    case 4:
                                        return h.sent(), a = i, [3, 5];
                                    case 5:
                                        return [2, a]
                                }
                            }))
                        }))
                    }, t.prototype.getOrigin = function() {
                        var t = window.location.host;
                        return -1 === t.indexOf(".matterport.com") && -1 === t.indexOf("localhost") && (t = "my.matterport.com"), "https://" + t
                    }, t.prototype.getReferrer = function() {
                        return p.g() ? document.referrer : window.location.href
                    }, t.prototype.getSimpleLink = function(t) {
                        return this.getOrigin() + "/vr/show/?m=" + t
                    }, t.prototype.getAppLink = function(t, e) {
                        var n = this.getOrigin(),
                            o = this.getReferrer();
                        return p.z("vrcoll", !1) ? n + "/vr/dlist/?sids=" + t.sid + "&lsid=" + t.sid + "&ln=" + encodeURIComponent(t.title) + "&ld=" + encodeURIComponent(t.description) + "&display=" + e + "&utm_medium=" + (p.g() ? "embed" : "direct") + "&utm_source=" + o + "&utm_showcase_session_id=" + this.sessionId + "&ret=" + encodeURIComponent(o) : n + "/vr/show/?m=" + t.sid + "&display=" + e + "&utm_medium=" + (p.g() ? "embed" : "direct") + "&utm_source=" + o + "&utm_showcase_session_id=" + this.sessionId + "&ret=" + encodeURIComponent(o)
                    }, t.prototype.getStoreLink = function(t) {
                        var e = this.getReferrer(),
                            n = e ? "" + encodeURIComponent(e + "&display=" + t) : "";
                        return Promise.resolve("" + this.storeLinks[t] + n)
                    }, t.prototype.getDeepLink = function(t) {
                        return At(this, void 0, Promise, (function() {
                            var e;
                            return It(this, (function(n) {
                                return t ? (e = {
                                    sid: this.modelSid,
                                    title: this.modelDetails.name || "",
                                    description: this.modelDetails.summary || ""
                                }, t === ut.cardboardIos ? [2, this.getBranchLink(e, t)] : [2, this.getAppLink(e, t)]) : [2, this.getSimpleLink(this.modelSid)]
                            }))
                        }))
                    }, t
                }();
            ! function(t) {
                t.CardboardAndroid = "googlevr", t.GearVR = "gearvr", t.CardboardIOS = "googlevrios", t.Cardboard = "googlevr"
            }(Rt || (Rt = {}));
            var Ft, Ut = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                zt = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return Ut(e, t), e.prototype.render = function(t, e) {
                        var n = t.className,
                            o = t.href,
                            r = t.children,
                            i = t.onClick;
                        return Object(a.h)("a", {
                            class: x("link", {
                                className: n
                            }),
                            href: o,
                            target: "_blank",
                            onClick: i
                        }, r)
                    }, e
                }(a.Component),
                Vt = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                Ht = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                Bt = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                Wt = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                Gt = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return Vt(e, t), e.prototype.componentDidMount = function() {
                        return Bt(this, void 0, void 0, (function() {
                            var t;
                            return Wt(this, (function(e) {
                                switch (e.label) {
                                    case 0:
                                        return [4, this.props.vrLinks.getDeepLink(ut.cardboardIos)];
                                    case 1:
                                        return t = e.sent(), this.setState({
                                            deepLink: t
                                        }), [2]
                                }
                            }))
                        }))
                    }, e.prototype.render = function() {
                        var t = this.props.analytics,
                            e = this.context.locale,
                            o = this.state.deepLink;
                        return Object(a.h)("div", {
                            className: "openVrApp"
                        }, Object(a.h)("h1", null, e.t(h.a.VR_SHOW_IOS_1)), Object(a.h)("ul", null, Object(a.h)(zt, {
                            href: o,
                            onClick: t("launch_vr", {
                                vr_platform: ut.ios,
                                vr_app: Rt.CardboardIOS
                            })
                        }, Object(a.h)("li", null, Object(a.h)("img", {
                            class: "headset-small",
                            src: n(568)
                        }), Object(a.h)("div", null, e.t(h.a.VR_GOOGLE_CARDBOARD))))), Object(a.h)("div", {
                            className: "caption"
                        }, Object(a.h)("i", null, e.t(h.a.VR_SHOW_IOS_2))))
                    }, e = Ht([u.b], e)
                }(a.Component),
                Qt = n(90),
                Yt = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                qt = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                Kt = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return Yt(e, t), e.prototype.render = function() {
                        var t = this.context.locale,
                            e = this.props,
                            n = e.next,
                            o = e.onEnterVr;
                        return Object(a.h)("div", {
                            className: "openVrApp enter-vr"
                        }, Object(a.h)("ul", null, Object(a.h)(Qt.a, {
                            buttonStyle: Qt.d.LIGHT,
                            onClick: o
                        }, t.t(h.a.WEBVR_ENTER_WEBVR))), Object(a.h)("hr", null), Object(a.h)("ul", null, Object(a.h)("div", {
                            className: "link",
                            onClick: n
                        }, t.t(h.a.VR_APP_OPEN))))
                    }, e = qt([u.b], e)
                }(a.Component),
                Zt = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                Xt = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                Jt = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                $t = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                te = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return Zt(e, t), e.prototype.componentDidMount = function() {
                        return Jt(this, void 0, void 0, (function() {
                            var t;
                            return $t(this, (function(e) {
                                switch (e.label) {
                                    case 0:
                                        return [4, this.props.vrLinks.getStoreLink(ut.cardboardIos)];
                                    case 1:
                                        return t = e.sent(), this.setState({
                                            storeLink: t
                                        }), [2]
                                }
                            }))
                        }))
                    }, e.prototype.render = function() {
                        var t = this.props.analytics,
                            e = this.context.locale,
                            o = this.state.storeLink;
                        return Object(a.h)("div", {
                            className: "whatYoullNeed"
                        }, Object(a.h)("h1", null, e.t(h.a.VR_NEED_CARDBOARD)), Object(a.h)("div", {
                            className: "headset"
                        }, Object(a.h)("img", {
                            class: "headset-large",
                            src: n(568)
                        })), Object(a.h)("ul", null, Object(a.h)("li", null, Object(a.h)("div", null, Object(a.h)("img", {
                            class: "vr-modal-icon",
                            src: n(835)
                        })), Object(a.h)("label", null, e.t(h.a.VR_COMPATIBLE_IPHONES_3)), Object(a.h)("p", null, e.t(h.a.VR_COMPATIBLE_IPHONES_2))), Object(a.h)("li", null, Object(a.h)("div", null, Object(a.h)("img", {
                            class: "vr-modal-icon",
                            src: n(739)
                        })), Object(a.h)("label", null, e.t(h.a.VR_APP_FOR_CARDBOARD)), Object(a.h)("p", null, Object(a.h)(zt, {
                            href: o,
                            onClick: t("launch_store", {
                                store: Rt.CardboardIOS
                            })
                        }, e.t(h.a.VR_DOWNLOAD_HERE))))))
                    }, e = Xt([u.b], e)
                }(a.Component),
                ee = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                ne = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                oe = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                re = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                ie = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return ee(e, t), e.prototype.componentDidMount = function() {
                        return oe(this, void 0, void 0, (function() {
                            var t, e, n, o, r;
                            return re(this, (function(i) {
                                switch (i.label) {
                                    case 0:
                                        return t = this.props.vrLinks, e = t.getDeepLink(ut.cardboardAndroid), n = t.getDeepLink(ut.gearVr), o = this.setState, r = {}, [4, e];
                                    case 1:
                                        return r.deepLinkCardboard = i.sent(), [4, n];
                                    case 2:
                                        return o.apply(this, [(r.deepLinkGearVr = i.sent(), r)]), [2]
                                }
                            }))
                        }))
                    }, e.prototype.render = function() {
                        var t = this.props.analytics,
                            e = this.context.locale,
                            o = this.state,
                            r = o.deepLinkCardboard,
                            i = o.deepLinkGearVr;
                        return Object(a.h)("div", {
                            className: "openVrApp"
                        }, Object(a.h)("h1", null, e.t(h.a.VR_SHOW_SUPPORTED)), Object(a.h)("ul", null, Object(a.h)(zt, {
                            href: r,
                            onClick: t("launch_vr", {
                                vr_platform: ut.android,
                                vr_app: Rt.CardboardAndroid
                            })
                        }, Object(a.h)("li", null, Object(a.h)("img", {
                            class: "headset-small",
                            src: n(568)
                        }), Object(a.h)("div", {
                            class: "link"
                        }, e.t(h.a.VR_GOOGLE_CARDBOARD)))), Object(a.h)(zt, {
                            href: i,
                            onClick: t("launch_vr", {
                                vr_platform: ut.android,
                                vr_app: Rt.GearVR
                            })
                        }, Object(a.h)("li", null, Object(a.h)("img", {
                            class: "headset-small",
                            src: n(618)
                        }), Object(a.h)("div", {
                            class: "link"
                        }, e.t(h.a.VR_SAMSUNG_GEAR_VR))))), Object(a.h)("div", {
                            className: "caption"
                        }, Object(a.h)("i", null, e.t(h.a.VR_REQUIRE_HEADSET)), Object(a.h)("br", null), Object(a.h)("i", null, e.t(h.a.VR_REDIRECT_TO_STORE))))
                    }, e = ne([u.b], e)
                }(a.Component),
                ae = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                se = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                ce = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                le = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                ue = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return ae(e, t), e.prototype.componentDidMount = function() {
                        return ce(this, void 0, void 0, (function() {
                            var t;
                            return le(this, (function(e) {
                                switch (e.label) {
                                    case 0:
                                        return [4, this.props.vrLinks.getStoreLink(ut.cardboardAndroid)];
                                    case 1:
                                        return t = e.sent(), this.setState({
                                            storeLink: t
                                        }), [2]
                                }
                            }))
                        }))
                    }, e.prototype.render = function() {
                        var t = this.props.analytics,
                            e = this.context.locale,
                            o = this.state.storeLink;
                        return Object(a.h)("div", {
                            className: "whatYoullNeed"
                        }, Object(a.h)("h1", null, e.t(h.a.VR_NEED_CARDBOARD)), Object(a.h)("div", {
                            className: "headset"
                        }, Object(a.h)("img", {
                            class: "headset-large",
                            src: n(568)
                        })), Object(a.h)("ul", null, Object(a.h)("li", null, Object(a.h)("div", null, Object(a.h)("img", {
                            class: "vr-modal-icon",
                            src: n(836)
                        })), Object(a.h)("label", null, e.t(h.a.VR_COMPATIBLE_ANDROID)), Object(a.h)("p", null, e.t(h.a.VR_ANDROID_DETAIL))), Object(a.h)("li", null, Object(a.h)("div", null, Object(a.h)("img", {
                            class: "vr-modal-icon",
                            src: n(739)
                        })), Object(a.h)("label", null, e.t(h.a.VR_APP_FOR_CARDBOARD)), Object(a.h)("p", null, Object(a.h)(zt, {
                            href: o,
                            onClick: t("launch_store", {
                                store: Rt.CardboardAndroid
                            })
                        }, e.t(h.a.VR_DOWNLOAD_HERE))))))
                    }, e = se([u.b], e)
                }(a.Component),
                pe = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                he = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                de = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                fe = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                ye = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return pe(e, t), e.prototype.componentDidMount = function() {
                        return de(this, void 0, void 0, (function() {
                            var t;
                            return fe(this, (function(e) {
                                switch (e.label) {
                                    case 0:
                                        return [4, this.props.vrLinks.getStoreLink(ut.gearVr)];
                                    case 1:
                                        return t = e.sent(), this.setState({
                                            storeLink: t
                                        }), [2]
                                }
                            }))
                        }))
                    }, e.prototype.render = function() {
                        var t = this.props.analytics,
                            e = this.context.locale,
                            o = this.state.storeLink;
                        return Object(a.h)("div", {
                            className: "whatYoullNeed"
                        }, Object(a.h)("h1", null, e.t(h.a.VR_NEED_SAMSUNG)), Object(a.h)("div", {
                            className: "headset"
                        }, Object(a.h)("img", {
                            class: "headset-large",
                            src: n(618)
                        })), Object(a.h)("ul", null, Object(a.h)("li", null, Object(a.h)("div", null, Object(a.h)("img", {
                            class: "vr-modal-icon",
                            src: n(837)
                        })), Object(a.h)("label", null, e.t(h.a.VR_COMPATIBLE_SAMSUNG)), Object(a.h)("p", null, e.t(h.a.VR_SAMSUNG_DETAIL))), Object(a.h)("li", null, Object(a.h)("div", null, Object(a.h)("img", {
                            class: "vr-modal-icon",
                            src: n(838)
                        })), Object(a.h)("label", null, e.t(h.a.VR_APP_FOR_SAMSUNG)), Object(a.h)("p", null, Object(a.h)(zt, {
                            href: o,
                            onClick: t("launch_store", {
                                store: Rt.GearVR
                            })
                        }, e.t(h.a.VR_DOWNLOAD_HERE))))))
                    }, e = he([u.b], e)
                }(a.Component),
                ve = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                me = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                ge = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                be = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                we = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.setCurrentPanel = function(t) {
                            n.setState({
                                currentPanel: t
                            })
                        }, n.openCardboardPanel = function() {
                            n.setCurrentPanel(Ft.cardboard)
                        }, n.openGearVrPanel = function() {
                            n.setCurrentPanel(Ft.gearVr)
                        }, n.closePanel = function() {
                            n.setCurrentPanel(Ft.none)
                        }, n
                    }
                    return ve(e, t), e.prototype.componentDidMount = function() {
                        return ge(this, void 0, void 0, (function() {
                            var t, e, n, o, r, i, a;
                            return be(this, (function(s) {
                                switch (s.label) {
                                    case 0:
                                        return t = this.props.vrLinks, e = t.getDeepLink(), n = t.getStoreLink(ut.cardboardIos), o = t.getStoreLink(ut.cardboardAndroid), r = t.getStoreLink(ut.gearVr), i = this.setState, a = {
                                            currentPanel: Ft.none
                                        }, [4, e];
                                    case 1:
                                        return a.deepLink = s.sent(), [4, n];
                                    case 2:
                                        return a.cardboardIosStoreLink = s.sent(), [4, o];
                                    case 3:
                                        return a.cardboardAndroidStoreLink = s.sent(), [4, r];
                                    case 4:
                                        return i.apply(this, [(a.gearVrStoreLink = s.sent(), a)]), [2]
                                }
                            }))
                        }))
                    }, e.prototype.handleLinkFocus = function(t) {
                        t.target.select()
                    }, e.prototype.handleLinkBlur = function(t) {
                        var e = t.target;
                        e.selectionStart = e.selectionEnd = -1
                    }, e.prototype.renderCurrentPanel = function() {
                        var t = this.props.analytics,
                            e = this.context.locale,
                            o = this.state,
                            r = o.cardboardAndroidStoreLink,
                            i = o.cardboardIosStoreLink,
                            s = o.gearVrStoreLink,
                            c = o.currentPanel;
                        return Object(a.h)("ul", null, c !== Ft.gearVr ? Object(a.h)("li", {
                            class: "link",
                            onClick: this.openCardboardPanel
                        }, Object(a.h)("img", {
                            class: "headset-small",
                            src: n(568)
                        }), Object(a.h)("div", null, e.t(h.a.VR_GOOGLE_CARDBOARD))) : null, c !== Ft.cardboard ? Object(a.h)("li", {
                            class: "link",
                            onClick: this.openGearVrPanel
                        }, Object(a.h)("img", {
                            class: "headset-small",
                            src: n(618)
                        }), Object(a.h)("div", null, e.t(h.a.VR_SAMSUNG_GEAR_VR))) : null, c === Ft.cardboard ? Object(a.h)("li", null, Object(a.h)(Tt.a, {
                            buttonStyle: Tt.b.LIGHT,
                            onClose: this.closePanel
                        }), Object(a.h)(zt, {
                            href: r,
                            onClick: t("launch_store", {
                                store: Rt.CardboardAndroid
                            })
                        }, Object(a.h)("img", {
                            class: "store-badge",
                            src: n(740)
                        })), Object(a.h)("br", null), Object(a.h)(zt, {
                            href: i,
                            onClick: t("launch_store", {
                                store: Rt.CardboardIOS
                            })
                        }, Object(a.h)("img", {
                            class: "store-badge",
                            src: n(741)
                        }))) : null, c === Ft.gearVr ? Object(a.h)("li", null, Object(a.h)(Tt.a, {
                            buttonStyle: Tt.b.LIGHT,
                            onClose: this.closePanel
                        }), Object(a.h)(zt, {
                            href: s,
                            onClick: t("launch_store", {
                                store: Rt.GearVR
                            })
                        }, Object(a.h)("img", {
                            class: "store-badge",
                            src: n(742)
                        }))) : null)
                    }, e.prototype.render = function() {
                        var t = this.context.locale,
                            e = this.state.deepLink;
                        return Object(a.h)("div", {
                            class: "openVrApp"
                        }, Object(a.h)("h1", null, t.t(h.a.VR_OPEN_ANDROID_LINK)), Object(a.h)("div", {
                            class: "vr-deep-link"
                        }, Object(a.h)("input", {
                            readOnly: !0,
                            value: e,
                            onFocus: this.handleLinkFocus,
                            onBlur: this.handleLinkBlur
                        })), Object(a.h)("h1", null, t.t(h.a.VR_ANDROID_OPTIONS)), this.renderCurrentPanel())
                    }, e = me([u.b], e)
                }(a.Component);
            ! function(t) {
                t.none = "none", t.cardboard = "cardboard", t.gearVr = "gearVr"
            }(Ft || (Ft = {}));
            var Oe, Se = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                xe = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                Pe = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                _e = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                Te = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return Se(e, t), e.prototype.componentDidMount = function() {
                        return Pe(this, void 0, void 0, (function() {
                            var t, e, n, o, r;
                            return _e(this, (function(i) {
                                switch (i.label) {
                                    case 0:
                                        return t = this.props.vrLinks, e = t.getStoreLink(ut.cardboardIos), n = t.getStoreLink(ut.cardboardAndroid), o = this.setState, r = {}, [4, e];
                                    case 1:
                                        return r.iosStoreLink = i.sent(), [4, n];
                                    case 2:
                                        return o.apply(this, [(r.androidStoreLink = i.sent(), r)]), [2]
                                }
                            }))
                        }))
                    }, e.prototype.render = function() {
                        var t = this.props.analytics,
                            e = this.context.locale,
                            o = this.state,
                            r = o.iosStoreLink,
                            i = o.androidStoreLink;
                        return Object(a.h)("div", {
                            className: "whatYoullNeed"
                        }, Object(a.h)("div", {
                            className: "header"
                        }, Object(a.h)("img", {
                            class: "headset-large",
                            src: n(568)
                        }), Object(a.h)("h1", null, e.t(h.a.VR_NEED_CARDBOARD))), Object(a.h)("ul", null, Object(a.h)("li", null, Object(a.h)("div", null, Object(a.h)("label", null, e.t(h.a.VR_COMPATIBLE_IPHONES_1)), Object(a.h)("p", null, e.t(h.a.VR_COMPATIBLE_IPHONES_2))), Object(a.h)(zt, {
                            href: r,
                            onClick: t("launch_store", {
                                store: Rt.CardboardAndroid
                            })
                        }, Object(a.h)("img", {
                            class: "store-badge",
                            src: n(741)
                        }))), Object(a.h)("li", null, Object(a.h)("div", null, Object(a.h)("label", null, e.t(h.a.VR_COMPATIBLE_ANDROID)), Object(a.h)("p", null, e.t(h.a.VR_ANDROID_DETAIL))), Object(a.h)(zt, {
                            href: i,
                            onClick: t("launch_store", {
                                store: Rt.CardboardIOS
                            })
                        }, Object(a.h)("img", {
                            class: "store-badge",
                            src: n(740)
                        })))))
                    }, e = xe([u.b], e)
                }(a.Component),
                De = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                ke = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                Me = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                Ee = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                Ce = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return De(e, t), e.prototype.componentDidMount = function() {
                        return Me(this, void 0, void 0, (function() {
                            var t;
                            return Ee(this, (function(e) {
                                switch (e.label) {
                                    case 0:
                                        return [4, this.props.vrLinks.getStoreLink(ut.gearVr)];
                                    case 1:
                                        return t = e.sent(), this.setState({
                                            storeLink: t
                                        }), [2]
                                }
                            }))
                        }))
                    }, e.prototype.render = function() {
                        var t = this.props.analytics,
                            e = this.context.locale,
                            o = this.state.storeLink;
                        return Object(a.h)("div", {
                            className: "whatYoullNeed"
                        }, Object(a.h)("div", {
                            className: "header"
                        }, Object(a.h)("img", {
                            class: "headset-large",
                            src: n(618)
                        }), Object(a.h)("h1", null, e.t(h.a.VR_NEED_SAMSUNG))), Object(a.h)("ul", null, Object(a.h)("li", null, Object(a.h)("div", null, Object(a.h)("label", null, e.t(h.a.VR_COMPATIBLE_SAMSUNG)), Object(a.h)("p", null, e.t(h.a.VR_SAMSUNG_DETAIL))), Object(a.h)(zt, {
                            href: o,
                            onClick: t("launch_store", {
                                store: Rt.GearVR
                            })
                        }, Object(a.h)("img", {
                            class: "store-badge",
                            src: n(742)
                        })))))
                    }, e = ke([u.b], e)
                }(a.Component),
                je = n(604),
                Le = (n(839), n(697)),
                Re = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                Ae = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                Ie = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                Ne = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                Fe = new D.a("vr-select");
            ! function(t) {
                t.ios = "ios", t.android = "android", t.desktop = "unsupported", t.webvrAndroid = "webvrAndroid", t.webvrDesktop = "webvrDesktop"
            }(Oe || (Oe = {}));
            var Ue, ze, Ve = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.pages = [], n.onClose = function() {
                            n.trackEvent(n.isWebVr(n.platform) ? "webvr_modal_close" : "vr_modal_close"), n.setState({
                                showing: !1
                            }), n.props.toggleOpen(d.a.vrSelect, !1)
                        }, n.onWebVrEnter = function() {
                            if (n.vrDisplay && n.vrDisplay.capabilities.canPresent && !n.vrDisplay.isPresenting) {
                                n.trackEvent("webvr_enter_app"), n.props.commandBinder.issueCommand(new Le.b);
                                var t = document.createElement("canvas");
                                for (t.getContext("webgl"), t.className = "webvr-canvas", document.bgColor = "#000", document.body.style.backgroundColor = "#000"; document.body.firstChild;) document.body.removeChild(document.body.firstChild);
                                document.body.appendChild(t), n.vrDisplay.requestPresent([{
                                    source: t
                                }]).then((function() {
                                    window.addEventListener("vrdisplaypresentchange", n.onExitVr)
                                })).catch((function(t) {
                                    Fe.error("requestPresent Failed:", t), n.trackEvent("webvr_present_error")
                                })), window.dispatchEvent(new Event("vrapp-start"))
                            } else Fe.error("vrDisplay not found, or already presenting"), n.trackEvent("webvr_present_error")
                        }, n.onExitVr = function() {
                            if (!n.vrDisplay.isPresenting) {
                                n.trackEvent("webvr_exit_app"), window.removeEventListener("vrdisplaypresentchange", n.onExitVr);
                                var t = window.location.href; - 1 === window.location.search.indexOf("&qs=1") && (t += "&qs=1"), Fe.info("redirecting to:", t), window.location.replace(t)
                            }
                        }, n.analyticsFn = function(t, e) {
                            return function() {
                                var o = p.m() ? "landscape" : "portrait",
                                    r = {
                                        gui_action: t,
                                        orientation: o
                                    };
                                r = Object.assign(r, e), n.context.analytics.track("showcase_gui", r)
                            }
                        }, n.previous = function() {
                            n.trackEvent(n.isWebVr ? "webvr_modal_prev" : "vr_modal_prev"), n.setState((function(t) {
                                return {
                                    page: t.page - 1
                                }
                            }))
                        }, n.next = function() {
                            n.trackEvent(n.isWebVr ? "webvr_learn_more" : "vr_modal_next"), n.setState((function(t) {
                                return {
                                    page: t.page + 1
                                }
                            }))
                        }, n.state = {
                            showing: !1,
                            page: 0
                        }, n
                    }
                    return Re(e, t), e.prototype.componentDidMount = function() {
                        return Ie(this, void 0, void 0, (function() {
                            var t, e, o, r = this;
                            return Ne(this, (function(i) {
                                switch (i.label) {
                                    case 0:
                                        return [4, n.e(12).then(n.t.bind(null, 1004, 7))];
                                    case 1:
                                        return t = i.sent(), e = new t.default, Fe.debug("WebVR Polyfill version:", e), [4, this.webvrDetected()];
                                    case 2:
                                        return o = i.sent(), this.platform = this.getPlatform(o), this.trackEvent(this.isWebVr(this.platform) ? "click_webvr_button" : "click_vr_button"), [4, this.fillModalPages()];
                                    case 3:
                                        return i.sent(), window.requestAnimationFrame((function() {
                                            r.setState({
                                                showing: !0
                                            })
                                        })), [2]
                                }
                            }))
                        }))
                    }, e.prototype.renderPrevious = function() {
                        var t = this.state.page,
                            e = this.context.locale;
                        return 0 === t ? null : Object(a.h)(Qt.a, {
                            buttonStyle: Qt.d.SECONDARY_LIGHT,
                            onClick: this.previous
                        }, e.t(h.a.VR_PREVIOUS_CAPS))
                    }, e.prototype.renderNext = function() {
                        var t = this.state.page,
                            e = this.context.locale;
                        return t === this.pages.length - 1 ? Object(a.h)(Qt.a, {
                            buttonStyle: Qt.d.LIGHT,
                            onClick: this.onClose
                        }, e.t(h.a.VR_GOT_IT_CAPS)) : Object(a.h)(Qt.a, {
                            buttonStyle: Qt.d.LIGHT,
                            onClick: this.next
                        }, 0 === t ? e.t(h.a.VR_LEARN_MORE_CAPS) : e.t(h.a.VR_NEXT_CAPS))
                    }, e.prototype.fillModalPages = function() {
                        return Ie(this, void 0, void 0, (function() {
                            var t, e, n, o, r;
                            return Ne(this, (function(i) {
                                switch (i.label) {
                                    case 0:
                                        switch (t = new Nt(this.props.modelDetails.sid, this.props.modelDetails, this.context.analytics.getSessionId()), e = [Object(a.h)(Gt, {
                                            key: "openVrApp",
                                            vrLinks: t,
                                            analytics: this.analyticsFn
                                        }), Object(a.h)(te, {
                                            key: "whatYoullNeed",
                                            vrLinks: t,
                                            analytics: this.analyticsFn
                                        })], n = [Object(a.h)(ie, {
                                            key: "openVrApp",
                                            vrLinks: t,
                                            analytics: this.analyticsFn
                                        }), Object(a.h)(ue, {
                                            key: "whatYoullNeedCardboard",
                                            vrLinks: t,
                                            analytics: this.analyticsFn
                                        }), Object(a.h)(ye, {
                                            key: "whatYoullNeedGearVr",
                                            vrLinks: t,
                                            analytics: this.analyticsFn
                                        })], o = [Object(a.h)(we, {
                                            key: "openVrApp",
                                            vrLinks: t,
                                            analytics: this.analyticsFn
                                        }), Object(a.h)(Te, {
                                            key: "whatYoullNeedCardboard",
                                            vrLinks: t,
                                            analytics: this.analyticsFn
                                        }), Object(a.h)(Ce, {
                                            key: "whatYoullNeedGearVr",
                                            vrLinks: t,
                                            analytics: this.analyticsFn
                                        })], r = [Object(a.h)(Kt, {
                                            key: "openWebVrApp",
                                            vrLinks: t,
                                            onEnterVr: this.onWebVrEnter,
                                            next: this.next,
                                            analytics: this.analyticsFn
                                        })], this.platform) {
                                            case Oe.ios:
                                                return [3, 1];
                                            case Oe.android:
                                                return [3, 2];
                                            case Oe.webvrAndroid:
                                                return [3, 3];
                                            case Oe.webvrDesktop:
                                                return [3, 5];
                                            case Oe.desktop:
                                                return [3, 7]
                                        }
                                        return [3, 7];
                                    case 1:
                                        return this.pages = e, [3, 8];
                                    case 2:
                                        return this.pages = n, [3, 8];
                                    case 3:
                                        return this.pages = r.concat(n), [4, this.props.commandBinder.issueCommandWhenBound(new Le.a)];
                                    case 4:
                                        return i.sent(), [3, 8];
                                    case 5:
                                        return this.pages = r.concat(o), [4, this.props.commandBinder.issueCommandWhenBound(new Le.a)];
                                    case 6:
                                        return i.sent(), [3, 8];
                                    case 7:
                                        return this.pages = o, [3, 8];
                                    case 8:
                                        return [2]
                                }
                            }))
                        }))
                    }, e.prototype.render = function() {
                        var t = this.props.isMobile,
                            e = this.state,
                            n = e.page,
                            o = e.showing,
                            r = this.pages.length,
                            i = this.context.locale,
                            s = x("modal", {
                                "faded-in": o,
                                mobile: t,
                                desktop: !t
                            });
                        return Object(a.h)("div", {
                            id: "vrSelect",
                            class: s
                        }, Object(a.h)("div", {
                            class: "modal-title"
                        }, i.t(h.a.VR_VIEW_SPACE)), Object(a.h)(Tt.a, {
                            buttonStyle: Tt.b.LIGHT,
                            onClose: this.onClose
                        }), Object(a.h)("div", {
                            class: "modal-body"
                        }, this.pages[n]), Object(a.h)("div", {
                            class: "modal-footer"
                        }, r > 1 && Object(a.h)("div", {
                            class: "page-display"
                        }, n + 1 + " / " + r), this.renderPrevious(), this.renderNext()))
                    }, e.prototype.getPlatform = function(t) {
                        if (p.l()) {
                            var e = p.h();
                            if (e.major > 9 || 9 === e.major && e.minor >= 1) return Oe.ios
                        } else if (p.i()) {
                            if (t) return Oe.webvrAndroid;
                            var n = p.a();
                            if (n.major > 4 || 4 === n.major && n.minor > 4 || 4 === n.major && 4 === n.minor && n.patch >= 4) return Oe.android
                        }
                        return t ? Oe.webvrDesktop : Oe.desktop
                    }, e.prototype.webvrDetected = function() {
                        return Ie(this, void 0, Promise, (function() {
                            var t, e = this;
                            return Ne(this, (function(n) {
                                switch (n.label) {
                                    case 0:
                                        return t = !1, Fe.debug("isWebVRAvailable:", je.a()), je.a() ? [4, je.b().then((function(n) {
                                            n && (e.vrDisplay = n, t = !0), Fe.debug("vrDisplayPromise:", n)
                                        }))] : [3, 2];
                                    case 1:
                                        n.sent(), n.label = 2;
                                    case 2:
                                        return [2, t]
                                }
                            }))
                        }))
                    }, e.prototype.trackEvent = function(t) {
                        this.analyticsFn(t)()
                    }, e.prototype.isWebVr = function(t) {
                        return t === Oe.webvrAndroid || t === Oe.webvrDesktop
                    }, e = Ae([u.b], e)
                }(a.Component),
                He = (n(698), function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }()),
                Be = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return He(e, t), e.prototype.render = function() {
                        var t = this.props.isMobile,
                            e = this.context.locale;
                        return Object(a.h)("div", {
                            class: "cta"
                        }, Object(a.h)("h1", {
                            class: x({
                                mobile: t
                            })
                        }, e.t(t ? h.a.MOBILE_SHORT_CTA : h.a.DESKTOP_SHORT_CTA)))
                    }, e
                }(a.Component),
                We = {
                    mouse: {
                        click: n(842),
                        clickInside: n(843),
                        dragLeft: n(844),
                        dragRight: n(845),
                        play: n(846),
                        positionLeft: n(847),
                        positionRight: n(848),
                        zoom: n(849)
                    },
                    gesture: {
                        drag: n(850),
                        dragTwoFinger: n(851),
                        pinch: n(852),
                        position: n(853),
                        positionTwoFinger: n(854),
                        tap: n(855),
                        tapInside: n(856),
                        play: n(857)
                    },
                    keyboard: {
                        all: n(858),
                        inside: n(859),
                        leftRight: n(860),
                        spaceBar: n(861),
                        upDown: n(862),
                        zoom: n(863)
                    },
                    moreHelp: {
                        view360: n(864),
                        mattertag: n(865)
                    }
                },
                Ge = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                Qe = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.keys = {
                            header: h.a.DESKTOP_SHORT_CTA,
                            move: h.a.MOVE,
                            inside: h.a.INSIDE,
                            rotate: h.a.ROTATE,
                            play: h.a.PLAY,
                            zoom: h.a.ZOOM
                        }, e.clickInside = {
                            Icon: We.mouse.clickInside,
                            Label: e.keys.inside,
                            FooterIcon: We.keyboard.inside
                        }, e.clickMove = {
                            Icon: We.mouse.positionRight,
                            Label: e.keys.move,
                            FooterIcon: ""
                        }, e.moveUpDown = {
                            Icon: We.mouse.click,
                            Label: e.keys.move,
                            FooterIcon: We.keyboard.upDown
                        }, e.play = {
                            Icon: We.mouse.play,
                            Label: e.keys.play,
                            FooterIcon: null
                        }, e.zoom = {
                            Icon: We.mouse.zoom,
                            Label: e.keys.zoom,
                            FooterIcon: We.keyboard.zoom
                        }, e.dragMove = {
                            Icon: We.mouse.positionLeft,
                            Label: e.keys.move,
                            FooterIcon: null
                        }, e.dragRotateLeft = {
                            Icon: We.mouse.dragLeft,
                            Label: e.keys.rotate,
                            FooterIcon: We.keyboard.leftRight
                        }, e.dragRotateRight = {
                            Icon: We.mouse.dragRight,
                            Label: e.keys.rotate,
                            FooterIcon: We.keyboard.leftRight
                        }, e.left = e.clickInside, e.center = e.clickMove, e.right = e.play, e
                    }
                    return Ge(e, t), e.prototype.render = function() {
                        var t = this.props.viewmode,
                            e = this.context.locale;
                        return this.configureViewmodeSpecifics(t), Object(a.h)("div", {
                            class: x({
                                cta: !0
                            })
                        }, Object(a.h)("h1", null, e.t(this.keys.header)), Object(a.h)("h2", null, e.t(this.left.Label)), Object(a.h)("img", {
                            src: this.left.Icon
                        }), this.left.FooterIcon ? Object(a.h)("hr", null) : Object(a.h)("span", null), this.left.FooterIcon ? Object(a.h)("img", {
                            class: "footer-icon",
                            src: this.left.FooterIcon
                        }) : Object(a.h)("span", null), Object(a.h)("h2", null, e.t(this.center.Label)), Object(a.h)("img", {
                            src: this.center.Icon
                        }), this.center.FooterIcon ? Object(a.h)("hr", null) : Object(a.h)("span", null), this.center.FooterIcon ? Object(a.h)("img", {
                            class: "footer-icon",
                            src: this.center.FooterIcon
                        }) : Object(a.h)("span", null), Object(a.h)("h2", null, e.t(this.right.Label)), Object(a.h)("img", {
                            src: this.right.Icon
                        }), this.right.FooterIcon ? Object(a.h)("hr", null) : Object(a.h)("span", null), this.right.FooterIcon ? Object(a.h)("img", {
                            class: "footer-icon",
                            src: this.right.FooterIcon
                        }) : Object(a.h)("span", null))
                    }, e.prototype.configureViewmodeSpecifics = function(t) {
                        switch (t) {
                            case U.b.INSIDE:
                                this.left = this.dragRotateLeft, this.center = this.moveUpDown, this.right = this.props.isHelpCta ? this.zoom : this.play;
                                break;
                            case U.b.OUTSIDE:
                            case U.b.DOLLHOUSE:
                                this.left = this.dragRotateLeft, this.center = this.clickMove, this.right = this.clickInside;
                                break;
                            case U.b.FLOORPLAN:
                                this.left = this.dragMove, this.center = this.dragRotateRight, this.right = this.clickInside
                        }
                    }, e
                }(a.Component),
                Ye = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                qe = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.keys = {
                            shortCta: h.a.MOBILE_SHORT_CTA,
                            move: h.a.MOVE,
                            inside: h.a.INSIDE,
                            rotate: h.a.ROTATE,
                            play: h.a.PLAY,
                            zoom: h.a.ZOOM
                        }, e.clickInside = {
                            Icon: We.gesture.tapInside,
                            Label: e.keys.inside
                        }, e.clickMove = {
                            Icon: We.gesture.tap,
                            Label: e.keys.move
                        }, e.dragRotate = {
                            Icon: We.gesture.drag,
                            Label: e.keys.rotate
                        }, e.dragMove = {
                            Icon: We.gesture.position,
                            Label: e.keys.move
                        }, e.play = {
                            Icon: We.gesture.play,
                            Label: e.keys.play
                        }, e.zoom = {
                            Icon: We.gesture.pinch,
                            Label: e.keys.zoom
                        }, e.left = e.dragRotate, e.center = e.clickInside, e.right = e.play, e
                    }
                    return Ye(e, t), e.prototype.render = function() {
                        var t = x({
                                mobile: !0
                            }),
                            e = this.props.viewmode,
                            n = this.context.locale;
                        return this.configureViewmodeSpecifics(e), Object(a.h)("div", {
                            class: x({
                                cta: !0,
                                mobile: !0
                            })
                        }, Object(a.h)("h1", {
                            class: t
                        }, n.t(this.keys.shortCta)), Object(a.h)("h2", {
                            class: t
                        }, n.t(this.left.Label)), Object(a.h)("img", {
                            src: this.left.Icon
                        }), Object(a.h)("h2", {
                            class: t
                        }, n.t(this.center.Label)), Object(a.h)("img", {
                            src: this.center.Icon
                        }), Object(a.h)("h2", {
                            class: t
                        }, n.t(this.right.Label)), Object(a.h)("img", {
                            src: this.right.Icon
                        }))
                    }, e.prototype.configureViewmodeSpecifics = function(t) {
                        switch (t) {
                            case U.b.INSIDE:
                                this.left = this.dragRotate, this.center = this.clickMove, this.right = this.props.isHelpCta ? this.zoom : this.play;
                                break;
                            case U.b.DOLLHOUSE:
                            case U.b.OUTSIDE:
                                this.left = this.dragRotate, this.center = this.clickInside, this.right = this.props.isHelpCta ? this.zoom : this.play;
                                break;
                            case U.b.FLOORPLAN:
                                this.left = this.dragMove, this.center = this.clickInside, this.right = this.props.isHelpCta ? this.zoom : this.play
                        }
                    }, e
                }(a.Component),
                Ke = n(530),
                Ze = n(66),
                Xe = n(15),
                Je = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                $e = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                tn = new D.a("cta"),
                en = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.styles = [Ue.NONE], n.modal = "cta", n.state = {
                            ctaSource: ze.TOUR,
                            seenCta: !1,
                            style: n.styles[0]
                        }, n
                    }
                    return Je(e, t), e.prototype.onStart = function(t) {
                        this.showAtStart && t.phase === Xe.a.PLAYING && this.props.toggleOpen(this.modal, !0, !1)
                    }, e.prototype.handleInteraction = function() {
                        this.props.showCta && !this.state.seenCta && (this.setState({
                            seenCta: !0
                        }), this.props.toggleOpen(this.modal, !1, !1))
                    }, e.prototype.componentDidMount = function() {
                        try {
                            this.onTourStopped = this.onTourStopped.bind(this), this.onTourStarted = this.onTourStarted.bind(this), this.onStart = this.onStart.bind(this), this.handleInteraction = this.handleInteraction.bind(this), this.props.canvas && (this.props.canvas.addEventListener("mousedown", this.handleInteraction), this.props.canvas.addEventListener("pointerdown", this.handleInteraction), this.props.canvas.addEventListener("touchstart", this.handleInteraction)), this.context.messageBus.subscribe(Ke.f, this.onTourStopped), this.context.messageBus.subscribe(Ke.a, this.onTourStopped), this.context.messageBus.subscribe(Ke.c, this.onTourStarted), this.context.messageBus.subscribe(Ze.a, this.onStart)
                        } catch (t) {
                            tn.debug(t)
                        }
                        var t = this.state.ctaSource,
                            e = parseInt(this.context.settings.tryGetProperty("tourcta", 1), 10);
                        !isNaN(e) && e in Ue && (this.styles[0] = e, t = ze.TOUR);
                        var n = parseInt(this.context.settings.tryGetProperty("help", 0), 10);
                        if (!isNaN(n) && n in Ue && n !== Ue.NONE) {
                            this.styles[0] === Ue.NONE ? this.styles[0] = n : this.styles.unshift(n), t = ze.HELP;
                            var o = 1 === this.context.settings.tryGetProperty("ts", 0),
                                r = 1 === this.context.settings.tryGetProperty("qs", 0);
                            o || (r ? this.props.toggleOpen(this.modal, !0, !1) : this.showAtStart = !0)
                        }
                        this.styles[0] !== Ue.NONE && this.setState({
                            style: this.styles[0],
                            ctaSource: t
                        })
                    }, e.prototype.componentWillUnmount = function() {
                        this.context.messageBus.unsubscribe(Ke.f, this.onTourStopped), this.context.messageBus.unsubscribe(Ke.a, this.onTourStopped), this.context.messageBus.unsubscribe(Ke.c, this.onTourStarted), this.context.messageBus.unsubscribe(Ze.a, this.onStart), this.props.canvas && (this.props.canvas.removeEventListener("mousedown", this.handleInteraction), this.props.canvas.removeEventListener("pointerdown", this.handleInteraction), this.props.canvas.removeEventListener("touchstart", this.handleInteraction))
                    }, e.prototype.render = function() {
                        var t = {
                            ctaContainer: !0,
                            mobile: this.props.isMobile,
                            showMessage: this.props.showCta,
                            small: this.state.style === Ue.SMALL,
                            helpCta: this.state.ctaSource === ze.HELP
                        };
                        return Object(a.h)("div", {
                            id: "cta-container",
                            class: x(t)
                        }, this.chooseCtaStyle())
                    }, e.prototype.chooseCtaStyle = function() {
                        var t = this.props.isMobile,
                            e = this.props.viewmode;
                        switch (this.state.style) {
                            case Ue.NONE:
                                return null;
                            case Ue.SMALL:
                                return Object(a.h)(Be, {
                                    isMobile: this.props.isMobile
                                });
                            case Ue.LARGE:
                                return t ? Object(a.h)(qe, {
                                    isMobile: t,
                                    viewmode: e,
                                    isHelpCta: this.state.ctaSource === ze.HELP
                                }) : Object(a.h)(Qe, {
                                    viewmode: e,
                                    isHelpCta: this.state.ctaSource === ze.HELP
                                })
                        }
                    }, e.prototype.onTourStopped = function() {
                        this.state.ctaSource !== ze.TOUR || this.state.seenCta || this.props.toggleOpen(this.modal, !0, !1)
                    }, e.prototype.onTourStarted = function() {
                        this.state.ctaSource === ze.HELP && 2 === this.styles.length && this.setState({
                            ctaSource: ze.TOUR,
                            seenCta: !1,
                            style: this.styles[1]
                        }), this.props.showCta && this.props.toggleOpen(this.modal, !1, !1)
                    }, e = $e([u.b], e)
                }(a.Component);
            ! function(t) {
                t[t.NONE = 0] = "NONE", t[t.LARGE = 1] = "LARGE", t[t.SMALL = 2] = "SMALL"
            }(Ue || (Ue = {})),
            function(t) {
                t[t.HELP = 0] = "HELP", t[t.TOUR = 1] = "TOUR"
            }(ze || (ze = {}));
            var nn, on, rn, an, sn, cn, ln, un, pn, hn, dn, fn, yn, vn, mn, gn, bn, wn, On, Sn, xn, Pn, _n, Tn, Dn, kn, Mn, En, Cn, jn, Ln, Rn, An, In, Nn;
            n(866);
            ! function(t) {
                t[t.navigation = 0] = "navigation", t[t.moreHelp = 1] = "moreHelp"
            }(nn || (nn = {})),
            function(t) {
                t.left = "left", t.middle = "middle", t.right = "right"
            }(on || (on = {})),
            function(t) {
                t.topInfo = "topInfo", t.bigImage = "bigImage", t.bottomInfo = "bottomInfo", t.keyboard = "keyboard"
            }(rn || (rn = {})),
            function(t) {
                t.desktop = "desktop", t.mobile = "mobile"
            }(an || (an = {})),
            function(t) {
                t.hlr = "hlr", t.dollhouse = "dollhouse", t.floors = "floors", t.mattertag = "mattertag", t.floorplan = "floorplan", t.tour = "tour", t.inside = "inside", t.vr = "vr", t.view360 = "view360", t.fullscreen = "fullscreen"
            }(sn || (sn = {})),
            function(t) {
                t.landscape = "landscape", t.portrait = "portrait"
            }(cn || (cn = {}));
            var Fn = ((ln = {})[an.desktop] = ((un = {})[on.left] = ((pn = {})[rn.topInfo] = "HELP_DESKTOP_PANORAMA_1A", pn[rn.bottomInfo] = "HELP_DESKTOP_PANORAMA_1B", pn[rn.bigImage] = We.mouse.dragLeft, pn[rn.keyboard] = We.keyboard.leftRight, pn), un[on.middle] = ((hn = {})[rn.topInfo] = "HELP_DESKTOP_PANORAMA_2A", hn[rn.bottomInfo] = "HELP_DESKTOP_PANORAMA_2B", hn[rn.bigImage] = We.mouse.click, hn[rn.keyboard] = We.keyboard.upDown, hn), un[on.right] = ((dn = {})[rn.topInfo] = "HELP_DESKTOP_PANORAMA_3A", dn[rn.bottomInfo] = "HELP_DESKTOP_PANORAMA_3B", dn[rn.bigImage] = We.mouse.zoom, dn[rn.keyboard] = We.keyboard.zoom, dn), un), ln[an.mobile] = ((fn = {})[on.left] = ((yn = {})[rn.topInfo] = "HELP_MOBILE_PANORAMA_1", yn[rn.bigImage] = We.gesture.drag, yn), fn[on.middle] = ((vn = {})[rn.topInfo] = "HELP_MOBILE_PANORAMA_2", vn[rn.bigImage] = We.gesture.tap, vn), fn[on.right] = ((mn = {})[rn.topInfo] = "HELP_MOBILE_3", mn[rn.bigImage] = We.gesture.pinch, mn), fn), ln),
                Un = ((gn = {})[an.desktop] = ((bn = {})[on.left] = ((wn = {})[rn.topInfo] = "HELP_DESKTOP_DOLLHOUSE_1A", wn[rn.bottomInfo] = "HELP_DESKTOP_DOLLHOUSE_1B", wn[rn.bigImage] = We.mouse.dragLeft, wn[rn.keyboard] = We.keyboard.all, wn), bn[on.middle] = ((On = {})[rn.topInfo] = "HELP_DESKTOP_DOLLHOUSE_2A", On[rn.bigImage] = We.mouse.positionRight, On), bn[on.right] = ((Sn = {})[rn.topInfo] = "HELP_DESKTOP_DOLLHOUSE_3A", Sn[rn.bigImage] = We.mouse.zoom, Sn), bn), gn[an.mobile] = ((xn = {})[on.left] = ((Pn = {})[rn.topInfo] = "HELP_MOBILE_DOLLHOUSE_1", Pn[rn.bigImage] = We.gesture.drag, Pn), xn[on.middle] = ((_n = {})[rn.topInfo] = "HELP_MOBILE_DOLLHOUSE_2", _n[rn.bigImage] = We.gesture.positionTwoFinger, _n), xn[on.right] = ((Tn = {})[rn.topInfo] = "HELP_MOBILE_3", Tn[rn.bigImage] = We.gesture.pinch, Tn), xn), gn),
                zn = ((Dn = {})[an.desktop] = ((kn = {})[on.left] = ((Mn = {})[rn.topInfo] = "HELP_DESKTOP_FLOORPLAN_1A", Mn[rn.bigImage] = We.mouse.positionLeft, Mn), kn[on.middle] = ((En = {})[rn.topInfo] = "HELP_DESKTOP_FLOORPLAN_2A", En[rn.bottomInfo] = "HELP_DESKTOP_FLOORPLAN_2B", En[rn.bigImage] = We.mouse.dragRight, En[rn.keyboard] = We.keyboard.leftRight, En), kn[on.right] = ((Cn = {})[rn.topInfo] = "HELP_DESKTOP_FLOORPLAN_3A", Cn[rn.bottomInfo] = "HELP_DESKTOP_FLOORPLAN_3B", Cn[rn.bigImage] = We.mouse.zoom, Cn[rn.keyboard] = We.keyboard.upDown, Cn), kn), Dn[an.mobile] = ((jn = {})[on.left] = ((Ln = {})[rn.topInfo] = "HELP_MOBILE_FLOORPLAN_1", Ln[rn.bigImage] = We.gesture.position, Ln), jn[on.middle] = ((Rn = {})[rn.topInfo] = "HELP_MOBILE_FLOORPLAN_2", Rn[rn.bigImage] = We.gesture.dragTwoFinger, Rn), jn[on.right] = ((An = {})[rn.topInfo] = "HELP_MOBILE_3", An[rn.bigImage] = We.gesture.pinch, An), jn), Dn),
                Vn = JSON.parse(JSON.stringify(Fn));
            Vn.desktop.middle = ((In = {})[rn.topInfo] = "HELP_DESKTOP_360_2A", In[rn.bottomInfo] = "HELP_DESKTOP_360_2B", In[rn.bigImage] = We.mouse.clickInside, In[rn.keyboard] = We.keyboard.inside, In), Vn.mobile.middle = ((Nn = {})[rn.topInfo] = "HELP_MOBILE_360_2", Nn[rn.bigImage] = We.gesture.tapInside, Nn);
            var Hn, Bn, Wn, Gn, Qn, Yn, qn, Kn, Zn, Xn, Jn, $n, to = {
                    INSIDE: Fn,
                    OUTSIDE: Vn,
                    FLOORPLAN: zn,
                    DOLLHOUSE: Un
                },
                eo = (n(868), n(146)),
                no = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                oo = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                ro = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.state = {
                            overflow: !1
                        }, n
                    }
                    return no(e, t), e.prototype.componentWillReceiveProps = function(t) {
                        (this.navigationDiv && this.navigationDiv.clientHeight || 0) / (this.navigationDiv.parentElement && this.navigationDiv.parentElement.clientHeight || 1) > .7 && this.setState({
                            overflow: !0
                        })
                    }, e.prototype.getAssetObj = function(t) {
                        switch (t) {
                            case this.props.Modes.DOLLHOUSE:
                                return to.DOLLHOUSE[this.props.device];
                            case this.props.Modes.FLOORPLAN:
                                return to.FLOORPLAN[this.props.device];
                            case this.props.Modes.OUTSIDE:
                                return to.OUTSIDE[this.props.device];
                            case this.props.Modes.INSIDE:
                            default:
                                return to.INSIDE[this.props.device]
                        }
                    }, e.prototype.buildRows = function() {
                        var t = this.getAssetObj(this.props.viewmode),
                            e = [];
                        for (var n in rn) {
                            var o = [],
                                r = [];
                            for (var i in on)
                                if (o.push(this.wrapAsset(t, i, n, !1)), n === rn.bigImage) {
                                    var s = !t[i][rn.bottomInfo];
                                    r.push(Object(a.h)("div", {
                                        class: x(i, "column", {
                                            noDivider: s
                                        })
                                    }, Object(a.h)("hr", null)))
                                }
                            e.push(Object(a.h)("div", {
                                class: x(n, "row")
                            }, o))
                        }
                        return e
                    }, e.prototype.buildMobilePortrait = function() {
                        var t = this.getAssetObj(this.props.viewmode),
                            e = [];
                        for (var n in t)
                            for (var o in t[n]) e.push(this.wrapAsset(t, n, o, !0));
                        return e
                    }, e.prototype.wrapAsset = function(t, e, n, o) {
                        var r = t[e][n],
                            i = n === rn.bigImage || n === rn.keyboard;
                        return Object(a.h)("div", {
                            class: o ? x(n, "row") : x(e, "column")
                        }, r && i ? Object(a.h)("img", {
                            src: r
                        }) : r && this.context.locale.t(r))
                    }, e.prototype.render = function() {
                        var t, e = this,
                            n = this.props.device === an.mobile && this.props.orientation === eo.a.PORTRAIT,
                            o = x(((t = {
                                navigation: !0,
                                small: this.state.overflow
                            })[this.props.viewmode] = !0, t));
                        return Object(a.h)("div", {
                            class: o,
                            ref: function(t) {
                                e.navigationDiv = t
                            }
                        }, n ? Object(a.h)(_t.a, {
                            name: "navigation",
                            forceHidden: !1
                        }, Object(a.h)("div", {
                            class: "nav-wrapper"
                        }, this.buildMobilePortrait())) : this.buildRows())
                    }, e = oo([u.b], e)
                }(a.Component),
                io = ((Hn = {})[sn.hlr] = ((Bn = {})[rn.topInfo] = "HELP_MORE_HLR_A", Bn[rn.bigImage] = "icon-hlr", Bn[rn.bottomInfo] = "HELP_DESKTOP_MORE_HLR_B", Bn), Hn[sn.dollhouse] = ((Wn = {})[rn.topInfo] = "HELP_MORE_DOLLHOUSE_A", Wn[rn.bigImage] = "icon-dollhouse", Wn[rn.bottomInfo] = "HELP_MOBILE_MORE_DOLLHOUSE_B", Wn), Hn[sn.floors] = ((Gn = {})[rn.topInfo] = "HELP_MORE_FLOORS_A", Gn[rn.bigImage] = "icon-floor-controls", Gn[rn.bottomInfo] = "HELP_DESKTOP_MORE_FLOORS_B", Gn), Hn[sn.mattertag] = ((Qn = {})[rn.topInfo] = "HELP_MORE_MATTERTAG_A", Qn[rn.bigImage] = We.moreHelp.mattertag, Qn[rn.bottomInfo] = "HELP_MOBILE_MORE_MATTERTAG_B", Qn), Hn[sn.tour] = ((Yn = {})[rn.topInfo] = "HELP_MORE_TOUR_A", Yn[rn.bigImage] = "icon-play", Yn[rn.bottomInfo] = "HELP_DESKTOP_MORE_TOUR_B", Yn), Hn[sn.inside] = ((qn = {})[rn.topInfo] = "HELP_MORE_INSIDE_A", qn[rn.bigImage] = "icon-panorama", qn[rn.bottomInfo] = "HELP_MOBILE_MORE_INSIDE_B", qn), Hn[sn.vr] = ((Kn = {})[rn.topInfo] = "HELP_MORE_VR_A", Kn[rn.bigImage] = "icon-vr", Kn[rn.bottomInfo] = "HELP_MOBILE_MORE_VR_B", Kn), Hn[sn.view360] = ((Zn = {})[rn.topInfo] = "HELP_MORE_360_A", Zn[rn.bigImage] = We.moreHelp.view360, Zn[rn.bottomInfo] = "HELP_MOBILE_MORE_360_B", Zn), Hn[sn.floorplan] = ((Xn = {})[rn.topInfo] = "HELP_MORE_FLOORPLAN_A", Xn[rn.bigImage] = "icon-floorplan", Xn[rn.bottomInfo] = "HELP_MOBILE_FLOORPLAN_B", Xn), Hn),
                ao = JSON.parse(JSON.stringify(io));
            ao[sn.fullscreen] = ((Jn = {})[rn.topInfo] = "HELP_MORE_FULLSCREEN_A", Jn[rn.bigImage] = "icon-fullscreen", Jn[rn.bottomInfo] = "HELP_DESKTOP_MORE_FULLSCREEN_B", Jn), ao[sn.dollhouse][rn.bottomInfo] = "HELP_DESKTOP_MORE_DOLLHOUSE_B", ao[sn.mattertag][rn.bottomInfo] = "HELP_DESKTOP_MORE_MATTERTAG_B", ao[sn.inside][rn.bottomInfo] = "HELP_DESKTOP_MORE_INSIDE_B", ao[sn.vr][rn.bottomInfo] = "HELP_DESKTOP_MORE_VR_B", ao[sn.view360][rn.bottomInfo] = "HELP_DESKTOP_MORE_360_B", ao[sn.floorplan][rn.bottomInfo] = "HELP_DESKTOP_FLOORPLAN_B";
            var so, co, lo, uo = (($n = {})[an.desktop] = ao, $n[an.mobile] = io, $n),
                po = (n(870), function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }()),
                ho = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                fo = [rn.topInfo, rn.bigImage, rn.bottomInfo],
                yo = function(t) {
                    function e(e) {
                        return t.call(this, e) || this
                    }
                    return po(e, t), e.prototype.componentDidMount = function() {
                        this.scrollbars.scrollTo({
                            x: 0,
                            y: 0
                        })
                    }, e.prototype.buildInstructions = function() {
                        for (var t, e, n = [], o = this.props.device === an.desktop ? 5 : this.props.orientation === eo.a.LANDSCAPE ? 3 : 2, r = Object.keys(uo[this.props.device]), i = 0; i < r.length; i += o) {
                            try {
                                for (var s = ho(fo), c = s.next(); !c.done; c = s.next()) {
                                    for (var l = c.value, u = [], p = 0; p < o; p++)
                                        if (!(i + p >= r.length)) {
                                            var h = uo[this.props.device][r[i + p]][l],
                                                d = x(l, r[i + p], {
                                                    noAsset: !h
                                                });
                                            switch (l) {
                                                case rn.topInfo:
                                                    u.push(Object(a.h)("div", {
                                                        class: d
                                                    }, this.context.locale.t(h)));
                                                    break;
                                                case rn.bigImage:
                                                    u.push(Object(a.h)("div", {
                                                        class: d
                                                    }, h.indexOf(".png") > -1 ? Object(a.h)("img", {
                                                        src: h
                                                    }) : Object(a.h)("span", {
                                                        class: h
                                                    }, "floors" === r[i + p] ? Object(a.h)("span", null, "2") : null)));
                                                    break;
                                                case rn.bottomInfo:
                                                    u.push(Object(a.h)("div", {
                                                        class: d
                                                    }, this.context.locale.t(h)))
                                            }
                                        }
                                    n.push(Object(a.h)("div", {
                                        class: x("innerRow", l)
                                    }, u))
                                }
                            } catch (e) {
                                t = {
                                    error: e
                                }
                            } finally {
                                try {
                                    c && !c.done && (e = s.return) && e.call(s)
                                } finally {
                                    if (t) throw t.error
                                }
                            }
                            n.push(Object(a.h)("div", {
                                class: "rowPadding"
                            }))
                        }
                        return n.pop(), n
                    }, e.prototype.render = function() {
                        var t = this;
                        return Object(a.h)("div", {
                            class: x("more-help-wrapper", this.props.device)
                        }, Object(a.h)(_t.a, {
                            name: "more-help-wrapper",
                            ref: function(e) {
                                return t.scrollbars = e
                            },
                            forceHidden: !1
                        }, Object(a.h)("div", {
                            class: x("more-help")
                        }, this.buildInstructions())))
                    }, e
                }(a.Component),
                vo = (n(872), function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }()),
                mo = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                go = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.setOrientation = function(t) {
                            n.setState({
                                orientation: t
                            })
                        }, n.handleTabClick = function(t) {
                            return function() {
                                n.setState({
                                    tab: t
                                })
                            }
                        }, n.closeHelp = function() {
                            n.setState({
                                showing: !1
                            }), n.props.toggleOpen(d.a.help, !1)
                        }, n.device = n.props.isMobile ? an.mobile : an.desktop, n.state = {
                            showing: !1,
                            tab: nn.navigation,
                            orientation: Object(eo.d)()
                        }, n.orientationSubscription = Object(eo.c)(eo.b.ORIENTATION_CHANGED, n.setOrientation), n
                    }
                    return vo(e, t), e.prototype.componentDidMount = function() {
                        var t = this;
                        this.orientationSubscription.renew(), window.requestAnimationFrame((function() {
                            t.setState({
                                showing: !0
                            })
                        }))
                    }, e.prototype.componentWillUnmount = function() {
                        this.orientationSubscription.cancel()
                    }, e.prototype.render = function() {
                        var t = this.state,
                            e = t.showing,
                            n = t.tab,
                            o = t.orientation;
                        return Object(a.h)("div", {
                            id: "help-modal",
                            class: x(this.device, {
                                "faded-in": e
                            })
                        }, Object(a.h)("div", {
                            class: x("tabs", n)
                        }, Object(a.h)("div", {
                            class: x("navigation-tab", {
                                active: n === nn.navigation
                            }),
                            onClick: this.handleTabClick(nn.navigation)
                        }, Object(a.h)("span", null, this.context.locale.t(h.a.HELP_NAVIGATION_TAB))), Object(a.h)("div", {
                            class: x("more-help-tab", {
                                active: n === nn.moreHelp
                            }),
                            onClick: this.handleTabClick(nn.moreHelp)
                        }, Object(a.h)("span", null, this.context.locale.t(h.a.HELP_MORE_HELP_TAB)))), n === nn.navigation && Object(a.h)(ro, {
                            device: this.device,
                            Modes: this.props.allModes,
                            viewmode: this.props.viewmode,
                            orientation: o
                        }), n === nn.moreHelp && Object(a.h)(yo, {
                            device: this.device,
                            orientation: o
                        }), Object(a.h)(Tt.a, {
                            buttonStyle: Tt.b.LIGHT,
                            onClose: this.closeHelp
                        }))
                    }, e = mo([u.b], e)
                }(a.Component),
                bo = n(221),
                wo = (n(874), function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }()),
                Oo = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.closeIframe = function() {
                            n.props.toggleOpen(d.a.mattertagEmbLink, !1), n.setState({
                                url: "",
                                isIframeOpen: !1
                            })
                        }, n.setIFrameOpen = function(t) {
                            t.embed && (n.props.toggleOpen(d.a.mattertagEmbLink, !0), n.setState({
                                isIframeOpen: !0,
                                url: t.url
                            }))
                        }, n
                    }
                    return wo(e, t), e.prototype.componentDidMount = function() {
                        this.context.messageBus.subscribe(bo.c, this.setIFrameOpen)
                    }, e.prototype.componentWillUnmount = function() {
                        this.context.messageBus.unsubscribe(bo.c, this.setIFrameOpen)
                    }, e.prototype.render = function() {
                        return this.state.url ? Object(a.h)("div", {
                            class: "mattertag-emb-link"
                        }, Object(a.h)("iframe", {
                            id: "mattertag-emb-iframe",
                            name: "mattertagEmb",
                            sandbox: "allow-forms allow-scripts allow-same-origin allow-presentation"
                        }), Object(a.h)(Tt.a, {
                            buttonStyle: Tt.b.SHADOW,
                            onClose: this.closeIframe
                        })) : null
                    }, e
                }(a.Component),
                So = n(505),
                xo = n(2),
                Po = n(173),
                _o = n(61),
                To = n(188),
                Do = n(60),
                ko = n(113),
                Mo = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                Eo = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                Co = function(t, e) {
                    var n = "function" == typeof Symbol && t[Symbol.iterator];
                    if (!n) return t;
                    var o, r, i = n.call(t),
                        a = [];
                    try {
                        for (;
                            (void 0 === e || e-- > 0) && !(o = i.next()).done;) a.push(o.value)
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    return a
                };
            ! function(t) {
                t.MAIL = "mail", t.PINTEREST = "pinterest", t.LINKEDIN = "linkedin", t.TWITTER = "twitter", t.FACEBOOK = "facebook", t.COPYLINK = "copylink", t.NATIVE = "native"
            }(lo || (lo = {}));
            var jo = lo.FACEBOOK,
                Lo = lo.TWITTER,
                Ro = lo.MAIL,
                Ao = lo.PINTEREST,
                Io = lo.LINKEDIN,
                No = lo.COPYLINK,
                Fo = lo.NATIVE,
                Uo = window.location.origin + "/show/",
                zo = ((so = {})[Ro] = "em", so[Ao] = "pn", so[Io] = "ln", so[Lo] = "tw", so[jo] = "fb", so[No] = "cp", so[Fo] = "os", so),
                Vo = ((co = {})[jo] = {
                    width: 626,
                    height: 436
                }, co[Lo] = {
                    width: 550,
                    height: 440
                }, co[Ao] = {
                    width: 750,
                    height: 749
                }, co[Io] = {
                    width: 550,
                    height: 453
                }, co[No] = {}, co[Ro] = {}, co[Fo] = {}, co),
                Ho = function(t, e) {
                    return void 0 === e && (e = !0), Mo(void 0, void 0, void 0, (function() {
                        var n, o, r, i, a, s, c, l;
                        return Eo(this, (function(u) {
                            switch (u.label) {
                                case 0:
                                    return n = {}, e ? [4, Promise.all([t.engine.market.waitForData(Do.a), t.engine.market.waitForData(ko.a), t.engine.market.waitForData(To.c), t.engine.market.waitForData(_o.a)])] : [3, 2];
                                case 1:
                                    return o = Co.apply(void 0, [u.sent(), 4]), r = o[0], i = o[1], a = o[2], s = o[3], n = Po.a.serialize({
                                        cameraData: s,
                                        viewmodeData: i,
                                        floorsViewData: a,
                                        sweepData: r
                                    }), [3, 3];
                                case 2:
                                    n = Po.a.removeNavigationKeys(p.s()), u.label = 3;
                                case 3:
                                    return c = ["ref", "gclid", "fbclid"], Object.keys(n).forEach((function(t) {
                                        (c.includes(t) || 0 === t.indexOf("utm_")) && delete n[t]
                                    })), l = Object.keys(n).map((function(t) {
                                        return t + "=" + n[t]
                                    })).join("&"), [2, Uo + "?" + l]
                            }
                        }))
                    }))
                },
                Bo = function(t) {
                    return Object.keys(t).map((function(e) {
                        return e + "=" + encodeURIComponent(t[e])
                    })).join("&")
                },
                Wo = function(t, e, n, o) {
                    var r;
                    return (r = {})[jo] = function(t, e, n) {
                        var o = t.replace("?", "?ref=" + zo[jo] + "&");
                        return "http://www.facebook.com/sharer.php?" + Bo({
                            display: "popup",
                            u: o
                        })
                    }(t), r[Lo] = function(t, e, n) {
                        var o = t.replace("?", "?ref=" + zo[Lo] + "&"),
                            r = {
                                text: n.t(h.a.SHARED_MESSAGE_HASHTAG, {
                                    title: e,
                                    url: o,
                                    hashtag: "#Matterport"
                                })
                            };
                        return "http://twitter.com/intent/tweet?" + Bo(r)
                    }(t, e, o), r[Ro] = function(t, e, n) {
                        var o = t.replace("?", "?ref=" + zo[Ro] + "&"),
                            r = {
                                subject: n.t(h.a.SHARED_TITLE, {
                                    title: e
                                }),
                                body: n.t(h.a.SHARED_MESSAGE, {
                                    title: e,
                                    url: o
                                })
                            };
                        return "mailto:?" + Bo(r)
                    }(t, e, o), r[Ao] = function(t, e, n, o) {
                        var r = {
                            url: t.replace("?", "?ref=" + zo[Ao] + "&"),
                            media: n,
                            description: o.t(h.a.SHARED_TITLE, {
                                title: e
                            })
                        };
                        return "http://pinterest.com/pin/create/link/?" + Bo(r)
                    }(t, e, n, o), r[Io] = function(t, e, n) {
                        var o = t.replace("?", "?ref=" + zo[Io] + "&");
                        return "https://www.linkedin.com/shareArticle?" + Bo({
                            mini: "true",
                            url: o
                        })
                    }(t), r[No] = t, r[Fo] = t, r
                },
                Go = (n(876), function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }()),
                Qo = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                Yo = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                qo = function(t, e) {
                    var n = "function" == typeof Symbol && t[Symbol.iterator];
                    if (!n) return t;
                    var o, r, i = n.call(t),
                        a = [];
                    try {
                        for (;
                            (void 0 === e || e-- > 0) && !(o = i.next()).done;) a.push(o.value)
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    return a
                },
                Ko = new D.a("share-modal"),
                Zo = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.copyURL = function() {
                            var t = n.state.deeplink;
                            n.urlInputRef.select(), document.execCommand("copy"), window.getSelection().removeAllRanges(), n.urlInputRef.blur(), n.setState({
                                copied: !0
                            }), n.context.analytics.track("showcase_share_action", {
                                channel: lo.COPYLINK,
                                pano_id: n.sweepData.currentSweep,
                                deeplink: t
                            }), window.setTimeout((function() {
                                n.setState({
                                    copied: !1
                                })
                            }), 2500)
                        }, n.toggleDeeplinks = function() {
                            var t = n.state.deeplink;
                            n.setState({
                                deeplink: !t
                            })
                        }, n.close = function() {
                            n.props.toggleOpen(d.a.share, !1)
                        }, n.openShareWindow = function(t) {
                            var e, o = n.state,
                                r = o.urls,
                                i = o.deeplink,
                                a = o.deeplinkUrls,
                                s = Vo[t],
                                c = s.width,
                                l = s.height,
                                u = i ? a[t] : r[t];
                            c && l && (e = "top=" + (window.screenY + (window.innerHeight - l) / 2) + ",left=" + (window.screenX + (window.innerWidth - c) / 2) + ",width=" + c + ",height=" + l);
                            n.context.analytics.track("showcase_share_action", {
                                channel: t,
                                pano_id: n.sweepData.currentSweep,
                                deeplink: i
                            }), window.open(u, "", e)
                        }, n.openWebShareApi = function(t) {
                            if (navigator.share) {
                                var e = n.state,
                                    o = e.excerpt,
                                    r = e.title,
                                    i = e.urls,
                                    a = e.deeplinkUrls,
                                    s = {
                                        url: t ? a[lo.COPYLINK] : i[lo.COPYLINK],
                                        text: o,
                                        title: r
                                    };
                                Ko.debug("Launching Web Share API", s), navigator.share(s), n.context.analytics.track("showcase_share_action", {
                                    channel: lo.NATIVE,
                                    pano_id: n.sweepData.currentSweep,
                                    deeplink: t
                                })
                            }
                        }, n.onWebShareClick = function() {
                            n.openWebShareApi(!1)
                        }, n.onWebShareDeeplinkClick = function() {
                            n.openWebShareApi(!0)
                        }, n.stopPropagation = function(t) {
                            return t.stopPropagation()
                        }, n.setUrlInputRef = function(t) {
                            n.urlInputRef = t
                        }, n.state = {
                            urls: {},
                            deeplinkUrls: {},
                            title: "",
                            excerpt: "",
                            image: "",
                            copied: !1,
                            deeplink: !1,
                            webShareEnabled: Object(p.p)()
                        }, n.openFacebook = n.openShareWindow.bind(n, lo.FACEBOOK), n.openTwitter = n.openShareWindow.bind(n, lo.TWITTER), n.openPinterest = n.openShareWindow.bind(n, lo.PINTEREST), n.openLinkedIn = n.openShareWindow.bind(n, lo.LINKEDIN), n.openEmail = n.openShareWindow.bind(n, lo.MAIL), n
                    }
                    return Go(e, t), e.prototype.componentDidMount = function() {
                        return Qo(this, void 0, void 0, (function() {
                            var t, e, n, o, r, i;
                            return Yo(this, (function(a) {
                                switch (a.label) {
                                    case 0:
                                        return [4, Promise.all([this.context.engine.waitForModule(xo.R), this.context.market.waitForData(Do.a)])];
                                    case 1:
                                        return t = qo.apply(void 0, [a.sent(), 2]), e = t[0], n = t[1], this.sweepData = n, o = e.getModel(), r = window.location.origin + "/api/v1/player/models/" + o.sid + "/thumb", i = o.data.name, this.setState({
                                            title: i,
                                            image: r
                                        }, this.updateUrls), [2]
                                }
                            }))
                        }))
                    }, e.prototype.updateUrls = function() {
                        return Qo(this, void 0, void 0, (function() {
                            var t, e, n, o, r, i, a, s;
                            return Yo(this, (function(c) {
                                switch (c.label) {
                                    case 0:
                                        return t = this.state, e = t.title, n = t.image, [4, Promise.all([Ho(this.context, !1), Ho(this.context, !0)])];
                                    case 1:
                                        return o = qo.apply(void 0, [c.sent(), 2]), r = o[0], i = o[1], a = Wo(r, e, n, this.context.locale), s = Wo(i, e, n, this.context.locale), Ko.debug("Social Share URLs:", a), Ko.debug("Social Share URLs, with current location", s), this.setState({
                                            urls: a,
                                            deeplinkUrls: s
                                        }), [2]
                                }
                            }))
                        }))
                    }, e.prototype.renderWebShareDialog = function() {
                        return Object(a.h)("div", null, Object(a.h)(Qt.a, {
                            appendClass: {
                                "share-modal-button": !0
                            },
                            buttonStyle: Qt.d.PRIMARY,
                            onClick: this.onWebShareDeeplinkClick
                        }, this.context.locale.t(h.a.SHARE_CURRENT_LOCATION)), Object(a.h)(Qt.a, {
                            appendClass: {
                                "share-modal-button": !0
                            },
                            buttonStyle: Qt.d.SECONDARY,
                            onClick: this.onWebShareClick
                        }, this.context.locale.t(h.a.SHARE_DEFAULT_LOCATION)))
                    }, e.prototype.renderShareDialog = function() {
                        var t = this.state,
                            e = t.copied,
                            n = t.deeplink,
                            o = t.urls,
                            r = t.deeplinkUrls,
                            i = n ? r[lo.COPYLINK] : o[lo.COPYLINK],
                            s = this.sweepData && this.sweepData.isSweepDisabled(),
                            c = s ? this.context.locale.t(h.a.SHARE_ERROR_SWEEP_DISABLED) : void 0;
                        return Object(a.h)("div", null, Object(a.h)("div", {
                            class: "social-icons"
                        }, Object(a.h)(y.a, {
                            onClick: this.openFacebook,
                            iconClass: "icon-facebook",
                            buttonStyle: y.b.SOCIAL
                        }), Object(a.h)(y.a, {
                            onClick: this.openTwitter,
                            iconClass: "icon-twitter",
                            buttonStyle: y.b.SOCIAL
                        }), Object(a.h)(y.a, {
                            onClick: this.openLinkedIn,
                            iconClass: "icon-linkedin",
                            buttonStyle: y.b.SOCIAL
                        }), Object(a.h)(y.a, {
                            onClick: this.openPinterest,
                            iconClass: "icon-pinterest",
                            buttonStyle: y.b.SOCIAL
                        }), Object(a.h)(y.a, {
                            onClick: this.openEmail,
                            iconClass: "icon-email",
                            buttonStyle: y.b.SOCIAL
                        })), Object(a.h)("div", {
                            class: "input-group"
                        }, Object(a.h)("input", {
                            class: "input",
                            type: "text",
                            value: i || "",
                            ref: this.setUrlInputRef,
                            onKeyDown: this.stopPropagation,
                            onKeyPress: this.stopPropagation,
                            onKeyUp: this.stopPropagation,
                            readOnly: !0
                        }), Object(a.h)(f.a, {
                            content: e ? this.context.locale.t(h.a.SHARE_COPIED) : this.context.locale.t(h.a.COPY_URL),
                            position: f.b.UP,
                            tooltipTimeout: 2e3
                        }, Object(a.h)("button", {
                            class: "input-addon",
                            onClick: this.copyURL
                        }, this.context.locale.t(h.a.COPY)))), Object(a.h)(So.a, {
                            dataValue: "deeplink",
                            key: "deeplink",
                            checked: n,
                            enabled: !s,
                            error: s,
                            helpText: c,
                            label: "Link to this location",
                            onChange: this.toggleDeeplinks
                        }))
                    }, e.prototype.render = function() {
                        var t = this.props.open,
                            e = this.state.webShareEnabled,
                            n = x({
                                open: t
                            }),
                            o = x({
                                "modal-dialog": !0,
                                "share-dialog": !e,
                                "web-share-dialog": e
                            }),
                            r = e ? this.renderWebShareDialog() : this.renderShareDialog();
                        return Object(a.h)("div", {
                            class: "sc-modal share-modal " + n
                        }, Object(a.h)("dialog", {
                            open: t,
                            class: o
                        }, Object(a.h)("header", {
                            class: "modal-header"
                        }, Object(a.h)("div", {
                            class: "modal-title"
                        }, this.context.locale.t(h.a.SHARE_MODAL_TITLE)), Object(a.h)(Tt.a, {
                            onClose: this.close
                        })), Object(a.h)("div", {
                            class: "modal-body"
                        }, r)))
                    }, e
                }(a.Component),
                Xo = n(498),
                Jo = (n(878), function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }()),
                $o = function(t) {
                    function e(e, n) {
                        var o = t.call(this, e) || this;
                        return o.onScrollPositionChange = function() {
                            o.scrollbars && o.setState({
                                scrollClass: o.scrollbars.scrollPosition.vertical
                            })
                        }, o.closeModal = function() {
                            o.props.toggleOpen(d.a.measurementModeHelp, !1), o.props.toggleOpen(d.a.measurementMode, !0)
                        }, o.state = {
                            scrollClass: Dt.c.None
                        }, o.locale = {
                            headerString: n.locale.t(h.a.MEASUREMENT_MODE),
                            subHeaderString: n.locale.t(h.a.MEASUREMENT_HELP_MODAL_SUB_HEADER),
                            body1String: n.locale.t(h.a.MEASUREMENT_HELP_MODAL_BODY_1),
                            body2String: n.locale.t(h.a.MEASUREMENT_HELP_MODAL_BODY_2)
                        }, o
                    }
                    return Jo(e, t), e.prototype.render = function() {
                        var t, e = this,
                            n = this.locale,
                            o = n.headerString,
                            r = n.subHeaderString,
                            i = n.body1String,
                            s = n.body2String,
                            c = this.props,
                            l = c.mobile,
                            u = c.measureModeHelpOpen,
                            p = x("modal", ((t = {
                                mobile: l,
                                "faded-in": u
                            })[this.state.scrollClass] = !0, t));
                        return Object(a.h)("div", {
                            id: "measurement-mode-help-modal",
                            class: p
                        }, Object(a.h)("div", {
                            id: "measurement-mode-help-wrapper"
                        }, Object(a.h)(_t.a, {
                            name: "measurement-mode-help",
                            ref: function(t) {
                                return e.scrollbars = t
                            },
                            onScrollPositionChange: this.onScrollPositionChange,
                            forceHidden: Object(kt.a)(window)
                        }, Object(a.h)("div", {
                            class: "measurement-mode-help-header"
                        }, o), Object(a.h)("div", {
                            class: "measurement-mode-help-sub-header"
                        }, r), Object(a.h)("div", {
                            class: "measurement-mode-help-body"
                        }, i), Object(a.h)("div", {
                            class: "measurement-mode-help-body"
                        }, s))), u && Object(a.h)(Tt.a, {
                            buttonStyle: Tt.b.DEFAULT,
                            onClose: this.closeModal
                        }))
                    }, e
                }(a.Component),
                tr = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                er = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                nr = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                or = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.mobile = Object(p.o)(), n
                    }
                    return tr(e, t), e.prototype.componentWillMount = function() {
                        return er(this, void 0, void 0, (function() {
                            var t;
                            return nr(this, (function(e) {
                                switch (e.label) {
                                    case 0:
                                        return [4, this.context.engine.waitForModule(xo.R)];
                                    case 1:
                                        return t = e.sent().getModel(), this.setState({
                                            modelDetails: t.data
                                        }), [2]
                                }
                            }))
                        }))
                    }, e.prototype.render = function() {
                        var t = this.props,
                            e = t.openComponents,
                            n = t.viewmode,
                            o = t.toggleOpen,
                            r = t.glCanvas,
                            i = this.state.modelDetails,
                            s = e.terms,
                            c = e.vrSelect,
                            l = e.help,
                            u = e.cta,
                            p = e.measurementModeHelp,
                            h = e.share,
                            d = this.context.commandBinder;
                        return Object(a.h)("div", {
                            id: "modal-container"
                        }, Object(a.h)(Xo.a, {
                            open: s
                        }, Object(a.h)(Lt, {
                            toggleOpen: o
                        })), this.state.modelDetails && Object(a.h)(Xo.a, {
                            open: c
                        }, Object(a.h)(Ve, {
                            isMobile: this.mobile,
                            toggleOpen: o,
                            modelDetails: i,
                            commandBinder: d
                        })), Object(a.h)(Xo.a, {
                            open: l
                        }, Object(a.h)(go, {
                            isMobile: this.mobile,
                            toggleOpen: o,
                            viewmode: n,
                            allModes: U.b
                        })), Object(a.h)(en, {
                            canvas: r,
                            isMobile: this.mobile,
                            viewmode: n,
                            toggleOpen: o,
                            showCta: u
                        }), Object(a.h)(Oo, {
                            toggleOpen: o
                        }), Object(a.h)($o, {
                            mobile: this.mobile,
                            measureModeHelpOpen: p,
                            toggleOpen: o
                        }), Object(a.h)(Xo.a, {
                            open: h
                        }, Object(a.h)(Zo, {
                            open: h,
                            toggleOpen: o
                        })))
                    }, e
                }(a.Component),
                rr = n(96),
                ir = n(255),
                ar = n(20),
                sr = n(500),
                cr = n(266),
                lr = n(260),
                ur = n(48);
            n.d(e, "initShowcaseUi", (function() {
                return gr
            }));
            var pr = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                hr = function() {
                    return (hr = Object.assign || function(t) {
                        for (var e, n = 1, o = arguments.length; n < o; n++)
                            for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
                        return t
                    }).apply(this, arguments)
                },
                dr = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                fr = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                yr = function(t, e) {
                    var n = "function" == typeof Symbol && t[Symbol.iterator];
                    if (!n) return t;
                    var o, r, i = n.call(t),
                        a = [];
                    try {
                        for (;
                            (void 0 === e || e-- > 0) && !(o = i.next()).done;) a.push(o.value)
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    return a
                },
                vr = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                mr = new D.a("showcase-ui"),
                gr = function(t, e, n, o, r, i, s, c, l) {
                    return Object(a.render)(Object(a.h)(br, {
                        locale: t,
                        analytics: e,
                        settings: n,
                        mainDiv: o,
                        engine: r,
                        messageBus: i,
                        market: s,
                        commandBinder: c,
                        onAppReadyChanged: l
                    }), o)
                },
                br = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        n.bindings = [], n.getModeChange = function(t) {
                            return {
                                viewmode: Object(U.c)(t.toMode)
                            }
                        }, n.getTourState = function() {
                            return n.tourData ? {
                                tourState: n.tourData.getCurrentTourState()
                            } : {
                                tourState: n.state.tourState
                            }
                        }, n.getTitleBarEnablement = function() {
                            var t = n.props.settings.tryGetProperty("title", 1),
                                e = n.props.settings.tryGetProperty(F.a.DetailsModelName, !0),
                                o = n.props.settings.tryGetProperty("mls", 0);
                            return {
                                titleBarEnabled: 0 !== t && 2 !== o && e
                            }
                        }, n.isVrEnabled = function(t) {
                            var e = n.props.settings.tryGetProperty("mls", 0),
                                o = n.props.settings.tryGetProperty("vr", 1);
                            return t && !(!o || 2 === o && !Object(p.i)()) && 0 === e
                        }, n.isMeasurementModeEnabled = function(t) {
                            n.setState({
                                measurementModeOpen: t.opened
                            }), n.measurementModeFeatureToggler.toggle(t.opened)
                        }, n.toggleOpenComponents = function(t, e, o) {
                            void 0 === o && (o = !0), n.setState((function(r) {
                                var i = r.openComponents;
                                i[t] = e;
                                var a = t in d.a && e;
                                if (a && (n.props.commandBinder.issueCommand(new k.c, !1), o))
                                    for (var s in d.a) s !== t && (i[s] = !1);
                                return {
                                    openComponents: i,
                                    modalOpen: a = a && -1 === d.b.indexOf(t)
                                }
                            }))
                        };
                        var o = document.getElementsByClassName("webgl-canvas")[0];
                        return n.state = {
                            glCanvas: o,
                            viewmode: U.b.INSIDE,
                            toggleOpen: n.toggleOpenComponents,
                            modalOpen: !1,
                            openComponents: {
                                cta: !1,
                                help: !1,
                                mattertagEmbLink: !1,
                                measurementMode: !1,
                                measurementModeHelp: !1,
                                titleBar: !1,
                                terms: !1,
                                vrSelect: !1,
                                share: !1
                            },
                            tourState: {},
                            mobile: Object(p.o)(),
                            modelDetails: null,
                            vrEnabled: !1,
                            brandingEnabled: !1,
                            shareEnabled: !1,
                            titleBarEnabled: !1,
                            measurementModeOpen: !1,
                            unaligned: !1,
                            showExternalUrl: !1
                        }, n
                    }
                    return pr(e, t), e.prototype.getChildContext = function() {
                        return {
                            mainDiv: this.props.mainDiv,
                            settings: this.props.settings,
                            analytics: this.props.analytics,
                            locale: this.props.locale,
                            engine: this.props.engine,
                            messageBus: this.props.messageBus,
                            market: this.props.market,
                            commandBinder: this.props.commandBinder
                        }
                    }, e.prototype.componentDidMount = function() {
                        return dr(this, void 0, void 0, (function() {
                            var t, e, n, o, r, i, a, s, c, l, u, p = this;
                            return fr(this, (function(h) {
                                switch (h.label) {
                                    case 0:
                                        return h.trys.push([0, 2, , 3]), this.cancelBindings(), this.bindings = [this.props.messageBus.subscribe(ir.a, (function(t) {
                                            return p.setState(hr({}, p.getModeChange(t), p.getUnalignedSweepState()))
                                        })), this.props.messageBus.subscribe(Ke.f, (function() {
                                            return p.setState(p.getTourState())
                                        })), this.props.messageBus.subscribe(Ke.c, (function() {
                                            return p.setState(p.getTourState())
                                        })), this.props.messageBus.subscribe(Ke.d, (function() {
                                            return p.setState(p.getTourState())
                                        })), this.props.messageBus.subscribe(Ke.a, (function() {
                                            return p.setState(p.getTourState())
                                        })), this.props.messageBus.subscribe(Ke.b, (function() {
                                            return p.setState(p.getTourState())
                                        })), this.props.settings.onPropertyChanged(F.a.DetailsModelName, (function() {
                                            return p.setState(p.getTitleBarEnablement())
                                        })), this.props.messageBus.subscribe(ur.e, this.isMeasurementModeEnabled)], [4, Promise.all([this.props.engine.waitForModule(xo.R), this.props.market.waitForData(ko.a), this.props.market.waitForData(Do.a), this.props.market.waitForData(rr.b)])];
                                    case 1:
                                        return e = yr.apply(void 0, [h.sent(), 4]), n = e[0], o = e[1], r = e[2], i = e[3], this.bindings.push(i.getReel().onChanged((function() {
                                            return p.setState(p.getTourState())
                                        })), r.makeSweepChangeSubscription((function() {
                                            return p.setState(p.getUnalignedSweepState())
                                        }))), a = n.getModel(), s = Object(U.c)(o.currentMode || ar.a.Panorama), this.tourData = i, this.sweepData = r, this.viewmodeData = o, c = r.currentSweep ? r.currentSweep : "", l = r.isSweepUnaligned(c), this.setState(hr({
                                            viewmode: s,
                                            modelDetails: a.data,
                                            unaligned: l,
                                            brandingEnabled: this.isBrandingEnabled() && this.isMlsEnabled(),
                                            shareEnabled: this.isShareEnabled() && this.isMlsEnabled(),
                                            showExternalUrl: this.isBrandingEnabled() && this.isMlsEnabled(),
                                            vrEnabled: this.isVrEnabled(a.vrSupported)
                                        }, this.getTitleBarEnablement(), this.getTourState(), this.getUnalignedSweepState())), this.measurementModeFeatureToggler = new sr.a(this.props.settings, ((t = {})[mt.a] = !1, t[vt.a] = !1, t[cr.a] = !1, t[lr.a] = !1, t)), this.props.onAppReadyChanged(!0), [3, 3];
                                    case 2:
                                        return u = h.sent(), mr.debug(u), [3, 3];
                                    case 3:
                                        return [2]
                                }
                            }))
                        }))
                    }, e.prototype.getUnalignedSweepState = function() {
                        if (!this.sweepData || !this.viewmodeData) return {
                            unaligned: this.state.unaligned
                        };
                        var t = this.sweepData.currentSweep ? this.sweepData.currentSweep : "";
                        return {
                            unaligned: this.viewmodeData.isPano() && this.sweepData.isSweepUnaligned(t)
                        }
                    }, e.prototype.componentWillUnmount = function() {
                        return dr(this, void 0, void 0, (function() {
                            return fr(this, (function(t) {
                                return this.cancelBindings(), this.props.onAppReadyChanged(!1), [2]
                            }))
                        }))
                    }, e.prototype.cancelBindings = function() {
                        var t, e;
                        try {
                            for (var n = vr(this.bindings), o = n.next(); !o.done; o = n.next()) {
                                o.value.cancel()
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    }, e.prototype.isShareEnabled = function() {
                        return this.props.settings.tryGetProperty("enable_social_sharing", !1) && this.props.settings.tryGetProperty("is_public", !1)
                    }, e.prototype.isMlsEnabled = function() {
                        return 0 === this.props.settings.tryGetProperty("mls", 0)
                    }, e.prototype.isBrandingEnabled = function() {
                        return 1 === this.props.settings.tryGetProperty("brand", 1)
                    }, e.prototype.render = function() {
                        var t = this.state,
                            e = t.viewmode,
                            n = t.toggleOpen,
                            o = t.tourState,
                            r = t.openComponents,
                            i = t.modelDetails,
                            s = t.glCanvas,
                            c = t.mobile,
                            l = t.shareEnabled,
                            u = t.brandingEnabled,
                            p = t.titleBarEnabled,
                            h = t.vrEnabled,
                            f = t.modalOpen,
                            y = t.unaligned,
                            v = t.measurementModeOpen,
                            m = t.showExternalUrl,
                            g = r[d.a.mattertagEmbLink];
                        return Object(a.h)("div", {
                            id: "gui"
                        }, !!i && Object(a.h)(dt, {
                            modalOpen: f,
                            toggleOpen: n,
                            modelDetails: i,
                            tourState: o,
                            brandingEnabled: u,
                            showExternalUrl: m,
                            titleBarEnabled: p,
                            openComponents: r
                        }), Object(a.h)(or, {
                            viewmode: e,
                            toggleOpen: n,
                            glCanvas: s,
                            openComponents: r
                        }), !g && Object(a.h)(J, {
                            modalOpen: f,
                            toggleOpen: n,
                            glCanvas: s,
                            openComponents: r,
                            viewmode: e,
                            tourState: o,
                            shareEnabled: l,
                            vrEnabled: h,
                            mobile: c,
                            unaligned: y
                        }), !g && Object(a.h)(Pt, {
                            viewmode: e,
                            tourPlaying: this.state.tourState.tourPlaying,
                            toggleOpen: n,
                            mobile: c,
                            measurementModeOpen: v,
                            measurementModeHelpOpen: r[d.a.measurementModeHelp]
                        }))
                    }, e
                }(a.Component)
        },
        1009: function(t, e, n) {
            "use strict";
            n.r(e);
            var o = n(2),
                r = n(782),
                i = n(7),
                a = n(12),
                s = n(24),
                c = n(3),
                l = n(597),
                u = n(601),
                p = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                h = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                d = new c.a("dam-loader"),
                f = function() {
                    function t() {
                        this.decoder = n(784).binary_mesh
                    }
                    return t.prototype.load = function(t, e, n) {
                        return p(this, void 0, Promise, (function() {
                            var o;
                            return h(this, (function(r) {
                                switch (r.label) {
                                    case 0:
                                        return d.time("download"), [4, e.getFile(t, {
                                            responseType: "arraybuffer",
                                            onProgress: n
                                        })];
                                    case 1:
                                        return o = r.sent(), d.timeEnd("download"), [2, this.parse(o)]
                                }
                            }))
                        }))
                    }, t.prototype.parse = function(t) {
                        d.time("parse proto");
                        var e = this.decoder.read(new r(t));
                        d.timeEnd("parse proto"), d.time("convert to webgl");
                        var n = this.convertProtobufToSceneObject(e);
                        return d.timeEnd("convert to webgl"), n
                    }, t.prototype.convertProtobufToSceneObject = function(t) {
                        if (0 === t.chunk.length) return d.warn("No chunks in damfile..."), [];
                        var e = new i.a;
                        return e.set(1, 0, 0, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 0, 0, 1), t.chunk.map((function(t) {
                            var n = new s.a;
                            n.setAttribute("position", new a.a(new Float32Array(t.vertices.xyz, 0, 3), 3)), t.vertices.uv.length > 0 && n.setAttribute("uv", new a.a(new Float32Array(t.vertices.uv, 0, 2), 2)), n.setIndex(new a.a(new Uint32Array(t.faces.faces, 0, 1), 1)), n.applyMatrix(e), n.computeBoundingBox();
                            var o = Object(u.b)(t.chunk_name),
                                r = o.floorIndex,
                                i = o.roomIndex;
                            return new l.a(r, i, n, t.material_name)
                        }))
                    }, t
                }(),
                y = n(264);
            var v, m = function() {
                    function t() {}
                    return t.load = function(t, e, n, o) {
                        var r = this;
                        void 0 === o && (o = 0), y.c.highQualityDam && 0 === o && (o = 1);
                        var i = [{
                            suffix: "_50k",
                            extension: ".dam"
                        }, {
                            suffix: "",
                            extension: ".dam"
                        }][o];
                        if (!i) return Promise.reject("No suitable model file found...");
                        var a = i.suffix,
                            s = i.extension,
                            c = new f,
                            l = t + a + s;
                        return c.load(l, e, n).catch((function() {
                            return r.load(t, e, n, ++o)
                        }))
                    }, t
                }(),
                g = n(37),
                b = n(1),
                w = n(65),
                O = n(17),
                S = n(241),
                x = n(106),
                P = n(124),
                _ = (v = function(t, e) {
                    return (v = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    v(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                T = function(t) {
                    function e(e) {
                        return t.call(this, e) || this
                    }
                    return _(e, t), e
                }(P.a),
                D = n(189),
                k = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                M = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                E = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                C = function(t) {
                    function e(e, n) {
                        void 0 === n && (n = x.a.ALL);
                        var o = t.call(this) || this;
                        return o.floorIndex = e, o.renderLayer = n, o.roomMeshes = new S.a((function(t) {
                            return t.roomIndex
                        })), o.built = !1, o
                    }
                    return k(e, t), e.prototype.dispose = function() {
                        var t, e;
                        try {
                            for (var n = E(this.roomMeshes), o = n.next(); !o.done; o = n.next()) {
                                var r = o.value;
                                r.geometry.dispose(), this.remove(r)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                        this.roomMeshes.clear()
                    }, e.prototype.addChunk = function(t) {
                        this.getOrCreateRoomMesh(t.roomIndex).addChunk(t)
                    }, e.prototype.getOrCreateRoomMesh = function(t) {
                        var e = this.roomMeshes.get(t);
                        return e || (e = new D.b(this.floorIndex, t, this.renderLayer), this.roomMeshes.add(e), this.add(e)), e
                    }, e.prototype.build = function() {
                        var t, e;
                        if (this.built) throw new Error("build() should only be called once");
                        this.boundingBox = new g.a;
                        try {
                            for (var n = E(this.roomMeshes), o = n.next(); !o.done; o = n.next()) {
                                var r = o.value;
                                this.boundingBox.union(r.boundingBox)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                        this.center = this.boundingBox.getCenter(new b.a), this.size = this.boundingBox.getSize(new b.a), this.built = !0
                    }, Object.defineProperty(e.prototype, "chunks", {
                        get: function() {
                            var t = this.roomMeshes;
                            return function() {
                                var e, n, o, r, i, a;
                                return M(this, (function(s) {
                                    switch (s.label) {
                                        case 0:
                                            s.trys.push([0, 5, 6, 7]), o = E(t), r = o.next(), s.label = 1;
                                        case 1:
                                            return r.done ? [3, 4] : (i = r.value, [5, E(i.chunks)]);
                                        case 2:
                                            s.sent(), s.label = 3;
                                        case 3:
                                            return r = o.next(), [3, 1];
                                        case 4:
                                            return [3, 7];
                                        case 5:
                                            return a = s.sent(), e = {
                                                error: a
                                            }, [3, 7];
                                        case 6:
                                            try {
                                                r && !r.done && (n = o.return) && n.call(o)
                                            } finally {
                                                if (e) throw e.error
                                            }
                                            return [7];
                                        case 7:
                                            return [2]
                                    }
                                }))
                            }()
                        },
                        enumerable: !0,
                        configurable: !0
                    }), e
                }(O.a),
                j = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                L = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                R = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                A = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                I = new c.a("mesh"),
                N = function(t) {
                    function e(e, n, o, r) {
                        void 0 === o && (o = x.a.ALL);
                        var i = t.call(this) || this;
                        return i.renderLayer = o, i.maxEdgeLength = r, i.floorMeshes = new S.a((function(t) {
                            return t.floorIndex
                        })), i.built = !1, i.uuid = e, i.signedUrls = n, i.layers.mask = o.mask, i
                    }
                    return j(e, t), e.prototype.dispose = function() {
                        var t, e;
                        try {
                            for (var n = A(this.floorMeshes), o = n.next(); !o.done; o = n.next()) {
                                var r = o.value;
                                r.dispose(), this.remove(r)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                        this.floorMeshes.clear()
                    }, e.prototype.load = function(t) {
                        return void 0 === t && (t = {}), L(this, void 0, Promise, (function() {
                            var e, n, o, r, i, a, s, c, u, p, h, d, f, y, v, g, b = this;
                            return R(this, (function(O) {
                                switch (O.label) {
                                    case 0:
                                        return t.chunks ? (a = t.chunks, [3, 3]) : [3, 1];
                                    case 1:
                                        return [4, m.load(this.uuid, this.signedUrls, t.onProgress).catch((function(t) {
                                            throw new T(t)
                                        }))];
                                    case 2:
                                        a = O.sent(), O.label = 3;
                                    case 3:
                                        0 === (i = a).length && (I.warn("No geometry found for model, loading faux geometry, disabling outside view-mode"), (s = new w.a(5, 5, 1, 1)).rotateX(-Math.PI / 2), s.computeBoundingBox(), (c = new l.a(0, 0, s)).forEachMaterial((function(t) {
                                            return t.visible = !1
                                        })), i = [c]), i.forEach((function(t, e) {
                                            b.addChunk(t)
                                        })), u = 0, p = 0;
                                        try {
                                            for (h = A(this.floorMeshes), d = h.next(); !d.done; d = h.next()) {
                                                f = d.value;
                                                try {
                                                    for (y = A(f.roomMeshes), v = y.next(); !v.done; v = y.next())(g = v.value).build(), u++, this.maxEdgeLength && g.tessellate(this.maxEdgeLength)
                                                } catch (t) {
                                                    o = {
                                                        error: t
                                                    }
                                                } finally {
                                                    try {
                                                        v && !v.done && (r = y.return) && r.call(y)
                                                    } finally {
                                                        if (o) throw o.error
                                                    }
                                                }
                                                f.build(), p++
                                            }
                                        } catch (t) {
                                            e = {
                                                error: t
                                            }
                                        } finally {
                                            try {
                                                d && !d.done && (n = h.return) && n.call(h)
                                            } finally {
                                                if (e) throw e.error
                                            }
                                        }
                                        return this.build(), I.debug("FloorMeshes: " + p + " RoomMeshes: " + u + " Chunks: " + i.length), [2, this]
                                }
                            }))
                        }))
                    }, e.prototype.addChunk = function(t) {
                        this.getOrCreateFloorMesh(t.floorIndex).addChunk(t)
                    }, e.prototype.getOrCreateFloorMesh = function(t) {
                        var e = this.floorMeshes.get(t);
                        return e || (e = new C(t, this.renderLayer), this.floorMeshes.add(e), this.add(e)), e
                    }, e.prototype.build = function() {
                        var t, e;
                        if (this.built) throw new Error("build() should only be called once");
                        this.boundingBox = new g.a;
                        try {
                            for (var n = A(this.floorMeshes), o = n.next(); !o.done; o = n.next()) {
                                var r = o.value;
                                this.boundingBox.union(r.boundingBox)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                        this.size = this.boundingBox.getSize(new b.a), this.center = this.boundingBox.getCenter(new b.a), this.built = !0
                    }, Object.defineProperty(e.prototype, "chunks", {
                        get: function() {
                            var t = this.floorMeshes;
                            return function() {
                                var e, n, o, r, i, a;
                                return R(this, (function(s) {
                                    switch (s.label) {
                                        case 0:
                                            s.trys.push([0, 5, 6, 7]), o = A(t), r = o.next(), s.label = 1;
                                        case 1:
                                            return r.done ? [3, 4] : (i = r.value, [5, A(i.chunks)]);
                                        case 2:
                                            s.sent(), s.label = 3;
                                        case 3:
                                            return r = o.next(), [3, 1];
                                        case 4:
                                            return [3, 7];
                                        case 5:
                                            return a = s.sent(), e = {
                                                error: a
                                            }, [3, 7];
                                        case 6:
                                            try {
                                                r && !r.done && (n = o.return) && n.call(o)
                                            } finally {
                                                if (e) throw e.error
                                            }
                                            return [7];
                                        case 7:
                                            return [2]
                                    }
                                }))
                            }()
                        },
                        enumerable: !0,
                        configurable: !0
                    }), e
                }(O.a),
                F = n(54),
                U = n(29),
                z = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                V = function() {
                    function t(t, e, n, o) {
                        this.addToRaycasting = t, this.removeFromRaycasting = e, this.enableRaycasting = n, this.mesh = o, this.clear()
                    }
                    return t.prototype.dispose = function() {
                        this.clear()
                    }, t.prototype.activate = function(t) {
                        var e, n, o, r, i, a, s = {};
                        try {
                            for (var c = z(Object.keys(this.groupNames)), l = c.next(); !l.done; l = c.next()) {
                                var u = l.value,
                                    p = this.groupNames[u];
                                try {
                                    for (var h = z(this.groupColliders[u]), d = h.next(); !d.done; d = h.next()) {
                                        s[(v = d.value).id] = !0, this.addToRaycasting(v, !0, p), v.name = p
                                    }
                                } catch (t) {
                                    o = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        d && !d.done && (r = h.return) && r.call(h)
                                    } finally {
                                        if (o) throw o.error
                                    }
                                }
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                l && !l.done && (n = c.return) && n.call(c)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        try {
                            for (var f = z(this.allColliders), y = f.next(); !y.done; y = f.next()) {
                                var v;
                                s[(v = y.value).id] || this.addToRaycasting(v, !0)
                            }
                        } catch (t) {
                            i = {
                                error: t
                            }
                        } finally {
                            try {
                                y && !y.done && (a = f.return) && a.call(f)
                            } finally {
                                if (i) throw i.error
                            }
                        }
                    }, t.prototype.deactivate = function(t) {
                        var e, n;
                        try {
                            for (var o = z(this.allColliders), r = o.next(); !r.done; r = o.next()) {
                                var i = r.value;
                                this.removeFromRaycasting(i)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                r && !r.done && (n = o.return) && n.call(o)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                    }, t.prototype.init = function() {
                        var t, e, n, o;
                        try {
                            for (var r = z(this.mesh.floorMeshes), i = r.next(); !i.done; i = r.next()) {
                                var a = i.value,
                                    s = this.groupColliders[a.floorIndex];
                                s || (this.groupColliders[a.floorIndex] = s = []);
                                var c = this.groupNames[a.floorIndex];
                                c || (this.groupNames[a.floorIndex] = c = "mesh_group_" + a.floorIndex);
                                try {
                                    for (var l = z(a.roomMeshes), u = l.next(); !u.done; u = l.next()) {
                                        var p = u.value;
                                        s.push(p), this.allColliders.push(p)
                                    }
                                } catch (t) {
                                    n = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        u && !u.done && (o = l.return) && o.call(l)
                                    } finally {
                                        if (n) throw n.error
                                    }
                                }
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                i && !i.done && (e = r.return) && e.call(r)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    }, t.prototype.setSide = function(t) {
                        var e, n;
                        try {
                            for (var o = z(this.allColliders), r = o.next(); !r.done; r = o.next()) {
                                var i = r.value;
                                this.setSideRecursively(i, t)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                r && !r.done && (n = o.return) && n.call(o)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                    }, t.prototype.setSideRecursively = function(t, e) {
                        var n, o;
                        t instanceof U.a && t.material && t.material instanceof F.a && (t.material.side = e);
                        try {
                            for (var r = z(t.children), i = r.next(); !i.done; i = r.next()) {
                                var a = i.value;
                                this.setSideRecursively(a, e)
                            }
                        } catch (t) {
                            n = {
                                error: t
                            }
                        } finally {
                            try {
                                i && !i.done && (o = r.return) && o.call(r)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                    }, t.prototype.getReadonlyColliderList = function() {
                        return this.allColliders
                    }, t.prototype.getReadonlyColliderListForGroup = function(t) {
                        return this.groupColliders[t]
                    }, t.prototype.getGroupName = function(t) {
                        return this.groupNames[t]
                    }, t.prototype.render = function() {}, t.prototype.setVisible = function(t) {
                        var e, n;
                        if (this._visible !== t) {
                            this._visible = t;
                            try {
                                for (var o = z(this.allColliders), r = o.next(); !r.done; r = o.next()) {
                                    r.value.visible = t
                                }
                            } catch (t) {
                                e = {
                                    error: t
                                }
                            } finally {
                                try {
                                    r && !r.done && (n = o.return) && n.call(o)
                                } finally {
                                    if (e) throw e.error
                                }
                            }
                            for (var i in this.groupNames) this.enableRaycasting(this.groupNames[i], t)
                        }
                    }, t.prototype.clear = function() {
                        this.allColliders = [], this.groupColliders = {}, this.groupNames = {}
                    }, t
                }(),
                H = n(0),
                B = n(26),
                W = n(20),
                G = n(113),
                Q = n(15),
                Y = n(77),
                q = n(82),
                K = n(644),
                Z = n(561),
                X = n(562),
                J = n(27),
                $ = (n(18), function() {
                    return Math.random()
                }),
                tt = function(t) {
                    return void 0 === t && (t = .25), new B.a($(), $(), $(), t)
                },
                et = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                nt = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                ot = function(t, e) {
                    var n = "function" == typeof Symbol && t[Symbol.iterator];
                    if (!n) return t;
                    var o, r, i = n.call(t),
                        a = [];
                    try {
                        for (;
                            (void 0 === e || e-- > 0) && !(o = i.next()).done;) a.push(o.value)
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    return a
                },
                rt = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                it = new c.a("modelrenderer"),
                at = function() {
                    function t(t, e, n, o, r, i, a, s) {
                        this.scene = t, this.mesh = e, this.modelCollider = n, this.panoRenderer = o, this.meshData = r, this.sweepData = i, this.applicationData = a, this.renderOptions = s, this.chunkRenderingModeOverride = null, this.lastChunkRenderingModeOverride = null, this.bindings = []
                    }
                    return t.prototype.init = function() {}, t.prototype.dispose = function() {
                        this.mesh.dispose()
                    }, t.prototype.activate = function(t) {
                        return et(this, void 0, void 0, (function() {
                            var e, n, o, r, i, a, s, c, u, p, h, d, f, v, m, g, w, O, S = this;
                            return nt(this, (function(x) {
                                switch (x.label) {
                                    case 0:
                                        return [4, Promise.all([t.market.waitForData(G.a), t.market.waitForData(Y.a), t.waitForModule(q.default)])];
                                    case 1:
                                        for (d in e = ot.apply(void 0, [x.sent(), 3]), this.viewmodeData = e[0], this.settings = e[1], this.settingsModule = e[2], this.scene.add(this.mesh), this.updateRenderState(), this.bindings.push(this.viewmodeData.onChanged(this.updateRenderState.bind(this)), this.sweepData.onChanged(this.updateRenderState.bind(this)), this.settings.onChanged(this.updateRenderState.bind(this)), t.commandBinder.addBinding(K.a, (function(t) {
                                                return et(S, void 0, void 0, (function() {
                                                    return nt(this, (function(e) {
                                                        return this.chunkRenderingModeOverride = t.mode, this.updateRenderState(), [2]
                                                    }))
                                                }))
                                            }))), this.settingsModule.registerButton("Mesh", "Toggle visible", (function() {
                                                var t, e;
                                                try {
                                                    for (var n = rt(S.mesh.floorMeshes), o = n.next(); !o.done; o = n.next()) {
                                                        var r = o.value;
                                                        r.visible = !r.visible
                                                    }
                                                } catch (e) {
                                                    t = {
                                                        error: e
                                                    }
                                                } finally {
                                                    try {
                                                        o && !o.done && (e = n.return) && e.call(n)
                                                    } finally {
                                                        if (t) throw t.error
                                                    }
                                                }
                                            })), this.settingsModule.registerButton("Mesh", "Toggle depth", (function() {
                                                var e = S.chunkRenderingModeOverride ? null : l.b.Depth;
                                                t.commandBinder.issueCommand(new K.a(e))
                                            })), this.settingsModule.registerButton("Mesh", "Toggle transparent", (function() {
                                                var e = S.chunkRenderingModeOverride ? null : l.b.Transparent;
                                                t.commandBinder.issueCommand(new K.a(e))
                                            })), this.settingsModule.registerButton("Mesh", "Toggle wireframe", (function() {
                                                var e = S.chunkRenderingModeOverride ? null : l.b.Wireframe;
                                                t.commandBinder.issueCommand(new K.a(e))
                                            })), i = !1, a = function(t, e) {
                                                var n = new B.a(1, 1, 1, 0);
                                                i = !i,
                                                    function(t) {
                                                        var o, r, i, a, s, c;
                                                        try {
                                                            for (var l = rt(S.mesh.floorMeshes), u = l.next(); !u.done; u = l.next()) {
                                                                var p = u.value;
                                                                try {
                                                                    for (var h = rt(p.roomMeshes), d = h.next(); !d.done; d = h.next()) {
                                                                        var f = d.value,
                                                                            y = t ? tt(.5) : n;
                                                                        try {
                                                                            for (var v = rt(f.chunks), m = v.next(); !m.done; m = v.next()) {
                                                                                var g = m.value;
                                                                                e && (y = t ? tt(.5) : n), g.setColorOverlay(y)
                                                                            }
                                                                        } catch (t) {
                                                                            s = {
                                                                                error: t
                                                                            }
                                                                        } finally {
                                                                            try {
                                                                                m && !m.done && (c = v.return) && c.call(v)
                                                                            } finally {
                                                                                if (s) throw s.error
                                                                            }
                                                                        }
                                                                    }
                                                                } catch (t) {
                                                                    i = {
                                                                        error: t
                                                                    }
                                                                } finally {
                                                                    try {
                                                                        d && !d.done && (a = h.return) && a.call(h)
                                                                    } finally {
                                                                        if (i) throw i.error
                                                                    }
                                                                }
                                                            }
                                                        } catch (t) {
                                                            o = {
                                                                error: t
                                                            }
                                                        } finally {
                                                            try {
                                                                u && !u.done && (r = l.return) && r.call(l)
                                                            } finally {
                                                                if (o) throw o.error
                                                            }
                                                        }
                                                    }(t || i)
                                            }, this.renderOptions.colorizeRooms && a(!0), this.renderOptions.colorizeChunks && a(!0, !0), this.settingsModule.registerButton("Mesh", "Highlight Rooms", a), this.settingsModule.registerButton("Mesh", "Highlight Chunks", (function() {
                                                return a(!i, !0)
                                            })), s = !1, this.settingsModule.registerButton("Mesh", "Toggle flat shading", (function() {
                                                var t, e;
                                                s = !s;
                                                try {
                                                    for (var n = rt(S.mesh.chunks), o = n.next(); !o.done; o = n.next()) {
                                                        o.value.setFlatShading(s)
                                                    }
                                                } catch (e) {
                                                    t = {
                                                        error: e
                                                    }
                                                } finally {
                                                    try {
                                                        o && !o.done && (e = n.return) && e.call(n)
                                                    } finally {
                                                        if (t) throw t.error
                                                    }
                                                }
                                            })), this.settingsModule.registerButton("Mesh", "Cycle all chunk materials", (function() {
                                                c()
                                            })), c = function() {
                                                return et(S, void 0, void 0, (function() {
                                                    var e, n, o, r, i, a, s, c, u, p, h, d, f, y, v, m, g, w, O, S, x, P, _, T, D, k;
                                                    return nt(this, (function(M) {
                                                        switch (M.label) {
                                                            case 0:
                                                                for (u in s = 100, c = [], X.a) isNaN(Number(u)) && c.push(X.a[u]);
                                                                for (h in p = [], l.b) isNaN(Number(h)) && p.push(l.b[h]);
                                                                for (it.info("Available ChunkMaterialCapabilities: " + c), d = [], v = 0; v < 1 << c.length - 1; v++) {
                                                                    for (w = {}, f = c.length - 1; f >= 0; f--) y = c[f], w[y] = Boolean(v & 1 << f);
                                                                    d.push(w)
                                                                }
                                                                it.info("There are " + d.length * p.length + " options to test"), v = 0, M.label = 1;
                                                            case 1:
                                                                return v < p.length ? [4, t.commandBinder.issueCommand(new K.a(v))] : [3, 13];
                                                            case 2:
                                                                M.sent(), M.label = 3;
                                                            case 3:
                                                                M.trys.push([3, 8, 9, 10]), m = rt(d), g = m.next(), M.label = 4;
                                                            case 4:
                                                                if (g.done) return [3, 7];
                                                                w = g.value, it.info("Testing ChunkRenderingMode." + l.b[v] + " with capabilities: " + JSON.stringify(w, void 0, 2)), O = new B.a(Math.random(), Math.random(), Math.random(), .5);
                                                                try {
                                                                    for (S = rt(Object.keys(w)), x = S.next(); !x.done; x = S.next()) {
                                                                        P = x.value;
                                                                        try {
                                                                            for (_ = rt(this.mesh.chunks), T = _.next(); !T.done; T = _.next())(D = T.value).setColorOverlay(O), D.setMeshPreviewSphere(new b.a(0, 0, 0)), D.overrideCapability(P, w[P])
                                                                        } catch (t) {
                                                                            i = {
                                                                                error: t
                                                                            }
                                                                        } finally {
                                                                            try {
                                                                                T && !T.done && (a = _.return) && a.call(_)
                                                                            } finally {
                                                                                if (i) throw i.error
                                                                            }
                                                                        }
                                                                    }
                                                                } catch (t) {
                                                                    o = {
                                                                        error: t
                                                                    }
                                                                } finally {
                                                                    try {
                                                                        x && !x.done && (r = S.return) && r.call(S)
                                                                    } finally {
                                                                        if (o) throw o.error
                                                                    }
                                                                }
                                                                return [4, Object(J.d)(s)];
                                                            case 5:
                                                                M.sent(), M.label = 6;
                                                            case 6:
                                                                return g = m.next(), [3, 4];
                                                            case 7:
                                                                return [3, 10];
                                                            case 8:
                                                                return k = M.sent(), e = {
                                                                    error: k
                                                                }, [3, 10];
                                                            case 9:
                                                                try {
                                                                    g && !g.done && (n = m.return) && n.call(m)
                                                                } finally {
                                                                    if (e) throw e.error
                                                                }
                                                                return [7];
                                                            case 10:
                                                                return [4, Object(J.d)(s)];
                                                            case 11:
                                                                M.sent(), M.label = 12;
                                                            case 12:
                                                                return v++, [3, 1];
                                                            case 13:
                                                                return [4, t.commandBinder.issueCommand(new K.a(null))];
                                                            case 14:
                                                                return M.sent(), [2]
                                                        }
                                                    }))
                                                }))
                                            }, u = function(t, e, n, o, r) {
                                                S.settingsModule.registerSetting(t, e, n, !0, q.SettingPersistence.NONE, r), S.settings.onPropertyChanged(e, o)
                                            }, p = function(t) {
                                                var e, n;
                                                try {
                                                    for (var o = rt(S.mesh.chunks), r = o.next(); !r.done; r = o.next()) {
                                                        r.value.setWireframe(t)
                                                    }
                                                } catch (t) {
                                                    e = {
                                                        error: t
                                                    }
                                                } finally {
                                                    try {
                                                        r && !r.done && (n = o.return) && n.call(o)
                                                    } finally {
                                                        if (e) throw e.error
                                                    }
                                                }
                                            }, this.renderOptions.wireframe && p(!0), u("Wireframe", y.b, !1, p), (n = {})[X.a.Wireframe] = {
                                                Wireframe: ["thickness", "wireframeOpacity", "stroke", "fillEnabled", "fill", "insideAltColor", "dualStroke", "secondThickness"],
                                                "Wireframe Dashes": ["dashEnabled", "dashLength", "dashAnimate", "dashOverlap"],
                                                "Wireframe Advanced": ["squeeze", "squeezeMin", "squeezeMax"]
                                            }, h = n)
                                            for (v in f = Z.a.modelChunk.uniforms[d], h[d]) {
                                                m = function(t) {
                                                    u(v, t, f[t].value, (function(e) {
                                                        var n, o;
                                                        try {
                                                            for (var r = rt(S.mesh.chunks), i = r.next(); !i.done; i = r.next()) {
                                                                i.value.setMaterialsUniform(t, e)
                                                            }
                                                        } catch (t) {
                                                            n = {
                                                                error: t
                                                            }
                                                        } finally {
                                                            try {
                                                                i && !i.done && (o = r.return) && o.call(r)
                                                            } finally {
                                                                if (n) throw n.error
                                                            }
                                                        }
                                                    }), f[t].range)
                                                };
                                                try {
                                                    for (g = rt(h[d][v]), w = g.next(); !w.done; w = g.next()) O = w.value, m(O)
                                                } catch (t) {
                                                    o = {
                                                        error: t
                                                    }
                                                } finally {
                                                    try {
                                                        w && !w.done && (r = g.return) && r.call(g)
                                                    } finally {
                                                        if (o) throw o.error
                                                    }
                                                }
                                            }
                                        return [2]
                                }
                            }))
                        }))
                    }, t.prototype.deactivate = function(t) {
                        var e, n;
                        try {
                            for (var o = rt(this.bindings), r = o.next(); !r.done; r = o.next()) {
                                r.value.cancel()
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                r && !r.done && (n = o.return) && n.call(o)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        this.bindings = [], this.scene.remove(this.mesh), this.currentSweepId && this.panoRenderer.freeTexture(this.currentSweepId), this.currentSweepId = null, this.targetSweepId = null
                    }, t.prototype.updateSweepRenderTarget = function(t, e, n, o) {
                        var r, i, a = this.panoRenderer.useTexture(e);
                        if (a) try {
                            for (var s = rt(this.mesh.chunks), c = s.next(); !c.done; c = s.next()) {
                                c.value.setProjectedPano(t, n, o, a)
                            }
                        } catch (t) {
                            r = {
                                error: t
                            }
                        } finally {
                            try {
                                c && !c.done && (i = s.return) && i.call(s)
                            } finally {
                                if (r) throw r.error
                            }
                        }
                    }, t.prototype.updateExistingTexture = function(t, e, n, o) {
                        var r, i;
                        try {
                            for (var a = rt(this.mesh.chunks), s = a.next(); !s.done; s = a.next()) {
                                var c = s.value;
                                t === this.currentSweepId && c.setProjectedPano(0, n, o, e), t === this.targetSweepId && c.setProjectedPano(1, n, o, e)
                            }
                        } catch (t) {
                            r = {
                                error: t
                            }
                        } finally {
                            try {
                                s && !s.done && (i = a.return) && i.call(a)
                            } finally {
                                if (r) throw r.error
                            }
                        }
                    }, t.prototype.render = function() {}, t.prototype.beforeRender = function() {
                        var t, e;
                        if (this.sweepData && this.viewmodeData) {
                            var n = !this.displayingUnaligned(this.sweepData, this.viewmodeData);
                            if (this.mesh.visible = n, this.modelCollider.setVisible(n), n) try {
                                for (var o = rt(this.mesh.chunks), r = o.next(); !r.done; r = o.next()) {
                                    var i = r.value;
                                    i.setMeshTextureOpacity(this.meshData.opacity.value), i.setProgress(this.sweepData.transition.progress.value)
                                }
                            } catch (e) {
                                t = {
                                    error: e
                                }
                            } finally {
                                try {
                                    r && !r.done && (e = o.return) && e.call(o)
                                } finally {
                                    if (t) throw t.error
                                }
                            }
                        }
                    }, t.prototype.displayingUnaligned = function(t, e) {
                        return e.closestMode === W.a.Panorama && !!t.currentSweep && t.isSweepUnaligned(t.currentSweep)
                    }, t.prototype.updateChunkMaterialMode = function(t, e) {
                        var n, o, r = e || l.b.Standard,
                            i = t ? H.w : H.F;
                        try {
                            for (var a = rt(this.mesh.chunks), s = a.next(); !s.done; s = a.next()) {
                                var c = s.value;
                                c.setRenderingMode(r), c.setSide(i)
                            }
                        } catch (t) {
                            n = {
                                error: t
                            }
                        } finally {
                            try {
                                s && !s.done && (o = a.return) && o.call(a)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                    }, t.prototype.updateChunkedColliderSide = function(t) {
                        var e = t === W.a.Panorama ? H.w : H.F;
                        this.modelCollider.setSide(e)
                    }, t.prototype.updateRenderState = function() {
                        if (this.mesh.visible = this.settings.tryGetProperty(y.a, !0), this.viewmodeData && this.sweepData) {
                            if (this.viewmodeData.currentMode !== this.lastViewmode || this.lastChunkRenderingModeOverride !== this.chunkRenderingModeOverride) {
                                this.lastChunkRenderingModeOverride = this.chunkRenderingModeOverride;
                                var t = this.viewmodeData.currentMode === W.a.Panorama;
                                this.updateChunkMaterialMode(t, this.chunkRenderingModeOverride), this.viewmodeData.currentMode && this.updateChunkedColliderSide(this.viewmodeData.currentMode), this.lastViewmode = this.viewmodeData.currentMode
                            }
                            if (this.viewmodeData.transition.active && this.viewmodeData.transition.to === W.a.Panorama || this.viewmodeData.currentMode === W.a.Panorama) {
                                var e = this.sweepData.currentSweep,
                                    n = this.sweepData.transition,
                                    o = n.active && (this.applicationData.phase === Q.a.PLAYING || this.applicationData.phase === Q.a.STARTING),
                                    r = o ? n.from : e,
                                    i = o ? n.to : e;
                                this.currentSweepId = this.handleSweepChange(0, this.sweepData, this.currentSweepId, r || null), this.targetSweepId = this.handleSweepChange(1, this.sweepData, this.targetSweepId, i || null)
                            }
                        }
                    }, t.prototype.handleSweepChange = function(t, e, n, o) {
                        if (n !== o && (n && this.panoRenderer.freeTexture(n), o)) {
                            var r = e.getSweep(o);
                            this.updateSweepRenderTarget(t, o, r.position, r.rotation)
                        }
                        return o
                    }, t
                }(),
                st = n(785),
                ct = n(635),
                lt = n(244),
                ut = n(176),
                pt = n(256),
                ht = n(255),
                dt = n(171),
                ft = n(61),
                yt = n(60),
                vt = n(532),
                mt = n(542),
                gt = n(140),
                bt = n(63),
                wt = n(530),
                Ot = n(94),
                St = n(10),
                xt = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                Pt = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                _t = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                Tt = function(t, e) {
                    var n = "function" == typeof Symbol && t[Symbol.iterator];
                    if (!n) return t;
                    var o, r, i = n.call(t),
                        a = [];
                    try {
                        for (;
                            (void 0 === e || e-- > 0) && !(o = i.next()).done;) a.push(o.value)
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    return a
                },
                Dt = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                kt = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "model-mesh", e.renderingMesh = !0, e
                    }
                    return xt(e, t), e.prototype.init = function(t, e) {
                        return Pt(this, void 0, void 0, (function() {
                            var n, r, i, a, s, c, l, u, p, h, d, f, y, v, m, b, w, O, S, x, P, _, T, D, k = this;
                            return _t(this, (function(M) {
                                switch (M.label) {
                                    case 0:
                                        return this.market = e.market, [4, Promise.all([e.getModule(o.Nb), e.getModule(o.eb), e.getModule(o.R), e.getModule(o.x), e.market.waitForData(ft.a), e.market.waitForData(G.a), e.market.waitForData(yt.a)])];
                                    case 1:
                                        return n = Tt.apply(void 0, [M.sent(), 7]), r = n[0], i = n[1], a = n[2], s = n[3], c = n[4], l = n[5], u = n[6], this.viewmodeData = l, p = r.getScene(), h = i.getRaycaster(), d = a.getSignedUrls(), f = a.getModel().uuid, this.renderingMesh = !!t.renderMeshGeometry, [4, e.getModuleByParent(o.vb)];
                                    case 2:
                                        return y = M.sent(), this.panoRenderer = y.getRenderer(), this.modelMesh = new N(f, d, e.claimRenderLayer(this.name), t.maxEdgeLength), [4, this.modelMesh.load({
                                            onProgress: function(t) {
                                                e.broadcast(new lt.a(t.loaded, t.total))
                                            }
                                        })];
                                    case 3:
                                        return v = M.sent(), m = v.boundingBox.clone(), b = new g.a, u.iterate((function(t) {
                                            t.placementType !== bt.b.UNPLACED && (b.setFromCenterAndSize(t.position, St.b.UNIT), m.union(b))
                                        })), this.meshData = new vt.a(0, m), this.market.register(this, vt.a, this.meshData), w = !1, t.renderMeshGeometry ? [4, e.getModule(o.fb)] : [3, 5];
                                    case 4:
                                        S = M.sent(), this.modelTextureLoader = new st.a(t.textureLOD, d, this.modelMesh, p.camera, c, r.cwfRenderer, S, h, p, e), x = l.currentMode, P = function() {
                                            var e = k.modelTextureLoader.textureCount <= t.textureLODThreshold ? dt.e.ULTRA : dt.e.MEDIUM,
                                                n = Math.max(e, x === W.a.Panorama && 0 === k.meshData.opacity.value ? e : t.maxQuality);
                                            k.modelTextureLoader.setQuality(e, n);
                                            var r = x !== W.a.Dollhouse && x !== W.a.Floorplan,
                                                i = l.transition.active && l.transition.to === W.a.Panorama;
                                            k.modelTextureLoader.autoLoadTiles = !(i || w && r) && t.textureLOD !== o.Gb.NONE
                                        }, this.bindings.push(e.subscribe(pt.a, (function(t) {
                                            x = t.toMode, P()
                                        }))), this.bindings.push(e.subscribe(ht.a, (function(t) {
                                            x = t.toMode, P()
                                        }))), _ = this.meshData.opacity, this.bindings.push(this.meshData.onChanged((function(t) {
                                            t.opacity !== _ && P(), _ = t.opacity
                                        }))), T = t.textureLOD !== o.Gb.NONE ? dt.e.LOW : t.maxQuality, O = this.modelTextureLoader.loadAll(T).then((function() {
                                            P()
                                        })), this.bindings.push(e.subscribe(wt.c, (function() {
                                            w = !0, P()
                                        }))), this.bindings.push(e.subscribe(wt.f, (function() {
                                            w = !1, P()
                                        }))), M.label = 5;
                                    case 5:
                                        return this.modelCollider = new V(s.registerMesh, s.unregisterMesh, s.enableMeshGroup, v), i.setupOctree(v), e.addComponent(this, this.modelCollider), t.renderMeshGeometry ? [4, e.market.waitForData(Q.c)] : [3, 8];
                                    case 6:
                                        return D = M.sent(), this.renderer = new at(p.scene, v, this.modelCollider, this.panoRenderer, this.meshData, u, D, t), e.addComponent(this, this.renderer), [4, O];
                                    case 7:
                                        M.sent(), M.label = 8;
                                    case 8:
                                        return e.broadcast(new lt.b(this.modelMesh)), this.bindings.push(e.subscribe(ct.a, (function(t) {
                                            k.renderer.updateExistingTexture(t.sweepId, t.renderTarget.texture)
                                        }))), this.bindings.push(e.subscribe(gt.a, (function(t) {
                                            u.getSweep(t.toSweep).alignmentType === bt.a.UNALIGNED && k.setMeshOpacity(0)
                                        }))), this.bindings.push(e.commandBinder.addBinding(mt.a, (function(t) {
                                            return Pt(k, void 0, void 0, (function() {
                                                return _t(this, (function(e) {
                                                    return [2, this.setMeshOpacity(t.value)]
                                                }))
                                            }))
                                        }))), this.bindings.push(e.subscribe(pt.a, (function(t) {
                                            k.startOpacityTransition()
                                        }))), [2]
                                }
                            }))
                        }))
                    }, e.prototype.onUpdate = function(t) {
                        var e, n;
                        this.modelTextureLoader && this.modelTextureLoader.update(t), this.meshData.opacity.active && (this.meshData.opacity.updateProgress(this.viewmodeData.transition.progress), this.meshData.commit());
                        var o = performance.now() / 1e3;
                        try {
                            for (var r = Dt(this.modelMesh.chunks), i = r.next(); !i.done; i = r.next()) {
                                i.value.setMaterialsUniform("time", o)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                i && !i.done && (n = r.return) && n.call(r)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                    }, Object.defineProperty(e.prototype, "mesh", {
                        get: function() {
                            return this.modelMesh
                        },
                        enumerable: !0,
                        configurable: !0
                    }), Object.defineProperty(e.prototype, "collider", {
                        get: function() {
                            return this.modelCollider
                        },
                        enumerable: !0,
                        configurable: !0
                    }), e.prototype.startOpacityTransition = function() {
                        var t = this.viewmodeData.transition.to,
                            e = this.meshData.opacity.value,
                            n = t === W.a.Panorama ? 0 : 1,
                            o = t === W.a.Panorama ? Ot.b : Ot.g;
                        this.meshData.opacity.value !== n && this.meshData.opacity.modifyAnimation(e, n, 1, o)
                    }, e.prototype.setMeshOpacity = function(t) {
                        this.meshData.opacity.modifyAnimation(t, t, 0), this.meshData.commit()
                    }, e.prototype.isRenderingMesh = function() {
                        return this.renderingMesh
                    }, e.prototype.getPanoRenderer = function() {
                        return this.panoRenderer
                    }, e.prototype.raycast = function(t, e, n) {
                        var o, r, i = new ut.a(t, e, 0, n),
                            a = [];
                        try {
                            for (var s = Dt(this.collider.getReadonlyColliderList()), c = s.next(); !c.done; c = s.next()) {
                                var l = c.value;
                                a.push(l)
                            }
                        } catch (t) {
                            o = {
                                error: t
                            }
                        } finally {
                            try {
                                c && !c.done && (r = s.return) && r.call(s)
                            } finally {
                                if (o) throw o.error
                            }
                        }
                        return i.intersectObjects(a, !0)
                    }, e
                }(o.S);
            e.default = kt
        },
        1010: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(222),
                i = n(161),
                a = n(1),
                s = n(16),
                c = n(41),
                l = n(0),
                u = n(634),
                p = n(124),
                h = n(10),
                d = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                };
            ! function(t) {
                t[t.PreOrder = 0] = "PreOrder", t[t.PostOrder = 1] = "PostOrder"
            }(o || (o = {}));
            var f, y = function() {
                    function t(e, n) {
                        this.tree = e, this.parent = n, this.children = [], this.id = ++t._id, this.extra = {}, this.level = -1
                    }
                    return t._id = 0, t
                }(),
                v = function() {
                    function t(t, e) {
                        this.levels = e, this.tileSize = t, this.root = null, this.allNodes = [], b(this)
                    }
                    return t.prototype.getSizeForLevel = function(t, e) {
                        return Math.pow(2, e) * t
                    }, t.prototype.getSubNode = function(t, e, n) {
                        (!e || t < this.tileSize) && (e = 0), (!n || t < this.tileSize) && (n = 0), t < this.tileSize && (t = this.tileSize);
                        var o = m(this.tileSize, t);
                        return O(this.root, 0, o, e, n)
                    }, t.prototype.deleteAllNodes = function() {
                        this.depthFirst(function(t, e, n, o, r) {
                            for (var i = 0; i < t.children.length; i++) {
                                var a = t.children[i];
                                a && (a.parent = null, a.tree = null), t.children[i] = null
                            }
                            t.children.length = 0
                        }.bind(this), null, o.PostOrder);
                        for (var t = 0; t < this.allNodes.length; t++) {
                            var e = this.allNodes[t];
                            e && (e.parent = null, e.tree = null), this.allNodes[t] = null
                        }
                        this.allNodes.length = 0, this.root = null
                    }, t.prototype.breadthFirst = function(t) {
                        var e, n, o = !!(t = t || {}).nullLevelEnd,
                            r = t.maxLevel,
                            i = t.minLevel,
                            a = t.callback,
                            s = t.saveVisited,
                            c = [],
                            l = new y(this, null),
                            u = 0;
                        if (this.root)
                            for (c.push(this.root), c.push(l); c.length > 0 && !(r && u > r);) {
                                var p = c.shift();
                                if (p)
                                    if (p === l)(!i || u >= i) && (a && o && a(), s && o && s.push(null)), c.length > 0 && c.push(l), u++;
                                    else {
                                        if (p.children) try {
                                            for (var h = d(p.children), f = h.next(); !f.done; f = h.next()) {
                                                var v = f.value;
                                                v && c.push(v)
                                            }
                                        } catch (t) {
                                            e = {
                                                error: t
                                            }
                                        } finally {
                                            try {
                                                f && !f.done && (n = h.return) && n.call(h)
                                            } finally {
                                                if (e) throw e.error
                                            }
                                        }
                                        var m = this.getFaceIndexFromNode(p);
                                        (!i || u >= i) && (a && a(p, u, m), s && s.push(p))
                                    }
                            }
                    }, t.prototype.getFaceIndexFromNode = function(t) {
                        if (!t) return -1;
                        for (var e = 1, n = t, o = 0, r = 0;;) {
                            var i = n.parent;
                            if (!i) break;
                            for (var a = -1, s = 0; s < i.children.length; s++) i.children[s] === n && (a = s);
                            o = a % 2 * e + o, r = Math.floor(a / 2) * e + r, e *= 2, n = i
                        }
                        return r * e + o
                    }, t.prototype.depthFirst = function(t, e, n) {
                        g(this.root, 0, 0, 0, t, e, n, this.tileSize)
                    }, t
                }(),
                m = function(t, e) {
                    var n = 0;
                    for (e < t && (e = t); !((e /= 2) < t);) n++;
                    return n
                },
                g = function(t, e, n, r, i, a, s, c) {
                    if (t) {
                        var l = 2 * r + n;
                        if ((s = s || o.PreOrder) === o.PreOrder && (i && i(t, e, l, n, r), a && a.push(t)), t.children && 0 !== t.children.length) {
                            for (var u = 2 * r, p = 2 * n, h = 0; h < 2; h++)
                                for (var d = 0; d < 2; d++) g(t.children[2 * d + h], e + 1, p + h, u + d, i, a, s, c);
                            s === o.PostOrder && (i && i(t, e, l, n, r), a && a.push(t))
                        }
                    }
                },
                b = function(t) {
                    t.root = w(t, null, 0)
                },
                w = function(t, e, n) {
                    if (n > t.levels) return null;
                    var o = new y(t, e);
                    o.level = n, t.allNodes.push(o);
                    for (var r = 0; r < 4; r++) {
                        var i = w(t, o, n + 1);
                        i && (o.children[r] = i)
                    }
                    return o
                },
                O = function(t, e, n, o, r) {
                    if (!t) return null;
                    if (0 === n) return t;
                    if (!t.children || 0 === t.children.length) return null;
                    var i = Math.pow(2, n) / 2,
                        a = o % i,
                        s = r % i,
                        c = 2 * Math.floor(r / i) + Math.floor(o / i),
                        l = t.children[c];
                    return O(l, e + 1, n - 1, a, s)
                },
                S = n(540),
                x = n(720),
                P = n(576),
                _ = n(575),
                T = n(67),
                D = n(560);
            ! function(t) {
                t[t.None = 0] = "None", t[t.Queued = 1] = "Queued", t[t.ForceQueued = 2] = "ForceQueued", t[t.Downloading = 3] = "Downloading", t[t.Downloaded = 4] = "Downloaded", t[t.DownloadFailed = 5] = "DownloadFailed"
            }(f || (f = {}));
            var k, M = f,
                E = n(14),
                C = n(27),
                j = n(529),
                L = n(541),
                R = n(81),
                A = n(2),
                I = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                };
            ! function(t) {
                t[t.None = 0] = "None", t[t.DirectionalFOV = 1] = "DirectionalFOV"
            }(k || (k = {}));
            var N = function(t, e, n, o, r) {
                    this.sweep = t, this.cameraPosition = (new a.a).copy(e), this.cameraDir = (new a.a).copy(n), this.panoSpaceDir = (new a.a).copy(o), this.upcomingSweeps = r, this.zoomingActive = !1
                },
                F = function(t, e, n) {
                    var o, r;
                    void 0 === n && (n = !1);
                    var i = 0;
                    if (t && e) try {
                        for (var a = I(e), s = a.next(); !s.done; s = a.next()) {
                            var c = s.value;
                            n && -1 !== t.indexOf(c) || (t.push(c), i++)
                        }
                    } catch (t) {
                        o = {
                            error: t
                        }
                    } finally {
                        try {
                            s && !s.done && (r = a.return) && r.call(a)
                        } finally {
                            if (o) throw o.error
                        }
                    }
                    return i
                },
                U = function() {
                    function t(t, e) {
                        this.panoQualityManager = t, this.tilingSettings = e, this.persistentStorage = new D.a, this.maxResolution = t.getNavPanoSize(), this.currViewQueue = B(), this.fullPanoQueue = B(), this.priorityCriteria = new N(null, new a.a(0, 0, 0), new a.a(0, 0, -1), new a.a(0, 0, -1))
                    }
                    return t.prototype.getQualityQueueSize = function(t, e) {
                        return t === A.m.CurrentView ? this.currViewQueue[e].value : this.fullPanoQueue[e].value
                    }, t.prototype.makeQueueSubscription = function(t, e, n) {
                        return (t === A.m.CurrentView ? this.currViewQueue[e] : this.fullPanoQueue[e]).onChanged(n)
                    }, t.prototype.updateCriteria = function(t, e, n) {
                        this.priorityCriteria.sweep = t, this.priorityCriteria.cameraPosition.copy(e), this.priorityCriteria.cameraDir.copy(n)
                    }, t.prototype.setUpcomingSweeps = function(t) {
                        this.priorityCriteria.upcomingSweeps = t
                    }, t.prototype.clearUpcomingSweeps = function() {
                        this.priorityCriteria.upcomingSweeps = void 0
                    }, t.prototype.filterAndPrioritize = function(e, n, o) {
                        var r, i;
                        if (this.priorityCriteria.sweep) {
                            var a = void 0 !== this.priorityCriteria.upcomingSweeps && null !== this.priorityCriteria.upcomingSweeps,
                                s = this.persistentStorage.getArray("filterAndPrioritize:tempQueue"),
                                c = [];
                            a || (c = this.persistentStorage.getArray("filterAndPrioritize:scoredSweeps"), this.populateScoredSweeps(this.priorityCriteria.sweep, n, c, this.priorityCriteria.cameraDir, 6));
                            var l = this.priorityCriteria.sweep.id;
                            s.length = 0, this.queueTilesForPano(s, o, this.priorityCriteria.sweep, T.c.BASE);
                            var u = F(e, s, !0);
                            if (this.currViewQueue[T.d.BASE].value = u, this.fullPanoQueue[T.d.BASE].value = u, this.priorityCriteria.upcomingSweeps) {
                                var p = 0;
                                try {
                                    for (var h = I(this.priorityCriteria.upcomingSweeps), d = h.next(); !d.done; d = h.next()) {
                                        var f = d.value;
                                        if ((p += this.queueTilesForPano(e, o, f, T.c.BASE)) >= 3) break
                                    }
                                } catch (t) {
                                    r = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        d && !d.done && (i = h.return) && i.call(h)
                                    } finally {
                                        if (r) throw r.error
                                    }
                                }
                            }
                            if (this.canDownloadSize(l, T.d.STANDARD)) {
                                s.length = 0;
                                var y = this.queueTilesInDirectionForPano(s, o, this.priorityCriteria.sweep, T.c.STANDARD, this.priorityCriteria.cameraPosition, this.priorityCriteria.cameraDir, 120);
                                t.sortTiles(s, this.priorityCriteria.sweep, this.priorityCriteria.cameraDir), F(e, s, !0), this.currViewQueue[T.d.STANDARD].value = y, this.fullPanoQueue[T.d.STANDARD].value = y
                            }
                            if (!a && this.maxResolution <= 2048 && this.queueTilesForPanos(e, c, o, T.c.BASE, 2), s.length = 0, this.canDownloadSize(l, T.d.HIGH)) {
                                y = this.queueTilesInDirectionForPano(s, o, this.priorityCriteria.sweep, T.c.HIGH, this.priorityCriteria.cameraPosition, this.priorityCriteria.cameraDir, 120);
                                this.currViewQueue[T.d.HIGH].value = y
                            }
                            if (this.canDownloadSize(l, T.d.ULTRAHIGH)) {
                                y = this.queueTilesInDirectionForPano(s, o, this.priorityCriteria.sweep, T.c.ULTRAHIGH, this.priorityCriteria.cameraPosition, this.priorityCriteria.cameraDir, 120);
                                this.currViewQueue[T.d.ULTRAHIGH].value = y
                            }
                            if (t.sortTiles(s, this.priorityCriteria.sweep, this.priorityCriteria.cameraDir), F(e, s, !0), s.length = 0, this.canDownloadSize(l, T.d.STANDARD) && this.queueTilesInDirectionForPano(s, o, this.priorityCriteria.sweep, T.c.STANDARD, this.priorityCriteria.cameraPosition, this.priorityCriteria.cameraDir, 180), this.canDownloadSize(l, T.d.HIGH) && this.queueTilesInDirectionForPano(s, o, this.priorityCriteria.sweep, T.c.HIGH, this.priorityCriteria.cameraPosition, this.priorityCriteria.cameraDir, 180), this.canDownloadSize(l, T.d.ULTRAHIGH) && this.queueTilesInDirectionForPano(s, o, this.priorityCriteria.sweep, T.c.ULTRAHIGH, this.priorityCriteria.cameraPosition, this.priorityCriteria.cameraDir, 180), t.sortTiles(s, this.priorityCriteria.sweep, this.priorityCriteria.cameraDir), F(e, s, !0), this.tilingSettings.downloadFullPano) {
                                if (s.length = 0, this.maxResolution <= T.c.HIGH) {
                                    if (this.canDownloadSize(l, T.d.HIGH)) {
                                        y = this.queueTilesForPano(s, o, this.priorityCriteria.sweep, T.c.HIGH);
                                        this.fullPanoQueue[T.d.HIGH].value = y
                                    }
                                } else if (this.canDownloadSize(l, T.d.ULTRAHIGH)) {
                                    y = this.queueTilesForPano(s, o, this.priorityCriteria.sweep, T.c.ULTRAHIGH);
                                    this.fullPanoQueue[T.d.ULTRAHIGH].value = y
                                }
                                t.sortTiles(s, this.priorityCriteria.sweep, this.priorityCriteria.cameraDir), F(e, s, !0)
                            }
                            if (!a) {
                                var v = this.persistentStorage.getArray("filterAndPrioritize:neighbors");
                                this.populateNeighborSweeps(this.priorityCriteria.sweep, n, v), this.queueTilesForPanos(e, v, o, T.c.BASE)
                            }
                        }
                    }, t.prototype.canDownloadSize = function(t, e) {
                        var n = T.a[e],
                            o = this.panoQualityManager.getNavPanoSize() >= n || this.maxResolution >= n && this.panoQualityManager.getZoomPanoSize() >= n,
                            r = this.panoQualityManager.getTestResults(t, e);
                        return o && r === P.a.Untested && this.panoQualityManager.testDownload(t, e, S.b), r === P.a.Success && o
                    }, t.prototype.populateNeighborSweeps = function(t, e, n) {
                        for (var o in (n = n || []).length = 0, t.neighbours) {
                            var r = t.neighbours[o],
                                i = e.get(r);
                            n.push(i)
                        }
                    }, t.prototype.populateScoredSweeps = function(t, e, n, o, i) {
                        (n = n || []).length = 0;
                        for (var s = (new a.a).copy(t.position), c = [j.a(s, o, .75), j.h(t)], l = [L.d(s, r.c.navigation.distanceFactor), L.b(s, o, r.c.navigation.directionFactor)], u = H(c, l, e), p = 0; p < u.length && p < i; p++) {
                            var h = u[p].sweep;
                            n.push(h)
                        }
                    }, t.prototype.queueTilesForPanos = function(t, e, n, o, r) {
                        var i, a, s = 0;
                        try {
                            for (var c = I(e), l = c.next(); !l.done; l = c.next()) {
                                var u = l.value;
                                if (s += this.queueTilesForPano(t, n, u, o) > 0 ? 1 : 0, r && s >= r) break
                            }
                        } catch (t) {
                            i = {
                                error: t
                            }
                        } finally {
                            try {
                                l && !l.done && (a = c.return) && a.call(c)
                            } finally {
                                if (i) throw i.error
                            }
                        }
                        return s
                    }, t.prototype.queueTilesForPano = function(t, e, n, o) {
                        var r = this.persistentStorage.get("queueTilesForSweep:filterCriteria", (function() {
                            return {
                                filter: k.None
                            }
                        }));
                        return this.filterAndQueueTileDownloadDescriptors(t, e, n, o, r)
                    }, t.prototype.queueTilesInDirectionForPano = function(t, e, n, o, r, i, s) {
                        var c = this.persistentStorage.get("queueTilesInDirectionForSweep:panoSpaceDir", (function() {
                                return new a.a
                            })),
                            l = this.persistentStorage.get("queueTilesInDirectionForSweep:filterCriteria", (function() {
                                return {
                                    filter: k.DirectionalFOV,
                                    direction: new a.a,
                                    fov: 60
                                }
                            }));
                        return c.copy(i), S.d(n.rotation, c), l.direction.copy(c), l.fov = s, this.filterAndQueueTileDownloadDescriptors(t, e, n, o, l)
                    }, t.prototype.filterAndQueueTileDownloadDescriptors = function(t, e, n, o, r) {
                        var i, a, s = this.persistentStorage.getArray("filterAndQueueTileDownloadDescriptors:descriptors"),
                            c = e.getTileDownloadDescriptors(n, o);
                        s.length = 0, this.filterTileDownloadDescriptors(c, s, r);
                        var l = 0;
                        try {
                            for (var u = I(s), p = u.next(); !p.done; p = u.next()) {
                                var h = p.value;
                                h && (t.push(h), l++)
                            }
                        } catch (t) {
                            i = {
                                error: t
                            }
                        } finally {
                            try {
                                p && !p.done && (a = u.return) && a.call(u)
                            } finally {
                                if (i) throw i.error
                            }
                        }
                        return l
                    }, t.prototype.filterTileDownloadDescriptors = function(t, e, n) {
                        var o, r;
                        switch (n.filter) {
                            case k.DirectionalFOV:
                                for (o = 0; o < t.length; o++)(r = t[o]) && S.h(r.panoSize, r.tileSize, r.face, r.tileX, r.tileY, n.direction, n.fov) && e.push(r);
                                break;
                            default:
                                for (o = 0; o < t.length; o++) r = t[o], e.push(r)
                        }
                        for (o = 0; o < e.length; o++)(r = e[o]) && !this.canIncludeDescriptor(r) && (e[o] = null)
                    }, t.prototype.canIncludeDescriptor = function(t) {
                        return t.status !== M.Downloading && t.status !== M.Downloaded
                    }, t.sortTiles = function(t, e, n) {
                        z.panoSpaceDir.copy(n), S.d(e.rotation, z.panoSpaceDir), z.fovThresholdNarrow = E.l(120), z.fovThreshold = E.l(180), t.sort(V)
                    }, t.insertSortedPanoTile = function(t, e, n, o) {
                        z.panoSpaceDir.copy(o), S.d(n.rotation, z.panoSpaceDir), z.fovThresholdNarrow = E.l(120), z.fovThreshold = E.l(180);
                        for (var r = -1, i = 0; i < t.length; i++) {
                            if (V(e, t[i]) <= 0) {
                                r = i;
                                break
                            }
                        }
                        if (-1 === r) t[t.length] = e;
                        else {
                            for (var a = t.length; a > r; a--) t[a] = t[a - 1];
                            t[r] = e
                        }
                    }, t
                }(),
                z = {
                    panoSpaceDir: new a.a,
                    fovThreshold: -1,
                    fovThresholdNarrow: -1
                },
                V = function(t, e) {
                    var n = z.panoSpaceDir,
                        o = z.fovThreshold,
                        r = z.fovThresholdNarrow,
                        i = Math.max(Math.min(n.dot(t.direction), 1), -1),
                        a = Math.max(Math.min(n.dot(e.direction), 1), -1);
                    return i >= o && a < o ? -1 : i < o && a >= o ? 1 : i >= r && a < r ? -1 : i < r && a >= r ? 1 : t.panoSize > e.panoSize ? 1 : e.panoSize > t.panoSize ? -1 : -(i - a)
                },
                H = function(t, e, n) {
                    var o, r, i = [],
                        a = function(n) {
                            if (!C.g(n, t)) return "continue";
                            i.push({
                                sweep: n,
                                score: e.reduce((function(t, e) {
                                    return t + e(n)
                                }), 0)
                            })
                        };
                    try {
                        for (var s = I(n), c = s.next(); !c.done; c = s.next()) {
                            a(c.value)
                        }
                    } catch (t) {
                        o = {
                            error: t
                        }
                    } finally {
                        try {
                            c && !c.done && (r = s.return) && r.call(s)
                        } finally {
                            if (o) throw o.error
                        }
                    }
                    return i.sort((function(t, e) {
                        return e.score - t.score
                    })), i
                };

            function B() {
                var t;
                return (t = {})[T.d.BASE] = Object(R.b)(0), t[T.d.STANDARD] = Object(R.b)(0), t[T.d.HIGH] = Object(R.b)(0), t[T.d.ULTRAHIGH] = Object(R.b)(0), t
            }
            var W, G = function(t) {
                var e = "function" == typeof Symbol && t[Symbol.iterator],
                    n = 0;
                return e ? e.call(t) : {
                    next: function() {
                        return t && n >= t.length && (t = void 0), {
                            value: t && t[n++],
                            done: !t
                        }
                    }
                }
            };
            ! function(t) {
                t[t.Base = 0] = "Base", t[t.Remaining = 1] = "Remaining"
            }(W || (W = {}));
            var Q, Y = function() {
                    function t() {
                        this.forceQueue = [], this.uploadQueues = {}, this.panoLODDescriptors = {}
                    }
                    return t.prototype.addToForceQueue = function(t) {
                        this.forceQueue.push(t)
                    }, t.prototype.addToPanoQueue = function(t, e) {
                        this.getUploadQueueForPano(t).push(e)
                    }, t.prototype.insertSortedIntoPanoQueue = function(t, e, n) {
                        var o = this.getUploadQueueForPano(e.id);
                        U.insertSortedPanoTile(o, t, e, n)
                    }, t.prototype.sortQueue = function(t, e) {
                        var n = this.getUploadQueueForPano(t.id);
                        U.sortTiles(n, t, e)
                    }, t.prototype.getUploadQueueForPano = function(t) {
                        var e = this.uploadQueues[t];
                        return e || (e = [], this.uploadQueues[t] = e), e
                    }, t.prototype.hasQueuedTiles = function() {
                        if (this.forceQueue.length > 0) return !0;
                        for (var t in this.uploadQueues) {
                            var e = this.getUploadQueueForSweep(t);
                            if (e && e.length > 0) return !0
                        }
                        return !1
                    }, t.prototype.getUploadQueueForSweep = function(t) {
                        var e = this.uploadQueues[t];
                        return e || (e = [], this.uploadQueues[t] = e), e
                    }, t.prototype.getTopUploadQueue = function(t) {
                        for (var e, n, o = null, r = W.Base; r <= W.Remaining; r++) try {
                            for (var i = G(t), a = i.next(); !a.done; a = i.next()) {
                                var s = a.value;
                                if ((o = this.getUploadQueueForSweep(s.id)).length > 0) switch (r) {
                                    case W.Base:
                                        if (0 === o[0].level) return o;
                                        break;
                                    case W.Remaining:
                                        return o
                                }
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                a && !a.done && (n = i.return) && n.call(i)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        return null
                    }, t.prototype.processNextQueueItem = function(t) {
                        var e = t.shift();
                        return e ? (e.uploadQueued = !1, e) : null
                    }, t.prototype.getNextFromUploadQueue = function(t) {
                        if (this.forceQueue.length > 0) return this.processNextQueueItem(this.forceQueue);
                        var e = this.getTopUploadQueue(t);
                        return e && e.length > 0 ? this.processNextQueueItem(e) : null
                    }, t.prototype.peekNextFromUploadQueue = function(t) {
                        if (this.forceQueue.length > 0) return this.forceQueue[0];
                        var e = this.getTopUploadQueue(t);
                        return e && e.length > 0 ? e[0] : null
                    }, t.prototype.clearAllQueuedUploads = function() {
                        this.clearAllUploadQueues(null, 0)
                    }, t.prototype.clearAllUploadQueues = function(t, e) {
                        if (void 0 === e && (e = 0), t) this.clearUploadQueue(this.getUploadQueueForSweep(t), e), this.clearUploadQueue(this.forceQueue, e, t);
                        else {
                            for (var n in this.uploadQueues) this.clearUploadQueue(this.getUploadQueueForSweep(n), e);
                            this.clearUploadQueue(this.forceQueue, e)
                        }
                    }, t.prototype.clearUploadQueue = function(t, e, n) {
                        void 0 === e && (e = 0);
                        for (var o = 0; o < t.length;) {
                            var r = t[o];
                            (!n || n && n === r.sweepId) && r.level >= e ? (r.uploadQueued = !1, t.splice(o, 1)) : o++
                        }
                    }, t.prototype.resetPanoLODDescriptors = function(t) {
                        var e = this.getPanoLODDescriptors(t);
                        for (var n in e)
                            if (e.hasOwnProperty(n)) {
                                var o = e[n];
                                o.uploadCount = 0, o.uploadAttempts = 0
                            }
                    }, t.prototype.getPanoLODDescriptor = function(t, e) {
                        var n = this.getPanoLODDescriptors(t),
                            o = n[e];
                        return o || (o = {
                            uploadCount: 0,
                            uploadAttempts: 0
                        }, n[e] = o), o
                    }, t.prototype.getPanoLODDescriptors = function(t) {
                        var e = this.panoLODDescriptors[t];
                        return e || (e = {}, this.panoLODDescriptors[t] = e), e
                    }, t
                }(),
                q = n(635),
                K = n(270),
                Z = (Q = function(t, e) {
                    return (Q = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    Q(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                X = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                J = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                $ = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                tt = r.c.uploadIntervalDelay,
                et = function(t) {
                    function e(e, n, o, r, i, c, l, p) {
                        var h = t.call(this, e, i.getSweepList()) || this;
                        return h.cwfRenderer = n, h.panoQualityManager = o, h.tileDownloader = r, h.sweepData = i, h.cameraData = c, h.tilingSettings = l, h.broadcast = p, h.persistentStorage = new D.a, h.activeSweeps = [], h.sweepLoadHistory = [], h.activeRenderTargetDescriptors = {}, h.panoLoadPromises = {}, h.panoLoadResolvers = {}, h.tileTrees = {}, h.tileDirectory = {}, h.zoomSweepRenderingDisabled = !1, h.zoomingActive = !1, h.zoomSweepId = null, h.usingTileOverlay = !1, h.overlayTilesLoaded = !1, h.overlayTileBase = null, h.overlayTilesBasic = {}, h.overlayTilesEnhanced = {}, h.tileUploadQueue = new Y, h.currentState = {
                            direction: new a.a,
                            position: new a.a,
                            rotation: new s.a
                        }, h.renderTargetPool = new u.a(h.rtCompare), h.tileDownloader.setModel(h.sweepListMap), h.tileDownloader.setLoadCallbacks(h.onTileDownLoaded.bind(h)), h
                    }
                    return Z(e, t), e.prototype.activate = function(t) {
                        this.engine = t
                    }, e.prototype.rtCompare = function(t, e) {
                        return t.object.height === e.size && t.object.width === e.size
                    }, e.prototype.getActivePanos = function() {
                        var t, e, n = [];
                        try {
                            for (var o = $(Object.keys(this.activeRenderTargetDescriptors)), r = o.next(); !r.done; r = o.next()) {
                                var i = r.value;
                                this.activeRenderTargetDescriptors[i] && n.push(i)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                r && !r.done && (e = o.return) && e.call(o)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                        return n
                    }, e.prototype.init = function() {
                        t.prototype.init.call(this), this.loadOverlayTiles()
                    }, e.prototype.highResRenderTarget = function(t, e) {
                        if (t) {
                            if (!e) throw new Error("Cannot activate zooming without sweepId!");
                            this.zoomingActive = !0, this.zoomSweepId = e, this.copyTargetToZoom(e)
                        } else this.zoomingActive = !1, this.zoomSweepId = null;
                        if (e) {
                            var n = this.getRenderTargetDescriptorForSweep(e);
                            if (!n) throw new Error("Zooming at a null render target!");
                            var o = this.zoomingActive ? this.zoomRenderTarget : n.object,
                                r = o.width;
                            this.broadcast(new q.a(r, e, o))
                        }
                    }, e.prototype.getCurrentPanoResolution = function() {
                        var t = this.zoomingActive ? this.panoQualityManager.getZoomPanoSize() : this.panoQualityManager.getNavPanoSize();
                        return P.b.getPanoSizeClass(t)
                    }, e.prototype.beforeRender = function() {
                        var t = this.sweepData.currentSweep,
                            e = this.sweepData.transition.to;
                        this.updateState(this.cameraData.pose.position, this.cameraData.pose.rotation, t, e), this.updateUploadQueueProcessing()
                    }, e.prototype.activateSweep = function(e) {
                        var n = this,
                            o = this.sweepListMap.get(e);
                        if (!o) throw new Error("Invalid sweepId passed to TiledPanORenderer.activate(): " + e);
                        var r = this.panoLoadPromises[e];
                        return r || (r = new Promise((function(t, r) {
                            n.panoLoadResolvers[e] = t, n.updateSweepState(e), n.activatePano(o), n.queueUploadForAllTiles(e, !0), n.tileDownloader.forceQueueTiles(o, P.b.getPanoSize(T.d.BASE), n.currentState.direction, !0)
                        })), this.panoLoadPromises[e] = r), t.prototype.activateSweep.call(this, e), r
                    }, e.prototype.useTexture = function(e) {
                        var n = this.getRenderTargetDescriptorForSweep(e);
                        if (!n) throw Error("Texture for sweep " + e + " not loaded before using");
                        var o = n.object.texture;
                        return t.prototype.useTexture.call(this, e), this.zoomingActive ? this.zoomRenderTarget.texture : o
                    }, e.prototype.freeTexture = function(e, n) {
                        void 0 === n && (n = !1), t.prototype.freeTexture.call(this, e, n), 0 === this.textureUsageCounter[e] && (this.panoLoadPromises[e] = null, this.deactivatePano(e))
                    }, e.prototype.freeAllTextures = function(t) {
                        var e, n;
                        void 0 === t && (t = []);
                        var o = Object(C.b)(t),
                            r = this.getActivePanos();
                        try {
                            for (var i = $(r), a = i.next(); !a.done; a = i.next()) {
                                var s = a.value;
                                o[s] || this.freeTexture(s, !0)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                a && !a.done && (n = i.return) && n.call(i)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                    }, e.prototype.enableUltraHighQualityMode = function(t) {
                        this.setupZoomRenderTarget(), this.zoomSweepId && this.broadcast(new q.a(this.zoomRenderTarget.width, this.zoomSweepId, this.zoomRenderTarget))
                    }, e.prototype.resetRenderStatus = function(t, e, n, o) {
                        var r;
                        o && (r = m(S.b, o) + 1);
                        for (var i = function(t, o, r, i) {
                                n && (o.extra.tile.zoomUploaded = !1), e && (o.extra.tile.uploaded = !1)
                            }, a = 0; a < S.a; a++) {
                            this.getTileTree(t, a).breadthFirst({
                                callback: i.bind(this, a),
                                minLevel: r
                            })
                        }
                    }, e.prototype.copyBaseRenderStatusToZoomed = function(t) {
                        for (var e = m(S.b, this.panoQualityManager.getNavPanoSize()), n = function(t, e, n, o) {
                                e.extra.tile.zoomUploaded = e.extra.tile.uploaded, e.extra.zoomCovered = e.extra.covered
                            }, o = 0; o < S.a; o++) {
                            this.getTileTree(t, o).breadthFirst({
                                callback: n.bind(this, o),
                                maxLevel: e
                            })
                        }
                    }, e.prototype.renderPanoTiles = function(t, e, n, o) {
                        var r = [];
                        this.zoomRenderTarget && this.zoomRenderTarget.width === this.panoQualityManager.getZoomPanoSize() || this.zoomSweepRenderingDisabled || this.setupZoomRenderTarget(), e = e || this.currentState.direction || h.b.FORWARD;
                        var i = this.getRenderTargetDescriptorForSweep(t);
                        if (!this.isRenderTargetDescriptorValid(i)) throw new p.a("PanoRenderer.renderPanoTiles() -> Cannot render to a pano that is not activated.");
                        for (var a = 0; a < S.a; a++) {
                            var s = this.getTileTree(t, a);
                            r.length = 0, s.breadthFirst({
                                saveVisited: r
                            });
                            for (var c = 0; c < r.length; c++) {
                                var l = r[c];
                                this.queueUploadForTile(l.extra.tile, !1, o || 0 === c && n)
                            }
                        }
                    }, e.prototype.clearAllQueuedUploads = function() {
                        this.tileUploadQueue.clearAllUploadQueues(null, 0)
                    }, e.prototype.clearAllQueuedUploadsForPano = function(t) {
                        this.tileUploadQueue.clearAllUploadQueues(t, 0)
                    }, e.prototype.updateState = function(t, e, n, o) {
                        var r = o || n || this.currentState.sweepId,
                            i = r ? this.sweepListMap.get(r) : null;
                        this.updatePositionState(t), this.updateRotationState(e), r && this.updateSweepState(r), i && this.tileDownloader.tilePrioritizer && this.tileDownloader.tilePrioritizer.updateCriteria(i, t, this.currentState.direction)
                    }, e.prototype.updatePositionState = function(t) {
                        this.currentState.position.copy(t)
                    }, e.prototype.updateRotationState = function(t) {
                        var e, n;
                        if (this.currentState.rotation.copy(t), this.currentState.direction.copy(h.b.FORWARD).applyQuaternion(t), this.tileUploadQueue.hasQueuedTiles()) try {
                            for (var o = $(this.activeSweeps), r = o.next(); !r.done; r = o.next()) {
                                var i = r.value;
                                this.tileUploadQueue.sortQueue(i, this.currentState.direction)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                r && !r.done && (n = o.return) && n.call(o)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                    }, e.prototype.updateSweepState = function(t) {
                        this.currentState.sweepId = t
                    }, e.prototype.activatePano = function(t, e) {
                        void 0 === e && (e = !0), e && this.tileUploadQueue.clearAllQueuedUploads();
                        for (var n = this.panoQualityManager.getMaxPossiblePanoSize(), o = 0; o < S.a; o++) this.initTileTree(t.id, o, n);
                        this.linkAllTilesAndNodes(t);
                        var r = this.getRenderTargetDescriptorForSweep(t.id);
                        if (!r) {
                            var i = this.panoQualityManager.getNavPanoSize();
                            if (!(r = this.renderTargetPool.get({
                                    size: i
                                }))) {
                                var a = this.cwfRenderer.initRenderTargetCube(i, !1);
                                (r = this.renderTargetPool.add(a)).extra = {}, r.extra.size = a.width
                            }
                            r.extra.sweep = t, this.setRenderTargetDescriptorForSweep(t.id, r), this.tileUploadQueue.resetPanoLODDescriptors(t.id), this.resetUploadState(t.id, !0, !0)
                        }
                        return this.updateActiveSweeps(t, e), r.object
                    }, e.prototype.deactivatePano = function(t) {
                        var e = this.getRenderTargetDescriptorForSweep(t);
                        e && this.isRenderTargetDescriptorValid(e) && (this.renderTargetPool.free(e.object), this.setRenderTargetDescriptorForSweep(t, null), this.updateActiveSweeps(), this.tileUploadQueue.clearAllUploadQueues(t), this.tileUploadQueue.resetPanoLODDescriptors(t), this.clearCachedTileData())
                    }, e.prototype.clearCachedTileData = function() {
                        for (var t, e, n = this.sweepLoadHistory.length - 1; n >= 0; n--) {
                            var o = !1,
                                r = this.sweepLoadHistory[n];
                            if (r) {
                                try {
                                    for (var i = $(this.activeSweeps), a = i.next(); !a.done; a = i.next()) {
                                        if (r === a.value.id) {
                                            o = !0;
                                            break
                                        }
                                    }
                                } catch (e) {
                                    t = {
                                        error: e
                                    }
                                } finally {
                                    try {
                                        a && !a.done && (e = i.return) && e.call(i)
                                    } finally {
                                        if (t) throw t.error
                                    }
                                }!o && this.checkTileTreeInitialized(r) && (this.clearTileState(r, !0, !0), this.deleteTileTrees(r), this.deleteTileDirectoryEntries(r), this.tileDownloader.deleteAllTileDownloadDescriptors(r), this.sweepLoadHistory[n] = null)
                            }
                        }
                        this.updateSweepLoadHistory()
                    }, e.prototype.updateActiveSweeps = function(t, e) {
                        var n, o;
                        void 0 === e && (e = !0);
                        var r = this.persistentStorage.getArray("updateActiveSweeps:tempSweeps");
                        r.length = 0;
                        try {
                            for (var i = $(this.activeSweeps), a = i.next(); !a.done; a = i.next()) {
                                var s = a.value,
                                    c = this.getRenderTargetDescriptorForSweep(s.id);
                                t && s.id === t.id || !this.isRenderTargetDescriptorValid(c) || r.push(s)
                            }
                        } catch (t) {
                            n = {
                                error: t
                            }
                        } finally {
                            try {
                                a && !a.done && (o = i.return) && o.call(i)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                        t && (e ? r.unshift(t) : r.push(t)), this.activeSweeps.length = 0, this.activeSweeps.push.apply(this.activeSweeps, r)
                    }, e.prototype.queueUploadForAllTiles = function(t, e, n) {
                        var o, r;
                        void 0 === e && (e = !0), void 0 === n && (n = !1), this.zoomRenderTarget && this.zoomRenderTarget.width === this.panoQualityManager.getZoomPanoSize() || this.zoomSweepRenderingDisabled || this.setupZoomRenderTarget();
                        var i = this.getRenderTargetDescriptorForSweep(t);
                        if (!this.isRenderTargetDescriptorValid(i)) throw new p.a("queueUploadForAllTiles() -> Cannot render to a pano that is not activated.");
                        for (var a = this.persistentStorage.getArray("queueUploadForAllTiles:nodeList"), s = 0; s < S.a; s++) {
                            var c = this.getTileTree(t, s);
                            a.length = 0, c.breadthFirst({
                                saveVisited: a
                            });
                            try {
                                for (var l = $(a), u = l.next(); !u.done; u = l.next()) {
                                    var h = u.value;
                                    this.queueUploadForTile(h.extra.tile, !1, n || 0 === h.level && e)
                                }
                            } catch (t) {
                                o = {
                                    error: t
                                }
                            } finally {
                                try {
                                    u && !u.done && (r = l.return) && r.call(l)
                                } finally {
                                    if (o) throw o.error
                                }
                            }
                        }
                    }, e.prototype.onTileDownLoaded = function(t) {
                        if (t.sweep) {
                            var e = m(S.b, t.panoSize),
                                n = this.getTileDirectoryEntry(t.sweep.id, t.face, e, t.faceTileIndex);
                            this.updateUploadDescriptorFromDownloadDescriptor(n, t), this.updateSweepLoadHistory(n.sweepId);
                            var o = this.getRenderTargetDescriptorForSweep(n.sweepId);
                            if (this.isRenderTargetDescriptorValid(o)) {
                                var r = this.getTileTree(n.sweepId, n.face).getSubNode(n.panoSize, n.tileX, n.tileY);
                                r && (this.linkTileAndNode(n, r), this.queueUploadForTile(n, !0))
                            }
                        }
                    }, e.prototype.updateUploadDescriptorFromDownloadDescriptor = function(t, e) {
                        t.downloaded = !0, t.image = e.image, t.panoSize = e.panoSize, t.tileX = e.tileX, t.tileY = e.tileY, t.totalTiles = e.totalTiles, t.tileIndex = e.tileIndex, t.faceTileIndex = e.faceTileIndex, t.face = e.face, t.cubeFace = _.a(e.face), e.sweep && (t.sweepId = e.sweep.id), t.tileSize = e.tileSize, t.direction = (new a.a).copy(e.direction), t.node = null, t.level = m(S.b, t.panoSize)
                    }, e.prototype.updateSweepLoadHistory = function(t) {
                        var e, n, o = this.persistentStorage.getArray("updateSweepLoadHistory:tempHistory");
                        o.length = 0;
                        try {
                            for (var r = $(this.sweepLoadHistory), i = r.next(); !i.done; i = r.next()) {
                                var a = i.value;
                                a && (!t || t && t !== a) && o.push(a)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                i && !i.done && (n = r.return) && n.call(r)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        this.sweepLoadHistory.length = 0, t && this.sweepLoadHistory.push(t), this.sweepLoadHistory.push.apply(this.sweepLoadHistory, o)
                    }, e.prototype.onPanoRendered = function(t, e, n, o) {
                        var r = this.panoLoadResolvers[t],
                            i = this.activeRenderTargetDescriptors[t];
                        i && i.object && r(i.object.texture)
                    }, e.prototype.getRenderTargetDescriptorForSweep = function(t) {
                        return this.activeRenderTargetDescriptors[t]
                    }, e.prototype.setRenderTargetDescriptorForSweep = function(t, e) {
                        this.activeRenderTargetDescriptors[t] = e
                    }, e.prototype.isRenderTargetDescriptorValid = function(t) {
                        return !!t && !!t.object
                    }, e.prototype.isSweepZoomed = function(t) {
                        return this.zoomingActive && this.zoomSweepId === t
                    }, e.prototype.initTileTree = function(t, e, n) {
                        var o = this.tileTrees[t];
                        o || (o = [], this.tileTrees[t] = o);
                        var r = o[e];
                        if (!r) {
                            var i = m(S.b, n);
                            r = new v(S.b, i), o[e] = r
                        }
                    }, e.prototype.getTileTrees = function(t) {
                        var e = this.tileTrees[t];
                        if (!e) throw new p.a("TiledPanoRenderer.getTileTrees() -> Tree array not yet initialized!");
                        return e
                    }, e.prototype.checkTileTreeInitialized = function(t) {
                        return !!this.tileTrees[t]
                    }, e.prototype.getTileTree = function(t, e) {
                        var n = this.getTileTrees(t)[e];
                        if (!n) throw new p.a("TiledPanoRenderer.getTileTree() -> Tree not yet initialized!");
                        return n
                    }, e.prototype.deleteTileTrees = function(t) {
                        for (var e = this.getTileTrees(t), n = 0; n < S.a; n++) {
                            var o = e[n];
                            o && o.deleteAllNodes()
                        }
                        this.tileTrees[t] = null, delete this.tileTrees[t]
                    }, e.prototype.clearTileState = function(t, e, n) {
                        void 0 === e && (e = !1), void 0 === n && (n = !1);
                        for (var o = function(t, o, r, i) {
                                n && (o.extra.tile.image = null), e && (o.extra.tile.uploaded = !1, o.extra.tile.downloaded = !1, o.extra.tile.zoomUploaded = !1, o.extra.tile.uploadAttempted = !1)
                            }, r = 0; r < S.a; r++) {
                            var i = this.getTileTree(t, r);
                            i && i.breadthFirst({
                                callback: o.bind(this, r),
                                maxLevel: m(S.b, this.panoQualityManager.getZoomPanoSize())
                            })
                        }
                    }, e.prototype.resetUploadState = function(t, e, n, o) {
                        for (var r = function(t, o, r, i) {
                                o.extra.tile.zoomUploaded = !n && o.extra.tile.zoomUploaded, o.extra.tile.uploaded = !e && o.extra.tile.uploaded
                            }, i = 0; i < S.a; i++) {
                            this.getTileTree(t, i).breadthFirst({
                                callback: r.bind(this, i),
                                minLevel: void 0 !== o ? m(S.b, o) + 1 : 0
                            })
                        }
                    }, e.prototype.anyUploaded = function(t) {
                        var e, n;
                        if (!t) return !1;
                        if (t.extra.tile && this.isTileUploaded(t.extra.tile)) return !0;
                        if (t.children) try {
                            for (var o = $(t.children), r = o.next(); !r.done; r = o.next()) {
                                var i = r.value;
                                if (this.anyUploaded(i)) return !0
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                r && !r.done && (n = o.return) && n.call(o)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        return !1
                    }, e.prototype.linkTileAndNode = function(t, e) {
                        e.extra.tile = t, t.node = e
                    }, e.prototype.linkAllTilesAndNodes = function(t) {
                        for (var e = this, n = function(n, o, r, i, a) {
                                var s = e.getTileDirectoryEntry(t.id, o, i, a);
                                e.linkTileAndNode(s, r)
                            }, o = 0; o < S.a; o++) {
                            var r = this.getTileTree(t.id, o);
                            r.breadthFirst({
                                callback: n.bind(this, r, o)
                            })
                        }
                    }, e.prototype.getTileDirectoryEntry = function(t, e, n, o) {
                        var r = this.tileDirectory[t];
                        r || (r = {}, this.tileDirectory[t] = r);
                        var i = 16384 * e + 1024 * n + o,
                            s = r[i];
                        return s || (s = {
                            downloaded: !1,
                            uploaded: !1,
                            uploadAttempted: !1,
                            forceUpload: !1,
                            zoomUploaded: !1,
                            uploadQueued: !1,
                            image: null,
                            panoSize: -1,
                            tileX: -1,
                            tileY: -1,
                            totalTiles: -1,
                            tileIndex: o,
                            faceTileIndex: -1,
                            face: e,
                            cubeFace: -1,
                            sweepId: t,
                            tileSize: -1,
                            direction: new a.a,
                            node: null,
                            level: n
                        }, r[i] = s), s._key = t + ":" + e + ":" + n + ":" + o, s._tileKey = i, s
                    }, e.prototype.deleteTileDirectoryEntries = function(t) {
                        this.tileDirectory[t] = null, delete this.tileDirectory[t]
                    }, e.prototype.isTileUploaded = function(t) {
                        return this.isSweepZoomed(t.sweepId) ? t.zoomUploaded : t.uploaded
                    }, e.prototype.setUploaded = function(t, e) {
                        this.isSweepZoomed(t.sweepId) ? t.zoomUploaded = e : t.uploaded = e
                    }, e.prototype.queueUploadForTile = function(t, e, n) {
                        var o = !t.downloaded || t.uploadQueued && !n || this.isTileUploaded(t) || t.panoSize > this.panoQualityManager.getNavPanoSize() && !this.zoomingActive,
                            r = this.getRenderTargetDescriptorForSweep(t.sweepId);
                        !o && r && this.isRenderTargetDescriptorValid(r) && (n ? this.uploadTile(t, !1) : (0 === m(S.b, t.panoSize) ? this.tileUploadQueue.addToForceQueue(t) : e && this.currentState.direction ? this.tileUploadQueue.insertSortedIntoPanoQueue(t, r.extra.sweep, this.currentState.direction) : this.tileUploadQueue.addToPanoQueue(t.sweepId, t), t.uploadQueued = !0))
                    }, e.prototype.uploadTile = function(t, e) {
                        var n = this.persistentStorage.get("uploadTile:tempTileTexture", (function() {
                                return {}
                            })),
                            o = this.tileUploadQueue.getPanoLODDescriptor(t.sweepId, t.panoSize),
                            i = this.getRenderTargetDescriptorForSweep(t.sweepId);
                        if (i && t.image && this.isRenderTargetDescriptorValid(i)) {
                            var a = i.object,
                                s = i.extra.size;
                            if (this.isSweepZoomed(t.sweepId) && (a = this.zoomRenderTarget, s = this.panoQualityManager.getZoomPanoSize()), e || !this.isTileUploaded(t) && !this.anyUploaded(t.node)) {
                                var u = t.tileX * t.tileSize,
                                    p = t.tileY * t.tileSize,
                                    h = t.tileSize / t.panoSize * s,
                                    d = u / t.panoSize * s,
                                    f = p / t.panoSize * s,
                                    y = n[t.tileSize];
                                if (n[t.tileSize] || ((y = new c.a).generateMipmaps = !1, y.minFilter = l.P, y.flipY = !1, this.cwfRenderer.initSizedTexture2D(t.tileSize, y), n[t.tileSize] = y), this.cwfRenderer.uploadTexture2D(t.image, y, 0, 0), this.cwfRenderer.renderToCubeMap(y, a, t.tileSize, t.tileSize, 0, 0, t.tileSize, t.tileSize, d, f, h, h, t.cubeFace), r.c.overlayStyle > 0) {
                                    var v = 1 === r.c.overlayStyle ? this.overlayTilesBasic : this.overlayTilesEnhanced;
                                    this.cwfRenderer.renderToCubeMap(v[t.panoSize], a, t.tileSize, t.tileSize, 0, 0, t.tileSize, t.tileSize, d, f, h, h, t.cubeFace, l.nb, !0, .5)
                                }
                                o.uploadCount++, this.setUploaded(t, !0)
                            } else this.setUploaded(t, !1);
                            t.uploadAttempted || o.uploadAttempts++, t.uploadAttempted = !0, o.uploadAttempts === t.totalTiles && this.onPanoRendered(t.sweepId, t.panoSize, t.totalTiles)
                        }
                    }, e.prototype.updateUploadQueueProcessing = function() {
                        var t = this;
                        if (!this.currentUploadPromise && (this.overlayTilesLoaded || !this.usingTileOverlay)) {
                            var e = new K.a("pano/tiling/upload", (function() {
                                t.processUploadQueue(t.tilingSettings.highResUploadsPerFrame, t.tilingSettings.uploadsPerFrame)
                            }), tt);
                            this.currentUploadPromise = this.engine.commandBinder.issueCommand(e).then((function(e) {
                                return X(t, void 0, void 0, (function() {
                                    return J(this, (function(t) {
                                        switch (t.label) {
                                            case 0:
                                                return [4, e.promise];
                                            case 1:
                                                return t.sent(), this.currentUploadPromise = null, [2]
                                        }
                                    }))
                                }))
                            }))
                        }
                    }, e.prototype.processUploadQueue = function(t, e) {
                        void 0 === t && (t = 1);
                        for (var n = 0, o = 0, r = null; r = this.tileUploadQueue.getNextFromUploadQueue(this.activeSweeps);) {
                            var i = this.getRenderTargetDescriptorForSweep(r.sweepId);
                            if (!(r.panoSize > this.panoQualityManager.getNavPanoSize() && !this.zoomingActive || !this.isRenderTargetDescriptorValid(i)) && (this.uploadTile(r, r.forceUpload), n += 0 !== r.level ? 1 : 0, (o += 0 === r.level ? 1 : 0) >= e || n >= t)) break
                        }
                    }, e.prototype.loadOverlayTiles = function() {
                        var t = this;
                        if (0 !== r.c.overlayStyle) {
                            var e = 0,
                                o = [],
                                i = function(n, r, i) {
                                    var a = new c.a;
                                    a.generateMipmaps = !1, a.minFilter = l.P, a.flipY = !1, r ? a = n[r] = t.cwfRenderer.initSizedTexture2D(S.b, a) : (t.overlayTileBase = t.cwfRenderer.initSizedTexture2D(S.b, a), a = t.overlayTileBase), t.cwfRenderer.uploadTexture2D(i, a, 0, 0), ++e >= o.length && (t.overlayTilesLoaded = !0)
                                };
                            switch (r.c.overlayStyle) {
                                case 1:
                                    o.push([n(721), this.overlayTilesBasic, 256]), o.push([n(721), this.overlayTilesBasic, 512]), o.push([n(774), this.overlayTilesBasic, 1024]), o.push([n(775), this.overlayTilesBasic, 2048]), o.push([n(776), this.overlayTilesBasic, 4096]);
                                    break;
                                case 2:
                                    o.push([n(722), this.overlayTilesEnhanced, 256]), o.push([n(722), this.overlayTilesEnhanced, 512]), o.push([n(777), this.overlayTilesEnhanced, 1024]), o.push([n(778), this.overlayTilesEnhanced, 2048]), o.push([n(779), this.overlayTilesEnhanced, 4096])
                            }
                            o.forEach((function(e) {
                                var n = document.createElement("img");
                                n.crossOrigin = "anonymous", n.src = e[0], n.onload = function() {
                                    i.call(t, e[1], e[2], n)
                                }
                            })), this.usingTileOverlay = !0
                        } else this.usingTileOverlay = !1
                    }, e.prototype.copyTargetToZoom = function(t) {
                        if (this.zoomingActive) {
                            var e = this.getRenderTargetDescriptorForSweep(t);
                            if (!e) throw new Error("Error in copying a null render target to a zoomed target");
                            var n = e.object,
                                o = n.width,
                                r = this.zoomRenderTarget.width;
                            this.cwfRenderer.copyCubeMap(n.texture, this.zoomRenderTarget, o, o, r, r), this.copyBaseRenderStatusToZoomed(t)
                        }
                    }, e.prototype.setupZoomRenderTarget = function() {
                        if (this.panoQualityManager.getZoomPanoSize() >= this.panoQualityManager.getNavPanoSize()) {
                            if (this.zoomRenderTarget && this.zoomRenderTarget.width === this.panoQualityManager.getZoomPanoSize()) return;
                            var t = this.zoomRenderTarget;
                            if (this.zoomRenderTarget = this.cwfRenderer.initRenderTargetCube(this.panoQualityManager.getZoomPanoSize(), !1), t) {
                                var e = t.width,
                                    n = this.zoomRenderTarget.width;
                                this.cwfRenderer.copyCubeMap(t.texture, this.zoomRenderTarget, e, e, n, n), t.texture.dispose(), t.texture.version = 0, this.cwfRenderer.deallocateCubeTexture(t.texture), t.texture = null
                            }
                            this.zoomSweepRenderingDisabled = !1
                        } else this.zoomSweepRenderingDisabled = !0
                    }, e
                }(x.a),
                nt = n(598),
                ot = n(3),
                rt = n(135),
                it = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                at = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                st = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                ct = new ot.a("tile-downloader"),
                lt = function() {
                    function t(t, e, n, o) {
                        this.urls = t, this.panoQualityManager = e, this.tilePrioritizer = n, this.settings = o, this.persistentStorage = new D.a, this.downloadDescriptors = {}, this.priorityQueue = [], this.forceQueue = [], this.activeDownloads = [], this.lastPrioritizedTime = Date.now(), this.processPriorityQueue = !0
                    }
                    return t.prototype.init = function() {}, t.prototype.render = function() {
                        this.update()
                    }, t.prototype.update = function() {
                        var t = this;
                        this.processQueue(this.forceQueue, !1), this.processPriorityQueue && (!this.processQueuePromise && this.sweepListMap && this.activeDownloads.length < this.settings.concurrentDownloads && Date.now() - this.lastPrioritizedTime > 200 && (this.processQueuePromise = this.engine.commandBinder.issueCommand(new K.a("pano/tiling/queue-download", (function() {
                            t.queuePrioritizedTiles(t.sweepListMap), t.lastPrioritizedTime = Date.now()
                        }), 100)).then((function(e) {
                            return it(t, void 0, void 0, (function() {
                                return at(this, (function(t) {
                                    switch (t.label) {
                                        case 0:
                                            return [4, e.promise];
                                        case 1:
                                            return t.sent(), this.processQueuePromise = null, [2]
                                    }
                                }))
                            }))
                        }))), this.processQueue(this.priorityQueue, !1))
                    }, t.prototype.dispose = function() {}, t.prototype.activate = function(t) {
                        this.engine = t
                    }, t.prototype.deactivate = function(t) {}, t.prototype.setModel = function(t) {
                        this.setSweeps(t)
                    }, t.prototype.setRestrictedSweeps = function(t) {
                        var e, n;
                        if (this.sweepListMap && this.tilePrioritizer) {
                            var o = [];
                            try {
                                for (var r = st(t), i = r.next(); !i.done; i = r.next()) {
                                    var a = i.value;
                                    o.push(this.sweepListMap.get(a))
                                }
                            } catch (t) {
                                e = {
                                    error: t
                                }
                            } finally {
                                try {
                                    i && !i.done && (n = r.return) && n.call(r)
                                } finally {
                                    if (e) throw e.error
                                }
                            }
                            this.tilePrioritizer.setUpcomingSweeps(o), this.clearFromAllQueuesBySweep(t)
                        }
                    }, t.prototype.clearRestrictedSweeps = function() {
                        this.tilePrioritizer && this.tilePrioritizer.clearUpcomingSweeps()
                    }, t.prototype.setLoadCallbacks = function(t, e) {
                        this.onTileDownloaded = t, this.onPanoDownloaded = e
                    }, t.prototype.setSweeps = function(t) {
                        this.sweepListMap = t
                    }, t.prototype.getNonDownloadedTiles = function(t, e, n) {
                        var o, r;
                        n.length = 0;
                        var i = this.getTileDownloadDescriptors(t, e);
                        try {
                            for (var a = st(i), s = a.next(); !s.done; s = a.next()) {
                                var c = s.value;
                                !c || c.status !== M.None && c.status !== M.Queued || n.push(c)
                            }
                        } catch (t) {
                            o = {
                                error: t
                            }
                        } finally {
                            try {
                                s && !s.done && (r = a.return) && r.call(a)
                            } finally {
                                if (o) throw o.error
                            }
                        }
                    }, t.prototype.forceQueueTiles = function(t, e, n, o, r, i) {
                        var a, s, c, l, u = this.persistentStorage.getArray("forceQueueTiles:remaining"),
                            p = this.persistentStorage.getArray("forceQueueTiles:matching"),
                            h = this.persistentStorage.getArray("forceQueueTiles:toDownload");
                        if (this.getNonDownloadedTiles(t, e, u), h.length = 0, u.length > 0) {
                            U.sortTiles(u, t, n), p.length = 0, S.i(t, e, n, p, !0);
                            try {
                                for (var d = st(u), f = d.next(); !f.done; f = d.next()) {
                                    var y = f.value;
                                    try {
                                        for (var v = st(p), m = v.next(); !m.done; m = v.next()) {
                                            var g = m.value;
                                            y.face === g.face && y.faceTileIndex === g.faceTileIndex && h.push(y)
                                        }
                                    } catch (t) {
                                        c = {
                                            error: t
                                        }
                                    } finally {
                                        try {
                                            m && !m.done && (l = v.return) && l.call(v)
                                        } finally {
                                            if (c) throw c.error
                                        }
                                    }
                                }
                            } catch (t) {
                                a = {
                                    error: t
                                }
                            } finally {
                                try {
                                    f && !f.done && (s = d.return) && s.call(d)
                                } finally {
                                    if (a) throw a.error
                                }
                            }
                            this.forceQueue.push.apply(this.forceQueue, h), this.setStatusForAllDescriptors(this.forceQueue, M.ForceQueued), this.clearFromQueue(this.priorityQueue, M.ForceQueued, !1), o && this.processQueue(this.forceQueue, !0)
                        }
                    }, t.prototype.clearForceQueue = function() {
                        this.clearQueue(this.forceQueue)
                    }, t.prototype.queuePrioritizedTiles = function(t) {
                        this.tilePrioritizer && (this.clearQueue(this.priorityQueue), this.tilePrioritizer.filterAndPrioritize(this.priorityQueue, t, this), this.invalidateDuplicateEntries(this.priorityQueue), this.clearFromQueue(this.priorityQueue, M.None, !0), this.setStatusForAllDescriptors(this.priorityQueue, M.Queued), this.lastPrioritizedTime = Date.now())
                    }, t.prototype.clearQueue = function(t) {
                        this.setStatusForAllDescriptors(t, M.None), t.length = 0
                    }, t.prototype.clearFromQueue = function(t, e, n) {
                        for (var o = 0; o < t.length; o++) {
                            var r = t[o];
                            r && (e === r.status && !n || e !== r.status && n) && (t[o] = null)
                        }
                    }, t.prototype.clearFromAllQueuesBySweep = function(t) {
                        this.clearFromQueueBySweep(this.forceQueue, t), this.clearFromQueueBySweep(this.priorityQueue, t)
                    }, t.prototype.clearFromQueueBySweep = function(t, e) {
                        for (var n = Object(C.b)(e), o = 0; o < t.length; o++) {
                            var r = t[o];
                            r && r.sweep && (n[r.sweep.id] || (t[o] = null))
                        }
                    }, t.prototype.setStatusForAllDescriptors = function(t, e) {
                        var n, o;
                        try {
                            for (var r = st(t), i = r.next(); !i.done; i = r.next()) {
                                var a = i.value;
                                a && (a.status = e)
                            }
                        } catch (t) {
                            n = {
                                error: t
                            }
                        } finally {
                            try {
                                i && !i.done && (o = r.return) && o.call(r)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                    }, t.prototype.invalidateDuplicateEntries = function(t) {
                        var e, n;
                        try {
                            for (var o = st(t), r = o.next(); !r.done; r = o.next()) {
                                (a = r.value) && (a.queuedCount = 0)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                r && !r.done && (n = o.return) && n.call(o)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        for (var i = 0; i < t.length; i++) {
                            var a;
                            (a = t[i]) && (a.queuedCount++, a.queuedCount > 1 && (t[i] = null))
                        }
                    }, t.prototype.getTileDownloadDescriptors = function(t, e) {
                        var n = this.getAllTileDownloadDescriptors(t.id),
                            o = n[e];
                        return o || (o = this.buildDownloadDescriptorArray(e), n[e] = o, this.initTileDownloadDescriptors(o, t, e)), o
                    }, t.prototype.getAllTileDownloadDescriptors = function(t) {
                        var e = this.downloadDescriptors[t];
                        return e || (e = {}, this.downloadDescriptors[t] = e), e
                    }, t.prototype.deleteAllTileDownloadDescriptors = function(t) {
                        this.downloadDescriptors[t] = null, delete this.downloadDescriptors[t]
                    }, t.prototype.processQueue = function(t, e) {
                        if (this.cleanupActiveDownloads(), this.activeDownloads.length < this.settings.concurrentDownloads || e)
                            for (var n = e ? t.length : this.settings.concurrentDownloads - this.activeDownloads.length, o = 0, r = 0; o < n && t.length > 0; r++) {
                                var i = t.shift();
                                i && (this.startDownload(i), o++)
                            }
                    }, t.prototype.startDownload = function(t) {
                        if (!this.urls) throw new Error("Can't call startDownload without signed urls");
                        if (t.sweep) {
                            var e = t.status === M.ForceQueued ? rt.RequestPriority.HIGHEST : rt.RequestPriority.MEDIUM;
                            t.status = M.Downloading, this.checkRestrictedSweep(t.sweep.id) || ct.error("Tried to download tile that is not in restricted list!!!!!");
                            var n = this.getTileUrl(t.sweep.id, t.panoSize, t.tileSize, t.tileIndex);
                            this.activeDownloads.push(t), this.urls.getImageBitmap(n, t.tileSize, t.tileSize, {
                                maxRetries: 4,
                                priority: e
                            }).then(this.downloadComplete.bind(this, t), this.downloadFailed.bind(this, t))
                        }
                    }, t.prototype.checkRestrictedSweep = function(t) {
                        var e, n;
                        if (this.tilePrioritizer) {
                            var o = this.tilePrioritizer.priorityCriteria.upcomingSweeps;
                            if (o) {
                                var r = !1;
                                try {
                                    for (var i = st(o), a = i.next(); !a.done; a = i.next()) {
                                        var s = a.value;
                                        s && s.id === t && (r = !0)
                                    }
                                } catch (t) {
                                    e = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        a && !a.done && (n = i.return) && n.call(i)
                                    } finally {
                                        if (e) throw e.error
                                    }
                                }
                                return r
                            }
                            return !0
                        }
                        return !0
                    }, t.prototype.downloadFailed = function(t, e) {
                        t.status = M.DownloadFailed
                    }, t.prototype.downloadComplete = function(t, e) {
                        if (t.sweep && (t.status = M.Downloaded, t.image = e, this.onTileDownloaded && this.onTileDownloaded(t), this.isPanoDownloaded(t.sweep, t.panoSize))) {
                            var n = {
                                sweep: t.sweep,
                                tileSize: t.tileSize,
                                panoSize: t.panoSize
                            };
                            this.onPanoDownloaded && this.onPanoDownloaded(n)
                        }
                    }, t.prototype.cleanupActiveDownloads = function() {
                        var t, e, n = this.persistentStorage.getArray("cleanupActiveDownloads:temp");
                        n.length = 0;
                        try {
                            for (var o = st(this.activeDownloads), r = o.next(); !r.done; r = o.next()) {
                                var i = r.value;
                                i.status !== M.Downloaded && i.status !== M.DownloadFailed && n.push(i)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                r && !r.done && (e = o.return) && e.call(o)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                        this.activeDownloads.length = 0, this.activeDownloads.push.apply(this.activeDownloads, n)
                    }, t.prototype.isPanoDownloaded = function(t, e) {
                        var n, o, r = this.getTileDownloadDescriptors(t, e);
                        if (!r || r.length <= 0) return !1;
                        try {
                            for (var i = st(r), a = i.next(); !a.done; a = i.next()) {
                                var s = a.value;
                                if (s && s.status !== M.Downloaded) return !1
                            }
                        } catch (t) {
                            n = {
                                error: t
                            }
                        } finally {
                            try {
                                a && !a.done && (o = i.return) && o.call(i)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                        return !0
                    }, t.prototype.buildDownloadDescriptorArray = function(t) {
                        for (var e = S.e(t), n = [], o = 0; o < e; o++) {
                            var r = this.buildDownloadDescriptor();
                            n.push(r)
                        }
                        return n
                    }, t.prototype.buildDownloadDescriptor = function() {
                        return {
                            sweep: null,
                            panoSize: -1,
                            tileSize: -1,
                            tileIndex: -1,
                            totalTiles: -1,
                            faceTileIndex: -1,
                            status: M.None,
                            url: null,
                            image: null,
                            direction: new a.a,
                            face: -1,
                            cubeFace: -1,
                            tileX: -1,
                            tileY: -1,
                            queuedCount: -1
                        }
                    }, t.prototype.initTileDownloadDescriptors = function(t, e, n) {
                        for (var o = 0; o < t.length; o++) {
                            var r = t[o];
                            r && this.initTileDownloadDescriptor(r, e, n, o)
                        }
                    }, t.prototype.initTileDownloadDescriptor = function(t, e, n, o) {
                        var r = n >= S.b ? S.b : n;
                        t.face = S.c(n, o), t.cubeFace = _.a(t.face), t.sweep = e, t.panoSize = n, t.tileSize = r, t.tileIndex = o, t.totalTiles = S.e(n), t.status = M.None, t.image = null, S.f(t.panoSize, t.tileIndex, t), S.g(t.panoSize, t.tileSize, t.cubeFace, t.tileX, t.tileY, nt.a.Center, 0, t.direction)
                    }, t.prototype.getTileUrl = function(t, e, n, o) {
                        return this.panoQualityManager.getTileUrl(t, e, n, o)
                    }, t
                }(),
                ut = n(599),
                pt = n(600),
                ht = n(60),
                dt = n(61),
                ft = n(33),
                yt = n(43),
                vt = n(77),
                mt = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                gt = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                bt = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                wt = new ot.a("sweep-pano-tiling"),
                Ot = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "sweep-pano-tiling", e.preloadQuality = null, e.preloadResolution = null, e
                    }
                    return mt(e, t), e.prototype.init = function(t, e) {
                        return gt(this, void 0, void 0, (function() {
                            var n, o, a, s, c, l, u, p, h = this;
                            return bt(this, (function(d) {
                                switch (d.label) {
                                    case 0:
                                        return this.engine = e, [4, e.getModule(A.R)];
                                    case 1:
                                        return n = d.sent(), [4, e.getModule(A.Nb)];
                                    case 2:
                                        return o = d.sent(), [4, e.market.waitForData(ht.a)];
                                    case 3:
                                        return a = d.sent(), [4, e.market.waitForData(dt.a)];
                                    case 4:
                                        return s = d.sent(), c = this, [4, e.market.waitForData(vt.a)];
                                    case 5:
                                        return c.settingsData = d.sent(), l = o.cwfRenderer, u = o.maxCubemapSize, p = n.getSignedUrls(), this.settings = new r.b, this.qualityManager = new P.b(p, u, t.navPanoSize, t.zoomPanoSize), this.tilePrioritizer = new U(this.qualityManager, this.settings), this.tileDownloader = new lt(p, this.qualityManager, this.tilePrioritizer, this.settings), this.panoRenderer = new et(p, l, this.qualityManager, this.tileDownloader, a, s, this.settings, (function(t) {
                                            return e.broadcast(t)
                                        })), e.addComponent(this, this.tileDownloader), e.addComponent(this, this.panoRenderer), this.bindings.push(e.subscribe(i.a, (function(t) {
                                            h.panoRenderer.panoQualityManager.setWindowSize(t.width, t.height)
                                        })), e.subscribe(ut.a, (function(t) {
                                            h.tileDownloader.setRestrictedSweeps(t.sweepIds)
                                        })), e.subscribe(pt.a, (function(t) {
                                            h.tileDownloader.clearRestrictedSweeps()
                                        })), a.onPropertyChanged("transitionActive", (function() {
                                            a.transition.to && h.handlePreloadQualityChange(a.transition.to)
                                        })), this.settingsData.onPropertyChanged(r.a, (function() {
                                            h.preloadQuality = h.settingsData.tryGetProperty(r.a, null), a.currentSweep && h.handlePreloadQualityChange(a.currentSweep)
                                        }))), [2]
                                }
                            }))
                        }))
                    }, e.prototype.getRenderer = function() {
                        return this.panoRenderer
                    }, e.prototype.handlePreloadQualityChange = function(t) {
                        return gt(this, void 0, void 0, (function() {
                            var e;
                            return bt(this, (function(n) {
                                switch (n.label) {
                                    case 0:
                                        return null === this.preloadQuality ? [3, 2] : [4, this.availableResolution(t, this.preloadQuality)];
                                    case 1:
                                        return e = n.sent(), this.preloadResolution = P.b.getPanoSize(e), this.qualityManager.overrideWindowMaximums(!0), [3, 3];
                                    case 2:
                                        this.preloadResolution = null, this.qualityManager.overrideWindowMaximums(!1), n.label = 3;
                                    case 3:
                                        return this.enableHighRes(!1), [2]
                                }
                            }))
                        }))
                    }, e.prototype.enableHighRes = function(t, e) {
                        void 0 === t && (t = !0);
                        var n = null !== this.preloadResolution ? this.preloadResolution : t ? this.qualityManager.getZoomPanoSize() : this.qualityManager.getNavPanoSize();
                        this.tilePrioritizer.maxResolution !== n && wt.debug("Setting max resolution: " + n), this.tilePrioritizer.maxResolution = n, this.panoRenderer.highResRenderTarget(t, e)
                    }, e.prototype.enableZooming = function(t, e) {
                        return gt(this, void 0, Promise, (function() {
                            var n;
                            return bt(this, (function(o) {
                                switch (o.label) {
                                    case 0:
                                        return t ? (n = P.b.getPanoSizeClass(this.qualityManager.getZoomPanoSize()), [4, this.requestResolution(e, n)]) : [3, 2];
                                    case 1:
                                        return [2, o.sent() >= n];
                                    case 2:
                                        return this.enableHighRes(!1, e), this.resetPano(e), [2, Promise.resolve(!1)]
                                }
                            }))
                        }))
                    }, e.prototype.requestResolution = function(t, e, n, o) {
                        return void 0 === n && (n = A.m.CurrentView), void 0 === o && (o = !1), gt(this, void 0, Promise, (function() {
                            var i;
                            return bt(this, (function(a) {
                                switch (a.label) {
                                    case 0:
                                        return this.settings.highResUploadsPerFrame = o ? r.c.maxHighResUploadsPerFrame : r.c.highResUploadsPerFrame, this.settings.concurrentDownloads = o ? r.c.maxConcurrentDownloads : r.c.concurrentDownloads, this.settings.downloadFullPano = n === A.m.FullPanorama, [4, this.availableResolution(t, e)];
                                    case 1:
                                        return (i = a.sent()) > T.d.HIGH && (this.qualityManager.overrideWindowMaximums(!0), this.panoRenderer.enableUltraHighQualityMode(t)), (this.currentResolution() < i || P.b.getPanoSize(i) > this.qualityManager.getNavPanoSize()) && (this.enableHighRes(!0, t), this.resetPano(t)), [2, i]
                                }
                            }))
                        }))
                    }, e.prototype.waitForQueue = function(t, e) {
                        var n = this,
                            o = new ft.a;
                        return this.engine.after(yt.a.Render).then((function() {
                            var r = n.tilePrioritizer.getQualityQueueSize(t, e);
                            if (!r) return o.notify(1), void o.resolve();
                            var i = n.tilePrioritizer.makeQueueSubscription(t, e, (function(t) {
                                if (t > 0) {
                                    var e = (r - t) / Math.max(r, 1);
                                    o.notify(e)
                                } else i.cancel(), o.notify(1), o.resolve()
                            }));
                            i.renew()
                        })), o
                    }, e.prototype.revertTilingSettings = function(t) {
                        this.enableHighRes(!1, t), this.resetPano(t), this.settings.reset()
                    }, e.prototype.availableResolution = function(t, e) {
                        return this.qualityManager.availableResolution(t, e)
                    }, e.prototype.currentResolution = function() {
                        return this.panoRenderer.getCurrentPanoResolution()
                    }, e.prototype.resetPano = function(t) {
                        this.panoRenderer.resetRenderStatus(t, !1, !0, this.panoRenderer.panoQualityManager.getNavPanoSize()), this.panoRenderer.clearAllQueuedUploadsForPano(t), this.panoRenderer.renderPanoTiles(t, null, !1, !1)
                    }, e
                }(A.vb);
            e.default = Ot
        },
        1016: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(2),
                i = n(635),
                a = n(1),
                s = n(172),
                c = n(0),
                l = n(18),
                u = n(258),
                p = n(74),
                h = n(30),
                d = n(114),
                f = n(7),
                y = n(133),
                v = n(134),
                m = {
                    sky: {
                        uniforms: {
                            progress: {
                                type: "f",
                                value: 0
                            },
                            pano0Map: {
                                type: "t",
                                value: null
                            },
                            pano0Position: {
                                type: "v3",
                                value: new a.a
                            },
                            pano0Matrix: {
                                type: "m4",
                                value: new f.a
                            },
                            pano1Map: {
                                type: "t",
                                value: null
                            },
                            pano1Position: {
                                type: "v3",
                                value: new a.a
                            },
                            pano1Matrix: {
                                type: "m4",
                                value: new f.a
                            },
                            gradientOpacity: {
                                type: "f",
                                value: 0
                            },
                            topColor: {
                                type: "v3",
                                value: new a.a(.094, .102, .11)
                            },
                            bottomColor: {
                                type: "v3",
                                value: new a.a(.2, .216, .235)
                            },
                            radius: {
                                type: "f",
                                value: 100
                            }
                        },
                        vertexShader: v + n(780),
                        fragmentShader: y + n(781)
                    }
                },
                g = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                b = function() {
                    return (b = Object.assign || function(t) {
                        for (var e, n = 1, o = arguments.length; n < o; n++)
                            for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
                        return t
                    }).apply(this, arguments)
                },
                w = new a.a(1, 1, 1),
                O = function(t) {
                    function e(e) {
                        return void 0 === e && (e = {}), t.call(this, b({
                            fragmentShader: m.sky.fragmentShader,
                            vertexShader: m.sky.vertexShader,
                            uniforms: h.a.clone(m.sky.uniforms),
                            name: "SkyboxMaterial"
                        }, e)) || this
                    }
                    return g(e, t), e.prototype.setProjectedPano = function(t, e, n, o) {
                        var r = "pano" + t;
                        o && (this.uniforms[r + "Map"].value = o), e && this.uniforms[r + "Position"].value.copy(e), n && e && this.uniforms[r + "Matrix"].value.compose(e, n, w)
                    }, e
                }(d.a),
                S = n(20),
                x = n(113),
                P = n(106),
                _ = n(94),
                T = n(14),
                D = n(532),
                k = n(99),
                M = n(256),
                E = n(255),
                C = n(723),
                j = n(95),
                L = n(50),
                R = n(102),
                A = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                I = L.a.CameraRig,
                N = L.a.Root,
                F = function() {
                    function t(t, e, n, o, r, i, a) {
                        void 0 === a && (a = P.a.ALL), this.scene = t, this.addToRaycasting = e, this.removeFromRaycasting = n, this.enableRaycasting = o, this.sweepData = r, this.panoRenderer = i, this.renderLayer = a, this.bindings = []
                    }
                    return t.prototype.init = function() {
                        this.skySphere = this.setupSkysphere(), this.material = this.skySphere.material
                    }, t.prototype.dispose = function() {
                        this.material.uniforms.pano0Map.value.dispose(), this.material.uniforms.pano1Map.value.dispose(), this.material.dispose(), this.skySphere.geometry.dispose(), this.skyBox.geometry.dispose()
                    }, t.prototype.activate = function(t) {
                        var e = this;
                        this.scene.addChild(I, this.skySphere), this.skySphere.updateMatrixWorld(!0), t.market.waitForData(D.a).then((function(t) {
                            e.meshData = t, e.skyBox = e.setupSkybox(t.bounds, e.material), e.addToRaycasting(e.skyBox, !1, k.a.skyboxMeshGroup), e.scene.addChild(N, e.skyBox)
                        })), t.market.waitForData(x.a).then((function(n) {
                            e.viewmodeData = n, e.viewmodeData.isPano() || e.enableRaycasting(k.a.skyboxMeshGroup, !1), e.bindings.push(t.subscribe(M.a, (function(t) {
                                t.fromMode === S.a.Panorama && e.enableRaycasting(k.a.skyboxMeshGroup, !1)
                            }))), e.bindings.push(t.subscribe(E.a, (function(t) {
                                t.toMode === S.a.Panorama && e.enableRaycasting(k.a.skyboxMeshGroup, !0)
                            })))
                        })), this.skySphere.visible = !0, this.addToRaycasting(this.skySphere, !1), this.updateMeshOpacity()
                    }, t.prototype.deactivate = function(t) {
                        var e, n;
                        try {
                            for (var o = A(this.bindings), r = o.next(); !r.done; r = o.next()) {
                                r.value.cancel()
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                r && !r.done && (n = o.return) && n.call(o)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        this.bindings = [], this.scene.removeChild(I, this.skySphere), this.scene.removeChild(N, this.skyBox), this.removeFromRaycasting(this.skyBox), this.removeFromRaycasting(this.skySphere), this.currentSweepId && this.panoRenderer.freeTexture(this.currentSweepId), this.currentSweepId = null, this.targetSweepId = null
                    }, t.prototype.updateBackgroundColors = function(t, e) {
                        var n = new l.a(t),
                            o = new l.a(e);
                        this.material.uniforms.topColor.value.set(n.r, n.g, n.b), this.material.uniforms.bottomColor.value.set(o.r, o.g, o.b)
                    }, t.prototype.updateSweepRenderTarget = function(t, e, n, o) {
                        var r = this.panoRenderer.useTexture(e);
                        r && this.material.setProjectedPano(t, n, o, r)
                    }, t.prototype.updateExistingTexture = function(t, e, n, o) {
                        t === this.currentSweepId && this.material.setProjectedPano(0, n, o, e), t === this.targetSweepId && this.material.setProjectedPano(1, n, o, e)
                    }, t.prototype.render = function() {
                        var t = this.viewmodeData && (null === this.viewmodeData.currentMode || void 0 === this.viewmodeData.currentMode);
                        if (this.viewmodeData && !t) {
                            var e = this.sweepData.currentSweep,
                                n = this.sweepData.transition,
                                o = n.active ? n.from : e,
                                r = n.active ? n.to : e;
                            this.currentSweepId = this.handleSweepChange(0, this.sweepData, this.currentSweepId, o || null), this.targetSweepId = this.handleSweepChange(1, this.sweepData, this.targetSweepId, r || null), this.material.uniforms.progress.value = this.sweepData.transition.progress.value, this.updateMeshOpacity()
                        }
                    }, t.prototype.updateMeshOpacity = function() {
                        if (this.viewmodeData && this.meshData && this.sweepData) {
                            var t = this.meshData.opacity.value;
                            if (this.viewmodeData.transition.active) {
                                var e = !!this.sweepData.currentSweep && this.sweepData.isSweepUnaligned(this.sweepData.currentSweep);
                                t = this.getMeshOpacityForTransition(this.viewmodeData.transition.from, this.viewmodeData.transition.to, this.viewmodeData.transition.progress, e, this.meshData.opacity.value)
                            } else t = this.viewmodeData.currentMode === S.a.Panorama ? this.meshData.opacity.value : 1;
                            var n = 0 === t;
                            n !== this.skyBox.visible && (this.skyBox.visible = n), this.material.uniforms.gradientOpacity.value = t
                        }
                    }, t.prototype.getMeshOpacityForTransition = function(t, e, n, o, r) {
                        if (e === S.a.Panorama || t === S.a.Panorama) {
                            var i = e === S.a.Panorama ? _.b : _.g,
                                a = e === S.a.Panorama ? 2 * (n - .5) : 2 * n,
                                s = i(o ? n : Object(T.e)(a, 0, 1), 0, 1, 1);
                            return (1 - s) * (t === S.a.Panorama ? r : 1) + s * (e === S.a.Panorama ? r : 1)
                        }
                        return 1
                    }, t.prototype.setupSkysphere = function(t) {
                        var e = .9 * R.a.far,
                            n = new u.a(e, 24, 24);
                        n.computeBoundingBox(), t || ((t = new O({
                            side: c.h
                        })).uniforms.pano0Map.value = new s.a, t.uniforms.pano1Map.value = new s.a);
                        var o = new C.a(n, t);
                        return t.uniforms.radius.value = e, o.layers.mask = this.renderLayer.mask, o.name = "Skysphere", o.renderOrder = j.a.boundingSkybox, o.updateMatrixWorld(!0), o
                    }, t.prototype.setupSkybox = function(t, e) {
                        var n = t.getSize(new a.a),
                            o = new p.b(n.x + .2, n.y + .2, n.z + .2);
                        o.computeBoundingBox(), e || ((e = new O({
                            side: c.h
                        })).uniforms.pano0Map.value = new s.a, e.uniforms.pano1Map.value = new s.a);
                        var r = new C.b(o, e),
                            i = t.getCenter(new a.a);
                        return r.position.copy(i), r.layers.mask = this.renderLayer.mask, r.name = "Skybox", r.renderOrder = j.a.boundingSkybox, r.updateMatrixWorld(!0), r
                    }, t.prototype.handleSweepChange = function(t, e, n, o) {
                        if (n !== o && (n && this.panoRenderer.freeTexture(n), o)) {
                            var r = e.getSweep(o);
                            this.updateSweepRenderTarget(t, o, r.position, r.rotation)
                        }
                        return o
                    }, t
                }(),
                U = n(60),
                z = n(77),
                V = n(239),
                H = n(78),
                B = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                W = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                G = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                Q = function(t, e) {
                    var n = "function" == typeof Symbol && t[Symbol.iterator];
                    if (!n) return t;
                    var o, r, i = n.call(t),
                        a = [];
                    try {
                        for (;
                            (void 0 === e || e-- > 0) && !(o = i.next()).done;) a.push(o.value)
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    return a
                },
                Y = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "skybox-module", e
                    }
                    return B(e, t), e.prototype.init = function(t, e) {
                        return W(this, void 0, void 0, (function() {
                            var t, n, o, a, s, c, l, u, p, h, d = this;
                            return G(this, (function(f) {
                                switch (f.label) {
                                    case 0:
                                        return [4, Promise.all([e.market.waitForData(U.a), e.getModule(r.Nb), e.getModuleByParent(r.vb), e.market.waitForData(z.a), e.getModule(r.x)])];
                                    case 1:
                                        return t = Q.apply(void 0, [f.sent(), 5]), n = t[0], o = t[1], a = t[2], s = t[3], c = t[4], l = e.claimRenderLayer("skybox"), u = a.getRenderer(), p = o.getScene(), this.skybox = new F(p, c.registerMesh, c.unregisterMesh, c.enableMeshGroup, n, u, l), e.addComponent(this, this.skybox), h = s.tryGetProperty(H.a.BackgroundColor, V.a.default), this.skybox.updateBackgroundColors(V.b[h].bgPrimary, V.b[h].bgSecondary), this.bindings.push(e.subscribe(i.a, (function(t) {
                                            d.skybox.updateExistingTexture(t.sweepId, t.renderTarget.texture)
                                        })), s.onPropertyChanged(H.a.BackgroundColor, (function(t) {
                                            d.skybox.updateBackgroundColors(V.b[t].bgPrimary, V.b[t].bgSecondary)
                                        }))), [2]
                                }
                            }))
                        }))
                    }, e
                }(r.qb);
            e.default = Y
        },
        1020: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(2),
                i = n(106),
                a = n(126),
                s = n(142),
                c = n(103),
                l = n(247),
                u = n(65),
                p = n(26),
                h = n(0),
                d = n(5),
                f = n(327),
                y = n(114),
                v = n(133),
                m = n(134),
                g = {
                    circle_projection: new y.a({
                        uniforms: {
                            textureSampleScale: {
                                value: 5
                            },
                            panoTexture: {
                                value: null
                            },
                            borderSize: {
                                value: 0
                            },
                            borderColor: {
                                value: new p.a(1, 1, 1, 1)
                            }
                        },
                        depthWrite: !1,
                        depthTest: !0,
                        side: h.w,
                        vertexShader: m + n(790),
                        fragmentShader: v + n(791)
                    }),
                    equirectangular: new y.a({
                        uniforms: {
                            cubemap: {
                                value: null
                            },
                            yaw: {
                                value: 0
                            }
                        },
                        depthWrite: !1,
                        depthTest: !1,
                        vertexShader: m + n(792),
                        fragmentShader: v + n(793)
                    }),
                    compose: new y.a({
                        uniforms: {
                            mask: {
                                value: null
                            },
                            bg: {
                                value: null
                            }
                        },
                        transparent: !0,
                        vertexShader: m + n(794),
                        fragmentShader: v + n(795)
                    }),
                    copyOpaque: new y.a({
                        uniforms: {
                            texture: {
                                value: null
                            }
                        },
                        vertexShader: m + n(796),
                        fragmentShader: v + n(797)
                    })
                },
                b = n(543),
                w = n(603),
                O = function() {
                    function t(t, e) {
                        this._renderer = t, this._renderTarget = e
                    }
                    return Object.defineProperty(t.prototype, "target", {
                        get: function() {
                            return this._renderTarget
                        },
                        enumerable: !0,
                        configurable: !0
                    }), Object.defineProperty(t.prototype, "width", {
                        get: function() {
                            return this._renderTarget.width
                        },
                        enumerable: !0,
                        configurable: !0
                    }), Object.defineProperty(t.prototype, "height", {
                        get: function() {
                            return this._renderTarget.height
                        },
                        enumerable: !0,
                        configurable: !0
                    }), Object.defineProperty(t.prototype, "bpp", {
                        get: function() {
                            return 4
                        },
                        enumerable: !0,
                        configurable: !0
                    }), t.prototype.readRenderTargetData = function(t) {
                        var e = this._renderTarget.width,
                            n = this._renderTarget.height;
                        return t = t || new Uint8Array(e * n * 4), this._renderer.readRenderTargetPixels(this._renderTarget, 0, 0, e, n, t), t
                    }, t.prototype.setSize = function(t, e) {
                        this._renderTarget.setSize(t, e)
                    }, t.prototype.dispose = function() {
                        this._renderTarget.dispose()
                    }, t
                }(),
                S = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                x = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                P = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                _ = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "render-to-texture", e.circleProjectionPlane = new b.a(new u.a(1, 1), g.circle_projection), e.equirectProjectionPlane = new b.a(new u.a(1, 1), g.equirectangular), e.composePlane = new b.a(new u.a(1, 1), g.compose), e.copyPlane = new b.a(new u.a(1, 1), g.copyOpaque), e.cachedSize = new d.a, e.cachedViewport = new p.a, e.solidWhiteTexture = new f.a(new Uint8Array([255, 255, 255, 255]), 1, 1), e.debugRenderOffset = 0, e
                    }
                    return S(e, t), e.prototype.init = function(t, e) {
                        return x(this, void 0, void 0, (function() {
                            var t, n = this;
                            return P(this, (function(o) {
                                switch (o.label) {
                                    case 0:
                                        return [4, e.getModule(r.Nb)];
                                    case 1:
                                        return t = o.sent(), this.renderer = t.cwfRenderer.renderer, this.camera = new a.a, this.orthoCamera = new l.a(-.5, .5, .5, -.5, 0, 1), this.camera.layers.mask = i.a.ALL.mask, this.scene = new s.a, this.scene.autoUpdate = !1, this.bindings.push(e.commandBinder.addBinding(w.d, (function(t) {
                                            return x(n, void 0, void 0, (function() {
                                                return P(this, (function(t) {
                                                    return [2, new O(this.renderer, this.createRenderTarget2D(0))]
                                                }))
                                            }))
                                        }))), this.bindings.push(e.commandBinder.addBinding(w.b, (function(t) {
                                            return x(n, void 0, void 0, (function() {
                                                return P(this, (function(e) {
                                                    return this.renderContext(t.renderTarget.target, t.context), [2]
                                                }))
                                            }))
                                        }))), this.bindings.push(e.commandBinder.addBinding(w.e, (function(t) {
                                            return x(n, void 0, void 0, (function() {
                                                return P(this, (function(e) {
                                                    return this.render(t.renderTarget.target, t.sceneObject, t.camera), [2]
                                                }))
                                            }))
                                        }))), this.bindings.push(e.commandBinder.addBinding(w.c, (function(t) {
                                            return x(n, void 0, void 0, (function() {
                                                return P(this, (function(e) {
                                                    return this.renderEquirectangular(t.texture, t.renderTarget.target, t.heading), [2]
                                                }))
                                            }))
                                        }))), this.bindings.push(e.commandBinder.addBinding(w.a, (function(t) {
                                            return x(n, void 0, void 0, (function() {
                                                return P(this, (function(e) {
                                                    return this.compose(t.target1.target, t.target2.target, t.target2.target), [2]
                                                }))
                                            }))
                                        }))), [2]
                                }
                            }))
                        }))
                    }, e.prototype.getRenderSize = function() {
                        var t = this.renderer.getPixelRatio(),
                            e = this.renderer.getSize(this.cachedSize);
                        return e.width *= t, e.height *= t, e
                    }, e.prototype.onUpdate = function() {
                        this.debugRenderOffset = 0
                    }, e.prototype.createRenderTarget2D = function(t, e, n, o) {
                        void 0 === e && (e = t), void 0 === o && (o = !0);
                        var r = new c.a(t, e, n);
                        return r.texture.generateMipmaps = o, r
                    }, e.prototype.clearRenderTarget2D = function(t) {
                        this.renderer.setRenderTarget(t), this.renderer.clear(), this.renderer.setRenderTarget(null)
                    }, e.prototype.disposeRenderTarget2D = function(t) {
                        t.texture.dispose(), t.depthTexture && t.depthTexture.dispose(), t.dispose()
                    }, e.prototype.getRenderTargetData = function(t, e) {
                        var n = t.width,
                            o = t.height;
                        return e = e || new Uint8Array(n * o * 4), this.renderer.readRenderTargetPixels(t, 0, 0, n, o, e), e
                    }, e.prototype.compose = function(t, e, n) {
                        void 0 === n && (n = this.solidWhiteTexture), this.composePlane.material.uniforms.bg.value = this.isRenderTarget(e) ? e.texture : e, this.composePlane.material.uniforms.mask.value = this.isRenderTarget(n) ? n.texture : n, this.scene.add(this.composePlane), this.renderer.setRenderTarget(t), this.renderer.render(this.scene, this.orthoCamera), this.renderer.setRenderTarget(null), this.scene.remove(this.composePlane)
                    }, e.prototype.copyTextureOpaque = function(t, e) {
                        this.copyPlane.material.uniforms.texture.value = e && this.isRenderTarget(e) ? e.texture : e, this.scene.add(this.copyPlane), this.renderer.setRenderTarget(t), this.renderer.render(this.scene, this.orthoCamera), this.renderer.setRenderTarget(null), this.scene.remove(this.copyPlane)
                    }, e.prototype.copyTexture = function(t, e) {
                        return e.format === h.Ub ? this.copyTextureOpaque(t, e) : this.compose(t, e)
                    }, e.prototype.resizeTexture = function(t, e) {
                        var n = new c.a(e, e);
                        return n.texture.format = t.format, n.texture.addEventListener("dispose", n.dispose.bind(n)), this.copyTexture(n, t), n.texture
                    }, e.prototype.renderToScreen = function(t, e, n) {
                        var o = this.isRenderTarget(t) ? t.width : t.image.width,
                            r = this.isRenderTarget(t) ? t.height : t.image.height,
                            i = e ? e.x : this.debugRenderOffset,
                            a = e ? e.y : 0;
                        this.renderer.getViewport(this.cachedViewport), this.renderer.setViewport(i, a, o, r), this.compose(null, t, n), this.renderer.setViewport(this.cachedViewport), e || (this.debugRenderOffset += o)
                    }, e.prototype.isRenderTarget = function(t) {
                        return t.hasOwnProperty("texture")
                    }, e.prototype.renderContext = function(t, e) {
                        t.texture.image = e.canvas, t.texture.needsUpdate = !0
                    }, e.prototype.render = function(t, e, n, o) {
                        var r = e.parent;
                        r && this.scene.applyMatrix(r.matrixWorld), this.scene.add(e), n.getWorldPosition(this.camera.position), n.getWorldQuaternion(this.camera.quaternion), this.camera.projectionMatrix.copy(n.projectionMatrix), this.camera.layers.mask = o ? o.mask : n.layers.mask;
                        var i = this.renderer.getSize(this.cachedSize),
                            a = i.width / i.height,
                            s = t.width / t.height,
                            c = this.camera.projectionMatrix;
                        return a > s ? c.elements[0] = c.elements[5] / s : c.elements[5] = c.elements[0] * s, this.renderer.setRenderTarget(t), this.renderer.clear(), this.renderer.render(this.scene, this.camera), this.renderer.setRenderTarget(null), r && (r.add(e), this.scene.matrixWorld.identity()), this.scene.remove(e), t
                    }, e.prototype.setScissors = function(t, e) {
                        if (t) {
                            if (!e) throw Error("Rect to restrict rendering to required when enabling scissors.");
                            this.renderer.setScissorTest(!0), this.renderer.setScissor(e.x, e.y, e.width, e.height)
                        } else {
                            var n = this.renderer.getSize(this.cachedSize);
                            this.renderer.setScissor(0, 0, n.width, n.height), this.renderer.setScissorTest(!1)
                        }
                    }, e.prototype.renderSphericalProjection = function(t, e, n, o, r) {
                        var i = g.circle_projection;
                        i.uniforms.borderColor.value.copy(r || new p.a(1, 1, 1, 1)), i.uniforms.borderSize.value = o || 0, i.uniforms.textureSampleScale.value = n || 5, i.uniforms.panoTexture.value = t, this.scene.add(this.circleProjectionPlane), this.circleProjectionPlane.position.z = 0, this.renderer.setRenderTarget(e), this.renderer.render(this.scene, this.orthoCamera), this.renderer.setRenderTarget(null), this.scene.remove(this.circleProjectionPlane)
                    }, e.prototype.renderEquirectangular = function(t, e, n) {
                        void 0 === n && (n = 0);
                        var o = this.equirectProjectionPlane.material;
                        o.uniforms.cubemap.value = t, o.uniforms.yaw.value = n, this.scene.add(this.equirectProjectionPlane), this.equirectProjectionPlane.position.z = 0, this.renderer.setRenderTarget(e), this.renderer.render(this.scene, this.orthoCamera), this.renderer.setRenderTarget(null), this.scene.remove(this.equirectProjectionPlane), o.uniforms.cubemap.value = null, o.uniforms.yaw.value = 0
                    }, e
                }(r.fb);
            e.default = _
        },
        1021: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r, i, a = n(20),
                s = n(62),
                c = n(16),
                l = n(1),
                u = n(57),
                p = n(10),
                h = n(102),
                d = n(2),
                f = n(113),
                y = n(61),
                v = n(60),
                m = n(255),
                g = n(256),
                b = n(200),
                w = n(602),
                O = n(56),
                S = n(118),
                x = n(53),
                P = n(94),
                _ = {
                    rotationDuration: 1,
                    rotationDelay: 0,
                    matrixDelay: 0,
                    matrixDuration: .5
                },
                T = ((o = {})[a.a.Dollhouse] = {
                    matrixDelay: .5,
                    matrixDuration: 1
                }, o[a.a.Panorama] = {
                    rotationDuration: .5
                }, o),
                D = n(3),
                k = n(532),
                M = (r = function(t, e) {
                    return (r = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                E = function() {
                    return (E = Object.assign || function(t) {
                        for (var e, n = 1, o = arguments.length; n < o; n++)
                            for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
                        return t
                    }).apply(this, arguments)
                },
                C = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                j = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                L = function(t, e) {
                    var n = "function" == typeof Symbol && t[Symbol.iterator];
                    if (!n) return t;
                    var o, r, i = n.call(t),
                        a = [];
                    try {
                        for (;
                            (void 0 === e || e-- > 0) && !(o = i.next()).done;) a.push(o.value)
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    return a
                },
                R = new D.a("viewmodes-data"),
                A = Math.PI / 2 + Number.EPSILON,
                I = Math.PI - Number.EPSILON,
                N = ((i = {})[a.a.Panorama] = d.k, i[a.a.Dollhouse] = d.k, i[a.a.Floorplan] = d.k, i),
                F = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.viewmodeData = new f.a, e.name = "viewmode", e.minDollhouseDistance = 15, e.maxDollhouseDistance = 50, e.getFlyinStartPose = function(t) {
                            var n = e.cameraData.pose.position,
                                o = t.position.y - n.y,
                                r = Object(O.l)(t.position, n, e.meshData.center),
                                i = p.b.FORWARD.clone().applyQuaternion(r);
                            return {
                                position: Object(O.i)(t.position, n, Math.sign(i.y) * Math.PI / 4, !0).setY(1.5 * o)
                            }
                        }, e.getFlyinEndPose = function(t) {
                            var n = t.position || e.sweepData.getSweep(t.sweepID).position,
                                o = t.rotation || new c.a,
                                r = Math.PI / 180 * h.a.fov;
                            return Object(O.f)(n, o, -Math.PI / 6, e.meshData.bounds, r, e.canvas.aspectRatio)
                        }, e
                    }
                    return M(e, t), e.prototype.init = function(t, e) {
                        return C(this, void 0, void 0, (function() {
                            var n, o, r, i, a, s, c = this;
                            return j(this, (function(l) {
                                switch (l.label) {
                                    case 0:
                                        return this.engine = e, this.market = e.market, null !== t.startingMode && (this.viewmodeData.currentMode = t.startingMode), this.market.register(this, f.a, this.viewmodeData), e.market.waitForData(k.a).then((function(t) {
                                            c.meshData = t, c.setDollhouseBounds()
                                        })), [4, Promise.all([e.getModule(d.c), e.getModule(d.ub), e.market.waitForData(v.a), e.market.waitForData(S.a), e.market.waitForData(y.a)])];
                                    case 1:
                                        return n = L.apply(void 0, [l.sent(), 5]), o = n[0], r = n[1], i = n[2], a = n[3], s = n[4], this.cameraModule = o, this.sweepModule = r, this.sweepData = i, this.canvas = a, this.cameraData = s, [2]
                                }
                            }))
                        }))
                    }, Object.defineProperty(e.prototype, "currentMode", {
                        get: function() {
                            return this.viewmodeData.currentMode
                        },
                        enumerable: !0,
                        configurable: !0
                    }), e.prototype.canSwitchViewMode = function(t) {
                        return this.canStartTransition(this.viewmodeData) && this.cameraData.canTransition() && !this.isAlreadyInMode(this.viewmodeData, t)
                    }, e.prototype.switchToMode = function(t, n, o, r) {
                        return void 0 === n && (n = s.a.FadeToBlack), C(this, void 0, Promise, (function() {
                            var i, c, l, u, p, h = this;
                            return j(this, (function(f) {
                                switch (f.label) {
                                    case 0:
                                        return R.info("switchToMode mode:" + t + " type:" + n), this.meshData || t !== a.a.Floorplan && t !== a.a.Dollhouse ? [3, 2] : [4, this.engine.getModule(d.S)];
                                    case 1:
                                        f.sent(), f.label = 2;
                                    case 2:
                                        if (n === s.a.Instant && (r = 0), r = void 0 !== r ? r : N[t], !this.canStartTransition(this.viewmodeData) || !this.cameraData.canTransition()) throw new w.a;
                                        return i = this.isAlreadyInMode(this.viewmodeData, t), c = o && !e.willPoseChange(this.cameraData, o), i && c ? [2, Promise.resolve()] : (this.sweepData.currentSweep && this.sweepData.isSweepUnaligned(this.sweepData.currentSweep) && this.viewmodeData.currentMode === a.a.Panorama && (n = s.a.FadeToBlack), l = null !== this.viewmodeData.currentMode ? this.viewmodeData.currentMode : void 0, this.viewmodeData.activateTransition(this.viewmodeData.currentMode, t, r), this.viewmodeData.currentMode = a.a.Transition, this.viewmodeData.commit(), this.engine.broadcast(new g.a(t, l)), u = this.moveCameraToViewmode(t, l, n, r, o), p = !1, u.progress((function(e) {
                                            h.viewmodeData.transition.progress = e, h.viewmodeData.commit(), e >= .5 && !p && (p = !0, h.engine.broadcast(new b.a(t, l)))
                                        })), u.then((function() {
                                            h.viewmodeData.transition.progress = 1, h.viewmodeData.currentMode = t, h.viewmodeData.deactivateTransition(), h.viewmodeData.commit(), h.engine.broadcast(new m.a(t, l))
                                        })), [2, u.nativePromise()])
                                }
                            }))
                        }))
                    }, e.prototype.isAlreadyInMode = function(t, e) {
                        var n = t.transition.from === t.transition.to,
                            o = t.currentMode === e;
                        return t.transition.active && n || o
                    }, e.willPoseChange = function(t, e) {
                        return void 0 !== e.position && !t.pose.position.equals(e.position) || void 0 !== e.rotation && !t.pose.rotation.equals(e.rotation) || void 0 !== e.zoom && t.zoom() !== e.zoom
                    }, e.prototype.canStartTransition = function(t) {
                        var e = t.transition.active,
                            n = t.currentMode === a.a.Transition;
                        return !e && !n
                    }, e.prototype.moveCameraToViewmode = function(t, e, n, o, r) {
                        switch (t) {
                            case a.a.Panorama:
                                return this.moveCameraToPanorama(n, o, r);
                            case a.a.Dollhouse:
                                return this.moveCameraToDollhouse(e, n, o, r);
                            case a.a.Floorplan:
                                return this.moveCameraToFloorplan(e, n, o, r);
                            default:
                                throw Error("moveCameraToViewmode(): Invalid view-mode to go to: " + t)
                        }
                    }, e.prototype.moveCameraToPanorama = function(t, e, n) {
                        if (this.sweepData.canTransition() || this.cameraData.canTransition()) {
                            var o = void 0;
                            if (n && n.sweepID) o = n.sweepID;
                            else {
                                var r = this.sweepData.getFirstSweep();
                                !(o = this.sweepData.currentSweep) && r && (o = r.id)
                            }
                            if (!o) throw new Error("moveCameraToPanorama(): Invalid target sweep!");
                            this.sweepData.isSweepUnaligned(o) && (t = s.a.FadeToBlack);
                            var i = n && n.rotation ? n.rotation : void 0;
                            if (!i) {
                                var l = (this.viewmodeData.transition.from === a.a.Floorplan ? p.b.UP : p.b.FORWARD).clone().applyQuaternion(this.cameraData.pose.rotation).setY(0).normalize();
                                i = (new c.a).setFromUnitVectors(p.b.FORWARD, l)
                            }
                            return this.sweepModule.moveToSweep({
                                transitionType: t,
                                sweepId: o,
                                rotation: i,
                                transitionTime: e,
                                rotationDelay: .5
                            })
                        }
                        throw new Error("Could not move to panorama mode because another transition was active")
                    }, e.prototype.moveCameraToDollhouse = function(t, e, n, o) {
                        var r, i, s, c, d, f, y, v = this.meshData.bounds,
                            m = {};
                        if (o && (o.position || o.rotation)) {
                            if (o.position && o.rotation) {
                                m.position = o.position, m.rotation = o.rotation;
                                var g = new u.a(p.b.UP.clone(), this.meshData.center.y),
                                    b = Object(O.h)(m.position, m.rotation, g);
                                b || (b = new l.a).copy(this.meshData.center), v.containsPoint(b) && (s = m.position.distanceTo(b))
                            } else if (o.position) m.position = o.position, m.rotation = Object(O.j)(o.position, this.meshData.center);
                            else {
                                m.rotation = o.rotation;
                                var w = v.min.distanceTo(v.max);
                                m.position = Object(O.k)(m.rotation, this.meshData.center, w)
                            }
                            s || (s = this.meshData.center.clone().distanceTo(m.position))
                        } else {
                            var S = void 0,
                                x = void 0,
                                P = this.sweepData.currentSweep && this.sweepData.isSweepUnaligned(this.sweepData.currentSweep),
                                _ = P || this.viewmodeData.transition.from === a.a.Floorplan ? this.meshData.center : this.cameraData.pose.position;
                            if (P) x = new l.a(0, 0, 0), S = new l.a(15, 10, 15);
                            else if (this.viewmodeData.transition.from !== a.a.Floorplan) {
                                var T = (c = _, d = this.cameraData.pose.rotation, f = c.clone().add(new l.a(0, 6, 0)), (y = p.b.FORWARD.clone().applyQuaternion(d)).y >= .01 && (y.y = .01), {
                                    position: f.clone().add(y.clone().multiplyScalar(-10)),
                                    direction: y
                                });
                                S = (r = L([T.position, T.direction], 2))[0], x = r[1]
                            } else {
                                T = function(t, e) {
                                    var n = t.clone(),
                                        o = p.b.DOWN.clone().applyQuaternion(e).multiplyScalar(6),
                                        r = n.clone().add(o).setY(6),
                                        i = p.b.UP.clone().applyQuaternion(e);
                                    return i.setY(-.5).normalize(), {
                                        position: r,
                                        direction: i
                                    }
                                }(_, this.cameraData.pose.rotation);
                                S = (i = L([T.position, T.direction], 2))[0], x = i[1]
                            }
                            var D = _.clone().add(x).setY(this.meshData.center.y);
                            m.position = Object(O.c)(S, D, this.minDollhouseDistance, this.maxDollhouseDistance), m.position = Object(O.d)(m.position, D, A, I), m.rotation = Object(O.j)(m.position, D), s = D.distanceTo(m.position)
                        }
                        return this.cameraModule.moveTo({
                            transitionType: e,
                            pose: m,
                            transitionTime: n,
                            projection: Object(h.c)(this.cameraData.aspect()),
                            focalDistance: s,
                            rotationDuration: .5
                        })
                    }, e.prototype.setDollhouseBounds = function() {
                        var t = this.meshData.bounds,
                            e = t.min.distanceTo(t.max);
                        this.minDollhouseDistance = Math.min(e / 2, this.minDollhouseDistance), this.maxDollhouseDistance = Math.max(e, this.maxDollhouseDistance)
                    }, e.prototype.moveCameraToFloorplan = function(t, e, n, o) {
                        var r = {},
                            i = this.meshData.center,
                            a = this.meshData.size,
                            s = Math.max(a.x, a.z),
                            l = Math.min(a.x, a.z),
                            u = this.canvas.aspectRatio,
                            d = Math.max(s, l / u),
                            f = Math.max(l, s / u),
                            y = u < 1 ? d : f,
                            v = this.canvas.height / (1.2 * y),
                            m = o && o.zoom ? this.canvas.height / (2 * o.zoom) : v,
                            g = Object(h.b)(this.canvas.width, this.canvas.height, m),
                            b = Object(h.b)(this.canvas.width, this.canvas.height, v);
                        if (this.cameraModule.setBaseProjection(b), o && o.position) r.position = o.position;
                        else {
                            var w = p.b.UP.clone().multiplyScalar(s);
                            r.position = i.clone().add(w)
                        }
                        if (o && o.rotation) r.rotation = o.rotation;
                        else {
                            var O = (new x.a).setPosition(r.position);
                            if (O.lookAt(r.position, i, p.b.FORWARD), r.rotation = (new c.a).setFromRotationMatrix(O.asThreeMatrix4()), u < 1 !== a.x / a.z < 1) {
                                var S = (new c.a).setFromUnitVectors(p.b.UP, p.b.LEFT);
                                r.rotation.multiply(S)
                            }
                        }
                        var D = E({}, _, {
                            easing: P.h,
                            transitionType: e,
                            pose: r,
                            transitionTime: n,
                            projection: g
                        });
                        return t && t in T && (D = E({}, T[t], D)), this.cameraModule.moveTo(D)
                    }, e
                }(d.Mb);
            e.default = F
        },
        1022: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r, i, a = n(2),
                s = n(5),
                c = n(1),
                l = n(16),
                u = n(98),
                p = n(37),
                h = n(10),
                d = n(99),
                f = n(14),
                y = n(13),
                v = y.a.degToRad(80),
                m = y.a.degToRad(0),
                g = Math.PI / 1e3,
                b = n(645),
                w = n(33),
                O = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                S = d.a.epsilon,
                x = function(t) {
                    function e(e, n, o, r) {
                        void 0 === r && (r = !1);
                        var i = t.call(this) || this;
                        return i.tempOrientation = new l.a, i.tempAxis = new c.a, i.tempVector = new c.a, i.nextPosition = new c.a, i.nextOrientation = new l.a, i.currentOrientation = new l.a, i.currentPosition = new c.a, i.positionDelta = new c.a, i.angularAccel = new s.a, i.angularVelocity = new s.a, i.linearAccel = new s.a, i.linearVelocity = new s.a, i.zoomAccel = 0, i.zoomVelocity = 0, i.cameraOrientation = new u.a, i.aimTarget = new c.a, i.cameraModule = e, i.checkBounds = r, i.bounds = n.clone(), i.boundsCenter = o.clone(), i.setupBounds(), i._maxZoomDistance = Math.max(30, 1.5 * i.worldBounds.getSize(new c.a).length()), i.transition = {
                            active: !1,
                            startTime: 0,
                            elapsed: 0,
                            duration: 0,
                            angularVelocity: new s.a,
                            linearVelocity: new s.a,
                            zoomVelocity: 0,
                            easeOut: !1
                        }, i
                    }
                    return O(e, t), Object.defineProperty(e.prototype, "maxZoomDistance", {
                        get: function() {
                            return this._maxZoomDistance
                        },
                        enumerable: !0,
                        configurable: !0
                    }), e.prototype.setOrbitalAcceleration = function(t, e) {
                        void 0 === e && (e = !1), this.transition.active || (e && this.haltVelocity(t, this.angularVelocity), this.angularAccel.x = void 0 !== t.x ? t.x : this.angularAccel.x, this.angularAccel.y = void 0 !== t.y ? t.y : this.angularAccel.y)
                    }, e.prototype.setPanAcceleration = function(t, e) {
                        void 0 === e && (e = !1), this.transition.active || (e && this.haltVelocity(t, this.linearVelocity), this.linearAccel.x = void 0 !== t.x ? t.x : this.linearAccel.x, this.linearAccel.y = void 0 !== t.y ? t.y : this.linearAccel.y)
                    }, e.prototype.setZoomAcceleration = function(t) {
                        this.transition.active || (this.zoomAccel = t)
                    }, e.prototype.haltVelocity = function(t, e) {
                        t.x && e.x && Math.sign(t.x) !== Math.sign(e.x) && (e.x = 0), t.y && e.y && Math.sign(t.y) !== Math.sign(e.y) && (e.y = 0)
                    }, e.prototype.startTransition = function(t, e, n, o, r) {
                        var i = new w.a;
                        return this.transition.active = !0, this.transition.duration = t, this.transition.elapsed = 0, this.transition.startTime = Date.now(), this.transition.deferred = i, this.transition.angularVelocity.copy(e), this.transition.linearVelocity.copy(n), this.transition.zoomVelocity = o, this.transition.easeOut = r, this.angularAccel.set(0, 0), this.linearAccel.set(0, 0), this.zoomAccel = 0, this.angularVelocity.copy(e), this.linearVelocity.copy(n), this.zoomVelocity = o, this.cameraModule.beginExternalTransition(), i.promise()
                    }, e.prototype.stopTransition = function() {
                        this.transition.active && (this.cameraModule.endExternalTransition(), this.transition.active = !1), this.transition.deferred && (this.transition.deferred.resolve(), this.transition.deferred = void 0)
                    }, e.prototype.updateTransition = function(t, e, n, o) {
                        var r = 1,
                            i = t / (1e3 / 60);
                        (this.transition.elapsed += t, this.transition.elapsed >= this.transition.duration) && (r = (this.transition.duration - (this.transition.elapsed - t)) / t, i = 1);
                        e && (this.angularVelocity.copy(this.transition.angularVelocity).multiplyScalar(r * i), this.orbit(this.angularVelocity)), n && (this.linearVelocity.copy(this.transition.linearVelocity).multiplyScalar(r * i), this.pan(this.linearVelocity)), o && (this.zoomVelocity = this.transition.zoomVelocity * r * i, this.zoom(this.zoomVelocity)), this.transition.elapsed >= this.transition.duration && (this.stop(this.transition.easeOut), this.transition.active = !1)
                    }, e.prototype.updateDefault = function(t, e, n, o) {
                        var r = t / (1e3 / 60);
                        e && (this.angularVelocity.addScaledVector(this.angularAccel, r), this.orbit(this.angularVelocity), this.angularVelocity.multiplyScalar(Math.pow(.92, r))), n && (this.linearVelocity.addScaledVector(this.linearAccel, r), this.pan(this.linearVelocity), this.linearVelocity.multiplyScalar(Math.pow(.92, r))), o && (this.zoomVelocity += this.zoomAccel * r, this.zoom(this.zoomVelocity), this.zoomVelocity *= Math.pow(.84, r))
                    }, e.prototype.startRotateTransition = function(t, e, n) {
                        return e.x *= -1, this.startTransition(t, e.clone().multiplyScalar(1e3 / 60), new s.a, 0, n).nativePromise()
                    }, e.prototype.startTranslateTransition = function(t, e, n) {
                        return void 0 === n && (n = !0), this.startTransition(t, new s.a, e.clone().multiplyScalar(1e3 / 60), 0, n).nativePromise()
                    }, e.prototype.startZoomTransition = function(t, e, n) {
                        return this.startTransition(t, new s.a(0, 0), new s.a(0, 0), e, n).nativePromise()
                    }, e.prototype.update = function(t) {
                        var e = this.angularAccel.length() > S || this.angularVelocity.length() > S,
                            n = this.linearAccel.length() > S || this.linearVelocity.length() > S,
                            o = Math.abs(this.zoomAccel) > S || Math.abs(this.zoomVelocity) > S;
                        this.transition.active ? this.updateTransition(t, e, n, o) : this.updateDefault(t, e, n, o)
                    }, e.prototype.stopMomentum = function() {
                        this.transition.active || (this.angularVelocity.set(0, 0), this.linearVelocity.set(0, 0), this.zoomVelocity = 0)
                    }, e.prototype.stopAcceleration = function() {
                        this.transition.active || (this.setOrbitalAcceleration({
                            x: 0,
                            y: 0
                        }), this.setPanAcceleration({
                            x: 0,
                            y: 0
                        }), this.setZoomAcceleration(0))
                    }, e.prototype.stop = function(t) {
                        void 0 === t && (t = !1), this.stopTransition(), this.stopAcceleration(), t || this.stopMomentum()
                    }, e.prototype.pan = function(t) {
                        var e = this.cameraModule.getData(!1);
                        if (this.positionDelta.x = t.x, this.positionDelta.z = t.y, this.nextPosition.copy(e.pose.position).add(this.positionDelta), this.checkBounds && !this.insideBounds(this.nextPosition, e.pose.rotation)) {
                            this.tempVector.copy(h.b.FORWARD).applyQuaternion(e.pose.rotation), this.tempVector.multiplyScalar(e.pose.focalDistance).add(this.nextPosition);
                            var n = this.tempVector.sub(this.boundsCenter).length();
                            if (this.tempVector.copy(h.b.FORWARD).applyQuaternion(e.pose.rotation), this.tempVector.multiplyScalar(e.pose.focalDistance).add(e.pose.position), n > this.tempVector.sub(this.boundsCenter).length()) return
                        }
                        this.currentPosition.copy(this.nextPosition), this.cameraModule.updateCameraPosition(this.currentPosition)
                    }, e.prototype.orbit = function(t) {
                        var e = this.cameraModule.getData(!1);
                        this.cameraOrientation.setFromQuaternion(e.pose.rotation, "YXZ");
                        var n = -this.cameraOrientation.x,
                            o = Object(f.e)(t.y, m - n, v - n);
                        this.aimTarget.copy(h.b.FORWARD).applyQuaternion(e.pose.rotation), this.aimTarget.setLength(e.pose.focalDistance), this.aimTarget.addVectors(e.pose.position, this.aimTarget), this.tempAxis.copy(h.b.RIGHT), this.tempOrientation.setFromAxisAngle(this.tempAxis.applyQuaternion(e.pose.rotation), -o), this.nextPosition.copy(e.pose.position).sub(this.aimTarget).applyQuaternion(this.tempOrientation), this.nextOrientation.copy(e.pose.rotation).premultiply(this.tempOrientation), this.tempOrientation.setFromAxisAngle(h.b.UP, t.x), this.nextPosition.applyQuaternion(this.tempOrientation), this.nextOrientation.premultiply(this.tempOrientation), this.nextPosition = this.nextPosition.add(this.aimTarget), this.nextOrientation.normalize(), this.checkBounds && !this.insideBounds(e.pose.position, this.nextOrientation) || (this.currentPosition.copy(this.nextPosition), this.currentOrientation.copy(this.nextOrientation), e.pose.rotation.equals(this.currentOrientation) || (this.cameraModule.updateCameraPosition(this.currentPosition), this.cameraModule.updateCameraRotation(this.currentOrientation)))
                    }, e.prototype.zoom = function(t) {
                        var e = this.cameraModule.getData(!1),
                            n = this.maxZoomDistance - 5,
                            o = e.pose.focalDistance,
                            r = Object(f.e)(t * n + o, 5, this.maxZoomDistance) - o;
                        this.nextPosition.copy(e.pose.position).add(h.b.FORWARD.clone().applyQuaternion(e.pose.rotation).setLength(-r)), this.checkBounds && !this.insideBounds(this.nextPosition, e.pose.rotation) || (this.currentPosition.copy(this.nextPosition), this.cameraModule.updateCameraPosition(this.currentPosition), this.cameraModule.updateCameraFocus(e.pose.focalDistance + r))
                    }, e.prototype.setupBounds = function() {
                        this.bounds.min.x = this.adjustBound(this.bounds.min.x, 4), this.bounds.min.y = this.adjustBound(this.bounds.min.y, 4), this.bounds.min.z = this.adjustBound(this.bounds.min.z, 4), this.bounds.max.x = this.adjustBound(this.bounds.max.x, -4), this.bounds.max.y = this.adjustBound(this.bounds.max.y, -4), this.bounds.max.z = this.adjustBound(this.bounds.max.z, -4), this.worldBounds = (new p.a).setFromCenterAndSize(this.boundsCenter, new c.a(this.bounds.max.x - this.bounds.min.x, this.bounds.max.y - this.bounds.min.y, this.bounds.max.z - this.bounds.min.z))
                    }, e.prototype.insideBounds = function(t, e) {
                        var n = this.cameraModule.getData(!1);
                        return !!Object(f.k)(t, e, n.pose.projection, this.worldBounds)
                    }, e.prototype.adjustBound = function(t, e) {
                        return Math.sign(t + e) === Math.sign(t) ? t + e : 0
                    }, e
                }(b.a),
                P = n(113),
                _ = n(32),
                T = n(91),
                D = n(152),
                k = n(20),
                M = n(256),
                E = n(31),
                C = n(6),
                j = n(61),
                L = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                R = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                A = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                };
            (i = r || (r = {}))[i.NONE = _.b.NONE] = "NONE", i[i.ROTATE = _.b.PRIMARY] = "ROTATE", i[i.PAN = _.b.SECONDARY] = "PAN", i[i.ZOOM = _.b.MIDDLE] = "ZOOM";
            var I = function(t) {
                function e() {
                    var e, n, o = null !== t && t.apply(this, arguments) || this;
                    return o.name = "dollhouse-controls", o.controlState = r.NONE, o.movementKeys = new s.a, o.resetControlState = function() {
                        o.controlState = r.NONE
                    }, o.convertDeltaToLocal = (e = new c.a, n = new c.a, function(t) {
                        var r = t.x || 0,
                            i = t.y || 0,
                            a = 2 * r * o.cameraData.pose.focalDistance,
                            s = 2 * i * o.cameraData.pose.focalDistance / o.cameraData.aspect();
                        return e.copy(h.b.RIGHT).applyQuaternion(o.cameraData.pose.rotation).setY(0).setLength(a), n.copy(h.b.FORWARD).applyQuaternion(o.cameraData.pose.rotation), e.add(n.setY(0).setLength(s)), e
                    }), o
                }
                return L(e, t), e.prototype.init = function(t, e) {
                    return R(this, void 0, void 0, (function() {
                        var t, n, o, i, s, l = this;
                        return A(this, (function(u) {
                            switch (u.label) {
                                case 0:
                                    return [4, e.getModule(a.S)];
                                case 1:
                                    return t = u.sent(), this.modelMesh = t.mesh, [4, e.getModule(a.c)];
                                case 2:
                                    return n = u.sent(), o = this, [4, e.market.waitForData(P.a)];
                                case 3:
                                    return o.viewmodeData = u.sent(), i = this, [4, e.market.waitForData(j.a)];
                                case 4:
                                    return i.cameraData = u.sent(), s = this, [4, e.getModule(a.f)];
                                case 5:
                                    return s.commonControlsModule = u.sent(), this.controls = new x(n, this.modelMesh.boundingBox, this.modelMesh.center, !0), this.commonControlsModule.addControls(k.a.Dollhouse, this.controls), this.modelSize = Math.max(this.modelMesh.boundingBox.getSize(new c.a).length(), 1), this.bindings.push(e.subscribe(M.a, (function(t) {
                                        l.controls.stop(), l.resetControlState()
                                    }))), e.getModule(a.x).then((function(t) {
                                        l.bindings.push(t.registerHandler(E.q, (function(t) {
                                            l.validateViewmode() && l.onScrollWheel(t)
                                        }))), l.bindings.push(t.registerHandler(E.b, (function(t) {
                                            l.validateViewmode() && l.onDragBegin(t.buttons)
                                        }))), l.bindings.push(t.registerHandler(E.c, (function(t) {
                                            l.validateViewmode() && (t.timeSinceLastMove < 100 && (l.onDrag(t.delta), l.controls.update(1e3 / 60), l.controls.stopAcceleration()), l.onDragEnd(t.delta, t.buttons))
                                        }))), l.bindings.push(t.registerHandler(E.d, (function(t) {
                                            l.validateViewmode() && (l.onDrag(t.delta), l.controls.update(1e3 / 60), l.controls.stop())
                                        }))), l.bindings.push(t.registerHandler(E.l, (function(t) {
                                            l.validateViewmode() && (l.controls.setZoomAcceleration(-t.pinchDelta), l.controls.update(1e3 / 60), l.controls.stopAcceleration())
                                        }))), l.bindings.push(t.registerHandler(E.k, l.resetControlState)), l.bindings.push(t.registerHandler(E.j, (function(t) {
                                            l.validateViewmode() && 2 === t.pointerCount && (l.controlState = r.PAN, l.onDrag(t.delta), l.controls.update(1e3 / 60), l.controls.stop())
                                        }))), l.bindings.push(t.registerHandler(E.i, l.resetControlState)), l.bindings.push(t.registerHandler(E.f, (function(t) {
                                            l.validateViewmode() && t.state !== D.a.PRESSED && l.onKey(t.key, t.state)
                                        })))
                                    })), [2]
                            }
                        }))
                    }))
                }, e.prototype.onUpdate = function(t) {
                    this.validateViewmode() && this.controls.update(t)
                }, e.prototype.onScrollWheel = function(t) {
                    if (0 !== t.delta.y) {
                        var e = 1 / this.cameraData.pose.focalDistance * 2,
                            n = this.modelSize;
                        this.controls.setZoomAcceleration(.1 * t.delta.y / (e * n * 500)), this.controls.update(1e3 / 60), this.controls.setZoomAcceleration(0)
                    }
                }, e.prototype.onDragBegin = function(t) {
                    if (this.controlState === r.NONE) {
                        var e = t;
                        this.controlState = e
                    }
                    this.controls.stop()
                }, e.prototype.onDrag = function(t) {
                    switch (this.controlState) {
                        case r.ROTATE:
                            this.controls.setOrbitalAcceleration({
                                x: -Math.PI * t.x,
                                y: -Math.PI * t.y
                            });
                            break;
                        case r.PAN:
                            var e = this.convertDeltaToLocal(t);
                            this.controls.setPanAcceleration({
                                x: -e.x,
                                y: -e.z
                            });
                            break;
                        case r.ZOOM:
                            0 !== t.y && this.controls.setZoomAcceleration(-t.y)
                    }
                }, e.prototype.onDragEnd = function(t, e) {
                    e & this.controlState || (this.controlState = r.NONE, Object(C.o)() && this.controls.stop())
                }, e.prototype.onKey = function(t, e) {
                    var n = e === D.a.DOWN,
                        o = !1;
                    switch (t) {
                        case T.a.LEFTARROW:
                        case T.a.J:
                            this.controls.setOrbitalAcceleration({
                                x: n ? g : 0
                            }, !0);
                            break;
                        case T.a.RIGHTARROW:
                        case T.a.L:
                            this.controls.setOrbitalAcceleration({
                                x: n ? -g : 0
                            }, !0);
                            break;
                        case T.a.UPARROW:
                        case T.a.I:
                            this.controls.setOrbitalAcceleration({
                                y: n ? -g : 0
                            }, !0);
                            break;
                        case T.a.DOWNARROW:
                        case T.a.K:
                            this.controls.setOrbitalAcceleration({
                                y: n ? g : 0
                            }, !0);
                            break;
                        case T.a.W:
                            this.movementKeys.y = n ? 1 : 0, o = !0;
                            break;
                        case T.a.S:
                            this.movementKeys.y = n ? -1 : 0, o = !0;
                            break;
                        case T.a.D:
                            this.movementKeys.x = n ? 1 : 0, o = !0;
                            break;
                        case T.a.A:
                            this.movementKeys.x = n ? -1 : 0, o = !0
                    }
                    if (o) {
                        var r = this.convertDeltaToLocal(this.movementKeys).setLength(.02);
                        this.controls.setPanAcceleration({
                            x: r.x,
                            y: r.z
                        })
                    }
                }, e.prototype.validateViewmode = function() {
                    return this.viewmodeData.currentMode === k.a.Dollhouse
                }, e
            }(a.l);
            e.default = I
        },
        1027: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(549),
                i = n(720),
                a = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                s = function(t) {
                    function e(e, n) {
                        var o = t.call(this, e, n) || this;
                        return o.sweepLoader = new r.a(e), o
                    }
                    return a(e, t), e.prototype.activateSweep = function(e) {
                        return t.prototype.activateSweep.call(this, e), this.sweepLoader.load(e).then((function(t) {
                            return t
                        }))
                    }, e.prototype.useTexture = function(e) {
                        var n = this.sweepLoader.useTexture(e);
                        return n && t.prototype.useTexture.call(this, e), n
                    }, e.prototype.freeTexture = function(e, n) {
                        void 0 === n && (n = !1), t.prototype.freeTexture.call(this, e, n), 0 === this.textureUsageCounter[e] && this.sweepLoader.unload(e)
                    }, e.prototype.freeAllTextures = function(t) {
                        this.sweepLoader.unloadAll(t)
                    }, e
                }(i.a),
                c = n(2),
                l = n(60),
                u = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                p = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                h = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                d = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "sweep-pano", e
                    }
                    return u(e, t), e.prototype.init = function(t, e) {
                        return p(this, void 0, void 0, (function() {
                            var t, n;
                            return h(this, (function(o) {
                                switch (o.label) {
                                    case 0:
                                        return [4, e.getModule(c.R)];
                                    case 1:
                                        return t = o.sent().getSignedUrls(), [4, e.market.waitForData(l.a)];
                                    case 2:
                                        return n = o.sent().getSweepList(), this.panoRenderer = new s(t, n), e.addComponent(this, this.panoRenderer), [2]
                                }
                            }))
                        }))
                    }, e.prototype.getRenderer = function() {
                        return this.panoRenderer
                    }, e
                }(c.vb);
            e.default = d
        },
        1037: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(2),
                i = function() {},
                a = n(578),
                s = n(60),
                c = n(113),
                l = n(326),
                u = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                p = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                h = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                d = function(t, e) {
                    var n = "function" == typeof Symbol && t[Symbol.iterator];
                    if (!n) return t;
                    var o, r, i = n.call(t),
                        a = [];
                    try {
                        for (;
                            (void 0 === e || e-- > 0) && !(o = i.next()).done;) a.push(o.value)
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    return a
                },
                f = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                y = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "room-data", e.visitedRooms = {}, e
                    }
                    return u(e, t), e.prototype.init = function(t, e) {
                        return p(this, void 0, void 0, (function() {
                            var t, n, o, u, p, y, v, m, g, b, w, O, S, x, P, _, T, D, k, M, E, C, j, L, R = this;
                            return h(this, (function(h) {
                                switch (h.label) {
                                    case 0:
                                        return g = (m = Promise).all, [4, e.getModule(r.S)];
                                    case 1:
                                        return b = [h.sent()], [4, e.market.waitForData(c.a)];
                                    case 2:
                                        return [4, g.apply(m, [b.concat([h.sent()])])];
                                    case 3:
                                        p = d.apply(void 0, [h.sent(), 2]), y = p[0], v = p[1], w = {};
                                        try {
                                            for (O = f(y.mesh.floorMeshes), S = O.next(); !S.done; S = O.next()) {
                                                x = S.value;
                                                try {
                                                    for (P = f(x.roomMeshes), _ = P.next(); !_.done; _ = P.next()) T = _.value, D = w[T.roomIndex], k = T.geometry.boundingBox, D || ((D = new i).id = "room-" + T.roomIndex, D.index = T.roomIndex, D.floorId = T.floorIndex, D.min = {
                                                        x: k.min.x,
                                                        y: k.min.y,
                                                        z: k.min.z
                                                    }, D.max = {
                                                        x: k.max.x,
                                                        y: k.max.y,
                                                        z: k.max.z
                                                    }, D.mesh = T, w[T.roomIndex.toString()] = D, this.visitedRooms[D.id] = {
                                                        visitCount: 0
                                                    })
                                                } catch (t) {
                                                    o = {
                                                        error: t
                                                    }
                                                } finally {
                                                    try {
                                                        _ && !_.done && (u = P.return) && u.call(P)
                                                    } finally {
                                                        if (o) throw o.error
                                                    }
                                                }
                                            }
                                        } catch (e) {
                                            t = {
                                                error: e
                                            }
                                        } finally {
                                            try {
                                                S && !S.done && (n = O.return) && n.call(O)
                                            } finally {
                                                if (t) throw t.error
                                            }
                                        }
                                        return this.data = new a.a(w), e.market.register(this, a.a, this.data), M = Object.keys(this.visitedRooms).length, E = function(t) {
                                            var n = v.closestMode;
                                            R.visitedRooms[t.id].visitCount++;
                                            var o = R.visitedRooms[t.id].visitCount;
                                            e.broadcast(new l.a(t.id, t.index, n, o, M, ""))
                                        }, [4, e.market.waitForData(s.a)];
                                    case 4:
                                        return C = h.sent(), j = C.makeSweepChangeSubscription((function(t) {
                                            var e = C.getSweep(t);
                                            R.data.selected.value = e.room, R.data.commit()
                                        })), L = this.data.selected.onChanged((function(t) {
                                            if (null !== t) {
                                                var e = R.data.get(t);
                                                e && E(e)
                                            }
                                        })), this.bindings.push(j, L), [2]
                                }
                            }))
                        }))
                    }, e
                }(r.gb);
            e.default = y
        },
        1038: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(547),
                i = n(2),
                a = n(188),
                s = n(108),
                c = n(544),
                l = n(259),
                u = n(62),
                p = n(1),
                h = n(20),
                d = n(31),
                f = n(91),
                y = n(152),
                v = n(33),
                m = n(10),
                g = n(113),
                b = n(197),
                w = n(255),
                O = n(61),
                S = n(14),
                x = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                P = function() {
                    function t(t, e, n) {
                        this.floorsData = t, this.viewmodeData = e, this.floorsViewData = n, this.floorsViewData.resetFloorVisibility()
                    }
                    return t.prototype.init = function() {}, t.prototype.dispose = function() {}, t.prototype.activate = function(t) {}, t.prototype.deactivate = function(t) {
                        this.floorsViewData.resetFloorVisibility()
                    }, t.prototype.render = function() {
                        var t, e;
                        if (this.floorsData.floors && this.viewmodeData && this.floorsData) {
                            var n = this.getMaxGhosting(this.viewmodeData);
                            try {
                                for (var o = x(this.floorsData.floors), r = o.next(); !r.done; r = o.next()) {
                                    var i = r.value,
                                        s = this.getFloorGhosting(i, this.floorsViewData, a.a, a.b);
                                    s = 1 - n + n * s, this.floorsViewData.setFloorVisibility(i, s)
                                }
                            } catch (e) {
                                t = {
                                    error: e
                                }
                            } finally {
                                try {
                                    r && !r.done && (e = o.return) && e.call(o)
                                } finally {
                                    if (t) throw t.error
                                }
                            }
                        }
                    }, t.prototype.getMaxGhosting = function(t) {
                        switch (t.currentMode) {
                            case h.a.Transition:
                                return t.transition.from === h.a.Panorama ? Object(S.e)(2 * t.transition.progress - 1, 0, 1) : t.transition.to === h.a.Panorama ? 1 - Object(S.e)(2 * t.transition.progress, 0, 1) : 1;
                            case h.a.Panorama:
                                return 0;
                            case h.a.Floorplan:
                            case h.a.Dollhouse:
                                return 1
                        }
                        return 1
                    }, t.prototype.getFloorGhosting = function(t, e, n, o) {
                        if (e.transition.progress.active) {
                            var r = e.transition;
                            if (-1 === r.to) return t.floorIndex === r.from ? o : e.transition.progress.value * (o - n) + n;
                            if (-1 === r.from) return t.floorIndex === r.to ? o : (1 - e.transition.progress.value) * (o - n) + n;
                            if (t.floorIndex === r.to || t.floorIndex === r.from || e.currentFloor < 0) {
                                var i = e.transition.progress.value,
                                    a = Object(S.e)(1 - 2 * i, 0, 2),
                                    s = Object(S.e)(2 * i - 1, 0, 1);
                                return (t.floorIndex === e.transition.to ? s : a) * (o - n) + n
                            }
                            return n
                        }
                        var c = e.currentFloor;
                        return c < 0 || t.floorIndex === c ? o : n
                    }, t
                }(),
                _ = n(528),
                T = n(218),
                D = n(77),
                k = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                M = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                E = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                C = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                j = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "floors-viewdata", e.FLOOR_TRANSITION_TIME = 500, e.FLOOR_VIEW_Y_OFFSET = 8, e.lockToFloor = null, e.getFloorForSweep = function(t) {
                            return e.data.sweepFloorMap[t] || null
                        }, e.moveFloorUp = function(t, n) {
                            void 0 === t && (t = !1);
                            var o = Math.min(e.viewData.totalFloors, e.viewData.currentFloor + 1);
                            return e.moveToFloor(o, t, n)
                        }, e.moveFloorDown = function(t, n) {
                            void 0 === t && (t = !1);
                            var o = Math.max(0, e.viewData.currentFloor - 1);
                            return e.moveToFloor(o, t, n)
                        }, e.moveToFloor = function(t, n, o) {
                            void 0 === n && (n = !1);
                            var r = e.viewData.currentFloor === t,
                                i = 1 === e.viewData.totalFloors && -1 === t;
                            if (r || i) return e.updateCurrentFloor(t), v.a.resolve();
                            if (e.canMoveToFloor(t, n)) {
                                e.engine.broadcast(new c.a(e.viewData.currentFloor, t)), void 0 === o && (o = e.FLOOR_TRANSITION_TIME);
                                var a = e.viewData.transition.progress;
                                a.modifyAnimation(0, 1, o);
                                var l = new v.a;
                                e.viewData.transition = {
                                    from: e.viewData.currentFloor,
                                    to: t,
                                    progress: a,
                                    promise: l.nativePromise()
                                }, e.viewData.commit();
                                var u = void 0;
                                u = n ? Promise.resolve() : e.getCameraTransition(t, o);
                                var p = e,
                                    h = v.a.all([l, u]);
                                return e.engine.startGenerator((function() {
                                    var t, e, n;
                                    return E(this, (function(o) {
                                        switch (o.label) {
                                            case 0:
                                                t = Date.now(), o.label = 1;
                                            case 1:
                                                return p.viewData.transition.progress.active ? [4, new s.b] : [3, 3];
                                            case 2:
                                                return o.sent(), e = Date.now(), n = e - t, p.viewData.transition.progress.tick(n), p.viewData.commit(), t = e, [3, 1];
                                            case 3:
                                                return p.updateCurrentFloor(p.viewData.transition.to), l.resolve(), [2]
                                        }
                                    }))
                                })), h
                            }
                            return v.a.reject("Cannot transition floors")
                        }, e.updateViewData = function(t, n) {
                            n.iterate((function(n) {
                                t.derivedData[n.floorIndex] = e.makeViewDataForFloors(n)
                            })), t.commit()
                        }, e.updateCurrentFloor = function(t) {
                            if (null !== e.lockToFloor && (t = e.lockToFloor), e.viewData.currentFloor !== t) {
                                e.viewData.currentFloor = t, e.viewData.commit();
                                var n = e.data.getFloor(t),
                                    o = -1 !== t && n ? n.name : "All";
                                e.engine.broadcast(new l.a(t, o)), e.updateRaycastEnabledFloors()
                            }
                        }, e
                    }
                    return k(e, t), e.prototype.init = function(t, e) {
                        return M(this, void 0, void 0, (function() {
                            var t, n, o, s, c, l, u = this;
                            return E(this, (function(p) {
                                switch (p.label) {
                                    case 0:
                                        return this.engine = e, t = this, [4, e.market.waitForData(r.a)];
                                    case 1:
                                        return t.data = p.sent(), n = this, [4, e.market.waitForData(g.a)];
                                    case 2:
                                        return n.viewmodeData = p.sent(), this.viewData = new a.c(this.data), this.viewData.setViewDataFactory(this.makeViewDataForFloors), this.updateViewData(this.viewData, this.data), e.market.register(this, a.c, this.viewData), [4, e.market.waitForData(D.a)];
                                    case 3:
                                        return p.sent().checkUrlParam("f", 0, 1) && (this.updateCurrentFloor(-1), this.lockToFloor = -1), o = function() {
                                            return u.updateViewData(u.viewData, u.data)
                                        }, this.bindings.push(this.data.onChanged(o)), s = this, [4, e.getModule(i.c)];
                                    case 4:
                                        return s.cameraModule = p.sent(), c = this, [4, e.market.waitForData(O.a)];
                                    case 5:
                                        return c.cameraData = p.sent(), this.floorsRenderer = new P(this.data, this.viewmodeData, this.viewData), e.addComponent(this, this.floorsRenderer), l = this, [4, e.getModule(i.x)];
                                    case 6:
                                        return l.input = p.sent(), this.registerKeys(this.input), this.bindings.push(e.subscribe(b.a, (function(t) {
                                            var e = u.getFloorForSweep(t.toSweep);
                                            e && u.updateCurrentFloor(e.floorIndex)
                                        }))), this.bindings.push(e.subscribe(w.a, (function(t) {
                                            u.updateRaycastEnabledFloors()
                                        }))), this.bindings.push(e.commandBinder.addBinding(_.a, (function(t) {
                                            return M(u, void 0, void 0, (function() {
                                                return E(this, (function(e) {
                                                    return this.moveToFloor(t.floor, t.suppressCameraMovement, t.transitionTime), [2]
                                                }))
                                            }))
                                        }))), [2]
                                }
                            }))
                        }))
                    }, e.prototype.onUpdate = function(t) {}, e.prototype.makeViewDataForFloors = function(t) {
                        return {
                            floorIndex: t.floorIndex,
                            name: t.name,
                            boundingBox: t.boundingBox,
                            medianSweepHeight: t.medianSweepHeight
                        }
                    }, e.prototype.registerKeys = function(t) {
                        return M(this, void 0, void 0, (function() {
                            var e = this;
                            return E(this, (function(n) {
                                return t.registerHandler(d.f, (function(t) {
                                    if (t.state === y.a.PRESSED) switch (t.key) {
                                        case f.a.R:
                                            e.moveFloorUp();
                                            break;
                                        case f.a.F:
                                            e.moveFloorDown();
                                            break;
                                        case f.a.Y:
                                            e.moveToFloor(-1)
                                    }
                                })), [2]
                            }))
                        }))
                    }, e.prototype.canMoveToFloor = function(t, e) {
                        var n = this.viewData.transition.progress.active,
                            o = this.cameraData.canTransition() || e,
                            r = t <= this.viewData.totalFloors - 1;
                        return !n && o && r && t >= -1
                    }, e.prototype.updateRaycastEnabledFloors = function() {
                        var t, e, n = this.viewData.currentFloor;
                        try {
                            for (var o = C(this.data.floors), r = o.next(); !r.done; r = o.next()) {
                                var i = r.value;
                                this.input.enableMeshGroup(i.colliderGroupName, -1 === n || n === i.floorIndex || this.viewmodeData.currentMode === h.a.Panorama)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                r && !r.done && (e = o.return) && e.call(o)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    }, e.prototype.getCameraOptionsForFloor = function(t, e, n, o) {
                        var r = t >= 0 ? this.data.getFloor(t) : void 0,
                            i = m.b.FORWARD.clone().applyQuaternion(o),
                            a = this.calculateFloorCameraOffsets(r);
                        return a.minimum += a.focalDistance * -i.y, {
                            pose: {
                                position: new p.a(e, a.minimum, n),
                                rotation: o
                            },
                            focalDistance: a.focalDistance
                        }
                    }, e.prototype.getCameraTransition = function(t, e) {
                        var n = this.getCameraOptionsForFloor(t, this.cameraData.pose.position.x, this.cameraData.pose.position.z, this.cameraData.pose.rotation);
                        if (this.viewmodeData.currentMode === h.a.Dollhouse || this.viewmodeData.currentMode === h.a.Floorplan) return this.cameraModule.moveTo({
                            transitionType: u.a.Interpolate,
                            pose: n.pose,
                            focalDistance: n.focalDistance,
                            transitionTime: e
                        }).nativePromise();
                        if (this.viewmodeData.currentMode === h.a.Panorama) {
                            var o = this.data.getFloor(t);
                            if (o) {
                                var r = o.getSweepClosestToPoint(this.cameraData.pose.position);
                                if (r) return this.engine.commandBinder.issueCommand(new T.a({
                                    transition: u.a.Interpolate,
                                    sweep: r.id
                                }))
                            }
                        }
                        return Promise.resolve()
                    }, e.prototype.calculateFloorCameraOffsets = function(t) {
                        if (!t && this.data.floors && (t = this.data.getTopFloor() || void 0), t) return {
                            minimum: t.center.y,
                            focalDistance: t.size.y / 2 + this.FLOOR_VIEW_Y_OFFSET
                        };
                        var e = this.getModelHeight();
                        return {
                            minimum: e / 2,
                            focalDistance: e / 2 + this.FLOOR_VIEW_Y_OFFSET
                        }
                    }, e.prototype.getModelHeight = function() {
                        var t, e;
                        if (this.data.floors) {
                            var n = 0;
                            try {
                                for (var o = C(this.data.floors), r = o.next(); !r.done; r = o.next()) {
                                    var i = r.value;
                                    n += i.boundingBox.max.y - i.boundingBox.min.y
                                }
                            } catch (e) {
                                t = {
                                    error: e
                                }
                            } finally {
                                try {
                                    r && !r.done && (e = o.return) && e.call(o)
                                } finally {
                                    if (t) throw t.error
                                }
                            }
                            return n
                        }
                        return 0
                    }, e
                }(i.u);
            e.default = j
        },
        1039: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(2),
                i = n(5),
                a = n(1),
                s = n(7),
                c = n(98),
                l = n(16),
                u = n(10),
                p = n(577),
                h = n(99),
                d = n(14),
                f = n(645),
                y = n(33),
                v = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                m = function(t) {
                    function e(e) {
                        var n = t.call(this) || this;
                        return n.lookVelocity = new i.a, n.lookAccel = new i.a, n.tempAxis = new a.a, n.tempOrientation = new l.a, n.currentOrientation = new l.a, n.tempEuler = new c.a, n.cameraModule = e, n.transition = {
                            active: !1,
                            startTime: 0,
                            elapsed: 0,
                            duration: 0,
                            velocity: new i.a,
                            easeOut: !1
                        }, n
                    }
                    return v(e, t), e.prototype.setLookAcceleration = function(t, e) {
                        void 0 === e && (e = !1), this.transition.active || (e && (t.x && this.lookVelocity.x && Math.sign(t.x) !== Math.sign(this.lookVelocity.x) && (this.lookVelocity.x = 0), t.y && this.lookVelocity.y && Math.sign(t.y) !== Math.sign(this.lookVelocity.y) && (this.lookVelocity.y = 0)), this.lookAccel.x = void 0 !== t.x ? t.x : this.lookAccel.x, this.lookAccel.y = void 0 !== t.y ? t.y : this.lookAccel.y)
                    }, e.prototype.startTransition = function(t, e, n) {
                        var o = new y.a;
                        return this.transition.active = !0, this.transition.duration = t, this.transition.elapsed = 0, this.transition.startTime = Date.now(), this.transition.deferred = o, this.transition.velocity.copy(e), this.transition.easeOut = n, this.lookAccel.set(0, 0), this.lookVelocity.copy(e), this.cameraModule.beginExternalTransition(), o.promise()
                    }, e.prototype.stopTransition = function() {
                        this.transition.active && (this.cameraModule.endExternalTransition(), this.transition.active = !1), this.transition.deferred && (this.transition.deferred.resolve(), this.transition.deferred = void 0)
                    }, e.prototype.updateTransition = function(t) {
                        var e = t / p.b;
                        if (this.lookVelocity.copy(this.transition.velocity), this.transition.elapsed += t, this.transition.elapsed >= this.transition.duration) {
                            var n = this.transition.duration - (this.transition.elapsed - t);
                            this.lookVelocity.multiplyScalar(n / t)
                        } else this.lookVelocity.multiplyScalar(e)
                    }, e.prototype.updateCameraParameters = function() {
                        var t = this.cameraModule.getData(!1);
                        this.tempEuler.setFromQuaternion(t.pose.rotation, "YXZ");
                        var e = this.tempEuler.x,
                            n = Object(d.e)(this.lookVelocity.y, p.d - e, p.e - e);
                        this.tempAxis.copy(u.b.RIGHT), this.tempOrientation.setFromAxisAngle(this.tempAxis.applyQuaternion(t.pose.rotation), n), this.currentOrientation.copy(t.pose.rotation).premultiply(this.tempOrientation), this.tempOrientation.setFromAxisAngle(u.b.UP, this.lookVelocity.x), this.currentOrientation.premultiply(this.tempOrientation), t.pose.rotation.equals(this.currentOrientation) || (this.tempOrientation.copy(this.currentOrientation).normalize(), this.cameraModule.updateCameraRotation(this.tempOrientation))
                    }, e.prototype.update = function(t) {
                        var e = this.cameraModule.getData(!1),
                            n = t / p.b;
                        e.pose.rotation.equals(this.currentOrientation) || this.currentOrientation.copy(e.pose.rotation), this.transition.active ? (this.updateTransition(t), this.updateCameraParameters(), this.transition.elapsed >= this.transition.duration && (this.stop(this.transition.easeOut), this.transition.active = !1)) : (this.lookAccel.length() > h.a.epsilon || this.lookVelocity.length() > h.a.epsilon) && (this.lookVelocity.addScaledVector(this.lookAccel, n), this.updateCameraParameters(), this.lookVelocity.multiplyScalar(Math.pow(1 - p.a, n)))
                    }, e.prototype.stop = function(t) {
                        void 0 === t && (t = !1), this.stopTransition(), this.lookAccel.set(0, 0), t || this.lookVelocity.set(0, 0)
                    }, e.prototype.startRotateTransition = function(t, e, n) {
                        var o = this.cameraModule.getData(!1);
                        return o.transition && o.transition.activeInternal && o.transition.to.rotation && (o.transition.to.rotation = void 0), this.startTransition(t, e.clone().multiplyScalar(p.b), n).nativePromise()
                    }, e.prototype.startTranslateTransition = function(t, e, n) {
                        throw void 0 === n && (n = !0), new Error("Panning isn't supported in Panorama Controls")
                    }, e.prototype.startZoomTransition = function(t, e, n) {
                        throw new Error("Zooming isn't supported in Panorama Controls")
                    }, e
                }(f.a),
                g = n(113),
                b = n(75),
                w = n(20),
                O = n(32),
                S = n(91),
                x = n(152),
                P = n(256),
                _ = n(31),
                T = n(77),
                D = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                k = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                M = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                E = function(t) {
                    function e() {
                        var e, n, o, r = null !== t && t.apply(this, arguments) || this;
                        return r.name = "panorama-controls", r.controlsEngaged = !1, r.lookAccelerationSpeed = p.c, r.calcRotationAngle = (e = new s.a, n = new a.a, o = new a.a, function(t, r, a) {
                            var s = t.getData(!1);
                            e.getInverse(s.pose.projection.asThreeMatrix4()), n.set(r.x - a.x, r.y - a.y, -1).applyMatrix4(e), o.set(r.x, r.y, -1).applyMatrix4(e);
                            var c = Math.sqrt(n.x * n.x + n.z * n.z),
                                l = Math.sqrt(o.x * o.x + o.z * o.z),
                                u = Math.atan2(n.y, c),
                                p = Math.atan2(o.y, l) - u;
                            n.y = 0, o.y = 0, n.normalize(), o.normalize();
                            var h = Math.acos(n.dot(o)),
                                d = 0;
                            return isNaN(h) || (d = h, a.x > 0 && (d *= -1)), new i.a(-d, -p)
                        }), r
                    }
                    return D(e, t), e.prototype.init = function(t, e) {
                        return k(this, void 0, void 0, (function() {
                            var t, n = this;
                            return M(this, (function(o) {
                                switch (o.label) {
                                    case 0:
                                        return [4, e.getModule(r.c)];
                                    case 1:
                                        return t = o.sent(), this.controls = new m(t), [4, e.getModule(r.f)];
                                    case 2:
                                        return o.sent().addControls(w.a.Panorama, this.controls), this.market = e.market, this.bindings.push(e.subscribe(P.a, (function(t) {
                                            n.controls.stop()
                                        }))), e.getModule(r.x).then((function(e) {
                                            e.registerHandler(_.b, (function(t) {
                                                n.validateViewmode() && n.controls.stop()
                                            })), e.registerHandler(_.d, (function(e) {
                                                n.validateViewmode() && e.buttons & O.b.PRIMARY && (n.controlsEngaged = !0, n.onDrag(t, e.position, e.delta), n.controls.update(p.b), n.controls.stop())
                                            })), e.registerHandler(_.c, (function(e) {
                                                n.validateViewmode() && n.controlsEngaged && (e.timeSinceLastMove < 100 && !(e.buttons & O.b.PRIMARY) && (n.onDrag(t, e.position, e.delta), n.controls.update(p.b), n.controls.setLookAcceleration({
                                                    x: 0,
                                                    y: 0
                                                })), n.controlsEngaged = !1)
                                            })), e.registerHandler(_.f, (function(t) {
                                                n.validateViewmode() && n.onKey(t.key, t.state)
                                            }))
                                        })), [2]
                                }
                            }))
                        }))
                    }, e.prototype.onUpdate = function(t) {
                        this.validateViewmode() && this.controls.update(t)
                    }, e.prototype.onDrag = function(t, e, n) {
                        this.controls.setLookAcceleration(this.calcRotationAngle(t, e, n))
                    }, e.prototype.onKey = function(t, e) {
                        var n = null,
                            o = this.market.tryGetData(T.a);
                        o && (n = o.tryGetProperty(r.Sb, null)), this.lookAccelerationSpeed = n ? n * (Math.PI / 180) / 60 : this.lookAccelerationSpeed;
                        var i = e === x.a.DOWN;
                        switch (t) {
                            case S.a.LEFTARROW:
                            case S.a.J:
                                this.controls.setLookAcceleration({
                                    x: i ? this.lookAccelerationSpeed : 0
                                }, !0);
                                break;
                            case S.a.RIGHTARROW:
                            case S.a.L:
                                this.controls.setLookAcceleration({
                                    x: i ? -this.lookAccelerationSpeed : 0
                                }, !0);
                                break;
                            case S.a.K:
                                this.controls.setLookAcceleration({
                                    y: i ? -this.lookAccelerationSpeed : 0
                                }, !0);
                                break;
                            case S.a.I:
                                this.controls.setLookAcceleration({
                                    y: i ? this.lookAccelerationSpeed : 0
                                }, !0)
                        }
                    }, e.prototype.validateViewmode = function() {
                        var t = this.market.tryGetData(g.a),
                            e = this.market.tryGetData(b.a);
                        return !t || !e || t.isPano() && !e.isVR()
                    }, e
                }(r.W);
            e.default = E
        },
        1040: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r, i, a = n(2),
                s = n(5),
                c = n(1),
                l = n(16),
                u = n(37),
                p = n(53),
                h = n(10),
                d = n(579),
                f = n(99),
                y = n(14),
                v = n(56),
                m = n(645),
                g = n(33),
                b = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                w = function(t) {
                    function e(e, n, o, r) {
                        void 0 === r && (r = !1);
                        var i = t.call(this) || this;
                        return i.cameraModule = e, i.targetProjection = new p.a, i.currentOrientation = new l.a, i.currentPosition = new c.a, i.positionDelta = new c.a, i.angularAccel = 0, i.angularVelocity = 0, i.linearAccel = new s.a, i.linearVelocity = new s.a, i.zoomAccel = 0, i.zoomVelocity = 0, i.scale = 1, i.maxZoom = 0, i.minZoom = d.i, i.checkBounds = r, i.bounds = n.clone(), i.boundsCenter = o.clone(), i.setupBounds(), i.transition = {
                            active: !1,
                            startTime: 0,
                            elapsed: 0,
                            duration: 0,
                            angularVelocity: 0,
                            linearVelocity: new s.a,
                            zoomVelocity: 0,
                            easeOut: !1
                        }, i
                    }
                    return b(e, t), e.prototype.start = function() {
                        this.scale = 1, this.maxZoom = this.cameraModule.getData(!1).defaultZoom() * d.j
                    }, e.prototype.setRollAcceleration = function(t, e) {
                        void 0 === e && (e = !1), this.transition.active || (e && t && this.angularVelocity && Math.sign(t) !== Math.sign(this.angularVelocity) && (this.angularVelocity = 0), this.angularAccel = t)
                    }, e.prototype.setPanAcceleration = function(t, e) {
                        void 0 === e && (e = !1), this.transition.active || (e && this.haltVelocity(t, this.linearVelocity), this.linearAccel.x = void 0 !== t.x ? t.x : this.linearAccel.x, this.linearAccel.y = void 0 !== t.y ? t.y : this.linearAccel.y)
                    }, e.prototype.setZoomAcceleration = function(t) {
                        this.transition.active || (this.zoomAccel = t)
                    }, e.prototype.haltVelocity = function(t, e) {
                        t.x && e.x && Math.sign(t.x) !== Math.sign(e.x) && (e.x = 0), t.y && e.y && Math.sign(t.y) !== Math.sign(e.y) && (e.y = 0)
                    }, e.prototype.startRotateTransition = function(t, e, n) {
                        return this.startTransition(t, e.x * d.b, new s.a, 0, n).nativePromise()
                    }, e.prototype.startTranslateTransition = function(t, e, n) {
                        return void 0 === n && (n = !0), this.startTransition(t, 0, e.clone().multiplyScalar(d.b), 0, n).nativePromise()
                    }, e.prototype.startZoomTransition = function(t, e, n) {
                        return this.startTransition(t, 0, new s.a(0, 0), e, n).nativePromise()
                    }, e.prototype.startTransition = function(t, e, n, o, r) {
                        var i = new g.a;
                        return this.transition.active = !0, this.transition.duration = t, this.transition.elapsed = 0, this.transition.startTime = Date.now(), this.transition.deferred = i, this.transition.angularVelocity = e, this.transition.linearVelocity.copy(n), this.transition.zoomVelocity = o, this.transition.easeOut = r, this.angularAccel = 0, this.linearAccel.set(0, 0), this.zoomAccel = 0, this.angularVelocity = e, this.linearVelocity.copy(n), this.zoomVelocity = o, this.cameraModule.beginExternalTransition(), i.promise()
                    }, e.prototype.stopTransition = function() {
                        this.transition.active && (this.cameraModule.endExternalTransition(), this.transition.active = !1), this.transition.deferred && (this.transition.deferred.resolve(), this.transition.deferred = void 0)
                    }, e.prototype.updateTransition = function(t, e, n, o) {
                        var r = 1,
                            i = t / d.b;
                        (this.transition.elapsed += t, this.transition.elapsed >= this.transition.duration) && (r = (this.transition.duration - (this.transition.elapsed - t)) / t, i = 1);
                        e && (this.angularVelocity = this.transition.angularVelocity * i * r, this.roll(this.angularVelocity)), n && (this.linearVelocity.copy(this.transition.linearVelocity).multiplyScalar(r * i), this.pan(this.linearVelocity)), o && (this.zoomVelocity = this.transition.zoomVelocity * r * i, this.zoom(this.zoomVelocity)), this.transition.elapsed >= this.transition.duration && (this.stop(this.transition.easeOut), this.transition.active = !1)
                    }, e.prototype.updateDefault = function(t, e, n, o) {
                        var r = t / d.b;
                        e && (this.angularVelocity = this.angularVelocity + this.angularAccel * r, this.roll(this.angularVelocity), this.angularVelocity *= Math.pow(1 - d.a, r)), n && (this.linearVelocity.addScaledVector(this.linearAccel, r), this.pan(this.linearVelocity), this.linearVelocity.multiplyScalar(Math.pow(1 - d.a, r))), o && (this.zoomVelocity = this.zoomVelocity + this.zoomAccel * r, this.zoom(this.zoomVelocity), this.zoomVelocity *= Math.pow(1 - d.h, r))
                    }, e.prototype.update = function(t) {
                        var e = Math.abs(this.angularAccel) > f.a.epsilon || Math.abs(this.angularVelocity) > f.a.epsilon,
                            n = this.linearAccel.length() > f.a.epsilon || this.linearVelocity.length() > f.a.epsilon,
                            o = Math.abs(this.zoomAccel) > f.a.epsilon || Math.abs(this.zoomVelocity) > f.a.epsilon;
                        this.transition.active ? this.updateTransition(t, e, n, o) : this.updateDefault(t, e, n, o)
                    }, e.prototype.stopMomentum = function() {
                        this.transition.active || (this.angularVelocity = 0, this.linearVelocity.set(0, 0), this.zoomVelocity = 0)
                    }, e.prototype.stopAcceleration = function() {
                        this.transition.active || (this.setPanAcceleration({
                            x: 0,
                            y: 0
                        }), this.setRollAcceleration(0), this.setZoomAcceleration(0))
                    }, e.prototype.stop = function(t) {
                        void 0 === t && (t = !1), this.stopTransition(), this.stopAcceleration(), t || this.stopMomentum()
                    }, e.prototype.pan = function(t) {
                        var e = this.cameraModule.getData(!1);
                        this.positionDelta.x = t.x, this.positionDelta.z = t.y, this.currentPosition.copy(e.pose.position).add(this.positionDelta), this.checkBounds && !this.insideBounds(this.currentPosition, e.pose.rotation, e.pose.projection) || this.cameraModule.updateCameraPosition(this.currentPosition)
                    }, e.prototype.roll = function(t) {
                        var e = this.cameraModule.getData(!1);
                        this.currentOrientation.setFromAxisAngle(h.b.FORWARD, t), this.currentOrientation.multiplyQuaternions(e.pose.rotation, this.currentOrientation), this.currentOrientation.normalize(), this.checkBounds && !this.insideBounds(e.pose.position, this.currentOrientation, e.pose.projection) || e.pose.rotation.equals(this.currentOrientation) || this.cameraModule.updateCameraRotation(this.currentOrientation)
                    }, e.prototype.zoom = function(t) {
                        var e = this.cameraModule.getData(!1);
                        this.targetProjection.copy(e.pose.projection);
                        var n = this.scale * (1 - t);
                        if (Math.abs(n - this.scale) > f.a.epsilon) {
                            this.targetProjection.elements[0] *= n / this.scale, this.targetProjection.elements[5] *= n / this.scale;
                            var o = Object(v.e)(this.targetProjection);
                            if (t < 0 && o <= this.minZoom || t > 0 && o >= this.maxZoom) return;
                            if (this.checkBounds && !this.insideBounds(e.pose.position, e.pose.rotation, this.targetProjection)) return;
                            this.scale = n, this.cameraModule.updateCameraProjection(this.targetProjection.clone())
                        }
                    }, e.prototype.setupBounds = function() {
                        this.bounds.min.x = this.adjustBound(this.bounds.min.x, 2), this.bounds.min.y = this.adjustBound(this.bounds.min.y, 2), this.bounds.min.z = this.adjustBound(this.bounds.min.z, 2), this.bounds.max.x = this.adjustBound(this.bounds.max.x, -2), this.bounds.max.y = this.adjustBound(this.bounds.max.y, -2), this.bounds.max.z = this.adjustBound(this.bounds.max.z, -2), this.worldBounds = (new u.a).setFromCenterAndSize(this.boundsCenter, new c.a(this.bounds.max.x - this.bounds.min.x, this.bounds.max.y - this.bounds.min.y, this.bounds.max.z - this.bounds.min.z))
                    }, e.prototype.insideBounds = function(t, e, n) {
                        return !!Object(y.k)(t, e, n, this.worldBounds)
                    }, e.prototype.adjustBound = function(t, e) {
                        return Math.sign(t + e) === Math.sign(t) ? t + e : 0
                    }, e
                }(m.a),
                O = n(113),
                S = n(32),
                x = n(91),
                P = n(152),
                _ = n(20),
                T = n(256),
                D = n(255),
                k = n(31),
                M = n(61),
                E = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                C = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                j = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                L = function(t, e) {
                    var n = "function" == typeof Symbol && t[Symbol.iterator];
                    if (!n) return t;
                    var o, r, i = n.call(t),
                        a = [];
                    try {
                        for (;
                            (void 0 === e || e-- > 0) && !(o = i.next()).done;) a.push(o.value)
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    return a
                };
            (i = r || (r = {}))[i.NONE = S.b.NONE] = "NONE", i[i.PAN = S.b.PRIMARY] = "PAN", i[i.ROTATE = S.b.SECONDARY] = "ROTATE", i[i.ZOOM = S.b.MIDDLE] = "ZOOM";
            var R = function(t) {
                function e() {
                    var e = null !== t && t.apply(this, arguments) || this;
                    return e.name = "floorplan-controls", e.controlState = r.NONE, e.controlsEngaged = !1, e.movementKeys = new s.a, e.resetControlState = function() {
                        e.controlState = r.NONE
                    }, e
                }
                return E(e, t), e.prototype.init = function(t, e) {
                    return C(this, void 0, void 0, (function() {
                        var t, n, o, r, i, s, l = this;
                        return j(this, (function(u) {
                            switch (u.label) {
                                case 0:
                                    return [4, Promise.all([e.getModule(a.S), e.getModule(a.c), e.getModule(a.f), e.market.waitForData(M.a), e.market.waitForData(O.a)])];
                                case 1:
                                    return t = L.apply(void 0, [u.sent(), 5]), n = t[0], o = t[1], r = t[2], i = t[3], s = t[4], this.cameraModule = o, this.cameraData = i, this.viewmodeData = s, this.modelMesh = n.mesh, this.modelSize = Math.max(this.modelMesh.boundingBox.getSize(new c.a).length(), 1), this.commonControlsModule = r, this.controls = new w(this.cameraModule, this.modelMesh.boundingBox, this.modelMesh.center, !0), this.commonControlsModule.addControls(_.a.Floorplan, this.controls), e.getModule(a.x).then((function(t) {
                                        l.bindings.push(t.registerHandler(k.q, (function(t) {
                                            l.validateViewmode() && l.onScrollWheel(t)
                                        }))), l.bindings.push(t.registerHandler(k.b, (function(t) {
                                            l.validateViewmode() && l.onDragBegin(t.buttons)
                                        }))), l.bindings.push(t.registerHandler(k.d, (function(t) {
                                            l.validateViewmode() && (l.controlsEngaged = !0, l.onDrag(t.delta), l.controls.update(d.b), l.controls.stop())
                                        }))), l.bindings.push(t.registerHandler(k.c, (function(t) {
                                            l.validateViewmode() && l.controlsEngaged && (t.timeSinceLastMove < 100 && (l.onDrag(t.delta), l.controls.update(d.b), l.controls.stopAcceleration()), l.onDragEnd(t.delta, t.buttons), l.controlsEngaged = !1)
                                        }))), l.bindings.push(t.registerHandler(k.l, (function(t) {
                                            l.validateViewmode() && (l.controls.setZoomAcceleration(-t.pinchDelta * d.k), l.controls.update(d.b), l.controls.stop())
                                        }))), l.bindings.push(t.registerHandler(k.k, l.resetControlState)), l.bindings.push(t.registerHandler(k.p, (function(t) {
                                            l.validateViewmode() && (l.controls.setRollAcceleration(t.rotateDelta), l.controls.update(d.b), l.controls.stop())
                                        }))), l.bindings.push(t.registerHandler(k.o, l.resetControlState)), l.bindings.push(t.registerHandler(k.f, (function(t) {
                                            l.validateViewmode() && t.state !== P.a.PRESSED && l.onKey(t.key, t.state)
                                        })))
                                    })), this.bindings.push(e.subscribe(T.a, (function(t) {
                                        l.controls.stop(), l.resetControlState()
                                    }))), this.bindings.push(e.subscribe(D.a, (function(t) {
                                        t.toMode === _.a.Floorplan && l.controls.start()
                                    }))), [2]
                            }
                        }))
                    }))
                }, e.prototype.onUpdate = function(t) {
                    this.validateViewmode() && this.controls.update(t)
                }, e.prototype.onScrollWheel = function(t) {
                    if (0 !== t.delta.y) {
                        var e = Object(y.p)(this.modelSize, 1, 1500, 2, .125);
                        this.controls.setZoomAcceleration(t.delta.y * d.l / (e * d.g)), this.controls.update(d.b), this.controls.setZoomAcceleration(0)
                    }
                }, e.prototype.onDragBegin = function(t) {
                    if (this.controlState === r.NONE) {
                        var e = t;
                        this.controlState = e
                    }
                    this.controls.stop()
                }, e.prototype.onDrag = function(t) {
                    switch (this.controlState) {
                        case r.ROTATE:
                            this.controls.setRollAcceleration(t.x * Math.PI);
                            break;
                        case r.PAN:
                            var e = this.convertDeltaToLocal(t);
                            this.controls.setPanAcceleration({
                                x: -e.x,
                                y: -e.z
                            });
                            break;
                        case r.ZOOM:
                            0 !== t.y && this.controls.setZoomAcceleration(-t.y)
                    }
                }, e.prototype.onDragEnd = function(t, e) {
                    e & this.controlState || (this.controlState = r.NONE)
                }, e.prototype.onKey = function(t, e) {
                    var n = e === P.a.DOWN,
                        o = !1;
                    switch (t) {
                        case x.a.LEFTARROW:
                        case x.a.J:
                            this.controls.setRollAcceleration(n ? d.d : 0, !0);
                            break;
                        case x.a.RIGHTARROW:
                        case x.a.L:
                            this.controls.setRollAcceleration(n ? -d.d : 0, !0);
                            break;
                        case x.a.A:
                            this.movementKeys.x = n ? -1 : 0, o = !0;
                            break;
                        case x.a.D:
                            this.movementKeys.x = n ? 1 : 0, o = !0;
                            break;
                        case x.a.W:
                            this.movementKeys.y = n ? 1 : 0, o = !0;
                            break;
                        case x.a.S:
                            this.movementKeys.y = n ? -1 : 0, o = !0;
                            break;
                        case x.a.K:
                        case x.a.DOWNARROW:
                            this.controls.setZoomAcceleration(n ? d.e : 0);
                            break;
                        case x.a.I:
                        case x.a.UPARROW:
                            this.controls.setZoomAcceleration(n ? -d.e : 0)
                    }
                    if (o) {
                        var r = this.convertDeltaToLocal(this.movementKeys).setLength(d.c);
                        this.controls.setPanAcceleration({
                            x: r.x,
                            y: r.z
                        })
                    }
                }, e.prototype.validateViewmode = function() {
                    return this.viewmodeData.currentMode === _.a.Floorplan
                }, e.prototype.convertDeltaToLocal = function(t) {
                    var e = t.x || 0,
                        n = t.y || 0,
                        o = e / this.cameraData.pose.projection.elements[0],
                        r = n / this.cameraData.pose.projection.elements[5],
                        i = new c.a;
                    return i.set(o, r, 0), i.applyQuaternion(this.cameraData.pose.rotation), i
                }, e
            }(a.r);
            e.default = R
        },
        111: function(t, e, n) {
            "use strict";
            n.d(e, "b", (function() {
                return h
            })), n.d(e, "a", (function() {
                return d
            }));
            var o = n(19),
                r = n(23);

            function i(t) {
                return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                    return typeof t
                } : function(t) {
                    return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
                })(t)
            }

            function a(t, e) {
                for (var n = 0; n < e.length; n++) {
                    var o = e[n];
                    o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o)
                }
            }

            function s(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function c(t, e) {
                return !e || "object" !== i(e) && "function" != typeof e ? function(t) {
                    if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return t
                }(t) : e
            }

            function l(t) {
                return (l = Object.setPrototypeOf ? Object.getPrototypeOf : function(t) {
                    return t.__proto__ || Object.getPrototypeOf(t)
                })(t)
            }

            function u(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        writable: !0,
                        configurable: !0
                    }
                }), e && p(t, e)
            }

            function p(t, e) {
                return (p = Object.setPrototypeOf || function(t, e) {
                    return t.__proto__ = e, t
                })(t, e)
            }

            function h(t) {
                if (!t.prototype || !t.prototype.render) return t.__scuWrap || (t.__scuWrap = f(t, g));
                t.prototype.shouldComponentUpdate = v
            }

            function d(t) {
                if (!t.prototype || !t.prototype.render) return t.__scuWrap || (t.__scuWrap = f(t, r.b));
                t.prototype.shouldComponentUpdate = m
            }

            function f(t, e) {
                var n = function(t) {
                    function e() {
                        return s(this, e), c(this, l(e).apply(this, arguments))
                    }
                    return u(e, t), e
                }(y);
                return n.prototype.renderChild = t, n.prototype.diffFunc = e, n
            }
            var y = function(t) {
                function e() {
                    return s(this, e), c(this, l(e).apply(this, arguments))
                }
                var n, o, r;
                return u(e, t), n = e, (o = [{
                    key: "shouldComponentUpdate",
                    value: function(t) {
                        return this.diffFunc(t, this.props)
                    }
                }, {
                    key: "render",
                    value: function(t, e, n) {
                        return this.renderChild(t, n)
                    }
                }]) && a(n.prototype, o), r && a(n, r), e
            }(o.Component);

            function v(t, e) {
                return g(t, this.props) || g(e, this.state)
            }

            function m(t, e) {
                return g(t, this.props) || Object(r.b)(e, this.state)
            }

            function g(t, e) {
                for (var n in t)
                    if (t[n] !== e[n]) return !0;
                for (var o in e)
                    if (!(o in t)) return !0;
                return !1
            }
        },
        217: function(t, e, n) {
            "use strict";
            n.d(e, "b", (function() {
                return r
            })), n.d(e, "a", (function() {
                return c
            }));
            var o, r, i = n(19),
                a = n(253),
                s = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                });
            ! function(t) {
                t[t.DEFAULT = 0] = "DEFAULT", t[t.LIGHT = 1] = "LIGHT", t[t.SHADOW = 2] = "SHADOW", t[t.OVERLAY = 3] = "OVERLAY"
            }(r || (r = {}));
            var c = function(t) {
                function e(e) {
                    return t.call(this, e) || this
                }
                return s(e, t), e.prototype.getIconButtonStyle = function() {
                    switch (this.props.buttonStyle) {
                        case r.LIGHT:
                        case r.SHADOW:
                            return a.b.CLEAR;
                        case r.OVERLAY:
                            return a.b.OVERLAY;
                        default:
                            return a.b.PLAIN
                    }
                }, e.prototype.render = function() {
                    var t = this.props,
                        e = t.buttonStyle,
                        n = t.onClose;
                    return Object(i.h)(a.a, {
                        appendClass: {
                            "close-button": !0,
                            "close-button-shadow": e === r.SHADOW,
                            "close-button-light": e === r.LIGHT
                        },
                        iconClass: "icon-close",
                        buttonStyle: this.getIconButtonStyle(),
                        onClick: n
                    })
                }, e
            }(i.Component)
        },
        251: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return r
            })), n.d(e, "b", (function() {
                return p
            }));
            var o, r, i = n(19),
                a = n(111),
                s = n(110),
                c = n(217),
                l = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                u = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                };
            ! function(t) {
                t.NONE = "no-arrow", t.TOP_LEFT = "position-top-left", t.TOP_RIGHT = "position-top-right", t.TOP_CENTER = "position-top-center", t.BOTTOM_RIGHT = "position-bottom-right", t.BOTTOM_LEFT = "position-bottom-left", t.BOTTOM_CENTER = "position-bottom-center", t.RIGHT_BOTTOM = "position-right-bottom"
            }(r || (r = {}));
            var p = function(t) {
                function e(e) {
                    var o = t.call(this, e) || this;
                    o.getContentPosition = function() {
                        if (!o.tooltipWrapper) return {};
                        var t = o.tooltipWrapper.parentElement;
                        switch (o.props.arrowPos) {
                            case r.BOTTOM_RIGHT:
                                return {
                                    transform: "translate(-100%, " + (-o.tooltipContent.offsetHeight - t.getBoundingClientRect().height - 17) + "px)"
                                };
                            case r.BOTTOM_LEFT:
                                return {
                                    transform: "translate(0, " + (-o.tooltipContent.offsetHeight - t.getBoundingClientRect().height - 35) + "px)"
                                };
                            case r.RIGHT_BOTTOM:
                                return {
                                    transform: "translate(" + (-o.tooltipContent.offsetWidth - 7) + "px, " + (9 - o.tooltipContent.offsetHeight) + "px)"
                                };
                            default:
                                return {}
                        }
                    }, o.handleOutsideClick = function(t) {
                        o.props.onClose && o.props.onClose(t)
                    };
                    var i = n.count++;
                    return o.wrapperId = "tooltip-wrapper-" + (o.props.name || i), o.id = "" + (o.props.tooltipId || "tooltip-" + i), o
                }
                var n;
                return l(e, t), n = e, e.prototype.componentWillReceiveProps = function(t) {
                    t.open ? window.addEventListener("click", this.handleOutsideClick) : window.removeEventListener("click", this.handleOutsideClick)
                }, e.prototype.render = function() {
                    var t, e = this,
                        n = this.props,
                        o = n.arrowPos,
                        a = n.title,
                        l = n.message,
                        u = n.onClose,
                        p = n.closeButton,
                        h = n.appendHTML,
                        d = n.appendBodyClass,
                        f = n.appendClass,
                        y = void 0 === o ? r.TOP_CENTER : o,
                        v = ((t = {
                            emulatedDialog: !0,
                            open: this.props.open,
                            dark: this.props.useDarkTheme
                        })[y] = !0, t);
                    return f && Object.keys(f).length > 0 && Object.assign(v, f), Object(i.h)("div", {
                        id: this.wrapperId,
                        class: s(v),
                        ref: function(t) {
                            return e.tooltipWrapper = t
                        }
                    }, Object(i.h)("div", {
                        id: this.id,
                        class: s("tooltip", d),
                        style: this.getContentPosition(),
                        ref: function(t) {
                            return e.tooltipContent = t
                        }
                    }, a && Object(i.h)("div", {
                        class: "title"
                    }, a), p && u && Object(i.h)(c.a, {
                        onClose: u
                    }), l, h))
                }, e.POPUP_OFFSET = 28, e.count = 0, e = n = u([a.b], e)
            }(i.Component)
        },
        253: function(t, e, n) {
            "use strict";
            n.d(e, "b", (function() {
                return r
            })), n.d(e, "a", (function() {
                return h
            }));
            var o, r, i = n(19),
                a = n(111),
                s = n(110),
                c = n(346),
                l = n(90),
                u = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                p = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                };
            ! function(t) {
                t[t.CLEAR = 0] = "CLEAR", t[t.PLAIN = 1] = "PLAIN", t[t.OVERLAY = 2] = "OVERLAY", t[t.PRIMARY = 3] = "PRIMARY", t[t.SOCIAL = 4] = "SOCIAL"
            }(r || (r = {}));
            var h = function(t) {
                function e(e) {
                    var n = t.call(this, e) || this;
                    return n.onClick = function(t) {
                        var e = n.props.buttonState;
                        e !== l.c.BUSY && e !== l.c.DISABLED && n.props.onClick(t)
                    }, n
                }
                return u(e, t), e.prototype.render = function() {
                    var t = this.props,
                        e = t.id,
                        n = t.tooltipMsg,
                        o = t.tooltipPosition,
                        a = t.tooltipPreformatted,
                        u = t.tooltipWidth,
                        p = t.dataValue,
                        h = t.buttonState,
                        d = t.buttonStyle,
                        f = t.appendClass,
                        y = t.children,
                        v = t.iconClass,
                        m = {
                            "button-disabled": h === l.c.DISABLED,
                            "button-dimmed": h === l.c.DIMMED,
                            "button-active": h === l.c.ACTIVE,
                            "button-busy": h === l.c.BUSY,
                            "icon-button-primary": d === r.PRIMARY,
                            "icon-button-overlay": d === r.OVERLAY,
                            "icon-button-plain": d === r.PLAIN,
                            "icon-button-social": d === r.SOCIAL
                        };
                    return f && Object.keys(f).length > 0 && Object.assign(m, f), n ? Object(i.h)("div", {
                        id: e,
                        type: "button",
                        "data-value": p,
                        "data-balloon": n,
                        "data-balloon-pos": o || c.b.DOWN,
                        "data-balloon-width": u,
                        "data-balloon-pre": !!a,
                        class: s("icon-button", m),
                        onClick: this.onClick
                    }, v && Object(i.h)("span", {
                        class: "icon " + v
                    }), y) : Object(i.h)("div", {
                        id: e,
                        type: "button",
                        "data-value": p,
                        class: s("icon-button", m),
                        onClick: this.onClick
                    }, v && Object(i.h)("span", {
                        class: "icon " + v
                    }), y)
                }, e = p([a.b], e)
            }(i.Component)
        },
        346: function(t, e, n) {
            "use strict";
            n.d(e, "b", (function() {
                return r
            })), n.d(e, "c", (function() {
                return i
            })), n.d(e, "a", (function() {
                return p
            }));
            var o, r, i, a = n(19),
                s = n(111),
                c = n(110),
                l = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                u = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                };
            ! function(t) {
                t.UP = "up", t.DOWN = "down", t.LEFT = "left", t.RIGHT = "right", t.UP_LEFT = "up-left", t.UP_RIGHT = "up-right", t.DOWN_LEFT = "down-left", t.DOWN_RIGHT = "down-right"
            }(r || (r = {})),
            function(t) {
                t.SMALL = "small", t.MEDIUM = "medium", t.LARGE = "large", t.XLARGE = "xlarge", t.FIT = "fit"
            }(i || (i = {}));
            var p = function(t) {
                function e() {
                    var e = t.call(this) || this;
                    return e.onClick = function(t) {
                        e.props.onClick && e.props.onClick(t), void 0 !== e.props.tooltipTimeout && window.setTimeout((function() {
                            e.setState({
                                tooltipEnabled: !1
                            })
                        }), e.props.tooltipTimeout)
                    }, e.onMouseEnter = function(t) {
                        e.enableTooltip(), e.adjustBalloonPosIfNeeded(t)
                    }, e.enableTooltip = function() {
                        e.setState({
                            tooltipEnabled: !0
                        })
                    }, e.state = {
                        currentPosition: null,
                        tooltipEnabled: !0
                    }, e
                }
                return l(e, t), e.prototype.render = function() {
                    var t = this.props,
                        e = t.children,
                        n = t.position,
                        o = t.content,
                        r = t.className,
                        i = t.tooltipWidth,
                        s = this.state,
                        l = s.currentPosition,
                        u = s.tooltipEnabled;
                    return Object(a.h)("div", {
                        type: "button",
                        "data-balloon": o,
                        "data-balloon-pos": l || n,
                        "data-balloon-width": i,
                        class: c("data-balloon", r, {
                            disabled: !u
                        }),
                        onClick: this.onClick,
                        onTouchStart: this.enableTooltip,
                        onMouseEnter: this.onMouseEnter
                    }, e)
                }, e.prototype.adjustBalloonPosIfNeeded = function(t) {
                    if (null === this.state.currentPosition) {
                        var e = t.target,
                            n = this.props.position,
                            o = n;
                        if (n !== r.LEFT && n !== r.RIGHT) {
                            var i = window.getComputedStyle(e, ":after"),
                                a = i.width ? parseInt(i.width, 10) : 0;
                            if (a > 0) {
                                var s = e.getBoundingClientRect(),
                                    c = (a - s.width) / 2,
                                    l = n === r.UP || n === r.UP_RIGHT || n === r.UP_LEFT;
                                s.left - c <= 0 ? o = l ? r.UP_RIGHT : r.DOWN_RIGHT : (n === r.UP_LEFT || n === r.DOWN_LEFT) && s.left - a <= 0 ? o = l ? r.UP : r.DOWN : s.right + c >= window.innerWidth ? o = l ? r.UP_LEFT : r.DOWN_LEFT : (n === r.UP_RIGHT || n === r.DOWN_RIGHT) && s.right + a >= window.innerWidth && (o = l ? r.UP : r.DOWN)
                            }
                        }
                        this.setState({
                            currentPosition: o
                        })
                    }
                }, e = u([s.b], e)
            }(a.Component)
        },
        496: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return o
            })), n.d(e, "b", (function() {
                return r
            }));
            var o = 16 / 9,
                r = 1 / o
        },
        498: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return u
            }));
            var o, r, i = n(19),
                a = n(111),
                s = n(110),
                c = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                l = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                };
            ! function(t) {
                t[t.OPEN = 0] = "OPEN", t[t.UNLOADING = 1] = "UNLOADING", t[t.CLOSED = 2] = "CLOSED"
            }(r || (r = {}));
            var u = function(t) {
                function e(e) {
                    var n = t.call(this, e) || this;
                    return n.onTransitionEnd = function() {
                        n.state.phase === r.UNLOADING && n.setState({
                            phase: r.CLOSED
                        })
                    }, n.onClick = function(t) {
                        n.props.onClick && n.props.onClick(t)
                    }, n.state = {
                        phase: e.open ? r.OPEN : r.CLOSED
                    }, n
                }
                return c(e, t), e.prototype.componentWillReceiveProps = function(t) {
                    !t.open && this.props.open ? this.setState({
                        phase: r.UNLOADING
                    }) : t.open && !this.props.open && this.setState({
                        phase: r.OPEN
                    })
                }, e.prototype.renderChildren = function() {
                    return this.state.phase !== r.CLOSED ? this.props.children : null
                }, e.prototype.render = function() {
                    var t = this.props,
                        e = t.id,
                        n = t.appendClass;
                    return Object(i.h)("div", {
                        id: e,
                        class: s(n),
                        onTransitionEnd: this.onTransitionEnd,
                        onClick: this.onClick
                    }, this.renderChildren())
                }, e = l([a.b], e)
            }(i.Component)
        },
        500: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return r
            }));
            var o = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                r = function() {
                    function t(t, e) {
                        this.settingsData = t, this.settings = e, this.cache = {}
                    }
                    return t.prototype.apply = function() {
                        var t, e;
                        this.cache = {};
                        try {
                            for (var n = o(Object.keys(this.settings)), r = n.next(); !r.done; r = n.next()) {
                                var i = r.value,
                                    a = this.settingsData.tryGetProperty(i, void 0);
                                a !== this.settings[i] && (this.cache[i] = a, this.settingsData.setProperty(i, this.settings[i]))
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                r && !r.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    }, t.prototype.reset = function() {
                        var t, e;
                        try {
                            for (var n = o(Object.keys(this.cache)), r = n.next(); !r.done; r = n.next()) {
                                var i = r.value,
                                    a = this.cache[i];
                                this.settingsData.setProperty(i, void 0 !== a && a)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                r && !r.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                        this.cache = {}
                    }, t.prototype.toggle = function(t) {
                        t ? this.apply() : this.reset()
                    }, t
                }()
        },
        505: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return l
            }));
            var o, r = n(19),
                i = n(110),
                a = n(111),
                s = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                c = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                l = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.onChange = function(t) {
                            n.setState((function(t) {
                                return {
                                    checkedValue: !t.checkedValue
                                }
                            }), (function() {
                                n.props.onChange && n.props.onChange(n.checkboxElement)
                            }))
                        }, n.setCheckboxRef = function(t) {
                            n.checkboxElement = t
                        }, n.state = {
                            checkedValue: e.checked
                        }, n
                    }
                    return s(e, t), e.prototype.componentWillReceiveProps = function(t) {
                        this.setState({
                            checkedValue: t.checked
                        })
                    }, e.prototype.render = function() {
                        var t = this.props,
                            e = t.id,
                            n = t.dataValue,
                            o = t.enabled,
                            a = t.error,
                            s = t.key,
                            c = t.helpText,
                            l = t.label,
                            u = this.state.checkedValue,
                            p = !o;
                        return Object(r.h)("div", {
                            ref: this.setCheckboxRef,
                            id: e,
                            "data-value": n,
                            class: i("checkbox-element", {
                                checked: u,
                                disabled: p,
                                error: a
                            }),
                            onClick: this.onChange,
                            key: s
                        }, Object(r.h)("div", {
                            class: "checkbox icon-check"
                        }), Object(r.h)("div", {
                            class: "checkbox-text"
                        }, l), c && Object(r.h)("span", {
                            className: "help-text"
                        }, c))
                    }, e.defaultProps = {
                        enabled: !0,
                        error: !1
                    }, e = c([a.b], e)
                }(r.Component)
        },
        518: function(t, e, n) {
            "use strict";
            var o;
            n.d(e, "d", (function() {
                return a
            })), n.d(e, "g", (function() {
                return s
            })), n.d(e, "f", (function() {
                return c
            })), n.d(e, "b", (function() {
                return r
            })), n.d(e, "a", (function() {
                return i
            })), n.d(e, "i", (function() {
                return u
            })), n.d(e, "h", (function() {
                return p
            })), n.d(e, "e", (function() {
                return h
            })), n.d(e, "c", (function() {
                return l
            })), n.d(e, "j", (function() {
                return d
            }));
            var r, i, a = 250,
                s = function() {
                    return {
                        wrapperLength: 1,
                        childLength: 1,
                        scrollOffset: 1,
                        isVisible: !1
                    }
                },
                c = function() {
                    return {
                        scrollbar: null,
                        animation: null,
                        dragStartScroll: 0
                    }
                };
            ! function(t) {
                t.horizontal = "horizontal", t.vertical = "vertical"
            }(r || (r = {})),
            function(t) {
                t.x = "x", t.y = "y"
            }(i || (i = {}));
            var l, u = function(t) {
                    switch (t) {
                        case r.horizontal:
                            return i.x;
                        case r.vertical:
                            return i.y
                    }
                    throw Error()
                },
                p = function(t) {
                    switch (t) {
                        case i.x:
                            return r.horizontal;
                        case i.y:
                            return r.vertical
                    }
                    throw Error()
                },
                h = ((o = {})[r.horizontal] = {
                    scrollOffset: "scrollLeft",
                    offsetLength: "offsetWidth",
                    clientLength: "clientWidth",
                    positionOffset: "offsetLeft",
                    lengthName: "width",
                    offsetName: "left",
                    eventPosition: "clientX",
                    delta: i.x
                }, o[r.vertical] = {
                    scrollOffset: "scrollTop",
                    offsetLength: "offsetHeight",
                    clientLength: "clientHeight",
                    positionOffset: "offsetTop",
                    lengthName: "height",
                    offsetName: "top",
                    eventPosition: "clientY",
                    delta: i.y
                }, o);
            ! function(t) {
                t.Beginning = "Beginning", t.Middle = "Middle", t.End = "End", t.None = "None"
            }(l || (l = {}));
            var d = function(t, e) {
                return e ? t < .01 ? l.Beginning : 1 - t < .01 ? l.End : l.Middle : l.None
            }
        },
        522: function(t, e, n) {
            "use strict";
            var o, r = n(19),
                i = n(518),
                a = n(585),
                s = n(552),
                c = n(586),
                l = n(553),
                u = n(94),
                p = (n(668), n(110)),
                h = n(146),
                d = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                f = function() {
                    return (f = Object.assign || function(t) {
                        for (var e, n = 1, o = arguments.length; n < o; n++)
                            for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
                        return t
                    }).apply(this, arguments)
                },
                y = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                };
            r.options.debounceRendering = requestAnimationFrame;
            var v = function(t) {
                function e(e) {
                    var n = t.call(this, e) || this;
                    return n.horizontal = Object(i.f)(), n.vertical = Object(i.f)(), n.manuallyMoved = !1, n.scrollPosition = {
                        horizontal: i.c.Beginning,
                        vertical: i.c.End
                    }, n.getScrollableContainer = function() {
                        return n.innerWrapper
                    }, n.getScrolledOffset = function(t) {
                        var e = i.e[t].scrollOffset;
                        return n.innerWrapper[e] / n.state[t].childLength
                    }, n.state = {
                        horizontal: Object(i.g)(),
                        vertical: Object(i.g)()
                    }, n.resizeSubscription = Object(h.c)(h.b.RESIZE, (function() {
                        return n.handleExternalChange(h.b.RESIZE)
                    })), n.scrollTo = n.scrollTo.bind(n), n.handlePressStart = n.handlePressStart.bind(n), n.handlePressMove = n.handlePressMove.bind(n), n.handleDragEnd = n.handleDragEnd.bind(n), n.handleDragStart = n.handleDragStart.bind(n), n.handleWheelEvent = n.handleWheelEvent.bind(n), n.handleClick = n.handleClick.bind(n), n.toggleVisibility = n.toggleVisibility.bind(n), n.hasManuallyMoved = n.hasManuallyMoved.bind(n), n.inputFilter = new l.a({
                        handlePressStart: n.handlePressStart,
                        handlePressMove: n.handlePressMove,
                        handleDragStart: n.handleDragStart,
                        handleDragEnd: n.handleDragEnd,
                        handleClick: n.handleClick
                    }), window.PointerEvent || (window.addEventListener("mousemove", n.inputFilter.handleEvent), window.addEventListener("mouseleave", n.inputFilter.handleEvent), window.addEventListener("mouseup", n.inputFilter.handleEvent)), window.addEventListener("pointermove", n.inputFilter.handleEvent), window.addEventListener("pointerup", n.inputFilter.handleEvent), window.addEventListener("touchmove", n.inputFilter.handleEvent), window.addEventListener("touchend", n.inputFilter.handleEvent), window.addEventListener("touchcancel", n.inputFilter.handleEvent), n
                }
                return d(e, t), e.prototype.componentDidMount = function() {
                    this.resizeSubscription.renew(), this.innerWrapper.addEventListener("wheel", this.handleWheelEvent, !0), this.props.scrollbarScrollingOnly ? this.innerWrapper.addEventListener("click", this.handleClick) : (this.innerWrapper.addEventListener("mousedown", this.inputFilter.handleEvent), this.innerWrapper.addEventListener("pointerdown", this.inputFilter.handleEvent), this.innerWrapper.addEventListener("touchstart", this.inputFilter.handleEvent)), this.firstChild = this.innerWrapper.firstElementChild, this.props.onScrollPositionChange && this.props.onScrollPositionChange(), this.props.hasOwnProperty("suppressDrag") && this.inputFilter.setEnabled(!!this.props.suppressDrag)
                }, e.prototype.componentWillUnmount = function() {
                    this.resizeSubscription.cancel(), window.PointerEvent || (window.removeEventListener("mousemove", this.inputFilter.handleEvent), window.removeEventListener("mouseleave", this.inputFilter.handleEvent), window.removeEventListener("mouseup", this.inputFilter.handleEvent)), window.removeEventListener("pointermove", this.inputFilter.handleEvent), window.removeEventListener("touchmove", this.inputFilter.handleEvent), window.removeEventListener("pointerup", this.inputFilter.handleEvent), window.removeEventListener("touchend", this.inputFilter.handleEvent), window.removeEventListener("touchcancel", this.inputFilter.handleEvent), this.innerWrapper.removeEventListener("wheel", this.handleWheelEvent, !0), this.props.scrollbarScrollingOnly ? this.innerWrapper.removeEventListener("click", this.handleClick) : (this.innerWrapper.removeEventListener("mousedown", this.inputFilter.handleEvent), this.innerWrapper.removeEventListener("pointerdown", this.inputFilter.handleEvent), this.innerWrapper.removeEventListener("touchstart", this.inputFilter.handleEvent))
                }, e.prototype.componentWillReceiveProps = function(t) {
                    t.suppressDrag !== this.props.suppressDrag && (this.inputFilter.setEnabled(!!this.props.suppressDrag), this.props.suppressDrag && (this.manuallyMoved = !1))
                }, e.prototype.getSnapshotBeforeUpdate = function() {
                    this.props.waitToUpdate || this.handleExternalChange()
                }, e.prototype.componentDidUpdate = function() {
                    var t = this;
                    if (this.horizontal.animation || this.vertical.animation) {
                        var e = {};
                        for (var n in this.state) {
                            var o = n;
                            this[o].animation && (this[o].animation.isAnimating ? e[Object(i.i)(o)] = this[o].animation.getUpdatedValue() : this[o].animation = null)
                        }
                        Object.keys(e).length > 0 && window.requestAnimationFrame((function() {
                            t.innerWrapper && t.scrollTo(e)
                        }))
                    }
                }, e.prototype.scrollTo = function(t) {
                    var e, n;
                    if (t.hasOwnProperty(i.a.x) || t.hasOwnProperty(i.a.y)) {
                        var o = {};
                        try {
                            for (var r = y(this.getVisibleAxes(t)), a = r.next(); !a.done; a = r.next()) {
                                var s = a.value,
                                    c = Object(i.h)(s),
                                    l = i.e[c].scrollOffset,
                                    u = t[s];
                                if (void 0 !== u) {
                                    if (isNaN(u)) return;
                                    this.innerWrapper[l] = Math.max(Math.min(1, u) * this.state[c].childLength, 0), o[c] = f({}, this.state[c], {
                                        scrollOffset: this.innerWrapper[l]
                                    })
                                }
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                a && !a.done && (n = r.return) && n.call(r)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        this.setState(o)
                    }
                }, e.prototype.animatedScrollTo = function(t, e) {
                    var n, o;
                    if (t.hasOwnProperty(i.a.x) || t.hasOwnProperty(i.a.y)) try {
                        for (var r = y(this.getVisibleAxes(t)), a = r.next(); !a.done; a = r.next()) {
                            var s = a.value,
                                l = Object(i.h)(s),
                                u = i.e[l].scrollOffset;
                            this[l].animation = new c.a({
                                duration: e || i.d,
                                startValue: this.innerWrapper[u] / this.state[l].childLength,
                                endValue: Math.max(0, Math.min(1, t[s]))
                            })
                        }
                    } catch (t) {
                        n = {
                            error: t
                        }
                    } finally {
                        try {
                            a && !a.done && (o = r.return) && o.call(r)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                }, e.prototype.setScrollCenter = function(t) {
                    var e, n;
                    if (t && t.compareDocumentPosition(this.innerWrapper) & Node.DOCUMENT_POSITION_CONTAINS) {
                        this.scrollCenter = t;
                        var o = {},
                            r = {};
                        try {
                            for (var a = y(this.getVisibleAxes(this.state)), s = a.next(); !s.done; s = a.next()) {
                                var c = s.value,
                                    l = Object(i.i)(c);
                                o[l] = t[i.e[c].positionOffset] + t[i.e[c].offsetLength] / 2;
                                for (var u = t; u.parentElement && u !== this.innerWrapper;) u = u.parentElement, o[l] += u[i.e[c].positionOffset];
                                var p = this.outerWrapper.parentElement[i.e[c].offsetLength];
                                r[l] = (o[l] - p / 2) / this.state[c].childLength
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                s && !s.done && (n = a.return) && n.call(a)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        Object.keys(r).length > 0 && this.animatedScrollTo(r)
                    }
                }, e.prototype.getVisibleAxes = function(t) {
                    var e = [];
                    for (var n in t)(t[n] || "number" == typeof t[n]) && (n in i.a && this.state[Object(i.h)(n)].isVisible ? e.push(n) : n in i.b && this.state[n].isVisible && e.push(n));
                    return e
                }, e.prototype.handleDragStart = function() {
                    delete this.scrollCenter, this.hasManuallyMoved()
                }, e.prototype.handlePressStart = function() {
                    this.horizontal.dragStartScroll = this.innerWrapper.scrollLeft, this.vertical.dragStartScroll = this.innerWrapper.scrollTop
                }, e.prototype.handlePressMove = function(t) {
                    var e, n, o = {};
                    try {
                        for (var r = y(this.getVisibleAxes(t)), a = r.next(); !a.done; a = r.next()) {
                            var s = a.value,
                                c = Object(i.h)(s);
                            o[s] = (t[s] + this[c].dragStartScroll) / this.state[c].childLength
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            a && !a.done && (n = r.return) && n.call(r)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                    this.scrollTo(o)
                }, e.prototype.handleWheelEvent = function(t) {
                    this.props.singleScrollDirection === i.b.horizontal && 0 === t.deltaX && 0 !== t.deltaY ? (this.handlePressStart(), this.handlePressMove({
                        x: t.deltaY,
                        y: 0
                    })) : (this.hasManuallyMoved(), this.handleExternalChange())
                }, e.prototype.handleClick = function(t) {
                    this.props.handleClick && this.props.handleClick(t)
                }, e.prototype.toggleVisibility = function(t) {
                    var e = this;
                    return function(n) {
                        var o = f({}, e.state[t], {
                            isVisible: n
                        });
                        if (Object(s.a)(e.state[t], o)) {
                            var r = {};
                            r[t] = o, e.setState(r), e.props.onScrollbarVisibilityChange && e.props.onScrollbarVisibilityChange()
                        }
                    }
                }, e.prototype.toggleScrollPosition = function(t) {
                    var e = this;
                    return function(n) {
                        e.scrollPosition[t] = n, e.props.onScrollPositionChange && e.props.onScrollPositionChange(n)
                    }
                }, e.prototype.handleDragEnd = function(t, e) {
                    var n, o;
                    try {
                        for (var r = y(this.getVisibleAxes(t)), a = r.next(); !a.done; a = r.next()) {
                            var s = a.value,
                                l = Object(i.h)(s),
                                p = t[s] / e,
                                h = Math.min(i.d, Math.abs(i.d * p)),
                                d = this.innerWrapper[i.e[l].scrollOffset],
                                f = p * h / 2;
                            this[l].animation = new c.a({
                                duration: h,
                                startValue: d / this.state[l].childLength,
                                endValue: Math.max(0, Math.min((d + f) / this.state[l].childLength, 1)),
                                easingFunction: u.h
                            })
                        }
                    } catch (t) {
                        n = {
                            error: t
                        }
                    } finally {
                        try {
                            a && !a.done && (o = r.return) && o.call(r)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                    this.setState({})
                }, e.prototype.handleExternalChange = function(t) {
                    this.scrollCenter && t && t === h.b.RESIZE && this.setScrollCenter(this.scrollCenter);
                    var e = {};
                    for (var n in this.state) {
                        var o = n,
                            r = i.e[o].clientLength,
                            a = f({}, this.state[o], {
                                wrapperLength: Number(this.innerWrapper && this.innerWrapper[r]) || 1,
                                childLength: Number(this.firstChild && this.firstChild[r]) || 1,
                                scrollOffset: this.innerWrapper && this.innerWrapper[i.e[o].scrollOffset]
                            });
                        Object(s.a)(this.state[o], a) && (e[o] = a)
                    }
                    Object.keys(e).length > 0 && this.setState(e)
                }, e.prototype.hasManuallyMoved = function() {
                    this.manuallyMoved = !0, this.props.onScrolled && this.props.onScrolled()
                }, e.prototype.resetManuallyMoved = function() {
                    this.manuallyMoved = !1
                }, e.prototype.render = function() {
                    var t = this,
                        e = {
                            "max-height": this.props.scrollbarHeight ? this.props.scrollbarHeight : ""
                        };
                    return Object(r.h)("div", {
                        class: p("outerScrollbarWrapper", this.props.singleScrollDirection + "Only", "scrollbar-" + this.props.name),
                        ref: function(e) {
                            t.outerWrapper = e
                        },
                        style: e
                    }, Object(r.h)("div", {
                        class: "innerScrollbarWrapper",
                        ref: function(e) {
                            t.innerWrapper = e
                        }
                    }, Object(r.h)("div", {
                        class: "paddingScrollbarWrapper"
                    }, this.props.children)), this.props.singleScrollDirection !== i.b.vertical && Object(r.h)(a.a, {
                        direction: i.b.horizontal,
                        ref: function(e) {
                            t.horizontal.scrollbar = e
                        },
                        wrapperLength: this.state.horizontal.wrapperLength,
                        childLength: this.state.horizontal.childLength,
                        scrollOffset: this.state.horizontal.scrollOffset,
                        scrollTo: this.scrollTo,
                        onVisibilityChange: this.toggleVisibility(i.b.horizontal),
                        onScrollPositionChange: this.toggleScrollPosition(i.b.horizontal),
                        forceHidden: this.props.forceHidden,
                        onThumbDrag: this.hasManuallyMoved
                    }), this.props.singleScrollDirection !== i.b.horizontal && Object(r.h)(a.a, {
                        direction: i.b.vertical,
                        ref: function(e) {
                            t.vertical.scrollbar = e
                        },
                        wrapperLength: this.state.vertical.wrapperLength,
                        childLength: this.state.vertical.childLength,
                        scrollOffset: this.state.vertical.scrollOffset,
                        scrollTo: this.scrollTo,
                        onVisibilityChange: this.toggleVisibility(i.b.vertical),
                        onScrollPositionChange: this.toggleScrollPosition(i.b.vertical),
                        forceHidden: this.props.forceHidden,
                        onThumbDrag: this.hasManuallyMoved
                    }))
                }, e
            }(r.Component);
            e.a = v
        },
        524: function(t, e, n) {
            "use strict";
            var o;
            n.d(e, "a", (function() {
                    return o
                })), n.d(e, "b", (function() {
                    return r
                })),
                function(t) {
                    t.terms = "terms", t.titleBar = "titleBar", t.vrSelect = "vrSelect", t.webVr = "webVr", t.mattertag = "mattertag", t.help = "help", t.cta = "cta", t.mattertagEmbLink = "mattertagEmbLink", t.measurementMode = "measurementMode", t.measurementModeHelp = "measurementModeHelp", t.share = "share"
                }(o || (o = {}));
            var r = [o.cta, o.titleBar]
        },
        526: function(t, e, n) {
            "use strict";
            var o, r = n(19),
                i = n(110),
                a = n(91),
                s = n(111),
                c = n(522),
                l = n(518),
                u = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                p = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                h = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.textInput = null, n.onInput = function(t) {
                            var e = t.target.value;
                            n.setState({
                                currentText: e
                            }), n.props.onInput && n.props.onInput(e)
                        }, n.getRef = function(t) {
                            n.textInput = t
                        }, n.state = {
                            editing: !1,
                            currentText: n.props.text
                        }, n.startEditing = n.startEditing.bind(n), n.onKeyPress = n.onKeyPress.bind(n), n.stopEditing = n.stopEditing.bind(n), n.handleOutsideClick = n.handleOutsideClick.bind(n), n
                    }
                    return u(e, t), e.prototype.componentDidMount = function() {
                        this.textInput && (this.textInput.addEventListener("keypress", (function(t) {
                            return t.stopPropagation()
                        })), this.textInput.addEventListener("keydown", (function(t) {
                            return t.stopPropagation()
                        })), this.textInput.addEventListener("keyup", (function(t) {
                            return t.stopPropagation()
                        })), this.props.closeOnFocusOut && this.textInput.addEventListener("focusout", this.handleOutsideClick), (this.props.editing || this.props.autofocus) && this.startEditing())
                    }, e.prototype.componentWillReceiveProps = function(t) {
                        t.editing && !this.props.editing && this.startEditing(), t.text !== this.props.text && this.setState({
                            currentText: t.text || t.defaultText
                        })
                    }, e.prototype.handleOutsideClick = function(t) {
                        if (this.state.editing && this.textInput) {
                            var e = this.textInput.value || this.props.defaultText;
                            this.stopEditing(e, !0)
                        }
                    }, e.prototype.stopEditing = function(t, e) {
                        void 0 === e && (e = !0), this.setState({
                            editing: !1
                        }), e && this.props.text !== t ? (this.setState({
                            currentText: t
                        }), this.props.onEdited && this.props.onEdited(t)) : this.props.onCancelEditing && this.props.onCancelEditing()
                    }, e.prototype.getCurrentText = function() {
                        return this.state.currentText
                    }, e.prototype.stopPropagation = function(t) {
                        t.stopPropagation()
                    }, e.prototype.startEditing = function(t) {
                        this.textInput && (t && t.stopPropagation(), this.setState({
                            editing: !0
                        }), this.props.onStartEditing && this.props.onStartEditing(), this.textInput.focus(), this.props.defaultText && this.textInput.select && this.state.currentText === this.props.defaultText && this.textInput.select())
                    }, e.prototype.onKeyPress = function(t) {
                        if (!this.props.onKeyPress || !this.props.onKeyPress(t)) {
                            t.stopPropagation();
                            var e = t.which || t.keyCode;
                            if ("keydown" !== t.type || e === a.a.TAB) {
                                var n = t.target.value || this.props.defaultText;
                                e !== a.a.RETURN && e !== a.a.TAB || t.shiftKey || (t.preventDefault(), this.setState({
                                    editing: !1
                                }), this.props.onEdited && this.props.onEdited(n))
                            }
                        }
                    }, e.prototype.componentDidUpdate = function(t, e) {
                        !e.editing && this.state.editing && this.textInput && this.textInput.focus()
                    }, e.prototype.getFractionalCounter = function() {
                        if (this.props.maxLength && this.props.fractionalCounter) return this.state.currentText.length + "/" + this.props.maxLength
                    }, e.prototype.render = function() {
                        var t = this.state,
                            e = t.editing,
                            n = t.currentText,
                            o = this.props,
                            a = o.appendClass,
                            s = o.hint,
                            u = o.isDisabled,
                            p = o.placeholder,
                            h = o.maxLength,
                            d = o.tabIndex,
                            f = o.textarea,
                            y = o.readOnlyText,
                            v = o.fractionalCounter,
                            m = o.showUnderline,
                            g = o.className || "",
                            b = {
                                inputDiv: !0,
                                editing: e
                            };
                        a && Object.keys(a).length > 0 && Object.assign(b, a);
                        var w = {
                                ref: this.getRef,
                                class: i(b),
                                type: "text",
                                value: n,
                                placeholder: p,
                                maxLength: h,
                                onInput: this.onInput,
                                onClick: this.props.propagateMouseEvent ? void 0 : this.stopPropagation,
                                onKeyPress: this.onKeyPress,
                                disabled: u,
                                readonly: this.props.readOnlyMode,
                                onKeyDown: this.onKeyPress,
                                tabIndex: d
                            },
                            O = Object(r.h)("div", {
                                class: i("current-text", {
                                    "has-hint": !!s,
                                    "has-placeholder": !n
                                }),
                                "data-hint": s || void 0,
                                onClick: this.startEditing
                            }, n || p || "");
                        return Object(r.h)("div", {
                            class: i("modifiable-text", "" + g, {
                                editing: e,
                                "fractional-counter": v,
                                default: !n
                            }),
                            "data-fractional-counter": this.getFractionalCounter()
                        }, f ? Object(r.h)(c.a, {
                            name: "text-input",
                            singleScrollDirection: l.b.vertical,
                            forceHidden: !1
                        }, O) : O, Object(r.h)(f ? "textarea" : "input", w), y && Object(r.h)("div", {
                            class: "read-only-text"
                        }, y), m && Object(r.h)("div", {
                            class: "editable-line"
                        }))
                    }, e = p([s.b], e)
                }(r.Component);
            e.a = h
        },
        529: function(t, e, n) {
            "use strict";
            n.d(e, "h", (function() {
                return a
            })), n.d(e, "e", (function() {
                return s
            })), n.d(e, "d", (function() {
                return c
            })), n.d(e, "a", (function() {
                return l
            })), n.d(e, "c", (function() {
                return u
            })), n.d(e, "j", (function() {
                return p
            })), n.d(e, "b", (function() {
                return h
            })), n.d(e, "g", (function() {
                return d
            })), n.d(e, "i", (function() {
                return f
            })), n.d(e, "f", (function() {
                return y
            }));
            var o = n(63),
                r = n(1),
                i = .25,
                a = function(t) {
                    return function(e) {
                        return e !== t
                    }
                },
                s = function(t) {
                    return function(e) {
                        return -1 !== t.neighbours.indexOf(e.id)
                    }
                },
                c = function(t) {
                    return function(e) {
                        return t === e || s(t)(e)
                    }
                },
                l = function(t, e, n) {
                    void 0 === n && (n = i);
                    var o = new r.a;
                    return function(r) {
                        return o.copy(r.position).sub(t).normalize().dot(e) > n
                    }
                },
                u = function() {
                    return function(t) {
                        return t.enabled
                    }
                },
                p = function(t) {
                    return t.placementType === o.b.MANUAL
                },
                h = function() {
                    return function(t) {
                        return t.alignmentType === o.a.ALIGNED
                    }
                },
                d = function() {
                    return function(t) {
                        return t.alignmentType !== o.a.ALIGNED
                    }
                },
                f = function(t) {
                    return function(e) {
                        return t.floor === e.floor
                    }
                },
                y = function(t, e) {
                    var n = new r.a;
                    return e = e.clone(),
                        function(o) {
                            return n.copy(o.position).sub(t).normalize().dot(e) > 0
                        }
                }
        },
        532: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return l
            }));
            var o, r = n(25),
                i = n(1),
                a = n(37),
                s = n(97),
                c = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                l = function(t) {
                    function e(e, n) {
                        var o = t.call(this) || this;
                        return o.name = "model", o.opacity = new s.a(e), o.bounds = n, n && (o.center = o.bounds.getCenter(new i.a), o.size = o.bounds.getSize(new i.a)), o
                    }
                    return c(e, t), e.prototype.copy = function(t) {
                        this.opacity.copy(t.opacity), this.bounds = new a.a(t.bounds.min, t.bounds.max), this.center = this.bounds.getCenter(new i.a), this.size = this.bounds.getSize(new i.a)
                    }, e
                }(r.a)
        },
        533: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return o
            }));
            var o = function(t) {
                return t.innerWidth < 487 || t.innerHeight < 487
            }
        },
        539: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return a
            }));
            var o, r = n(559),
                i = function() {
                    return (i = Object.assign || function(t) {
                        for (var e, n = 1, o = arguments.length; n < o; n++)
                            for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
                        return t
                    }).apply(this, arguments)
                };
            ! function(t) {
                t[t.SELECTED = 1] = "SELECTED", t[t.HIDE = 2] = "HIDE", t[t.SHOW = 3] = "SHOW"
            }(o || (o = {}));
            var a = i({}, r.a, o)
        },
        540: function(t, e, n) {
            "use strict";
            n.d(e, "b", (function() {
                return b
            })), n.d(e, "a", (function() {
                return w
            })), n.d(e, "g", (function() {
                return O
            })), n.d(e, "c", (function() {
                return S
            })), n.d(e, "f", (function() {
                return x
            })), n.d(e, "e", (function() {
                return P
            })), n.d(e, "d", (function() {
                return _
            })), n.d(e, "i", (function() {
                return T
            })), n.d(e, "h", (function() {
                return k
            }));
            var o, r, i, a, s, c, l, u, p, h = n(144),
                d = n(1),
                f = n(7),
                y = n(16),
                v = n(598),
                m = n(575),
                g = n(14),
                b = 512,
                w = 6,
                O = function(t, e, n, o, r, i, a, s) {
                    var c = t / e,
                        l = 2 * (e / t),
                        u = l / 2,
                        p = 2 * (o / c) - 1 + u,
                        d = 2 * ((r = c - 1 - r) / c) - 1 + u;
                    switch (i = i || v.a.Center) {
                        case v.a.UpperLeft:
                            p -= u, d += u, p += a * l;
                            break;
                        case v.a.UpperRight:
                            p += u, d += u, d -= a * l;
                            break;
                        case v.a.LowerRight:
                            p += u, d -= u, p -= a * l;
                            break;
                        case v.a.LowerLeft:
                            p -= u, d -= u, d += a * l;
                            break;
                        case v.a.Center:
                    }
                    switch (n) {
                        case h.a.GL_TEXTURE_CUBE_MAP_POSITIVE_X:
                            s.set(-1, d, -p);
                            break;
                        case h.a.GL_TEXTURE_CUBE_MAP_NEGATIVE_X:
                            s.set(1, d, p);
                            break;
                        case h.a.GL_TEXTURE_CUBE_MAP_POSITIVE_Y:
                            s.set(-p, 1, -d);
                            break;
                        case h.a.GL_TEXTURE_CUBE_MAP_NEGATIVE_Y:
                            s.set(-p, -1, d);
                            break;
                        case h.a.GL_TEXTURE_CUBE_MAP_POSITIVE_Z:
                            s.set(-p, d, 1);
                            break;
                        case h.a.GL_TEXTURE_CUBE_MAP_NEGATIVE_Z:
                            s.set(p, d, -1)
                    }
                    s.normalize()
                },
                S = function(t, e) {
                    var n = b;
                    t < b && (n = t);
                    var o = Math.floor(t / n),
                        r = o * o;
                    return Math.floor(e / r)
                },
                x = function(t, e, n) {
                    var o = b;
                    t < b && (o = t);
                    var r = S(t, e),
                        i = Math.floor(t / o),
                        a = e - r * (i * i);
                    n.tileX = a % i, n.tileY = Math.floor(a / i), n.face = r, n.faceTileIndex = a
                },
                P = function(t) {
                    if (t <= b) return w;
                    var e = Math.floor(t / b);
                    return e * e * w
                },
                _ = (o = new f.a, r = new y.a, function(t, e) {
                    r.copy(t), r.inverse(), o.makeRotationFromQuaternion(r), e.applyMatrix4(o), e.normalize()
                }),
                T = (a = new d.a, s = new d.a(0, 0, -1), c = new y.a, l = function(t, e) {
                    t.push({
                        face: e.face,
                        faceTileIndex: e.faceTileIndex,
                        tileX: e.tileX,
                        tileY: e.tileY
                    })
                }, i = {
                    face: -1,
                    faceTileIndex: -1,
                    tileX: -1,
                    tileY: -1
                }, u = function(t, e, n) {
                    for (var o = P(t), r = 0, a = 0; a < o; a++) x(t, a, i), e && !e(i) || (r++, n && l(n, i));
                    return r
                }, function(t, e, n, o, r, i, l) {
                    void 0 === r && (r = !1), o.length = r ? 0 : o.length;
                    var p = e < b ? e : b;
                    if (!i && !l) return u(e, null, o);
                    var h = !!l;
                    i = i || 0, l = l || i, l = Math.max(0, Math.min(l, 360)), i = Math.max(0, Math.min(i, 360)), a.copy(n);
                    var d = t.rotation || new y.a;
                    return _(d, a), h ? (c.setFromUnitVectors(a, s), u(e, (function(t) {
                        return D(e, p, t.face, t.tileX, t.tileY, c, i || 0, l || 0)
                    }), o)) : u(e, (function(t) {
                        return k(e, p, t.face, t.tileX, t.tileY, a, i || 0)
                    }), o)
                }),
                D = (p = new d.a, function(t, e, n, o, r, i, a, s) {
                    for (var c = Math.tan(.5 * s * g.b), l = -c, u = Math.tan(.5 * a * g.b), h = -u, d = Object(m.a)(n), f = 0, y = 0, b = 0, w = 0, S = 0, x = v.a.Center; x <= v.a.LowerLeft; x++)
                        if (O(t, e, d, o, r, x, 0, p), p.applyQuaternion(i), !(p.z >= -1e-5)) {
                            var P = -1 / p.z,
                                _ = p.x * P,
                                T = p.y * P;
                            T > c ? f++ : T < l && y++, _ > u ? b++ : _ < h && w++, S++
                        }
                    return y !== S && f !== S && b !== S && w !== S
                }),
                k = function() {
                    var t = new d.a,
                        e = new d.a(0, 1, 0),
                        n = new d.a(1, 0, 0);
                    return function(o, r, i, a, s, c, l) {
                        var u = Object(m.a)(i);
                        if (n.copy(c).cross(e), O(o, r, u, a, s, v.a.Center, 0, t), M(t, c, l)) return !0;
                        for (var p = l / 360, h = Math.floor(1 / p), d = 0, f = 0; f < h; f++) {
                            for (var y = v.a.UpperLeft; y <= v.a.LowerLeft; y++)
                                if (O(o, r, u, a, s, y, d, t), M(t, c, l)) return !0;
                            d += p
                        }
                        return !1
                    }
                }(),
                M = function() {
                    var t = new d.a,
                        e = new d.a;
                    return function(n, o, r, i) {
                        if (e.copy(n), i) {
                            t.copy(i), t.normalize();
                            var a = t.dot(n);
                            t.x *= a, t.y *= a, t.z *= a, e.sub(t)
                        }
                        var s = r / 2 * g.b,
                            c = Math.cos(s);
                        return e.dot(o) >= c
                    }
                }()
        },
        541: function(t, e, n) {
            "use strict";
            n.d(e, "d", (function() {
                return s
            })), n.d(e, "c", (function() {
                return c
            })), n.d(e, "b", (function() {
                return l
            })), n.d(e, "a", (function() {
                return u
            }));
            var o = n(1),
                r = -1,
                i = 10,
                a = 5,
                s = function(t, e) {
                    return void 0 === e && (e = r),
                        function(n) {
                            return t.distanceToSquared(n.position) * e
                        }
                },
                c = function(t, e) {
                    return void 0 === e && (e = r),
                        function(n) {
                            return t.distanceTo(n.position) * e
                        }
                },
                l = function(t, e, n) {
                    void 0 === n && (n = i);
                    var r = new o.a;
                    return function(o) {
                        return r.copy(o.position).sub(t).normalize().dot(e) * n
                    }
                },
                u = function(t, e) {
                    return void 0 === e && (e = a),
                        function(e) {
                            return t === e.floor ? a : 0
                        }
                }
        },
        542: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return a
            }));
            var o, r = n(21),
                i = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                a = function(t) {
                    function e(e) {
                        var n = t.call(this) || this;
                        return n.id = "SET_MESH_OPACITY", n.payload = {
                            value: e
                        }, n
                    }
                    return i(e, t), e
                }(r.a)
        },
        543: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return a
            }));
            var o, r = n(29),
                i = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                a = function(t) {
                    function e(e, n) {
                        return t.call(this, e, n) || this
                    }
                    return i(e, t), e
                }(r.a)
        },
        548: function(t, e, n) {
            "use strict";
            n.d(e, "b", (function() {
                return y
            })), n.d(e, "a", (function() {
                return v
            }));
            var o, r = n(25),
                i = n(97),
                a = n(21),
                s = n(529),
                c = n(81),
                l = n(539),
                u = n(40),
                p = n(115),
                h = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                d = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                f = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.visible = !0, e.selected = new i.a(0), e
                    }
                    return h(e, t), e
                }(u.a),
                y = function(t) {
                    function e(e, n) {
                        var o = t.call(this) || this;
                        return o.sweepId = e, o.visible = n, o.payload = {
                            sweepId: e,
                            visible: n
                        }, o
                    }
                    return h(e, t), e
                }(a.a),
                v = function(t) {
                    function e(e, n) {
                        var o, r, i = t.call(this) || this;
                        if (i.data = e, i.name = "sweeps-view", i.states = new p.a, i.sweepIdList = [], i.sweepMap = {}, i.makeViewData = void 0, i.sweepInteractionMap = {}, i.derivedData = {}, i.selectedSweep = new c.a(null), i.hoveredSweep = new c.a(null), n) try {
                            for (var a = d(n), s = a.next(); !s.done; s = a.next()) {
                                var l = s.value,
                                    u = new f;
                                i.states.set(l.id, u), u.commit()
                            }
                        } catch (t) {
                            o = {
                                error: t
                            }
                        } finally {
                            try {
                                s && !s.done && (r = a.return) && r.call(a)
                            } finally {
                                if (o) throw o.error
                            }
                        }
                        return i
                    }
                    return h(e, t), e.prototype.getSweep = function(t) {
                        return this.data.getSweep(t)
                    }, e.prototype.setViewDataFactory = function(t) {
                        this.makeViewData = t
                    }, e.prototype.getViewData = function(t) {
                        var e = this.data.getSweep(t),
                            n = this.derivedData[t];
                        return e && !n && this.makeViewData && (this.derivedData[t] = this.makeViewData(e, e.index)), this.derivedData[t]
                    }, e.prototype.iterate = function(t) {
                        this.data.iterate(t)
                    }, e.prototype.getState = function(t) {
                        return this.states.get(t)
                    }, e.prototype.isVisible = function(t) {
                        return this.states.get(t).visible
                    }, e.prototype.setVisible = function(t, e) {
                        var n = this.getState(t);
                        n.visible = e, n.commit()
                    }, e.prototype.updateAnimations = function(t) {
                        var e, n;
                        try {
                            for (var o = d(this.states), r = o.next(); !r.done; r = o.next()) {
                                r.value.selected.tick(t)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                r && !r.done && (n = o.return) && n.call(o)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                    }, e.prototype.modifySelectAnimation = function(t, e) {
                        var n = this.getState(t).selected;
                        1 === n.endValue ? n.modifyAnimation(n.value, 0, e) : n.modifyAnimation(0, 1, e)
                    }, e.prototype.setSweepInteraction = function(t, e) {
                        this.sweepInteractionMap[t].interaction = e, this.commit()
                    }, e.prototype.getIndexByAlignment = function(t, e) {
                        return this.getAlignedSweeps(t).findIndex((function(t) {
                            return t.id === e
                        }))
                    }, e.prototype.getAlignedSweeps = function(t) {
                        var e = this,
                            n = this.sweepIdList.map((function(t) {
                                return e.getViewData(t)
                            }));
                        return t ? n.filter(Object(s.b)()) : n.filter(Object(s.g)())
                    }, e.prototype.unselectAllSweeps = function() {
                        var t, e;
                        try {
                            for (var n = d(this.sweepIdList), o = n.next(); !o.done; o = n.next()) {
                                var r = o.value;
                                this.sweepInteractionMap[r].interaction = l.a.NONE
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                        this.commit()
                    }, e
                }(r.a)
        },
        549: function(t, e, n) {
            "use strict";
            var o, r, i = n(172),
                a = n(41),
                s = n(3),
                c = n(67),
                l = n(27),
                u = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                p = new s.a("api"),
                h = ((o = {})[c.d.BASE] = "low", o[c.d.STANDARD] = "high", o[c.d.HIGH] = "2k", o[c.d.ULTRAHIGH] = "4k", o),
                d = ((r = {})[c.d.BASE] = 256, r[c.d.STANDARD] = 1024, r[c.d.HIGH] = 2048, r[c.d.ULTRAHIGH] = 4096, r),
                f = function() {
                    function t(t) {
                        this.urls = t, this.sweepCubeTextures = {}
                    }
                    return t.prototype.useTexture = function(t) {
                        var e = this.getTexture(t);
                        if (!e) throw Error("Texture for sweep " + t + " not loaded before using");
                        return e
                    }, t.prototype.loadFace = function(t, e, n, o) {
                        return this.loadFaceImage(t, e, n, o).then((function(t) {
                            var e = new a.a(t);
                            return e.needsUpdate = !0, e
                        }))
                    }, t.prototype.load = function(t, e) {
                        var n = this;
                        void 0 === e && (e = c.d.STANDARD);
                        var o = this.sweepCubeTextures[t];
                        if (o) return p.debug("Skipping load of pano, already loaded"), new Promise((function(t, e) {
                            t(o)
                        }));
                        var r = [2, 4, 0, 5, 1, 3].map((function(o) {
                                return n.loadFaceImage(t, e, o)
                            })),
                            a = Promise.all(r).then((function(e) {
                                var o = new i.a(e);
                                return o.flipY = !1, o.needsUpdate = !0, n.sweepCubeTextures[t] = o, o
                            }));
                        return a.catch((function() {
                            p.error("Downloading cubemap for pano", t, "failed")
                        })), a
                    }, t.prototype.unload = function(t) {
                        var e = this.sweepCubeTextures[t];
                        if (!e) throw Error("Texture for sweep " + t + " not loaded before unloading");
                        e.dispose(), this.sweepCubeTextures[t] = null
                    }, t.prototype.unloadAll = function(t) {
                        var e, n, o = Object(l.b)(t);
                        try {
                            for (var r = u(Object.keys(this.sweepCubeTextures)), i = r.next(); !i.done; i = r.next()) {
                                var a = i.value;
                                this.sweepCubeTextures[a] && !o[a] && this.unload(a)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                i && !i.done && (n = r.return) && n.call(r)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                    }, t.prototype.loadFaceImage = function(t, e, n, o) {
                        var r = h[e],
                            i = d[e],
                            a = "pan/" + r + "/" + t + "_skybox" + n + ".jpg";
                        return this.urls.getImageBitmap(a, i, i, o)
                    }, t.prototype.getTexture = function(t) {
                        return this.sweepCubeTextures[t]
                    }, t
                }();
            e.a = f
        },
        552: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return o
            }));
            var o = function(t, e) {
                for (var n in e)
                    if (t[n] !== e[n]) return !0;
                return !1
            }
        },
        553: function(t, e, n) {
            "use strict";
            var o = n(318),
                r = n(579),
                i = function() {
                    function t(t) {
                        this.shouldHandleEvents = !0, this.callbacks = t, this.handleEvent = this.handleEvent.bind(this)
                    }
                    return t.prototype.handleEvent = function(t) {
                        if (this.shouldHandleEvents) switch (t.stopPropagation(), t.type) {
                            case "mousedown":
                            case "touchstart":
                            case "pointerdown":
                                this.onPressStart(t);
                                break;
                            case "mousemove":
                            case "pointermove":
                            case "touchmove":
                                this.onPressMove(t);
                                break;
                            case "mouseup":
                            case "pointerup":
                            case "mouseleave":
                            case "touchend":
                            case "touchcancel":
                            case "pointercancel":
                            case "pointerleave":
                                this.onPressEnd(t)
                        }
                    }, t.prototype.setEnabled = function(t) {
                        this.shouldHandleEvents = t, this.couldBeDrag = this.couldBeDrag && t
                    }, t.prototype.getPosition = function(t) {
                        return Object(o.b)(t) ? {
                            x: t.changedTouches[0].clientX,
                            y: t.changedTouches[0].clientY
                        } : {
                            x: t.clientX,
                            y: t.clientY
                        }
                    }, t.prototype.onPressStart = function(t) {
                        this.couldBeDrag = !0, this.dragEvents = [], this.dragStart = this.getPosition(t), this.callbacks.handlePressStart && this.callbacks.handlePressStart(this.getPosition(t))
                    }, t.prototype.onPressMove = function(t) {
                        if (this.couldBeDrag) {
                            var e = this.getPosition(t);
                            this.addDragEvent(e), this.isDragging || Math.sqrt(Math.pow(e.x - this.dragStart.x, 2) + Math.pow(e.y - this.dragStart.y, 2)) > r.f && (this.isDragging = !0, this.callbacks.handleDragStart && this.callbacks.handleDragStart()), this.callbacks.handlePressMove && this.callbacks.handlePressMove({
                                x: this.dragStart.x - e.x,
                                y: this.dragStart.y - e.y
                            })
                        }
                    }, t.prototype.onPressEnd = function(t) {
                        if (this.couldBeDrag) {
                            if (this.couldBeDrag = !1, this.isDragging) {
                                if (!this.dragEvents || !this.dragEvents[0]) return;
                                var e = this.dragEvents[0],
                                    n = this.dragEvents[this.dragEvents.length - 1];
                                if (this.callbacks.handleDragEnd) {
                                    var o = {
                                        x: 0,
                                        y: 0
                                    };
                                    Date.now() - n.timestamp < 100 && (o.x = e.position.x - n.position.x, o.y = e.position.y - n.position.y), this.callbacks.handleDragEnd(o, n.timestamp - e.timestamp)
                                }
                            } else this.callbacks.handleClick && this.callbacks.handleClick(t);
                            this.isDragging = !1
                        }
                    }, t.prototype.addDragEvent = function(t) {
                        this.dragEvents.push({
                            position: t,
                            timestamp: Date.now()
                        }), this.dragEvents.length > 10 && this.dragEvents.shift()
                    }, t
                }();
            e.a = i
        },
        554: function(t, e, n) {},
        555: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return s
            }));
            var o, r = n(19),
                i = n(23),
                a = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                s = function(t) {
                    function e(n) {
                        var o, r = t.call(this, n) || this;
                        return r.eventsToSend = ((o = {})[e.SendEvent.HOVER] = !1, o[e.SendEvent.CLICK] = !1, o[e.SendEvent.BUTTON] = !1, o), r.onHoverEvent = function(t) {
                            switch (t.type) {
                                case "mousemove":
                                    r.props.onMouseMove && r.props.onMouseMove(t);
                                    break;
                                case "mouseenter":
                                    r.props.onMouseEnter && r.props.onMouseEnter(t);
                                    break;
                                case "mouseleave":
                                    r.props.onMouseLeave && r.props.onMouseLeave(t);
                                    break;
                                case "pointermove":
                                    r.props.onMouseMove && r.props.onMouseMove(t);
                                    break;
                                case "pointerenter":
                                    r.props.onMouseEnter && r.props.onMouseEnter(t);
                                    break;
                                case "pointerleave":
                                    r.props.onMouseLeave && r.props.onMouseLeave(t)
                            }
                            r.eventsToSend[e.SendEvent.HOVER] && r.isValidTarget(t.target) && r.sendEventThrough(t.type, t)
                        }, r.isValidTarget = function(t) {
                            return t === r.mouseThroughElement || r.props.includeChildrenEvents && t.compareDocumentPosition(r.mouseThroughElement) & Node.DOCUMENT_POSITION_CONTAINS
                        }, r.onClick = function(t) {
                            r.props.onClick && r.props.onClick(t), r.eventsToSend[e.SendEvent.CLICK] && r.isValidTarget(t.target) && (r.sendEventThrough("mousedown", t), window.setTimeout((function() {
                                return r.sendEventThrough("mouseup", t)
                            }), 0))
                        }, r.onButtonEvent = function(t) {
                            r.eventsToSend[e.SendEvent.BUTTON] && r.isValidTarget(t.target) && r.sendEventThrough(t.type, t)
                        }, r.onClick = r.onClick.bind(r), r.target = n.clickTarget || document.getElementsByTagName("canvas")[0], r.registerEvents(), r
                    }
                    return a(e, t), e.prototype.componentWillReceiveProps = function(t) {
                        Object(i.b)(this.props.sendEvents, t.sendEvents) && this.registerEvents()
                    }, e.prototype.render = function() {
                        var t = this;
                        return Object(r.h)("div", {
                            id: this.props.id,
                            ref: function(e) {
                                return t.mouseThroughElement = e
                            },
                            style: this.props.style || {},
                            class: this.props.className,
                            onMouseEnter: this.onHoverEvent,
                            onMouseLeave: this.onHoverEvent,
                            onMouseMove: this.onHoverEvent,
                            onPointerEnter: this.onHoverEvent,
                            onPointerLeave: this.onHoverEvent,
                            onPointerMove: this.onHoverEvent,
                            onMouseDown: this.onButtonEvent,
                            onMouseUp: this.onButtonEvent,
                            onPointerDown: this.onButtonEvent,
                            onPointerUp: this.onButtonEvent,
                            onClick: this.onClick
                        }, this.props.children)
                    }, e.prototype.registerEvents = function() {
                        this.props.sendEvents.length && (this.eventsToSend[e.SendEvent.CLICK] = this.props.sendEvents.indexOf(e.SendEvent.CLICK) > -1, this.eventsToSend[e.SendEvent.HOVER] = this.props.sendEvents.indexOf(e.SendEvent.HOVER) > -1, this.eventsToSend[e.SendEvent.BUTTON] = this.props.sendEvents.indexOf(e.SendEvent.BUTTON) > -1)
                    }, e.prototype.sendEventThrough = function(t, e) {
                        var n;
                        try {
                            n = window.PointerEvent ? new PointerEvent(t, e) : new MouseEvent(t, e)
                        } catch (o) {
                            (n = document.createEvent("MouseEvents")).initMouseEvent(t, e.bubbles, e.cancelable, e.view, e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, e.button, e.relatedTarget)
                        }
                        this.target.dispatchEvent(n)
                    }, e
                }(r.Component);
            ! function(t) {
                ! function(t) {
                    t[t.HOVER = 1] = "HOVER", t[t.CLICK = 2] = "CLICK", t[t.BUTTON = 3] = "BUTTON"
                }(t.SendEvent || (t.SendEvent = {}))
            }(s || (s = {}))
        },
        559: function(t, e, n) {
            "use strict";
            var o;
            n.d(e, "a", (function() {
                    return o
                })),
                function(t) {
                    t[t.NONE = 0] = "NONE"
                }(o || (o = {}))
        },
        560: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return r
            }));
            var o = function() {
                    function t(t) {
                        this._value = t
                    }
                    return t.prototype.value = function() {
                        return this._value
                    }, t.prototype.set = function(t) {
                        this._value = t
                    }, t
                }(),
                r = function() {
                    function t() {
                        this.storage = {}
                    }
                    return t.prototype.get = function(t, e) {
                        var n = this.storage[t];
                        return n || (n = e(), this.storage[t] = n), n
                    }, t.prototype.getNumber = function(t) {
                        return this.get(t, (function() {
                            return new o(0)
                        }))
                    }, t.prototype.getString = function(t) {
                        return this.get(t, (function() {
                            return new o("")
                        }))
                    }, t.prototype.getArray = function(t) {
                        return this.get(t, (function() {
                            return []
                        }))
                    }, t.prototype.getNumberMap = function(t) {
                        return this.get(t, (function() {
                            return {}
                        }))
                    }, t.prototype.getStringMap = function(t) {
                        return this.get(t, (function() {
                            return {}
                        }))
                    }, t
                }()
        },
        561: function(t, e, n) {
            "use strict";
            var o, r = n(1),
                i = n(7),
                a = n(26),
                s = n(18),
                c = n(133),
                l = n(134),
                u = n(562);
            e.a = {
                cube: {
                    uniforms: {
                        map: {
                            type: "t",
                            value: null
                        },
                        opacity: {
                            type: "f",
                            value: 1
                        }
                    },
                    vertexShader: l + n(636),
                    fragmentShader: c + n(637)
                },
                modelChunk: {
                    uniforms: (o = {}, o[u.a.MeshTexture] = {
                        map: {
                            type: "t",
                            value: null
                        },
                        meshOpacity: {
                            type: "f",
                            value: 0
                        },
                        opacity: {
                            type: "f",
                            value: 1
                        }
                    }, o[u.a.PanoTexture] = {
                        pano0Map: {
                            type: "t",
                            value: null
                        },
                        pano0Position: {
                            type: "v3",
                            value: new r.a
                        },
                        pano0Matrix: {
                            type: "m4",
                            value: new i.a
                        }
                    }, o[u.a.PanoTextureTransition] = {
                        progress: {
                            type: "f",
                            value: 0
                        },
                        pano1Map: {
                            type: "t",
                            value: null
                        },
                        pano1Position: {
                            type: "v3",
                            value: new r.a
                        },
                        pano1Matrix: {
                            type: "m4",
                            value: new i.a
                        }
                    }, o[u.a.ColorOverlay] = {
                        colorOverlay: {
                            type: "v4",
                            value: null
                        }
                    }, o[u.a.MeshPreviewSphere] = {
                        meshPreviewCenter: {
                            type: "v3",
                            value: null
                        },
                        meshPreviewSize: {
                            type: "f",
                            value: .3
                        }
                    }, o[u.a.Wireframe] = {
                        time: {
                            value: 0
                        },
                        fill: {
                            value: new s.a(16711680)
                        },
                        stroke: {
                            value: new s.a(16777215)
                        },
                        dualStroke: {
                            value: !1
                        },
                        fillEnabled: {
                            value: !1
                        },
                        insideAltColor: {
                            value: !1
                        },
                        thickness: {
                            value: .1
                        },
                        secondThickness: {
                            value: .1
                        },
                        dashEnabled: {
                            value: !1
                        },
                        dashRepeats: {
                            value: 10
                        },
                        dashOverlap: {
                            value: !1
                        },
                        dashLength: {
                            value: .1,
                            range: [0, 1]
                        },
                        dashAnimate: {
                            value: !1
                        },
                        squeeze: {
                            value: !1
                        },
                        squeezeMin: {
                            value: .1
                        },
                        squeezeMax: {
                            value: 1
                        },
                        wireframeOpacity: {
                            value: 1,
                            range: [0, 1]
                        }
                    }, o),
                    vertexShader: l + n(638),
                    fragmentShader: c + n(639)
                },
                modelOutside: {
                    uniforms: {
                        map: {
                            type: "t",
                            value: null
                        },
                        opacity: {
                            type: "f",
                            value: 1
                        },
                        colorOverlay: {
                            type: "v4",
                            value: new a.a(0, 0, 0, 0)
                        }
                    },
                    vertexShader: l + n(640),
                    fragmentShader: c + n(641)
                },
                depth: {
                    uniforms: {
                        opacity: {
                            type: "f",
                            value: 1
                        },
                        maxDistance: {
                            type: "f",
                            value: 20
                        }
                    },
                    vertexShader: l + n(642),
                    fragmentShader: c + n(643)
                }
            }
        },
        562: function(t, e, n) {
            "use strict";
            var o;
            n.d(e, "a", (function() {
                    return o
                })),
                function(t) {
                    t.PanoTexture = "PANO_TEXTURE", t.PanoTextureTransition = "PANO_TEXTURE_TRANSITION", t.MeshTexture = "MESH_TEXTURE", t.ColorOverlay = "COLOR_OVERLAY", t.MeshPreviewSphere = "MESH_PREVIEW_SPHERE", t.Wireframe = "WIREFRAME", t.FlatShading = "FLAT_SHADING"
                }(o || (o = {}))
        },
        568: function(t, e, n) {
            t.exports = n.p + "images/headset-cardboard.png"
        },
        575: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return a
            }));
            var o = n(144),
                r = n(302),
                i = {
                    0: o.a.GL_TEXTURE_CUBE_MAP_POSITIVE_Y,
                    1: o.a.GL_TEXTURE_CUBE_MAP_POSITIVE_Z,
                    2: o.a.GL_TEXTURE_CUBE_MAP_POSITIVE_X,
                    3: o.a.GL_TEXTURE_CUBE_MAP_NEGATIVE_Z,
                    4: o.a.GL_TEXTURE_CUBE_MAP_NEGATIVE_X,
                    5: o.a.GL_TEXTURE_CUBE_MAP_NEGATIVE_Y
                },
                a = function(t) {
                    if (t < 0 || t > 5) throw new r.a("mapFaceToCubemapFace() -> face must be in the range [0, 5]");
                    return i[t]
                }
        },
        576: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return o
            }));
            var o, r = n(67),
                i = n(222),
                a = n(560),
                s = n(540),
                c = n(33),
                l = new(n(3).a)("panoqualitymanager");
            ! function(t) {
                t[t.Untested = 0] = "Untested", t[t.Testing = 1] = "Testing", t[t.Success = 2] = "Success", t[t.Fail = 3] = "Fail"
            }(o || (o = {}));
            var u = function() {
                function t(t, e, n, o) {
                    this.urls = t, this.maxCubemapSize = e, this.maxNavPanoSize = n, this.maxZoomPanoSize = o, this.overrideWindow = !1, this.devicePixelRatio = window.devicePixelRatio || 1, this.navPanoSize = -1, this.zoomPanoSize = -1, this.windowHeight = window.innerHeight * this.devicePixelRatio, this.highQualityThreshold = i.c.windowHeightHighQualityThresholdOverride || i.c.windowHeightHighQualityThreshold, this.persistentStorage = new a.a, this.downloadTestResults = {}, this.updateMaximums()
                }
                return t.prototype.setWindowSize = function(t, e) {
                    this.windowHeight = e * this.devicePixelRatio, this.updateMaximums()
                }, t.prototype.overrideWindowMaximums = function(t) {
                    this.overrideWindow = t, this.updateMaximums()
                }, t.prototype.getTestResults = function(t, e) {
                    var n = this.downloadTestResults[t];
                    if (n) {
                        var r = n[e];
                        if (r) return r
                    }
                    return o.Untested
                }, t.prototype.ultraHighQualityModeEnabled = function(t) {
                    var e = r.b[this.getZoomPanoSize()],
                        n = this.downloadTestResults[t];
                    return !(!n || !n[e]) && n[e] === o.Success
                }, t.prototype.updateMaximums = function() {
                    this.windowHeight < this.highQualityThreshold && !this.overrideWindow ? (this.navPanoSize = Math.min(t.getPanoSize(r.d.STANDARD), this.maxNavPanoSize), this.zoomPanoSize = Math.min(t.getPanoSize(r.d.HIGH), this.maxZoomPanoSize)) : (this.navPanoSize = this.maxNavPanoSize, this.zoomPanoSize = this.maxZoomPanoSize), this.zoomPanoSize < this.navPanoSize && (this.navPanoSize = this.zoomPanoSize), this.zoomPanoSize = Math.min(this.maxCubemapSize, this.zoomPanoSize), this.navPanoSize = Math.min(this.maxCubemapSize, this.navPanoSize)
                }, t.getPanoSize = function(t) {
                    if (t in r.a) return r.a[t];
                    throw new Error("Not a panoSizeClass: " + t)
                }, t.getPanoSizeClass = function(t) {
                    if (t in r.b) return r.b[t];
                    throw new Error("Not a valid pano resolution: " + t)
                }, t.prototype.getMaxPossiblePanoSize = function() {
                    return t.getPanoSize(r.d.ULTRAHIGH)
                }, t.prototype.getNavPanoSize = function() {
                    return this.navPanoSize
                }, t.prototype.getZoomPanoSize = function() {
                    return this.zoomPanoSize
                }, t.prototype.availableResolution = function(t, e) {
                    var n = this,
                        r = new c.a;
                    switch (e < 1 && r.reject(0), this.getTestResults(t, e)) {
                        case o.Success:
                            r.resolve(e);
                            break;
                        case o.Fail:
                            return this.availableResolution(t, e - 1);
                        case o.Untested:
                            this.testDownload(t, e, s.b).then((function(o) {
                                o ? r.resolve(e) : n.availableResolution(t, e - 1).then((function(t) {
                                    return r.resolve(t)
                                }))
                            }));
                            break;
                        case o.Testing:
                            l.warn("resolution is already testing, do we need to handle this?")
                    }
                    return r
                }, t.prototype.testDownload = function(e, n, r) {
                    var i = this;
                    if (!this.urls) throw new Error("Can't call testDownload without signed urls");
                    var a = t.getPanoSize(n),
                        s = new c.a;
                    this.downloadTestResults[e] || (this.downloadTestResults[e] = {});
                    var l = this.downloadTestResults[e] && this.downloadTestResults[e][n];
                    if (l) l === o.Success ? s.resolve(!0) : l === o.Fail && s.resolve(!1);
                    else {
                        this.downloadTestResults[e][n] = o.Testing;
                        var u = this.getTileUrl(e, a, r, 0);
                        this.urls.getImage(u, {
                            maxRetries: 0
                        }).then((function(t) {
                            i.downloadTestResults[e][n] = o.Success, s.resolve(!0)
                        }), (function() {
                            i.downloadTestResults[e][n] = o.Fail, s.resolve(!1)
                        }))
                    }
                    return s
                }, t.prototype.getTileUrl = function(t, e, n, o) {
                    var r = this.persistentStorage.get("getTileUrl:sizeMap", (function() {
                            return {
                                256: "256",
                                512: "512",
                                1024: "1k",
                                2048: "2k",
                                4096: "4k"
                            }
                        })),
                        i = this.persistentStorage.get("getTileUrl:sizeMap", (function() {
                            return {
                                face: -1,
                                faceTileIndex: -1,
                                tileX: -1,
                                tileY: -1
                            }
                        }));
                    s.f(e, o, i);
                    var a = Math.floor(e / n),
                        c = a * a,
                        l = Math.floor(o / c);
                    return "tiles/" + t + "/" + r[e] + "_face" + l + "_" + i.tileX + "_" + i.tileY + ".jpg"
                }, t
            }();
            e.b = u
        },
        577: function(t, e, n) {
            "use strict";
            n.d(e, "b", (function() {
                return r
            })), n.d(e, "e", (function() {
                return i
            })), n.d(e, "d", (function() {
                return a
            })), n.d(e, "a", (function() {
                return s
            })), n.d(e, "c", (function() {
                return c
            }));
            var o = n(13),
                r = 1e3 / 60,
                i = o.a.degToRad(70),
                a = -i,
                s = .05,
                c = .1 / 60
        },
        578: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return u
            }));
            var o, r = n(25),
                i = n(37),
                a = n(81),
                s = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                c = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                l = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                u = function(t) {
                    function e(e) {
                        var n, o, r = t.call(this) || this;
                        if (r.name = "rooms", r.selected = new a.a(null), r.floorToRoomsMap = new Map, r._bbox = new i.a, r.addRoomToMaps = function(t, e) {
                                e._rooms[t.id] = t;
                                var n = e.floorToRoomsMap.get(t.floorId);
                                n ? n.push(t) : e.floorToRoomsMap.set(t.floorId, [t])
                            }, r.rooms = function() {
                                var t = r._rooms,
                                    e = Object.keys(r._rooms);
                                return function() {
                                    var n, o, r, i, a, s;
                                    return c(this, (function(c) {
                                        switch (c.label) {
                                            case 0:
                                                c.trys.push([0, 5, 6, 7]), r = l(e), i = r.next(), c.label = 1;
                                            case 1:
                                                return i.done ? [3, 4] : (a = i.value, [4, t[a]]);
                                            case 2:
                                                c.sent(), c.label = 3;
                                            case 3:
                                                return i = r.next(), [3, 1];
                                            case 4:
                                                return [3, 7];
                                            case 5:
                                                return s = c.sent(), n = {
                                                    error: s
                                                }, [3, 7];
                                            case 6:
                                                try {
                                                    i && !i.done && (o = r.return) && o.call(r)
                                                } finally {
                                                    if (n) throw n.error
                                                }
                                                return [7];
                                            case 7:
                                                return [2]
                                        }
                                    }))
                                }()
                            }, r.get = function(t) {
                                return r._rooms["room-" + t]
                            }, r.roomIdsFromPoint = function(t) {
                                var e, n, o = [];
                                try {
                                    for (var i = l(r.rooms()), a = i.next(); !a.done; a = i.next()) {
                                        var s = a.value;
                                        r._bbox.min.set(s.min.x, s.min.y, s.min.z), r._bbox.max.set(s.max.x, s.max.y, s.max.z), r._bbox.containsPoint(t) && o.push(s.index)
                                    }
                                } catch (t) {
                                    e = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        a && !a.done && (n = i.return) && n.call(i)
                                    } finally {
                                        if (e) throw e.error
                                    }
                                }
                                return o
                            }, r._rooms = {}, e) try {
                            for (var s = l(Object.keys(e)), u = s.next(); !u.done; u = s.next()) {
                                var p = u.value;
                                r.addRoomToMaps(e[p], r)
                            }
                        } catch (t) {
                            n = {
                                error: t
                            }
                        } finally {
                            try {
                                u && !u.done && (o = s.return) && o.call(s)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                        return r
                    }
                    return s(e, t), e.prototype.copy = function(t) {
                        var e, n;
                        this._rooms = {}, this.floorToRoomsMap.clear();
                        try {
                            for (var o = l(t.rooms()), r = o.next(); !r.done; r = o.next()) {
                                var i = r.value,
                                    a = {
                                        id: i.id,
                                        floorId: i.floorId,
                                        min: i.min,
                                        max: i.max,
                                        mesh: i.mesh,
                                        index: i.index
                                    };
                                this.addRoomToMaps(a, this), this._rooms[i.id] = a
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                r && !r.done && (n = o.return) && n.call(o)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        return this
                    }, Object.defineProperty(e.prototype, "roomCount", {
                        get: function() {
                            return Object.keys(this._rooms).length
                        },
                        enumerable: !0,
                        configurable: !0
                    }), Object.defineProperty(e.prototype, "floorCount", {
                        get: function() {
                            return this.floorToRoomsMap.size
                        },
                        enumerable: !0,
                        configurable: !0
                    }), Object.defineProperty(e.prototype, "collection", {
                        get: function() {
                            return this._rooms
                        },
                        enumerable: !0,
                        configurable: !0
                    }), e.prototype.roomsByFloor = function(t) {
                        return this.floorToRoomsMap.get(t) || []
                    }, e
                }(r.a)
        },
        579: function(t, e, n) {
            "use strict";
            n.d(e, "b", (function() {
                return r
            })), n.d(e, "a", (function() {
                return i
            })), n.d(e, "d", (function() {
                return a
            })), n.d(e, "e", (function() {
                return s
            })), n.d(e, "c", (function() {
                return c
            })), n.d(e, "f", (function() {
                return l
            })), n.d(e, "j", (function() {
                return u
            })), n.d(e, "i", (function() {
                return p
            })), n.d(e, "h", (function() {
                return h
            })), n.d(e, "g", (function() {
                return d
            })), n.d(e, "l", (function() {
                return f
            })), n.d(e, "k", (function() {
                return y
            }));
            var o = n(6),
                r = 1e3 / 60,
                i = .05,
                a = Math.PI / 2 / 1e3,
                s = .1 / 60,
                c = .02,
                l = 25,
                u = 3,
                p = 3,
                h = .16,
                d = Object(o.n)() ? 45 : Object(o.q)() ? 20 : 35,
                f = .01,
                y = 2
        },
        580: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return a
            })), n.d(e, "b", (function() {
                return s
            }));
            var o, r = n(21),
                i = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                a = function(t) {
                    function e() {
                        var e = t.call(this) || this;
                        return e.id = "LOCK_NAVIGATION", e
                    }
                    return i(e, t), e
                }(r.a),
                s = function(t) {
                    function e() {
                        var e = t.call(this) || this;
                        return e.id = "UNLOCK_NAVIGATION", e
                    }
                    return i(e, t), e
                }(r.a)
        },
        581: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return a
            }));
            var o, r = n(21),
                i = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                a = function(t) {
                    function e(e) {
                        var n = t.call(this) || this;
                        return n.id = "MATTERTAG_NAV_LINK", n.payload = {
                            chunk: e
                        }, n
                    }
                    return i(e, t), e
                }(r.a)
        },
        585: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return l
            }));
            var o, r = n(19),
                i = n(552),
                a = n(553),
                s = n(518),
                c = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                l = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.state = {
                            visible: !1,
                            trackLength: 1,
                            thumbLength: 1,
                            thumbOffset: 0
                        }, n.direction = s.e[e.direction], n.handlePressStart = n.handlePressStart.bind(n), n.handlePressMove = n.handlePressMove.bind(n), n.handleTrackClick = n.handleTrackClick.bind(n), n.inputFilter = new a.a({
                            handlePressStart: n.handlePressStart,
                            handlePressMove: n.handlePressMove
                        }), window.PointerEvent || (window.addEventListener("mousemove", n.inputFilter.handleEvent), window.addEventListener("mouseleave", n.inputFilter.handleEvent), window.addEventListener("mouseup", n.inputFilter.handleEvent)), window.addEventListener("pointermove", n.inputFilter.handleEvent), window.addEventListener("pointerup", n.inputFilter.handleEvent), n
                    }
                    return c(e, t), e.prototype.componentWillUnmount = function() {
                        window.PointerEvent || (window.removeEventListener("mousemove", this.inputFilter.handleEvent), window.removeEventListener("mouseleave", this.inputFilter.handleEvent), window.removeEventListener("mouseup", this.inputFilter.handleEvent)), window.removeEventListener("pointermove", this.inputFilter.handleEvent), window.removeEventListener("pointerup", this.inputFilter.handleEvent)
                    }, e.prototype.getTrackLength = function() {
                        return Number(this.thumbTrack && this.thumbTrack[this.direction.clientLength] || window.innerWidth)
                    }, e.prototype.handleTrackClick = function(t) {
                        var e;
                        if (t.target === this.thumbTrack) {
                            var n = this.direction.eventPosition,
                                o = this.thumbTrack.getBoundingClientRect()[this.direction.offsetName],
                                r = t[n] < o + this.state.thumbOffset,
                                i = this.getTrackLength(),
                                a = 0;
                            a = r ? Math.max(0, (this.state.thumbOffset - this.state.thumbLength) / i) : Math.min(i, (this.state.thumbOffset + this.state.thumbLength) / i), this.props.scrollTo(((e = {})[Object(s.i)(this.props.direction)] = a, e))
                        }
                    }, e.prototype.handlePressStart = function(t) {
                        this.dragStartThumbOffset = this.state.thumbOffset
                    }, e.prototype.handlePressMove = function(t) {
                        var e, n = this.getTrackLength(),
                            o = (this.dragStartThumbOffset - t[this.direction.delta]) / n;
                        this.props.scrollTo(((e = {})[Object(s.i)(this.props.direction)] = o, e)), this.props.onThumbDrag && this.props.onThumbDrag()
                    }, e.prototype.componentDidUpdate = function() {
                        var t = this.props,
                            e = t.wrapperLength,
                            n = t.childLength,
                            o = t.scrollOffset;
                        if (e > 0 && n > 0) {
                            var r = this.getTrackLength(),
                                a = e / n * r,
                                c = {
                                    thumbLength: a,
                                    visible: n > e,
                                    thumbOffset: Math.min(o / n * r, r - a)
                                };
                            if (Object(i.a)(this.state, c)) {
                                var l = this.state.visible !== c.visible;
                                l && this.props.onVisibilityChange && this.props.onVisibilityChange(c.visible);
                                var u = Object(s.j)(c.thumbOffset / (r - a), c.visible);
                                (u !== this.scrollPosition || l) && (this.scrollPosition = u, this.props.onScrollPositionChange && this.props.onScrollPositionChange(u)), this.setState(c)
                            }
                        }
                    }, e.prototype.render = function() {
                        var t, e = this,
                            n = ((t = {})["" + this.direction.lengthName] = this.state.thumbLength + "px", t["" + this.direction.offsetName] = this.state.thumbOffset + "px", t);
                        return Object(r.h)("div", null, this.state.visible && !this.props.forceHidden && Object(r.h)("div", {
                            class: "scrollbarTrack " + this.props.direction,
                            onClick: this.handleTrackClick,
                            ref: function(t) {
                                e.thumbTrack = t
                            }
                        }, Object(r.h)("div", {
                            class: "scrollbarThumb",
                            style: n,
                            onMouseDown: this.inputFilter.handleEvent,
                            onTouchStart: this.inputFilter.handleEvent
                        })))
                    }, e
                }(r.Component)
        },
        586: function(t, e, n) {
            "use strict";
            var o = n(94),
                r = function() {
                    function t(t) {
                        this.isAnimating = !0, this.duration = t.duration, this.startValue = t.startValue, this.changeValue = t.endValue - this.startValue, this.easingFunction = t.easingFunction || o.d
                    }
                    return t.prototype.getUpdatedValue = function() {
                        this.startTime || (this.startTime = Date.now());
                        var t = Date.now() - this.startTime;
                        return t > this.duration && (this.isAnimating = !1), this.easingFunction(t, this.startValue, this.changeValue, this.duration)
                    }, t
                }();
            e.a = r
        },
        587: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return a
            }));
            var o, r = n(19),
                i = (n(692), o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                a = function(t) {
                    function e(e) {
                        return t.call(this, e) || this
                    }
                    return i(e, t), e.prototype.render = function() {
                        return Object(r.h)("div", {
                            class: "blocked",
                            style: this.props.style || {}
                        }, Object(r.h)("span", {
                            class: "icon-play-unicode"
                        }), Object(r.h)("span", {
                            class: "icon-blocked"
                        }))
                    }, e
                }(r.Component)
        },
        588: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return u
            }));
            var o, r = n(19),
                i = n(111),
                a = n(110),
                s = n(45),
                c = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                l = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                u = function(t) {
                    function e(e, n) {
                        var o = t.call(this, e) || this;
                        o.onClick = function() {
                            o.props.enabled && o.props.onToggle()
                        }, o.locale = {
                            onSettingString: n.locale.t(s.a.ON),
                            offSettingString: n.locale.t(s.a.OFF)
                        };
                        var r = Math.max(o.props.toggleTime || 300);
                        return o.trackTransitionStyle = "transition: background-color " + r + "ms", o.thumbTransitionStyle = o.trackTransitionStyle + ", left " + r + "ms", o
                    }
                    return c(e, t), e.prototype.render = function() {
                        var t = this.props,
                            e = t.id,
                            n = t.toggled,
                            o = t.enabled,
                            i = t.onOffLabel,
                            s = n ? this.locale.onSettingString : this.locale.offSettingString;
                        return Object(r.h)("div", {
                            class: a("reusable-toggle", {
                                "toggle-on": n,
                                enabled: o
                            }),
                            id: e,
                            onClick: this.onClick
                        }, i && Object(r.h)("span", {
                            class: "toggle-label"
                        }, s), Object(r.h)("div", {
                            style: this.trackTransitionStyle,
                            class: "track"
                        }), Object(r.h)("div", {
                            style: this.thumbTransitionStyle,
                            class: "thumb"
                        }))
                    }, e = l([i.b], e)
                }(r.Component)
        },
        589: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return l
            }));
            var o, r = n(19),
                i = n(110),
                a = n(111),
                s = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                c = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                l = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.onChange = function(t) {
                            n.props.onChange(t)
                        }, n
                    }
                    return s(e, t), e.prototype.render = function() {
                        var t = this.props,
                            e = t.id,
                            n = t.name,
                            o = t.value,
                            a = t.checked,
                            s = t.children,
                            c = !t.enabled;
                        return Object(r.h)("div", {
                            class: i("radio-element", "radio-button", {
                                disabled: c
                            })
                        }, Object(r.h)("input", {
                            type: "radio",
                            id: e,
                            name: n,
                            value: o,
                            checked: a,
                            onChange: this.onChange
                        }), Object(r.h)("label", {
                            for: e
                        }, s))
                    }, e = c([a.b], e)
                }(r.Component)
        },
        597: function(t, e, n) {
            "use strict";
            var o, r = n(114),
                i = n(30),
                a = n(0),
                s = n(1),
                c = n(7),
                l = n(41),
                u = n(561),
                p = n(189),
                h = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                d = function() {
                    return (d = Object.assign || function(t) {
                        for (var e, n = 1, o = arguments.length; n < o; n++)
                            for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
                        return t
                    }).apply(this, arguments)
                };

            function f(t) {
                var e = {};
                for (var n in t) t[n] && (e = d({}, u.a.modelChunk.uniforms[n], e));
                return i.a.clone(e)
            }
            var y = function(t) {
                    function e(e, n) {
                        return t.call(this, {
                            extensions: {
                                derivatives: !0
                            },
                            fragmentShader: u.a.modelChunk.fragmentShader,
                            vertexShader: u.a.modelChunk.vertexShader,
                            uniforms: f(n),
                            name: e,
                            defines: n
                        }) || this
                    }
                    return h(e, t), e.prototype.tryUpdateUniform = function(t, e) {
                        var n = this.uniforms[t];
                        if (n) {
                            var o = n.value && n.value.copy,
                                r = n.value && e instanceof n.value.constructor;
                            !o || !r || n.value instanceof l.a ? n.value = e : n.value.copy(e), "opacity" === t && (this.transparent = 1 !== e, this.depthWrite = e > p.a)
                        }
                    }, e
                }(r.a),
                v = n(562),
                m = n(601);
            n.d(e, "b", (function() {
                return g
            })), n.d(e, "a", (function() {
                return S
            }));
            var g, b = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                w = 1,
                O = new s.a(1, 1, 1);
            ! function(t) {
                t[t.Standard = 0] = "Standard", t[t.Depth = 1] = "Depth", t[t.Transparent = 2] = "Transparent", t[t.Wireframe = 3] = "Wireframe"
            }(g || (g = {}));
            var S = function() {
                function t(t, e, n, o) {
                    var s;
                    void 0 === o && (o = "");
                    var c = this;
                    this.floorIndex = t, this.roomIndex = e, this.geometry = n, this.textureName = o, this.id = w++, this.capabilityFuncs = ((s = {})[v.a.PanoTextureTransition] = {
                        enabled: function() {
                            return c.uniformCache.pano0Map !== c.uniformCache.pano1Map && c.uniformCache.progress > 0
                        },
                        dependsOn: [v.a.PanoTexture]
                    }, s[v.a.PanoTexture] = {
                        enabled: function() {
                            return c.uniformCache.meshOpacity < 1
                        },
                        dependsOn: []
                    }, s[v.a.ColorOverlay] = {
                        enabled: function() {
                            return null !== c.uniformCache.colorOverlay
                        },
                        dependsOn: []
                    }, s[v.a.MeshPreviewSphere] = {
                        enabled: function() {
                            return null !== c.uniformCache.meshPreviewCenter
                        },
                        dependsOn: [v.a.MeshTexture]
                    }, s[v.a.MeshTexture] = {
                        enabled: function() {
                            return c.uniformCache.meshOpacity > 0
                        },
                        dependsOn: []
                    }, s[v.a.Wireframe] = {
                        enabled: function() {
                            return !1
                        },
                        dependsOn: []
                    }, s[v.a.FlatShading] = {
                        enabled: function() {
                            return !1
                        },
                        dependsOn: []
                    }, s), this.chunkMaterials = {}, this.modeMaterials = {}, this.uniformCache = this.getUniformDefaults(), this.modeMaterials[g.Standard] = this.getChunkMaterial(this.getCapabilities());
                    var l = i.a.clone(u.a.depth.uniforms);
                    this.modeMaterials[g.Depth] = new r.a({
                        fragmentShader: u.a.depth.fragmentShader,
                        vertexShader: u.a.depth.vertexShader,
                        uniforms: l,
                        side: a.F,
                        name: "materialDepth"
                    });
                    var p = i.a.clone(u.a.modelOutside.uniforms);
                    p.opacity.value = .2, this.modeMaterials[g.Transparent] = new r.a({
                        fragmentShader: u.a.modelOutside.fragmentShader,
                        vertexShader: u.a.modelOutside.vertexShader,
                        uniforms: p,
                        side: a.F,
                        transparent: !0,
                        name: "materialTransparent"
                    });
                    var h = i.a.clone(u.a.modelOutside.uniforms);
                    h.opacity.value = .5, h.colorOverlay.value.set(1, 1, 1, 1), this.modeMaterials[g.Wireframe] = new r.a({
                        fragmentShader: u.a.modelOutside.fragmentShader,
                        vertexShader: u.a.modelOutside.vertexShader,
                        uniforms: h,
                        side: a.F,
                        transparent: !0,
                        wireframe: !0,
                        name: "materialWireframe"
                    })
                }
                return t.prototype.getUniformDefaults = function() {
                    var t = {};
                    for (var e in u.a.modelChunk.uniforms)
                        for (var n in u.a.modelChunk.uniforms[e]) t[n] = u.a.modelChunk.uniforms[e][n].value;
                    return t
                }, t.prototype.build = function(t, e) {
                    this.roomMesh = t, this.materialIndex = e
                }, Object.defineProperty(t.prototype, "material", {
                    get: function() {
                        return this.roomMesh.material[this.materialIndex]
                    },
                    set: function(t) {
                        this.roomMesh.material[this.materialIndex] = t
                    },
                    enumerable: !0,
                    configurable: !0
                }), t.prototype.setMeshTexture = function(t) {
                    this.setMaterialsUniform("map", t)
                }, t.prototype.setColorOverlay = function(t) {
                    this.setMaterialsUniform("colorOverlay", t)
                }, t.prototype.setMeshTextureOpacity = function(t) {
                    this.setMaterialsUniform("meshOpacity", t)
                }, t.prototype.setProgress = function(t) {
                    this.setMaterialsUniform("progress", t)
                }, t.prototype.setOpacity = function(t) {
                    this.setMaterialsUniform("opacity", t)
                }, t.prototype.setMeshPreviewSphere = function(t, e) {
                    void 0 === e && (e = .3), this.setMaterialsUniform("meshPreviewCenter", t), this.setMaterialsUniform("meshPreviewSize", e)
                }, t.prototype.setWireframe = function(t) {
                    if (t) {
                        if (this.roomMesh.geometry.getIndex()) {
                            var e = this.roomMesh.geometry;
                            this.roomMesh.geometry = e.toNonIndexed(), this.roomMesh.geometry.boundingBox = e.boundingBox, this.roomMesh.geometry.boundingSphere = e.boundingSphere
                        }
                        Object(m.a)(this.roomMesh.geometry)
                    }
                    this.capabilityFuncs[v.a.Wireframe].enabled = function() {
                        return t
                    }, this.updateMaterialCapabilities()
                }, t.prototype.setFlatShading = function(t) {
                    t && this.roomMesh.geometry.computeVertexNormals(), this.capabilityFuncs[v.a.FlatShading].enabled = function() {
                        return t
                    }, this.updateMaterialCapabilities()
                }, t.prototype.getCapabilities = function() {
                    var t, e, n = {};
                    for (var o in this.capabilityFuncs)
                        if (n[o] = n[o] || this.capabilityFuncs[o].enabled(), n[o]) try {
                            for (var r = b(this.capabilityFuncs[o].dependsOn), i = r.next(); !i.done; i = r.next()) {
                                n[i.value] = !0
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                i && !i.done && (e = r.return) && e.call(r)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    return n
                }, t.prototype.overrideCapability = function(t, e) {
                    this.capabilityFuncs[t].enabled = function() {
                        return e
                    }
                }, t.prototype.updateMaterialCapabilities = function() {
                    var t = this.getCapabilities(),
                        e = this.modeMaterials[g.Standard],
                        n = this.getChunkMaterial(t);
                    if (e !== n) {
                        for (var o in this.uniformCache) n.tryUpdateUniform(o, this.uniformCache[o]);
                        n.side = e.side, this.modeMaterials[g.Standard] = n, this.renderingMode === g.Standard && (this.material = n)
                    }
                }, t.prototype.getChunkMaterial = function(t) {
                    var e = "chunkMaterial_";
                    for (var n in t) e += t[n] ? "1" : "0";
                    return this.chunkMaterials[e] || (this.chunkMaterials[e] = new y(e, t)), this.chunkMaterials[e]
                }, t.prototype.setMaterialsUniform = function(t, e) {
                    this.uniformCache[t] = e, this.modeMaterials[g.Standard].tryUpdateUniform(t, e), this.updateMaterialCapabilities()
                }, t.prototype.setRenderingMode = function(t) {
                    this.renderingMode = t, this.material = this.modeMaterials[t]
                }, t.prototype.setSide = function(t) {
                    for (var e in this.chunkMaterials) this.chunkMaterials[e].side = t
                }, t.prototype.forEachMaterial = function(t) {
                    for (var e in this.chunkMaterials) t(this.chunkMaterials[e])
                }, t.prototype.setProjectedPano = function(t, e, n, o) {
                    var r = "pano" + t;
                    if (o && this.setMaterialsUniform(r + "Map", o), e && this.setMaterialsUniform(r + "Position", e), n && e) {
                        var i = (new c.a).compose(e, n, O);
                        this.setMaterialsUniform(r + "Matrix", i)
                    }
                }, t
            }()
        },
        598: function(t, e, n) {
            "use strict";
            var o;
            ! function(t) {
                t[t.Center = 0] = "Center", t[t.UpperLeft = 1] = "UpperLeft", t[t.UpperRight = 2] = "UpperRight", t[t.LowerRight = 3] = "LowerRight", t[t.LowerLeft = 4] = "LowerLeft"
            }(o || (o = {})), e.a = o
        },
        599: function(t, e, n) {
            "use strict";
            var o, r = n(9),
                i = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                a = function(t) {
                    function e(e) {
                        var n = t.call(this) || this;
                        return n.sweepIds = e, n
                    }
                    return i(e, t), e
                }(r.a);
            e.a = a
        },
        600: function(t, e, n) {
            "use strict";
            var o, r = n(9),
                i = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                a = function(t) {
                    function e() {
                        return t.call(this) || this
                    }
                    return i(e, t), e
                }(r.a);
            e.a = a
        },
        601: function(t, e, n) {
            "use strict";
            n.d(e, "b", (function() {
                return r
            })), n.d(e, "a", (function() {
                return i
            }));
            var o = n(12);

            function r(t) {
                var e = t.match(/group([0-9]+)/),
                    n = t.match(/sub([0-9]+)/);
                return {
                    floorIndex: e ? parseInt(e[1], 10) : 0,
                    roomIndex: n ? parseInt(n[1], 10) : 0
                }
            }

            function i(t, e) {
                if (void 0 === e && (e = !1), !t.getAttribute("barycentric")) {
                    for (var n = (t.getIndex() || t.getAttribute("position")).count / 3, r = [], i = 0; i < n; i++) {
                        var a = e ? 1 : 0;
                        i % 2 == 0 ? r.push(0, 0, 1, 0, 1, 0, 1, 0, a) : r.push(0, 1, 0, 0, 0, 1, 1, 0, a)
                    }
                    var s = new Float32Array(r),
                        c = new o.a(s, 3);
                    t.setAttribute("barycentric", c)
                }
            }
        },
        603: function(t, e, n) {
            "use strict";
            n.d(e, "d", (function() {
                return a
            })), n.d(e, "b", (function() {
                return s
            })), n.d(e, "e", (function() {
                return c
            })), n.d(e, "c", (function() {
                return l
            })), n.d(e, "a", (function() {
                return u
            }));
            var o, r = n(21),
                i = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                a = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.id = "RequestRenderTargetCommand", e
                    }
                    return i(e, t), e
                }(r.a),
                s = function(t) {
                    function e(e, n) {
                        var o = t.call(this) || this;
                        return o.payload = {
                            renderTarget: e,
                            context: n
                        }, o
                    }
                    return i(e, t), e
                }(r.a),
                c = function(t) {
                    function e(e, n, o) {
                        var r = t.call(this) || this;
                        return r.payload = {
                            renderTarget: e,
                            sceneObject: n,
                            camera: o
                        }, r
                    }
                    return i(e, t), e
                }(r.a),
                l = function(t) {
                    function e(e, n, o) {
                        void 0 === o && (o = 0);
                        var r = t.call(this) || this;
                        return r.payload = {
                            renderTarget: e,
                            texture: n,
                            heading: o
                        }, r
                    }
                    return i(e, t), e
                }(r.a),
                u = function(t) {
                    function e(e, n) {
                        var o = t.call(this) || this;
                        return o.payload = {
                            target1: e,
                            target2: n
                        }, o
                    }
                    return i(e, t), e
                }(r.a)
        },
        604: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return i
            })), n.d(e, "b", (function() {
                return a
            }));
            var o = n(3),
                r = new o.a("webvr"),
                i = function() {
                    return "getVRDisplays" in navigator
                },
                a = function() {
                    return navigator.getVRDisplays().then((function(t) {
                        return t.length > 0 && t[0].capabilities.canPresent ? t[0] : null
                    })).catch((function(t) {
                        return r.warn("Getting VR display failed"), r.warn(t), null
                    }))
                }
        },
        605: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return o
            }));
            var o = "TransitionType"
        },
        606: function(t, e, n) {},
        607: function(t, e, n) {},
        608: function(t, e, n) {
            "use strict";
            var o, r = n(19),
                i = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                a = function(t) {
                    function e() {
                        return t.call(this) || this
                    }
                    return i(e, t), e.prototype.render = function() {
                        return Object(r.h)("div", {
                            class: "no-highlights-message"
                        }, Object(r.h)("p", null, "Your space does not have any highlights yet."), Object(r.h)("p", null, "A Highlight Reel lets your visitors get a taste of what the Space is like.", Object(r.h)("a", {
                            class: "link",
                            target: "_blank",
                            href: "https://support.matterport.com/hc/en-us/articles/360019401733"
                        }, "Learn More")))
                    }, e
                }(r.Component);
            e.a = a
        },
        609: function(t, e, n) {
            "use strict";
            var o, r = n(19),
                i = n(110),
                a = n(526),
                s = n(160),
                c = n(346),
                l = n(62),
                u = n(254),
                p = n(20),
                h = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                d = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.onStartEditingCaption = function() {
                            n.props.onToggleEditing && n.props.onToggleEditing(!0)
                        }, n.onCancelEditingCaption = function() {
                            n.props.onToggleEditing && n.props.onToggleEditing(!1)
                        }, n.onCaptionEdited = function(t) {
                            n.props.onRenameHighlight && n.props.onRenameHighlight(n.props.highlight.sid, t), n.props.onToggleEditing && n.props.onToggleEditing(!1)
                        }, n.removeHighlight = function(t) {
                            t.stopPropagation(), n.props.onRemoveHighlight && n.props.onRemoveHighlight(n.props.highlight.sid)
                        }, n.onClickHighlight = function(t) {
                            return t.preventDefault(), n.props.onClickHighlight(n.element)
                        }, n.shouldShowZoomMarker = function() {
                            var t = n.props,
                                e = t.highlight,
                                o = t.editable,
                                r = e.snapshot;
                            return !!o && (!(r.metadata.camera_mode !== p.a.Dollhouse && r.metadata.camera_mode !== p.a.Floorplan) && !Object(s.a)(r.metadata.ss_zoom, 1, .01))
                        }, n
                    }
                    return h(e, t), e.prototype.render = function() {
                        var t = this,
                            e = this.props,
                            n = e.highlight,
                            o = e.active,
                            a = e.editable,
                            s = e.getRef,
                            c = e.index,
                            l = n.snapshot,
                            u = l.sid,
                            p = l.thumbnailUrl,
                            h = !!l.name || a;
                        return Object(r.h)("div", {
                            key: u,
                            class: i("highlight-box", {
                                active: o,
                                editable: a
                            }),
                            onClick: this.onClickHighlight,
                            ref: function(e) {
                                t.element = e, s(c, t.element)
                            }
                        }, Object(r.h)("img", {
                            class: "highlight-image",
                            src: p
                        }), this.renderImageBar(), a && this.renderTransitionSettings(), Object(r.h)("div", {
                            class: i("image-name", {
                                shadowed: h
                            })
                        }, this.getImageCaption()))
                    }, e.prototype.renderTransitionSettings = function() {
                        var t = this.props,
                            e = t.highlight,
                            n = t.defaultToSlideshow,
                            o = e.snapshot,
                            i = e.transitionType,
                            a = this.props.highlight.panDirection,
                            s = "pan-auto";
                        a === u.b.Left ? s = "icon icon-rotate-left" : a === u.b.Right && (s = "icon icon-rotate-right");
                        var c = "Instant";
                        return o.is360 || i === l.a.FadeToBlack ? c = "Slideshow" : i === l.a.Interpolate ? c = "Walkthrough" : void 0 === i && (c = n ? "Slideshow" : "Walkthrough"), Object(r.h)("div", {
                            class: "transition-settings"
                        }, Object(r.h)("span", {
                            class: "transition-type"
                        }, c, o.is360 && Object(r.h)("span", null, "*")), Object(r.h)("span", {
                            class: "pan-icon " + s
                        }))
                    }, e.prototype.renderImageBar = function() {
                        var t = this.props,
                            e = t.highlight,
                            n = t.editable,
                            o = e.snapshot.is360,
                            a = e.snapshot.metadata.camera_mode,
                            s = this.getMarker(a, o);
                        return Object(r.h)("div", {
                            class: "image-bar"
                        }, Object(r.h)("span", {
                            class: i("highlight-marker", s)
                        }), this.shouldShowZoomMarker() && Object(r.h)(c.a, {
                            content: "Photos captured above or below 100% zoom will be presented at 100% zoom.",
                            position: c.b.DOWN_LEFT,
                            className: "highlight-zoomed"
                        }, Object(r.h)("svg", {
                            viewBox: "0 0 12 12"
                        }, Object(r.h)("polygon", {
                            fill: "#fbc606",
                            points: "0 0, 12 0, 12 12"
                        }))), n && Object(r.h)(c.a, {
                            className: "highlight-remove",
                            content: "Remove from Highlights",
                            position: c.b.DOWN_LEFT
                        }, Object(r.h)("span", {
                            class: i("icon-close"),
                            onClick: this.removeHighlight
                        })))
                    }, e.prototype.getImageCaption = function() {
                        var t = this.props,
                            n = t.highlight,
                            o = t.editable,
                            i = n.snapshot.name;
                        return o ? Object(r.h)(a.a, {
                            key: n.sid,
                            text: i,
                            defaultText: "",
                            hint: "Add caption",
                            closeOnFocusOut: !0,
                            maxLength: e.maxCharacterName,
                            onStartEditing: this.onStartEditingCaption,
                            onCancelEditing: this.onCancelEditingCaption,
                            onEdited: this.onCaptionEdited
                        }) : i ? Object(r.h)("span", {
                            class: "static-text"
                        }, i) : null
                    }, e.prototype.getMarker = function(t, e) {
                        return t === p.a.Dollhouse || t === p.a.Floorplan ? null : e ? "icon-360" : "icon-panorama"
                    }, e.maxCharacterName = 24, e
                }(r.Component);
            e.a = d
        },
        611: function(t, e, n) {
            "use strict";
            n.d(e, "b", (function() {
                return p
            })), n.d(e, "a", (function() {
                return r
            }));
            var o, r, i = n(19),
                a = n(731),
                s = n.n(a),
                c = n(110),
                l = (n(683), n(684), o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                u = 0,
                p = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.setValue = function(t) {
                            n.setState({
                                value: t
                            })
                        }, n.getValue = function() {
                            var t = n.slider.getValue();
                            return "object" == typeof t ? t.value : t
                        }, n.onSliderInput = function() {
                            var t = n.getValue();
                            n.setState({
                                value: t
                            }), n.props.onInput && n.props.onInput(t)
                        }, n.onSliderChange = function() {
                            var t = n.getValue();
                            n.setState({
                                value: t
                            }), n.props.onChange && n.props.onChange(t)
                        }, n.getLeftOffset = function() {
                            return 100 * (n.state.value - n.props.min) / (n.props.max - n.props.min) + "%"
                        }, n.getSliderId = function() {
                            return "slider-with-tooltip-" + n.id
                        }, n.getStyleElement = function() {
                            return "#" + n.getSliderId() + " .mdc-slider__thumb-container {\n        left: " + n.getLeftOffset() + "\n    }"
                        }, n.getDisplayValue = function(t) {
                            var e = n.props,
                                o = e.formatNumbers,
                                r = e.units;
                            return (o ? o(t) : t) + (r || "")
                        }, n.setActive = function(t) {
                            return function() {
                                return n.setState({
                                    active: t
                                })
                            }
                        }, n.hasChanged = function() {
                            n.setState({
                                hasChanged: !1
                            })
                        }, n.onMouseDown = function(t) {
                            n.props.onInputStart && n.props.onInputStart()
                        }, n.onMouseUp = function(t) {
                            n.props.onInputEnd && n.props.onInputEnd()
                        }, n.id = u++, n.state = {
                            value: void 0 !== e.initialValue ? e.initialValue : (e.max + e.min) / 2,
                            active: !1,
                            hasChanged: !1
                        }, n.setActiveSlider = n.setActive(!0), n.setInactiveSlider = n.setActive(!1), n
                    }
                    return l(e, t), e.prototype.componentDidMount = function() {
                        document.addEventListener("mouseup", this.onMouseUp), document.addEventListener("mouseleave", this.onMouseUp)
                    }, e.prototype.componentWillUnmount = function() {
                        document.removeEventListener("mouseup", this.onMouseUp), document.removeEventListener("mouseleave", this.onMouseUp)
                    }, e.prototype.componentDidUpdate = function(t, e) {
                        e.value !== this.state.value && (clearTimeout(this.hasChangedTimeout), this.setState({
                            hasChanged: !0
                        }), this.hasChangedTimeout = window.setTimeout(this.hasChanged, 450))
                    }, e.prototype.render = function() {
                        var t = this,
                            e = this.props,
                            n = e.width,
                            o = e.displayBounds,
                            a = e.min,
                            l = e.max,
                            u = e.discrete,
                            p = e.tooltipPosition,
                            h = this.state,
                            d = h.active,
                            f = h.hasChanged,
                            y = h.value;
                        return Object(i.h)("div", {
                            id: this.getSliderId(),
                            class: c("slider-with-tooltip", {
                                displayBounds: o
                            }),
                            style: "width:" + n + "px",
                            onMouseEnter: this.setActiveSlider,
                            onMouseLeave: this.setInactiveSlider
                        }, p === r.UP && Object(i.h)("div", {
                            class: c("slider-tooltip", {
                                active: d || f
                            }),
                            "data-balloon": this.getDisplayValue(y),
                            "data-balloon-pos": r.UP,
                            style: {
                                left: this.getLeftOffset()
                            }
                        }), o && Object(i.h)("div", {
                            class: "min-amount"
                        }, this.getDisplayValue(a)), Object(i.h)(s.a, {
                            ref: function(e) {
                                return t.slider = e
                            },
                            discrete: u,
                            min: a,
                            max: l,
                            value: y,
                            onInput: this.onSliderInput,
                            onChange: this.onSliderChange,
                            onMouseDown: this.onMouseDown,
                            onMouseUp: this.onMouseUp
                        }), o && Object(i.h)("div", {
                            class: "max-amount"
                        }, this.getDisplayValue(l)), Object(i.h)("style", {
                            dangerouslySetInnerHTML: {
                                __html: this.getStyleElement()
                            }
                        }), p === r.DOWN && Object(i.h)("div", {
                            class: c("slider-tooltip", {
                                active: d || f
                            }),
                            "data-balloon": this.getDisplayValue(y),
                            "data-balloon-pos": r.DOWN,
                            style: {
                                left: this.getLeftOffset()
                            }
                        }))
                    }, e
                }(i.Component);
            ! function(t) {
                t.UP = "up", t.DOWN = "down"
            }(r || (r = {}))
        },
        613: function(t, e, n) {
            "use strict";
            n.d(e, "c", (function() {
                return h
            })), n.d(e, "b", (function() {
                return d
            })), n.d(e, "a", (function() {
                return f
            }));
            var o, r = n(19),
                i = n(110),
                a = n(614),
                s = n(111),
                c = n(587),
                l = n(555),
                u = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                p = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                h = ["Kitchen", "Master Bedroom", "Bedroom", "Master Bathroom", "Bathroom", "Living Room", "Family Room", "Dining Room", "Patio", "Balcony", "Backyard", "Front Yard", "Hallway", "Laundry", "Pantry", "Closet", "Garage", "Driveway", "Basement", "Facade", "Garden", "Lobby", "Office", "Pool", "Unfurnished", "Stairway", "Elevator", "Escalator", "Study", "Spa", "Reception", "Meeting Room", "Storage", "Break Room", "Lunch Room", "Conference Room"],
                d = "label",
                f = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.startDrag = null, n.deleteLabel = function() {
                            n.props.manager && n.props.manager.deleteLabel(n.props.sid)
                        }, n.checkSelected = function(t) {
                            var e = t === n.props.sid;
                            n.state.selected !== e && n.setState({
                                selected: e
                            })
                        }, n.onEditingChanged = function(t) {
                            var e = t === n.props.sid;
                            n.state.editingText && !e && (n.textCache ? n.onEdited(n.textCache) : n.onEdited(n.props.text))
                        }, n.onMouseDown = function(t) {
                            n.setState({
                                dragging: !0
                            }), n.startDrag = {
                                x: t.clientX,
                                y: t.clientY
                            }, window.addEventListener("mousemove", n.onMouseMove), window.addEventListener("mouseup", n.onMouseUp)
                        }, n.onMouseMove = function(t) {
                            n.startDrag && (n.setState({
                                offsetX: t.clientX - n.startDrag.x,
                                offsetY: t.clientY - n.startDrag.y
                            }), n.props.manager && n.props.manager.updatePlacing({
                                x: t.clientX,
                                y: t.clientY
                            }, !0).then((function(t) {
                                n.setState({
                                    canPlace: t
                                })
                            })))
                        }, n.onMouseUp = function(t) {
                            var e = n.props,
                                o = e.sid,
                                r = e.position,
                                i = e.manager,
                                a = n.state,
                                s = a.offsetX,
                                c = a.offsetY;
                            if (n.startDrag = null, n.setState({
                                    dragging: !1
                                }), window.removeEventListener("mousemove", n.onMouseMove), window.removeEventListener("mouseup", n.onMouseUp), i) {
                                if (!n.state.canPlace) return void n.setState({
                                    canPlace: !0,
                                    offsetX: 0,
                                    offsetY: 0
                                });
                                i.updateLabelPosition(o, {
                                    x: r.x + s,
                                    y: r.y + c
                                }).then((function() {
                                    n.setState({
                                        offsetX: 0,
                                        offsetY: 0
                                    })
                                }))
                            }
                        }, n.startEditing = function() {
                            n.props.manager && n.props.manager.editLabel(n.props.sid), n.setState({
                                editingText: !0
                            })
                        }, n.onEdited = function(t) {
                            n.setState({
                                editingText: !1,
                                newText: t
                            }), n.props.manager && n.props.manager.renameLabel(n.props.sid, t)
                        }, n.onInput = function(t) {
                            n.textCache = t
                        }, n.state = {
                            editingText: !1,
                            newText: "",
                            dragging: !1,
                            width: null,
                            offsetX: 0,
                            offsetY: 0,
                            selected: !1,
                            canPlace: !0
                        }, n.onMouseEnter = n.selectLabel(!0), n.onMouseLeave = n.selectLabel(!1), n
                    }
                    return u(e, t), e.prototype.componentDidMount = function() {
                        this.props.manager && (this.props.manager.selected.value && this.checkSelected(this.props.manager.selected.value), this.selectSubscription = this.props.manager.selected.onChanged(this.checkSelected), this.selectSubscription.renew(), this.editingSub = this.props.manager.editing.onChanged(this.onEditingChanged), this.editingSub.renew())
                    }, e.prototype.componentWillUnmount = function() {
                        this.selectSubscription && this.selectSubscription.cancel(), this.editingSub && this.editingSub.cancel()
                    }, e.prototype.componentWillReceiveProps = function(t) {
                        t.text !== this.props.text && this.setState({
                            newText: ""
                        })
                    }, e.prototype.selectLabel = function(t) {
                        var e = this;
                        return function() {
                            e.props.manager && (e.props.manager.selected.value === e.props.sid || t) && e.props.manager.toggleSelected(e.props.sid, t)
                        }
                    }, e.prototype.render = function() {
                        var t = this.props,
                            e = t.position,
                            n = t.text,
                            o = {
                                left: this.state.offsetX + e.x + "px",
                                top: this.state.offsetY + e.y + "px",
                                transform: this.props.rotation ? "translate(-50%, -50%) rotate(" + this.props.rotation + "deg)" : "translate(-50%, -50%)"
                            };
                        this.state.width && (o.maxWidth = this.state.width + "px");
                        var s = this.state.newText || n,
                            u = {
                                label: !0,
                                editable: !0,
                                editing: this.state.editingText,
                                selected: this.state.selected,
                                canPlace: this.state.canPlace
                            };
                        return this.props.visible ? Object(r.h)(l.a, {
                            className: i(u),
                            sendEvents: [l.a.SendEvent.HOVER],
                            onMouseEnter: this.onMouseEnter,
                            onMouseLeave: this.onMouseLeave,
                            includeChildrenEvents: !0,
                            style: o
                        }, this.state.canPlace ? Object(r.h)("div", {
                            class: i("default-label")
                        }, !this.state.editingText && Object(r.h)("div", {
                            class: "default-text"
                        }, Object(r.h)("span", {
                            class: i("label-name", 0 === s.length && "u-hidden", {
                                dragging: this.state.dragging
                            }),
                            onMouseDown: this.onMouseDown
                        }, s), Object(r.h)("span", {
                            class: "divider"
                        }), Object(r.h)("span", {
                            onClick: this.startEditing,
                            class: "icon icon-toggle-pencil"
                        }), Object(r.h)("span", {
                            class: "divider"
                        }), Object(r.h)("span", {
                            class: "icons icon-delete",
                            onClick: this.deleteLabel
                        })), this.state.editingText && Object(r.h)(a.a, {
                            text: s,
                            defaultText: d,
                            placeholder: "Add a Label",
                            editing: this.state.editingText,
                            onEdited: this.onEdited,
                            maxLength: 24,
                            suggestions: h,
                            onInput: this.onInput
                        })) : Object(r.h)(c.a, null)) : null
                    }, e = p([s.a], e)
                }(r.Component)
        },
        614: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return p
            }));
            var o, r = n(526),
                i = n(19),
                a = n(91),
                s = n(110),
                c = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                l = function() {
                    return (l = Object.assign || function(t) {
                        for (var e, n = 1, o = arguments.length; n < o; n++)
                            for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
                        return t
                    }).apply(this, arguments)
                },
                u = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                p = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.onInput = function(t) {
                            n.props.onInput && n.props.onInput(t);
                            var e = t ? n.allSuggestions.filter((function(e) {
                                return 0 === e.toLowerCase().indexOf(t.toLowerCase())
                            })) : [];
                            n.setState({
                                suggestions: e,
                                selected: -1
                            })
                        }, n.onSuggestionChosen = function(t) {
                            return function(e) {
                                e.stopPropagation(), n.textInput.stopEditing(t), n.setState({
                                    suggestions: [],
                                    selected: -1
                                })
                            }
                        }, n.getSuggestions = function() {
                            var t, e, o = [],
                                r = 0;
                            try {
                                for (var a = u(n.state.suggestions), c = a.next(); !c.done; c = a.next()) {
                                    var l = c.value,
                                        p = r === n.state.selected;
                                    o.push(Object(i.h)("div", {
                                        class: s("suggestion", {
                                            selected: p
                                        }),
                                        onMouseDown: n.onSuggestionChosen(l)
                                    }, l)), r++
                                }
                            } catch (e) {
                                t = {
                                    error: e
                                }
                            } finally {
                                try {
                                    c && !c.done && (e = a.return) && e.call(a)
                                } finally {
                                    if (t) throw t.error
                                }
                            }
                            return o
                        }, n.onKeyPress = function(t) {
                            if (t.stopPropagation(), !n.props.onKeyPress || !n.props.onKeyPress(t)) {
                                var e = t.which || t.keyCode;
                                if (e === a.a.DOWNARROW || e === a.a.UPARROW || e === a.a.RETURN) {
                                    switch (e) {
                                        case a.a.DOWNARROW:
                                            n.setState((function(t) {
                                                return {
                                                    selected: Math.min(t.selected + 1, n.state.suggestions.length - 1)
                                                }
                                            }));
                                            break;
                                        case a.a.UPARROW:
                                            n.setState((function(t) {
                                                return {
                                                    selected: Math.max(t.selected - 1, -1)
                                                }
                                            }));
                                            break;
                                        case a.a.RETURN:
                                            if ("keydown" === t.type) return;
                                            if (n.state.selected > -1) return n.textInput.stopEditing(n.state.suggestions[n.state.selected]), !0
                                    }
                                    return !1
                                }
                            }
                        }, n.saveRef = function(t) {
                            n.textInput = t
                        }, n.state = {
                            text: "",
                            selected: -1,
                            showSuggestions: !1,
                            suggestions: []
                        }, n.allSuggestions = n.props.suggestions.sort(), n
                    }
                    return c(e, t), e.prototype.render = function() {
                        var t = l({}, this.props);
                        return this.state.text && (t.text = this.state.text), t.onInput = this.onInput, t.onKeyPress = this.onKeyPress, t.ref = this.saveRef, t.closeOnFocusOut = !0, Object(i.h)("div", {
                            class: "autocomplete-menu"
                        }, Object(i.h)(r.a, t), Object(i.h)("div", {
                            class: "suggestion-container"
                        }, this.getSuggestions()))
                    }, e
                }(i.Component)
        },
        615: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return l
            }));
            var o, r = n(19),
                i = n(111),
                a = n(14),
                s = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                c = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                l = function(t) {
                    function e(e) {
                        var o = t.call(this, e) || this;
                        return o.strokePattern = [0, 100], o.strokeOffset = 0, o.innerRadius = 15.92, o.strokeWidth = 1, o.drawRadius = o.innerRadius + o.strokeWidth / 2, o.updateSvgAttributes(e), o.elementId = o.props.id || "circle-progress-" + n.id++, o
                    }
                    var n;
                    return s(e, t), n = e, e.prototype.componentWillReceiveProps = function(t) {
                        this.updateSvgAttributes(t)
                    }, e.prototype.updateSvgAttributes = function(t) {
                        this.strokeWidth = t.barWidth || this.strokeWidth, this.innerRadius = t.innerRadius || this.innerRadius, this.drawRadius = this.innerRadius + this.strokeWidth / 2;
                        var e = 2 * this.drawRadius * Math.PI;
                        this.strokeOffset = e * (t.startPosition || this.strokeOffset), this.strokePattern[0] = e * Object(a.e)(t.progress, 0, 100) / 100, this.strokePattern[1] = e - this.strokePattern[0]
                    }, e.prototype.render = function() {
                        var t = 2 * (this.innerRadius + this.strokeWidth),
                            e = t / 2;
                        return Object(r.h)("svg", {
                            id: this.elementId,
                            class: this.props.appendClass,
                            viewBox: -e + " " + -e + " " + t + " " + t
                        }, Object(r.h)("circle", {
                            class: "bar-bg",
                            cx: "0",
                            cy: "0",
                            r: this.drawRadius,
                            transform: "rotate(-90) " + (this.props.ccw ? "scale(-1 1)" : ""),
                            "stroke-dasharray": this.strokePattern[1] + " " + this.strokePattern[0],
                            "stroke-dashoffset": this.strokeOffset - this.strokePattern[0],
                            "stroke-width": this.strokeWidth,
                            fill: "none"
                        }), Object(r.h)("circle", {
                            class: "progress",
                            cx: "0",
                            cy: "0",
                            r: this.drawRadius,
                            transform: "rotate(-90) " + (this.props.ccw ? "scale(-1 1)" : ""),
                            "stroke-dasharray": this.strokePattern[0] + " " + this.strokePattern[1],
                            "stroke-width": this.strokeWidth,
                            fill: "none"
                        }), this.props.children)
                    }, e.id = 0, e = n = c([i.b], e)
                }(r.Component)
        },
        616: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return l
            }));
            var o, r = n(19),
                i = n(111),
                a = n(251),
                s = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                c = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                l = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.stopClickPropagation = function(t) {
                            t.stopPropagation()
                        }, e
                    }
                    return s(e, t), e.prototype.render = function() {
                        var t = this.props,
                            e = t.children,
                            n = t.open,
                            o = t.appendClass,
                            i = t.close,
                            s = t.arrowPosition,
                            c = Object(r.h)("div", {
                                class: "settings-container settings-box",
                                onClick: this.stopClickPropagation
                            }, e);
                        return Object(r.h)(a.b, {
                            open: n,
                            message: c,
                            appendClass: o,
                            arrowPos: s,
                            onClose: i
                        })
                    }, e = c([i.b], e)
                }(r.Component)
        },
        617: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return c
            }));
            var o, r = n(19),
                i = n(111),
                a = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                s = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                c = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return a(e, t), e.prototype.render = function() {
                        var t = this.props,
                            e = t.label,
                            n = t.children,
                            o = t.appendClass || "";
                        return Object(r.h)("div", {
                            class: "settings-toggle " + o
                        }, e && Object(r.h)("div", {
                            class: "settings-label"
                        }, e), n)
                    }, e = s([i.b], e)
                }(r.Component)
        },
        618: function(t, e, n) {
            t.exports = n.p + "images/headset-gearvr.png"
        },
        633: function(t, e, n) {
            "use strict";
            var o, r = n(19),
                i = n(110),
                a = n(552),
                s = n(518),
                c = n(585),
                l = n(586),
                u = n(553),
                p = n(94),
                h = n(146),
                d = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                });
            r.options.debounceRendering = requestAnimationFrame;
            var f = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.dragStartScroll = 0, n.getScrollableContainer = function() {
                            return n.innerWrapper
                        }, n.scrollWithScrollBar = function(t) {
                            t.hasOwnProperty("x") && n.scrollTo(t.x)
                        }, n.scrollTo = function(t) {
                            void 0 === t || isNaN(t) || (n.innerWrapper.scrollLeft = Math.max(Math.min(1, t) * n.state.childLength, 0), n.setState({
                                scrollOffset: n.innerWrapper.scrollLeft
                            }))
                        }, n.handleDragStart = function() {
                            n.setState({
                                scrollCenter: null
                            })
                        }, n.handlePressStart = function() {
                            n.dragStartScroll = n.innerWrapper.scrollLeft
                        }, n.handlePressMove = function(t) {
                            var e = (t.x + n.dragStartScroll) / n.state.childLength;
                            n.scrollTo(e)
                        }, n.handleWheelEvent = function(t) {
                            0 === t.deltaX && 0 !== t.deltaY ? (n.handlePressStart(), n.handlePressMove({
                                x: t.deltaY,
                                y: 0
                            })) : (n.setState({
                                scrollCenter: null
                            }), n.handleExternalChange())
                        }, n.handleClick = function(t) {
                            n.props.handleClick && n.props.handleClick(t)
                        }, n.handleDragEnd = function(t, e) {
                            var o = t.x / e,
                                r = Math.min(s.d, Math.abs(s.d * o)),
                                i = n.innerWrapper.scrollLeft,
                                a = o * r / 2;
                            n.animation = new l.a({
                                duration: r,
                                startValue: i / n.state.childLength,
                                endValue: Math.max(0, Math.min((i + a) / n.state.childLength, 1)),
                                easingFunction: p.h
                            })
                        }, n.state = {
                            scrollCenter: null,
                            scrollOffset: 0,
                            wrapperLength: 0,
                            childLength: 0
                        }, n.resizeSubscription = Object(h.c)(h.b.RESIZE, (function() {
                            return n.handleExternalChange(h.b.RESIZE)
                        })), n.inputFilter = new u.a({
                            handlePressStart: n.handlePressStart,
                            handlePressMove: n.handlePressMove,
                            handleDragStart: n.handleDragStart,
                            handleDragEnd: n.handleDragEnd,
                            handleClick: n.handleClick
                        }), n
                    }
                    return d(e, t), e.prototype.componentDidMount = function() {
                        this.resizeSubscription.renew(), this.innerWrapper.addEventListener("wheel", this.handleWheelEvent, !0);
                        var t = this.inputFilter.handleEvent;
                        window.PointerEvent || (window.addEventListener("mousemove", t), window.addEventListener("mouseleave", t), window.addEventListener("mouseup", t)), window.addEventListener("pointermove", t), window.addEventListener("pointerup", t), window.addEventListener("touchmove", t), window.addEventListener("touchend", t), window.addEventListener("touchcancel", t), this.props.scrollbarScrollingOnly ? this.innerWrapper.addEventListener("click", this.handleClick) : (this.innerWrapper.addEventListener("mousedown", t), this.innerWrapper.addEventListener("pointerdown", t), this.innerWrapper.addEventListener("touchstart", t))
                    }, e.prototype.componentWillUnmount = function() {
                        this.resizeSubscription.cancel(), this.innerWrapper.removeEventListener("wheel", this.handleWheelEvent, !0);
                        var t = this.inputFilter.handleEvent;
                        window.PointerEvent || (window.removeEventListener("mousemove", t), window.removeEventListener("mouseleave", t), window.removeEventListener("mouseup", t)), window.removeEventListener("pointermove", t), window.removeEventListener("touchmove", t), window.removeEventListener("pointerup", t), window.removeEventListener("touchend", t), window.removeEventListener("touchcancel", t), this.props.scrollbarScrollingOnly ? this.innerWrapper.removeEventListener("click", this.handleClick) : (this.innerWrapper.removeEventListener("mousedown", t), this.innerWrapper.removeEventListener("pointerdown", t), this.innerWrapper.removeEventListener("touchstart", t))
                    }, e.prototype.componentWillReceiveProps = function(t) {
                        var e = this.inputFilter.handleEvent;
                        t.scrollbarScrollingOnly && !this.props.scrollbarScrollingOnly ? (this.innerWrapper.addEventListener("click", this.handleClick), this.innerWrapper.removeEventListener("mousedown", e), this.innerWrapper.removeEventListener("pointerdown", e), this.innerWrapper.removeEventListener("touchstart", e)) : !t.scrollbarScrollingOnly && this.props.scrollbarScrollingOnly && (this.innerWrapper.addEventListener("mousedown", e), this.innerWrapper.addEventListener("pointerdown", e), this.innerWrapper.addEventListener("touchstart", e), this.innerWrapper.removeEventListener("click", this.handleClick))
                    }, e.prototype.componentDidUpdate = function() {
                        var t = this;
                        if (this.animation)
                            if (this.animation.isAnimating) {
                                var e = this.animation.getUpdatedValue();
                                window.requestAnimationFrame((function() {
                                    t.innerWrapper && t.scrollTo(e)
                                }))
                            } else this.animation = null
                    }, e.prototype.getSnapshotBeforeUpdate = function() {
                        this.props.waitToUpdate || this.handleExternalChange()
                    }, e.prototype.scrollToElement = function(t) {
                        if (t && t.compareDocumentPosition(this.innerWrapper) & Node.DOCUMENT_POSITION_CONTAINS) {
                            this.setState({
                                scrollCenter: t
                            });
                            for (var e = t.offsetLeft + t.offsetWidth / 2, n = t; n.parentElement && n !== this.innerWrapper;) e += (n = n.parentElement).offsetLeft;
                            var o = (e - this.outerWrapper.parentElement.offsetWidth / 2) / this.state.childLength;
                            this.animation = new l.a({
                                duration: s.d,
                                startValue: this.innerWrapper.scrollLeft / this.state.childLength,
                                endValue: Math.max(0, Math.min(1, o))
                            })
                        }
                    }, e.prototype.handleExternalChange = function(t) {
                        this.state.scrollCenter && t && t === h.b.RESIZE && this.scrollToElement(this.state.scrollCenter);
                        var e = {
                            wrapperLength: Number(this.innerWrapper && this.innerWrapper.clientWidth) || 1,
                            childLength: Number(this.innerWrapper.firstElementChild && this.innerWrapper.firstElementChild.clientWidth) || 1,
                            scrollOffset: this.innerWrapper && this.innerWrapper.scrollLeft
                        };
                        Object(a.a)(this.state, e) && this.setState(e)
                    }, e.prototype.render = function() {
                        var t = this,
                            e = this.props,
                            n = e.hideScrollbar,
                            o = e.children,
                            a = e.onScrollableChanged,
                            l = e.onScrollPositionChange,
                            u = this.state,
                            p = u.wrapperLength,
                            h = u.childLength,
                            d = u.scrollOffset;
                        return Object(r.h)("div", {
                            class: i("outerScrollbarWrapper", "horizontalOnly"),
                            ref: function(e) {
                                t.outerWrapper = e
                            }
                        }, Object(r.h)("div", {
                            class: "innerScrollbarWrapper",
                            ref: function(e) {
                                t.innerWrapper = e
                            }
                        }, Object(r.h)("div", {
                            class: "paddingScrollbarWrapper"
                        }, o)), Object(r.h)(c.a, {
                            direction: s.b.horizontal,
                            wrapperLength: p,
                            childLength: h,
                            scrollOffset: d,
                            scrollTo: this.scrollWithScrollBar,
                            forceHidden: n,
                            onVisibilityChange: a,
                            onScrollPositionChange: l
                        }))
                    }, e
                }(r.Component),
                y = n(533),
                v = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                m = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.onWindowResize = function() {
                            var t = Object(y.a)(window);
                            n.state.hideScrollbar !== t && n.setState({
                                hideScrollbar: t
                            })
                        }, n.onScrollableChanged = function(t) {
                            n.setState({
                                scrollable: t
                            })
                        }, n.onScrollPositionChange = function(t) {
                            n.setState({
                                scrollPosition: t
                            })
                        }, n.getScrollableContainer = function() {
                            return n.scrollbar ? n.scrollbar.getScrollableContainer() : void 0
                        }, n.handleHighlightClickable = function() {
                            n.props.highlightClickable(!0)
                        }, n.state = {
                            scrollLeft: 0,
                            hideScrollbar: Object(y.a)(window),
                            scrollPosition: s.c.None,
                            scrollable: !1
                        }, n.resizeSubscription = Object(h.c)(h.b.RESIZE, n.onWindowResize), n
                    }
                    return v(e, t), e.prototype.componentDidMount = function() {
                        this.resizeSubscription.renew(), this.onScrollableChanged(!0), this.onScrollPositionChange(s.c.Beginning)
                    }, e.prototype.componentWillUnmount = function() {
                        this.resizeSubscription.cancel()
                    }, e.prototype.componentDidUpdate = function(t) {
                        var e = this.props.activeElement;
                        null !== e && t.activeElement !== e && this.scrollbar.scrollToElement(e)
                    }, e.prototype.setSorting = function(t) {
                        t ? this.el.classList.add("sorting") : this.el.classList.remove("sorting")
                    }, e.prototype.render = function() {
                        var t, e = this,
                            n = this.props,
                            o = n.scrollbarScrollingOnly,
                            a = n.children,
                            s = n.totalSteps,
                            c = this.state,
                            l = c.hideScrollbar,
                            u = c.scrollPosition,
                            p = c.scrollable,
                            h = i(((t = {
                                scrollable: p
                            })[u] = !0, t));
                        return Object(r.h)("div", {
                            id: "reel",
                            class: h,
                            ref: function(t) {
                                e.el = t
                            }
                        }, Object(r.h)(f, {
                            ref: function(t) {
                                return e.scrollbar = t
                            },
                            hideScrollbar: l,
                            scrollbarScrollingOnly: o,
                            waitToUpdate: 0 === s,
                            handleClick: this.handleHighlightClickable,
                            onScrollableChanged: this.onScrollableChanged,
                            onScrollPositionChange: this.onScrollPositionChange
                        }, a))
                    }, e
                }(r.Component);
            e.a = m
        },
        634: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return r
            }));
            var o = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                r = function() {
                    function t(t) {
                        this.comparer = t || this.defaultComparer, this.poolArray = []
                    }
                    return t.prototype.add = function(t) {
                        var e = this.createObjectDescriptor(t);
                        return e.object = t, e.inUse = !0, this.addObjectDescriptorToPool(e), e
                    }, t.prototype.get = function(t) {
                        var e, n;
                        try {
                            for (var r = o(this.poolArray), i = r.next(); !i.done; i = r.next()) {
                                var a = i.value;
                                if (!a.inUse && this.comparer(a, t)) return a.inUse = !0, a
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                i && !i.done && (n = r.return) && n.call(r)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        return null
                    }, t.prototype.free = function(t) {
                        var e, n;
                        try {
                            for (var r = o(this.poolArray), i = r.next(); !i.done; i = r.next()) {
                                var a = i.value;
                                if (a.object === t) return a.inUse = !1, !0
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                i && !i.done && (n = r.return) && n.call(r)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        return !1
                    }, t.prototype.all = function() {
                        return this.poolArray
                    }, t.prototype.remove = function(t) {
                        var e = this.poolArray.findIndex((function(e) {
                            return e.object === t
                        }));
                        return -1 !== e && (this.poolArray.splice(e, 1), !0)
                    }, t.prototype.defaultComparer = function(t, e) {
                        return !0
                    }, t.prototype.createObjectDescriptor = function(t) {
                        return {
                            object: t,
                            inUse: !1
                        }
                    }, t.prototype.addObjectDescriptorToPool = function(t) {
                        this.poolArray.push(t)
                    }, t
                }()
        },
        635: function(t, e, n) {
            "use strict";
            var o, r = n(9),
                i = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                a = function(t) {
                    function e(e, n, o) {
                        var r = t.call(this) || this;
                        return r.size = e, r.sweepId = n, r.renderTarget = o, r
                    }
                    return i(e, t), e
                }(r.a);
            e.a = a
        },
        636: function(t, e) {
            t.exports = "varying vec3 vWorldPosition;\n\nvoid main() {\n  vWorldPosition = position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"
        },
        637: function(t, e) {
            t.exports = "uniform samplerCube map;\nuniform float opacity;\n\nvarying vec3 vWorldPosition;\n\nvoid main() {\n  vec4 color = textureCube( map, vec3( -vWorldPosition.x, vWorldPosition.yz ) );\n  gl_FragColor = vec4(color.rgb, opacity);\n}\n"
        },
        638: function(t, e) {
            t.exports = "#ifdef PANO_TEXTURE\n  uniform vec3 pano0Position;\n  uniform mat4 pano0Matrix;\n  varying vec3 vWorldPosition0;\n#endif\n\n#ifdef PANO_TEXTURE_TRANSITION\n  varying vec3 vWorldPosition1;\n  uniform vec3 pano1Position;\n  uniform mat4 pano1Matrix;\n#endif\n\n#ifdef MESH_PREVIEW_SPHERE\n  varying vec3 worldPos;\n#endif\n\n#ifdef MESH_TEXTURE\n  varying vec2 vUv;\n#endif\n\n#ifdef WIREFRAME\n  attribute vec3 barycentric;\n  varying vec3 vBarycentric;\n#endif\n\n#ifdef FLAT_SHADING\n  varying vec3 vNormal;\n#endif\n\nvoid main() {\n\n  vec4 worldPosition = modelMatrix * vec4(position, 1.0);\n\n  #ifdef MESH_TEXTURE\n    vUv = uv;\n  #endif\n\n  #ifdef WIREFRAME\n    vBarycentric = barycentric;\n  #endif\n\n  #ifdef MESH_PREVIEW_SPHERE\n    worldPos = worldPosition.xyz;\n  #endif\n\n  #ifdef FLAT_SHADING\n    vNormal = normal;\n  #endif\n\n  #ifdef PANO_TEXTURE\n    vec3 positionLocalToPanoCenter0 = worldPosition.xyz - pano0Position;\n    vWorldPosition0 = (vec4(positionLocalToPanoCenter0, 1.0) * pano0Matrix).xyz;\n    vWorldPosition0.x *= -1.0;\n  #endif\n\n  #ifdef PANO_TEXTURE_TRANSITION\n    vec3 positionLocalToPanoCenter1 = worldPosition.xyz - pano1Position;\n    vWorldPosition1 = (vec4(positionLocalToPanoCenter1, 1.0) * pano1Matrix).xyz;\n    vWorldPosition1.x *= -1.0;\n  #endif\n\n  vec4 projectedPosition = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n  gl_Position = projectedPosition;\n\n}\n"
        },
        639: function(t, e) {
            t.exports = "#ifdef PANO_TEXTURE\n  uniform vec3 pano0Position;\n  uniform samplerCube pano0Map;\n  varying vec3 vWorldPosition0;\n#endif\n\n#ifdef PANO_TEXTURE_TRANSITION\n  uniform float progress;\n\n  uniform vec3 pano1Position;\n  uniform samplerCube pano1Map;\n  varying vec3 vWorldPosition1;\n#endif\n\n#ifdef MESH_PREVIEW_SPHERE\n  uniform vec3 meshPreviewCenter;\n  uniform float meshPreviewSize;\n  varying vec3 worldPos;\n#endif\n\n#ifdef MESH_TEXTURE\n  varying vec2 vUv;\n  uniform sampler2D map;\n  uniform float meshOpacity;\n  uniform float opacity;\n#endif\n\n#ifdef COLOR_OVERLAY\n  uniform vec4 colorOverlay;\n#endif\n\n#ifdef WIREFRAME\n  // Wireframe stuff is based on https://github.com/mattdesl/webgl-wireframes\n  varying vec3 vBarycentric;\n\n  uniform float time;\n  uniform float thickness;\n  uniform float secondThickness;\n\n  uniform float dashRepeats;\n  uniform float dashLength;\n  uniform bool dashOverlap;\n  uniform bool dashEnabled;\n  uniform bool dashAnimate;\n\n  uniform bool fillEnabled;\n  uniform bool insideAltColor;\n  uniform bool dualStroke;\n\n  uniform bool squeeze;\n  uniform float squeezeMin;\n  uniform float squeezeMax;\n  uniform float wireframeOpacity;\n\n  uniform vec3 stroke;\n  uniform vec3 fill;\n\n\n  // This is like\n  float aastep (float threshold, float dist) {\n    float afwidth = fwidth(dist) * 0.5;\n    return smoothstep(threshold - afwidth, threshold + afwidth, dist);\n  }\n\n  // This function is not currently used, but it can be useful\n  // to achieve a fixed width wireframe regardless of z-depth\n  float computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n    vec3 dist = fwidth(barycentric);\n    vec3 smoothed = smoothstep(\n      dist * ((lineWidth * 0.5) - 0.5),\n      dist * ((lineWidth * 0.5) + 0.5),\n      barycentric);\n    return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n  }\n\n  // This function returns the fragment color for our styled wireframe effect\n  // based on the barycentric coordinates for this fragment\n  vec4 getStyledWireframe (vec3 barycentric) {\n\n    float PI = 3.14159265359;\n\n    // this will be our signed distance for the wireframe edge\n    float d = min(min(barycentric.x, barycentric.y), barycentric.z);\n\n    // for dashed rendering, we can use this to get the 0 .. 1 value of the line length\n    float positionAlong = max(barycentric.x, barycentric.y);\n    if (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {\n      positionAlong = 1.0 - positionAlong;\n    }\n\n    // the thickness of the stroke\n    float computedThickness = thickness;\n\n    // if we want to shrink the thickness toward the center of the line segment\n    if (squeeze) {\n      computedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));\n    }\n\n    // if we should create a dash pattern\n    if (dashEnabled) {\n      // here we offset the stroke position depending on whether it\n      // should overlap or not\n      float offset = 1.0 / dashRepeats * dashLength / 2.0;\n      if (!dashOverlap) {\n        offset += 1.0 / dashRepeats / 2.0;\n      }\n\n      // if we should animate the dash or not\n      if (dashAnimate) {\n        offset += time * 0.22;\n      }\n\n      // create the repeating dash pattern\n      float pattern = fract((positionAlong + offset) * dashRepeats);\n      computedThickness *= 1.0 - aastep(dashLength, pattern);\n    }\n\n    // Compute the anti-aliased stroke edge\n    float edge = computeScreenSpaceWireframe(barycentric, computedThickness);\n    // Replace with the folloing you want world-space thickness instead of screenspace\n    // float edge = 1.0 - aastep(computedThickness, d);\n\n    // now compute the final color of the mesh\n    vec4 outColor = vec4(0.0, 0.0, 0.0, 0.0);\n    if (!fillEnabled) {\n      outColor = vec4(stroke, edge);\n      if (insideAltColor && !gl_FrontFacing) {\n        outColor.rgb = fill;\n      }\n    } else {\n      outColor.a = 1.0;\n      if (dualStroke) {\n        float inner = 1.0 - aastep(secondThickness, d);\n        vec3 wireColor = mix(fill, stroke, abs(inner - edge));\n        outColor.rgb = wireColor;\n      } else {\n        outColor.rgb = mix(fill, stroke, edge);\n      }\n    }\n    outColor.a *= wireframeOpacity;\n    return outColor;\n  }\n#endif\n\n#ifdef FLAT_SHADING\n  varying vec3 vNormal;\n#endif\n\nvoid main() {\n  #ifdef PANO_TEXTURE_TRANSITION\n    vec4 colorFromPano0 = textureCube( pano0Map, vWorldPosition0.xyz);\n    vec4 colorFromPano1 = textureCube( pano1Map, vWorldPosition1.xyz);\n    vec4 color = mix(colorFromPano0, colorFromPano1, progress);\n  #elif defined(PANO_TEXTURE)\n    vec4 color = textureCube( pano0Map, vWorldPosition0.xyz);\n  #else\n    vec4 color = vec4(0.0, 0.0, 0.0, 1.0);\n  #endif\n\n  #ifdef MESH_TEXTURE\n    vec4 colorFromTexture = texture2D( map, vUv );\n  #endif\n\n  #ifdef MESH_PREVIEW_SPHERE\n    // the area within the previewDistance will show the mesh texture\n    float previewDistance = distance(worldPos.xyz, meshPreviewCenter.xyz);\n    float inSphere = step(previewDistance, meshPreviewSize );\n    // 20% brightness bump for in-sphere texture\n    colorFromTexture += colorFromTexture * (0.2 * inSphere);\n\n    color = mix(color, colorFromTexture, max(meshOpacity, inSphere));\n  #elif defined(MESH_TEXTURE)\n    color = mix(color, colorFromTexture, meshOpacity);\n  #endif\n\n  #ifdef FLAT_SHADING\n    float ao = 0.9 - abs(vNormal.y) * 0.1 - abs(vNormal.x) * 0.05 + abs(vNormal.z) * 0.05;\n    color.rgb = vec3(ao, ao * 1.025, ao * 1.05);\n  #endif\n\n  #ifdef COLOR_OVERLAY\n    color = mix(color, vec4(colorOverlay.rgb, 1.0), colorOverlay.a);\n  #endif\n\n  #ifdef WIREFRAME\n    vec4 colorFromWireframe = getStyledWireframe(vBarycentric);\n    color = mix(color, vec4(colorFromWireframe.rgb, 1.0), colorFromWireframe.a);\n  #endif\n\n  #ifdef MESH_TEXTURE\n    const vec4 WHITE = vec4(0.8, 0.8, 0.8, 1.0);\n    float whiteness = 1.0 - smoothstep(0.1, 0.2, opacity);\n    color = mix(color, WHITE, whiteness);\n    color.a = opacity;\n  #endif\n\n  gl_FragColor = color;\n}\n"
        },
        640: function(t, e) {
            t.exports = "varying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}\n"
        },
        641: function(t, e) {
            t.exports = "uniform sampler2D map;\nuniform float opacity;\nuniform vec4 colorOverlay;\nvarying vec2 vUv;\n\nvec4 white = vec4(0.8, 0.8, 0.8, 1.0);\nvec4 black = vec4(0.0, 0.0, 0.0, 1.0);\n\nvoid main() {\n\n  vec4 colorFromTexture = texture2D( map, vUv );\n  float whiteness = 1.0 - smoothstep(0.1, 0.2, opacity);\n  colorFromTexture = mix(colorFromTexture, vec4(colorOverlay.rgb, 1.0), colorOverlay.a);\n  colorFromTexture = mix(colorFromTexture, white, whiteness);\n  gl_FragColor = vec4(colorFromTexture.rgb, opacity);\n\n}\n"
        },
        642: function(t, e) {
            t.exports = "varying vec3 vWorldPosition;\n\nvoid main() {\n\n  vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}\n"
        },
        643: function(t, e) {
            t.exports = "uniform vec3 color;\nuniform float opacity;\nuniform float maxDistance;\n\nvarying vec3 vWorldPosition;\n\nvoid main() {\n\n  float distanceToCamera = distance(cameraPosition, vWorldPosition);\n  float distanceBucketed = 1.0 - clamp(distanceToCamera / maxDistance, 0.0, 1.0);\n  // If the floor is ghosted, we don't want to load any texture from it,\n  // and more importantly we don't want it to block the texture beneath the ghosted floor\n  if (opacity < 1.0) {\n    discard;\n  }\n  gl_FragColor = vec4(distanceBucketed, distanceBucketed, distanceBucketed, 1.0);\n\n}\n"
        },
        644: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return a
            }));
            var o, r = n(21),
                i = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                a = function(t) {
                    function e(e) {
                        var n = t.call(this) || this;
                        return n.id = "SET_CHUNK_RENDER_MODE", n.payload = {
                            mode: e
                        }, n
                    }
                    return i(e, t), e
                }(r.a)
        },
        645: function(t, e, n) {
            "use strict";
            var o = function() {};
            e.a = o
        },
        647: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return a
            }));
            var o, r = n(21),
                i = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                a = function(t) {
                    function e() {
                        return t.call(this) || this
                    }
                    return i(e, t), e
                }(r.a)
        },
        664: function(t, e, n) {
            "use strict";
            var o, r = n(19),
                i = n(110),
                a = n(111),
                s = n(45),
                c = n(179),
                l = n(346),
                u = n(253),
                p = n(90),
                h = n(3),
                d = (n(665), o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                f = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                y = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                v = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                m = new h.a("tour-controls"),
                g = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.handlePlayPause = function() {
                            return y(n, void 0, void 0, (function() {
                                var t;
                                return v(this, (function(e) {
                                    switch (e.label) {
                                        case 0:
                                            if (this.props.tourEmpty) return [2];
                                            e.label = 1;
                                        case 1:
                                            return e.trys.push([1, 6, , 7]), this.props.tourPlaying ? [4, this.stopTour()] : [3, 3];
                                        case 2:
                                            return e.sent(), [3, 5];
                                        case 3:
                                            return this.context.analytics.track("showcase_gui", {
                                                gui_action: "play_highlights"
                                            }), [4, this.startTour()];
                                        case 4:
                                            e.sent(), e.label = 5;
                                        case 5:
                                            return [3, 7];
                                        case 6:
                                            return t = e.sent(), m.debug(t), [3, 7];
                                        case 7:
                                            return [2]
                                    }
                                }))
                            }))
                        }, n
                    }
                    return d(e, t), e.prototype.startTour = function() {
                        return y(this, void 0, void 0, (function() {
                            var t;
                            return v(this, (function(e) {
                                switch (e.label) {
                                    case 0:
                                        return e.trys.push([0, 2, , 3]), [4, this.context.commandBinder.issueCommand(new c.a)];
                                    case 1:
                                        return e.sent(), [3, 3];
                                    case 2:
                                        return t = e.sent(), m.debug(t), [3, 3];
                                    case 3:
                                        return [2]
                                }
                            }))
                        }))
                    }, e.prototype.stopTour = function() {
                        return y(this, void 0, void 0, (function() {
                            var t;
                            return v(this, (function(e) {
                                switch (e.label) {
                                    case 0:
                                        return e.trys.push([0, 2, , 3]), this.context.analytics.track("showcase_gui", {
                                            gui_action: "pause_highlights"
                                        }), [4, this.context.commandBinder.issueCommand(new c.c)];
                                    case 1:
                                        return e.sent(), [3, 3];
                                    case 2:
                                        return t = e.sent(), m.debug(t), [3, 3];
                                    case 3:
                                        return [2]
                                }
                            }))
                        }))
                    }, e.prototype.render = function() {
                        var t = this.props,
                            e = t.tourEmpty,
                            n = t.tourPlaying,
                            o = "ontouchstart" in window,
                            a = e ? p.c.DISABLED : n ? p.c.ACTIVE : p.c.ENABLED;
                        return Object(r.h)(u.a, {
                            id: "tour-controls",
                            buttonState: a,
                            onClick: this.handlePlayPause
                        }, e ? Object(r.h)("span", {
                            class: "icon icon-play"
                        }) : Object(r.h)(l.a, {
                            content: n ? this.context.locale.t(s.a.PAUSE) : this.context.locale.t(s.a.PLAY),
                            position: l.b.UP,
                            tooltipTimeout: o ? 1e3 : void 0
                        }, Object(r.h)("span", {
                            class: i({
                                icon: !0,
                                "icon-pause": n,
                                "icon-play": !n
                            })
                        })))
                    }, e = f([a.b], e)
                }(r.Component);
            e.a = g
        },
        665: function(t, e, n) {},
        668: function(t, e, n) {},
        670: function(t, e, n) {},
        672: function(t, e, n) {
            "use strict";
            var o, r = n(19),
                i = n(110),
                a = n(6),
                s = n(45),
                c = n(346),
                l = n(253),
                u = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                p = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.handleButtonClick = function() {
                            a.j() ? (n.context.analytics.track("showcase_gui", {
                                gui_action: "click_exit_fullscreen",
                                interaction_source: "gui"
                            }), a.d()) : (n.context.analytics.track("showcase_gui", {
                                gui_action: "click_enter_fullscreen",
                                interaction_source: "gui"
                            }), a.u(document.body))
                        }, n.onFullScreenChange = function() {
                            n.setState({
                                fullscreen: a.j()
                            })
                        }, n.state = {
                            fullscreen: !1
                        }, document.addEventListener("fullscreenchange", n.onFullScreenChange), document.addEventListener("webkitfullscreenchange", n.onFullScreenChange), document.addEventListener("MSFullscreenChange", n.onFullScreenChange), document.addEventListener("mozfullscreenchange", n.onFullScreenChange), n
                    }
                    return u(e, t), e.prototype.render = function() {
                        var t = a.c(),
                            e = this.state.fullscreen;
                        return Object(r.h)("div", {
                            id: "fullscreen-mode"
                        }, Object(r.h)(l.a, {
                            onClick: this.handleButtonClick
                        }, Object(r.h)(c.a, {
                            content: e ? this.context.locale.t(s.a.EXIT_FULLSCREEN) : this.context.locale.t(s.a.VIEW_FULLSCREEN),
                            position: c.b.UP_LEFT,
                            tooltipTimeout: t ? 1e3 : void 0
                        }, Object(r.h)("span", {
                            class: i("icon", e ? "icon-fullscreen-exit" : "icon-fullscreen")
                        }))))
                    }, e
                }(r.Component);
            e.a = p
        },
        674: function(t, e, n) {
            "use strict";
            var o, r = n(19),
                i = n(111),
                a = n(45),
                s = n(253),
                c = n(346),
                l = n(6),
                u = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                p = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                h = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.handleButtonClick = function() {
                            var t = n.props.reelOpen ? "hide_" : "show_";
                            n.context.analytics.track("showcase_gui", {
                                gui_action: t + "highlight_reel"
                            }), n.props.onToggleHLR(!n.props.reelOpen)
                        }, n
                    }
                    return u(e, t), e.prototype.render = function() {
                        var t = this.props,
                            e = t.reelEnabled,
                            n = t.reelOpen;
                        return e ? Object(r.h)(s.a, {
                            id: "highlight-button",
                            onClick: this.handleButtonClick
                        }, Object(r.h)(c.a, {
                            content: n ? this.context.locale.t(a.a.CLOSE_HIGHLIGHTS) : this.context.locale.t(a.a.OPEN_HIGHLIGHTS),
                            position: c.b.UP_RIGHT,
                            tooltipTimeout: Object(l.c)() ? 1e3 : void 0
                        }, Object(r.h)("span", {
                            class: "icon " + (n ? "icon-dpad-down" : "icon-dpad-up")
                        }))) : null
                    }, e = p([i.b], e)
                }(r.Component);
            e.a = h
        },
        676: function(t, e, n) {
            "use strict";
            var o, r = n(19),
                i = n(110),
                a = (n(677), n(111)),
                s = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                c = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                l = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.handleClick = function() {
                            n.props.reelOpen || n.props.onToggleHLR(!0)
                        }, n
                    }
                    return s(e, t), e.prototype.getTourSteps = function() {
                        for (var t = this.props, e = t.totalSteps, n = t.activeStep, o = [], a = 0; a < e; a++) o.push(Object(r.h)("div", {
                            class: i({
                                active: a === n
                            }),
                            key: a.toString()
                        }));
                        return o
                    }, e.prototype.render = function() {
                        var t = this.props,
                            e = t.reelOpen,
                            n = t.tourPlaying,
                            o = t.activeStep,
                            a = t.totalSteps,
                            s = t.usedTour,
                            c = n || s,
                            l = i({
                                "faded-in": c
                            }),
                            u = o + 1 + "/" + a,
                            p = -1 !== o && !e && u,
                            h = -1 !== o && e && c;
                        return a > 0 ? Object(r.h)("div", {
                            id: "tour-progress",
                            class: l,
                            onClick: this.handleClick,
                            "data-balloon": p,
                            "data-balloon-pos": "right",
                            "data-balloon-size": "xs"
                        }, h && Object(r.h)("div", {
                            class: "progress-number"
                        }, u), -1 !== o && Object(r.h)("div", {
                            class: "progress-bar"
                        }, this.getTourSteps())) : null
                    }, e = c([a.b], e)
                }(r.Component);
            e.a = l
        },
        677: function(t, e, n) {},
        684: function(t, e, n) {},
        686: function(t, e, n) {},
        688: function(t, e, n) {},
        690: function(t, e, n) {},
        692: function(t, e, n) {},
        694: function(t, e, n) {},
        696: function(t, e, n) {
            t.exports = n.p + "images/escape.png"
        },
        697: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return l
            })), n.d(e, "b", (function() {
                return u
            })), n.d(e, "c", (function() {
                return d
            }));
            var o, r = n(21),
                i = n(2),
                a = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                s = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                c = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                l = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.id = "WEBVR_PRELOAD", e
                    }
                    return a(e, t), e
                }(r.a),
                u = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.id = "WEBVR_PRESENT", e
                    }
                    return a(e, t), e
                }(r.a),
                p = function(t) {
                    return s(void 0, void 0, void 0, (function() {
                        return c(this, (function(e) {
                            return t.hackLoadVrScript(), [2]
                        }))
                    }))
                },
                h = function(t) {
                    return s(void 0, void 0, void 0, (function() {
                        return c(this, (function(e) {
                            switch (e.label) {
                                case 0:
                                    return [4, t.hackEnterVrMode()];
                                case 1:
                                    return e.sent(), [2]
                            }
                        }))
                    }))
                },
                d = function(t, e, n) {
                    t.waitForModule(i.Ob).then((function(t) {
                        e.addBinding(l, (function() {
                            return s(void 0, void 0, void 0, (function() {
                                return c(this, (function(e) {
                                    return [2, p(t)]
                                }))
                            }))
                        })), e.addBinding(u, (function() {
                            return s(void 0, void 0, void 0, (function() {
                                return c(this, (function(e) {
                                    return [2, h(t)]
                                }))
                            }))
                        }))
                    })), n.addCommandToInterface({
                        version: "3.x",
                        namespace: "VR",
                        name: "preloadVr",
                        args: []
                    }, (function() {
                        return new l
                    })), n.addCommandToInterface({
                        version: "3.x",
                        namespace: "VR",
                        name: "presentVr",
                        args: []
                    }, (function() {
                        return new u
                    }))
                }
        },
        698: function(t, e, n) {},
        713: function(t, e, n) {
            "use strict";
            var o, r = n(19),
                i = n(110),
                a = n(3),
                s = n(524),
                c = n(219),
                l = n(269),
                u = n(221),
                p = n(679),
                h = n(610),
                d = n(536),
                f = n(111),
                y = n(135),
                v = n(92),
                m = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                g = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                b = new a.a("embedly"),
                w = function(t) {
                    this.msg = t
                },
                O = function(t) {
                    this.msg = t
                },
                S = function(t) {
                    this.msg = t
                },
                x = function() {
                    function t() {
                        this.embedEndpoint = "https://api.embed.ly/1/oembed", this.imageEndpoint = "https://i.embed.ly/1/display/resize", this.configEndpoint = "/api/v1/config/showcase", t.queue || (t.queue = new y.RequestQueue({
                            retries: 0
                        }))
                    }
                    return t.clearCache = function() {
                        t.embedCache = {}, t.imageCache = {}
                    }, t.prototype.getType = function(t) {
                        return m(this, void 0, Promise, (function() {
                            var e, n, o;
                            return g(this, (function(r) {
                                switch (r.label) {
                                    case 0:
                                        return [4, this.fetchFromCache(t)];
                                    case 1:
                                        if (e = r.sent()) return [2, e.type];
                                        r.label = 2;
                                    case 2:
                                        return r.trys.push([2, 4, , 5]), [4, this.getEmbedDetails(t)];
                                    case 3:
                                        return (n = r.sent()).type === v.a.rich || n.type === v.a.video ? [2, n.type] : [3, 5];
                                    case 4:
                                        return 401 === (o = r.sent()).status_code || 404 === o.status_code || 501 === o.status_code || o instanceof w ? [3, 5] : [2, v.a.error];
                                    case 5:
                                        return r.trys.push([5, 7, , 8]), [4, this.getImageDetails(t)];
                                    case 6:
                                        return r.sent(), [2, v.a.photo];
                                    case 7:
                                        return r.sent(), [3, 8];
                                    case 8:
                                        return [2, v.a.error]
                                }
                            }))
                        }))
                    }, t.prototype.fetchFromCache = function(e) {
                        return m(this, void 0, Promise, (function() {
                            var n, o, r, i;
                            return g(this, (function(a) {
                                switch (a.label) {
                                    case 0:
                                        return [4, this.getDisplayUrl(e)];
                                    case 1:
                                        return n = a.sent(), (o = t.imageCache[n]) ? [2, o] : [4, this.getOEmbedUrl(e)];
                                    case 2:
                                        return r = a.sent(), (i = t.embedCache[r]) ? [2, i] : [2, null]
                                }
                            }))
                        }))
                    }, t.prototype.getMediaDetails = function(t, e) {
                        return m(this, void 0, void 0, (function() {
                            return g(this, (function(n) {
                                switch (t) {
                                    case v.a.photo:
                                        return [2, this.getImageDetails(e)];
                                    case v.a.rich:
                                    case v.a.video:
                                        return [2, this.getEmbedDetails(e)]
                                }
                                throw Error("unsupported media type")
                            }))
                        }))
                    }, t.prototype.getOEmbedUrl = function(e) {
                        return m(this, void 0, Promise, (function() {
                            var n, o;
                            return g(this, (function(r) {
                                switch (r.label) {
                                    case 0:
                                        return [4, this.getKey()];
                                    case 1:
                                        return r.sent(), n = Math.max(window.screen.height, window.screen.width), o = "&maxwidth=" + n + "&maxheight=" + n, [2, this.embedEndpoint + "?key=" + t.key + "&url=" + encodeURIComponent(e) + o]
                                }
                            }))
                        }))
                    }, t.prototype.getEmbedDetails = function(e) {
                        return m(this, void 0, void 0, (function() {
                            var n;
                            return g(this, (function(o) {
                                switch (o.label) {
                                    case 0:
                                        return [4, this.getOEmbedUrl(e)];
                                    case 1:
                                        return n = o.sent(), t.embedCache[n] ? [2, Promise.resolve(t.embedCache[n])] : [2, this.loadEmbed(n)]
                                }
                            }))
                        }))
                    }, t.prototype.getDisplayUrl = function(e) {
                        return m(this, void 0, Promise, (function() {
                            var n, o;
                            return g(this, (function(r) {
                                switch (r.label) {
                                    case 0:
                                        return [4, this.getKey()];
                                    case 1:
                                        return r.sent(), n = Math.max(window.screen.height, window.screen.width), o = "&url=" + encodeURIComponent(e) + "&width=" + n + "&height=" + n, [2, this.imageEndpoint + "?key=" + t.key + o]
                                }
                            }))
                        }))
                    }, t.prototype.getImageDetails = function(e) {
                        return m(this, void 0, Promise, (function() {
                            var n;
                            return g(this, (function(o) {
                                switch (o.label) {
                                    case 0:
                                        return [4, this.getDisplayUrl(e)];
                                    case 1:
                                        return n = o.sent(), t.imageCache[n] ? [2, Promise.resolve(t.imageCache[n])] : [2, this.loadImage(n)]
                                }
                            }))
                        }))
                    }, t.prototype.getKey = function() {
                        return m(this, void 0, void 0, (function() {
                            return g(this, (function(e) {
                                switch (e.label) {
                                    case 0:
                                        return t.key ? [3, 2] : [4, t.queue.get(window.location.origin + this.configEndpoint).then((function(e) {
                                            var n = JSON.parse(e);
                                            t.key = n.embedly_key
                                        }))];
                                    case 1:
                                        e.sent(), e.label = 2;
                                    case 2:
                                        return [2]
                                }
                            }))
                        }))
                    }, t.prototype.loadEmbed = function(e) {
                        var n = this;
                        return t.queue.get(e, {
                            responseType: "json"
                        }).then((function(t) {
                            return n.validateAndCacheEmbed(e, t)
                        }))
                    }, t.prototype.loadImage = function(e) {
                        var n = this;
                        return new Promise((function(o, r) {
                            return t.queue.get(e, {
                                responseType: "arraybuffer"
                            }).then((function(t) {
                                return n.validateAndCacheImage(e, t)
                            })).then(o).catch(r)
                        }))
                    }, t.prototype.validateAndCacheEmbed = function(e, n) {
                        var o = n.html && n.html.match(/<script/i);
                        if (n.type === v.a.photo && (!n.html || o)) throw new w('image can\'t be used as a "rich" type');
                        if (!n || n.type === v.a.rich && (!n.html || o)) throw new O("missing html or html contains Javascript");
                        switch (n.type) {
                            case v.a.photo:
                                n.html && (n.type = v.a.rich);
                                break;
                            case v.a.rich:
                            case v.a.video:
                                break;
                            case v.a.link:
                                var r = "not supporting link types because of existing link functionality";
                                throw b.debug(r), new S(r);
                            default:
                                r = "Did the OEmbed format extend?! Unknown type: " + n.type;
                                throw b.debug(r), new S(r)
                        }
                        var i = {
                            width: n.width,
                            height: n.height,
                            embedlyResponse: {
                                html: n.html,
                                src: n.url
                            },
                            type: n.type
                        };
                        return t.embedCache[e] = i, i
                    }, t.prototype.validateAndCacheImage = function(e, n) {
                        return new Promise((function(o, r) {
                            n || r("Embedly: got an empty response when requesting image");
                            var i = new Uint8Array(n),
                                a = new Blob([i]),
                                s = new Image;
                            s.addEventListener("load", (function(n) {
                                return r = n.target, i = {
                                    width: r.naturalWidth,
                                    height: r.naturalHeight,
                                    embedlyResponse: {
                                        url: c,
                                        src: e
                                    },
                                    type: v.a.photo
                                }, t.imageCache[e] = i, void o(i);
                                var r, i
                            }));
                            var c = URL.createObjectURL(a);
                            s.src = c
                        }))
                    }, t.embedCache = {}, t.imageCache = {}, t
                }(),
                P = n(91),
                _ = n(27),
                T = n(730),
                D = n(6);
            n(554);
            ! function(t) {
                t[t.NOT_READY = 1] = "NOT_READY", t[t.CUED = 2] = "CUED", t[t.PLAYING = 3] = "PLAYING", t[t.PAUSED = 4] = "PAUSED"
            }(o || (o = {}));
            var k, M, E = n(496),
                C = (k = function(t, e) {
                    return (k = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    k(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                j = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                L = new a.a("mattertag-media"),
                R = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.playerControls = null, n.handleClick = function() {
                            n.props.mediaType === v.a.photo && n.props.onClickImage && n.props.onClickImage()
                        }, n.onPlayerLoaded = function(t) {
                            n.playerControls = t, t.play()
                        }, n.setupPlayerControls = function(t) {
                            var e = o.NOT_READY;
                            try {
                                t.on("ready", (function() {
                                    e = o.CUED, n.onPlayerLoaded(i)
                                })), t.on("play", (function() {
                                    e = o.PLAYING
                                })), t.on("pause", (function() {
                                    e = o.PAUSED
                                })), t.on("ended", (function() {}))
                            } catch (t) {
                                L.debug(t)
                            }
                            var r = Object(D.o)(),
                                i = {
                                    play: function() {
                                        if (t && e !== o.NOT_READY && !r) try {
                                            t.play()
                                        } catch (t) {
                                            L.debug(t)
                                        }
                                    },
                                    pause: function() {
                                        if (t && e !== o.NOT_READY) try {
                                            t.pause()
                                        } catch (t) {
                                            L.debug(t)
                                        }
                                    }
                                }
                        }, n.mediaStyles = function() {
                            var t = n.props,
                                e = t.width,
                                o = t.height,
                                r = {
                                    backgroundImage: 'url("' + n.props.mediaPayload.url + '")',
                                    width: e + "px",
                                    height: o + "px"
                                };
                            if (n.props.mediaPayload) switch (n.props.mediaType) {
                                case v.a.photo:
                                    return r;
                                case v.a.rich:
                                    return {
                                        width: e + "px",
                                        height: o + "px"
                                    };
                                case v.a.video:
                                    return {
                                        width: e + "px",
                                        height: Math.min(Math.max(o / e, E.b), 1) * e + "px"
                                    }
                            }
                            return {}
                        }, n
                    }
                    return C(e, t), e.prototype.componentWillReceiveProps = function(t) {
                        t.mediaPayload !== this.props.mediaPayload && this.iframe && this.iframe.parentNode && (this.iframe.parentNode.removeChild(this.iframe), this.iframe = null), this.playerControls && this.props.closing !== t.closing && (t.closing ? this.playerControls.pause() : this.playerControls.play())
                    }, e.prototype.createEmbed = function(t) {
                        var e = this,
                            n = document.createElement("div");
                        if (n.innerHTML = this.props.mediaPayload.html, this.iframe = n.firstChild, this.props.mediaType === v.a.video) {
                            var o = new T.Player(this.iframe);
                            this.iframe.addEventListener("load", (function() {
                                return e.setupPlayerControls(o)
                            }))
                        }
                        t.appendChild(this.iframe)
                    }, e.prototype.render = function() {
                        var t = this,
                            e = this.props,
                            n = e.mediaPayload,
                            o = e.mediaType,
                            a = e.landscape;
                        if (!n) return null;
                        var s = i({
                                tagImage: o === v.a.photo,
                                tagEmbed: o === v.a.rich,
                                tagVideo: o === v.a.video,
                                landscape: a
                            }),
                            c = n && n.html ? Object(r.h)("div", {
                                class: "tagEmbedContent",
                                ref: function(e) {
                                    e && !t.iframe && t.createEmbed(e)
                                }
                            }) : null;
                        return Object(r.h)("div", {
                            className: i("tagMediaContent"),
                            onClick: this.handleClick
                        }, Object(r.h)("div", {
                            className: s,
                            style: this.mediaStyles()
                        }, c))
                    }, e = j([f.b], e)
                }(r.Component),
                A = n(526),
                I = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                };
            ! function(t) {
                t.htmlToString = function(i) {
                    var a, s, c = "",
                        l = [].slice.call(i.childNodes);
                    try {
                        for (var u = I(l), p = u.next(); !p.done; p = u.next()) {
                            var h = p.value;
                            switch (h.nodeName) {
                                case "#text":
                                    c += e(h);
                                    break;
                                case "A":
                                    c += n(h);
                                    break;
                                case "DIV":
                                    c += o(h);
                                    break;
                                case "BR":
                                    c += r(h);
                                    break;
                                default:
                                    c += t.htmlToString(h)
                            }
                        }
                    } catch (t) {
                        a = {
                            error: t
                        }
                    } finally {
                        try {
                            p && !p.done && (s = u.return) && s.call(u)
                        } finally {
                            if (a) throw a.error
                        }
                    }
                    return c
                }, t.renderChunks = function(t, e) {
                    var n, o;
                    try {
                        for (var r = I(e), i = r.next(); !i.done; i = r.next()) {
                            var a = i.value;
                            switch (a.type) {
                                case v.a.text:
                                    var s = document.createTextNode("" + a.text);
                                    t.appendChild(s);
                                    break;
                                case v.a.link:
                                    if (a.link) {
                                        var c = document.createElement("a");
                                        c.className = "tagLink", c.contentEditable = "true", c.href = "" + a.link.url, c.textContent = "" + a.link.label, t.appendChild(c)
                                    }
                            }
                        }
                    } catch (t) {
                        n = {
                            error: t
                        }
                    } finally {
                        try {
                            i && !i.done && (o = r.return) && o.call(r)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                };
                var e = function(t) {
                        var e = (t.textContent || "").replace(/\]\(/g, "]&zwnj;("),
                            n = new RegExp(/https?:\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?/gi);
                        return (e = e.replace(n, (function(t) {
                            return "[" + t + "](" + t + ")"
                        }))).replace(/\<\s*br\s*\/?>/gi, "\n")
                    },
                    n = function(t) {
                        return "[" + t.innerText + "](" + t.href + ")"
                    },
                    o = function(e) {
                        var n = "\n";
                        return e.childNodes.length > 0 && (n += t.htmlToString(e)), n
                    },
                    r = function(t) {
                        return "\n"
                    }
            }(M || (M = {}));
            var N, F = n(346),
                U = n(167),
                z = new RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$", "i"),
                V = function(t) {
                    return function(t) {
                        return z.test(t)
                    }(t) && /^https?:\/\//.test(t)
                },
                H = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                B = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                W = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        n.getInputDiv = function() {
                            return n.inputDiv
                        }, n.hasTextSelected = function() {
                            return n.range && n.range.startOffset !== n.range.endOffset
                        }, n.onSelectionChange = function() {
                            var t = n.getCurrentSelection();
                            t && (n.range = t.cloneRange())
                        }, n.addFauxHighlight = function() {
                            n.execCommand("backColor", "#ff315880")
                        }, n.removeFauxHighlight = function() {
                            n.execCommand("backColor", "transparent")
                        }, n.prepareLinkSelection = function() {
                            var t = n.getAnchorFromSelection();
                            if (n.inputDiv.focus(), t || n.range) n.addFauxHighlight();
                            else {
                                var e = window.getSelection();
                                e.selectAllChildren(n.inputDiv), e.collapseToEnd(), n.range = e.getRangeAt(0)
                            }
                            return t
                        }, n.onMouseDown = function(t) {
                            t.stopPropagation(), n.removeFauxHighlight(), n.range = null
                        }, n.onKeyPress = function(t) {
                            var e = t.which || t.keyCode;
                            if (t.stopPropagation(), e === P.a.ESCAPE) return n.props.onNavigationKey(t);
                            if (e === P.a.RETURN || e === P.a.TAB) return t.shiftKey || (t.preventDefault(), n.finalizeInput()), n.props.onNavigationKey(t);
                            if ("keydown" !== t.type) {
                                var o = n.inputDiv.innerText;
                                n.props.maxLength && o && o.length > n.props.maxLength && t.preventDefault()
                            }
                        }, n.onInput = function() {
                            n.props.onInput(n.inputDiv.innerText)
                        }, n.onPaste = function(t) {
                            var e = (t.clipboardData || window.clipboardData).getData("text/plain"),
                                o = e.length,
                                r = n.inputDiv.innerText;
                            if (n.props.maxLength && r && r.length + o > n.props.maxLength) {
                                var i = n.props.maxLength - n.inputDiv.innerText.length + window.getSelection().toString().length;
                                o = Math.min(i, o)
                            }
                            document.execCommand("insertText", !1, e.slice(0, o)), t.preventDefault()
                        }, n.onFocus = function(t) {
                            n.props.onFocus && n.props.onFocus()
                        }, n.onBlur = function() {
                            n.props.onBlur && n.props.onBlur(), n.finalizeInput()
                        };
                        var o = new U.a((function() {
                            return null
                        }), (function(t) {
                            return document.addEventListener("selectionchange", t)
                        }), (function(t) {
                            return document.removeEventListener("selectionchange", t)
                        }));
                        return n.selectionSubscription = o.createSubscription(n.onSelectionChange), n
                    }
                    return H(e, t), e.prototype.componentDidMount = function() {
                        M.renderChunks(this.getInputDiv(), this.props.initialContent), this.attachLinks(), this.selectionSubscription.renew()
                    }, e.prototype.attachLinks = function() {
                        var t, n;
                        if (this.props.onLinkClick) {
                            var o = [].slice.call(this.inputDiv.querySelectorAll("a"));
                            try {
                                for (var r = B(o), i = r.next(); !i.done; i = r.next()) {
                                    var a = i.value;
                                    e.addLinkProperties(a, this.props.linkClass, this.props.onLinkClick)
                                }
                            } catch (e) {
                                t = {
                                    error: e
                                }
                            } finally {
                                try {
                                    i && !i.done && (n = r.return) && n.call(r)
                                } finally {
                                    if (t) throw t.error
                                }
                            }
                        }
                    }, e.prototype.componentWillUnmount = function() {
                        this.selectionSubscription.cancel()
                    }, e.prototype.shouldComponentUpdate = function() {
                        return !1
                    }, e.prototype.getCurrentSelection = function() {
                        var t = window.getSelection();
                        if (t.rangeCount > 0) {
                            var e = t.getRangeAt(0);
                            if (this.inputDiv === e.commonAncestorContainer || this.inputDiv.compareDocumentPosition(e.commonAncestorContainer) & Node.DOCUMENT_POSITION_CONTAINED_BY) return e
                        }
                        return null
                    }, e.prototype.linkify = function(t) {
                        this.execCommand("backColor", "transparent"), this.execCommand("createLink", t);
                        var n = this.getAnchorFromSelection();
                        n && e.addLinkProperties(n, this.props.linkClass, this.props.onLinkClick)
                    }, e.prototype.unlink = function(t) {
                        var e = t.parentNode,
                            n = t.textContent;
                        e && (e.removeChild(t), n && !V(n) && this.execCommand("insertText", n))
                    }, e.prototype.applyRange = function() {
                        if (this.range) {
                            var t = window.getSelection();
                            t.removeAllRanges(), t.addRange(this.range)
                        }
                    }, e.prototype.execCommand = function(t, e) {
                        this.range && (this.applyRange(), document.execCommand(t, !1, e), this.onSelectionChange())
                    }, e.addLinkProperties = function(t, e, n) {
                        e && t.classList.add(e), n && (t.onclick = n)
                    }, e.prototype.getAnchorFromSelection = function() {
                        var t = this.getCurrentSelection();
                        if (!t) return null;
                        for (var e = t.commonAncestorContainer; e && "A" !== e.nodeName;) {
                            if (e === this.inputDiv) return null;
                            e = e.parentNode
                        }
                        return e || null
                    }, e.prototype.finalizeInput = function() {
                        this.props.onFinalizeInput(), this.inputDiv.blur()
                    }, e.prototype.render = function() {
                        var t = this;
                        return Object(r.h)("div", {
                            ref: function(e) {
                                return t.inputDiv = e
                            },
                            class: "inputDiv",
                            placeholder: this.props.placeholder,
                            onMouseDown: this.onMouseDown,
                            onKeyDown: this.onKeyPress,
                            onKeyPress: this.onKeyPress,
                            onPaste: this.onPaste,
                            contentEditable: !0,
                            onInput: this.onInput,
                            onFocus: this.onFocus,
                            onBlur: this.onBlur
                        })
                    }, e
                }(r.Component),
                G = n(253),
                Q = n(217),
                Y = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                q = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.onEdited = function(t) {
                            n.state.validUrl && n.props.onSaveLink(t)
                        }, n.onInput = function(t) {
                            n.setState({
                                validUrl: V(t),
                                currentUrl: t
                            })
                        }, n.onApply = function(t) {
                            n.state.currentUrl && n.onEdited(n.state.currentUrl)
                        }, n.onClickUrl = function() {
                            window.open(n.props.linkUrl, "_blank")
                        }, n.stopPropagation = function(t) {
                            t.stopPropagation()
                        }, n.state = {
                            currentUrl: e.linkUrl,
                            validUrl: !0
                        }, n
                    }
                    return Y(e, t), e.prototype.componentWillReceiveProps = function(t) {
                        this.state.currentUrl !== t.linkUrl && this.setState({
                            currentUrl: t.linkUrl
                        })
                    }, e.prototype.render = function() {
                        var t = this.props,
                            e = t.linkOffsetTop,
                            n = t.viewer,
                            o = n ? {
                                top: e + "px"
                            } : {};
                        return Object(r.h)("div", {
                            class: i("editable-popover", "link-popover", {
                                viewer: n
                            }),
                            onClick: this.stopPropagation,
                            style: o
                        }, n ? this.renderLinkViewing() : this.renderLinkEditing())
                    }, e.prototype.renderLinkViewing = function() {
                        var t = this.props,
                            e = t.linkUrl,
                            n = t.onRemoveLink,
                            o = t.onEditLink;
                        return Object(r.h)("div", {
                            class: "link-viewer"
                        }, Object(r.h)("a", {
                            onClick: this.onClickUrl
                        }, e), Object(r.h)("div", {
                            class: "link-view-icons"
                        }, Object(r.h)("div", {
                            class: "divider"
                        }), Object(r.h)(G.a, {
                            iconClass: "icon-toggle-pencil",
                            tooltipMsg: "Edit Link",
                            tooltipPosition: F.b.DOWN,
                            onClick: o
                        }), Object(r.h)("div", {
                            class: "divider"
                        }), Object(r.h)(G.a, {
                            iconClass: "icon-delete",
                            tooltipMsg: "Remove Link",
                            tooltipPosition: F.b.DOWN,
                            onClick: n
                        })))
                    }, e.prototype.renderLinkEditing = function() {
                        var t = this.props,
                            e = t.linkUrl,
                            n = t.onCancel;
                        return Object(r.h)("div", {
                            class: "url-editor"
                        }, Object(r.h)(Q.a, {
                            buttonStyle: Q.b.LIGHT,
                            onClose: n
                        }), Object(r.h)("label", {
                            class: "popover-label"
                        }, "Link to"), Object(r.h)(A.a, {
                            text: e,
                            placeholder: "https://",
                            defaultText: "",
                            onEdited: this.onEdited,
                            onInput: this.onInput,
                            editing: !0
                        }), this.renderButtons())
                    }, e.prototype.renderButtons = function() {
                        var t = this.state,
                            e = t.validUrl,
                            n = !t.currentUrl || !e;
                        return Object(r.h)("div", {
                            class: "popover-footer"
                        }, this.renderValidationMessage(), Object(r.h)("div", {
                            class: i("link-btn popover-btn", {
                                disabled: n
                            }),
                            onClick: this.onApply
                        }, "Apply"))
                    }, e.prototype.renderValidationMessage = function() {
                        var t = this.props,
                            e = t.textSelected,
                            n = t.linkUrl,
                            o = this.state,
                            i = o.validUrl,
                            a = o.currentUrl,
                            s = !e && "" === n && "" === a;
                        return !i && a ? Object(r.h)("div", {
                            class: "popover-message popover-message-error"
                        }, "Invalid URL") : Object(r.h)("div", {
                            class: "popover-message"
                        }, s && "Tip: Turn text into a link by selecting the text in the description field before clicking 'Add Link'")
                    }, e
                }(r.Component),
                K = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                Z = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                X = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                J = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.initialDesc = [], n.linkElement = null, n.onLabelEdit = function(t) {
                            n.handleTextChange("label", t)
                        }, n.onLabelKeyPress = function(t) {
                            if (t.keyCode === P.a.ESCAPE) return n.props.onNavigationKey(t);
                            if (t.stopPropagation(), t.keyCode === P.a.TAB) {
                                var e = n.editableDescription.getInputDiv();
                                e && e.focus()
                            }
                            return !1
                        }, n.onDescriptionInput = function(t) {
                            var e = t.length;
                            n.closeLinkEditor(), n.props.onDescriptionInput(0 === e), n.setState({
                                descriptionLength: e
                            })
                        }, n.onDescriptionEdited = function() {
                            var t = n.editableDescription.getInputDiv();
                            if (t) {
                                var e = M.htmlToString(t);
                                n.handleTextChange("description", e)
                            }
                        }, n.onLabelFocus = function() {
                            n.closeLinkEditor(), n.props.onFocus()
                        }, n.onDescriptionFocus = function() {
                            n.setState({
                                editingDescription: !0
                            }), n.props.onFocus()
                        }, n.onDescriptionBlur = function() {
                            n.setState({
                                editingDescription: !1
                            })
                        }, n.linkClicked = function(t) {
                            if (n.state.previewingLink) n.closeLinkEditor();
                            else {
                                t.stopPropagation(), n.linkElement = t.target;
                                var e = n.editableText.getBoundingClientRect(),
                                    o = n.linkElement.getBoundingClientRect(),
                                    r = n.editableText.offsetHeight / e.height,
                                    i = (o.top + o.height - e.top) * r;
                                n.setState({
                                    linkOffsetTop: i,
                                    linkUrl: n.linkElement.href,
                                    previewingLink: !0
                                }), n.props.onOpenLinkEditor()
                            }
                        }, n.onAddLinkClicked = function(t) {
                            t.stopPropagation(), n.props.linkPopoverOpen ? n.state.previewingLink ? n.onEditLink() : n.onCancelLink() : n.state.linkCount < 5 && (n.linkElement = n.editableDescription.prepareLinkSelection(), n.setState({
                                linkUrl: n.linkElement ? n.linkElement.href : "",
                                previewingLink: !1
                            }), n.props.onOpenLinkEditor())
                        }, n.onEditLink = function() {
                            n.setState({
                                previewingLink: !1
                            })
                        }, n.onRemoveLink = function() {
                            n.onSaveLink("")
                        }, n.onCancelLink = function() {
                            n.closeLinkEditor()
                        }, n.onSaveLink = function(t) {
                            n.props.linkPopoverOpen && (n.linkElement ? "" !== t ? n.linkElement.href = t : n.editableDescription.unlink(n.linkElement) : n.editableDescription.linkify(t), n.closeLinkEditor(), n.onDescriptionEdited())
                        }, n.clickOnBackground = function(t) {
                            t.stopPropagation(), n.props.onFocus()
                        }, n.state = {
                            previewingLink: !1,
                            editingDescription: !1,
                            descriptionLength: 0,
                            linkUrl: "",
                            linkOffsetTop: 0,
                            linkCount: 0
                        }, n
                    }
                    return K(e, t), e.prototype.componentWillMount = function() {
                        this.initialDesc = this.props.parsedDescription, this.updateDescriptionState(this.props.parsedDescription)
                    }, e.prototype.componentWillReceiveProps = function(t) {
                        t.description !== this.props.description && this.updateDescriptionState(t.parsedDescription), !t.linkPopoverOpen && this.props.linkPopoverOpen && this.setState({
                            previewingLink: !1
                        })
                    }, e.prototype.updateDescriptionState = function(t) {
                        var e, n, o = 0,
                            r = 0;
                        try {
                            for (var i = X(t), a = i.next(); !a.done; a = i.next()) {
                                var s = a.value;
                                s.link ? (o += s.link.label.length, r++) : s.text && (o += s.text.length)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                a && !a.done && (n = i.return) && n.call(i)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        this.setState({
                            descriptionLength: o,
                            linkCount: r
                        })
                    }, e.prototype.handleTextChange = function(t, e) {
                        var n;
                        this.props.modifyMattertag(this.props.id, (n = {}, n[t] = e, n)).then(this.props.onEdited)
                    }, e.prototype.closeLinkEditor = function() {
                        this.setState({
                            linkUrl: "",
                            previewingLink: !1
                        }), this.props.onCloseLinkEditor(), this.linkElement = null
                    }, e.prototype.render = function() {
                        var t = this,
                            e = this.state,
                            n = e.linkOffsetTop,
                            o = e.linkCount,
                            a = e.linkUrl,
                            s = e.editingDescription,
                            c = e.descriptionLength,
                            l = e.previewingLink,
                            u = this.props,
                            p = u.label,
                            h = u.linkPopoverOpen,
                            d = u.onNavigationKey,
                            f = !(!this.editableDescription || !this.editableDescription.hasTextSelected()),
                            y = o < 5,
                            v = y ? "Add link" : "You can only add up to five links",
                            m = c + "/1000";
                        return Object(r.h)("div", {
                            class: "editable-text-content",
                            ref: function(e) {
                                return t.editableText = e
                            },
                            onClick: this.clickOnBackground
                        }, h && Object(r.h)(q, {
                            viewer: l,
                            textSelected: f,
                            linkUrl: a,
                            linkOffsetTop: n,
                            onCancel: this.onCancelLink,
                            onEditLink: this.onEditLink,
                            onSaveLink: this.onSaveLink,
                            onRemoveLink: this.onRemoveLink
                        }), Object(r.h)("div", {
                            class: "editable-text editable-tag-label"
                        }, Object(r.h)(A.a, {
                            autofocus: !0,
                            text: p,
                            defaultText: "",
                            placeholder: "Title",
                            onEdited: this.onLabelEdit,
                            onInput: this.onLabelEdit,
                            onKeyPress: this.onLabelKeyPress,
                            maxLength: 60,
                            closeOnFocusOut: !0,
                            textarea: !0,
                            fractionalCounter: !0,
                            onStartEditing: this.onLabelFocus
                        })), Object(r.h)("div", {
                            class: "editable-text editable-tag-description"
                        }, Object(r.h)("div", {
                            class: i("modifiable-text fractional-counter", {
                                editing: s || h,
                                empty: 0 === c
                            }),
                            "data-fractional-counter": m
                        }, Object(r.h)(W, {
                            ref: function(e) {
                                return t.editableDescription = e
                            },
                            maxLength: 1e3,
                            placeholder: "Description",
                            initialContent: this.initialDesc,
                            onInput: this.onDescriptionInput,
                            onFinalizeInput: this.onDescriptionEdited,
                            onNavigationKey: d,
                            linkClass: "tagLink",
                            onLinkClick: this.linkClicked,
                            onFocus: this.onDescriptionFocus,
                            onBlur: this.onDescriptionBlur
                        })), Object(r.h)("div", {
                            class: i("add-link", "billboard-menu-item", {
                                enabled: y,
                                active: h
                            }),
                            onClick: this.onAddLinkClicked,
                            "data-balloon": v,
                            "data-balloon-pos": F.b.DOWN
                        }, Object(r.h)("span", {
                            class: "icon-link"
                        }))))
                    }, e = Z([f.a], e)
                }(r.Component),
                $ = n(611),
                tt = n(132),
                et = n(78),
                nt = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                ot = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.setStemValue = function(t, e) {
                            void 0 === e && (e = !0);
                            var o = e ? Object(tt.a)(t) : t;
                            o !== n.props.stemHeight && n.props.modifyMattertag(n.props.sid, {
                                stemHeight: o
                            }).then((function() {
                                n.props.onEdited()
                            }))
                        }, n.onClickReset = function() {
                            n.slider && (n.setStemValue(n.state.originalStemHeight, !1), n.slider.setValue(Object(tt.b)(n.state.originalStemHeight)))
                        }, n.onToggleStemVisibility = function() {
                            n.props.modifyMattertag(n.props.sid, {
                                stemVisible: !n.props.stemVisible
                            }).then(n.props.onEdited)
                        }, n.stopPropagation = function(t) {
                            t.stopPropagation()
                        }, n.updateUnits = function() {
                            n.setState({
                                units: n.context.settings.tryGetProperty(et.a.Units, et.c.USFractional)
                            })
                        }, n.formatStemHeight = function(t) {
                            return n.state.units === et.c.USFractional ? function(t) {
                                var e = "";
                                e += Math.floor(t) + "'";
                                var n = Math.floor(t % 1 * 12);
                                return n < 10 && (e += "0"), e += n + "''"
                            }(t) : Math.round(100 * Object(tt.a)(t)) / 100 + "m"
                        }, n.state = {
                            originalStemHeight: e.stemHeight,
                            units: et.c.USFractional
                        }, n
                    }
                    return nt(e, t), e.prototype.componentWillMount = function() {
                        this.updateUnits()
                    }, e.prototype.componentDidMount = function() {
                        this.slider.setValue(Object(tt.b)(this.props.stemHeight)), this.context.settings.onPropertyChanged(et.a.Units, this.updateUnits)
                    }, e.prototype.componentWillUnmount = function() {
                        this.context.settings.removeOnPropertyChanged(et.a.Units, this.updateUnits)
                    }, e.prototype.render = function() {
                        var t = this,
                            e = this.props,
                            n = e.stemVisible,
                            o = e.stemHeight,
                            a = this.state.originalStemHeight !== o;
                        return Object(r.h)("div", {
                            class: "editable-popover stem-popover",
                            onClick: this.stopPropagation
                        }, Object(r.h)("div", {
                            class: "stem-editor"
                        }, Object(r.h)($.b, {
                            ref: function(e) {
                                return t.slider = e
                            },
                            discrete: !1,
                            min: 0,
                            max: 9,
                            initialValue: Object(tt.b)(o),
                            onInput: this.setStemValue,
                            displayBounds: !0,
                            width: 130,
                            formatNumbers: this.formatStemHeight,
                            tooltipPosition: $.a.DOWN
                        }), Object(r.h)("div", {
                            class: i("link-btn", "stem-slider-reset", {
                                disabled: !a
                            }),
                            onClick: this.onClickReset
                        }, "Reset"), Object(r.h)("hr", null), Object(r.h)("div", {
                            class: "stem-checkbox",
                            onClick: this.onToggleStemVisibility
                        }, Object(r.h)("div", {
                            class: i("checkbox icon-check", {
                                checked: n
                            })
                        }), Object(r.h)("div", {
                            class: "checkbox-text"
                        }, "Show Stem"))))
                    }, e
                }(r.Component),
                rt = n(23),
                it = (n(686), function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }()),
                at = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                st = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                ct = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.colorClickHandlerMap = {}, n.setupColorClickHandlers = function() {
                            var t, e;
                            try {
                                for (var o = st(n.props.colors), r = o.next(); !r.done; r = o.next()) {
                                    var i = r.value;
                                    n.colorClickHandlerMap[i] || (n.colorClickHandlerMap[i] = n.onColorChosen(i))
                                }
                            } catch (e) {
                                t = {
                                    error: e
                                }
                            } finally {
                                try {
                                    r && !r.done && (e = o.return) && e.call(o)
                                } finally {
                                    if (t) throw t.error
                                }
                            }
                        }, n.onColorChosen = function(t) {
                            return function() {
                                n.props.onColorPicked(t), n.setState({
                                    colorChosen: t
                                })
                            }
                        }, n.getColorSwatch = function(t) {
                            var e = {
                                    backgroundColor: t
                                },
                                o = i({
                                    "color-swatch": !0,
                                    "icon-check": !0,
                                    chosen: n.state.colorChosen === t
                                });
                            return Object(r.h)("div", {
                                class: o,
                                style: e,
                                onClick: n.colorClickHandlerMap[t]
                            })
                        }, n.getColorGrid = function() {
                            for (var t = [], e = 0; e < n.props.colors.length;) {
                                for (var o = [], i = 0; i < n.props.columns; i++) o.push(n.getColorSwatch(n.props.colors[e])), e++;
                                t.push(Object(r.h)("div", {
                                    class: "color-swatch-row"
                                }, o))
                            }
                            return t
                        }, n.state = {
                            colorChosen: n.props.defaultColor || ""
                        }, n.setupColorClickHandlers(), n
                    }
                    return it(e, t), e.prototype.componentWillReceiveProps = function(t) {
                        Object(rt.b)(t.colors, this.props.colors) && this.setupColorClickHandlers(), t.defaultColor && !this.state.colorChosen && this.setState({
                            colorChosen: t.defaultColor
                        })
                    }, e.prototype.render = function() {
                        return Object(r.h)("div", {
                            class: "color-picker"
                        }, this.getColorGrid())
                    }, e = at([f.b], e)
                }(r.Component),
                lt = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                ut = ["#d44441", "#f44336", "#e91e63", "#f78da7", "#9c4b92", "#673ab7", "#03687d", "#03a9f4", "#00bcd4", "#417505", "#51a868", "#37d67a", "#cddc39", "#fbcd00", "#ffac17", "#ff6900", "#abb8c3", "#607d8b"],
                pt = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.handleColorPicked = function(t) {
                            n.props.modifyMattertag(n.props.sid, {
                                color: t
                            }).then(n.props.onEdited)
                        }, n.stopPropagation = function(t) {
                            t.stopPropagation()
                        }, n
                    }
                    return lt(e, t), e.prototype.render = function() {
                        var t = this.props.color;
                        return Object(r.h)("div", {
                            class: "editable-popover color-editor",
                            onClick: this.stopPropagation
                        }, Object(r.h)(ct, {
                            colors: ut,
                            columns: 6,
                            defaultColor: t,
                            onColorPicked: this.handleColorPicked
                        }))
                    }, e
                }(r.Component),
                ht = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                dt = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                ft = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                };
            ! function(t) {
                t[t.NONE = 0] = "NONE", t[t.INVALID_URL_SYNTAX = 1] = "INVALID_URL_SYNTAX", t[t.LOADING = 2] = "LOADING", t[t.LOADED = 3] = "LOADED", t[t.ERROR = 4] = "ERROR"
            }(N || (N = {}));
            var yt, vt = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.embedlyValidator = new x, n.onInput = function(t) {
                            var e = V(t) ? N.NONE : N.INVALID_URL_SYNTAX;
                            n.setState({
                                validationPhase: e,
                                currentUrl: t
                            })
                        }, n.onApply = function(t) {
                            t.target.classList.contains("disabled") || n.onChangeMedia(n.state.currentUrl)
                        }, n.stopPropagation = function(t) {
                            t.stopPropagation()
                        }, n.onChangeMedia = function(t) {
                            return dt(n, void 0, void 0, (function() {
                                var e, n, o, r, i;
                                return ft(this, (function(a) {
                                    switch (a.label) {
                                        case 0:
                                            return e = this.props, n = e.sid, o = e.mediaSrc, r = e.onEdited, t === o ? [3, 4] : [4, this.loadMedia(t)];
                                        case 1:
                                            return (i = a.sent()) === v.a.error ? [3, 3] : [4, this.props.modifyMattertag(n, {
                                                mediaSrc: t,
                                                mediaType: i
                                            })];
                                        case 2:
                                            return a.sent(), this.setState({
                                                validationPhase: N.LOADED
                                            }), r(), [3, 4];
                                        case 3:
                                            this.setState({
                                                validationPhase: N.ERROR
                                            }), a.label = 4;
                                        case 4:
                                            return [2]
                                    }
                                }))
                            }))
                        }, n.loadMedia = function(t) {
                            return dt(n, void 0, void 0, (function() {
                                var e;
                                return ft(this, (function(n) {
                                    switch (n.label) {
                                        case 0:
                                            return e = v.a.none, this.setState({
                                                validationPhase: N.NONE
                                            }), t ? (this.setState({
                                                validationPhase: N.LOADING
                                            }), [4, this.embedlyValidator.getType(t)]) : [3, 2];
                                        case 1:
                                            e = n.sent(), n.label = 2;
                                        case 2:
                                            return [2, e]
                                    }
                                }))
                            }))
                        }, n.state = {
                            currentUrl: e.mediaSrc,
                            validationPhase: n.getInitialValidationPhase()
                        }, n
                    }
                    return ht(e, t), e.prototype.getInitialValidationPhase = function() {
                        return this.props.mediaType === v.a.error ? N.ERROR : this.props.mediaSrc ? N.LOADED : N.NONE
                    }, e.prototype.componentWillReceiveProps = function(t) {
                        this.state.currentUrl !== t.mediaSrc && this.setState({
                            currentUrl: t.mediaSrc
                        })
                    }, e.prototype.render = function() {
                        var t = this.props,
                            n = t.mediaSrc,
                            o = t.onCancel;
                        return Object(r.h)("div", {
                            class: "editable-popover media-popover",
                            onClick: this.stopPropagation
                        }, Object(r.h)("div", {
                            class: "url-editor"
                        }, Object(r.h)(Q.a, {
                            buttonStyle: Q.b.LIGHT,
                            onClose: o
                        }), Object(r.h)("label", {
                            class: "popover-label"
                        }, "Media link", Object(r.h)("a", {
                            class: "link",
                            target: "_blank",
                            href: e.supportPage
                        }, "See supported formats")), Object(r.h)(A.a, {
                            text: n,
                            placeholder: "https://",
                            defaultText: "",
                            onEdited: this.onChangeMedia,
                            onInput: this.onInput,
                            editing: !0
                        }), this.renderPopoverFooter()))
                    }, e.prototype.renderPopoverFooter = function() {
                        var t = this.props.mediaSrc,
                            e = this.state,
                            n = e.validationPhase,
                            o = e.currentUrl,
                            a = n === N.ERROR || n === N.LOADING || n === N.INVALID_URL_SYNTAX && "" !== o || o === t && "" === o;
                        return Object(r.h)("div", {
                            class: "popover-footer"
                        }, this.renderValidationMessage(), Object(r.h)("div", {
                            class: i("link-btn popover-btn", {
                                disabled: a
                            }),
                            onClick: this.onApply
                        }, "Apply"))
                    }, e.prototype.renderValidationMessage = function() {
                        switch (this.state.validationPhase) {
                            case N.ERROR:
                                return Object(r.h)("div", {
                                    class: "popover-message popover-message-error"
                                }, "Can't find media. Please check URL.", Object(r.h)("a", {
                                    class: "link",
                                    target: "_blank",
                                    href: e.supportPageIssues
                                }, "Help"));
                            case N.LOADING:
                                return Object(r.h)("div", {
                                    class: "popover-message"
                                }, "Looking up media...");
                            case N.INVALID_URL_SYNTAX:
                                if ("" !== this.state.currentUrl) return Object(r.h)("div", {
                                    class: "popover-message popover-message-error"
                                }, "Invalid URL")
                        }
                        return Object(r.h)("div", {
                            class: "popover-message"
                        })
                    }, e.supportPage = "https://support.matterport.com/hc/en-us/articles/115006363868", e.supportPageIssues = "https://support.matterport.com/hc/en-us/articles/115006363868#issues", e
                }(r.Component),
                mt = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                gt = function() {
                    return (gt = Object.assign || function(t) {
                        for (var e, n = 1, o = arguments.length; n < o; n++)
                            for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
                        return t
                    }).apply(this, arguments)
                },
                bt = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                };
            ! function(t) {
                t.COLOR = "color", t.STEM = "stem", t.MEDIA = "media", t.LINK = "text-link"
            }(yt || (yt = {}));
            var wt, Ot = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        n.getColorStyle = function() {
                            var t = n.props.getSavedData().color;
                            if (t) return "background-color: " + t
                        }, n.toggleVisibility = function() {
                            var t = n.props,
                                e = t.id,
                                o = t.manager;
                            n.closePopover();
                            var r = {
                                visible: !n.state.currentValues.visible
                            };
                            o.modifyMattertag(e, r).then(n.onEdited)
                        }, n.deleteTag = function() {
                            var t = n.props,
                                e = t.id,
                                o = t.manager;
                            n.closePopover(), o.removeTag(e, !1)
                        }, n.onEdited = function() {
                            var t = n.props.getSavedData();
                            t && n.setState({
                                currentValues: t,
                                tagEmpty: n.props.manager.isTagEmpty(n.props.id)
                            })
                        }, n.onMediaEdited = function() {
                            n.onEdited(), n.closePopover()
                        }, n.onMediaCancel = function() {
                            n.closePopover()
                        }, n.cancelEdits = function() {
                            n.props.manager.revertChanges()
                        }, n.doneEditing = function() {
                            var t = n.props,
                                e = t.manager,
                                o = t.id;
                            e.commitMattertag(o)
                        }, n.onOpenLinkEditor = function() {
                            n.setState({
                                popover: yt.LINK
                            })
                        }, n.onCloseLinkEditor = function() {
                            n.state.popover === yt.LINK && n.setState({
                                popover: null
                            })
                        }, n.onDescriptionInput = function(t) {
                            var e = n.props.getSavedData(),
                                o = Object(_.e)(e.label) && Object(_.e)(e.mediaSrc) && t;
                            n.setState({
                                tagEmpty: o
                            })
                        }, n.onFocusTextEditor = function() {
                            n.closePopover()
                        }, n.onNavigationKey = function(t) {
                            t.keyCode === P.a.ESCAPE && n.cancelEdits()
                        }, n.billboardClick = function(t) {
                            t.stopPropagation(), n.closePopover()
                        }, n.closePopover = function() {
                            null !== n.state.popover && n.setState({
                                popover: null
                            })
                        };
                        var o = e.getSavedData();
                        return n.state = {
                            popover: null,
                            currentValues: gt({}, o),
                            tagEmpty: e.manager.isTagEmpty(e.id)
                        }, n.clickColor = n.clickMenuIcon.bind(n, yt.COLOR), n.clickStem = n.clickMenuIcon.bind(n, yt.STEM), n.clickMedia = n.clickMenuIcon.bind(n, yt.MEDIA), n
                    }
                    return mt(e, t), e.prototype.componentWillMount = function() {
                        this.context.analytics.track("workshop_gui", {
                            gui_action: "mattertag_editor_opened"
                        })
                    }, e.prototype.clickMenuIcon = function(t, e) {
                        e.stopPropagation(), this.state.popover === t ? this.setState({
                            popover: null
                        }) : this.setState({
                            popover: t
                        })
                    }, e.prototype.render = function() {
                        var t = this.props.style,
                            e = this.state.tagEmpty;
                        return Object(r.h)("div", {
                            class: "billboard-body editing",
                            style: t.bodyStyle
                        }, Object(r.h)("div", {
                            class: "billboard-content",
                            onClick: this.billboardClick
                        }, this.renderTextContent(), this.renderMattertagMedia(), this.renderActivePopover()), Object(r.h)("div", {
                            class: "billboard-footer",
                            onClick: this.billboardClick
                        }, this.renderMenuItems(), Object(r.h)("div", {
                            class: "billboard-cta"
                        }, Object(r.h)("span", {
                            class: "link-btn mattertag-btn cancel-btn",
                            onClick: this.cancelEdits
                        }, "Cancel"), Object(r.h)("span", {
                            class: i("link-btn", "mattertag-btn", "done-btn", {
                                disabled: e
                            }),
                            onClick: this.doneEditing
                        }, "Done"))))
                    }, e.prototype.renderActivePopover = function() {
                        var t = this.props,
                            e = t.id,
                            n = t.manager,
                            o = this.state,
                            i = o.popover,
                            a = o.currentValues,
                            s = a.stemVisible,
                            c = a.stemHeight,
                            l = a.color,
                            u = a.mediaSrc,
                            p = a.mediaType;
                        switch (i) {
                            case yt.STEM:
                                return Object(r.h)(ot, {
                                    sid: e,
                                    stemVisible: s,
                                    stemHeight: c,
                                    onEdited: this.onEdited,
                                    modifyMattertag: n.modifyMattertag
                                });
                            case yt.COLOR:
                                return Object(r.h)(pt, {
                                    sid: e,
                                    color: l,
                                    onEdited: this.onEdited,
                                    modifyMattertag: n.modifyMattertag
                                });
                            case yt.MEDIA:
                                return Object(r.h)(vt, {
                                    sid: e,
                                    mediaSrc: u,
                                    mediaType: p,
                                    onEdited: this.onMediaEdited,
                                    onCancel: this.onMediaCancel,
                                    modifyMattertag: n.modifyMattertag
                                });
                            default:
                                return null
                        }
                    }, e.prototype.renderMenuItems = function() {
                        var t = this.props,
                            e = t.manager,
                            n = t.id,
                            o = this.state,
                            a = o.popover,
                            s = o.currentValues.visible,
                            c = e.isNewTag(n),
                            l = a === yt.COLOR,
                            u = a === yt.STEM,
                            p = a === yt.MEDIA;
                        return Object(r.h)("div", {
                            class: "billboard-menu"
                        }, Object(r.h)("div", {
                            class: i("billboard-menu-item", "color", {
                                active: l
                            }),
                            "data-balloon": l ? null : "Color",
                            "data-balloon-pos": "down",
                            onClick: this.clickColor
                        }, Object(r.h)("span", {
                            class: "icon editable-color-disc",
                            style: this.getColorStyle()
                        })), Object(r.h)("div", {
                            class: i("billboard-menu-item", "stem", {
                                active: u
                            }),
                            "data-balloon": u ? null : "Stem",
                            "data-balloon-pos": "down",
                            onClick: this.clickStem
                        }, Object(r.h)("span", {
                            class: "icon icon-stem-height"
                        })), Object(r.h)("div", {
                            class: i("billboard-menu-item", "media", {
                                active: p
                            }),
                            "data-balloon": p ? null : "Media",
                            "data-balloon-pos": "down",
                            onClick: this.clickMedia
                        }, Object(r.h)("span", {
                            class: "icon icon-media-mix"
                        })), !c && Object(r.h)("div", {
                            class: "billboard-menu-item",
                            "data-balloon": s ? "Hide" : "Show",
                            "data-balloon-pos": "down",
                            onClick: this.toggleVisibility
                        }, Object(r.h)("span", {
                            class: i("icon", s ? "icon-eye-hide" : "icon-eye-show")
                        })), !c && Object(r.h)("div", {
                            class: i("billboard-menu-item", "delete-tag"),
                            "data-balloon": "Delete",
                            "data-balloon-pos": "down",
                            onClick: this.deleteTag
                        }, Object(r.h)("span", {
                            class: "icon icon-delete"
                        })))
                    }, e.prototype.renderTextContent = function() {
                        var t = this.state.popover,
                            e = this.props,
                            n = e.id,
                            o = e.label,
                            i = e.parsedDescription,
                            a = e.description,
                            s = e.manager,
                            c = t === yt.LINK;
                        return Object(r.h)(J, {
                            id: n,
                            label: o,
                            parsedDescription: i,
                            description: a,
                            linkPopoverOpen: c,
                            onOpenLinkEditor: this.onOpenLinkEditor,
                            onCloseLinkEditor: this.onCloseLinkEditor,
                            onDescriptionInput: this.onDescriptionInput,
                            onNavigationKey: this.onNavigationKey,
                            onFocus: this.onFocusTextEditor,
                            onEdited: this.onEdited,
                            modifyMattertag: s.modifyMattertag
                        })
                    }, e.prototype.renderMattertagMedia = function() {
                        var t = this.props,
                            e = t.id,
                            n = t.mediaType,
                            o = t.style,
                            i = o.width,
                            a = o.height,
                            s = o.closing,
                            c = t.media,
                            l = c.hasMedia,
                            u = c.mediaPayload,
                            p = c.landscape;
                        return l ? u ? Object(r.h)(R, {
                            key: e,
                            mediaPayload: u,
                            mediaType: n,
                            width: i,
                            height: a,
                            landscape: p,
                            closing: s
                        }) : Object(r.h)("div", {
                            class: "loadingSpinner"
                        }, Object(r.h)("div", {
                            class: "gui-spinner-icon"
                        })) : null
                    }, e = bt([f.b], e)
                }(r.Component),
                St = n(555),
                xt = n(203),
                Pt = n(77),
                _t = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                Tt = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                Dt = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                kt = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                Mt = new a.a("mattertag-description"),
                Et = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.formatLink = function(t, e) {
                            return Ct(t, e, !1)
                        }, n.linkClicked = function(t) {
                            return function(e) {
                                if (e.preventDefault(), n.props.onLinkClick(t), void 0 !== t.link) switch (t.link.type) {
                                    case xt.a.NAVIGATION:
                                        n.props.navigationTagClicked(t);
                                        break;
                                    case xt.a.MODEL:
                                        window.location.replace(t.link.url);
                                        break;
                                    case xt.a.EXT_LINK:
                                        var o = 1 === n.embeddedlinks;
                                        o ? window.requestAnimationFrame((function() {
                                            try {
                                                var e = window.open(t.link.url, "mattertagEmb");
                                                e && e.focus()
                                            } catch (e) {
                                                Mt.debug("Could not load the link within an iFrame! Error: " + e), window.open(t.link.url)
                                            }
                                        })) : window.open(t.link.url), n.context.messageBus.broadcast(new u.c(t.link.url, o))
                                }
                            }
                        }, n
                    }
                    return _t(e, t), e.prototype.componentDidMount = function() {
                        return Dt(this, void 0, void 0, (function() {
                            var t;
                            return kt(this, (function(e) {
                                switch (e.label) {
                                    case 0:
                                        return t = this, [4, this.context.market.waitForData(Pt.a)];
                                    case 1:
                                        return t.settings = e.sent(), this.embeddedlinks = this.settings.tryGetProperty("emb", 0), [2]
                                }
                            }))
                        }))
                    }, e.prototype.render = function() {
                        var t = this.props,
                            e = t.description,
                            n = t.parsedDescription,
                            o = e;
                        return n && n.length > 0 && (o = jt(n, this.formatLink, this.linkClicked)), o ? Object(r.h)("div", {
                            className: "tag-description"
                        }, o) : null
                    }, e = Tt([f.b], e)
                }(r.Component),
                Ct = function(t, e, n) {
                    if (!t.link) return null;
                    var o = t.link,
                        i = o.type === xt.a.NAVIGATION ? "Link to position within this model" : "Link to external web site";
                    return Object(r.h)("a", {
                        className: "tagLink",
                        contentEditable: n,
                        href: o.url,
                        onClick: e(t)
                    }, o.label, Object(r.h)("i", {
                        class: "icon-ext-link",
                        title: i
                    }))
                },
                jt = function(t, e, n) {
                    return t.map((function(t) {
                        switch (t.type) {
                            case v.a.link:
                                if (t.link) return e(t, n);
                            case v.a.text:
                                return (t.text || "").replace("&zwnj;", "")
                        }
                        return null
                    }))
                },
                Lt = n(522),
                Rt = n(518),
                At = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                It = function() {
                    return (It = Object.assign || function(t) {
                        for (var e, n = 1, o = arguments.length; n < o; n++)
                            for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
                        return t
                    }).apply(this, arguments)
                },
                Nt = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                Ft = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.state = {
                            height: null,
                            descriptionHeight: 0,
                            scrollable: !1,
                            determiningScrollability: !1,
                            scrollClass: Rt.c.None
                        }, n.onScrollPositionChange = function() {
                            if (n.scrollbars && !n.state.determiningScrollability) {
                                var t = n.scrollbars.scrollPosition.vertical;
                                n.setState({
                                    scrollClass: t
                                })
                            }
                        }, n
                    }
                    return At(e, t), e.prototype.componentWillReceiveProps = function(t) {
                        t.tagWidth !== this.props.tagWidth && this.setState({
                            height: null,
                            scrollable: !0,
                            determiningScrollability: !0
                        })
                    }, e.prototype.componentDidMount = function() {
                        this.determineScrollability()
                    }, e.prototype.componentDidUpdate = function() {
                        this.state.determiningScrollability && this.determineScrollability()
                    }, e.prototype.determineScrollability = function() {
                        var t = this.textContainer && this.textContainer.querySelector(".tag-description"),
                            e = {
                                determiningScrollability: !1
                            };
                        if (this.props.description && t) {
                            var n = this.props.mediaTag ? 65 : 157;
                            if (t.scrollHeight > n + 10) {
                                var o = this.textContainer && this.textContainer.querySelector(".tagLabel"),
                                    r = this.props.label ? n + o.scrollHeight - 5 : n;
                                e = It({}, e, {
                                    height: r,
                                    scrollable: !0,
                                    scrollClass: Rt.c.Beginning
                                })
                            } else e = It({}, e, {
                                height: null,
                                scrollable: !1,
                                scrollClass: Rt.c.None
                            })
                        }
                        this.setState(e)
                    }, e.prototype.render = function() {
                        var t, e = this,
                            n = this.props,
                            o = n.label,
                            a = n.description,
                            s = n.parsedDescription,
                            c = n.onLinkClick,
                            l = n.navigationTagClicked;
                        if (o || a || s) {
                            var u = i(((t = {
                                "tag-text-content": !0,
                                noScroll: !this.state.height || !this.state.scrollable
                            })[this.state.scrollClass] = !0, t));
                            return Object(r.h)("div", {
                                class: u,
                                style: {
                                    height: this.state.scrollable && this.state.height || "auto"
                                },
                                ref: function(t) {
                                    e.textContainer = t
                                }
                            }, Object(r.h)(Lt.a, {
                                name: "mattertag-text-content",
                                forceHidden: !1,
                                waitToUpdate: this.state.determiningScrollability,
                                singleScrollDirection: Rt.b.vertical,
                                ref: function(t) {
                                    return e.scrollbars = t
                                },
                                onScrollPositionChange: this.onScrollPositionChange
                            }, o && Object(r.h)("div", {
                                class: "tagLabel",
                                onClick: this.onBoundClick
                            }, Object(r.h)("span", null, o)), Object(r.h)(Et, {
                                description: a,
                                parsedDescription: s,
                                onLinkClick: c,
                                navigationTagClicked: l
                            })))
                        }
                        return null
                    }, e = Nt([f.b], e)
                }(r.Component),
                Ut = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                zt = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                Vt = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.clickBillboard = function(t) {
                            t.stopPropagation(), n.props.editable && n.props.onStartEditing()
                        }, n
                    }
                    return Ut(e, t), e.prototype.render = function() {
                        var t = this.props,
                            e = t.media,
                            n = t.editable,
                            o = t.style,
                            a = t.selected,
                            s = t.onStartEditing,
                            c = t.label,
                            l = t.description,
                            u = t.parsedDescription;
                        return Object(r.h)("div", {
                            class: "billboard-body",
                            onClick: this.clickBillboard
                        }, Object(r.h)("div", {
                            className: i("billboard-content"),
                            style: o.bodyStyle
                        }, Object(r.h)(Ft, {
                            label: c,
                            description: l,
                            parsedDescription: u,
                            tagWidth: o.width,
                            imgHeight: o.height,
                            mediaTag: e.hasMedia,
                            onLinkClick: this.props.onLinkClick,
                            navigationTagClicked: this.props.navigationTagClicked
                        }), this.renderMattertagMedia(), n && Object(r.h)(G.a, {
                            appendClass: {
                                "edit-mattertag-button": !0
                            },
                            buttonStyle: G.b.PRIMARY,
                            iconClass: "icon-toggle-pencil",
                            onClick: s
                        })), !a && Object(r.h)(St.a, {
                            sendEvents: [St.a.SendEvent.CLICK],
                            className: "hover-arrow"
                        }))
                    }, e.prototype.renderMattertagMedia = function() {
                        var t = this.props,
                            e = t.id,
                            n = t.editable,
                            o = t.mediaType,
                            i = t.style,
                            a = i.width,
                            s = i.height,
                            c = i.closing,
                            l = t.media,
                            u = l.hasMedia,
                            p = l.mediaPayload,
                            h = l.landscape,
                            d = n ? void 0 : this.props.onOpenOverlay;
                        return u ? p ? Object(r.h)(R, {
                            key: e,
                            mediaPayload: p,
                            mediaType: o,
                            width: a,
                            height: s,
                            landscape: h,
                            onClickImage: d,
                            closing: c
                        }) : Object(r.h)("div", {
                            class: "loadingSpinner"
                        }, Object(r.h)("div", {
                            class: "gui-spinner-icon"
                        })) : null
                    }, e = zt([f.a], e)
                }(r.Component),
                Ht = n(146),
                Bt = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                Wt = function() {
                    return (Wt = Object.assign || function(t) {
                        for (var e, n = 1, o = arguments.length; n < o; n++)
                            for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
                        return t
                    }).apply(this, arguments)
                },
                Gt = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                Qt = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.toggleCollapseText = function() {
                            n.setState((function(t) {
                                return {
                                    collapsed: !t.collapsed
                                }
                            }))
                        }, n.onScrollPositionChange = function() {
                            if (n.scrollbars && !n.state.determiningScrollability) {
                                var t = n.scrollbars.scrollPosition.vertical;
                                n.setState({
                                    scrollClass: t
                                })
                            }
                        }, n.updateScrollAndCollapse = function() {
                            var t = n.textContainer ? n.textContainer.scrollHeight : 0,
                                e = n.textContainer && n.textContainer.querySelector(".tag-description"),
                                o = {
                                    determiningScrollability: !1
                                };
                            if (t) {
                                var r = Math.max(t - 57 - n.state.overlayHeight, 0),
                                    i = r > 0,
                                    a = t - r,
                                    s = e && e.scrollHeight - r,
                                    c = i ? Rt.c.Beginning : Rt.c.None;
                                o = Wt({}, o, {
                                    height: a,
                                    scrollable: i,
                                    descriptionHeight: s,
                                    scrollClass: c,
                                    collapsible: e && t > 57
                                })
                            }
                            n.setState(o)
                        }, n.updateOverlayDimensions = function() {
                            var t = n.context.mainDiv,
                                e = t.offsetWidth - 80,
                                o = t.offsetHeight - 52,
                                r = n.props.aspectRatio,
                                i = r < e / o;
                            n.setState({
                                landscape: i,
                                overlayHeight: i ? o : e / r,
                                overlayWidth: i ? o * r : e
                            })
                        }, n.stopPropagation = function(t) {
                            t.stopPropagation()
                        }, n.state = {
                            landscape: !1,
                            overlayWidth: 0,
                            overlayHeight: 0,
                            collapsible: !!(e.description && e.description.length > 0),
                            collapsed: !1,
                            height: null,
                            descriptionHeight: 0,
                            scrollable: !1,
                            determiningScrollability: !1,
                            scrollClass: Rt.c.None
                        }, n.resizeSubscription = Object(Ht.c)(Ht.b.RESIZE, n.updateOverlayDimensions), n
                    }
                    return Bt(e, t), e.prototype.componentWillMount = function() {
                        this.updateOverlayDimensions()
                    }, e.prototype.componentDidMount = function() {
                        this.resizeSubscription.renew(), this.updateScrollAndCollapse()
                    }, e.prototype.componentWillUnmount = function() {
                        this.resizeSubscription.cancel()
                    }, e.prototype.componentWillReceiveProps = function(t) {
                        t.aspectRatio !== this.props.aspectRatio && (this.updateOverlayDimensions(), this.updateScrollAndCollapse())
                    }, e.prototype.componentWillUpdate = function(t, e) {
                        e.overlayWidth === this.state.overlayWidth && e.overlayHeight === this.state.overlayHeight || this.setState({
                            determiningScrollability: !0,
                            scrollable: !1,
                            scrollClass: Rt.c.None,
                            height: 0
                        })
                    }, e.prototype.componentDidUpdate = function() {
                        var t = this;
                        this.state.determiningScrollability && setTimeout((function() {
                            return window.requestAnimationFrame(t.updateScrollAndCollapse)
                        }), 0)
                    }, e.prototype.render = function() {
                        var t = this.props,
                            e = t.mediaPayload,
                            n = t.mediaType,
                            o = t.closing,
                            a = this.state,
                            s = a.overlayWidth,
                            c = a.overlayHeight,
                            l = a.collapsible,
                            u = a.landscape;
                        return Object(r.h)("div", {
                            class: "billboard-body",
                            onClick: this.stopPropagation
                        }, Object(r.h)("div", {
                            className: i("billboard-content", {
                                collapsible: l
                            })
                        }, this.renderOverlayText(), Object(r.h)(R, {
                            mediaPayload: e,
                            mediaType: n,
                            width: s,
                            height: c,
                            landscape: u,
                            closing: o
                        })))
                    }, e.prototype.renderOverlayText = function() {
                        var t = this,
                            e = this.props,
                            n = e.label,
                            o = e.description,
                            a = e.parsedDescription,
                            s = e.onLinkClick,
                            c = e.navigationTagClicked,
                            l = e.closeImageOverlay,
                            u = this.state,
                            p = u.collapsible,
                            h = u.collapsed,
                            d = u.descriptionHeight,
                            f = u.scrollable,
                            y = u.height,
                            v = u.determiningScrollability,
                            m = u.scrollClass,
                            g = v || h ? void 0 : {
                                maxHeight: y + "px"
                            },
                            b = {};
                        return o && y && f && (b.height = d + "px", b.overflow = "hidden"), Object(r.h)("div", {
                            class: i("tag-text-content", {
                                collapsed: h,
                                noScroll: !y || !f
                            }),
                            style: g,
                            ref: function(e) {
                                t.textContainer = e
                            }
                        }, n && Object(r.h)("div", {
                            class: "tagLabel",
                            onClick: this.toggleCollapseText
                        }, Object(r.h)("div", {
                            class: "labelText"
                        }, n)), o && Object(r.h)("div", {
                            style: b,
                            class: i(m, "wrappedDesc")
                        }, Object(r.h)(Lt.a, {
                            name: "mattertag-overlay-text",
                            forceHidden: !1,
                            waitToUpdate: v,
                            singleScrollDirection: Rt.b.vertical,
                            ref: function(e) {
                                return t.scrollbars = e
                            },
                            onScrollPositionChange: this.onScrollPositionChange
                        }, Object(r.h)("div", null, Object(r.h)(Et, {
                            description: o,
                            parsedDescription: a,
                            onLinkClick: s,
                            navigationTagClicked: c
                        })))), Object(r.h)("div", {
                            class: "buttons"
                        }, p && Object(r.h)(G.a, {
                            appendClass: {
                                "tag-button": !0,
                                "tag-collapse-button": !0
                            },
                            iconClass: "icon-dpad-down",
                            onClick: this.toggleCollapseText
                        }), Object(r.h)(G.a, {
                            appendClass: {
                                "tag-button": !0
                            },
                            iconClass: "icon-close",
                            onClick: l
                        })))
                    }, e = Gt([f.b], e)
                }(r.Component),
                Yt = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                qt = function() {
                    return (qt = Object.assign || function(t) {
                        for (var e, n = 1, o = arguments.length; n < o; n++)
                            for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
                        return t
                    }).apply(this, arguments)
                },
                Kt = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                Zt = function(t, e) {
                    var n = "function" == typeof Symbol && t[Symbol.iterator];
                    if (!n) return t;
                    var o, r, i = n.call(t),
                        a = [];
                    try {
                        for (;
                            (void 0 === e || e-- > 0) && !(o = i.next()).done;) a.push(o.value)
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    return a
                },
                Xt = new a.a("billboard");
            ! function(t) {
                t[t.NOT_LOADED = 0] = "NOT_LOADED", t[t.LOADING = 1] = "LOADING", t[t.LOADED = 2] = "LOADED", t[t.FAILED = 3] = "FAILED", t[t.ENABLED = 4] = "ENABLED"
            }(wt || (wt = {}));
            var Jt = function(t) {
                    function e(e) {
                        var o = t.call(this, e) || this;
                        o.linkCount = 0, o.linksClicked = [], o.getSavedData = function() {
                            var t = o.props.tag,
                                e = t.label,
                                n = t.description,
                                r = t.mediaSrc,
                                i = t.mediaType,
                                a = t.stemVisible,
                                s = t.enabled,
                                c = o.props.view,
                                l = c.stemHeight;
                            return {
                                visible: s,
                                color: c.color,
                                label: e,
                                description: n,
                                stemHeight: l,
                                mediaSrc: r,
                                mediaType: i,
                                stemVisible: a
                            }
                        }, o.updateBillboardSize = function() {
                            var t = o.state,
                                e = t.mediaWidth,
                                n = t.mediaHeight,
                                r = o.props.tag;
                            if (r.mediaType === v.a.photo || r.mediaType === v.a.rich || r.mediaType === v.a.video) {
                                var i = o.getStandardDimensions(r.mediaType, e, n);
                                o.setState(qt({}, i))
                            }
                        }, o.closeImageOverlay = function() {
                            var t = o.props,
                                e = t.overlay,
                                n = t.toggleImageOverlay,
                                r = t.tag;
                            e && n && n(r.sid, !1)
                        }, o.onOpenOverlay = function() {
                            var t = o.props,
                                e = t.toggleImageOverlay,
                                n = t.tag;
                            e && e(n.sid, !0)
                        }, o.onStartEditing = function() {
                            var t = o.props.tag;
                            o.props.manager && o.props.manager.toggleEditing(t.sid)
                        }, o.updateTagDirection = function() {
                            var t, e = o.state.direction,
                                r = o.props,
                                i = r.getTagContainer,
                                a = r.tag,
                                s = o.props.view,
                                c = s.navigating,
                                l = s.navigatingPosition,
                                u = s.position,
                                p = s.onTagDirectionChanged,
                                h = i(),
                                d = Zt([h.offsetWidth, h.offsetHeight], 2),
                                f = d[0],
                                y = d[1];
                            (t = c && l ? n.getTagDirection(l.x, l.y, f, y) : u ? n.getTagDirection(u.x, u.y, f, y) : n.getTagDirection(0, 0, f, y)) !== e && (p(a.sid, t), o.setState({
                                direction: t
                            }))
                        }, o.onLinkClick = function(t) {
                            if (void 0 !== t.link) {
                                -1 === o.linksClicked.indexOf(t.link) && o.linksClicked.push(t.link);
                                var e = t.link.type;
                                o.linkCount++, o.context.analytics.track("click_mattertag_link", {
                                    link_type: e,
                                    link_count: o.linkCount,
                                    links_clicked: o.linksClicked.length
                                })
                            }
                        };
                        var r = o.props.tag,
                            i = o.getStandardDimensions(r.mediaType, 1024, 1024);
                        o.embedly = new x, o.state = {
                            width: i.width,
                            height: 190,
                            mediaWidth: 0,
                            mediaHeight: 0,
                            mediaPayload: null,
                            landscape: !1,
                            active: !1,
                            mediaLoadingState: o.props.mediaEnabled ? wt.NOT_LOADED : wt.ENABLED,
                            savedData: o.getSavedData(),
                            direction: void 0
                        };
                        var a = o.props.tag,
                            s = new U.a((function() {}), (function(t) {
                                a.onPropertyChanged("mediaSrc", t), a.onPropertyChanged("mediaType", t)
                            }), (function(t) {
                                a.removeOnPropertyChanged("mediaSrc", t), a.removeOnPropertyChanged("mediaType", t)
                            }));
                        return o.tagOnChangedSub = s.createSubscription((function() {
                            o.loadMedia(!0)
                        }), !1), o.updateTagDirection(), o
                    }
                    var n;
                    return Yt(e, t), n = e, e.prototype.componentDidMount = function() {
                        var t = this.props,
                            e = t.view,
                            n = t.editMode;
                        this.loadMedia(), !e.located || e.navigating && !e.navigatingPosition || this.setState({
                            active: !0
                        }), n && window.addEventListener("resize", this.updateBillboardSize), this.tagOnChangedSub.renew()
                    }, e.prototype.componentWillUnmount = function() {
                        this.tagOnChangedSub.cancel(), this.props.editMode && window.removeEventListener("resize", this.updateBillboardSize)
                    }, e.prototype.componentDidUpdate = function(t) {
                        var e = this.props,
                            n = e.editing,
                            o = e.tag,
                            r = e.view,
                            i = this.state.active;
                        if (n !== t.editing && this.updateBillboardSize(), r.closeTheTag || o && o.mediaSrc !== t.tag.mediaSrc && this.loadMedia(!0), i || t.view.navigatingPosition === r.navigatingPosition || this.updateTagDirection(), r.closeTheTag) i && this.setState({
                            active: !1
                        });
                        else if (i || !r.located || r.navigating && !r.navigatingPosition || this.setState({
                                active: !0
                            }), n && (!t.editing || null === this.state.savedData)) {
                            var a = this.getSavedData();
                            a && this.setState({
                                savedData: a
                            })
                        }
                    }, e.prototype.loadMedia = function(t) {
                        var e = this;
                        void 0 === t && (t = !1);
                        var o = this.props.tag,
                            r = o.mediaType,
                            i = o.mediaSrc,
                            a = this.state.mediaLoadingState;
                        if (n.isMediaTag(r) && (t || ![wt.LOADING, wt.FAILED, wt.ENABLED].includes(a))) return this.setState({
                            mediaLoadingState: wt.LOADING
                        }), this.embedly.getMediaDetails(r, i).then((function(t) {
                            if (t && e.billboardRef) {
                                var n = e.getStandardDimensions(r, t.width, t.height);
                                e.setState(qt({}, n, {
                                    mediaWidth: t.width,
                                    mediaHeight: t.height,
                                    mediaPayload: t.embedlyResponse,
                                    mediaLoadingState: wt.LOADED
                                }))
                            }
                        })).catch((function(t) {
                            if (Xt.debug(t), e.billboardRef) {
                                var n = e.getStandardDimensions(v.a.text, 1024, 1024);
                                e.setState(qt({}, n, {
                                    mediaLoadingState: wt.FAILED
                                }))
                            }
                        }))
                    }, e.prototype.getStandardDimensions = function(t, e, n) {
                        var o = this.props,
                            r = o.getTagContainer,
                            i = o.editing,
                            a = {
                                width: 300,
                                height: 0,
                                landscape: !1
                            };
                        if (t === v.a.text || t === v.a.none || t === v.a.error) return a;
                        var s = e,
                            c = n,
                            l = Math.max(e, 1) / Math.max(n, 1),
                            u = r();
                        if (u) {
                            var p = t === v.a.photo,
                                h = void 0;
                            h = i ? p ? 150 : 340 : 80;
                            var d = u.offsetWidth - 100,
                                f = u.offsetHeight - h;
                            (c = (s = p ? l > 1 ? Math.max(Math.min(e, 400, d), 310) : Math.max(Math.min(e, 300), 225) : Math.max(Math.min(e, 350, d), 310)) / l) > f && (s = (c = f) * l)
                        }
                        return {
                            width: s,
                            height: c,
                            landscape: l > 1
                        }
                    }, e.prototype.render = function() {
                        var t = this,
                            e = this.props,
                            o = e.overlay,
                            a = e.editing,
                            s = e.view,
                            c = e.tag,
                            l = s.closeTheTag,
                            u = c.sid,
                            p = c.mediaType,
                            h = c.label,
                            d = c.description,
                            f = this.state,
                            y = f.landscape,
                            m = f.mediaLoadingState,
                            g = f.active,
                            b = f.direction,
                            w = this.isImageTag(),
                            O = n.isMediaTag(p) && m !== wt.FAILED && m !== wt.ENABLED,
                            S = m === wt.LOADING && p === v.a.photo,
                            x = a || o ? void 0 : this.getTagPositionStyle(),
                            P = a || o ? void 0 : "tag" + b.trim().replace(/([A-Z])/g, "-$1").replace(/[-_\s]+/g, "-").toLowerCase();
                        return Object(r.h)("div", {
                            className: i("tag-position", {
                                "billboard-overlay": o,
                                "has-text": h.length > 0 || d.length > 0,
                                "has-video": O && p === v.a.video,
                                "has-embed": O && (p === v.a.rich || S),
                                "has-image": w
                            }),
                            key: u,
                            style: x
                        }, Object(r.h)("div", {
                            className: i({
                                active: !l && g,
                                "tag-scale-wrapper": !a
                            })
                        }, Object(r.h)("div", {
                            ref: function(e) {
                                t.billboardRef = e
                            },
                            className: i("tag-container", "hasHotzone", [P], {
                                "image-landscape": w && y,
                                "image-portrait": w && !y
                            }),
                            onClick: this.closeImageOverlay
                        }, this.renderBillboard(O))))
                    }, e.prototype.renderBillboard = function(t) {
                        var e = this.state,
                            n = e.mediaPayload,
                            o = e.width,
                            i = e.height,
                            a = this.props,
                            s = a.onNavigationLinkClicked,
                            c = a.overlay,
                            l = a.view,
                            u = a.tag;
                        if (c) {
                            var p = u.label,
                                h = u.description,
                                d = u.parsedDescription,
                                f = u.mediaType;
                            return Object(r.h)(Qt, {
                                label: p,
                                description: h,
                                parsedDescription: d,
                                mediaPayload: n,
                                mediaType: f,
                                aspectRatio: o / i,
                                closing: l.closeTheTag,
                                closeImageOverlay: this.closeImageOverlay,
                                onLinkClick: this.onLinkClick,
                                navigationTagClicked: s
                            })
                        }
                        var y = this.state,
                            v = y.landscape,
                            m = y.savedData,
                            g = l.selected,
                            b = u.sid,
                            w = {
                                mediaPayload: n,
                                imageTag: this.isImageTag(),
                                landscape: v,
                                hasMedia: t
                            },
                            O = {
                                width: o,
                                height: i,
                                bodyStyle: t && !n ? {
                                    width: o + "px"
                                } : {},
                                closing: l.closeTheTag
                            },
                            S = this.props,
                            x = S.editMode,
                            P = S.editing,
                            _ = S.manager;
                        return P && _ ? Object(r.h)(Ot, {
                            id: b,
                            getSavedData: this.getSavedData,
                            manager: _,
                            style: O,
                            media: w,
                            mediaType: u.mediaType,
                            label: u.label,
                            parsedDescription: u.parsedDescription,
                            description: u.description,
                            originalValues: m,
                            onLinkClick: this.onLinkClick,
                            navigationTagClicked: s
                        }) : (x && delete this.onOpenOverlay, Object(r.h)(Vt, {
                            id: b,
                            editable: x,
                            selected: g,
                            style: O,
                            onOpenOverlay: this.onOpenOverlay,
                            onLinkClick: this.onLinkClick,
                            navigationTagClicked: s,
                            onStartEditing: this.onStartEditing,
                            media: w,
                            mediaType: u.mediaType,
                            mediaSrc: u.mediaSrc,
                            label: u.label,
                            parsedDescription: u.parsedDescription,
                            description: u.description
                        }))
                    }, e.prototype.isImageTag = function() {
                        var t = this.props.tag;
                        return this.state.mediaLoadingState !== wt.FAILED && this.state.mediaLoadingState !== wt.ENABLED && t.mediaType === v.a.photo
                    }, e.prototype.getTagPositionStyle = function() {
                        var t = this.props.view;
                        if (t.located) {
                            var e = t.position;
                            return {
                                transform: "translate(" + (e ? e.x : 0) + "px, " + (e ? e.y : 0) + "px)"
                            }
                        }
                        return {
                            pointerEvents: "none",
                            visibility: "hidden"
                        }
                    }, e.isMediaTag = function(t) {
                        return t === v.a.photo || t === v.a.video || t === v.a.rich
                    }, e.getTagDirection = function(t, e, n, o) {
                        var r, i = 1 - (t + 1) / (n = n || window.innerWidth) * 2,
                            a = 1 - (e + 1) / (o = o || window.innerHeight) * 2,
                            s = a < -.2 ? 0 : a < .2 ? 1 : 2,
                            l = i < -.2 ? 2 : i < .2 ? 1 : 0,
                            u = Math.max(t, n - t);
                        return r = 0 === l ? 1 === s ? c.d.RIGHT : 0 === s ? c.d.RIGHT_UP : c.d.RIGHT_DOWN : 2 === l ? 1 === s ? c.d.LEFT : 0 === s ? c.d.LEFT_UP : c.d.LEFT_DOWN : 1 === s && u > 310 ? i < 0 ? c.d.RIGHT : c.d.LEFT : 2 === s ? c.d.DOWN : c.d.UP, Xt.debug("Selected " + r + " for [" + t + ", " + e + "] in " + n + "x" + o + " (" + l + ", " + s + ")"), r
                    }, e = n = Kt([f.b], e)
                }(r.Component),
                $t = (Jt.getTagDirection, n(581)),
                te = n(216);
            n.d(e, "a", (function() {
                return ie
            }));
            var ee = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                ne = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                oe = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                re = new a.a("mattertag-ui"),
                ie = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.bindings = [], n.updateEditing = function() {
                            n.setState({
                                editing: !(!n.props.editMode || !n.props.manager || null === n.mattertagViewData.editing)
                            }), n.renderActiveBillboards()
                        }, n.hasActiveBillboards = function() {
                            return n.mattertagViewData.activeBillboards.keys.length > 1
                        }, n.renderActiveBillboards = function() {
                            var t = n.state,
                                e = t.editing,
                                o = t.overlay,
                                i = n.props,
                                a = i.editMode,
                                s = i.manager,
                                l = [];
                            n.mattertagViewData.addState === c.b.PLACING || n.mattertagViewData.activeBillboards.keys.forEach((function(t) {
                                var i = n.mattertagViewData.getViewData(t),
                                    c = n.mattertagData.getTag(t),
                                    u = a || 0 === n.settingsData.tryGetProperty("mls", 0);
                                !c || i.closeTheTag && e && n.hasActiveBillboards() || l.push(Object(r.h)(Jt, {
                                    key: "billboard-" + t,
                                    editMode: a,
                                    editing: e,
                                    overlay: o,
                                    view: i,
                                    tag: c,
                                    manager: s,
                                    mediaEnabled: u,
                                    toggleImageOverlay: n.toggleImageOverlay,
                                    onNavigationLinkClicked: n.onNavigationLinkClicked,
                                    getTagContainer: n.getTagContainer
                                }))
                            })), n.setState({
                                billboards: l
                            })
                        }, n.onSelectedChanged = function() {
                            var t = n.mattertagViewData.selected || "";
                            t !== n.state.selectedTagId && n.setState({
                                selectedTagId: t
                            })
                        }, n.onNavigatingChanged = function() {
                            var t = n.mattertagViewData.navigating || "";
                            t !== n.state.navigatingTagId && n.setState({
                                navigatingTagId: t
                            })
                        }, n.toggleImageOverlay = function(t, e) {
                            n.setState({
                                overlay: e
                            }), n.props.toggleOpen && n.props.toggleOpen(s.a.mattertag, e), e && n.context.messageBus.broadcast(new u.e(t, l.b.OVERLAY)), e && t !== n.state.selectedTagId ? n.context.commandBinder.issueCommand(new h.a(t, d.b.FLY)) : e || n.closeBillboard(t)
                        }, n.getTagContainer = function() {
                            return n.tagsRoot
                        }, n.onNavigationLinkClicked = function(t) {
                            n.context.commandBinder.issueCommand(new $t.a(t))
                        }, n.setState({
                            billboards: [],
                            selectedTagId: "",
                            navigatingTagId: "",
                            overlay: !1,
                            editing: !1
                        }), n
                    }
                    return ee(e, t), e.prototype.componentDidMount = function() {
                        return ne(this, void 0, void 0, (function() {
                            var t, e, n, o;
                            return oe(this, (function(r) {
                                switch (r.label) {
                                    case 0:
                                        return r.trys.push([0, 4, , 5]), t = this, [4, this.context.market.waitForData(te.a)];
                                    case 1:
                                        return t.mattertagData = r.sent(), e = this, [4, this.context.market.waitForData(c.c)];
                                    case 2:
                                        return e.mattertagViewData = r.sent(), n = this, [4, this.context.market.waitForData(Pt.a)];
                                    case 3:
                                        return n.settingsData = r.sent(), this.bindings.push(this.mattertagViewData.onSelectedChanged(this.onSelectedChanged), this.mattertagViewData.onNavigatingChanged(this.onNavigatingChanged), this.mattertagViewData.onEditingTagChanged(this.updateEditing), this.mattertagViewData.onChanged(this.renderActiveBillboards)), this.updateEditing(), this.renderActiveBillboards(), [3, 5];
                                    case 4:
                                        return o = r.sent(), re.debug(o), [3, 5];
                                    case 5:
                                        return [2]
                                }
                            }))
                        }))
                    }, e.prototype.componentWillUnmount = function() {
                        this.bindings.forEach((function(t) {
                            t.cancel()
                        }))
                    }, e.prototype.render = function() {
                        var t = this,
                            e = this.state.editing;
                        return Object(r.h)("div", {
                            className: i("layer", "tags-layer", {
                                "tag-editing": e
                            }),
                            ref: function(e) {
                                t.tagsRoot = e
                            }
                        }, this.state.billboards)
                    }, e.prototype.closeBillboard = function(t) {
                        this.context.commandBinder.issueCommand(new p.a([t]))
                    }, e
                }(r.Component)
        },
        715: function(t, e, n) {
            "use strict";
            var o, r, i, a, s, c = n(19),
                l = n(110),
                u = n(111),
                p = n(141),
                h = n(220),
                d = n(263),
                f = n(615),
                y = n(251),
                v = n(90),
                m = n(253),
                g = n(346),
                b = n(78),
                w = n(55),
                O = n(616),
                S = n(617),
                x = n(588),
                P = n(589),
                _ = n(45),
                T = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                D = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                k = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                M = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                E = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                C = function(t) {
                    function e(e, n) {
                        var o = t.call(this) || this;
                        return o.propertiesToRefreshUi = [w.a.UnitType, w.a.MeasurementSnapping, w.a.MeasurementContinuousLines], o.close = function() {
                            o.setState({
                                settingsOpen: !1
                            })
                        }, o.updatePerSettings = function() {
                            o.setState({
                                units: o.context.settings.tryGetProperty(w.a.UnitType, b.c.Metric),
                                snapping: o.context.settings.tryGetProperty(w.a.MeasurementSnapping, !1),
                                continuousLines: o.context.settings.tryGetProperty(w.a.MeasurementContinuousLines, !1)
                            })
                        }, o.toggleUnits = function() {
                            var t = o.state.units !== b.c.Metric ? b.c.Metric : b.c.USFractional;
                            o.context.settings.setLocalStorageProperty(w.a.UnitType, t)
                        }, o.toggleSnapping = function() {
                            var t = o.state.snapping;
                            o.context.settings.setLocalStorageProperty(w.a.MeasurementSnapping, !t)
                        }, o.toggleOpen = function(t) {
                            var e = o.props.onToggle;
                            e && e(t, !o.state.settingsOpen), o.setState({
                                settingsOpen: !o.state.settingsOpen
                            })
                        }, o.toggleContinuousLines = function() {
                            var t = o.state.continuousLines;
                            o.context.settings.setLocalStorageProperty(w.a.MeasurementContinuousLines, !t)
                        }, o.locale = {
                            continuousLinesString: n.locale.t(_.a.MEASUREMENT_CONTINUOUS_LINES),
                            snappingString: n.locale.t(_.a.MEASUREMENT_SNAPPING),
                            unitsString: n.locale.t(_.a.MEASUREMENT_UNITS),
                            imperialString: n.locale.t(_.a.MEASUREMENT_IMPERIAL),
                            metricString: n.locale.t(_.a.MEASUREMENT_METRIC),
                            settingsString: n.locale.t(_.a.MEASUREMENT_SETTINGS),
                            closeString: n.locale.t(_.a.CLOSE)
                        }, o.state = {
                            settingsOpen: !1,
                            units: b.c.Metric,
                            snapping: !1,
                            continuousLines: !1
                        }, o
                    }
                    return T(e, t), e.prototype.componentDidMount = function() {
                        return k(this, void 0, void 0, (function() {
                            var t, e, n, o, r;
                            return M(this, (function(i) {
                                try {
                                    for (n = E(this.propertiesToRefreshUi), o = n.next(); !o.done; o = n.next()) r = o.value, this.context.settings.onPropertyChanged(r, this.updatePerSettings)
                                } catch (e) {
                                    t = {
                                        error: e
                                    }
                                } finally {
                                    try {
                                        o && !o.done && (e = n.return) && e.call(n)
                                    } finally {
                                        if (t) throw t.error
                                    }
                                }
                                return this.updatePerSettings(), [2]
                            }))
                        }))
                    }, e.prototype.componentWillUnmount = function() {
                        var t, e;
                        try {
                            for (var n = E(this.propertiesToRefreshUi), o = n.next(); !o.done; o = n.next()) {
                                var r = o.value;
                                this.context.settings.removeOnPropertyChanged(r, this.updatePerSettings)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    }, e.prototype.render = function() {
                        var t = this.state.settingsOpen,
                            e = this.locale.settingsString;
                        return Object(c.h)(m.a, {
                            appendClass: {
                                "measurement-settings-btn": !0
                            },
                            buttonStyle: m.b.OVERLAY,
                            iconClass: "icon-settings",
                            buttonState: t ? v.c.ACTIVE : v.c.ENABLED,
                            onClick: this.toggleOpen,
                            tooltipMsg: !t && e || void 0,
                            tooltipPosition: g.b.DOWN
                        }, this.renderSettingsPopup())
                    }, e.prototype.renderSettingsPopup = function() {
                        var t, e = this.state,
                            n = e.settingsOpen,
                            o = e.units,
                            r = e.snapping,
                            i = e.continuousLines,
                            a = this.locale,
                            s = a.continuousLinesString,
                            l = a.snappingString,
                            u = a.unitsString,
                            p = a.imperialString,
                            h = a.metricString,
                            d = o === b.c.Metric;
                        return Object(c.h)(O.a, {
                            appendClass: (t = {}, t["measurement-settings-popup"] = !0, t),
                            arrowPosition: y.a.TOP_RIGHT,
                            open: n,
                            close: this.toggleOpen
                        }, Object(c.h)(S.a, {
                            label: l
                        }, Object(c.h)(x.a, {
                            onToggle: this.toggleSnapping,
                            enabled: !0,
                            onOffLabel: !0,
                            toggled: r
                        })), Object(c.h)(S.a, {
                            label: s
                        }, Object(c.h)(x.a, {
                            onToggle: this.toggleContinuousLines,
                            enabled: !0,
                            onOffLabel: !0,
                            toggled: i
                        })), Object(c.h)(S.a, {
                            label: u,
                            appendClass: "units-setting"
                        }, Object(c.h)("div", {
                            class: "radio-group radio-buttons"
                        }, Object(c.h)(P.a, {
                            name: "unit",
                            value: b.c.USFractional,
                            id: "unit-imperial",
                            enabled: !0,
                            checked: !d,
                            onChange: this.toggleUnits
                        }, p), Object(c.h)(P.a, {
                            name: "unit",
                            value: b.c.Metric,
                            id: "unit-metric",
                            enabled: !0,
                            checked: d,
                            onChange: this.toggleUnits
                        }, h))))
                    }, e = D([u.b], e)
                }(c.Component),
                j = (n(694), n(8)),
                L = {
                    addEnabled: (r = {}, r[j.a.CREATING] = !0, r[j.a.CONFIRMING_POINT] = !0, r),
                    deleteVisible: (i = {}, i[j.a.IDLE] = !0, i[j.a.CREATING] = !0, i[j.a.CREATING_NEXT_POINT] = !0, i)
                },
                R = ((a = {})[j.a.CREATING] = !0, a[j.a.CONFIRMING_POINT] = !0, (s = {})[j.a.IDLE] = !0, s[j.a.CREATING] = !0, s[j.a.CREATING_NEXT_POINT] = !0, s),
                A = n(524);
            n.d(e, "a", (function() {
                return H
            }));
            var I = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                N = function() {
                    return (N = Object.assign || function(t) {
                        for (var e, n = 1, o = arguments.length; n < o; n++)
                            for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
                        return t
                    }).apply(this, arguments)
                },
                F = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                U = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                z = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                V = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                H = function(t) {
                    function e(e, r) {
                        var i = t.call(this) || this;
                        i.propertiesToRefreshUi = [w.a.UnitType, w.a.MeasurementSnapping, w.a.MeasurementContinuousLines, "measurement-mode-add-tooltip", "measurement-mode-desktop-help", "measurement-mode-mobile-help"], i.updatePerSettings = function() {
                            i.setState(N({
                                units: i.context.settings.tryGetProperty(w.a.UnitType, b.c.Metric),
                                snapping: i.context.settings.tryGetProperty(w.a.MeasurementSnapping, !1),
                                continuousLines: i.context.settings.tryGetProperty(w.a.MeasurementContinuousLines, !1),
                                addTooltipShown: i.context.settings.tryGetProperty("measurement-mode-add-tooltip", !1),
                                desktopHelpShown: i.context.settings.tryGetProperty("measurement-mode-desktop-help", !1),
                                mobileHelpShown: i.context.settings.tryGetProperty("measurement-mode-mobile-help", !1)
                            }, i.updateButtonVisibility(i.state.phase, i.state.totalPointsPerLine)))
                        }, i.updateAddTooltipVisibility = function() {
                            i.state.addTooltipShown || i.props.editMode || (i.setState({
                                showAddTooltip: !0
                            }), window.clearTimeout(i.startAddingTooltip), i.startAddingTooltip = window.setTimeout((function() {
                                i.dismissAddTooltip()
                            }), o.START_ADDING_TOOLTIP_TIMEOUT))
                        }, i.dismissAddTooltip = function() {
                            i.setState({
                                showAddTooltip: !1
                            }), i.context.settings.setProperty("measurement-mode-add-tooltip", !0)
                        }, i.getOverlayComponents = function() {
                            var t = i.state,
                                e = t.createPointProgress,
                                n = t.units,
                                o = t.totalLength,
                                r = t.mobileHelpShown,
                                a = t.desktopHelpShown,
                                s = i.props,
                                l = s.mobile,
                                u = s.editMode,
                                p = s.measurementModeHelpOpen,
                                h = L.addEnabled[i.state.phase] && e > 0 && l,
                                f = i.locale,
                                y = f.closeString,
                                b = f.helpString,
                                w = [Object(c.h)("div", {
                                    class: "overlay overlay-drawer-tool measurement-mode"
                                }, Object(c.h)("div", {
                                    class: "overlay-bar overlay-bar-top"
                                }, Object(c.h)("div", {
                                    class: "overlay-bar-filler overlay-bar-filler-left"
                                }), Object(c.h)("div", {
                                    class: "overlay-bar-center"
                                }, o > 0 && Object(c.h)("div", {
                                    class: "measurement-mode-total-length"
                                }, Object(d.a)(o, n))), Object(c.h)("div", {
                                    class: "overlay-bar-right"
                                }, !u && Object(c.h)(m.a, {
                                    appendClass: {
                                        "measurement-help-btn": !0
                                    },
                                    buttonStyle: m.b.OVERLAY,
                                    iconClass: "icon-help",
                                    buttonState: p ? v.c.ACTIVE : v.c.ENABLED,
                                    onClick: i.toggleHelpOpen,
                                    tooltipMsg: !p && b || void 0,
                                    tooltipPosition: g.b.DOWN
                                }), Object(c.h)(C, {
                                    ref: function(t) {
                                        return i.measurementSettings = t
                                    },
                                    editMode: u,
                                    onToggle: i.settingsToggled
                                }), !u && Object(c.h)(m.a, {
                                    iconClass: "icon-close",
                                    buttonStyle: m.b.OVERLAY,
                                    tooltipMsg: y,
                                    tooltipPosition: g.b.DOWN,
                                    onClick: i.onCloseMeasurementTool
                                }))))];
                            if (p || w.push(i.getMeasurementModeButtonControls()), h && w.push(i.renderProgressCircle()), !a || !r) {
                                var O = l ? i.getMobileHelp() : i.getDesktopHelp();
                                w.push(O)
                            }
                            return w
                        }, i.getMobileHelp = function() {
                            var t, e, n = i.state.phase,
                                o = i.locale.mobileHelp,
                                r = o.pressHoldStart,
                                a = o.pressHoldEnd,
                                s = o.dragEdit;
                            switch (n) {
                                case h.MeasuringPhase.CREATING_NEXT_POINT:
                                    t = Object(c.h)("div", {
                                        class: "icon icon-drag-edit"
                                    }), e = Object(c.h)("span", {
                                        class: "message"
                                    }, a);
                                    break;
                                case h.MeasuringPhase.EDITING:
                                case h.MeasuringPhase.POINT_PLACED:
                                    t = Object(c.h)("div", {
                                        class: "icon icon-finger-drag"
                                    }), e = Object(c.h)("span", {
                                        class: "message"
                                    }, s);
                                    break;
                                case h.MeasuringPhase.CREATING:
                                    t = Object(c.h)("div", {
                                        class: "icon icon-press-hold"
                                    }), e = Object(c.h)("span", {
                                        class: "message"
                                    }, r)
                            }
                            return Object(c.h)("div", {
                                class: "measurement-mode-mobile-message"
                            }, t, e)
                        }, i.getDesktopHelp = function() {
                            var t, e, o = i.state,
                                r = o.phase,
                                a = o.totalPointsPerLine,
                                s = i.locale.desktopHelp,
                                l = s.clickAnywhereString,
                                u = s.escapeString;
                            switch (r) {
                                case h.MeasuringPhase.CREATING:
                                    t = Object(c.h)("div", {
                                        class: "icon icon-draw-lines"
                                    }), e = Object(c.h)("span", {
                                        class: "message"
                                    }, l);
                                    break;
                                case h.MeasuringPhase.CREATING_NEXT_POINT:
                                    a >= 3 && (t = Object(c.h)("div", {
                                        class: "escape-key"
                                    }, Object(c.h)("img", {
                                        src: n(696)
                                    })), e = Object(c.h)("span", {
                                        class: "message escape-message"
                                    }, u))
                            }
                            return Object(c.h)("div", {
                                class: "measurement-mode-desktop-message"
                            }, t, e)
                        }, i.onDeleteMeasurement = function(t) {
                            t && t.stopPropagation(), i.context.commandBinder.issueCommand(new p.b)
                        }, i.onStartPointPlacement = function(t) {
                            t && t.stopPropagation(), i.context.commandBinder.issueCommand(new p.d), i.dismissAddTooltip()
                        }, i.onStopPointPlacement = function(t) {
                            t && t.stopPropagation(), i.context.commandBinder.issueCommand(new p.f)
                        }, i.onCloseMeasurementTool = function(t) {
                            t && t.stopPropagation(), i.closeModals(), i.context.commandBinder.issueCommand(new p.c(!1)), i.measurementSettings && i.measurementSettings.close(), i.dismissAddTooltip()
                        }, i.settingsToggled = function(t, e) {
                            var n = i.props,
                                o = n.toggleOpen,
                                r = n.measurementModeHelpOpen;
                            t.stopPropagation(), e && o && r && (o(A.a.measurementModeHelp, !1), o(A.a.measurementMode, !0))
                        }, i.toggleHelpOpen = function(t) {
                            var e = i.props,
                                n = e.toggleOpen,
                                o = e.measurementModeHelpOpen;
                            t.stopPropagation(), i.measurementSettings && i.measurementSettings.close(), o && i.context.analytics.track("showcase_gui", {
                                gui_action: "measure_mode_help_clicked"
                            }), n && n(A.a.measurementModeHelp, !o), n && o && n(A.a.measurementMode, !0)
                        }, i.locale = {
                            startAddingString: r.locale.t(_.a.MEASUREMENT_START_ADDING),
                            continuousLinesString: r.locale.t(_.a.MEASUREMENT_CONTINUOUS_LINES),
                            snappingString: r.locale.t(_.a.MEASUREMENT_SNAPPING),
                            unitsString: r.locale.t(_.a.MEASUREMENT_UNITS),
                            imperialString: r.locale.t(_.a.MEASUREMENT_IMPERIAL),
                            metricString: r.locale.t(_.a.MEASUREMENT_METRIC),
                            desktopHelp: {
                                clickAnywhereString: r.locale.t(_.a.MEASUREMENT_HELP_CLICK_ANYWHERE),
                                escapeString: r.locale.t(_.a.MEASUREMENT_HELP_ESCAPE)
                            },
                            mobileHelp: {
                                pressHoldStart: r.locale.t(_.a.MEASUREMENT_HELP_PRESS_START),
                                dragEdit: r.locale.t(_.a.MEASUREMENT_HELP_DRAG_EDIT),
                                pressHoldEnd: r.locale.t(_.a.MEASUREMENT_HELP_PRESS_END)
                            },
                            helpString: r.locale.t(_.a.HELP),
                            closeString: r.locale.t(_.a.CLOSE)
                        };
                        return i.dataSubscription = e.onDataUpdate((function(t) {
                            var e = t.selectedGroupInfo,
                                n = t.createPointProgress >= .95 ? 1 : t.createPointProgress,
                                o = t.createPointPosition ? t.createPointPosition : {
                                    x: 0,
                                    y: 0
                                },
                                r = t.selectedGroupIndex,
                                a = t.phase,
                                s = 0,
                                c = 0;
                            e && (s = e.length, c = e.count), a === h.MeasuringPhase.CLOSED && (i.closeModals(), i.dismissAddTooltip()), a === h.MeasuringPhase.IDLE && i.updateAddTooltipVisibility(), i.setState(N({
                                totalLength: s,
                                createPointPosition: o,
                                selectedGroupIndex: r,
                                createPointProgress: n,
                                phase: a,
                                totalPointsPerLine: c
                            }, i.updateButtonVisibility(a, c)))
                        })), i.state = {
                            totalLength: -1,
                            units: b.c.Metric,
                            snapping: !1,
                            continuousLines: !1,
                            selectedGroupIndex: -1,
                            createPointProgress: 0,
                            phase: h.MeasuringPhase.CLOSED,
                            totalPointsPerLine: 0,
                            showAddTooltip: !1,
                            addVisible: !1,
                            closeVisible: !1,
                            deleteVisible: !1,
                            checkVisible: !1,
                            desktopHelpShown: !1,
                            mobileHelpShown: !1,
                            addTooltipShown: !1,
                            createPointPosition: {
                                x: 0,
                                y: 0
                            }
                        }, i
                    }
                    var o;
                    return I(e, t), o = e, e.prototype.componentDidMount = function() {
                        return U(this, void 0, void 0, (function() {
                            var t, e, n, o, r;
                            return z(this, (function(i) {
                                this.dataSubscription.renew();
                                try {
                                    for (n = V(this.propertiesToRefreshUi), o = n.next(); !o.done; o = n.next()) r = o.value, this.context.settings.onPropertyChanged(r, this.updatePerSettings)
                                } catch (e) {
                                    t = {
                                        error: e
                                    }
                                } finally {
                                    try {
                                        o && !o.done && (e = n.return) && e.call(n)
                                    } finally {
                                        if (t) throw t.error
                                    }
                                }
                                return this.updatePerSettings(), [2]
                            }))
                        }))
                    }, e.prototype.componentWillUnmount = function() {
                        var t, e;
                        this.dataSubscription.cancel();
                        try {
                            for (var n = V(this.propertiesToRefreshUi), o = n.next(); !o.done; o = n.next()) {
                                var r = o.value;
                                this.context.settings.removeOnPropertyChanged(r, this.updatePerSettings)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    }, e.prototype.render = function() {
                        var t = this.props,
                            e = t.measurementMode,
                            n = t.measurementModeHelpOpen;
                        return Object(c.h)("div", {
                            id: "measurement-mode-layer"
                        }, (e || n) && this.getOverlayComponents())
                    }, e.prototype.renderProgressCircle = function() {
                        var t = this.state,
                            e = t.createPointProgress,
                            n = t.createPointPosition,
                            r = {
                                left: n.x - o.pointButtonRadius / 2 + "px",
                                top: n.y - o.pointButtonRadius / 2 + "px"
                            };
                        return Object(c.h)("div", {
                            class: "point-button-wrapper",
                            style: r
                        }, Object(c.h)(f.a, {
                            appendClass: l({
                                complete: 1 === e,
                                reset: 0 === e
                            }),
                            progress: 100 * e,
                            innerRadius: o.pointButtonRadius,
                            barWidth: o.progressBarThickness
                        }, Object(c.h)("circle", {
                            class: "point",
                            cx: "0",
                            cy: "0",
                            r: "22",
                            transform: "rotate(-90)",
                            fill: "#fff"
                        })))
                    }, e.prototype.updateButtonVisibility = function(t, e) {
                        var n = this.props,
                            o = n.mobile,
                            r = n.editMode,
                            i = t === h.MeasuringPhase.CREATING && 0 === e,
                            a = t === h.MeasuringPhase.CREATING_NEXT_POINT && 2 === e,
                            s = i || a,
                            c = (this.state.continuousLines ? e > 2 : 2 === e) && (this.state.continuousLines ? t === h.MeasuringPhase.CREATING_NEXT_POINT : t === h.MeasuringPhase.CREATING),
                            l = e > 0 && (o ? !!L.deleteVisible[t] : !!R[t]);
                        return (!o && this.state.continuousLines ? e > 3 : 2 === e) && this.context.settings.setProperty("measurement-mode-desktop-help", !0), o && c && this.context.settings.setProperty("measurement-mode-mobile-help", !0), {
                            addVisible: t === h.MeasuringPhase.IDLE && !r,
                            checkVisible: c,
                            deleteVisible: l,
                            closeVisible: s
                        }
                    }, e.prototype.getMeasurementModeButtonControls = function() {
                        var t = this.state,
                            e = t.selectedGroupIndex,
                            n = t.addVisible,
                            o = t.checkVisible,
                            r = t.deleteVisible,
                            i = t.closeVisible,
                            a = t.showAddTooltip,
                            s = this.locale.startAddingString;
                        return Object(c.h)("div", {
                            class: "measurement-mode-buttons-wrapper"
                        }, o && Object(c.h)(m.a, {
                            appendClass: {
                                "measurement-mode-button-center": !0,
                                "measurement-mode-button-check": !0
                            },
                            iconClass: "icon-measurement-mode-check",
                            buttonState: v.c.ENABLED,
                            buttonStyle: m.b.PRIMARY,
                            onClick: this.onStopPointPlacement
                        }), Object(c.h)(y.b, {
                            appendClass: {
                                "measurement-mode-add-tooltip": !0
                            },
                            open: a,
                            message: Object(c.h)("span", null, s),
                            arrowPos: y.a.BOTTOM_CENTER
                        }), n && Object(c.h)(m.a, {
                            appendClass: {
                                "measurement-mode-button-center": !0,
                                "measurement-mode-button-plus": !0,
                                deleteVisible: r
                            },
                            iconClass: "icon-measurement-mode-add",
                            buttonStyle: m.b.PRIMARY,
                            onClick: this.onStartPointPlacement
                        }), i && Object(c.h)(m.a, {
                            appendClass: {
                                "measurement-mode-button-center": !0,
                                "measurement-mode-button-close": !0,
                                deleteVisible: r
                            },
                            iconClass: "icon-measurement-mode-close",
                            buttonStyle: m.b.PRIMARY,
                            onClick: this.onStopPointPlacement
                        }), r && Object(c.h)(m.a, {
                            appendClass: {
                                "measurement-mode-button-outer": !0,
                                "measurement-mode-button-delete": !0
                            },
                            buttonStyle: m.b.OVERLAY,
                            iconClass: "icon-delete",
                            buttonState: e > -1 ? v.c.ENABLED : v.c.DISABLED,
                            onClick: this.onDeleteMeasurement
                        }))
                    }, e.prototype.closeModals = function() {
                        var t = this.props,
                            e = t.toggleOpen,
                            n = t.measurementModeHelpOpen;
                        e && e(A.a.measurementMode, !1), e && n && e(A.a.measurementModeHelp, !1)
                    }, e.pointButtonRadius = 132, e.progressBarThickness = 8, e.START_ADDING_TOOLTIP_TIMEOUT = 5e3, e = o = F([u.b], e)
                }(c.Component)
        },
        716: function(t, e, n) {
            "use strict";
            var o, r = n(19),
                i = n(129),
                a = n(111),
                s = n(535),
                c = n(61),
                l = n(567),
                u = n(110),
                p = (n(688), n(690), o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                h = function(t) {
                    function e(e) {
                        return t.call(this, e) || this
                    }
                    return p(e, t), e.prototype.render = function() {
                        var t = this.props,
                            e = t.sid,
                            n = t.position,
                            o = t.text,
                            i = t.readOnlyText,
                            a = t.rotation,
                            s = t.visible,
                            c = {
                                left: n.x + "px",
                                top: n.y + "px",
                                transform: a ? "translate(-50%, -50%) rotate(" + a + "deg) " : "translate(-50%, -50%)"
                            },
                            l = i ? o + " " + i : o;
                        return s ? Object(r.h)("div", {
                            id: e,
                            class: u("label"),
                            style: c
                        }, Object(r.h)("span", null, l)) : null
                    }, e
                }(r.Component),
                d = n(613),
                f = n(1),
                y = n(188),
                v = n(255),
                m = n(256),
                g = n(544),
                b = n(259),
                w = n(3);
            n.d(e, "a", (function() {
                return D
            }));
            var O = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                S = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                x = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                P = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                _ = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                T = new w.a("label-ui"),
                D = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.subscriptions = [], n.shouldLabelsDrawForMode = function(t) {
                            return n.props.modes.indexOf(t) >= 0
                        }, n.onCameraUpdate = function() {
                            n.shouldLabelsDrawForMode(n.props.viewmode) && n.updateDataPosition()
                        }, n.onViewTransitionStart = function() {
                            n.setState({
                                inModeTransition: !0
                            })
                        }, n.onViewTransitionEnd = function(t) {
                            return x(n, void 0, void 0, (function() {
                                return P(this, (function(e) {
                                    return this.shouldLabelsDrawForMode(Object(i.c)(t.toMode)) && (this.setState({
                                        inModeTransition: !1
                                    }), this.updateDataPosition()), [2]
                                }))
                            }))
                        }, n.updateFloorState = function() {
                            n.setState({
                                currentFloor: n.floorsViewData.currentFloor,
                                topMostFloor: n.floorsViewData.totalFloors - 1
                            })
                        }, n.updateDataPosition = function() {
                            return x(n, void 0, void 0, (function() {
                                var t, e, n, o, r, i, a, c, u, p, h;
                                return P(this, (function(d) {
                                    switch (d.label) {
                                        case 0:
                                            return n = {}, [4, this.context.market.tryGetData(s.a)];
                                        case 1:
                                            if (!(o = d.sent())) return [3, 10];
                                            r = o.getCollection(), d.label = 2;
                                        case 2:
                                            d.trys.push([2, 7, 8, 9]), i = _(r), a = i.next(), d.label = 3;
                                        case 3:
                                            return a.done ? [3, 6] : (c = a.value, u = new f.a(c.position.x, c.position.y, c.position.z), [4, this.context.commandBinder.issueCommand(new l.a({
                                                worldPosition: u
                                            }))]);
                                        case 4:
                                            p = d.sent(), n[c.sid] = Object.assign({
                                                screenPosition: p
                                            }, c), d.label = 5;
                                        case 5:
                                            return a = i.next(), [3, 3];
                                        case 6:
                                            return [3, 9];
                                        case 7:
                                            return h = d.sent(), t = {
                                                error: h
                                            }, [3, 9];
                                        case 8:
                                            try {
                                                a && !a.done && (e = i.return) && e.call(i)
                                            } finally {
                                                if (t) throw t.error
                                            }
                                            return [7];
                                        case 9:
                                            this.setState({
                                                labelPositions: n
                                            }), d.label = 10;
                                        case 10:
                                            return [2]
                                    }
                                }))
                            }))
                        }, n.clearVisibleFloor = function() {
                            n.setState({
                                currentFloor: void 0
                            })
                        }, n.updateVisibleFloor = function(t) {
                            n.setState({
                                currentFloor: t.floorIndex
                            })
                        }, n.setState({
                            labelPositions: {},
                            currentFloor: -1,
                            topMostFloor: 0,
                            inModeTransition: !1
                        }), n
                    }
                    return O(e, t), e.prototype.componentDidMount = function() {
                        return x(this, void 0, void 0, (function() {
                            var t, e, n, o, r;
                            return P(this, (function(i) {
                                switch (i.label) {
                                    case 0:
                                        t = this.context.messageBus, i.label = 1;
                                    case 1:
                                        return i.trys.push([1, 3, , 4]), e = this, [4, this.context.market.waitForData(y.c)];
                                    case 2:
                                        return e.floorsViewData = i.sent(), n = this.floorsViewData.onChanged(this.updateFloorState), this.subscriptions.push(n), this.updateFloorState(), this.updateDataPosition(), this.listenToManager(this.props), [3, 4];
                                    case 3:
                                        return o = i.sent(), T.debug(o), [3, 4];
                                    case 4:
                                        return [4, this.context.market.waitForData(c.a)];
                                    case 5:
                                        return r = i.sent(), this.subscriptions.push(r.onChanged(this.onCameraUpdate), t.subscribe(g.a, this.clearVisibleFloor), t.subscribe(b.a, this.updateVisibleFloor), t.subscribe(m.a, this.onViewTransitionStart), t.subscribe(v.a, this.onViewTransitionEnd)), [2]
                                }
                            }))
                        }))
                    }, e.prototype.componentWillUnmount = function() {
                        this.subscriptions.forEach((function(t) {
                            return t.cancel()
                        }))
                    }, e.prototype.getChildContext = function() {
                        return {
                            manager: this.props.manager
                        }
                    }, e.prototype.listenToManager = function(t) {
                        var e = this;
                        if (t.manager) {
                            var n = t.manager.onStateUpdated(t.states || [], (function() {
                                return e.updateDataPosition()
                            }));
                            n.forEach((function(t) {
                                return t.renew()
                            })), Array.prototype.push.apply(this.subscriptions, n)
                        }
                    }, e.prototype.renderLabel = function(t) {
                        var e = this.props,
                            n = e.editMode,
                            o = e.manager,
                            i = this.state,
                            a = i.currentFloor,
                            s = i.topMostFloor,
                            c = i.labelPositions[t],
                            l = c.floor,
                            u = c.screenPosition,
                            p = c.text,
                            f = c.visible,
                            y = c.sid,
                            v = c.rotation;
                        return n && o ? Object(r.h)(d.a, {
                            key: y,
                            position: u,
                            rotation: v,
                            text: p,
                            visible: (-1 === a && s === l || a === l) && f,
                            sid: y,
                            manager: o
                        }) : Object(r.h)(h, {
                            key: y,
                            position: u,
                            rotation: v,
                            text: p,
                            visible: (-1 === a && s === l || a === l) && f,
                            sid: y
                        })
                    }, e.prototype.renderLabels = function() {
                        var t = this,
                            e = this.state.labelPositions,
                            n = [];
                        return Object.keys(e).forEach((function(e) {
                            n.push(t.renderLabel(e))
                        })), Object(r.h)("div", {
                            class: "layer labels-layer"
                        }, n)
                    }, e.prototype.render = function() {
                        var t = this.state.inModeTransition,
                            e = this.props.viewmode;
                        return !this.shouldLabelsDrawForMode(e) || t ? null : this.renderLabels()
                    }, e = S([a.a], e)
                }(r.Component)
        },
        717: function(t, e, n) {
            "use strict";
            var o, r = n(19),
                i = n(110),
                a = (n(607), n(111)),
                s = n(633),
                c = n(608),
                l = n(498),
                u = n(6),
                p = n(179),
                h = n(27),
                d = n(609),
                f = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                y = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.highlights = [], n.highlightList = function(t) {
                            var e = n.props,
                                o = e.currentStep,
                                i = e.onHighlightClicked;
                            return Object(r.h)("div", {
                                id: "frame-container"
                            }, Object(r.h)("div", null, t.items.map((function(t, e) {
                                return Object(r.h)(d.a, {
                                    highlight: t,
                                    index: e,
                                    active: e === o,
                                    editable: !1,
                                    onClickHighlight: i.bind(n, e),
                                    getRef: n.addHighlightRef
                                })
                            }))))
                        }, n.addHighlightRef = function(t, e) {
                            n.highlights[t] = e, t === n.props.currentStep && n.props.setActiveElement && n.props.setActiveElement(e)
                        }, n
                    }
                    return f(e, t), e.prototype.render = function() {
                        var t = this.props.highlights;
                        return t && t.length ? Object(r.h)(this.highlightList, {
                            items: t
                        }) : null
                    }, e
                }(r.Component),
                v = n(3),
                m = n(78);
            n.d(e, "a", (function() {
                return P
            }));
            var g, b = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                w = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                O = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                S = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                x = new v.a("highlight-reel"),
                P = 400;
            ! function(t) {
                t[t.flash = 0] = "flash", t[t.expanded = 1] = "expanded", t[t.collapsed = 2] = "collapsed"
            }(g || (g = {}));
            var _ = function(t) {
                function e(e) {
                    var n = t.call(this, e) || this;
                    return n.bindings = [], n.showReel = function() {
                        if (n.props.onToggleHLR && n.props.highlights.length > 0) switch (n.hlStartupStyle) {
                            case g.expanded:
                            case g.flash:
                                n.props.onToggleHLR(!0)
                        }
                    }, n.setActiveElement = function(t) {
                        n.setState({
                            activeElement: t
                        })
                    }, n.setHighlightClickable = function(t) {
                        return n.highlightClickable = t
                    }.bind(n), n.onHighlightClicked = function(t) {
                        return O(n, void 0, Promise, (function() {
                            var e;
                            return S(this, (function(n) {
                                switch (n.label) {
                                    case 0:
                                        if (!this.highlightClickable) return [2];
                                        n.label = 1;
                                    case 1:
                                        return n.trys.push([1, 6, , 7]), this.props.tourPlaying ? [4, this.context.commandBinder.issueCommand(new p.c)] : [3, 3];
                                    case 2:
                                        n.sent(), n.label = 3;
                                    case 3:
                                        return this.props.transition.active ? [3, 5] : (this.context.analytics.track("showcase_gui", {
                                            gui_action: "click_highlight"
                                        }), [4, this.context.commandBinder.issueCommand(new p.b(t))]);
                                    case 4:
                                        n.sent(), this.setHighlightClickable(!1), n.label = 5;
                                    case 5:
                                        return [3, 7];
                                    case 6:
                                        return e = n.sent(), x.debug(e), [3, 7];
                                    case 7:
                                        return [2]
                                }
                            }))
                        }))
                    }, n.state = {
                        activeElement: null
                    }, n
                }
                return b(e, t), e.prototype.componentDidMount = function() {
                    var t = this;
                    if (this.props.briefHlr) {
                        var e = this.context.settings.tryGetProperty(m.a.HighlightReel, !0);
                        if (!this.props.editMode && this.props.totalSteps > 0 && e) {
                            var n = this.props.highlights.some((function(t) {
                                return t.snapshot.is360
                            }));
                            this.hlStartupStyle = Object(u.z)("hl", n ? 1 : 0), this.hlStartupStyle === g.collapsed && n && (this.hlStartupStyle = g.expanded), Object(h.d)(100).then((function() {
                                t.showReel(), Object(h.d)(3e3).then((function() {
                                    t.dismissReel(), t.props.onBriefHLR && t.props.onBriefHLR()
                                }))
                            }))
                        }
                    }
                }, e.prototype.componentWillUnmount = function() {
                    this.bindings.forEach((function(t) {
                        t.cancel()
                    }))
                }, e.prototype.render = function() {
                    var t = this.props,
                        e = t.reelOpen,
                        n = t.activeStep,
                        o = t.highlights,
                        a = t.totalSteps,
                        u = a > 0,
                        p = u ? Object(r.h)(y, {
                            highlights: o,
                            currentStep: n,
                            onHighlightClicked: this.onHighlightClicked,
                            setActiveElement: this.setActiveElement
                        }) : Object(r.h)(c.a, null);
                    return Object(r.h)("div", {
                        class: i("highlight-reel", {
                            "reel-viewing": u,
                            "reel-empty": !u
                        })
                    }, Object(r.h)(l.a, {
                        id: "reel-container",
                        open: e
                    }, Object(r.h)(s.a, {
                        totalSteps: a,
                        activeElement: this.state.activeElement,
                        highlightClickable: this.setHighlightClickable,
                        scrollbarScrollingOnly: !1
                    }, p)))
                }, e.prototype.dismissReel = function() {
                    this.props.onToggleHLR && this.hlStartupStyle === g.flash && this.props.onToggleHLR(!1)
                }, e = w([a.b], e)
            }(r.Component);
            e.b = _
        },
        718: function(t, e, n) {
            "use strict";
            var o, r = n(19),
                i = n(129),
                a = n(45),
                s = n(188),
                c = n(179),
                l = n(20),
                u = n(113),
                p = n(566),
                h = n(667),
                d = n(110),
                f = n(522),
                y = n(6),
                v = n(518),
                m = n(346),
                g = n(253),
                b = n(90),
                w = (n(670), o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                O = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.floors = [], n.scrollbars = null, n.canClick = !1, n.newFloorIndex = null, n.updateScrollCenter = function(t) {
                            n.floors.length <= 5 || n.scrollbars && (n.newFloorIndex = null, n.scrollbars.setScrollCenter(n.floors[t]))
                        }, n.onScrollbarClick = function() {
                            n.canClick = !0
                        }, n.onOutsideClick = function(t) {
                            n.toggleMenu(!1)
                        }, n.onIconClick = function(t) {
                            t.stopPropagation(), n.toggleMenu()
                        }, n.toggleMenu = function(t) {
                            void 0 === t && (t = void 0);
                            var e = n.state.showMenu,
                                o = void 0 !== t ? t : !e;
                            e !== o && (o ? window.addEventListener("click", n.onOutsideClick) : window.removeEventListener("click", n.onOutsideClick), n.setState({
                                showMenu: o
                            }))
                        }, n.onFloorClick = function(t) {
                            n.scrollbars && !n.canClick || (t.stopPropagation(), n.toggleMenu(), n.props.handleClickFloor(t))
                        }, n.state = {
                            showMenu: !1
                        }, n
                    }
                    return w(e, t), e.prototype.componentWillReceiveProps = function(t) {
                        this.props.currentFloor !== t.currentFloor && (this.newFloorIndex = t.currentFloor)
                    }, e.prototype.componentDidUpdate = function() {
                        null !== this.newFloorIndex && this.updateScrollCenter(this.newFloorIndex)
                    }, e.prototype.getFloorMenu = function() {
                        var t = this,
                            e = this.props.floorNames.map((function(e, n) {
                                return Object(r.h)("div", {
                                    class: d("floor-button", {
                                        current: t.props.currentFloor === n
                                    }),
                                    key: String(n),
                                    ref: function(e) {
                                        t.floors[n] = e
                                    },
                                    onClick: t.onFloorClick,
                                    "data-value": n
                                }, void 0 !== e ? e : t.context.locale.t(a.a.FLOOR_NAME) + (n + 1))
                            })).reverse(),
                            n = e.length > 5,
                            o = d({
                                "faded-in": this.state.showMenu,
                                scrollable: n
                            });
                        return n ? Object(r.h)("div", {
                            id: "floor-menu-wrapper",
                            class: o
                        }, Object(r.h)(f.a, {
                            name: "floor-menu-wrapper",
                            forceHidden: Object(y.o)(),
                            ref: function(e) {
                                t.scrollbars = e
                            },
                            singleScrollDirection: v.b.vertical,
                            onScrollbarVisibilityChange: this.updateScrollCenter.bind(this, this.props.currentFloor),
                            handleClick: this.onScrollbarClick
                        }, e)) : (this.scrollbars = null, Object(r.h)("div", {
                            id: "floor-menu-wrapper",
                            class: o
                        }, e))
                    }, e.prototype.render = function() {
                        var t = this.props,
                            e = t.visible,
                            n = t.currentFloor;
                        if (e) {
                            var o = this.state.showMenu,
                                i = String(n + 1).length > 1,
                                s = this.props.isAllFloors(n),
                                c = s ? "icon-floor-controls-all" : "icon-floor-controls",
                                l = this.context.locale.t(a.a.HELP_MORE_FLOORS_A),
                                u = o ? b.c.ACTIVE : b.c.ENABLED;
                            return Object(r.h)(g.a, {
                                id: "floor-controls",
                                buttonState: u,
                                onClick: this.onIconClick
                            }, this.getFloorMenu(), Object(r.h)(m.a, {
                                content: l,
                                position: m.b.UP,
                                className: d("select-floor", {
                                    "tooltip-hidden": o,
                                    isAllFloors: s
                                })
                            }, Object(r.h)("div", {
                                class: d("floor-number", {
                                    twoDigit: i
                                })
                            }, Object(r.h)("span", null, !s && n + 1)), Object(r.h)("span", {
                                class: d("icon", c)
                            })))
                        }
                        return Object(r.h)("div", {
                            id: "floor-controls"
                        })
                    }, e
                }(r.Component),
                S = n(3),
                x = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                P = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                _ = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                T = function(t, e) {
                    var n = "function" == typeof Symbol && t[Symbol.iterator];
                    if (!n) return t;
                    var o, r, i = n.call(t),
                        a = [];
                    try {
                        for (;
                            (void 0 === e || e-- > 0) && !(o = i.next()).done;) a.push(o.value)
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    return a
                },
                D = function() {
                    for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(T(arguments[e]));
                    return t
                },
                k = new S.a("floor-controls"),
                M = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.originalFloors = [], n.handleClickFloor = function(t) {
                            return P(n, void 0, void 0, (function() {
                                var e, n, o, r;
                                return _(this, (function(i) {
                                    switch (i.label) {
                                        case 0:
                                            return i.trys.push([0, 6, , 7]), e = t.target, n = e.getAttribute("data-value"), o = "string" == typeof n ? parseFloat(n) : -1, [4, this.context.commandBinder.issueCommand(new c.c)];
                                        case 1:
                                            return i.sent(), this.isAllFloors(o) ? (this.context.analytics.track("showcase_gui", {
                                                gui_action: "click_toggle_all_floors_button"
                                            }), [4, this.context.commandBinder.issueCommand(new p.a({
                                                moveCamera: !0
                                            }))]) : [3, 3];
                                        case 2:
                                            return i.sent(), [3, 5];
                                        case 3:
                                            return o === this.state.currentFloor ? [3, 5] : (this.context.analytics.track("showcase_gui", {
                                                gui_action: "click_floor_select_button"
                                            }), [4, this.context.commandBinder.issueCommand(new h.a({
                                                floorIndex: o,
                                                moveCamera: !0
                                            }))]);
                                        case 4:
                                            i.sent(), i.label = 5;
                                        case 5:
                                            return [3, 7];
                                        case 6:
                                            return r = i.sent(), k.debug(r), [3, 7];
                                        case 7:
                                            return [2]
                                    }
                                }))
                            }))
                        }, n.isAllFloors = function(t) {
                            return !n.originalFloors[t]
                        }, n.setFloorNamesForMode = function() {
                            var t = n.viewmodeData.currentMode !== l.a.Panorama ? D(n.originalFloors, [n.context.locale.t(a.a.FLOOR_ALL)]) : n.originalFloors.slice(0, n.originalFloors.length);
                            if (n.viewmodeData.currentMode !== n.state.currentMode) n.setState({
                                floorNames: t,
                                currentMode: n.viewmodeData.currentMode
                            });
                            else {
                                var e = n.getFloorIndex(t.length);
                                n.setState({
                                    floorNames: t,
                                    currentFloor: e
                                })
                            }
                        }, n.updateData = function() {
                            n.state.floorNames === n.viewData.getFloorNames() && n.state.currentFloor === n.viewData.currentFloor || (n.originalFloors = n.viewData.getFloorNames(), n.setFloorNamesForMode())
                        }, n.getFloorIndex = function(t) {
                            return n.viewData.currentFloor < 0 && n.props.viewmode !== i.b.INSIDE ? t - 1 : n.viewData.currentFloor
                        }, n.modeChanged = function() {
                            n.setFloorNamesForMode()
                        }, n.state = {
                            visible: e.viewmode !== i.b.OUTSIDE,
                            currentFloor: -2,
                            floorNames: [],
                            currentMode: null
                        }, n
                    }
                    return x(e, t), e.prototype.componentWillReceiveProps = function(t) {
                        t.viewmode !== this.props.viewmode && this.setState({
                            visible: t.viewmode !== i.b.OUTSIDE
                        })
                    }, e.prototype.componentDidMount = function() {
                        return P(this, void 0, void 0, (function() {
                            var t, e, n;
                            return _(this, (function(o) {
                                switch (o.label) {
                                    case 0:
                                        return o.trys.push([0, 3, , 4]), t = this, [4, this.context.market.waitForData(u.a)];
                                    case 1:
                                        return t.viewmodeData = o.sent(), e = this, [4, this.context.market.waitForData(s.c)];
                                    case 2:
                                        return e.viewData = o.sent(), this.changeSubscription = this.viewData.onChanged(this.updateData), this.modeChangeSub = this.viewmodeData.makeModeChangeSubscription(this.modeChanged), this.updateData(), this.modeChanged(), [3, 4];
                                    case 3:
                                        return n = o.sent(), k.debug(n), [3, 4];
                                    case 4:
                                        return [2]
                                }
                            }))
                        }))
                    }, e.prototype.componentWillUnmount = function() {
                        this.changeSubscription && this.changeSubscription.cancel(), this.modeChangeSub && this.modeChangeSub.cancel()
                    }, e.prototype.render = function() {
                        return Object(r.h)(O, {
                            visible: this.originalFloors.length > 1 && this.state.visible,
                            floorNames: this.state.floorNames,
                            currentFloor: this.state.currentFloor,
                            handleClickFloor: this.handleClickFloor,
                            isAllFloors: this.isAllFloors
                        })
                    }, e
                }(r.Component);
            e.a = M
        },
        719: function(t, e, n) {
            "use strict";
            var o, r = n(19),
                i = n(111),
                a = n(179),
                s = n(45),
                c = n(78),
                l = n(346),
                u = n(129),
                p = n(253),
                h = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                d = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.onClick = function() {
                            e.props.handleClick(e.viewmode, e.analyticsName, e.setPanoMode)
                        }, e.updateEnabled = function() {
                            e.setState({
                                enabled: e.enabled
                            })
                        }, e
                    }
                    return h(e, t), Object.defineProperty(e.prototype, "tooltip", {
                        get: function() {
                            return this.context.locale.t(this.tooltipPhraseKey)
                        },
                        enumerable: !0,
                        configurable: !0
                    }), Object.defineProperty(e.prototype, "enabled", {
                        get: function() {
                            return !0
                        },
                        enumerable: !0,
                        configurable: !0
                    }), e.prototype.render = function() {
                        var t;
                        if (!this.enabled) return null;
                        var e = "mode-" + this.modeName;
                        return Object(r.h)(p.a, {
                            onClick: this.onClick,
                            appendClass: (t = {}, t[e] = !0, t)
                        }, Object(r.h)(l.a, {
                            content: this.tooltip,
                            position: l.b.UP
                        }, Object(r.h)("span", {
                            class: "icon icon-" + this.modeName
                        })))
                    }, e
                }(r.Component),
                f = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.viewmode = u.b.DOLLHOUSE, e.analyticsName = "click_dollhouse_mode_button", e.tooltipPhraseKey = s.a.VIEW_DOLLHOUSE, e.modeName = "dollhouse", e
                    }
                    return h(e, t), e.prototype.componentDidMount = function() {
                        this.context.settings.onPropertyChanged("dh", this.updateEnabled), this.context.settings.onPropertyChanged(c.a.Dollhouse, this.updateEnabled)
                    }, e.prototype.componentWillUnmount = function() {
                        this.context.settings.removeOnPropertyChanged("dh", this.updateEnabled), this.context.settings.removeOnPropertyChanged(c.a.Dollhouse, this.updateEnabled)
                    }, Object.defineProperty(e.prototype, "enabled", {
                        get: function() {
                            var t = this.context.settings,
                                e = t.checkUrlParam("dh", 0, 1),
                                n = !t.tryGetProperty(c.a.Dollhouse, !1),
                                o = e || n;
                            return (this.props.forceEnable || !o) && this.viewmode !== this.props.viewmode
                        },
                        enumerable: !0,
                        configurable: !0
                    }), e
                }(d),
                y = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.viewmode = u.b.FLOORPLAN, e.analyticsName = "click_floorplan_mode_button", e.tooltipPhraseKey = s.a.VIEW_FLOORPLAN, e.modeName = "floorplan", e
                    }
                    return h(e, t), e.prototype.componentDidMount = function() {
                        this.context.settings.onPropertyChanged("fp", this.updateEnabled), this.context.settings.onPropertyChanged(c.a.FloorPlan, this.updateEnabled)
                    }, e.prototype.componentWillUnmount = function() {
                        this.context.settings.removeOnPropertyChanged("fp", this.updateEnabled), this.context.settings.removeOnPropertyChanged(c.a.FloorPlan, this.updateEnabled)
                    }, Object.defineProperty(e.prototype, "enabled", {
                        get: function() {
                            var t = this.context.settings,
                                e = t.checkUrlParam("fp", 0, 1),
                                n = !t.tryGetProperty(c.a.FloorPlan, !1),
                                o = e || n;
                            return (this.props.forceEnable || !o) && this.viewmode !== this.props.viewmode
                        },
                        enumerable: !0,
                        configurable: !0
                    }), e
                }(d),
                v = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.viewmode = u.b.INSIDE, e.setPanoMode = !0, e.analyticsName = "click_inside_mode_button", e.tooltipPhraseKey = s.a.VIEW_INSIDE, e.modeName = "panorama", e
                    }
                    return h(e, t), Object.defineProperty(e.prototype, "enabled", {
                        get: function() {
                            if (!this.props.allowMeshMode) return this.props.viewmode !== this.viewmode;
                            var t = this.props.viewmode === this.viewmode && this.props.panoMode !== this.setPanoMode,
                                e = this.props.viewmode !== this.viewmode && this.props.panoMode === this.setPanoMode;
                            return t || e
                        },
                        enumerable: !0,
                        configurable: !0
                    }), e
                }(d),
                m = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.viewmode = u.b.INSIDE, e.setPanoMode = !1, e.analyticsName = "click_mesh_mode_button", e.tooltipPhraseKey = s.a.VIEW_INSIDE_MESH, e.modeName = "mesh", e
                    }
                    return h(e, t), Object.defineProperty(e.prototype, "enabled", {
                        get: function() {
                            if (!this.props.allowMeshMode) return !1;
                            var t = this.props.viewmode === this.viewmode && this.props.panoMode !== this.setPanoMode,
                                e = this.props.viewmode !== this.viewmode && this.props.panoMode === this.setPanoMode;
                            return t || e
                        },
                        enumerable: !0,
                        configurable: !0
                    }), e
                }(d),
                g = n(542),
                b = n(532),
                w = n(3),
                O = n(582),
                S = function() {
                    var t = function(e, n) {
                        return (t = Object.setPrototypeOf || {
                                __proto__: []
                            }
                            instanceof Array && function(t, e) {
                                t.__proto__ = e
                            } || function(t, e) {
                                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                            })(e, n)
                    };
                    return function(e, n) {
                        function o() {
                            this.constructor = e
                        }
                        t(e, n), e.prototype = null === n ? Object.create(n) : (o.prototype = n.prototype, new o)
                    }
                }(),
                x = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                },
                P = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                _ = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                T = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                D = new w.a("mode-controls"),
                k = function(t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.bindings = [], n.onMeshDataUpdate = function(t) {
                            n.setState({
                                panoMode: 0 === t.opacity.value
                            })
                        }, n.changeMode = function(t, e, o) {
                            return P(n, void 0, void 0, (function() {
                                var n;
                                return _(this, (function(r) {
                                    switch (r.label) {
                                        case 0:
                                            if (void 0 !== o && this.context.commandBinder.issueCommand(new g.a(o ? 0 : 1)), t === this.props.viewmode) return [2];
                                            r.label = 1;
                                        case 1:
                                            return r.trys.push([1, 5, , 6]), [4, this.context.commandBinder.issueCommand(new a.c)];
                                        case 2:
                                            return r.sent(), this.props.viewmode === u.b.TRANSITIONING || t === u.b.TRANSITIONING ? [3, 4] : (this.context.analytics.track("showcase_gui", {
                                                gui_action: e
                                            }), [4, this.context.commandBinder.issueCommand(new O.a({
                                                mode: t
                                            }))]);
                                        case 3:
                                            r.sent(), r.label = 4;
                                        case 4:
                                            return [3, 6];
                                        case 5:
                                            return n = r.sent(), D.debug(n), [3, 6];
                                        case 6:
                                            return [2]
                                    }
                                }))
                            }))
                        }, n.state = {
                            panoMode: !0
                        }, n
                    }
                    return S(e, t), e.prototype.componentDidMount = function() {
                        return P(this, void 0, void 0, (function() {
                            var t = this;
                            return _(this, (function(e) {
                                return this.context.market.waitForData(b.a).then((function(e) {
                                    t.bindings.push(e.onChanged(t.onMeshDataUpdate))
                                })), [2]
                            }))
                        }))
                    }, e.prototype.componentWillUnmount = function() {
                        var t, e;
                        try {
                            for (var n = T(this.bindings), o = n.next(); !o.done; o = n.next()) {
                                o.value.cancel()
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                        this.bindings = []
                    }, e.prototype.render = function() {
                        var t = this.props,
                            e = t.viewmode,
                            n = t.allModes,
                            o = this.state.panoMode;
                        return Object(r.h)("div", {
                            id: "mode-change"
                        }, Object(r.h)(m, {
                            viewmode: e,
                            panoMode: o,
                            handleClick: this.changeMode,
                            allowMeshMode: n
                        }), Object(r.h)(v, {
                            viewmode: e,
                            panoMode: o,
                            handleClick: this.changeMode,
                            allowMeshMode: n
                        }), Object(r.h)(f, {
                            viewmode: e,
                            handleClick: this.changeMode,
                            forceEnable: n
                        }), Object(r.h)(y, {
                            viewmode: e,
                            handleClick: this.changeMode,
                            forceEnable: n
                        }))
                    }, e = x([i.b], e)
                }(r.Component);
            e.a = k
        },
        720: function(t, e, n) {
            "use strict";
            var o = n(63),
                r = n(241),
                i = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                a = function() {
                    function t(t, e) {
                        var n, a;
                        this.textureUsageCounter = {}, this.model = t, this.sweepList = e;
                        var s = new r.a((function(t) {
                            return t.id
                        }));
                        try {
                            for (var c = i(this.sweepList), l = c.next(); !l.done; l = c.next()) {
                                var u = l.value;
                                u.isObservableProxy && (u = (new o.c).copy(u)), s.add(u)
                            }
                        } catch (t) {
                            n = {
                                error: t
                            }
                        } finally {
                            try {
                                l && !l.done && (a = c.return) && a.call(c)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                        this.sweepListMap = s
                    }
                    return t.prototype.init = function() {}, t.prototype.dispose = function() {}, t.prototype.activate = function(t) {}, t.prototype.deactivate = function(t) {}, t.prototype.beforeRender = function() {}, t.prototype.render = function() {}, t.prototype.activateSweep = function(t) {
                        return this.initTextureUsage(t), Promise.resolve(null)
                    }, t.prototype.useTexture = function(t) {
                        return this.incrementTextureUsage(t), null
                    }, t.prototype.freeTexture = function(t, e) {
                        void 0 === e && (e = !1), e ? this.setTextureUsage(t, 0) : this.decrementTextureUsage(t)
                    }, t.prototype.initTextureUsage = function(t) {
                        this.textureUsageCounter[t] || (this.textureUsageCounter[t] = 0)
                    }, t.prototype.setTextureUsage = function(t, e) {
                        this.textureUsageCounter[t] = e
                    }, t.prototype.incrementTextureUsage = function(t) {
                        this.textureUsageCounter[t]++
                    }, t.prototype.decrementTextureUsage = function(t) {
                        this.textureUsageCounter[t]--
                    }, t
                }();
            e.a = a
        },
        721: function(t, e, n) {
            t.exports = n.p + "images/outlineBasic512.png"
        },
        722: function(t, e, n) {
            t.exports = n.p + "images/outlineEnhanced512.png"
        },
        723: function(t, e, n) {
            "use strict";
            n.d(e, "b", (function() {
                return a
            })), n.d(e, "a", (function() {
                return s
            }));
            var o, r = n(29),
                i = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                a = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return i(e, t), e
                }(r.a),
                s = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return i(e, t), e
                }(r.a)
        },
        739: function(t, e, n) {
            t.exports = n.p + "images/ico-vr.png"
        },
        740: function(t, e, n) {
            t.exports = n.p + "images/badge-cardboard.png"
        },
        741: function(t, e, n) {
            t.exports = n.p + "images/apple-store.png"
        },
        742: function(t, e, n) {
            t.exports = n.p + "images/badge-oculus.png"
        },
        774: function(t, e, n) {
            t.exports = n.p + "images/outlineBasic1024.png"
        },
        775: function(t, e, n) {
            t.exports = n.p + "images/outlineBasic2048.png"
        },
        776: function(t, e, n) {
            t.exports = n.p + "images/outlineBasic4096.png"
        },
        777: function(t, e, n) {
            t.exports = n.p + "images/outlineEnhanced1024.png"
        },
        778: function(t, e, n) {
            t.exports = n.p + "images/outlineEnhanced2048.png"
        },
        779: function(t, e, n) {
            t.exports = n.p + "images/outlineEnhanced4096.png"
        },
        780: function(t, e) {
            t.exports = "uniform vec3 pano0Position;\nuniform mat4 pano0Matrix;\n\nuniform vec3 pano1Position;\nuniform mat4 pano1Matrix;\n\nvarying vec3 vWorldPosition0;\nvarying vec3 vWorldPosition1;\nvarying vec4 worldPosition;\n\nvoid main() {\n  worldPosition = modelMatrix * vec4(position, 1.0);\n  vec3 positionLocalToPanoCenter0 = worldPosition.xyz - pano0Position;\n  vWorldPosition0 = (vec4(positionLocalToPanoCenter0, 1.0) * pano0Matrix).xyz;\n  vWorldPosition0.x *= -1.0;\n\n  vec3 positionLocalToPanoCenter1 = worldPosition.xyz - pano1Position;\n  vWorldPosition1 = (vec4(positionLocalToPanoCenter1, 1.0) * pano1Matrix).xyz;\n  vWorldPosition1.x *= -1.0;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n}\n"
        },
        781: function(t, e) {
            t.exports = "// Sweep transitions\nuniform float progress;\n\n// gradient colorings\nuniform vec3 topColor;\nuniform vec3 bottomColor;\nuniform float gradientOpacity;\nuniform float radius;\nvarying vec4 worldPosition;\n\n// projected panos\nuniform vec3 pano0Position;\nuniform vec3 pano1Position;\nuniform samplerCube pano0Map;\nuniform samplerCube pano1Map;\nvarying vec3 vWorldPosition0;\nvarying vec3 vWorldPosition1;\n\n// Mixed in Linear color spaces based off of https://www.shadertoy.com/view/lscGDr\n#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))\n#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))\n#define USE_DITHER\n\n// Gradient noise from Jorge Jimenez's presentation:\n// http://www.iryoku.com/next-generation-post-processing-in-call-of-duty-advanced-warfare\nfloat gradientNoise(in vec2 uv) {\n  const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);\n  return fract(magic.z * fract(dot(uv, magic.xy)));\n}\n\nvoid main() {\n  vec3 colorFromPano0 = textureCube(pano0Map, vWorldPosition0.xyz).rgb;\n  vec3 colorFromPano1 = textureCube(pano1Map, vWorldPosition1.xyz).rgb;\n\n  float normalizedHeight = (worldPosition.y + radius) / (radius * 2.0);\n  float ratio = smoothstep(0.0, 0.5, normalizedHeight);\n\n  vec3 colorFromGradient = mix(SRGB_TO_LINEAR(bottomColor), SRGB_TO_LINEAR(topColor), ratio);\n\n  vec3 colorFromPanos = mix(colorFromPano0, colorFromPano1, progress);\n  vec3 color = mix(colorFromPanos, LINEAR_TO_SRGB(colorFromGradient), gradientOpacity);\n\n  #if defined (USE_DITHER)\n    color += (1.0/255.0) * gradientNoise(gl_FragCoord.xy) - (0.5/255.0);\n  #endif\n\n  gl_FragColor = vec4(color, 1.0);\n}\n"
        },
        784: function(t, e, n) {
            "use strict";
            var o = e.binary_mesh = {};
            o.read = function(t, e) {
                return t.readFields(o._readField, {
                    chunk: [],
                    quantized_chunk: []
                }, e)
            }, o._readField = function(t, e, n) {
                1 === t ? e.chunk.push(a.read(n, n.readVarint() + n.pos)) : 2 === t && e.quantized_chunk.push(u.read(n, n.readVarint() + n.pos))
            }, o.write = function(t, e) {
                if (t.chunk)
                    for (var n = 0; n < t.chunk.length; n++) e.writeMessage(1, a.write, t.chunk[n]);
                if (t.quantized_chunk)
                    for (n = 0; n < t.quantized_chunk.length; n++) e.writeMessage(2, u.write, t.quantized_chunk[n])
            };
            var r = e.vertices_simple = {};
            r.read = function(t, e) {
                return t.readFields(r._readField, {
                    xyz: [],
                    uv: []
                }, e)
            }, r._readField = function(t, e, n) {
                1 === t ? n.readPackedFloat(e.xyz) : 2 === t && n.readPackedFloat(e.uv)
            }, r.write = function(t, e) {
                t.xyz && e.writePackedFloat(1, t.xyz), t.uv && e.writePackedFloat(2, t.uv)
            };
            var i = e.faces_simple = {};
            i.read = function(t, e) {
                return t.readFields(i._readField, {
                    faces: []
                }, e)
            }, i._readField = function(t, e, n) {
                1 === t && n.readPackedVarint(e.faces)
            }, i.write = function(t, e) {
                t.faces && e.writePackedVarint(1, t.faces)
            };
            var a = e.chunk_simple = {};
            a.read = function(t, e) {
                return t.readFields(a._readField, {
                    vertices: null,
                    faces: null,
                    chunk_name: "",
                    material_name: ""
                }, e)
            }, a._readField = function(t, e, n) {
                1 === t ? e.vertices = r.read(n, n.readVarint() + n.pos) : 2 === t ? e.faces = i.read(n, n.readVarint() + n.pos) : 3 === t ? e.chunk_name = n.readString() : 4 === t && (e.material_name = n.readString())
            }, a.write = function(t, e) {
                t.vertices && e.writeMessage(1, r.write, t.vertices), t.faces && e.writeMessage(2, i.write, t.faces), t.chunk_name && e.writeStringField(3, t.chunk_name), t.material_name && e.writeStringField(4, t.material_name)
            };
            var s = e.vertices_quantized = {};
            s.read = function(t, e) {
                return t.readFields(s._readField, {
                    quantization: 0,
                    translation: [],
                    x: [],
                    y: [],
                    z: []
                }, e)
            }, s._readField = function(t, e, n) {
                1 === t ? e.quantization = n.readFloat() : 2 === t ? n.readPackedFloat(e.translation) : 3 === t ? n.readPackedSVarint(e.x) : 4 === t ? n.readPackedSVarint(e.y) : 5 === t && n.readPackedSVarint(e.z)
            }, s.write = function(t, e) {
                t.quantization && e.writeFloatField(1, t.quantization), t.translation && e.writePackedFloat(2, t.translation), t.x && e.writePackedSVarint(3, t.x), t.y && e.writePackedSVarint(4, t.y), t.z && e.writePackedSVarint(5, t.z)
            };
            var c = e.uv_quantized = {};
            c.read = function(t, e) {
                return t.readFields(c._readField, {
                    name: "",
                    quantization: 0,
                    u: [],
                    v: []
                }, e)
            }, c._readField = function(t, e, n) {
                1 === t ? e.name = n.readString() : 2 === t ? e.quantization = n.readFloat() : 3 === t ? n.readPackedSVarint(e.u) : 4 === t && n.readPackedSVarint(e.v)
            }, c.write = function(t, e) {
                t.name && e.writeStringField(1, t.name), t.quantization && e.writeFloatField(2, t.quantization), t.u && e.writePackedSVarint(3, t.u), t.v && e.writePackedSVarint(4, t.v)
            };
            var l = e.faces_compressed = {};
            l.read = function(t, e) {
                return t.readFields(l._readField, {
                    faces: []
                }, e)
            }, l._readField = function(t, e, n) {
                1 === t && n.readPackedSVarint(e.faces)
            }, l.write = function(t, e) {
                t.faces && e.writePackedSVarint(1, t.faces)
            };
            var u = e.chunk_quantized = {};
            u.read = function(t, e) {
                return t.readFields(u._readField, {
                    chunk_name: "",
                    material_name: "",
                    vertices: null,
                    uvs: [],
                    faces: null
                }, e)
            }, u._readField = function(t, e, n) {
                1 === t ? e.chunk_name = n.readString() : 2 === t ? e.material_name = n.readString() : 3 === t ? e.vertices = s.read(n, n.readVarint() + n.pos) : 4 === t ? e.uvs.push(c.read(n, n.readVarint() + n.pos)) : 5 === t && (e.faces = i.read(n, n.readVarint() + n.pos))
            }, u.write = function(t, e) {
                if (t.chunk_name && e.writeStringField(1, t.chunk_name), t.material_name && e.writeStringField(2, t.material_name), t.vertices && e.writeMessage(3, s.write, t.vertices), t.uvs)
                    for (var n = 0; n < t.uvs.length; n++) e.writeMessage(4, c.write, t.uvs[n]);
                t.faces && e.writeMessage(5, i.write, t.faces)
            }
        },
        785: function(t, e, n) {
            "use strict";
            (function(t) {
                n.d(e, "a", (function() {
                    return x
                }));
                var o = n(41),
                    r = n(0),
                    i = n(1),
                    a = n(135),
                    s = n(264),
                    c = n(171),
                    l = n(786),
                    u = n(787),
                    p = n(788),
                    h = n(56),
                    d = n(3),
                    f = n(189),
                    y = n(789),
                    v = n(2),
                    m = n(14),
                    g = n(270),
                    b = function(t, e, n, o) {
                        return new(n || (n = Promise))((function(r, i) {
                            function a(t) {
                                try {
                                    c(o.next(t))
                                } catch (t) {
                                    i(t)
                                }
                            }

                            function s(t) {
                                try {
                                    c(o.throw(t))
                                } catch (t) {
                                    i(t)
                                }
                            }

                            function c(t) {
                                t.done ? r(t.value) : new n((function(e) {
                                    e(t.value)
                                })).then(a, s)
                            }
                            c((o = o.apply(t, e || [])).next())
                        }))
                    },
                    w = function(t, e) {
                        var n, o, r, i, a = {
                            label: 0,
                            sent: function() {
                                if (1 & r[0]) throw r[1];
                                return r[1]
                            },
                            trys: [],
                            ops: []
                        };
                        return i = {
                            next: s(0),
                            throw: s(1),
                            return: s(2)
                        }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                            return this
                        }), i;

                        function s(i) {
                            return function(s) {
                                return function(i) {
                                    if (n) throw new TypeError("Generator is already executing.");
                                    for (; a;) try {
                                        if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                        switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                            case 0:
                                            case 1:
                                                r = i;
                                                break;
                                            case 4:
                                                return a.label++, {
                                                    value: i[1],
                                                    done: !1
                                                };
                                            case 5:
                                                a.label++, o = i[1], i = [0];
                                                continue;
                                            case 7:
                                                i = a.ops.pop(), a.trys.pop();
                                                continue;
                                            default:
                                                if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                    a = 0;
                                                    continue
                                                }
                                                if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                    a.label = i[1];
                                                    break
                                                }
                                                if (6 === i[0] && a.label < r[1]) {
                                                    a.label = r[1], r = i;
                                                    break
                                                }
                                                if (r && a.label < r[2]) {
                                                    a.label = r[2], a.ops.push(i);
                                                    break
                                                }
                                                r[2] && a.ops.pop(), a.trys.pop();
                                                continue
                                        }
                                        i = e.call(t, a)
                                    } catch (t) {
                                        i = [6, t], o = 0
                                    } finally {
                                        n = r = 0
                                    }
                                    if (5 & i[0]) throw i[1];
                                    return {
                                        value: i[0] ? i[1] : void 0,
                                        done: !0
                                    }
                                }([i, s])
                            }
                        }
                    },
                    O = function(t) {
                        var e = "function" == typeof Symbol && t[Symbol.iterator],
                            n = 0;
                        return e ? e.call(t) : {
                            next: function() {
                                return t && n >= t.length && (t = void 0), {
                                    value: t && t[n++],
                                    done: !t
                                }
                            }
                        }
                    },
                    S = new d.a(t),
                    x = function() {
                        function t(t, e, n, o, r, i, a, s, h, d) {
                            var f, y;
                            this.textureLOD = t, this.urls = e, this.modelMesh = n, this.camera = o, this.cameraData = r, this.renderer = i, this.renderToTextureModule = a, this.raycaster = s, this.scene = h, this.engine = d, this.slots = [], this.chunkIdToSlot = {}, this.minQuality = c.c, this.maxQuality = c.b, this.concurrentLoadingTextures = 3, this.concurrentDownloadingTiles = 12, this.autoLoadTiles = !1, this.lastSortedAt = 0, this.loadingTextures = 0, this.downloadingTiles = 0, this.textureQualityRenderPass = new p.a(this.slots, this.renderToTextureModule), this.textureScoreRenderPass = new p.b(this.slots, this.renderToTextureModule), this._raycastCounter = 0;
                            var v = {};
                            try {
                                for (var m = O(n.chunks), g = m.next(); !g.done; g = m.next()) {
                                    var b = g.value,
                                        w = v[b.textureName];
                                    w || (w = new l.a(b.textureName), v[b.textureName] = w, this.slots.push(v[b.textureName])), w.chunks.push(b), this.chunkIdToSlot[b.id] = w
                                }
                            } catch (t) {
                                f = {
                                    error: t
                                }
                            } finally {
                                try {
                                    g && !g.done && (y = m.return) && y.call(m)
                                } finally {
                                    if (f) throw f.error
                                }
                            }
                            this.textureBudgeter = new u.a(this.slots)
                        }
                        return t.prototype.setQuality = function(t, e) {
                            var n, o;
                            if (t > e) throw new Error("min quality must be smaller or equal to max");
                            this.minQuality = t, this.maxQuality = e;
                            try {
                                for (var r = O(this.slots), i = r.next(); !i.done; i = r.next()) {
                                    var a = i.value;
                                    a.minQuality = this.minQuality, a.maxQuality = Math.min(a.maxQuality, this.maxQuality)
                                }
                            } catch (t) {
                                n = {
                                    error: t
                                }
                            } finally {
                                try {
                                    i && !i.done && (o = r.return) && o.call(r)
                                } finally {
                                    if (n) throw n.error
                                }
                            }
                        }, Object.defineProperty(t.prototype, "textureCount", {
                            get: function() {
                                return this.slots.length
                            },
                            enumerable: !0,
                            configurable: !0
                        }), t.prototype.loadAll = function(t) {
                            var e = this;
                            if (!this.slots[0] || !this.slots[0].textureName) return Promise.resolve([]);
                            var n = this.slots.map((function(n) {
                                return e.loadTexture(n, t, !1)
                            }));
                            return Promise.all(n)
                        }, t.prototype.loadTexture = function(t, e, n) {
                            return void 0 === n && (n = !0), b(this, void 0, Promise, (function() {
                                var i, a, s;
                                return w(this, (function(l) {
                                    switch (l.label) {
                                        case 0:
                                            if (i = c.d[e].textureSize, t.lastLoadedAt = performance.now(), e === t.quality) return S.warn("Texture was already at level " + c.e[e] + ", not reloading"), [2, t.texture];
                                            if (e < t.quality) return a = this.renderToTextureModule.resizeTexture(t.texture, i), t.quality = e, t.setTexture(a), [2, t.texture];
                                            (s = new o.a).format = r.Ub, this.renderer.initSizedTexture2D(i, s), t.loading = !0, this.loadingTextures++, l.label = 1;
                                        case 1:
                                            return l.trys.push([1, 6, 7, 8]), s.sourceFile = t.getUrl(e), this.textureLOD !== v.Gb.NONE && n ? [4, this.updateTextureTiled(s, e)] : [3, 3];
                                        case 2:
                                            return l.sent(), [3, 5];
                                        case 3:
                                            return [4, this.updateTextureSolid(s, e)];
                                        case 4:
                                            l.sent(), l.label = 5;
                                        case 5:
                                            return t.setTexture(s), [3, 8];
                                        case 6:
                                            return l.sent(), S.warn("Failed loading texture " + s.sourceFile), [3, 8];
                                        case 7:
                                            return this.loadingTextures--, t.quality = e, t.loading = !1, [7];
                                        case 8:
                                            return [2, s]
                                    }
                                }))
                            }))
                        }, t.prototype.updateTextureTiled = function(t, e) {
                            return b(this, void 0, void 0, (function() {
                                var n, o, r, i, a, s, l, u, p, h = this;
                                return w(this, (function(d) {
                                    for (n = c.d[e], o = n.textureSize, r = n.tileSize, i = n.assetSize, a = i / (o / r), s = function(e, n) {
                                            return b(h, void 0, void 0, (function() {
                                                var s, c, l, u, p = this;
                                                return w(this, (function(h) {
                                                    switch (h.label) {
                                                        case 0:
                                                            s = {}, a !== r && (s.width = "" + r), a !== i && (s.crop = a + "," + a + ",x" + e / o + ",y" + n / o), this.downloadingTiles += 1, h.label = 1;
                                                        case 1:
                                                            return h.trys.push([1, , 3, 4]), [4, this.urls.getImageBitmap(t.sourceFile, r, r, {
                                                                flipY: !0
                                                            }, s)];
                                                        case 2:
                                                            return c = h.sent(), [3, 4];
                                                        case 3:
                                                            return this.downloadingTiles -= 1, [7];
                                                        case 4:
                                                            return l = e, u = o - n - c.height, [4, this.engine.commandBinder.issueCommand(new g.a("mesh/texture/upload-tiles", (function() {
                                                                return p.renderer.uploadTexture2D(c, t, l, u)
                                                            }), 100))];
                                                        case 5:
                                                            return [2, h.sent().promise]
                                                    }
                                                }))
                                            }))
                                        }, l = [], u = 0; u < o; u += r)
                                        for (p = 0; p < o; p += r) l.push(s(u, p));
                                    return [2, Promise.all(l)]
                                }))
                            }))
                        }, t.prototype.updateTextureSolid = function(t, e) {
                            return b(this, void 0, void 0, (function() {
                                var n, o;
                                return w(this, (function(r) {
                                    switch (r.label) {
                                        case 0:
                                            return n = c.d[e].textureSize, [4, this.urls.getImageBitmap(t.sourceFile, n, n, {
                                                priority: a.RequestPriority.LOW,
                                                flipY: !0
                                            }, {
                                                width: "" + n
                                            })];
                                        case 1:
                                            return o = r.sent(), this.renderer.uploadTexture2D(o, t, 0, 0), [2]
                                    }
                                }))
                            }))
                        }, t.prototype.raycastRandomScreenLocation = function(t, e, n) {
                            var o, r;
                            this._raycastCounter++;
                            var a = (2 - 2 * e) / t,
                                s = -1 + e,
                                c = this._raycastCounter % (t * t),
                                l = c % t,
                                u = s + (c - l) / t * a,
                                p = s + l * a + Math.random() * a,
                                h = u + Math.random() * a,
                                d = new i.a(p, h, -1).unproject(this.camera),
                                y = new i.a(p, h, 1).unproject(this.camera).clone().sub(d).normalize(),
                                v = this.raycaster.cast(d, y);
                            try {
                                for (var m = O(v), g = m.next(); !g.done; g = m.next()) {
                                    var b = g.value,
                                        w = b.object;
                                    if (w instanceof f.b && b.face) {
                                        n && n(b);
                                        var S = w.getChunk(b.face.materialIndex);
                                        this.chunkIdToSlot[S.id].addSighting(b.point.clone(), b.distance, this._raycastCounter)
                                    }
                                }
                            } catch (t) {
                                o = {
                                    error: t
                                }
                            } finally {
                                try {
                                    g && !g.done && (r = m.return) && r.call(m)
                                } finally {
                                    if (o) throw o.error
                                }
                            }
                        }, t.prototype.analyzeTextureScreenCoverageFromRaycasts = function() {
                            var t, e, n, o, r = window.innerWidth,
                                a = (new i.a).copy(this.cameraData.pose.position);
                            try {
                                for (var s = O(this.slots), c = s.next(); !c.done; c = s.next()) {
                                    var l = c.value;
                                    l.screenCoverage = 0, l.screenCoverageScore = 0, l.maxQuality = this.minQuality;
                                    try {
                                        for (var u = O(l.sightings), p = u.next(); !p.done; p = u.next()) {
                                            var d = p.value;
                                            if (!(this._raycastCounter - d.time > 1e3)) {
                                                var f = a.distanceTo(d.point),
                                                    y = P(Object(h.m)(f, this.camera.projectionMatrix, r));
                                                y = Math.min(y, this.maxQuality), l.screenCoverageScore += y, l.screenCoverage += 1, l.maxQuality = Math.max(y, l.maxQuality)
                                            }
                                        }
                                    } catch (t) {
                                        n = {
                                            error: t
                                        }
                                    } finally {
                                        try {
                                            p && !p.done && (o = u.return) && o.call(u)
                                        } finally {
                                            if (n) throw n.error
                                        }
                                    }
                                }
                            } catch (e) {
                                t = {
                                    error: e
                                }
                            } finally {
                                try {
                                    c && !c.done && (e = s.return) && e.call(s)
                                } finally {
                                    if (t) throw t.error
                                }
                            }
                            this.slots.sort((function(t, e) {
                                return e.screenCoverageScore - t.screenCoverageScore
                            })), this.textureBudgeter.updateTargetQualitiesFromBudget()
                        }, t.prototype.update = function(t) {
                            var e, n, o = this;
                            if (this.textureBudgeter.update(t), this.camera && this.autoLoadTiles) {
                                var r = performance.now();
                                this.textureLOD === v.Gb.RAYCAST && this.minQuality !== this.maxQuality && (this.raycastTaskPromise || (this.raycastTaskPromise = this.engine.commandBinder.issueCommand(new g.a("mesh/texture/raycast", (function() {
                                    o.raycastRandomScreenLocation(5, .05, s.c.debugLOD ? Object(y.a)(65280, o.scene) : void 0)
                                }), 50)).then((function(t) {
                                    return b(o, void 0, void 0, (function() {
                                        return w(this, (function(e) {
                                            switch (e.label) {
                                                case 0:
                                                    return [4, t.promise];
                                                case 1:
                                                    return e.sent(), this.raycastTaskPromise = null, [2]
                                            }
                                        }))
                                    }))
                                }))), !this.analyzeTaskPromise && r - this.lastSortedAt > 200 && (this.analyzeTaskPromise = this.engine.commandBinder.issueCommand(new g.a("mesh/texture/analyze-screen-coverage", (function() {
                                    o.analyzeTextureScreenCoverageFromRaycasts(), o.lastSortedAt = performance.now()
                                }), 100)).then((function(t) {
                                    return b(o, void 0, void 0, (function() {
                                        return w(this, (function(e) {
                                            switch (e.label) {
                                                case 0:
                                                    return [4, t.promise];
                                                case 1:
                                                    return e.sent(), this.analyzeTaskPromise = null, [2]
                                            }
                                        }))
                                    }))
                                }))));
                                for (var i = this.slots.length - 1; i >= 0; i--) {
                                    var a = this.slots[i],
                                        c = Object(m.e)(a.targetQuality, a.minQuality, a.maxQuality),
                                        l = r - a.lastLoadedAt < 1e3;
                                    if (!a.loading && a.quality > c && !l) {
                                        this.loadTexture(a, c);
                                        break
                                    }
                                }
                                try {
                                    for (var u = O(this.slots), p = u.next(); !p.done; p = u.next()) {
                                        a = p.value;
                                        if (this.loadingTextures >= this.concurrentLoadingTextures || this.downloadingTiles >= this.concurrentDownloadingTiles) break;
                                        c = Object(m.e)(a.targetQuality, a.minQuality, a.maxQuality);
                                        !a.loading && a.quality < c && this.loadTexture(a, a.quality + 1)
                                    }
                                } catch (t) {
                                    e = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        p && !p.done && (n = u.return) && n.call(u)
                                    } finally {
                                        if (e) throw e.error
                                    }
                                }
                                s.c.debugLOD && (this.textureScoreRenderPass.render(this.modelMesh, this.camera, !0), this.textureQualityRenderPass.render(this.modelMesh, this.camera, !0))
                            }
                        }, t
                    }();

                function P(t) {
                    for (var e = c.b; t > c.d[e].texelSize && e > c.c;) e--;
                    return e
                }
            }).call(this, "/index.js")
        },
        786: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return a
            }));
            var o = n(171),
                r = n(201),
                i = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                a = function() {
                    function t(t) {
                        this.textureName = t, this.chunks = [], this.minQuality = o.c, this.maxQuality = o.c, this.targetQuality = o.c, this.loading = !1, this.screenCoverage = 0, this.screenCoverageScore = 0, this.sightings = new r.a(100)
                    }
                    return t.prototype.setTexture = function(t) {
                        var e, n;
                        this.texture && this.texture !== t && this.texture.dispose(), this.texture = t;
                        try {
                            for (var o = i(this.chunks), r = o.next(); !r.done; r = o.next()) {
                                r.value.setMeshTexture(this.texture)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                r && !r.done && (n = o.return) && n.call(o)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                    }, t.prototype.getUrl = function(t) {
                        var e = o.d[t].assetType,
                            n = this.textureName.match(/^([a-f0-9]+(_10k|_50k)?)/);
                        if (!n) throw new Error("Unknown format for texture name: " + this.textureName);
                        return n[0] + "_texture_jpg_" + e + "/" + this.textureName
                    }, t.prototype.addSighting = function(t, e, n) {
                        this.sightings.push({
                            point: t,
                            distance: e,
                            time: n
                        })
                    }, t
                }()
        },
        787: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return a
            }));
            var o, r = n(171),
                i = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                };
            ! function(t) {
                t[t.LOAD_MORE = 0] = "LOAD_MORE", t[t.STAY = 1] = "STAY", t[t.UNLOAD = 2] = "UNLOAD"
            }(o || (o = {}));
            var a = function() {
                function t(t) {
                    this.slots = t, this.strategy = o.STAY, this.baseSizeUnit = r.d[r.c].textureSize, this.minBudget = this.slots.length, this.maxBudget = this.slots.length * this.getBudgetSize(r.b), this._budget = this.minBudget
                }
                return t.prototype.update = function(t) {
                    this.budget = this.maxBudget
                }, t.prototype.getBudgetSize = function(t) {
                    return t ? Math.pow(r.d[t].textureSize / this.baseSizeUnit, 2) : 0
                }, t.prototype.calcCurrentUsedBudget = function() {
                    var t = this;
                    return this.slots.reduce((function(e, n) {
                        return e + t.getBudgetSize(n.quality)
                    }), 0)
                }, t.prototype.clampBudget = function(t) {
                    return Math.min(this.maxBudget, Math.max(this.minBudget, t))
                }, Object.defineProperty(t.prototype, "budget", {
                    get: function() {
                        return this._budget
                    },
                    set: function(t) {
                        t = this.clampBudget(t), this.budget !== t && (this._budget = t, this.updateTargetQualitiesFromBudget())
                    },
                    enumerable: !0,
                    configurable: !0
                }), t.prototype.updateTargetQualitiesFromBudget = function() {
                    var t, e, n, o, a, s, c = 0;
                    try {
                        for (var l = i(this.slots), u = l.next(); !u.done; u = l.next()) {
                            (v = u.value).targetQuality = r.c, c += this.getBudgetSize(v.targetQuality)
                        }
                    } catch (e) {
                        t = {
                            error: e
                        }
                    } finally {
                        try {
                            u && !u.done && (e = l.return) && e.call(l)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                    try {
                        for (var p = i(r.a), h = p.next(); !h.done; h = p.next()) {
                            var d = h.value;
                            try {
                                for (var f = i(this.slots), y = f.next(); !y.done; y = f.next()) {
                                    var v;
                                    if (!((v = y.value).maxQuality < d)) {
                                        if (c -= this.getBudgetSize(v.targetQuality), (c += this.getBudgetSize(d)) > this.budget) return;
                                        v.targetQuality = d
                                    }
                                }
                            } catch (t) {
                                a = {
                                    error: t
                                }
                            } finally {
                                try {
                                    y && !y.done && (s = f.return) && s.call(f)
                                } finally {
                                    if (a) throw a.error
                                }
                            }
                        }
                    } catch (t) {
                        n = {
                            error: t
                        }
                    } finally {
                        try {
                            h && !h.done && (o = p.return) && o.call(p)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                }, t
            }()
        },
        788: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return u
            })), n.d(e, "b", (function() {
                return p
            }));
            var o, r = n(103),
                i = n(26),
                a = n(171),
                s = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                c = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                l = function() {
                    function t(t, e) {
                        this.slots = t, this.renderToTextureModule = e, this.renderTarget = new r.a(1, 1), this.sizeMultiplier = .25, this.pixelBuffer = new Uint8Array(4)
                    }
                    return t.prototype.render = function(t, e, n) {
                        void 0 === n && (n = !1), this.beforeRender();
                        var o = this.renderToTextureModule.getRenderSize(),
                            r = o.width,
                            i = o.height;
                        r = Math.max(1, Math.floor(r * this.sizeMultiplier)), i = Math.max(1, Math.floor(i * this.sizeMultiplier)), r === this.renderTarget.width && i === this.renderTarget.height || this.renderTarget.setSize(r, i), this.renderToTextureModule.render(this.renderTarget, t, e), n && this.renderToScreen(), this.afterRender()
                    }, t.prototype.renderToScreen = function() {
                        this.renderToTextureModule.renderToScreen(this.renderTarget)
                    }, t.prototype.readPixels = function() {
                        var t = this.renderTarget.width * this.renderTarget.height * 4;
                        this.pixelBuffer.length !== t && (this.pixelBuffer = new Uint8Array(t));
                        var e = this.pixelBuffer;
                        return this.renderToTextureModule.getRenderTargetData(this.renderTarget, e), this.pixelBuffer
                    }, t.prototype.beforeRender = function() {
                        var t, e, n, o;
                        try {
                            for (var r = c(this.slots), i = r.next(); !i.done; i = r.next()) {
                                var a = i.value;
                                try {
                                    for (var s = c(a.chunks), l = s.next(); !l.done; l = s.next()) {
                                        var u = l.value;
                                        this.beforeRenderChunk(u, a)
                                    }
                                } catch (t) {
                                    n = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        l && !l.done && (o = s.return) && o.call(s)
                                    } finally {
                                        if (n) throw n.error
                                    }
                                }
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                i && !i.done && (e = r.return) && e.call(r)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    }, t.prototype.afterRender = function() {
                        var t, e, n, o;
                        try {
                            for (var r = c(this.slots), i = r.next(); !i.done; i = r.next()) {
                                var a = i.value;
                                try {
                                    for (var s = c(a.chunks), l = s.next(); !l.done; l = s.next()) {
                                        var u = l.value;
                                        this.afterRenderChunk(u, a)
                                    }
                                } catch (t) {
                                    n = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        l && !l.done && (o = s.return) && o.call(s)
                                    } finally {
                                        if (n) throw n.error
                                    }
                                }
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                i && !i.done && (e = r.return) && e.call(r)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    }, t
                }(),
                u = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return s(e, t), e.prototype.beforeRenderChunk = function(t, e) {
                        t.setColorOverlay(a.d[e.quality].debugColor)
                    }, e.prototype.afterRenderChunk = function(t, e) {
                        t.setColorOverlay(null)
                    }, e
                }(l),
                p = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.clearColor = new i.a(0, 0, 0, 0), e
                    }
                    return s(e, t), e.prototype.beforeRender = function() {
                        this.maxValue = this.slots.reduce((function(t, e) {
                            return Math.max(t, e.screenCoverageScore)
                        }), 1e-9), t.prototype.beforeRender.call(this)
                    }, e.prototype.beforeRenderChunk = function(t, e) {
                        var n = e.screenCoverageScore / this.maxValue,
                            o = new i.a(n, n, n, 1);
                        t.setColorOverlay(o)
                    }, e.prototype.afterRenderChunk = function(t, e) {
                        t.setColorOverlay(this.clearColor)
                    }, e
                }(l)
        },
        789: function(t, e, n) {
            "use strict";
            n.d(e, "a", (function() {
                return c
            }));
            var o = n(29),
                r = n(258),
                i = n(54),
                a = [],
                s = 0,
                c = function(t, e) {
                    if (0 === a.length)
                        for (var n = 0; n < 100; n++) {
                            var c = new o.a(new r.a(.005), new i.a);
                            a.push(c)
                        }
                    return function(n) {
                        var o = a[s++ % a.length];
                        o.position.copy(n.point), o.scale.set(n.distance, n.distance, n.distance), o.material.color.setHex(t), o.parent || e.scene.add(o)
                    }
                }
        },
        790: function(t, e) {
            t.exports = "varying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n  vec4 projectedPosition = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n  gl_Position = projectedPosition;\n\n}\n"
        },
        791: function(t, e) {
            t.exports = "uniform float borderSize;\nuniform float textureSampleScale;\nuniform samplerCube panoTexture;\nuniform vec4 borderColor;\n\nvarying vec2 vUv;\n\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\nconst float PI = 3.14159265359;\nconst float HALF_PI = PI / 2.0;\n\nvoid main() {\n  float fadeDist = 0.1;\n  float r = 1.0;\n  vec2 uv = (vUv * 2.0) - vec2(1.0, 1.0);\n  float d = length(uv);\n  float p = d * PI - HALF_PI;\n  float y = sin(p);\n  float h = cos(p) * textureSampleScale;\n  vec3 sampleVec = vec3(uv.x * h, y, uv.y * h);\n\n  vec4 panoColor = textureCube(panoTexture, sampleVec);\n  panoColor.a = clamp(((1.0 - d)/d) / fadeDist, 0.0, 1.0);\n\n  vec4 outColor = mix(panoColor, transparent, step(1.0, d));\n\n  // if (borderSize > 0.0 && d >= 1.0 - borderSize && d <= 1.0)\n  float isBorder = max(sign(borderSize), 0.0) * step(1.0 - borderSize, d) * step(d, 1.0);\n\n  gl_FragColor = mix(outColor, borderColor, isBorder);\n}\n"
        },
        792: function(t, e) {
            t.exports = "varying vec2 vUv;\n\nvoid main(){\n  vUv = vec2(1.0 - uv.x, uv.y);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"
        },
        793: function(t, e) {
            t.exports = "#define M_PI 3.14159265359\n\nuniform samplerCube cubemap;\nuniform float yaw;\n\nvarying vec2 vUv;\n\nvoid main(){\n  vec2 uv = vUv;\n  float theta = uv.x * 2.0 * M_PI + yaw;\n  float phi = uv.y * M_PI;\n\n  vec3 longitude = vec3(sin(theta), 1.0, -cos(theta));\n  vec3 latitude = vec3(sin(phi), -cos(phi), sin(phi));\n\n  vec3 dir = longitude * latitude;\n  normalize(dir);\n  gl_FragColor = vec4(textureCube(cubemap, dir).rgb, 1.0);\n}\n"
        },
        794: function(t, e) {
            t.exports = "varying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * vec4(position, 1.0);\n}\n"
        },
        795: function(t, e) {
            t.exports = "uniform sampler2D bg;\nuniform sampler2D mask;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec4 existingColor = texture2D(bg, vUv);\n  vec4 maskColor = texture2D(mask, vUv);\n  gl_FragColor = vec4(existingColor.rgb * maskColor.rgb, maskColor.a);\n}\n"
        },
        796: function(t, e) {
            t.exports = "varying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * vec4(position, 1.0);\n}\n"
        },
        797: function(t, e) {
            t.exports = "uniform sampler2D texture;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec4 color = texture2D(texture, vUv);\n  gl_FragColor = vec4(color.rgb, 1.0);\n}\n"
        },
        798: function(t, e, n) {},
        811: function(t, e, n) {},
        813: function(t, e) {
            t.exports = "data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyMzAuMDUgNDkuNzUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6I2Y1ZjRmM30uc3Qye2ZpbGw6I2ZmZn0uc3Qze2ZpbGw6Izk5OX08L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik02MS4yOCAzNi4xNHYtOC44MmwtLjI0LTUuMDkuMTktLjA0IDIuMDUgNC41NCA0LjgyIDguODYgNC44Mi04Ljg2IDIuMDYtNC41NC4xOC4wNC0uMjQgNS4wOXY4LjgyaDUuMTRWMTQuNGgtNS44MWwtNi4xMSAxMS43N2gtLjA3TDYxLjk1IDE0LjRoLTUuODF2MjEuNzR6TTIxMi42OSAzMC42M2MwIDMuNiAxLjk0IDUuNSA1LjYxIDUuNWgzLjE3di00LjQ1aC0zLjQ1di05LjQ5aDMuNzR2LTQuMzZoLTQuMTV2LTQuMjFoLTQuOTF2MTcuMDF6TTIxMS4yNiAxNy44M2gtLjg3Yy0zLjAxIDAtNC40NCAyLjAzLTQuODkgMy40M2gtLjE4di0zLjQzSDIwMHYxOC4zMWg1LjMyVjI1LjcyYzAtMS4wOC40MS0xLjg0LjkzLTIuMzMuODktLjg2IDIuNzktMS4xMSA1LjAxLTEuMTF2LTQuNDV6TTE1OC42MyAxNy44M2gtLjg3Yy0zLjAxIDAtNC40NCAyLjAzLTQuODkgMy40M2gtLjE4di0zLjQzaC01LjMydjE4LjMxaDUuMzJWMjUuNzJjMC0xLjA4LjQxLTEuODQuOTMtMi4zMy44OS0uODYgMi43OS0xLjExIDUuMDEtMS4xMXYtNC40NXpNMTI3LjQ4IDI3LjI1YzAtNS45NyAzLjE3LTkuODYgOC44NS05Ljg2IDYuMjYgMCA4Ljc4IDQuNTMgOC43OCA5LjY0djEuNThoLTEyLjEydi4xOGMwIDIuMTIgMS4xNCAzLjYgNC4xNyAzLjYgMi4yMyAwIDMuNDUtMS4wNCA0LjY0LTIuMjdsMi42NiAzLjMxYy0xLjY5IDEuOTQtNC40NiAzLjEzLTcuOTEgMy4xMy01LjguMDEtOS4wNy0zLjI3LTkuMDctOS4zMXptNS41LTIuMDV2LjI5aDYuNjJ2LS4zMmMwLTIuMy0xLjA0LTMuODUtMy4xNy0zLjg1cy0zLjQ1IDEuNTQtMy40NSAzLjg4ek0xODAuMDQgMjcuMjVjMC02LjA4IDMuMzEtOS44NiA4Ljg1LTkuODYgNS41NCAwIDguODUgMy43OCA4Ljg1IDkuODZzLTMuMzEgOS4zMi04Ljg1IDkuMzJjLTUuNTUgMC04Ljg1LTMuMjQtOC44NS05LjMyem0xMi4xNSAxLjM3di0zLjI3YzAtMi4zNy0xLjIyLTMuNzQtMy4zMS0zLjc0cy0zLjMxIDEuMzctMy4zMSAzLjc0djMuMjdjMCAyLjM3IDEuMjIgMy43NCAzLjMxIDMuNzRzMy4zMS0xLjM3IDMuMzEtMy43NHpNMTIyLjQyIDEzLjYyaC00Ljc4djIuMTljMCAxLjMtLjQzIDIuMDEtMS44NyAyLjAxaC0xLjMzdjQuMzZoMi42NnY4LjQ0YzAgMy42IDEuOTQgNS41IDUuNjEgNS41aDMuMTd2LTQuNDVoLTMuNDV2LTkuNDloMy43NHYtNC4zNmgtMy43NHYtNC4yek0xMDkuMTcgMTMuNjJoLTQuNzh2Mi4xOWMwIDEuMy0uNDMgMi4wMS0xLjg3IDIuMDFoLTEuMzN2NC4zNmgyLjY2djguNDRjMCAzLjYgMS45NCA1LjUgNS42MSA1LjVoMy4xN3YtNC40NWgtMy40NXYtOS40OWgzLjc0di00LjM2aC0zLjc0di00LjJ6TTE3MC45IDE3LjM5Yy0yLjQ1IDAtNC41MyAxLjUxLTUuMDcgMy42aC0uMTh2LTMuMTdoLTUuMzJ2MjMuODJoNS4zMnYtOC42N2guMThjLjU0IDIuMDUgMi42MyAzLjYgNS4wNyAzLjYgNC43OCAwIDcuMjctMi45MSA3LjI3LTkuMzItLjAxLTYuNC0yLjQ5LTkuODYtNy4yNy05Ljg2em0xLjcyIDExLjUyYzAgMi4zNy0xLjQ4IDMuMzUtMy40OSAzLjM1LTIuMDEgMC0zLjQ5LTEuMDQtMy40OS0yLjc3di01YzAtMS43MyAxLjQ4LTIuNzcgMy40OS0yLjc3IDIuMDEgMCAzLjQ5IDEuNTUgMy40OSAzLjkydjMuMjd6TTk3LjgzIDM2LjE0Yy0xLjkxIDAtMy4yNy0xLjMtMy42LTMuMzFoLS4yMmMtLjU4IDIuNDUtMi42NiAzLjc0LTUuNTQgMy43NC0zLjc4IDAtNS44Ni0yLjIzLTUuODYtNS41IDAtMy45OSAzLjA5LTUuOSA4LjA5LTUuOWgyLjk5di0uNjFjMC0xLjgzLS45LTIuOTktMy4xMy0yLjk5LTIuMTIgMC0zLjI0IDEuMDgtNC4wNiAyLjIzbC0zLjE3LTIuODFjMS41MS0yLjIzIDMuNjctMy42IDcuNjMtMy42IDUuMzIgMCA4LjA2IDIuNDUgOC4wNiA2LjkxdjcuMzhoMS43NnY0LjQ1aC0yLjk1em0tNC4xMy01Ljcydi0yLjIzaC0yLjU5Yy0yLjA1IDAtMy4xMy43Ni0zLjEzIDIuMTJ2LjU0YzAgMS4zNy45IDIuMDEgMi40OCAyLjAxIDEuNzYgMCAzLjI0LS43MiAzLjI0LTIuNDR6Ii8+PGc+PHBhdGggZD0iTTM5LjA1IDYuOTFMMjYuMjQgMTAuNSAxMy40MiA2LjkxIDguMyA4LjM1djMzLjA2bDUuMTMgMS40NCAxMi44Mi0zLjU5IDEyLjgyIDMuNTkgNS4xMy0xLjQ0VjguMzVsLTUuMTUtMS40NHptLTUuMTIgMjQuNjdsLTcuNjktMi4xNS03LjY5IDIuMTV2LTEzLjRsNy42OSAyLjE1IDcuNjktMi4xNXYxMy40eiIgZmlsbD0iI2I3YmFiYiIvPjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0yNi4yNCAxMy4zN3Y2Ljk2bC0xMi44Mi0zLjU5djI2LjFMOC4zIDQxLjQxVjguMzV6TTMzLjkzIDM0LjQ1bC03LjY5LTIuMTZ2Ni45NmwxMi44MSAzLjU5di0yNi4xbC01LjEyIDEuNDR6Ii8+PGc+PHBhdGggY2xhc3M9InN0MyIgZD0iTTM5LjA1IDYuOTFsNS4xMyAxLjQ0LTE3Ljk0IDUuMDJMOC4zIDguMzVsNS4xMi0xLjQ0IDEyLjgyIDMuNTl6TTI2LjI0IDI5LjQybDcuNjkgMi4xNnYyLjg3bC03LjY5LTIuMTYtNy42OSAyLjE2di0yLjg3eiIvPjwvZz48L2c+PC9zdmc+"
        },
        814: function(t, e, n) {},
        816: function(t, e) {
            t.exports = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODQiIGhlaWdodD0iODQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNNDIgMEMxOC43OSAwIDAgMTguNzkgMCA0MnMxOC43OSA0MiA0MiA0MiA0Mi0xOC43OSA0Mi00MlM2NS4yMSAwIDQyIDB6IiBmaWxsLW9wYWNpdHk9Ii4yNSIgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIi8+PHBhdGggZD0iTTUxLjUgNTdoLTJhLjUuNSAwIDAxLS41LS41di0yOGEuNS41IDAgMDEuNS0uNWgyYS41LjUgMCAwMS41LjV2MjhhLjUuNSAwIDAxLS41LjV6TTM0LjUgNTdoLTJhLjUuNSAwIDAxLS41LS41di0yOGEuNS41IDAgMDEuNS0uNWgyYS41LjUgMCAwMS41LjV2MjhhLjUuNSAwIDAxLS41LjV6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg=="
        },
        817: function(t, e, n) {},
        819: function(t, e, n) {},
        821: function(t, e, n) {},
        829: function(t, e, n) {},
        831: function(t, e, n) {},
        833: function(t, e, n) {},
        835: function(t, e, n) {
            t.exports = n.p + "images/apple-logo-white.svg"
        },
        836: function(t, e, n) {
            t.exports = n.p + "images/ico-android-robot.png"
        },
        837: function(t, e, n) {
            t.exports = n.p + "images/logo-samsung.png"
        },
        838: function(t, e, n) {
            t.exports = n.p + "images/ico-gearvr.png"
        },
        839: function(t, e, n) {},
        842: function(t, e, n) {
            t.exports = n.p + "images/nav_help_mouse_click.png"
        },
        843: function(t, e, n) {
            t.exports = n.p + "images/nav_help_click_inside.png"
        },
        844: function(t, e, n) {
            t.exports = n.p + "images/nav_help_mouse_drag_left.png"
        },
        845: function(t, e, n) {
            t.exports = n.p + "images/nav_help_mouse_drag_right.png"
        },
        846: function(t, e, n) {
            t.exports = n.p + "images/Desktop-help-play-button.svg"
        },
        847: function(t, e, n) {
            t.exports = n.p + "images/nav_help_mouse_position_left.png"
        },
        848: function(t, e, n) {
            t.exports = n.p + "images/nav_help_mouse_position_right.png"
        },
        849: function(t, e, n) {
            t.exports = n.p + "images/nav_help_mouse_zoom.png"
        },
        850: function(t, e, n) {
            t.exports = n.p + "images/nav_help_gesture_drag.png"
        },
        851: function(t, e, n) {
            t.exports = n.p + "images/nav_help_gesture_drag_two_finger.png"
        },
        852: function(t, e, n) {
            t.exports = n.p + "images/nav_help_gesture_pinch.png"
        },
        853: function(t, e, n) {
            t.exports = n.p + "images/nav_help_gesture_position.png"
        },
        854: function(t, e, n) {
            t.exports = n.p + "images/nav_help_gesture_position_two_finger.png"
        },
        855: function(t, e, n) {
            t.exports = n.p + "images/nav_help_gesture_tap.png"
        },
        856: function(t, e, n) {
            t.exports = n.p + "images/nav_help_tap_inside.png"
        },
        857: function(t, e, n) {
            t.exports = n.p + "images/mobile-help-play-button.svg"
        },
        858: function(t, e, n) {
            t.exports = n.p + "images/nav_help_keyboard_all.png"
        },
        859: function(t, e, n) {
            t.exports = n.p + "images/nav_help_inside_key.png"
        },
        860: function(t, e, n) {
            t.exports = n.p + "images/nav_help_keyboard_left_right.png"
        },
        861: function(t, e, n) {
            t.exports = n.p + "images/Desktop-help-spacebar.png"
        },
        862: function(t, e, n) {
            t.exports = n.p + "images/nav_help_keyboard_up_down.png"
        },
        863: function(t, e, n) {
            t.exports = n.p + "images/nav_help_zoom_keys.png"
        },
        864: function(t, e, n) {
            t.exports = n.p + "images/nav_help_360.png"
        },
        865: function(t, e, n) {
            t.exports = n.p + "images/mattertag-disc-128-free.v1.png"
        },
        866: function(t, e, n) {},
        868: function(t, e, n) {},
        870: function(t, e, n) {},
        872: function(t, e, n) {},
        874: function(t, e, n) {},
        876: function(t, e, n) {},
        878: function(t, e, n) {},
        90: function(t, e, n) {
            "use strict";
            n.d(e, "c", (function() {
                return r
            })), n.d(e, "b", (function() {
                return i
            })), n.d(e, "d", (function() {
                return a
            })), n.d(e, "a", (function() {
                return h
            }));
            var o, r, i, a, s = n(19),
                c = n(111),
                l = n(110),
                u = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                p = function(t, e, n, o) {
                    var r, i = arguments.length,
                        a = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;
                    if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, o);
                    else
                        for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (i < 3 ? r(a) : i > 3 ? r(e, n, a) : r(e, n)) || a);
                    return i > 3 && a && Object.defineProperty(e, n, a), a
                };
            ! function(t) {
                t[t.ENABLED = 0] = "ENABLED", t[t.DISABLED = 1] = "DISABLED", t[t.DIMMED = 2] = "DIMMED", t[t.ACTIVE = 3] = "ACTIVE", t[t.BUSY = 4] = "BUSY"
            }(r || (r = {})),
            function(t) {
                t[t.STANDARD = 0] = "STANDARD", t[t.SMALL = 1] = "SMALL", t[t.LARGE = 2] = "LARGE"
            }(i || (i = {})),
            function(t) {
                t[t.PRIMARY = 0] = "PRIMARY", t[t.SECONDARY = 1] = "SECONDARY", t[t.OVERLAY = 2] = "OVERLAY", t[t.LIGHT = 3] = "LIGHT", t[t.SECONDARY_LIGHT = 4] = "SECONDARY_LIGHT"
            }(a || (a = {}));
            var h = function(t) {
                function e(e) {
                    return t.call(this, e) || this
                }
                return u(e, t), e.prototype.render = function() {
                    var t = this.props,
                        e = t.buttonState,
                        n = t.buttonSize,
                        o = t.buttonStyle,
                        c = t.id,
                        u = t.appendClass,
                        p = t.dataValue,
                        h = t.children,
                        d = t.onClick,
                        f = t.onMouseEnter,
                        y = t.onMouseLeave,
                        v = t.onMouseDown,
                        m = t.tooltipMsg,
                        g = t.tooltipPosition,
                        b = t.tooltipPreformatted,
                        w = e === r.DISABLED,
                        O = e === r.BUSY,
                        S = !w && !O,
                        x = o === a.SECONDARY || o === a.SECONDARY_LIGHT,
                        P = o === a.LIGHT || o === a.SECONDARY_LIGHT,
                        _ = {
                            "button-small": n === i.SMALL,
                            "button-large": n === i.LARGE,
                            "button-secondary": x,
                            "button-light": P,
                            "button-overlay": o === a.OVERLAY,
                            "button-active": e === r.ACTIVE,
                            "button-busy": O,
                            "button-disabled": w,
                            "button-dimmed": e === r.DIMMED
                        };
                    return u && Object.keys(u).length > 0 && Object.assign(_, u), Object(s.h)("div", {
                        id: c,
                        type: "button",
                        class: l("button", _),
                        "data-value": p,
                        onClick: S ? d : void 0,
                        onMouseEnter: f,
                        onMouseLeave: y,
                        onMouseDown: v,
                        "data-balloon": m || null,
                        "data-balloon-pre": !!b,
                        "data-balloon-pos": g || null
                    }, h)
                }, e = p([c.b], e)
            }(s.Component)
        },
        963: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(2),
                i = n(60),
                a = n(548),
                s = n(574),
                c = n(63),
                l = n(113),
                u = n(188),
                p = n(259),
                h = n(66),
                d = n(539),
                f = n(530),
                y = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                v = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                m = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                g = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "label-viewdata", e.selectionEnabled = !0, e.sweepMap = {}, e.sweepIdList = [], e.sweepInteractionMap = {}, e.enableSweepSelection = function(t) {
                            return v(e, void 0, Promise, (function() {
                                return m(this, (function(t) {
                                    return this.selectionEnabled = !0, [2]
                                }))
                            }))
                        }, e.disableSweepSelection = function(t) {
                            return v(e, void 0, Promise, (function() {
                                return m(this, (function(t) {
                                    return this.selectionEnabled = !1, this.viewData.selectedSweep.value && (this.viewData.selectedSweep.value = null), [2]
                                }))
                            }))
                        }, e.onSweepSelectCommand = function(t) {
                            return v(e, void 0, Promise, (function() {
                                return m(this, (function(e) {
                                    return this.selectionEnabled ? (this.viewData.modifySelectAnimation(t.id, t.duration), t.selected ? this.viewData.selectedSweep.value = this.viewData.getSweep(t.id) : this.viewData.selectedSweep.value = null, [2]) : [2]
                                }))
                            }))
                        }, e.onSweepHoverCommand = function(t) {
                            return v(e, void 0, Promise, (function() {
                                return m(this, (function(e) {
                                    return this.viewData.modifySelectAnimation(t.id, t.duration), t.hovered ? this.viewData.hoveredSweep.value = this.viewData.getSweep(t.id) : this.viewData.hoveredSweep.value = null, [2]
                                }))
                            }))
                        }, e.onSweepVisibilityCommand = function(t) {
                            return v(e, void 0, Promise, (function() {
                                return m(this, (function(e) {
                                    return this.viewData.setVisible(t.sweepId, t.visible), [2]
                                }))
                            }))
                        }, e.updateVisibility = function(t) {
                            return v(e, void 0, Promise, (function() {
                                var e, n, o = this;
                                return m(this, (function(r) {
                                    return this.viewmodeData.isPano() ? t && (e = this.viewData.getSweep(t).neighbours, this.viewData.iterate((function(t) {
                                        var n = -1 !== e.indexOf(t.id);
                                        o.viewData.setVisible(t.id, n)
                                    }))) : (n = -1 === this.floorsViewData.currentFloor, this.viewData.iterate((function(t) {
                                        var e = o.floorsViewData.currentFloor === t.floor || n;
                                        o.viewData.setVisible(t.id, e)
                                    }))), t && this.viewData.setVisible(t, !1), [2]
                                }))
                            }))
                        }, e
                    }
                    return y(e, t), e.prototype.init = function(t, e) {
                        return v(this, void 0, void 0, (function() {
                            var t, n, o, r = this;
                            return m(this, (function(c) {
                                switch (c.label) {
                                    case 0:
                                        return t = this, [4, e.market.waitForData(i.a)];
                                    case 1:
                                        return t.data = c.sent(), this.updateViewData = this.updateViewData.bind(this), this.makeViewDataForSweep = this.makeViewDataForSweep.bind(this), this.viewData = e.market.tryGetData(a.a) || new a.a(this.data, this.data.getSweepList()), this.viewData.setViewDataFactory(this.makeViewDataForSweep), e.market.register(this, a.a, this.viewData), this.updateViewData(), this.bindings.push(e.commandBinder.addBinding(s.d, this.onSweepSelectCommand), e.commandBinder.addBinding(s.c, this.onSweepHoverCommand), e.commandBinder.addBinding(a.b, this.onSweepVisibilityCommand), e.commandBinder.addBinding(s.b, this.enableSweepSelection), e.commandBinder.addBinding(s.a, this.disableSweepSelection), this.data.onChanged((function() {
                                            return r.updateViewData()
                                        })), e.msgBus.subscribe(f.e, (function() {
                                            return r.updateViewData()
                                        }))), n = this, [4, e.market.waitForData(l.a)];
                                    case 2:
                                        return n.viewmodeData = c.sent(), o = this, [4, e.market.waitForData(u.c)];
                                    case 3:
                                        return o.floorsViewData = c.sent(), this.bindings.push(this.data.onPropertyChanged("currentSweep", this.updateVisibility), e.subscribe(p.a, (function() {
                                            return r.updateVisibility(r.viewData.data.currentSweep)
                                        })), e.subscribe(h.b, (function() {
                                            return r.updateVisibility(r.viewData.data.currentSweep)
                                        })), this.viewmodeData.makeModeChangeSubscription((function() {
                                            return r.updateVisibility(r.viewData.data.currentSweep)
                                        }))), this.updateVisibility(this.viewData.data.currentSweep), [2]
                                }
                            }))
                        }))
                    }, e.prototype.updateViewData = function() {
                        var t = this;
                        this.sweepIdList.length = 0, this.sweepInteractionMap = this.viewData.sweepInteractionMap, this.data.getSweepList().forEach((function(e, n) {
                            t.sweepMap[e.id] = e, t.viewData.derivedData[e.id] = t.makeViewDataForSweep(e, n), t.viewData.sweepInteractionMap[e.id] = t.viewData.derivedData[e.id], t.sweepIdList.push(e.id)
                        })), this.viewData.sweepIdList = this.sweepIdList, this.viewData.sweepMap = this.sweepMap, this.viewData.commit()
                    }, e.prototype.onUpdate = function(t) {
                        this.viewData.updateAnimations(t)
                    }, e.prototype.makeViewDataForSweep = function(t, e) {
                        return {
                            id: t.id,
                            interaction: this.sweepInteractionMap[t.id] ? this.sweepInteractionMap[t.id].interaction : d.a.NONE,
                            floor: t.floor,
                            position: t.position,
                            index: t.index,
                            alignmentType: t.alignmentType,
                            dataIndex: e,
                            placed: t.placementType === c.b.MANUAL,
                            enabled: t.enabled,
                            name: t.name
                        }
                    }, e
                }(r.Eb);
            e.default = g
        },
        964: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(78),
                i = n(2),
                a = n(129),
                s = n(77),
                c = n(20),
                l = n(62),
                u = n(10),
                p = n(57),
                h = n(56),
                d = n(60),
                f = n(61),
                y = n(218),
                v = n(15),
                m = n(66),
                g = n(113),
                b = n(85),
                w = n(188),
                O = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                S = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                x = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                P = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "viewmode-change", e
                    }
                    return O(e, t), e.prototype.init = function(t, e) {
                        return S(this, void 0, void 0, (function() {
                            var t, n, o = this;
                            return x(this, (function(r) {
                                switch (r.label) {
                                    case 0:
                                        return this.engine = e, t = this, [4, e.getModule(i.Mb)];
                                    case 1:
                                        return t.viewmodesModule = r.sent(), n = this, [4, e.market.waitForData(s.a)];
                                    case 2:
                                        return n.settings = r.sent(), this.engine.market.waitForData(v.c).then((function(t) {
                                            return o.setEnabledModes(t.application)
                                        })), this.bindings.push(e.subscribe(m.b, (function(t) {
                                            return o.setEnabledModes(t.application)
                                        })), e.commandBinder.addBinding(a.a, this.onChangeViewmodeCommand.bind(this))), [2]
                                }
                            }))
                        }))
                    }, e.prototype.setEnabledModes = function(t) {
                        return S(this, void 0, void 0, (function() {
                            var e, n, o, i, a, s, u = this;
                            return x(this, (function(p) {
                                switch (p.label) {
                                    case 0:
                                        return t !== v.b.SHOWCASE ? [3, 7] : (this.dhDisabled = function() {
                                            return u.settings.checkUrlParam("dh", 0, 1) || !u.settings.tryGetProperty(r.a.Dollhouse, !1)
                                        }, this.fpDisabled = function() {
                                            return u.settings.checkUrlParam("fp", 0, 1) || !u.settings.tryGetProperty(r.a.FloorPlan, !1)
                                        }, this.previousApp ? [4, this.engine.market.waitForData(g.a)] : [2]);
                                    case 1:
                                        return (e = p.sent().currentMode) === c.a.Dollhouse && this.dhDisabled() || e === c.a.Floorplan && this.fpDisabled() ? [4, this.engine.market.waitForData(b.a)] : [3, 6];
                                    case 2:
                                        return n = p.sent(), (o = n.pose) && o.mode === c.a.Panorama ? (this.goToInsideMode(l.a.Interpolate, {
                                            position: o.camera.position
                                        }), [3, 6]) : [3, 3];
                                    case 3:
                                        return [4, this.engine.market.waitForData(f.a)];
                                    case 4:
                                        return i = p.sent().pose, [4, this.engine.market.waitForData(d.a)];
                                    case 5:
                                        a = p.sent().getClosestSweep(i.position, !0), s = a ? {
                                            position: a.position
                                        } : void 0, this.goToInsideMode(l.a.Interpolate, s), p.label = 6;
                                    case 6:
                                        return [3, 8];
                                    case 7:
                                        t === v.b.WORKSHOP && (this.dhDisabled = function() {
                                            return !1
                                        }, this.fpDisabled = function() {
                                            return !1
                                        }), p.label = 8;
                                    case 8:
                                        return this.previousApp = t, [2]
                                }
                            }))
                        }))
                    }, e.prototype.onChangeViewmodeCommand = function(t) {
                        return S(this, void 0, void 0, (function() {
                            return x(this, (function(e) {
                                switch (t.mode) {
                                    case a.b.INSIDE:
                                        return [2, this.goToInsideMode(t.transitionType, t.pose)];
                                    case a.b.DOLLHOUSE:
                                        return [2, this.goToDollhouse(t.transitionType, t.pose)];
                                    case a.b.FLOORPLAN:
                                        return [2, this.goToFloorplan(t.transitionType, t.pose)]
                                }
                                return [2, Promise.reject("viewmode-change => Could not move to " + t.mode)]
                            }))
                        }))
                    }, e.prototype.goToInsideMode = function(t, e) {
                        return void 0 === t && (t = l.a.Interpolate), void 0 === e && (e = {}), S(this, void 0, void 0, (function() {
                            var n, o, r;
                            return x(this, (function(a) {
                                switch (a.label) {
                                    case 0:
                                        return (n = this.engine.market.tryGetData(d.a)) ? (o = n.currentSweep) ? [3, 2] : [4, this.getLookAtSweep(n)] : [2, Promise.reject("Cannot go to inside mode")];
                                    case 1:
                                        o = a.sent(), a.label = 2;
                                    case 2:
                                        return n.isSweepUnaligned(o) && (r = n.getFirstAlignedSweep() || n.getFirstSweep(), o = r.id), this.viewmodesModule.currentMode === c.a.Panorama && n.isSweepUnaligned(n.currentSweep) ? [2, this.engine.commandBinder.issueCommand(new y.a({
                                            sweep: o,
                                            rotation: e.rotation,
                                            transition: l.a.FadeToBlack
                                        }))] : [2, this.viewmodesModule.switchToMode(c.a.Panorama, t, {
                                            sweepID: o
                                        }, i.k)]
                                }
                            }))
                        }))
                    }, e.prototype.getLookAtSweep = function(t) {
                        return S(this, void 0, Promise, (function() {
                            var e, n, o, r, i;
                            return x(this, (function(a) {
                                return (e = this.engine.market.tryGetData(f.a)) ? (n = this.getCurrentFloorHeight(), o = new p.a(u.b.DOWN, n), (r = Object(h.h)(e.pose.position, e.pose.rotation, o)) ? ((i = t.getClosestSweep(r, !0)) || (i = t.getFirstSweep()), [2, i.id]) : [2, t.getFirstSweep().id]) : [2, t.getFirstSweep().id]
                            }))
                        }))
                    }, e.prototype.getCurrentFloorHeight = function() {
                        if (!this.floorsViewData) try {
                            this.floorsViewData = this.engine.market.tryGetData(w.c)
                        } catch (t) {
                            return this.getModelMinHeight()
                        }
                        if (!this.floorsViewData) throw Error("Could not get floors viewdata");
                        return this.floorsViewData.getFloorMin()
                    }, e.prototype.getModelMinHeight = function() {
                        if (!this.modelMeshModule) try {
                            this.modelMeshModule = this.engine.getModuleSync(i.S)
                        } catch (t) {
                            return 0
                        }
                        return this.modelMeshModule.mesh.boundingBox.min.y
                    }, e.prototype.goToDollhouse = function(t, e) {
                        return void 0 === t && (t = l.a.Interpolate), void 0 === e && (e = {}), S(this, void 0, void 0, (function() {
                            return x(this, (function(n) {
                                return this.dhDisabled() ? [2, Promise.reject("Cannot go to dollhouse mode")] : [2, this.viewmodesModule.switchToMode(c.a.Dollhouse, t, e)]
                            }))
                        }))
                    }, e.prototype.goToFloorplan = function(t, e) {
                        return void 0 === t && (t = l.a.Interpolate), void 0 === e && (e = {}), S(this, void 0, void 0, (function() {
                            return x(this, (function(n) {
                                return this.fpDisabled() ? [2, Promise.reject("Cannot go to floorplan mode")] : [2, this.viewmodesModule.switchToMode(c.a.Floorplan, t, e)]
                            }))
                        }))
                    }, e
                }(i.Lb);
            e.default = P
        },
        965: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(63),
                i = n(1),
                a = n(60),
                s = n(2),
                c = n(547),
                l = n(3),
                u = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                p = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                h = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                d = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                f = new l.a("floors-data"),
                y = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "floors", e
                    }
                    return u(e, t), e.prototype.init = function(t, e) {
                        return p(this, void 0, void 0, (function() {
                            var n, o, r;
                            return h(this, (function(i) {
                                switch (i.label) {
                                    case 0:
                                        return [4, t.floorsSync.load()];
                                    case 1:
                                        return n = i.sent() || {}, [4, e.getModule(s.S)];
                                    case 2:
                                        return o = i.sent(), this.modelMesh = o.mesh, this.modelCollider = o.collider, [4, e.market.waitForData(a.a)];
                                    case 3:
                                        return r = i.sent(), this.sweeps = r.getSweepList(), this.initializeFloorData(n, e.market), this.updateManuallyPlacedSweeps(r.getSweepList()), [2]
                                }
                            }))
                        }))
                    }, e.prototype.initializeFloorData = function(t, e) {
                        this.data = Object(c.c)(t), this.buildFloorData(), e.register(this, c.a, this.data)
                    }, e.prototype.onUpdate = function(t) {}, e.prototype.getData = function(t) {
                        return void 0 === t && (t = !0), t ? Object.freeze(this.data.clone()) : this.data
                    }, e.prototype.updateManuallyPlacedSweeps = function(t) {
                        var e, n, o = new i.a;
                        try {
                            for (var a = d(t), s = a.next(); !s.done; s = a.next()) {
                                var c = s.value;
                                if (c.placementType === r.b.MANUAL && -1 === c.floor) {
                                    o.setY(c.position.y);
                                    var l = this.data.getFloorAtHeight(c.position.y),
                                        u = l ? l.floorIndex : 0;
                                    u !== c.floor && f.debug("Setting sweep " + c.id + " from floor " + c.floor + " to " + u), c.floor = u
                                }
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                s && !s.done && (n = a.return) && n.call(a)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                    }, e.prototype.getFloorMins = function() {
                        var t = [];
                        return this.data.iterate((function(e) {
                            t.push(e.boundingBox.min.y)
                        })), t
                    }, e.prototype.buildFloorData = function() {
                        var t, e, n = this;
                        try {
                            for (var o = d(this.modelMesh.floorMeshes), i = o.next(); !i.done; i = o.next()) {
                                var a = i.value,
                                    s = [],
                                    l = this.modelCollider.getReadonlyColliderListForGroup(a.floorIndex);
                                if (l && s.push.apply(s, l), !this.data.floors.get(a.floorIndex)) {
                                    var u = Object(c.b)(a.floorIndex, "Floor " + (a.floorIndex + 1));
                                    this.data.floors.set(a.floorIndex, u)
                                }
                                this.data.floors.get(a.floorIndex).setFloorMesh(a, s, this.modelCollider.getGroupName(a.floorIndex))
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                i && !i.done && (e = o.return) && e.call(o)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                        return this.sweeps.forEach((function(t) {
                            if (t.alignmentType === r.a.ALIGNED) {
                                var e = null;
                                t.floor >= 0 && (e = n.data.floors.get(t.floor) || null), e || (e = n.data.getFloorAtPoint(t.position)), e && (e.addSweep(t), n.data.sweepFloorMap[t.id] = e)
                            }
                        })), this
                    }, e
                }(s.t);
            e.default = y
        },
        966: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(19),
                i = n(2),
                a = n(77),
                s = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                c = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                l = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                u = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "gui", e.workshopApp = !1, e.mainDiv = document.querySelector("main") || document.body, e.onAppReadyChanged = function(t, n) {
                            e.workshopApp && (e.enableAppSwitching(t), n && t ? e.mainDiv.classList.add("edit-mode") : e.mainDiv.classList.remove("edit-mode"))
                        }, e
                    }
                    return s(e, t), e.prototype.init = function(t, e) {
                        return c(this, void 0, void 0, (function() {
                            var t, n, o, r;
                            return l(this, (function(s) {
                                switch (s.label) {
                                    case 0:
                                        return this.engine = e, this.messageBus = e, this.market = e.market, this.commandBinder = e.commandBinder, t = e.getModule(i.F), n = e.getModule(i.mb), o = e.market.waitForData(a.a), r = this, [4, Promise.all([t, n, o])];
                                    case 1:
                                        return r.mainArgs = s.sent(), this.preactRenderer = new p, e.addComponent(this, this.preactRenderer), [2]
                                }
                            }))
                        }))
                    }, e.prototype.unloadUi = function(t, e) {
                        return c(this, void 0, void 0, (function() {
                            var n = this;
                            return l(this, (function(o) {
                                return this.workshopApp && this.enableAppSwitching(!1), e ? [2, new Promise((function(o) {
                                    window.setTimeout((function() {
                                        Object(r.render)(null, n.mainDiv, t), o()
                                    }), e)
                                }))] : [2, Object(r.render)(null, this.mainDiv, t)]
                            }))
                        }))
                    }, Object.defineProperty(e.prototype, "unloadListeners", {
                        get: function() {
                            return this.unloadListenersPromise
                        },
                        enumerable: !0,
                        configurable: !0
                    }), e.prototype.loadUi = function(t) {
                        return c(this, void 0, Promise, (function() {
                            var e;
                            return l(this, (function(n) {
                                switch (n.label) {
                                    case 0:
                                        return e = [], [4, this.unloadListeners];
                                    case 1:
                                        return n.sent(), e = (e = e.concat(this.mainArgs)).concat([this.mainDiv, this.engine, this.messageBus, this.market, this.commandBinder, this.onAppReadyChanged]), [2, t.apply(this, e)]
                                }
                            }))
                        }))
                    }, e.prototype.setWorkshopApp = function() {
                        this.workshopApp = !0
                    }, e.prototype.enableAppSwitching = function(t) {
                        t ? document.body.classList.add("view-edit") : document.body.classList.remove("view-edit")
                    }, e.prototype.dispose = function(t) {
                        t.removeComponent(this, this.preactRenderer)
                    }, e
                }(i.w);
            e.default = u;
            var p = function() {
                function t() {}
                return t.prototype.render = function() {
                    Object(r.rerender)()
                }, t.prototype.init = function() {}, t.prototype.dispose = function() {}, t.prototype.activate = function(t) {}, t.prototype.deactivate = function(t) {}, t
            }()
        },
        967: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(2),
                i = n(113),
                a = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                s = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                c = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                l = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "common-controls", e
                    }
                    return a(e, t), e.prototype.init = function(t, e) {
                        return s(this, void 0, void 0, (function() {
                            var t = this;
                            return c(this, (function(n) {
                                return this.modeControls = {}, e.market.waitForData(i.a).then((function(e) {
                                    return t.viewmodeData = e
                                })), [2]
                            }))
                        }))
                    }, e.prototype.startRotateTransition = function(t, e, n) {
                        return void 0 === n && (n = !0), this.checkControlsForAction((function(o) {
                            return o.startRotateTransition(t, e, n)
                        }))
                    }, e.prototype.startZoomTransition = function(t, e, n) {
                        return void 0 === n && (n = !0), this.checkControlsForAction((function(o) {
                            return o.startZoomTransition(t, e, n)
                        }))
                    }, e.prototype.startTranslateTransition = function(t, e, n) {
                        return void 0 === n && (n = !0), this.checkControlsForAction((function(o) {
                            return o.startTranslateTransition(t, e, n)
                        }))
                    }, e.prototype.stop = function() {
                        return this.checkControlsForAction((function(t) {
                            return t.stop(), Promise.resolve()
                        }))
                    }, e.prototype.checkControlsForAction = function(t) {
                        if (this.viewmodeData && (null !== this.viewmodeData.currentMode && this.modeControls[this.viewmodeData.currentMode])) return t(this.modeControls[this.viewmodeData.currentMode].controls);
                        return Promise.reject("checkControlsForAction() -> Current view mode is null")
                    }, e.prototype.addControls = function(t, e, n) {
                        void 0 === n && (n = !1), this.modeControls[t] && !n || (this.modeControls[t] = {
                            mode: t,
                            controls: e
                        })
                    }, e
                }(r.f);
            e.default = l
        },
        968: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(2),
                i = (n(798), o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                a = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                s = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                c = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "mouse-cursor", e
                    }
                    return i(e, t), e.prototype.init = function(t, e) {
                        return a(this, void 0, void 0, (function() {
                            return s(this, (function(t) {
                                return document.body.classList.add("cursor"), [2]
                            }))
                        }))
                    }, e.prototype.changeCursor = function(t) {
                        t !== this.activeCursor && (document.body.classList.remove(this.activeCursor), this.activeCursor = t, document.body.classList.add(this.activeCursor))
                    }, e
                }(r.U);
            e.default = c
        },
        969: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(2),
                i = n(31),
                a = n(153),
                s = n(75),
                c = n(46),
                l = n(324),
                u = n(6),
                p = n(604),
                h = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                d = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                f = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                y = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "interactionmode", e
                    }
                    return h(e, t), e.prototype.init = function(t, e) {
                        return d(this, void 0, void 0, (function() {
                            var t = this;
                            return f(this, (function(n) {
                                switch (n.label) {
                                    case 0:
                                        return this.engine = e, this.data = new s.a, this.mobileBrowser = Object(u.o)(), this.data.mode = this.getInteractionMode(), this.engine.market.register(this, s.a, this.data), navigator.getVRDisplays ? [4, Object(p.b)().then((function(e) {
                                            e && (t.vrDisplay = e, t.onUpdate(0))
                                        }))] : [3, 2];
                                    case 1:
                                        n.sent(), n.label = 2;
                                    case 2:
                                        return e.getModule(r.x).then((function(e) {
                                            e.registerHandler(i.m, (function() {
                                                t.data.source !== c.a.Direct && t.updateSource(c.a.Direct)
                                            })), e.registerHandler(a.a, (function() {
                                                t.data.source !== c.a.Key && t.updateSource(c.a.Key)
                                            }))
                                        })), [2]
                                }
                            }))
                        }))
                    }, e.prototype.onUpdate = function(t) {
                        var e = this.getInteractionMode();
                        if (e !== this.data.mode) {
                            var n = this.data.mode;
                            this.data.mode = e, this.data.commit(), this.engine.broadcast(new l.a(this.data.mode, n))
                        }
                    }, e.prototype.getData = function() {
                        return this.data
                    }, e.prototype.getInteractionMode = function() {
                        return this.vrDisplay && this.vrDisplay.isPresenting ? c.b.VrOrientOnly : this.mobileBrowser ? c.b.Mobile : c.b.Desktop
                    }, e.prototype.updateSource = function(t) {
                        this.data.source = t, this.data.commit(), this.engine.broadcast(new l.b(this.data.source))
                    }, e
                }(r.y);
            e.default = y
        },
        970: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(2),
                i = n(153),
                a = n(91),
                s = n(129),
                c = n(542),
                l = n(152),
                u = n(113),
                p = n(20),
                h = n(77),
                d = n(264),
                f = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                y = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                v = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                m = function(t, e) {
                    var n = "function" == typeof Symbol && t[Symbol.iterator];
                    if (!n) return t;
                    var o, r, i = n.call(t),
                        a = [];
                    try {
                        for (;
                            (void 0 === e || e-- > 0) && !(o = i.next()).done;) a.push(o.value)
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    return a
                },
                g = function(t) {
                    function e() {
                        var e, n, o = null !== t && t.apply(this, arguments) || this;
                        return o.name = "showcase-hotkeys", o.inputCommandMap = ((e = {})[l.a.PRESSED] = ((n = {})[a.a.ONE] = function() {
                            return o.switchToMode(s.b.INSIDE)
                        }, n[a.a.TWO] = function() {
                            return o.switchToMode(s.b.DOLLHOUSE)
                        }, n[a.a.THREE] = function() {
                            return o.switchToMode(s.b.FLOORPLAN)
                        }, n[a.a.ZERO] = function() {
                            var t = o.currentView++ % o.meshViews.length;
                            return o.meshViews[t](), o.switchToMode(s.b.INSIDE)
                        }, n), e), o.currentView = 0, o.meshViews = [function() {
                            o.issueCommand(new c.a(1)), o.settings.setProperty(d.b, !1)
                        }, function() {
                            o.issueCommand(new c.a(1)), o.settings.setProperty(d.b, !0)
                        }, function() {
                            o.issueCommand(new c.a(0)), o.settings.setProperty(d.b, !0)
                        }, function() {
                            o.issueCommand(new c.a(0)), o.settings.setProperty(d.b, !1)
                        }], o
                    }
                    return f(e, t), e.prototype.init = function(t, e) {
                        return y(this, void 0, void 0, (function() {
                            var t, n, o = this;
                            return v(this, (function(a) {
                                switch (a.label) {
                                    case 0:
                                        return [4, e.getModule(r.x)];
                                    case 1:
                                        return n = a.sent(), [4, Promise.all([e.market.waitForData(u.a), e.market.waitForData(h.a)])];
                                    case 2:
                                        return t = m.apply(void 0, [a.sent(), 2]), this.viewmodeData = t[0], this.settings = t[1], this.issueCommand = e.commandBinder.issueCommand.bind(e.commandBinder), n.registerHandler(i.a, (function(t) {
                                            return y(o, void 0, void 0, (function() {
                                                return v(this, (function(e) {
                                                    switch (e.label) {
                                                        case 0:
                                                            return this.inputCommandMap[t.state] && this.inputCommandMap[t.state][t.key] ? [4, this.inputCommandMap[t.state][t.key]()] : [3, 2];
                                                        case 1:
                                                            e.sent(), e.label = 2;
                                                        case 2:
                                                            return [2]
                                                    }
                                                }))
                                            }))
                                        })), [2]
                                }
                            }))
                        }))
                    }, e.prototype.switchToMode = function(t) {
                        return y(this, void 0, void 0, (function() {
                            return v(this, (function(e) {
                                switch (e.label) {
                                    case 0:
                                        return this.viewmodeData.currentMode === p.a.Transition ? [3, 2] : [4, this.issueCommand(new s.a(t))];
                                    case 1:
                                        e.sent(), e.label = 2;
                                    case 2:
                                        return [2]
                                }
                            }))
                        }))
                    }, e
                }(r.nb);
            e.default = g
        },
        971: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(2),
                i = n(60),
                a = n(20),
                s = n(85),
                c = n(62),
                l = n(63),
                u = n(27),
                p = n(77),
                h = n(218),
                d = n(647),
                f = n(78),
                y = n(14),
                v = n(33),
                m = n(528),
                g = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                b = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                w = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                O = function(t, e) {
                    var n = "function" == typeof Symbol && t[Symbol.iterator];
                    if (!n) return t;
                    var o, r, i = n.call(t),
                        a = [];
                    try {
                        for (;
                            (void 0 === e || e-- > 0) && !(o = i.next()).done;) a.push(o.value)
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    return a
                },
                S = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "showcase-start", e.firstRenderPromise = new v.a, e.flyInPromise = new v.a, e
                    }
                    return g(e, t), e.prototype.init = function(t, e) {
                        return b(this, void 0, void 0, (function() {
                            var t, n, o, a, c, l, u, h, f, y = this;
                            return w(this, (function(v) {
                                switch (v.label) {
                                    case 0:
                                        return [4, e.market.waitForData(p.a)];
                                    case 1:
                                        return t = v.sent(), n = t.tryGetProperty("quickstart", !1), o = this, [4, e.waitForModule(r.ub)];
                                    case 2:
                                        return o.sweepModule = v.sent(), a = this, [4, e.market.waitForData(i.a)];
                                    case 3:
                                        return a.sweepData = v.sent(), c = this, [4, e.getModule(r.c)];
                                    case 4:
                                        return c.cameraModule = v.sent(), l = this, [4, e.getModule(r.d)];
                                    case 5:
                                        return l.cameraStartModule = v.sent(), u = this, [4, e.getModule(r.Nb)];
                                    case 6:
                                        return u.renderer = v.sent(), [4, e.market.waitForData(s.a)];
                                    case 7:
                                        return h = v.sent(), f = this.cameraStartModule.getStartingPose(), (n ? this.doQuickStart(f, e) : this.doStandardStart(f, e, t)).then((function() {
                                            return y.flyInPromise.resolve()
                                        })), this.bindings.push(e.commandBinder.addBinding(d.a, (function(n) {
                                            return b(y, void 0, void 0, (function() {
                                                var n = this;
                                                return w(this, (function(o) {
                                                    return this.renderer.startRender(!1), [2, this.doStandardStart(h.pose, e, t).catch((function() {
                                                        return n.renderer.startRender(!0)
                                                    }))]
                                                }))
                                            }))
                                        }))), [2, this.waitForFirstRender]
                                }
                            }))
                        }))
                    }, Object.defineProperty(e.prototype, "waitForFirstRender", {
                        get: function() {
                            return this.firstRenderPromise.nativePromise()
                        },
                        enumerable: !0,
                        configurable: !0
                    }), Object.defineProperty(e.prototype, "waitForFlyin", {
                        get: function() {
                            return this.flyInPromise.nativePromise()
                        },
                        enumerable: !0,
                        configurable: !0
                    }), e.prototype.doQuickStart = function(t, e) {
                        return b(this, void 0, void 0, (function() {
                            var n;
                            return w(this, (function(o) {
                                switch (o.label) {
                                    case 0:
                                        return n = this.sweepData.getStartSweep(t).id, [4, e.commandBinder.issueCommand(new h.a({
                                            sweep: n,
                                            rotation: t.camera.rotation,
                                            transition: c.a.Instant
                                        }))];
                                    case 1:
                                        return o.sent(), [2, this.renderBeforeStarting(e)]
                                }
                            }))
                        }))
                    }, e.prototype.doStandardStart = function(t, e, n) {
                        return b(this, void 0, void 0, (function() {
                            var o, i, s, l, p, h, d, v, g, b, S, x;
                            return w(this, (function(w) {
                                switch (w.label) {
                                    case 0:
                                        return [4, Promise.all([e.waitForModule(r.Mb)])];
                                    case 1:
                                        return o = O.apply(void 0, [w.sent(), 1]), i = o[0], s = n.checkUrlParam("dh", 0, 1) || !n.tryGetProperty(f.a.Dollhouse, !0), l = n.checkUrlParam("fp", 0, 1) || !n.tryGetProperty(f.a.FloorPlan, !0), t && (t.mode === a.a.Dollhouse && s || t.mode === a.a.Floorplan && l || t.mode === a.a.Panorama && !t.pano) && (t = null), p = !t || t && (t.mode === a.a.Dollhouse || t.mode === a.a.Floorplan), h = !t || t && !this.is360Pano(t) && t.mode === a.a.Panorama && !s, d = t ? t.mode : a.a.Panorama, v = this.sweepData.getStartSweep(t).id, (g = t ? t.camera.rotation : this.sweepData.getFirstSweep().rotation) && d !== a.a.Floorplan && (g = Object(y.m)(g)), h ? [4, e.waitForModule(r.S)] : [3, 8];
                                    case 2:
                                        return w.sent(), b = i.getFlyinEndPose({
                                            sweepID: v,
                                            position: t ? t.camera.position : void 0,
                                            rotation: g
                                        }), S = i.getFlyinStartPose(b), x = this.sweepModule.activateSweep({
                                            sweepId: v
                                        }), [4, i.switchToMode(a.a.Dollhouse, c.a.Instant, S)];
                                    case 3:
                                        return w.sent(), [4, this.renderBeforeStarting(e)];
                                    case 4:
                                        return w.sent(), [4, Object(u.d)(750)];
                                    case 5:
                                        return w.sent(), [4, this.cameraModule.moveTo({
                                            transitionType: c.a.Interpolate,
                                            pose: b
                                        }).nativePromise()];
                                    case 6:
                                        return w.sent(), [4, x];
                                    case 7:
                                        return w.sent(), [2, i.switchToMode(a.a.Panorama, c.a.Interpolate, {
                                            sweepID: v,
                                            rotation: g
                                        }, r.k)];
                                    case 8:
                                        return [4, i.switchToMode(d, c.a.Instant, {
                                            sweepID: v,
                                            position: t ? t.camera.position : void 0,
                                            rotation: g,
                                            zoom: t && -1 !== t.camera.zoom ? t.camera.zoom : void 0
                                        })];
                                    case 9:
                                        return w.sent(), p && t && t.floorVisibility ? [4, e.commandBinder.issueCommandWhenBound(new m.a(t.floorVisibility.lastIndexOf(1), !0, 0))] : [3, 11];
                                    case 10:
                                        w.sent(), w.label = 11;
                                    case 11:
                                        return [4, this.renderBeforeStarting(e)];
                                    case 12:
                                        w.sent(), w.label = 13;
                                    case 13:
                                        return [2]
                                }
                            }))
                        }))
                    }, e.prototype.is360Pano = function(t) {
                        var e;
                        if (t.pano.uuid) {
                            if (e = this.sweepData.getSweep(t.pano.uuid)) return e.alignmentType !== l.a.ALIGNED
                        } else if (e = this.sweepData.getFirstSweep()) return e.alignmentType !== l.a.ALIGNED;
                        return !1
                    }, e.prototype.renderBeforeStarting = function(t) {
                        return b(this, void 0, void 0, (function() {
                            return w(this, (function(e) {
                                switch (e.label) {
                                    case 0:
                                        return [4, this.renderer.renderOnce()];
                                    case 1:
                                        return e.sent(), [4, t.waitForModule(r.E)];
                                    case 2:
                                        return e.sent(), this.renderer.startRender(!0), this.firstRenderPromise.resolve(), [2]
                                }
                            }))
                        }))
                    }, e
                }(r.pb);
            e.default = S
        },
        972: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r = n(2),
                i = n(78),
                a = n(605),
                s = n(82),
                c = n(62),
                l = n(77),
                u = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                p = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                h = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                d = function(t) {
                    var e = "function" == typeof Symbol && t[Symbol.iterator],
                        n = 0;
                    return e ? e.call(t) : {
                        next: function() {
                            return t && n >= t.length && (t = void 0), {
                                value: t && t[n++],
                                done: !t
                            }
                        }
                    }
                },
                f = ["enable_social_sharing", "account_social_sharing_default", "is_public", "is_vr"],
                y = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "showcase-settings", e.updateTransitionType = function(t, e, n) {
                            var o = t.options.fast_transitions ? c.a.FadeToBlack : c.a.Interpolate;
                            e.hasProperty(a.a) ? e.setProperty(a.a, o) : n.registerSetting("player_options", a.a, o)
                        }, e
                    }
                    return u(e, t), e.prototype.init = function(t, e) {
                        return p(this, void 0, void 0, (function() {
                            var n, o, r, a, c, u, p, y, v, m, g, b, w = this;
                            return h(this, (function(h) {
                                switch (h.label) {
                                    case 0:
                                        return [4, t.optionsSync.load()];
                                    case 1:
                                        return (r = h.sent()) || (r = new i.b), e.market.register(this, i.b, r), [4, e.getModule(s.default)];
                                    case 2:
                                        return a = h.sent(), [4, e.market.waitForData(l.a)];
                                    case 3:
                                        return c = h.sent(), [4, t.modelDetailsStore.read()];
                                    case 4:
                                        for (p in u = h.sent(), i.a) b = i.a[p], y = r.options[b], a.hasProperty(b) ? (v = a.getProperty(b), a.updateSetting(b, y && v)) : a.registerSetting("player_options", b, y);
                                        try {
                                            for (m = d(f), g = m.next(); !g.done; g = m.next()) b = g.value, a.registerSetting("ModelData", b, !!u[b])
                                        } catch (t) {
                                            n = {
                                                error: t
                                            }
                                        } finally {
                                            try {
                                                g && !g.done && (o = m.return) && o.call(m)
                                            } finally {
                                                if (n) throw n.error
                                            }
                                        }
                                        return this.updateTransitionType(r, c, a), this.bindings.push(c.onPropertyChanged(i.a.InstantTransitions, (function() {
                                            return w.updateTransitionType(r, c, a)
                                        }))), [2]
                                }
                            }))
                        }))
                    }, e
                }(r.ob);
            e.default = y
        },
        973: function(t, e, n) {
            "use strict";
            n.r(e);
            var o, r, i = n(218),
                a = n(113),
                s = n(2),
                c = n(31),
                l = n(60),
                u = n(62),
                p = n(20),
                h = n(1),
                d = n(723),
                f = n(123),
                y = n(32),
                v = n(91),
                m = n(152),
                g = n(10),
                b = n(529),
                w = n(541),
                O = n(256),
                S = n(96),
                x = n(547),
                P = n(580),
                _ = n(3),
                T = n(61),
                D = n(68),
                k = n(528),
                M = (o = function(t, e) {
                    return (o = Object.setPrototypeOf || {
                            __proto__: []
                        }
                        instanceof Array && function(t, e) {
                            t.__proto__ = e
                        } || function(t, e) {
                            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                        })(t, e)
                }, function(t, e) {
                    function n() {
                        this.constructor = t
                    }
                    o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
                }),
                E = function(t, e, n, o) {
                    return new(n || (n = Promise))((function(r, i) {
                        function a(t) {
                            try {
                                c(o.next(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function s(t) {
                            try {
                                c(o.throw(t))
                            } catch (t) {
                                i(t)
                            }
                        }

                        function c(t) {
                            t.done ? r(t.value) : new n((function(e) {
                                e(t.value)
                            })).then(a, s)
                        }
                        c((o = o.apply(t, e || [])).next())
                    }))
                },
                C = function(t, e) {
                    var n, o, r, i, a = {
                        label: 0,
                        sent: function() {
                            if (1 & r[0]) throw r[1];
                            return r[1]
                        },
                        trys: [],
                        ops: []
                    };
                    return i = {
                        next: s(0),
                        throw: s(1),
                        return: s(2)
                    }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                        return this
                    }), i;

                    function s(i) {
                        return function(s) {
                            return function(i) {
                                if (n) throw new TypeError("Generator is already executing.");
                                for (; a;) try {
                                    if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;
                                    switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {
                                        case 0:
                                        case 1:
                                            r = i;
                                            break;
                                        case 4:
                                            return a.label++, {
                                                value: i[1],
                                                done: !1
                                            };
                                        case 5:
                                            a.label++, o = i[1], i = [0];
                                            continue;
                                        case 7:
                                            i = a.ops.pop(), a.trys.pop();
                                            continue;
                                        default:
                                            if (!(r = (r = a.trys).length > 0 && r[r.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                                a = 0;
                                                continue
                                            }
                                            if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {
                                                a.label = i[1];
                                                break
                                            }
                                            if (6 === i[0] && a.label < r[1]) {
                                                a.label = r[1], r = i;
                                                break
                                            }
                                            if (r && a.label < r[2]) {
                                                a.label = r[2], a.ops.push(i);
                                                break
                                            }
                                            r[2] && a.ops.pop(), a.trys.pop();
                                            continue
                                    }
                                    i = e.call(t, a)
                                } catch (t) {
                                    i = [6, t], o = 0
                                } finally {
                                    n = r = 0
                                }
                                if (5 & i[0]) throw i[1];
                                return {
                                    value: i[0] ? i[1] : void 0,
                                    done: !0
                                }
                            }([i, s])
                        }
                    }
                },
                j = new _.a("navigation"),
                L = function(t) {
                    function e() {
                        var e = null !== t && t.apply(this, arguments) || this;
                        return e.name = "navigation", e.navigationEnabled = !0, e.navigationRules = [function() {
                            return !0
                        }], e.addNavigationRule = function(t) {
                            -1 === e.navigationRules.indexOf(t) && e.navigationRules.push(t)
                        }, e.removeNavigationRule = function(t) {
                            var n = e.navigationRules.indexOf(t); - 1 !== n && e.navigationRules.splice(n, 1)
                        }, e
                    }
                    return M(e, t), e.prototype.lockNavigation = function() {
                        this.navigationEnabled = !1, j.debug("Navigation locked")
                    }, e.prototype.unlockNavigation = function() {
                        this.navigationEnabled = !0, j.debug("Navigation unlocked")
                    }, e.prototype.init = function(t, n) {
                        return E(this, void 0, void 0, (function() {
                            var o, r, i, u, v, b = this;
                            return C(this, (function(w) {
                                switch (w.label) {
                                    case 0:
                                        return o = this, [4, n.market.waitForData(l.a)];
                                    case 1:
                                        return o.sweepData = w.sent(), r = this, [4, n.getModule(s.Mb)];
                                    case 2:
                                        return r.viewmodesModule = w.sent(), i = this, [4, n.market.waitForData(a.a)];
                                    case 3:
                                        return i.viewmodeData = w.sent(), u = this, [4, n.market.waitForData(x.a)];
                                    case 4:
                                        return u.floorsData = w.sent(), v = this, [4, n.market.waitForData(T.a)];
                                    case 5:
                                        return v.cameraData = w.sent(), this.commandBinder = n.commandBinder, n.getModule(s.x).then((function(n) {
                                            if (b.bindings.push(n.registerMeshHandler(c.a, D.a.isInstanceOf(f.a), (function(t, e, n) {
                                                    return !(t.button !== y.a.PRIMARY || !n) && (b.handleMeshClick(n), !0)
                                                })), n.registerMeshHandler(c.a, D.a.isType(d.b), (function(t, e) {
                                                    return t.button === y.a.PRIMARY && (!!b.viewmodeData.isPano() && (b.tryNavigateInLocalDirection(g.b.FORWARD), !0))
                                                })), n.registerHandler(c.f, (function(t) {
                                                    if (b.viewmodeData.isPano() && t.state === m.a.DOWN) {
                                                        var n = e.inputMap,
                                                            o = t.key;
                                                        if (o in n) {
                                                            var r = n[o];
                                                            b.tryNavigateInLocalDirection(r)
                                                        }
                                                    }
                                                }))), t.hasOwnProperty("enableWheel") && t.enableWheel) {
                                                var o = new h.a;
                                                b.bindings.push(n.registerHandler(c.q, (function(t) {
                                                    b.viewmodeData.isPano() && (o.set(0, 0, Math.sign(t.delta.y)), b.tryNavigateInLocalDirection(o))
                                                })))
                                            }
                                        })), this.bindings.push(n.subscribe(O.a, (function(t) {
                                            if (t.toMode === p.a.Dollhouse && t.fromMode === p.a.Panorama) {
                                                var e = n.market.tryGetData(S.b);
                                                e && e.isTourActive() || n.commandBinder.issueCommand(new k.a(-1, !0, 0))
                                            }
                                        })), n.commandBinder.addBinding(P.a, (function() {
                                            return E(b, void 0, void 0, (function() {
                                                return C(this, (function(t) {
                                                    return [2, this.lockNavigation()]
                                                }))
                                            }))
                                        })), n.commandBinder.addBinding(P.b, (function() {
                                            return E(b, void 0, void 0, (function() {
                                                return C(this, (function(t) {
                                                    return [2, this.unlockNavigation()]
                                                }))
                                            }))
                                        }))), [2]
                                }
                            }))
                        }))
                    }, e.prototype.handleMeshClick = function(t) {
                        if (this.viewmodeData.currentMode === p.a.Panorama) try {
                            this.navigateInDirection(t.point.clone().sub(this.cameraData.pose.position))
                        } catch (t) {
                            j.debug(t)
                        } else this.navigateToPanoNearIntersection(t)
                    }, e.prototype.navigateToPanoNearIntersection = function(t) {
                        if (this.viewmodeData.currentMode !== p.a.Panorama && this.viewmodesModule.canSwitchViewMode(p.a.Panorama)) {
                            var e = this.navigationRules.reduce((function(t, e) {
                                return t && e()
                            }), !0);
                            if (!this.navigationEnabled || !e) return void j.debug("Cannot move while navigation is locked", {
                                blockedByRules: !e,
                                blockedByCommand: !this.navigationEnabled
                            });
                            var n = [Object(b.c)(), Object(b.b)()];
                            t.face && n.push(Object(b.f)(t.point, t.face.normal));
                            var o = [Object(w.d)(t.point)],
                                r = this.floorsData.getFloorByCollider(t.object);
                            r && o.push(Object(w.a)(r.floorIndex));
                            var i = this.sweepData.sortByScore(n, o),
                                a = i.length > 0 ? i[0].sweep : this.sweepData.getClosestSweep(t.point, !0),
                                c = a ? {
                                    sweepID: a.id
                                } : void 0;
                            this.viewmodesModule.switchToMode(p.a.Panorama, u.a.Interpolate, c, s.k)
                        }
                    }, e.prototype.tryNavigateInLocalDirection = function(t) {
                        try {
                            this.navigateInLocalDirection(t)
                        } catch (t) {
                            j.debug(t)
                        }
                    }, e.prototype.navigateInLocalDirection = function(t) {
                        var e = this.cameraData.pose.rotation;
                        return this.navigateInDirection(t.clone().applyQuaternion(e))
                    }, e.prototype.navigateInDirection = function(t) {
                        if (this.viewmodeData.currentMode !== p.a.Panorama) throw Error("Cannot navigate between panos when not in Panorama mode");
                        var e = this.sweepData.currentSweep;
                        if (!e) throw Error("Not at a valid sweep");
                        if (!this.sweepData.canTransition() || !this.cameraData.canTransition()) throw Error("Cannot move while in a transition");
                        var n = this.navigationRules.reduce((function(t, e) {
                            return t && e()
                        }), !0);
                        if (!this.navigationEnabled || !n) throw Error("Cannot move while navigation is locked");
                        var o = this.sweepData.getSweep(e),
                            r = [b.h(o), b.c(), b.e(o), b.a(o.position, t)],
                            a = [w.b(o.position, t), w.c(o.position)],
                            s = this.sweepData.sortByScore(r, a);
                        if (s.length > 0) return this.commandBinder.issueCommand(new i.a({
                            transition: u.a.Interpolate,
                            sweep: s[0].sweep.id
                        }));
                        throw Error("Cannot move in that direction")
                    }, e.inputMap = ((r = {})[v.a.W] = g.b.FORWARD, r[v.a.A] = g.b.LEFT, r[v.a.S] = g.b.BACK, r[v.a.D] = g.b.RIGHT, r[v.a.UPARROW] = g.b.FORWARD, r[v.a.DOWNARROW] = g.b.BACK, r), e
                }(s.V);
            e.default = L
        }
    }
]);