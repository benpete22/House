/*! For license information please see showcase.js.LICENSE */ ! function(t) {
    function e(e) {
        for (var n, r, o = e[0], a = e[1], s = 0, u = []; s < o.length; s++) r = o[s], Object.prototype.hasOwnProperty.call(i, r) && i[r] && u.push(i[r][0]), i[r] = 0;
        for (n in a) Object.prototype.hasOwnProperty.call(a, n) && (t[n] = a[n]);
        for (c && c(e); u.length;) u.shift()()
    }
    var n = {},
        r = {
            8: 0
        },
        i = {
            8: 0
        };

    function o(e) {
        if (n[e]) return n[e].exports;
        var r = n[e] = {
            i: e,
            l: !1,
            exports: {}
        };
        return t[e].call(r.exports, r, r.exports, o), r.l = !0, r.exports
    }
    o.e = function(t) {
        var e = [];
        r[t] ? e.push(r[t]) : 0 !== r[t] && {
            3: 1,
            5: 1
        }[t] && e.push(r[t] = new Promise((function(e, n) {
            for (var r = "css/" + ({
                    0: "core~late~sdkBindings~ws-late",
                    1: "core~sdkBindings~ws-gui",
                    2: "late~sdkBindings",
                    3: "vendors~core~ws-gui",
                    5: "core",
                    6: "late",
                    7: "sdkBindings",
                    10: "vendors~control-kit",
                    11: "vendors~core",
                    12: "vendors~late-vr"
                }[t] || t) + ".css", i = o.p + r, a = document.getElementsByTagName("link"), s = 0; s < a.length; s++) {
                var u = (l = a[s]).getAttribute("data-href") || l.getAttribute("href");
                if ("stylesheet" === l.rel && (u === r || u === i)) return e()
            }
            var c = document.getElementsByTagName("style");
            for (s = 0; s < c.length; s++) {
                var l;
                if ((u = (l = c[s]).getAttribute("data-href")) === r || u === i) return e()
            }
            var h = document.createElement("link");
            h.rel = "stylesheet", h.type = "text/css", h.onload = e, h.onerror = function(e) {
                var r = e && e.target && e.target.src || i,
                    o = new Error("Loading CSS chunk " + t + " failed.\n(" + r + ")");
                o.request = r, n(o)
            }, h.href = i, document.getElementsByTagName("head")[0].appendChild(h)
        })).then((function() {
            r[t] = 0
        })));
        var n = i[t];
        if (0 !== n)
            if (n) e.push(n[2]);
            else {
                var a = new Promise((function(e, r) {
                    n = i[t] = [e, r]
                }));
                e.push(n[2] = a);
                var s, u = document.createElement("script");
                u.charset = "utf-8", u.timeout = 120, o.nc && u.setAttribute("nonce", o.nc), u.src = function(t) {
                    return o.p + "js/" + t + ".js"
                }(t);
                var c = new Error;
                s = function(e) {
                    u.onerror = u.onload = null, clearTimeout(l);
                    var n = i[t];
                    if (0 !== n) {
                        if (n) {
                            var r = e && ("load" === e.type ? "missing" : e.type),
                                o = e && e.target && e.target.src;
                            c.message = "Loading chunk " + t + " failed.\n(" + r + ": " + o + ")", c.name = "ChunkLoadError", c.type = r, c.request = o, n[1](c)
                        }
                        i[t] = void 0
                    }
                };
                var l = setTimeout((function() {
                    s({
                        type: "timeout",
                        target: u
                    })
                }), 12e4);
                u.onerror = u.onload = s, document.head.appendChild(u)
            }
        return Promise.all(e)
    }, o.m = t, o.c = n, o.d = function(t, e, n) {
        o.o(t, e) || Object.defineProperty(t, e, {
            enumerable: !0,
            get: n
        })
    }, o.r = function(t) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {
            value: "Module"
        }), Object.defineProperty(t, "__esModule", {
            value: !0
        })
    }, o.t = function(t, e) {
        if (1 & e && (t = o(t)), 8 & e) return t;
        if (4 & e && "object" == typeof t && t && t.__esModule) return t;
        var n = Object.create(null);
        if (o.r(n), Object.defineProperty(n, "default", {
                enumerable: !0,
                value: t
            }), 2 & e && "string" != typeof t)
            for (var r in t) o.d(n, r, function(e) {
                return t[e]
            }.bind(null, r));
        return n
    }, o.n = function(t) {
        var e = t && t.__esModule ? function() {
            return t.default
        } : function() {
            return t
        };
        return o.d(e, "a", e), e
    }, o.o = function(t, e) {
        return Object.prototype.hasOwnProperty.call(t, e)
    }, o.p = "", o.oe = function(t) {
        throw console.error(t), t
    };
    var a = window.webpackJsonp = window.webpackJsonp || [],
        s = a.push.bind(a);
    a.push = e, a = a.slice();
    for (var u = 0; u < a.length; u++) e(a[u]);
    var c = s;
    o(o.s = 517)
}([function(t, e, n) {
    "use strict";
    n.d(e, "s", (function() {
        return r
    })), n.d(e, "q", (function() {
        return i
    })), n.d(e, "r", (function() {
        return o
    })), n.d(e, "vb", (function() {
        return a
    })), n.d(e, "wb", (function() {
        return s
    })), n.d(e, "Ac", (function() {
        return u
    })), n.d(e, "F", (function() {
        return c
    })), n.d(e, "h", (function() {
        return l
    })), n.d(e, "w", (function() {
        return h
    })), n.d(e, "D", (function() {
        return f
    })), n.d(e, "lb", (function() {
        return p
    })), n.d(e, "Bc", (function() {
        return d
    })), n.d(e, "kb", (function() {
        return m
    })), n.d(e, "nb", (function() {
        return v
    })), n.d(e, "d", (function() {
        return y
    })), n.d(e, "mc", (function() {
        return g
    })), n.d(e, "cb", (function() {
        return b
    })), n.d(e, "t", (function() {
        return _
    })), n.d(e, "b", (function() {
        return w
    })), n.d(e, "lc", (function() {
        return x
    })), n.d(e, "ec", (function() {
        return E
    })), n.d(e, "Z", (function() {
        return S
    })), n.d(e, "Y", (function() {
        return T
    })), n.d(e, "Cc", (function() {
        return M
    })), n.d(e, "qb", (function() {
        return O
    })), n.d(e, "jc", (function() {
        return P
    })), n.d(e, "ub", (function() {
        return A
    })), n.d(e, "hc", (function() {
        return L
    })), n.d(e, "tb", (function() {
        return R
    })), n.d(e, "x", (function() {
        return D
    })), n.d(e, "rb", (function() {
        return I
    })), n.d(e, "y", (function() {
        return C
    })), n.d(e, "sb", (function() {
        return N
    })), n.d(e, "ic", (function() {
        return U
    })), n.d(e, "jb", (function() {
        return j
    })), n.d(e, "f", (function() {
        return k
    })), n.d(e, "M", (function() {
        return F
    })), n.d(e, "N", (function() {
        return B
    })), n.d(e, "A", (function() {
        return G
    })), n.d(e, "I", (function() {
        return z
    })), n.d(e, "H", (function() {
        return H
    })), n.d(e, "ob", (function() {
        return V
    })), n.d(e, "db", (function() {
        return W
    })), n.d(e, "bb", (function() {
        return X
    })), n.d(e, "c", (function() {
        return q
    })), n.d(e, "mb", (function() {
        return Y
    })), n.d(e, "U", (function() {
        return K
    })), n.d(e, "cc", (function() {
        return Z
    })), n.d(e, "sc", (function() {
        return Q
    })), n.d(e, "k", (function() {
        return J
    })), n.d(e, "a", (function() {
        return $
    })), n.d(e, "rc", (function() {
        return tt
    })), n.d(e, "m", (function() {
        return et
    })), n.d(e, "n", (function() {
        return nt
    })), n.d(e, "B", (function() {
        return rt
    })), n.d(e, "C", (function() {
        return it
    })), n.d(e, "gc", (function() {
        return ot
    })), n.d(e, "o", (function() {
        return at
    })), n.d(e, "p", (function() {
        return st
    })), n.d(e, "dc", (function() {
        return ut
    })), n.d(e, "l", (function() {
        return ct
    })), n.d(e, "ab", (function() {
        return lt
    })), n.d(e, "eb", (function() {
        return ht
    })), n.d(e, "ib", (function() {
        return ft
    })), n.d(e, "gb", (function() {
        return pt
    })), n.d(e, "hb", (function() {
        return dt
    })), n.d(e, "fb", (function() {
        return mt
    })), n.d(e, "P", (function() {
        return vt
    })), n.d(e, "T", (function() {
        return yt
    })), n.d(e, "R", (function() {
        return gt
    })), n.d(e, "S", (function() {
        return bt
    })), n.d(e, "Q", (function() {
        return _t
    })), n.d(e, "tc", (function() {
        return wt
    })), n.d(e, "j", (function() {
        return xt
    })), n.d(e, "fc", (function() {
        return Et
    })), n.d(e, "zc", (function() {
        return St
    })), n.d(e, "K", (function() {
        return Tt
    })), n.d(e, "vc", (function() {
        return Mt
    })), n.d(e, "E", (function() {
        return Ot
    })), n.d(e, "J", (function() {
        return Pt
    })), n.d(e, "wc", (function() {
        return At
    })), n.d(e, "xc", (function() {
        return Lt
    })), n.d(e, "yc", (function() {
        return Rt
    })), n.d(e, "uc", (function() {
        return Dt
    })), n.d(e, "e", (function() {
        return It
    })), n.d(e, "Ub", (function() {
        return Ct
    })), n.d(e, "yb", (function() {
        return Nt
    })), n.d(e, "X", (function() {
        return Ut
    })), n.d(e, "W", (function() {
        return jt
    })), n.d(e, "u", (function() {
        return kt
    })), n.d(e, "v", (function() {
        return Ft
    })), n.d(e, "bc", (function() {
        return Bt
    })), n.d(e, "ac", (function() {
        return Gt
    })), n.d(e, "Pb", (function() {
        return zt
    })), n.d(e, "Qb", (function() {
        return Ht
    })), n.d(e, "Rb", (function() {
        return Vt
    })), n.d(e, "Zb", (function() {
        return Wt
    })), n.d(e, "Yb", (function() {
        return Xt
    })), n.d(e, "Ob", (function() {
        return qt
    })), n.d(e, "Nb", (function() {
        return Yt
    })), n.d(e, "Xb", (function() {
        return Kt
    })), n.d(e, "Fb", (function() {
        return Zt
    })), n.d(e, "Gb", (function() {
        return Qt
    })), n.d(e, "Hb", (function() {
        return Jt
    })), n.d(e, "Ib", (function() {
        return $t
    })), n.d(e, "Jb", (function() {
        return te
    })), n.d(e, "Kb", (function() {
        return ee
    })), n.d(e, "Lb", (function() {
        return ne
    })), n.d(e, "Mb", (function() {
        return re
    })), n.d(e, "Ab", (function() {
        return ie
    })), n.d(e, "Bb", (function() {
        return oe
    })), n.d(e, "Cb", (function() {
        return ae
    })), n.d(e, "zb", (function() {
        return se
    })), n.d(e, "Db", (function() {
        return ue
    })), n.d(e, "Eb", (function() {
        return ce
    })), n.d(e, "qc", (function() {
        return le
    })), n.d(e, "pc", (function() {
        return he
    })), n.d(e, "oc", (function() {
        return fe
    })), n.d(e, "O", (function() {
        return pe
    })), n.d(e, "Dc", (function() {
        return de
    })), n.d(e, "G", (function() {
        return me
    })), n.d(e, "Tb", (function() {
        return ve
    })), n.d(e, "V", (function() {
        return ye
    })), n.d(e, "Wb", (function() {
        return ge
    })), n.d(e, "Vb", (function() {
        return be
    })), n.d(e, "Sb", (function() {
        return _e
    })), n.d(e, "i", (function() {
        return we
    })), n.d(e, "xb", (function() {
        return xe
    })), n.d(e, "nc", (function() {
        return Ee
    })), n.d(e, "pb", (function() {
        return Se
    })), n.d(e, "L", (function() {
        return Te
    })), n.d(e, "g", (function() {
        return Me
    })), n.d(e, "kc", (function() {
        return Oe
    })), n.d(e, "z", (function() {
        return Pe
    }));
    var r = 0,
        i = 1,
        o = 2,
        a = 1,
        s = 2,
        u = 3,
        c = 0,
        l = 1,
        h = 2,
        f = 1,
        p = 0,
        d = 2,
        m = 0,
        v = 1,
        y = 2,
        g = 3,
        b = 4,
        _ = 5,
        w = 100,
        x = 101,
        E = 102,
        S = 103,
        T = 104,
        M = 200,
        O = 201,
        P = 202,
        A = 203,
        L = 204,
        R = 205,
        D = 206,
        I = 207,
        C = 208,
        N = 209,
        U = 210,
        j = 0,
        k = 1,
        F = 2,
        B = 3,
        G = 4,
        z = 5,
        H = 6,
        V = 7,
        W = 0,
        X = 1,
        q = 2,
        Y = 0,
        K = 1,
        Z = 2,
        Q = 3,
        J = 4,
        $ = 5,
        tt = 300,
        et = 301,
        nt = 302,
        rt = 303,
        it = 304,
        ot = 305,
        at = 306,
        st = 307,
        ut = 1e3,
        ct = 1001,
        lt = 1002,
        ht = 1003,
        ft = 1004,
        pt = 1004,
        dt = 1005,
        mt = 1005,
        vt = 1006,
        yt = 1007,
        gt = 1007,
        bt = 1008,
        _t = 1008,
        wt = 1009,
        xt = 1010,
        Et = 1011,
        St = 1012,
        Tt = 1013,
        Mt = 1014,
        Ot = 1015,
        Pt = 1016,
        At = 1017,
        Lt = 1018,
        Rt = 1019,
        Dt = 1020,
        It = 1021,
        Ct = 1022,
        Nt = 1023,
        Ut = 1024,
        jt = 1025,
        kt = 1026,
        Ft = 1027,
        Bt = 1028,
        Gt = 33776,
        zt = 33777,
        Ht = 33778,
        Vt = 33779,
        Wt = 35840,
        Xt = 35841,
        qt = 35842,
        Yt = 35843,
        Kt = 36196,
        Zt = 37808,
        Qt = 37809,
        Jt = 37810,
        $t = 37811,
        te = 37812,
        ee = 37813,
        ne = 37814,
        re = 37815,
        ie = 37816,
        oe = 37817,
        ae = 37818,
        se = 37819,
        ue = 37820,
        ce = 37821,
        le = 0,
        he = 1,
        fe = 2,
        pe = 3e3,
        de = 3001,
        me = 3007,
        ve = 3002,
        ye = 3003,
        ge = 3004,
        be = 3005,
        _e = 3006,
        we = 3200,
        xe = 3201,
        Ee = 0,
        Se = 1,
        Te = 7680,
        Me = 519,
        Oe = 35044,
        Pe = 35048
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    }));
    var r = n(13),
        i = n(16),
        o = new s,
        a = new i.a;

    function s(t, e, n) {
        this.x = t || 0, this.y = e || 0, this.z = n || 0
    }
    Object.assign(s.prototype, {
        isVector3: !0,
        set: function(t, e, n) {
            return this.x = t, this.y = e, this.z = n, this
        },
        setScalar: function(t) {
            return this.x = t, this.y = t, this.z = t, this
        },
        setX: function(t) {
            return this.x = t, this
        },
        setY: function(t) {
            return this.y = t, this
        },
        setZ: function(t) {
            return this.z = t, this
        },
        setComponent: function(t, e) {
            switch (t) {
                case 0:
                    this.x = e;
                    break;
                case 1:
                    this.y = e;
                    break;
                case 2:
                    this.z = e;
                    break;
                default:
                    throw new Error("index is out of range: " + t)
            }
            return this
        },
        getComponent: function(t) {
            switch (t) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                case 2:
                    return this.z;
                default:
                    throw new Error("index is out of range: " + t)
            }
        },
        clone: function() {
            return new this.constructor(this.x, this.y, this.z)
        },
        copy: function(t) {
            return this.x = t.x, this.y = t.y, this.z = t.z, this
        },
        add: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(t, e)) : (this.x += t.x, this.y += t.y, this.z += t.z, this)
        },
        addScalar: function(t) {
            return this.x += t, this.y += t, this.z += t, this
        },
        addVectors: function(t, e) {
            return this.x = t.x + e.x, this.y = t.y + e.y, this.z = t.z + e.z, this
        },
        addScaledVector: function(t, e) {
            return this.x += t.x * e, this.y += t.y * e, this.z += t.z * e, this
        },
        sub: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(t, e)) : (this.x -= t.x, this.y -= t.y, this.z -= t.z, this)
        },
        subScalar: function(t) {
            return this.x -= t, this.y -= t, this.z -= t, this
        },
        subVectors: function(t, e) {
            return this.x = t.x - e.x, this.y = t.y - e.y, this.z = t.z - e.z, this
        },
        multiply: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), this.multiplyVectors(t, e)) : (this.x *= t.x, this.y *= t.y, this.z *= t.z, this)
        },
        multiplyScalar: function(t) {
            return this.x *= t, this.y *= t, this.z *= t, this
        },
        multiplyVectors: function(t, e) {
            return this.x = t.x * e.x, this.y = t.y * e.y, this.z = t.z * e.z, this
        },
        applyEuler: function(t) {
            return t && t.isEuler || console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."), this.applyQuaternion(a.setFromEuler(t))
        },
        applyAxisAngle: function(t, e) {
            return this.applyQuaternion(a.setFromAxisAngle(t, e))
        },
        applyMatrix3: function(t) {
            var e = this.x,
                n = this.y,
                r = this.z,
                i = t.elements;
            return this.x = i[0] * e + i[3] * n + i[6] * r, this.y = i[1] * e + i[4] * n + i[7] * r, this.z = i[2] * e + i[5] * n + i[8] * r, this
        },
        applyMatrix4: function(t) {
            var e = this.x,
                n = this.y,
                r = this.z,
                i = t.elements,
                o = 1 / (i[3] * e + i[7] * n + i[11] * r + i[15]);
            return this.x = (i[0] * e + i[4] * n + i[8] * r + i[12]) * o, this.y = (i[1] * e + i[5] * n + i[9] * r + i[13]) * o, this.z = (i[2] * e + i[6] * n + i[10] * r + i[14]) * o, this
        },
        applyQuaternion: function(t) {
            var e = this.x,
                n = this.y,
                r = this.z,
                i = t.x,
                o = t.y,
                a = t.z,
                s = t.w,
                u = s * e + o * r - a * n,
                c = s * n + a * e - i * r,
                l = s * r + i * n - o * e,
                h = -i * e - o * n - a * r;
            return this.x = u * s + h * -i + c * -a - l * -o, this.y = c * s + h * -o + l * -i - u * -a, this.z = l * s + h * -a + u * -o - c * -i, this
        },
        project: function(t) {
            return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)
        },
        unproject: function(t) {
            return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)
        },
        transformDirection: function(t) {
            var e = this.x,
                n = this.y,
                r = this.z,
                i = t.elements;
            return this.x = i[0] * e + i[4] * n + i[8] * r, this.y = i[1] * e + i[5] * n + i[9] * r, this.z = i[2] * e + i[6] * n + i[10] * r, this.normalize()
        },
        divide: function(t) {
            return this.x /= t.x, this.y /= t.y, this.z /= t.z, this
        },
        divideScalar: function(t) {
            return this.multiplyScalar(1 / t)
        },
        min: function(t) {
            return this.x = Math.min(this.x, t.x), this.y = Math.min(this.y, t.y), this.z = Math.min(this.z, t.z), this
        },
        max: function(t) {
            return this.x = Math.max(this.x, t.x), this.y = Math.max(this.y, t.y), this.z = Math.max(this.z, t.z), this
        },
        clamp: function(t, e) {
            return this.x = Math.max(t.x, Math.min(e.x, this.x)), this.y = Math.max(t.y, Math.min(e.y, this.y)), this.z = Math.max(t.z, Math.min(e.z, this.z)), this
        },
        clampScalar: function(t, e) {
            return this.x = Math.max(t, Math.min(e, this.x)), this.y = Math.max(t, Math.min(e, this.y)), this.z = Math.max(t, Math.min(e, this.z)), this
        },
        clampLength: function(t, e) {
            var n = this.length();
            return this.divideScalar(n || 1).multiplyScalar(Math.max(t, Math.min(e, n)))
        },
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
        },
        dot: function(t) {
            return this.x * t.x + this.y * t.y + this.z * t.z
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y + this.z * this.z
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
        },
        manhattanLength: function() {
            return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
        },
        normalize: function() {
            return this.divideScalar(this.length() || 1)
        },
        setLength: function(t) {
            return this.normalize().multiplyScalar(t)
        },
        lerp: function(t, e) {
            return this.x += (t.x - this.x) * e, this.y += (t.y - this.y) * e, this.z += (t.z - this.z) * e, this
        },
        lerpVectors: function(t, e, n) {
            return this.subVectors(e, t).multiplyScalar(n).add(t)
        },
        cross: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), this.crossVectors(t, e)) : this.crossVectors(this, t)
        },
        crossVectors: function(t, e) {
            var n = t.x,
                r = t.y,
                i = t.z,
                o = e.x,
                a = e.y,
                s = e.z;
            return this.x = r * s - i * a, this.y = i * o - n * s, this.z = n * a - r * o, this
        },
        projectOnVector: function(t) {
            var e = t.dot(this) / t.lengthSq();
            return this.copy(t).multiplyScalar(e)
        },
        projectOnPlane: function(t) {
            return o.copy(this).projectOnVector(t), this.sub(o)
        },
        reflect: function(t) {
            return this.sub(o.copy(t).multiplyScalar(2 * this.dot(t)))
        },
        angleTo: function(t) {
            var e = Math.sqrt(this.lengthSq() * t.lengthSq());
            0 === e && console.error("THREE.Vector3: angleTo() can't handle zero length vectors.");
            var n = this.dot(t) / e;
            return Math.acos(r.a.clamp(n, -1, 1))
        },
        distanceTo: function(t) {
            return Math.sqrt(this.distanceToSquared(t))
        },
        distanceToSquared: function(t) {
            var e = this.x - t.x,
                n = this.y - t.y,
                r = this.z - t.z;
            return e * e + n * n + r * r
        },
        manhattanDistanceTo: function(t) {
            return Math.abs(this.x - t.x) + Math.abs(this.y - t.y) + Math.abs(this.z - t.z)
        },
        setFromSpherical: function(t) {
            return this.setFromSphericalCoords(t.radius, t.phi, t.theta)
        },
        setFromSphericalCoords: function(t, e, n) {
            var r = Math.sin(e) * t;
            return this.x = r * Math.sin(n), this.y = Math.cos(e) * t, this.z = r * Math.cos(n), this
        },
        setFromCylindrical: function(t) {
            return this.setFromCylindricalCoords(t.radius, t.theta, t.y)
        },
        setFromCylindricalCoords: function(t, e, n) {
            return this.x = t * Math.sin(e), this.y = n, this.z = t * Math.cos(e), this
        },
        setFromMatrixPosition: function(t) {
            var e = t.elements;
            return this.x = e[12], this.y = e[13], this.z = e[14], this
        },
        setFromMatrixScale: function(t) {
            var e = this.setFromMatrixColumn(t, 0).length(),
                n = this.setFromMatrixColumn(t, 1).length(),
                r = this.setFromMatrixColumn(t, 2).length();
            return this.x = e, this.y = n, this.z = r, this
        },
        setFromMatrixColumn: function(t, e) {
            return this.fromArray(t.elements, 4 * e)
        },
        equals: function(t) {
            return t.x === this.x && t.y === this.y && t.z === this.z
        },
        fromArray: function(t, e) {
            return void 0 === e && (e = 0), this.x = t[e], this.y = t[e + 1], this.z = t[e + 2], this
        },
        toArray: function(t, e) {
            return void 0 === t && (t = []), void 0 === e && (e = 0), t[e] = this.x, t[e + 1] = this.y, t[e + 2] = this.z, t
        },
        fromBufferAttribute: function(t, e, n) {
            return void 0 !== n && console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."), this.x = t.getX(e), this.y = t.getY(e), this.z = t.getZ(e), this
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "E", (function() {
        return s
    })), n.d(e, "a", (function() {
        return u
    })), n.d(e, "R", (function() {
        return c
    })), n.d(e, "eb", (function() {
        return l
    })), n.d(e, "d", (function() {
        return h
    })), n.d(e, "sb", (function() {
        return f
    })), n.d(e, "F", (function() {
        return p
    })), n.d(e, "ub", (function() {
        return d
    })), n.d(e, "mb", (function() {
        return m
    })), n.d(e, "Nb", (function() {
        return v
    })), n.d(e, "G", (function() {
        return y
    })), n.d(e, "b", (function() {
        return g
    })), n.d(e, "e", (function() {
        return b
    })), n.d(e, "x", (function() {
        return _
    })), n.d(e, "n", (function() {
        return w
    })), n.d(e, "o", (function() {
        return i
    })), n.d(e, "c", (function() {
        return E
    })), n.d(e, "Rb", (function() {
        return S
    })), n.d(e, "kb", (function() {
        return T
    })), n.d(e, "Eb", (function() {
        return M
    })), n.d(e, "vb", (function() {
        return O
    })), n.d(e, "xb", (function() {
        return P
    })), n.d(e, "m", (function() {
        return x
    })), n.d(e, "wb", (function() {
        return L
    })), n.d(e, "qb", (function() {
        return R
    })), n.d(e, "S", (function() {
        return D
    })), n.d(e, "Gb", (function() {
        return A
    })), n.d(e, "Mb", (function() {
        return I
    })), n.d(e, "k", (function() {
        return C
    })), n.d(e, "Lb", (function() {
        return N
    })), n.d(e, "t", (function() {
        return U
    })), n.d(e, "fb", (function() {
        return j
    })), n.d(e, "w", (function() {
        return k
    })), n.d(e, "f", (function() {
        return F
    })), n.d(e, "W", (function() {
        return B
    })), n.d(e, "Sb", (function() {
        return G
    })), n.d(e, "U", (function() {
        return z
    })), n.d(e, "u", (function() {
        return H
    })), n.d(e, "gb", (function() {
        return V
    })), n.d(e, "y", (function() {
        return W
    })), n.d(e, "l", (function() {
        return X
    })), n.d(e, "r", (function() {
        return q
    })), n.d(e, "Qb", (function() {
        return Y
    })), n.d(e, "nb", (function() {
        return K
    })), n.d(e, "pb", (function() {
        return Z
    })), n.d(e, "ob", (function() {
        return Q
    })), n.d(e, "V", (function() {
        return J
    })), n.d(e, "Db", (function() {
        return $
    })), n.d(e, "i", (function() {
        return tt
    })), n.d(e, "j", (function() {
        return et
    })), n.d(e, "h", (function() {
        return nt
    })), n.d(e, "z", (function() {
        return rt
    })), n.d(e, "A", (function() {
        return it
    })), n.d(e, "M", (function() {
        return ot
    })), n.d(e, "N", (function() {
        return at
    })), n.d(e, "I", (function() {
        return st
    })), n.d(e, "L", (function() {
        return ut
    })), n.d(e, "Fb", (function() {
        return ct
    })), n.d(e, "K", (function() {
        return lt
    })), n.d(e, "H", (function() {
        return ht
    })), n.d(e, "zb", (function() {
        return ft
    })), n.d(e, "Jb", (function() {
        return pt
    })), n.d(e, "Ib", (function() {
        return dt
    })), n.d(e, "p", (function() {
        return mt
    })), n.d(e, "cb", (function() {
        return vt
    })), n.d(e, "Ob", (function() {
        return yt
    })), n.d(e, "db", (function() {
        return gt
    })), n.d(e, "rb", (function() {
        return bt
    })), n.d(e, "T", (function() {
        return _t
    })), n.d(e, "g", (function() {
        return wt
    })), n.d(e, "D", (function() {
        return xt
    })), n.d(e, "lb", (function() {
        return Et
    })), n.d(e, "O", (function() {
        return St
    })), n.d(e, "Kb", (function() {
        return Tt
    })), n.d(e, "Cb", (function() {
        return Mt
    })), n.d(e, "bb", (function() {
        return Ot
    })), n.d(e, "Bb", (function() {
        return Pt
    })), n.d(e, "Ab", (function() {
        return At
    })), n.d(e, "v", (function() {
        return Lt
    })), n.d(e, "Y", (function() {
        return Rt
    })), n.d(e, "Z", (function() {
        return Dt
    })), n.d(e, "X", (function() {
        return It
    })), n.d(e, "jb", (function() {
        return Ct
    })), n.d(e, "ib", (function() {
        return Nt
    })), n.d(e, "hb", (function() {
        return Ut
    })), n.d(e, "q", (function() {
        return jt
    })), n.d(e, "C", (function() {
        return kt
    })), n.d(e, "Q", (function() {
        return Ft
    })), n.d(e, "Pb", (function() {
        return Bt
    })), n.d(e, "tb", (function() {
        return Gt
    })), n.d(e, "B", (function() {
        return zt
    })), n.d(e, "P", (function() {
        return Ht
    })), n.d(e, "s", (function() {
        return Vt
    })), n.d(e, "yb", (function() {
        return Wt
    })), n.d(e, "Hb", (function() {
        return Xt
    })), n.d(e, "ab", (function() {
        return qt
    })), n.d(e, "J", (function() {
        return Yt
    }));
    var r, i, o = n(4),
        a = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        s = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        u = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        c = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        l = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        h = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        f = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        p = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        d = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        m = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        v = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        y = 3686400,
        g = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        b = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        _ = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        w = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a);
    ! function(t) {
        t[t.UNSUPPORTED = 1] = "UNSUPPORTED", t[t.WEBGL = 2] = "WEBGL", t[t.GENERIC = 3] = "GENERIC"
    }(i || (i = {}));
    var x, E = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        S = "Transition time",
        T = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        M = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        O = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        P = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(O);
    ! function(t) {
        t[t.CurrentView = 0] = "CurrentView", t[t.FullPanorama = 1] = "FullPanorama"
    }(x || (x = {}));
    var A, L = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(O),
        R = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        D = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a);
    ! function(t) {
        t[t.NONE = 0] = "NONE", t[t.RAYCAST = 1] = "RAYCAST"
    }(A || (A = {}));
    var I = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        C = 1e3,
        N = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        U = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        j = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        k = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        F = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        B = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        G = "Rotation speed",
        z = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        H = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        V = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        W = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        X = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        q = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Y = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        K = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Z = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Q = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        J = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        $ = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        tt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        et = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        nt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        rt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        it = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        ot = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        at = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        st = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        ut = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        ct = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        lt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        ht = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        ft = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        pt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        dt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        mt = 5,
        vt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        yt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        gt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        bt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        _t = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        wt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        xt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Et = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        St = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Tt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Mt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Ot = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Pt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        At = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Lt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Rt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Dt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        It = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Ct = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Nt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Ut = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        jt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        kt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Ft = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Bt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Gt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        zt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Ht = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Vt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Wt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Xt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        qt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a),
        Yt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(o.a)
}, function(t, e, n) {
    "use strict";
    var r, i = window.navigationStart || Date.now();
    ! function(t) {
        t[t.ERROR = 0] = "ERROR", t[t.WARN = 1] = "WARN", t[t.INFO = 2] = "INFO", t[t.DEBUG = 3] = "DEBUG", t[t.VERBOSE = 4] = "VERBOSE"
    }(r || (r = {}));
    var o = function() {
        function t(t) {
            var e;
            this.timers = {}, this.handlers = ((e = {})[r.VERBOSE] = console.log, e[r.DEBUG] = console.log, e[r.INFO] = console.info, e[r.WARN] = console.warn, e[r.ERROR] = console.error, e);
            var n = t.split(new RegExp("/|\\\\"));
            this.prefix = "[" + n[n.length - 1].replace(".js", "") + "]"
        }
        return t.prototype.message = function(e) {
            return t.level >= e && console ? (this.handlers[e] ? this.handlers[e] : console.log).bind(console, this.getPrefix()) : function() {}
        }, Object.defineProperty(t.prototype, "verbose", {
            get: function() {
                return this.message(r.VERBOSE)
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "debug", {
            get: function() {
                return this.message(r.DEBUG)
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "info", {
            get: function() {
                return this.message(r.INFO)
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "warn", {
            get: function() {
                return this.message(r.WARN)
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "error", {
            get: function() {
                return this.message(r.ERROR)
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.time = function(e) {
            t.level >= r.DEBUG && (this.timers[e] = Date.now())
        }, t.prototype.timeEnd = function(e) {
            if (t.level >= r.DEBUG) {
                var n = this.timers[e];
                if (!n) return;
                var i = (Date.now() - n) / 1e3;
                this.debug(e, i + "s")
            }
        }, t.prototype.getPrefix = function() {
            var t = (Date.now() - i) / 1e3 + "s";
            return this.prefix + " " + t
        }, t.level = r.INFO, t
    }();
    e.a = o
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return o
    }));
    var r = n(3),
        i = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        o = function() {
            function t() {
                this.bindings = [], this.log = new r.a("module")
            }
            return t.prototype.init = function(t, e) {
                return Promise.resolve()
            }, t.prototype.onUpdate = function(t) {}, t.prototype.dispose = function(t) {
                var e, n;
                try {
                    for (var r = i(this.bindings), o = r.next(); !o.done; o = r.next()) {
                        o.value.cancel()
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        o && !o.done && (n = r.return) && n.call(r)
                    } finally {
                        if (e) throw e.error
                    }
                }
                this.bindings = []
            }, t
        }()
}, function(t, e, n) {
    "use strict";

    function r(t, e) {
        this.x = t || 0, this.y = e || 0
    }
    n.d(e, "a", (function() {
        return r
    })), Object.defineProperties(r.prototype, {
        width: {
            get: function() {
                return this.x
            },
            set: function(t) {
                this.x = t
            }
        },
        height: {
            get: function() {
                return this.y
            },
            set: function(t) {
                this.y = t
            }
        }
    }), Object.assign(r.prototype, {
        isVector2: !0,
        set: function(t, e) {
            return this.x = t, this.y = e, this
        },
        setScalar: function(t) {
            return this.x = t, this.y = t, this
        },
        setX: function(t) {
            return this.x = t, this
        },
        setY: function(t) {
            return this.y = t, this
        },
        setComponent: function(t, e) {
            switch (t) {
                case 0:
                    this.x = e;
                    break;
                case 1:
                    this.y = e;
                    break;
                default:
                    throw new Error("index is out of range: " + t)
            }
            return this
        },
        getComponent: function(t) {
            switch (t) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                default:
                    throw new Error("index is out of range: " + t)
            }
        },
        clone: function() {
            return new this.constructor(this.x, this.y)
        },
        copy: function(t) {
            return this.x = t.x, this.y = t.y, this
        },
        add: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(t, e)) : (this.x += t.x, this.y += t.y, this)
        },
        addScalar: function(t) {
            return this.x += t, this.y += t, this
        },
        addVectors: function(t, e) {
            return this.x = t.x + e.x, this.y = t.y + e.y, this
        },
        addScaledVector: function(t, e) {
            return this.x += t.x * e, this.y += t.y * e, this
        },
        sub: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(t, e)) : (this.x -= t.x, this.y -= t.y, this)
        },
        subScalar: function(t) {
            return this.x -= t, this.y -= t, this
        },
        subVectors: function(t, e) {
            return this.x = t.x - e.x, this.y = t.y - e.y, this
        },
        multiply: function(t) {
            return this.x *= t.x, this.y *= t.y, this
        },
        multiplyScalar: function(t) {
            return this.x *= t, this.y *= t, this
        },
        divide: function(t) {
            return this.x /= t.x, this.y /= t.y, this
        },
        divideScalar: function(t) {
            return this.multiplyScalar(1 / t)
        },
        applyMatrix3: function(t) {
            var e = this.x,
                n = this.y,
                r = t.elements;
            return this.x = r[0] * e + r[3] * n + r[6], this.y = r[1] * e + r[4] * n + r[7], this
        },
        min: function(t) {
            return this.x = Math.min(this.x, t.x), this.y = Math.min(this.y, t.y), this
        },
        max: function(t) {
            return this.x = Math.max(this.x, t.x), this.y = Math.max(this.y, t.y), this
        },
        clamp: function(t, e) {
            return this.x = Math.max(t.x, Math.min(e.x, this.x)), this.y = Math.max(t.y, Math.min(e.y, this.y)), this
        },
        clampScalar: function(t, e) {
            return this.x = Math.max(t, Math.min(e, this.x)), this.y = Math.max(t, Math.min(e, this.y)), this
        },
        clampLength: function(t, e) {
            var n = this.length();
            return this.divideScalar(n || 1).multiplyScalar(Math.max(t, Math.min(e, n)))
        },
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this
        },
        dot: function(t) {
            return this.x * t.x + this.y * t.y
        },
        cross: function(t) {
            return this.x * t.y - this.y * t.x
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y)
        },
        manhattanLength: function() {
            return Math.abs(this.x) + Math.abs(this.y)
        },
        normalize: function() {
            return this.divideScalar(this.length() || 1)
        },
        angle: function() {
            var t = Math.atan2(this.y, this.x);
            return t < 0 && (t += 2 * Math.PI), t
        },
        distanceTo: function(t) {
            return Math.sqrt(this.distanceToSquared(t))
        },
        distanceToSquared: function(t) {
            var e = this.x - t.x,
                n = this.y - t.y;
            return e * e + n * n
        },
        manhattanDistanceTo: function(t) {
            return Math.abs(this.x - t.x) + Math.abs(this.y - t.y)
        },
        setLength: function(t) {
            return this.normalize().multiplyScalar(t)
        },
        lerp: function(t, e) {
            return this.x += (t.x - this.x) * e, this.y += (t.y - this.y) * e, this
        },
        lerpVectors: function(t, e, n) {
            return this.subVectors(e, t).multiplyScalar(n).add(t)
        },
        equals: function(t) {
            return t.x === this.x && t.y === this.y
        },
        fromArray: function(t, e) {
            return void 0 === e && (e = 0), this.x = t[e], this.y = t[e + 1], this
        },
        toArray: function(t, e) {
            return void 0 === t && (t = []), void 0 === e && (e = 0), t[e] = this.x, t[e + 1] = this.y, t
        },
        fromBufferAttribute: function(t, e, n) {
            return void 0 !== n && console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."), this.x = t.getX(e), this.y = t.getY(e), this
        },
        rotateAround: function(t, e) {
            var n = Math.cos(e),
                r = Math.sin(e),
                i = this.x - t.x,
                o = this.y - t.y;
            return this.x = i * n - o * r + t.x, this.y = i * r + o * n + t.y, this
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "A", (function() {
        return a
    })), n.d(e, "o", (function() {
        return s
    })), n.d(e, "r", (function() {
        return c
    })), n.d(e, "l", (function() {
        return l
    })), n.d(e, "n", (function() {
        return h
    })), n.d(e, "q", (function() {
        return f
    })), n.d(e, "k", (function() {
        return p
    })), n.d(e, "i", (function() {
        return d
    })), n.d(e, "h", (function() {
        return m
    })), n.d(e, "a", (function() {
        return v
    })), n.d(e, "c", (function() {
        return y
    })), n.d(e, "p", (function() {
        return g
    })), n.d(e, "g", (function() {
        return b
    })), n.d(e, "z", (function() {
        return _
    })), n.d(e, "y", (function() {
        return w
    })), n.d(e, "e", (function() {
        return x
    })), n.d(e, "w", (function() {
        return E
    })), n.d(e, "s", (function() {
        return S
    })), n.d(e, "b", (function() {
        return T
    })), n.d(e, "t", (function() {
        return M
    })), n.d(e, "v", (function() {
        return O
    })), n.d(e, "m", (function() {
        return P
    })), n.d(e, "j", (function() {
        return A
    })), n.d(e, "x", (function() {
        return L
    })), n.d(e, "u", (function() {
        return R
    })), n.d(e, "d", (function() {
        return D
    })), n.d(e, "f", (function() {
        return I
    }));
    var r = n(3),
        i = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        o = new r.a("util-browser"),
        a = function() {
            var t = window.innerWidth / window.innerHeight;
            return isFinite(t) ? t : 1
        },
        s = function() {
            var t = navigator.userAgent || navigator.vendor,
                e = new RegExp("(android|bbd+|meego).+mobile|android|avantgo|bada/|blackberry|blazer|compal|elaine|fennec|\n    hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|\n    palm( os)?|phone|p(ixi|re)/|plucker|pocket|psp|series(4|6)0|symbian|treo|up.(browser|link)|vodafone|\n    wap|windows ce|xda|xiino", "i"),
                n = new RegExp("1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|\n    amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|\n    br(e|v)w|bumb|bw-(n|u)|c55/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|\n    devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|\n    g560|gene|gf-5|g-mo|go(.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|\n    a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|\n    jemu|jigs|kddi|keji|kgt( |/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|/(k|l|u)|50|54|-[a-w])|libw|lynx|\n    m1-w|m3ga|m50/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|\n    zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|\n    nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|\n    po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55/|\n    sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|\n    sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|\n    tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|\n    vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|\n    zeto|zte-", "i");
            return e.test(t) || n.test(t.substr(0, 4)) || c()
        },
        u = function(t, e) {
            var n = window.navigator.userAgent.match(t);
            return n = n ? n[1].split(e) : [], {
                major: parseInt(n[0], 10) || 0,
                minor: parseInt(n[1], 10) || 0,
                patch: parseInt(n[2], 10) || 0
            }
        },
        c = function() {
            var t = window.navigator.userAgent;
            return /iPad/.test(t) || h() && navigator.maxTouchPoints > 1
        },
        l = function() {
            var t = window.navigator.userAgent;
            return /iPod|iPhone|iPad/.test(t)
        },
        h = function() {
            var t = window.navigator.platform;
            return /MAC/.test(t.toUpperCase())
        },
        f = function() {
            var t = window.navigator.platform;
            return /WIN/.test(t.toUpperCase())
        },
        p = function() {
            var t = window.navigator.userAgent;
            return /Trident\//.test(t)
        },
        d = function() {
            return -1 !== window.navigator.userAgent.indexOf("Android")
        },
        m = function() {
            if (!l()) throw new Error("Not an iOS device");
            return u(/((?:\d+\_?){1,3}) like Mac OS/, "_")
        },
        v = function() {
            if (!d()) throw new Error("Not an Android device");
            return u(/Android ((?:\d+\.?){1,3})/, ".")
        },
        y = function() {
            return "ontouchstart" in window
        },
        g = function() {
            return "share" in navigator && (s() || c())
        },
        b = function() {
            return window.parent !== window
        },
        _ = function(t, e) {
            var n = new RegExp("[#&?]" + t + "=([^#&?]*)").exec(window.location.href);
            if (!n) return e;
            var r = n[1];
            return "boolean" == typeof e ? "true" === r || "1" === r : "number" == typeof e ? parseFloat(r) : decodeURIComponent(r)
        },
        w = function(t, e) {
            var n = new RegExp(t + "=([^;]+)|$").exec(document.cookie);
            if (!n) return e;
            var r = n[1];
            return "boolean" == typeof e ? "true" === r || "1" === r : "number" == typeof e ? parseFloat(r) : r
        },
        x = function(t, e) {
            if (!("localStorage" in window)) return e;
            var n;
            try {
                n = window.localStorage.getItem(t)
            } catch (t) {
                return o.error(t), e
            }
            return null === n ? e : "boolean" == typeof e ? "true" === n : "number" == typeof e ? parseFloat(n) : n
        },
        E = function(t, e) {
            try {
                window.localStorage.setItem(t, e)
            } catch (t) {
                o.error(t)
            }
        },
        S = function(t) {
            var e = /[#&?]([^=]+)=([^#&?]+)/g;
            t = t || window.location.href;
            for (var n, r = {}; null !== (n = e.exec(t));) r[n[1]] = decodeURIComponent(n[2]);
            return r
        },
        T = function() {
            return window.location.search.substr(1).split("&")
        },
        M = function(t) {
            var e = Object.keys(t).map((function(e) {
                return e + "=" + t[e]
            })).join("&");
            window.location.search = "?" + e
        },
        O = function() {
            var t = window.URL || window.webkitURL,
                e = document.createElement("a");
            return document.body.appendChild(e), e.style.display = "none",
                function(n, r) {
                    var i = t.createObjectURL(n);
                    e.href = i, e.download = r, e.click(), t.revokeObjectURL(i)
                }
        }(),
        P = function() {
            return a() > 1
        },
        A = function() {
            return !!(document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement)
        },
        L = function() {
            return !!(document.fullscreenEnabled || document.mozFullScreenEnabled || document.webkitFullscreenEnabled || document.msFullscreenEnabled)
        },
        R = function(t) {
            t.requestFullscreen ? t.requestFullscreen() : t.mozRequestFullScreen ? t.mozRequestFullScreen() : t.webkitRequestFullscreen ? t.webkitRequestFullscreen() : t.msRequestFullscreen && t.msRequestFullscreen()
        },
        D = function() {
            document.exitFullscreen ? document.exitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen ? document.webkitExitFullscreen() : document.msExitFullscreen && document.msExitFullscreen()
        },
        I = function() {
            return function(t) {
                var e = {
                        language: "en",
                        region: void 0,
                        script: void 0,
                        ext: void 0
                    },
                    n = new RegExp([/^([a-z]{2,3})/, /(?:[_-]([ut]{1}[_-][a-z\-\_]+))?/, /(?:[_-]([a-z]{4}))?/, /(?:[_-]([a-z]{2}))?$/].map((function(t) {
                        return t.source
                    })).join(""), "i").exec(t);
                if (n) {
                    var r = i(n, 5),
                        o = r[1],
                        a = r[2],
                        s = r[3],
                        u = r[4];
                    Object.assign(e, {
                        language: o,
                        ext: a,
                        script: s,
                        region: u
                    })
                }
                return e
            }(navigator.language).language
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return h
    }));
    var r = n(1),
        i = new r.a,
        o = new h,
        a = new r.a(0, 0, 0),
        s = new r.a(1, 1, 1),
        u = new r.a,
        c = new r.a,
        l = new r.a;

    function h() {
        this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], arguments.length > 0 && console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")
    }
    Object.assign(h.prototype, {
        isMatrix4: !0,
        set: function(t, e, n, r, i, o, a, s, u, c, l, h, f, p, d, m) {
            var v = this.elements;
            return v[0] = t, v[4] = e, v[8] = n, v[12] = r, v[1] = i, v[5] = o, v[9] = a, v[13] = s, v[2] = u, v[6] = c, v[10] = l, v[14] = h, v[3] = f, v[7] = p, v[11] = d, v[15] = m, this
        },
        identity: function() {
            return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
        },
        clone: function() {
            return (new h).fromArray(this.elements)
        },
        copy: function(t) {
            var e = this.elements,
                n = t.elements;
            return e[0] = n[0], e[1] = n[1], e[2] = n[2], e[3] = n[3], e[4] = n[4], e[5] = n[5], e[6] = n[6], e[7] = n[7], e[8] = n[8], e[9] = n[9], e[10] = n[10], e[11] = n[11], e[12] = n[12], e[13] = n[13], e[14] = n[14], e[15] = n[15], this
        },
        copyPosition: function(t) {
            var e = this.elements,
                n = t.elements;
            return e[12] = n[12], e[13] = n[13], e[14] = n[14], this
        },
        extractBasis: function(t, e, n) {
            return t.setFromMatrixColumn(this, 0), e.setFromMatrixColumn(this, 1), n.setFromMatrixColumn(this, 2), this
        },
        makeBasis: function(t, e, n) {
            return this.set(t.x, e.x, n.x, 0, t.y, e.y, n.y, 0, t.z, e.z, n.z, 0, 0, 0, 0, 1), this
        },
        extractRotation: function(t) {
            var e = this.elements,
                n = t.elements,
                r = 1 / i.setFromMatrixColumn(t, 0).length(),
                o = 1 / i.setFromMatrixColumn(t, 1).length(),
                a = 1 / i.setFromMatrixColumn(t, 2).length();
            return e[0] = n[0] * r, e[1] = n[1] * r, e[2] = n[2] * r, e[3] = 0, e[4] = n[4] * o, e[5] = n[5] * o, e[6] = n[6] * o, e[7] = 0, e[8] = n[8] * a, e[9] = n[9] * a, e[10] = n[10] * a, e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, this
        },
        makeRotationFromEuler: function(t) {
            t && t.isEuler || console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
            var e = this.elements,
                n = t.x,
                r = t.y,
                i = t.z,
                o = Math.cos(n),
                a = Math.sin(n),
                s = Math.cos(r),
                u = Math.sin(r),
                c = Math.cos(i),
                l = Math.sin(i);
            if ("XYZ" === t.order) {
                var h = o * c,
                    f = o * l,
                    p = a * c,
                    d = a * l;
                e[0] = s * c, e[4] = -s * l, e[8] = u, e[1] = f + p * u, e[5] = h - d * u, e[9] = -a * s, e[2] = d - h * u, e[6] = p + f * u, e[10] = o * s
            } else if ("YXZ" === t.order) {
                var m = s * c,
                    v = s * l,
                    y = u * c,
                    g = u * l;
                e[0] = m + g * a, e[4] = y * a - v, e[8] = o * u, e[1] = o * l, e[5] = o * c, e[9] = -a, e[2] = v * a - y, e[6] = g + m * a, e[10] = o * s
            } else if ("ZXY" === t.order) {
                m = s * c, v = s * l, y = u * c, g = u * l;
                e[0] = m - g * a, e[4] = -o * l, e[8] = y + v * a, e[1] = v + y * a, e[5] = o * c, e[9] = g - m * a, e[2] = -o * u, e[6] = a, e[10] = o * s
            } else if ("ZYX" === t.order) {
                h = o * c, f = o * l, p = a * c, d = a * l;
                e[0] = s * c, e[4] = p * u - f, e[8] = h * u + d, e[1] = s * l, e[5] = d * u + h, e[9] = f * u - p, e[2] = -u, e[6] = a * s, e[10] = o * s
            } else if ("YZX" === t.order) {
                var b = o * s,
                    _ = o * u,
                    w = a * s,
                    x = a * u;
                e[0] = s * c, e[4] = x - b * l, e[8] = w * l + _, e[1] = l, e[5] = o * c, e[9] = -a * c, e[2] = -u * c, e[6] = _ * l + w, e[10] = b - x * l
            } else if ("XZY" === t.order) {
                b = o * s, _ = o * u, w = a * s, x = a * u;
                e[0] = s * c, e[4] = -l, e[8] = u * c, e[1] = b * l + x, e[5] = o * c, e[9] = _ * l - w, e[2] = w * l - _, e[6] = a * c, e[10] = x * l + b
            }
            return e[3] = 0, e[7] = 0, e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, this
        },
        makeRotationFromQuaternion: function(t) {
            return this.compose(a, t, s)
        },
        lookAt: function(t, e, n) {
            var r = this.elements;
            return l.subVectors(t, e), 0 === l.lengthSq() && (l.z = 1), l.normalize(), u.crossVectors(n, l), 0 === u.lengthSq() && (1 === Math.abs(n.z) ? l.x += 1e-4 : l.z += 1e-4, l.normalize(), u.crossVectors(n, l)), u.normalize(), c.crossVectors(l, u), r[0] = u.x, r[4] = c.x, r[8] = l.x, r[1] = u.y, r[5] = c.y, r[9] = l.y, r[2] = u.z, r[6] = c.z, r[10] = l.z, this
        },
        multiply: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."), this.multiplyMatrices(t, e)) : this.multiplyMatrices(this, t)
        },
        premultiply: function(t) {
            return this.multiplyMatrices(t, this)
        },
        multiplyMatrices: function(t, e) {
            var n = t.elements,
                r = e.elements,
                i = this.elements,
                o = n[0],
                a = n[4],
                s = n[8],
                u = n[12],
                c = n[1],
                l = n[5],
                h = n[9],
                f = n[13],
                p = n[2],
                d = n[6],
                m = n[10],
                v = n[14],
                y = n[3],
                g = n[7],
                b = n[11],
                _ = n[15],
                w = r[0],
                x = r[4],
                E = r[8],
                S = r[12],
                T = r[1],
                M = r[5],
                O = r[9],
                P = r[13],
                A = r[2],
                L = r[6],
                R = r[10],
                D = r[14],
                I = r[3],
                C = r[7],
                N = r[11],
                U = r[15];
            return i[0] = o * w + a * T + s * A + u * I, i[4] = o * x + a * M + s * L + u * C, i[8] = o * E + a * O + s * R + u * N, i[12] = o * S + a * P + s * D + u * U, i[1] = c * w + l * T + h * A + f * I, i[5] = c * x + l * M + h * L + f * C, i[9] = c * E + l * O + h * R + f * N, i[13] = c * S + l * P + h * D + f * U, i[2] = p * w + d * T + m * A + v * I, i[6] = p * x + d * M + m * L + v * C, i[10] = p * E + d * O + m * R + v * N, i[14] = p * S + d * P + m * D + v * U, i[3] = y * w + g * T + b * A + _ * I, i[7] = y * x + g * M + b * L + _ * C, i[11] = y * E + g * O + b * R + _ * N, i[15] = y * S + g * P + b * D + _ * U, this
        },
        multiplyScalar: function(t) {
            var e = this.elements;
            return e[0] *= t, e[4] *= t, e[8] *= t, e[12] *= t, e[1] *= t, e[5] *= t, e[9] *= t, e[13] *= t, e[2] *= t, e[6] *= t, e[10] *= t, e[14] *= t, e[3] *= t, e[7] *= t, e[11] *= t, e[15] *= t, this
        },
        applyToBufferAttribute: function(t) {
            for (var e = 0, n = t.count; e < n; e++) i.x = t.getX(e), i.y = t.getY(e), i.z = t.getZ(e), i.applyMatrix4(this), t.setXYZ(e, i.x, i.y, i.z);
            return t
        },
        determinant: function() {
            var t = this.elements,
                e = t[0],
                n = t[4],
                r = t[8],
                i = t[12],
                o = t[1],
                a = t[5],
                s = t[9],
                u = t[13],
                c = t[2],
                l = t[6],
                h = t[10],
                f = t[14];
            return t[3] * (+i * s * l - r * u * l - i * a * h + n * u * h + r * a * f - n * s * f) + t[7] * (+e * s * f - e * u * h + i * o * h - r * o * f + r * u * c - i * s * c) + t[11] * (+e * u * l - e * a * f - i * o * l + n * o * f + i * a * c - n * u * c) + t[15] * (-r * a * c - e * s * l + e * a * h + r * o * l - n * o * h + n * s * c)
        },
        transpose: function() {
            var t, e = this.elements;
            return t = e[1], e[1] = e[4], e[4] = t, t = e[2], e[2] = e[8], e[8] = t, t = e[6], e[6] = e[9], e[9] = t, t = e[3], e[3] = e[12], e[12] = t, t = e[7], e[7] = e[13], e[13] = t, t = e[11], e[11] = e[14], e[14] = t, this
        },
        setPosition: function(t, e, n) {
            var r = this.elements;
            return t.isVector3 ? (r[12] = t.x, r[13] = t.y, r[14] = t.z) : (r[12] = t, r[13] = e, r[14] = n), this
        },
        getInverse: function(t, e) {
            var n = this.elements,
                r = t.elements,
                i = r[0],
                o = r[1],
                a = r[2],
                s = r[3],
                u = r[4],
                c = r[5],
                l = r[6],
                h = r[7],
                f = r[8],
                p = r[9],
                d = r[10],
                m = r[11],
                v = r[12],
                y = r[13],
                g = r[14],
                b = r[15],
                _ = p * g * h - y * d * h + y * l * m - c * g * m - p * l * b + c * d * b,
                w = v * d * h - f * g * h - v * l * m + u * g * m + f * l * b - u * d * b,
                x = f * y * h - v * p * h + v * c * m - u * y * m - f * c * b + u * p * b,
                E = v * p * l - f * y * l - v * c * d + u * y * d + f * c * g - u * p * g,
                S = i * _ + o * w + a * x + s * E;
            if (0 === S) {
                var T = "THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";
                if (!0 === e) throw new Error(T);
                return console.warn(T), this.identity()
            }
            var M = 1 / S;
            return n[0] = _ * M, n[1] = (y * d * s - p * g * s - y * a * m + o * g * m + p * a * b - o * d * b) * M, n[2] = (c * g * s - y * l * s + y * a * h - o * g * h - c * a * b + o * l * b) * M, n[3] = (p * l * s - c * d * s - p * a * h + o * d * h + c * a * m - o * l * m) * M, n[4] = w * M, n[5] = (f * g * s - v * d * s + v * a * m - i * g * m - f * a * b + i * d * b) * M, n[6] = (v * l * s - u * g * s - v * a * h + i * g * h + u * a * b - i * l * b) * M, n[7] = (u * d * s - f * l * s + f * a * h - i * d * h - u * a * m + i * l * m) * M, n[8] = x * M, n[9] = (v * p * s - f * y * s - v * o * m + i * y * m + f * o * b - i * p * b) * M, n[10] = (u * y * s - v * c * s + v * o * h - i * y * h - u * o * b + i * c * b) * M, n[11] = (f * c * s - u * p * s - f * o * h + i * p * h + u * o * m - i * c * m) * M, n[12] = E * M, n[13] = (f * y * a - v * p * a + v * o * d - i * y * d - f * o * g + i * p * g) * M, n[14] = (v * c * a - u * y * a - v * o * l + i * y * l + u * o * g - i * c * g) * M, n[15] = (u * p * a - f * c * a + f * o * l - i * p * l - u * o * d + i * c * d) * M, this
        },
        scale: function(t) {
            var e = this.elements,
                n = t.x,
                r = t.y,
                i = t.z;
            return e[0] *= n, e[4] *= r, e[8] *= i, e[1] *= n, e[5] *= r, e[9] *= i, e[2] *= n, e[6] *= r, e[10] *= i, e[3] *= n, e[7] *= r, e[11] *= i, this
        },
        getMaxScaleOnAxis: function() {
            var t = this.elements,
                e = t[0] * t[0] + t[1] * t[1] + t[2] * t[2],
                n = t[4] * t[4] + t[5] * t[5] + t[6] * t[6],
                r = t[8] * t[8] + t[9] * t[9] + t[10] * t[10];
            return Math.sqrt(Math.max(e, n, r))
        },
        makeTranslation: function(t, e, n) {
            return this.set(1, 0, 0, t, 0, 1, 0, e, 0, 0, 1, n, 0, 0, 0, 1), this
        },
        makeRotationX: function(t) {
            var e = Math.cos(t),
                n = Math.sin(t);
            return this.set(1, 0, 0, 0, 0, e, -n, 0, 0, n, e, 0, 0, 0, 0, 1), this
        },
        makeRotationY: function(t) {
            var e = Math.cos(t),
                n = Math.sin(t);
            return this.set(e, 0, n, 0, 0, 1, 0, 0, -n, 0, e, 0, 0, 0, 0, 1), this
        },
        makeRotationZ: function(t) {
            var e = Math.cos(t),
                n = Math.sin(t);
            return this.set(e, -n, 0, 0, n, e, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
        },
        makeRotationAxis: function(t, e) {
            var n = Math.cos(e),
                r = Math.sin(e),
                i = 1 - n,
                o = t.x,
                a = t.y,
                s = t.z,
                u = i * o,
                c = i * a;
            return this.set(u * o + n, u * a - r * s, u * s + r * a, 0, u * a + r * s, c * a + n, c * s - r * o, 0, u * s - r * a, c * s + r * o, i * s * s + n, 0, 0, 0, 0, 1), this
        },
        makeScale: function(t, e, n) {
            return this.set(t, 0, 0, 0, 0, e, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this
        },
        makeShear: function(t, e, n) {
            return this.set(1, e, n, 0, t, 1, n, 0, t, e, 1, 0, 0, 0, 0, 1), this
        },
        compose: function(t, e, n) {
            var r = this.elements,
                i = e._x,
                o = e._y,
                a = e._z,
                s = e._w,
                u = i + i,
                c = o + o,
                l = a + a,
                h = i * u,
                f = i * c,
                p = i * l,
                d = o * c,
                m = o * l,
                v = a * l,
                y = s * u,
                g = s * c,
                b = s * l,
                _ = n.x,
                w = n.y,
                x = n.z;
            return r[0] = (1 - (d + v)) * _, r[1] = (f + b) * _, r[2] = (p - g) * _, r[3] = 0, r[4] = (f - b) * w, r[5] = (1 - (h + v)) * w, r[6] = (m + y) * w, r[7] = 0, r[8] = (p + g) * x, r[9] = (m - y) * x, r[10] = (1 - (h + d)) * x, r[11] = 0, r[12] = t.x, r[13] = t.y, r[14] = t.z, r[15] = 1, this
        },
        decompose: function(t, e, n) {
            var r = this.elements,
                a = i.set(r[0], r[1], r[2]).length(),
                s = i.set(r[4], r[5], r[6]).length(),
                u = i.set(r[8], r[9], r[10]).length();
            this.determinant() < 0 && (a = -a), t.x = r[12], t.y = r[13], t.z = r[14], o.copy(this);
            var c = 1 / a,
                l = 1 / s,
                h = 1 / u;
            return o.elements[0] *= c, o.elements[1] *= c, o.elements[2] *= c, o.elements[4] *= l, o.elements[5] *= l, o.elements[6] *= l, o.elements[8] *= h, o.elements[9] *= h, o.elements[10] *= h, e.setFromRotationMatrix(o), n.x = a, n.y = s, n.z = u, this
        },
        makePerspective: function(t, e, n, r, i, o) {
            void 0 === o && console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
            var a = this.elements,
                s = 2 * i / (e - t),
                u = 2 * i / (n - r),
                c = (e + t) / (e - t),
                l = (n + r) / (n - r),
                h = -(o + i) / (o - i),
                f = -2 * o * i / (o - i);
            return a[0] = s, a[4] = 0, a[8] = c, a[12] = 0, a[1] = 0, a[5] = u, a[9] = l, a[13] = 0, a[2] = 0, a[6] = 0, a[10] = h, a[14] = f, a[3] = 0, a[7] = 0, a[11] = -1, a[15] = 0, this
        },
        makeOrthographic: function(t, e, n, r, i, o) {
            var a = this.elements,
                s = 1 / (e - t),
                u = 1 / (n - r),
                c = 1 / (o - i),
                l = (e + t) * s,
                h = (n + r) * u,
                f = (o + i) * c;
            return a[0] = 2 * s, a[4] = 0, a[8] = 0, a[12] = -l, a[1] = 0, a[5] = 2 * u, a[9] = 0, a[13] = -h, a[2] = 0, a[6] = 0, a[10] = -2 * c, a[14] = -f, a[3] = 0, a[7] = 0, a[11] = 0, a[15] = 1, this
        },
        equals: function(t) {
            for (var e = this.elements, n = t.elements, r = 0; r < 16; r++)
                if (e[r] !== n[r]) return !1;
            return !0
        },
        fromArray: function(t, e) {
            void 0 === e && (e = 0);
            for (var n = 0; n < 16; n++) this.elements[n] = t[n + e];
            return this
        },
        toArray: function(t, e) {
            void 0 === t && (t = []), void 0 === e && (e = 0);
            var n = this.elements;
            return t[e] = n[0], t[e + 1] = n[1], t[e + 2] = n[2], t[e + 3] = n[3], t[e + 4] = n[4], t[e + 5] = n[5], t[e + 6] = n[6], t[e + 7] = n[7], t[e + 8] = n[8], t[e + 9] = n[9], t[e + 10] = n[10], t[e + 11] = n[11], t[e + 12] = n[12], t[e + 13] = n[13], t[e + 14] = n[14], t[e + 15] = n[15], t
        }
    })
}, function(t, e, n) {
    "use strict";
    var r, i, o, a, s, u, c;
    n.d(e, "a", (function() {
            return c
        })), n.d(e, "b", (function() {
            return l
        })), n.d(e, "e", (function() {
            return h
        })), n.d(e, "d", (function() {
            return f
        })), n.d(e, "c", (function() {
            return p
        })),
        function(t) {
            t[t.CLOSED = 0] = "CLOSED", t[t.IDLE = 1] = "IDLE", t[t.EDITING = 2] = "EDITING", t[t.CREATING = 3] = "CREATING", t[t.POINT_PLACED = 4] = "POINT_PLACED", t[t.CREATING_NEXT_POINT = 5] = "CREATING_NEXT_POINT", t[t.CONFIRMING_POINT = 6] = "CONFIRMING_POINT"
        }(c || (c = {}));
    var l = {
            mobile: (r = {}, r[c.POINT_PLACED] = !0, r[c.EDITING] = !0, r),
            desktop: (i = {}, i[c.CREATING] = !0, i[c.CREATING_NEXT_POINT] = !0, i[c.EDITING] = !0, i)
        },
        h = {
            mobile: (o = {}, o[c.CREATING_NEXT_POINT] = !0, o[c.POINT_PLACED] = !0, o[c.EDITING] = !0, o),
            desktop: (a = {}, a[c.CREATING] = !0, a[c.CREATING_NEXT_POINT] = !0, a[c.EDITING] = !0, a)
        },
        f = ((s = {})[c.IDLE] = !0, s[c.EDITING] = !0, s),
        p = ((u = {})[c.IDLE] = !0, u[c.EDITING] = !0, u)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    }));
    var r = function() {
        function t() {
            this.msgId = -1
        }
        return t.prototype.setID = function(t) {
            if (-1 !== this.msgId) throw Error("Message.msgId can only be set once.");
            this.msgId = t
        }, t
    }()
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return o
    })), n.d(e, "a", (function() {
        return r
    }));
    var r, i = n(1),
        o = function() {
            function t() {}
            return t.UP = new i.a(0, 1, 0), t.DOWN = new i.a(0, -1, 0), t.LEFT = new i.a(-1, 0, 0), t.RIGHT = new i.a(1, 0, 0), t.FORWARD = new i.a(0, 0, -1), t.BACK = new i.a(0, 0, 1), t.ZERO = new i.a(0, 0, 0), t.UNIT = new i.a(1, 1, 1), t.HORIZONTAL_PLANE = new i.a(1, 0, 1), t
        }();
    ! function(t) {
        t.NONE = "NONE", t.UP = "UP", t.DOWN = "DOWN", t.LEFT = "LEFT", t.RIGHT = "RIGHT", t.FORWARD = "FORWARD", t.BACK = "BACK", t.ZERO = "ZERO", t.UNIT = "UNIT", t.HORIZONTAL_PLANE = "HORIZONTAL_PLANE"
    }(r || (r = {}))
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r = n(18),
        i = n(5),
        o = n(42),
        a = {
            common: {
                diffuse: {
                    value: new r.a(15658734)
                },
                opacity: {
                    value: 1
                },
                map: {
                    value: null
                },
                uvTransform: {
                    value: new o.a
                },
                alphaMap: {
                    value: null
                }
            },
            specularmap: {
                specularMap: {
                    value: null
                }
            },
            envmap: {
                envMap: {
                    value: null
                },
                flipEnvMap: {
                    value: -1
                },
                reflectivity: {
                    value: 1
                },
                refractionRatio: {
                    value: .98
                },
                maxMipLevel: {
                    value: 0
                }
            },
            aomap: {
                aoMap: {
                    value: null
                },
                aoMapIntensity: {
                    value: 1
                }
            },
            lightmap: {
                lightMap: {
                    value: null
                },
                lightMapIntensity: {
                    value: 1
                }
            },
            emissivemap: {
                emissiveMap: {
                    value: null
                }
            },
            bumpmap: {
                bumpMap: {
                    value: null
                },
                bumpScale: {
                    value: 1
                }
            },
            normalmap: {
                normalMap: {
                    value: null
                },
                normalScale: {
                    value: new i.a(1, 1)
                }
            },
            displacementmap: {
                displacementMap: {
                    value: null
                },
                displacementScale: {
                    value: 1
                },
                displacementBias: {
                    value: 0
                }
            },
            roughnessmap: {
                roughnessMap: {
                    value: null
                }
            },
            metalnessmap: {
                metalnessMap: {
                    value: null
                }
            },
            gradientmap: {
                gradientMap: {
                    value: null
                }
            },
            fog: {
                fogDensity: {
                    value: 25e-5
                },
                fogNear: {
                    value: 1
                },
                fogFar: {
                    value: 2e3
                },
                fogColor: {
                    value: new r.a(16777215)
                }
            },
            lights: {
                ambientLightColor: {
                    value: []
                },
                lightProbe: {
                    value: []
                },
                directionalLights: {
                    value: [],
                    properties: {
                        direction: {},
                        color: {},
                        shadow: {},
                        shadowBias: {},
                        shadowRadius: {},
                        shadowMapSize: {}
                    }
                },
                directionalShadowMap: {
                    value: []
                },
                directionalShadowMatrix: {
                    value: []
                },
                spotLights: {
                    value: [],
                    properties: {
                        color: {},
                        position: {},
                        direction: {},
                        distance: {},
                        coneCos: {},
                        penumbraCos: {},
                        decay: {},
                        shadow: {},
                        shadowBias: {},
                        shadowRadius: {},
                        shadowMapSize: {}
                    }
                },
                spotShadowMap: {
                    value: []
                },
                spotShadowMatrix: {
                    value: []
                },
                pointLights: {
                    value: [],
                    properties: {
                        color: {},
                        position: {},
                        decay: {},
                        distance: {},
                        shadow: {},
                        shadowBias: {},
                        shadowRadius: {},
                        shadowMapSize: {},
                        shadowCameraNear: {},
                        shadowCameraFar: {}
                    }
                },
                pointShadowMap: {
                    value: []
                },
                pointShadowMatrix: {
                    value: []
                },
                hemisphereLights: {
                    value: [],
                    properties: {
                        direction: {},
                        skyColor: {},
                        groundColor: {}
                    }
                },
                rectAreaLights: {
                    value: [],
                    properties: {
                        color: {},
                        position: {},
                        width: {},
                        height: {}
                    }
                }
            },
            points: {
                diffuse: {
                    value: new r.a(15658734)
                },
                opacity: {
                    value: 1
                },
                size: {
                    value: 1
                },
                scale: {
                    value: 1
                },
                map: {
                    value: null
                },
                alphaMap: {
                    value: null
                },
                uvTransform: {
                    value: new o.a
                }
            },
            sprite: {
                diffuse: {
                    value: new r.a(15658734)
                },
                opacity: {
                    value: 1
                },
                center: {
                    value: new i.a(.5, .5)
                },
                rotation: {
                    value: 0
                },
                map: {
                    value: null
                },
                alphaMap: {
                    value: null
                },
                uvTransform: {
                    value: new o.a
                }
            }
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return v
    })), n.d(e, "d", (function() {
        return m
    })), n.d(e, "c", (function() {
        return p
    })), n.d(e, "a", (function() {
        return u
    }));
    var r = n(26),
        i = n(1),
        o = n(5),
        a = n(18),
        s = n(0);

    function u(t, e, n) {
        if (Array.isArray(t)) throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
        this.name = "", this.array = t, this.itemSize = e, this.count = void 0 !== t ? t.length / e : 0, this.normalized = !0 === n, this.usage = s.kc, this.updateRange = {
            offset: 0,
            count: -1
        }, this.version = 0
    }

    function c(t, e, n) {
        u.call(this, new Int8Array(t), e, n)
    }

    function l(t, e, n) {
        u.call(this, new Uint8Array(t), e, n)
    }

    function h(t, e, n) {
        u.call(this, new Uint8ClampedArray(t), e, n)
    }

    function f(t, e, n) {
        u.call(this, new Int16Array(t), e, n)
    }

    function p(t, e, n) {
        u.call(this, new Uint16Array(t), e, n)
    }

    function d(t, e, n) {
        u.call(this, new Int32Array(t), e, n)
    }

    function m(t, e, n) {
        u.call(this, new Uint32Array(t), e, n)
    }

    function v(t, e, n) {
        u.call(this, new Float32Array(t), e, n)
    }

    function y(t, e, n) {
        u.call(this, new Float64Array(t), e, n)
    }
    Object.defineProperty(u.prototype, "needsUpdate", {
        set: function(t) {
            !0 === t && this.version++
        }
    }), Object.assign(u.prototype, {
        isBufferAttribute: !0,
        onUploadCallback: function() {},
        setUsage: function(t) {
            return this.usage = t, this
        },
        copy: function(t) {
            return this.name = t.name, this.array = new t.array.constructor(t.array), this.itemSize = t.itemSize, this.count = t.count, this.normalized = t.normalized, this.usage = t.usage, this
        },
        copyAt: function(t, e, n) {
            t *= this.itemSize, n *= e.itemSize;
            for (var r = 0, i = this.itemSize; r < i; r++) this.array[t + r] = e.array[n + r];
            return this
        },
        copyArray: function(t) {
            return this.array.set(t), this
        },
        copyColorsArray: function(t) {
            for (var e = this.array, n = 0, r = 0, i = t.length; r < i; r++) {
                var o = t[r];
                void 0 === o && (console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined", r), o = new a.a), e[n++] = o.r, e[n++] = o.g, e[n++] = o.b
            }
            return this
        },
        copyVector2sArray: function(t) {
            for (var e = this.array, n = 0, r = 0, i = t.length; r < i; r++) {
                var a = t[r];
                void 0 === a && (console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined", r), a = new o.a), e[n++] = a.x, e[n++] = a.y
            }
            return this
        },
        copyVector3sArray: function(t) {
            for (var e = this.array, n = 0, r = 0, o = t.length; r < o; r++) {
                var a = t[r];
                void 0 === a && (console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined", r), a = new i.a), e[n++] = a.x, e[n++] = a.y, e[n++] = a.z
            }
            return this
        },
        copyVector4sArray: function(t) {
            for (var e = this.array, n = 0, i = 0, o = t.length; i < o; i++) {
                var a = t[i];
                void 0 === a && (console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined", i), a = new r.a), e[n++] = a.x, e[n++] = a.y, e[n++] = a.z, e[n++] = a.w
            }
            return this
        },
        set: function(t, e) {
            return void 0 === e && (e = 0), this.array.set(t, e), this
        },
        getX: function(t) {
            return this.array[t * this.itemSize]
        },
        setX: function(t, e) {
            return this.array[t * this.itemSize] = e, this
        },
        getY: function(t) {
            return this.array[t * this.itemSize + 1]
        },
        setY: function(t, e) {
            return this.array[t * this.itemSize + 1] = e, this
        },
        getZ: function(t) {
            return this.array[t * this.itemSize + 2]
        },
        setZ: function(t, e) {
            return this.array[t * this.itemSize + 2] = e, this
        },
        getW: function(t) {
            return this.array[t * this.itemSize + 3]
        },
        setW: function(t, e) {
            return this.array[t * this.itemSize + 3] = e, this
        },
        setXY: function(t, e, n) {
            return t *= this.itemSize, this.array[t + 0] = e, this.array[t + 1] = n, this
        },
        setXYZ: function(t, e, n, r) {
            return t *= this.itemSize, this.array[t + 0] = e, this.array[t + 1] = n, this.array[t + 2] = r, this
        },
        setXYZW: function(t, e, n, r, i) {
            return t *= this.itemSize, this.array[t + 0] = e, this.array[t + 1] = n, this.array[t + 2] = r, this.array[t + 3] = i, this
        },
        onUpload: function(t) {
            return this.onUploadCallback = t, this
        },
        clone: function() {
            return new this.constructor(this.array, this.itemSize).copy(this)
        },
        toJSON: function() {
            return {
                itemSize: this.itemSize,
                type: this.array.constructor.name,
                array: Array.prototype.slice.call(this.array),
                normalized: this.normalized
            }
        }
    }), c.prototype = Object.create(u.prototype), c.prototype.constructor = c, l.prototype = Object.create(u.prototype), l.prototype.constructor = l, h.prototype = Object.create(u.prototype), h.prototype.constructor = h, f.prototype = Object.create(u.prototype), f.prototype.constructor = f, p.prototype = Object.create(u.prototype), p.prototype.constructor = p, d.prototype = Object.create(u.prototype), d.prototype.constructor = d, m.prototype = Object.create(u.prototype), m.prototype.constructor = m, v.prototype = Object.create(u.prototype), v.prototype.constructor = v, y.prototype = Object.create(u.prototype), y.prototype.constructor = y
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return o
    }));
    for (var r = [], i = 0; i < 256; i++) r[i] = (i < 16 ? "0" : "") + i.toString(16);
    var o = {
        DEG2RAD: Math.PI / 180,
        RAD2DEG: 180 / Math.PI,
        generateUUID: function() {
            var t = 4294967295 * Math.random() | 0,
                e = 4294967295 * Math.random() | 0,
                n = 4294967295 * Math.random() | 0,
                i = 4294967295 * Math.random() | 0;
            return (r[255 & t] + r[t >> 8 & 255] + r[t >> 16 & 255] + r[t >> 24 & 255] + "-" + r[255 & e] + r[e >> 8 & 255] + "-" + r[e >> 16 & 15 | 64] + r[e >> 24 & 255] + "-" + r[63 & n | 128] + r[n >> 8 & 255] + "-" + r[n >> 16 & 255] + r[n >> 24 & 255] + r[255 & i] + r[i >> 8 & 255] + r[i >> 16 & 255] + r[i >> 24 & 255]).toUpperCase()
        },
        clamp: function(t, e, n) {
            return Math.max(e, Math.min(n, t))
        },
        euclideanModulo: function(t, e) {
            return (t % e + e) % e
        },
        mapLinear: function(t, e, n, r, i) {
            return r + (t - e) * (i - r) / (n - e)
        },
        lerp: function(t, e, n) {
            return (1 - n) * t + n * e
        },
        smoothstep: function(t, e, n) {
            return t <= e ? 0 : t >= n ? 1 : (t = (t - e) / (n - e)) * t * (3 - 2 * t)
        },
        smootherstep: function(t, e, n) {
            return t <= e ? 0 : t >= n ? 1 : (t = (t - e) / (n - e)) * t * t * (t * (6 * t - 15) + 10)
        },
        randInt: function(t, e) {
            return t + Math.floor(Math.random() * (e - t + 1))
        },
        randFloat: function(t, e) {
            return t + Math.random() * (e - t)
        },
        randFloatSpread: function(t) {
            return t * (.5 - Math.random())
        },
        degToRad: function(t) {
            return t * o.DEG2RAD
        },
        radToDeg: function(t) {
            return t * o.RAD2DEG
        },
        isPowerOfTwo: function(t) {
            return 0 == (t & t - 1) && 0 !== t
        },
        ceilPowerOfTwo: function(t) {
            return Math.pow(2, Math.ceil(Math.log(t) / Math.LN2))
        },
        floorPowerOfTwo: function(t) {
            return Math.pow(2, Math.floor(Math.log(t) / Math.LN2))
        }
    }
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return m
    })), n.d(e, "c", (function() {
        return v
    })), n.d(e, "a", (function() {
        return r
    })), n.d(e, "j", (function() {
        return y
    })), n.d(e, "i", (function() {
        return g
    })), n.d(e, "h", (function() {
        return b
    })), n.d(e, "l", (function() {
        return _
    })), n.d(e, "o", (function() {
        return w
    })), n.d(e, "e", (function() {
        return x
    })), n.d(e, "f", (function() {
        return E
    })), n.d(e, "d", (function() {
        return S
    })), n.d(e, "k", (function() {
        return T
    })), n.d(e, "n", (function() {
        return M
    })), n.d(e, "p", (function() {
        return O
    })), n.d(e, "g", (function() {
        return P
    })), n.d(e, "m", (function() {
        return A
    }));
    var r, i = n(1),
        o = n(16),
        a = n(163),
        s = n(37),
        u = n(13),
        c = n(49),
        l = n(7),
        h = n(53),
        f = n(10),
        p = new a.a,
        d = new h.a,
        m = (new c.a, Math.PI / 180),
        v = 180 / Math.PI;
    ! function(t) {
        t.fromVisionVector = function(t) {
            return new i.a(t.x, t.z, -t.y)
        }, t.toVisionVector = function(t) {
            return new i.a(t.x, -t.z, t.y)
        }, t.fromVisionQuaternion = function(t) {
            return new o.a(t.x, t.z, -t.y, t.w).multiply((new o.a).setFromAxisAngle(new i.a(0, 1, 0), u.a.degToRad(90)))
        }, t.toVisionQuaternion = function(t) {
            var e = new o.a(t.x, t.y, t.z, t.w).multiply((new o.a).setFromAxisAngle(new i.a(0, 1, 0), u.a.degToRad(-90)));
            return e.set(e.x, -e.z, e.y, e.w), e
        }
    }(r || (r = {}));
    var y = function(t) {
            return new i.a(-t.x, t.y, t.z)
        },
        g = function(t) {
            return new o.a(-t.z, -t.w, -t.x, -t.y)
        },
        b = function(t) {
            return new o.a(t.x, -t.y, -t.z, t.w).normalize().multiply((new o.a).setFromAxisAngle(new i.a(0, 1, 0), u.a.degToRad(270)))
        },
        _ = function(t) {
            return Math.cos(u.a.degToRad(t / 2))
        };

    function w(t, e, n) {
        return e <= t && t <= n
    }
    var x = function(t, e, n) {
            return Math.max(e, Math.min(t, n))
        },
        E = function(t) {
            t.r = x(t.r, 0, 1), t.g = x(t.g, 0, 1), t.b = x(t.b, 0, 1)
        },
        S = function(t, e) {
            var n = new i.a(0, 0, -1);
            return n.clone().applyQuaternion(t).angleTo(n.clone().applyQuaternion(e))
        },
        T = function(t, e, n, r) {
            return d.identity().makeRotationFromQuaternion(e).setPosition(t), d.getInverse(d), d.premultiply(n), p.setFromMatrix(d.asThreeMatrix4()), p.intersectsBox(r)
        },
        M = function(t) {
            var e = t.getSize(new i.a),
                n = Math.max(e.x, e.y, e.z);
            return (new s.a).setFromCenterAndSize(t.getCenter(new i.a), new i.a(n, n, n))
        },
        O = function(t, e, n, r, i) {
            return (i - r) * ((t - e) / (n - e)) + r
        },
        P = function(t, e, n, r, i) {
            var o = O(t, e, n, r, i);
            return x(o, r, i)
        };

    function A(t) {
        if (0 === (e = t).x && 0 === e.y && 0 === e.z) return t.clone();
        var e, n = f.b.FORWARD.clone().applyQuaternion(t),
            r = new l.a;
        return r.lookAt(f.b.ZERO, n, f.b.UP), (new o.a).setFromRotationMatrix(r)
    }
}, function(t, e, n) {
    "use strict";
    var r = n(25),
        i = n(70),
        o = n(81),
        a = n(23),
        s = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        };
    var u = n(40),
        c = function(t) {
            if (!t || 0 === Object.keys(t).length) throw new Error("createObservableProxy() only works on objects that has predefined keys. Did you mean createObservableMap or createObservableArray?");
            if (t instanceof u.a) throw new Error("Using ObservableProxy on an ObservableObject is a BUG!");
            if (t.isObservableProxy) return t;
            var e = {},
                n = new i.a,
                r = Object.create(t);
            Object.defineProperties(r, {
                    isObservableProxy: {
                        value: !0
                    },
                    onPropertyChanged: {
                        value: function(t, n) {
                            return e[t].onChanged(n)
                        }
                    },
                    removeOnPropertyChanged: {
                        value: function(t, n) {
                            return e[t].removeOnChanged(n)
                        }
                    },
                    deepCopy: {
                        value: function() {
                            return Object(a.a)(t)
                        }
                    }
                }),
                function t(e, n) {
                    var r, i, o = Object.getOwnPropertyNames(n);
                    try {
                        for (var a = s(o), u = a.next(); !u.done; u = a.next()) {
                            var c = u.value;
                            void 0 === e[c] && ("function" == typeof n[c] ? Object.defineProperty(e, c, {
                                value: n[c].bind(e)
                            }) : Object.defineProperty(e, c, {
                                value: n[c],
                                writable: !0
                            }))
                        }
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            u && !u.done && (i = a.return) && i.call(a)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    null !== Object.getPrototypeOf(Object.getPrototypeOf(n)) && t(e, Object.getPrototypeOf(n))
                }(r, n);
            var c = function(n) {
                if (t.hasOwnProperty(n)) {
                    var i = Object(o.b)(t[n]);
                    e[n] = i, r.addChildObservable(i), Object.defineProperty(r, n, {
                        get: function() {
                            return t[n]
                        },
                        set: function(r) {
                            t[n] = r, e[n].value = r
                        },
                        enumerable: !0
                    })
                }
            };
            for (var l in t) c(l);
            return Object.seal(r), r
        };
    n.d(e, "a", (function() {
        return h
    })), n.d(e, "b", (function() {
        return f
    })), n.d(e, "c", (function() {
        return d
    })), n.d(e, "d", (function() {
        return m
    }));
    var l, h, f, p = (l = function(t, e) {
        return (l = Object.setPrototypeOf || {
                __proto__: []
            }
            instanceof Array && function(t, e) {
                t.__proto__ = e
            } || function(t, e) {
                for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
            })(t, e)
    }, function(t, e) {
        function n() {
            this.constructor = t
        }
        l(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
    });
    ! function(t) {
        t[t.UNINITIALIZED = 0] = "UNINITIALIZED", t[t.WAITING = 1] = "WAITING", t[t.LOADING = 2] = "LOADING", t[t.STARTING = 3] = "STARTING", t[t.PLAYING = 4] = "PLAYING", t[t.ERROR = 5] = "ERROR"
    }(h || (h = {})),
    function(t) {
        t[t.UNKNOWN = 0] = "UNKNOWN", t[t.WEBVR = 1] = "WEBVR", t[t.SHOWCASE = 2] = "SHOWCASE", t[t.WORKSHOP = 3] = "WORKSHOP"
    }(f || (f = {}));
    var d = function(t) {
            function e(e, n) {
                var r;
                void 0 === n && (n = f.UNKNOWN);
                var i = t.call(this) || this;
                return i.name = "app", i.phase = e, i.application = n, i.phaseTimes = c(((r = {})[h.UNINITIALIZED] = 0, r[h.WAITING] = 0, r[h.LOADING] = 0, r[h.STARTING] = 0, r[h.PLAYING] = 0, r[h.ERROR] = 0, r)), i.error = null, i
            }
            return p(e, t), e.prototype.copy = function(t) {
                this.phase = t.phase, this.phaseTimes[h.UNINITIALIZED] = t.phaseTimes[h.UNINITIALIZED], this.phaseTimes[h.WAITING] = t.phaseTimes[h.WAITING], this.phaseTimes[h.LOADING] = t.phaseTimes[h.LOADING], this.phaseTimes[h.STARTING] = t.phaseTimes[h.STARTING], this.phaseTimes[h.PLAYING] = t.phaseTimes[h.PLAYING], this.phaseTimes[h.ERROR] = t.phaseTimes[h.ERROR], this.application = t.application, this.error = t.error
            }, e
        }(r.a),
        m = function() {
            return new d(h.UNINITIALIZED)
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    }));
    var r = n(13);

    function i(t, e, n, r) {
        this._x = t || 0, this._y = e || 0, this._z = n || 0, this._w = void 0 !== r ? r : 1
    }
    Object.assign(i, {
        slerp: function(t, e, n, r) {
            return n.copy(t).slerp(e, r)
        },
        slerpFlat: function(t, e, n, r, i, o, a) {
            var s = n[r + 0],
                u = n[r + 1],
                c = n[r + 2],
                l = n[r + 3],
                h = i[o + 0],
                f = i[o + 1],
                p = i[o + 2],
                d = i[o + 3];
            if (l !== d || s !== h || u !== f || c !== p) {
                var m = 1 - a,
                    v = s * h + u * f + c * p + l * d,
                    y = v >= 0 ? 1 : -1,
                    g = 1 - v * v;
                if (g > Number.EPSILON) {
                    var b = Math.sqrt(g),
                        _ = Math.atan2(b, v * y);
                    m = Math.sin(m * _) / b, a = Math.sin(a * _) / b
                }
                var w = a * y;
                if (s = s * m + h * w, u = u * m + f * w, c = c * m + p * w, l = l * m + d * w, m === 1 - a) {
                    var x = 1 / Math.sqrt(s * s + u * u + c * c + l * l);
                    s *= x, u *= x, c *= x, l *= x
                }
            }
            t[e] = s, t[e + 1] = u, t[e + 2] = c, t[e + 3] = l
        }
    }), Object.defineProperties(i.prototype, {
        x: {
            get: function() {
                return this._x
            },
            set: function(t) {
                this._x = t, this._onChangeCallback()
            }
        },
        y: {
            get: function() {
                return this._y
            },
            set: function(t) {
                this._y = t, this._onChangeCallback()
            }
        },
        z: {
            get: function() {
                return this._z
            },
            set: function(t) {
                this._z = t, this._onChangeCallback()
            }
        },
        w: {
            get: function() {
                return this._w
            },
            set: function(t) {
                this._w = t, this._onChangeCallback()
            }
        }
    }), Object.assign(i.prototype, {
        isQuaternion: !0,
        set: function(t, e, n, r) {
            return this._x = t, this._y = e, this._z = n, this._w = r, this._onChangeCallback(), this
        },
        clone: function() {
            return new this.constructor(this._x, this._y, this._z, this._w)
        },
        copy: function(t) {
            return this._x = t.x, this._y = t.y, this._z = t.z, this._w = t.w, this._onChangeCallback(), this
        },
        setFromEuler: function(t, e) {
            if (!t || !t.isEuler) throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");
            var n = t._x,
                r = t._y,
                i = t._z,
                o = t.order,
                a = Math.cos,
                s = Math.sin,
                u = a(n / 2),
                c = a(r / 2),
                l = a(i / 2),
                h = s(n / 2),
                f = s(r / 2),
                p = s(i / 2);
            return "XYZ" === o ? (this._x = h * c * l + u * f * p, this._y = u * f * l - h * c * p, this._z = u * c * p + h * f * l, this._w = u * c * l - h * f * p) : "YXZ" === o ? (this._x = h * c * l + u * f * p, this._y = u * f * l - h * c * p, this._z = u * c * p - h * f * l, this._w = u * c * l + h * f * p) : "ZXY" === o ? (this._x = h * c * l - u * f * p, this._y = u * f * l + h * c * p, this._z = u * c * p + h * f * l, this._w = u * c * l - h * f * p) : "ZYX" === o ? (this._x = h * c * l - u * f * p, this._y = u * f * l + h * c * p, this._z = u * c * p - h * f * l, this._w = u * c * l + h * f * p) : "YZX" === o ? (this._x = h * c * l + u * f * p, this._y = u * f * l + h * c * p, this._z = u * c * p - h * f * l, this._w = u * c * l - h * f * p) : "XZY" === o && (this._x = h * c * l - u * f * p, this._y = u * f * l - h * c * p, this._z = u * c * p + h * f * l, this._w = u * c * l + h * f * p), !1 !== e && this._onChangeCallback(), this
        },
        setFromAxisAngle: function(t, e) {
            var n = e / 2,
                r = Math.sin(n);
            return this._x = t.x * r, this._y = t.y * r, this._z = t.z * r, this._w = Math.cos(n), this._onChangeCallback(), this
        },
        setFromRotationMatrix: function(t) {
            var e, n = t.elements,
                r = n[0],
                i = n[4],
                o = n[8],
                a = n[1],
                s = n[5],
                u = n[9],
                c = n[2],
                l = n[6],
                h = n[10],
                f = r + s + h;
            return f > 0 ? (e = .5 / Math.sqrt(f + 1), this._w = .25 / e, this._x = (l - u) * e, this._y = (o - c) * e, this._z = (a - i) * e) : r > s && r > h ? (e = 2 * Math.sqrt(1 + r - s - h), this._w = (l - u) / e, this._x = .25 * e, this._y = (i + a) / e, this._z = (o + c) / e) : s > h ? (e = 2 * Math.sqrt(1 + s - r - h), this._w = (o - c) / e, this._x = (i + a) / e, this._y = .25 * e, this._z = (u + l) / e) : (e = 2 * Math.sqrt(1 + h - r - s), this._w = (a - i) / e, this._x = (o + c) / e, this._y = (u + l) / e, this._z = .25 * e), this._onChangeCallback(), this
        },
        setFromUnitVectors: function(t, e) {
            var n = t.dot(e) + 1;
            return n < 1e-6 ? (n = 0, Math.abs(t.x) > Math.abs(t.z) ? (this._x = -t.y, this._y = t.x, this._z = 0, this._w = n) : (this._x = 0, this._y = -t.z, this._z = t.y, this._w = n)) : (this._x = t.y * e.z - t.z * e.y, this._y = t.z * e.x - t.x * e.z, this._z = t.x * e.y - t.y * e.x, this._w = n), this.normalize()
        },
        angleTo: function(t) {
            return 2 * Math.acos(Math.abs(r.a.clamp(this.dot(t), -1, 1)))
        },
        rotateTowards: function(t, e) {
            var n = this.angleTo(t);
            if (0 === n) return this;
            var r = Math.min(1, e / n);
            return this.slerp(t, r), this
        },
        inverse: function() {
            return this.conjugate()
        },
        conjugate: function() {
            return this._x *= -1, this._y *= -1, this._z *= -1, this._onChangeCallback(), this
        },
        dot: function(t) {
            return this._x * t._x + this._y * t._y + this._z * t._z + this._w * t._w
        },
        lengthSq: function() {
            return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
        },
        length: function() {
            return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
        },
        normalize: function() {
            var t = this.length();
            return 0 === t ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (t = 1 / t, this._x = this._x * t, this._y = this._y * t, this._z = this._z * t, this._w = this._w * t), this._onChangeCallback(), this
        },
        multiply: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."), this.multiplyQuaternions(t, e)) : this.multiplyQuaternions(this, t)
        },
        premultiply: function(t) {
            return this.multiplyQuaternions(t, this)
        },
        multiplyQuaternions: function(t, e) {
            var n = t._x,
                r = t._y,
                i = t._z,
                o = t._w,
                a = e._x,
                s = e._y,
                u = e._z,
                c = e._w;
            return this._x = n * c + o * a + r * u - i * s, this._y = r * c + o * s + i * a - n * u, this._z = i * c + o * u + n * s - r * a, this._w = o * c - n * a - r * s - i * u, this._onChangeCallback(), this
        },
        slerp: function(t, e) {
            if (0 === e) return this;
            if (1 === e) return this.copy(t);
            var n = this._x,
                r = this._y,
                i = this._z,
                o = this._w,
                a = o * t._w + n * t._x + r * t._y + i * t._z;
            if (a < 0 ? (this._w = -t._w, this._x = -t._x, this._y = -t._y, this._z = -t._z, a = -a) : this.copy(t), a >= 1) return this._w = o, this._x = n, this._y = r, this._z = i, this;
            var s = 1 - a * a;
            if (s <= Number.EPSILON) {
                var u = 1 - e;
                return this._w = u * o + e * this._w, this._x = u * n + e * this._x, this._y = u * r + e * this._y, this._z = u * i + e * this._z, this.normalize(), this._onChangeCallback(), this
            }
            var c = Math.sqrt(s),
                l = Math.atan2(c, a),
                h = Math.sin((1 - e) * l) / c,
                f = Math.sin(e * l) / c;
            return this._w = o * h + this._w * f, this._x = n * h + this._x * f, this._y = r * h + this._y * f, this._z = i * h + this._z * f, this._onChangeCallback(), this
        },
        equals: function(t) {
            return t._x === this._x && t._y === this._y && t._z === this._z && t._w === this._w
        },
        fromArray: function(t, e) {
            return void 0 === e && (e = 0), this._x = t[e], this._y = t[e + 1], this._z = t[e + 2], this._w = t[e + 3], this._onChangeCallback(), this
        },
        toArray: function(t, e) {
            return void 0 === t && (t = []), void 0 === e && (e = 0), t[e] = this._x, t[e + 1] = this._y, t[e + 2] = this._z, t[e + 3] = this._w, t
        },
        _onChange: function(t) {
            return this._onChangeCallback = t, this
        },
        _onChangeCallback: function() {}
    })
}, function(t, e, n) {
    "use strict";
    var r = n(16),
        i = n(1),
        o = n(7),
        a = n(64),
        s = n(98);

    function u() {
        this.mask = 1
    }
    Object.assign(u.prototype, {
        set: function(t) {
            this.mask = 1 << t | 0
        },
        enable: function(t) {
            this.mask |= 1 << t | 0
        },
        enableAll: function() {
            this.mask = -1
        },
        toggle: function(t) {
            this.mask ^= 1 << t | 0
        },
        disable: function(t) {
            this.mask &= ~(1 << t | 0)
        },
        disableAll: function() {
            this.mask = 0
        },
        test: function(t) {
            return 0 != (this.mask & t.mask)
        }
    });
    var c = n(42),
        l = n(13),
        h = n(0);
    n.d(e, "a", (function() {
        return T
    }));
    var f = 0,
        p = new i.a,
        d = new r.a,
        m = new o.a,
        v = new i.a,
        y = new i.a,
        g = new i.a,
        b = new r.a,
        _ = new i.a(1, 0, 0),
        w = new i.a(0, 1, 0),
        x = new i.a(0, 0, 1),
        E = {
            type: "added"
        },
        S = {
            type: "removed"
        };

    function T() {
        Object.defineProperty(this, "id", {
            value: f++
        }), this.uuid = l.a.generateUUID(), this.name = "", this.type = "Object3D", this.parent = null, this.children = [], this.up = T.DefaultUp.clone();
        var t = new i.a,
            e = new s.a,
            n = new r.a,
            a = new i.a(1, 1, 1);
        e._onChange((function() {
            n.setFromEuler(e, !1)
        })), n._onChange((function() {
            e.setFromQuaternion(n, void 0, !1)
        })), Object.defineProperties(this, {
            position: {
                configurable: !0,
                enumerable: !0,
                value: t
            },
            rotation: {
                configurable: !0,
                enumerable: !0,
                value: e
            },
            quaternion: {
                configurable: !0,
                enumerable: !0,
                value: n
            },
            scale: {
                configurable: !0,
                enumerable: !0,
                value: a
            },
            modelViewMatrix: {
                value: new o.a
            },
            normalMatrix: {
                value: new c.a
            }
        }), this.matrix = new o.a, this.matrixWorld = new o.a, this.matrixAutoUpdate = T.DefaultMatrixAutoUpdate, this.matrixWorldNeedsUpdate = !1, this.layers = new u, this.visible = !0, this.castShadow = !1, this.receiveShadow = !1, this.frustumCulled = !0, this.renderOrder = 0, this.userData = {}
    }
    T.DefaultUp = new i.a(0, 1, 0), T.DefaultMatrixAutoUpdate = !0, T.prototype = Object.assign(Object.create(a.a.prototype), {
        constructor: T,
        isObject3D: !0,
        onBeforeRender: function() {},
        onAfterRender: function() {},
        applyMatrix: function(t) {
            this.matrixAutoUpdate && this.updateMatrix(), this.matrix.premultiply(t), this.matrix.decompose(this.position, this.quaternion, this.scale)
        },
        applyQuaternion: function(t) {
            return this.quaternion.premultiply(t), this
        },
        setRotationFromAxisAngle: function(t, e) {
            this.quaternion.setFromAxisAngle(t, e)
        },
        setRotationFromEuler: function(t) {
            this.quaternion.setFromEuler(t, !0)
        },
        setRotationFromMatrix: function(t) {
            this.quaternion.setFromRotationMatrix(t)
        },
        setRotationFromQuaternion: function(t) {
            this.quaternion.copy(t)
        },
        rotateOnAxis: function(t, e) {
            return d.setFromAxisAngle(t, e), this.quaternion.multiply(d), this
        },
        rotateOnWorldAxis: function(t, e) {
            return d.setFromAxisAngle(t, e), this.quaternion.premultiply(d), this
        },
        rotateX: function(t) {
            return this.rotateOnAxis(_, t)
        },
        rotateY: function(t) {
            return this.rotateOnAxis(w, t)
        },
        rotateZ: function(t) {
            return this.rotateOnAxis(x, t)
        },
        translateOnAxis: function(t, e) {
            return p.copy(t).applyQuaternion(this.quaternion), this.position.add(p.multiplyScalar(e)), this
        },
        translateX: function(t) {
            return this.translateOnAxis(_, t)
        },
        translateY: function(t) {
            return this.translateOnAxis(w, t)
        },
        translateZ: function(t) {
            return this.translateOnAxis(x, t)
        },
        localToWorld: function(t) {
            return t.applyMatrix4(this.matrixWorld)
        },
        worldToLocal: function(t) {
            return t.applyMatrix4(m.getInverse(this.matrixWorld))
        },
        lookAt: function(t, e, n) {
            t.isVector3 ? v.copy(t) : v.set(t, e, n);
            var r = this.parent;
            this.updateWorldMatrix(!0, !1), y.setFromMatrixPosition(this.matrixWorld), this.isCamera || this.isLight ? m.lookAt(y, v, this.up) : m.lookAt(v, y, this.up), this.quaternion.setFromRotationMatrix(m), r && (m.extractRotation(r.matrixWorld), d.setFromRotationMatrix(m), this.quaternion.premultiply(d.inverse()))
        },
        add: function(t) {
            if (arguments.length > 1) {
                for (var e = 0; e < arguments.length; e++) this.add(arguments[e]);
                return this
            }
            return t === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", t), this) : (t && t.isObject3D ? (null !== t.parent && t.parent.remove(t), t.parent = this, this.children.push(t), t.dispatchEvent(E)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", t), this)
        },
        remove: function(t) {
            if (arguments.length > 1) {
                for (var e = 0; e < arguments.length; e++) this.remove(arguments[e]);
                return this
            }
            var n = this.children.indexOf(t);
            return -1 !== n && (t.parent = null, this.children.splice(n, 1), t.dispatchEvent(S)), this
        },
        attach: function(t) {
            return this.updateWorldMatrix(!0, !1), m.getInverse(this.matrixWorld), null !== t.parent && (t.parent.updateWorldMatrix(!0, !1), m.multiply(t.parent.matrixWorld)), t.applyMatrix(m), t.updateWorldMatrix(!1, !1), this.add(t), this
        },
        getObjectById: function(t) {
            return this.getObjectByProperty("id", t)
        },
        getObjectByName: function(t) {
            return this.getObjectByProperty("name", t)
        },
        getObjectByProperty: function(t, e) {
            if (this[t] === e) return this;
            for (var n = 0, r = this.children.length; n < r; n++) {
                var i = this.children[n].getObjectByProperty(t, e);
                if (void 0 !== i) return i
            }
        },
        getWorldPosition: function(t) {
            return void 0 === t && (console.warn("THREE.Object3D: .getWorldPosition() target is now required"), t = new i.a), this.updateMatrixWorld(!0), t.setFromMatrixPosition(this.matrixWorld)
        },
        getWorldQuaternion: function(t) {
            return void 0 === t && (console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"), t = new r.a), this.updateMatrixWorld(!0), this.matrixWorld.decompose(y, t, g), t
        },
        getWorldScale: function(t) {
            return void 0 === t && (console.warn("THREE.Object3D: .getWorldScale() target is now required"), t = new i.a), this.updateMatrixWorld(!0), this.matrixWorld.decompose(y, b, t), t
        },
        getWorldDirection: function(t) {
            void 0 === t && (console.warn("THREE.Object3D: .getWorldDirection() target is now required"), t = new i.a), this.updateMatrixWorld(!0);
            var e = this.matrixWorld.elements;
            return t.set(e[8], e[9], e[10]).normalize()
        },
        raycast: function() {},
        traverse: function(t) {
            t(this);
            for (var e = this.children, n = 0, r = e.length; n < r; n++) e[n].traverse(t)
        },
        traverseVisible: function(t) {
            if (!1 !== this.visible) {
                t(this);
                for (var e = this.children, n = 0, r = e.length; n < r; n++) e[n].traverseVisible(t)
            }
        },
        traverseAncestors: function(t) {
            var e = this.parent;
            null !== e && (t(e), e.traverseAncestors(t))
        },
        updateMatrix: function() {
            this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0
        },
        updateMatrixWorld: function(t) {
            this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || t) && (null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = !1, t = !0);
            for (var e = this.children, n = 0, r = e.length; n < r; n++) e[n].updateMatrixWorld(t)
        },
        updateWorldMatrix: function(t, e) {
            var n = this.parent;
            if (!0 === t && null !== n && n.updateWorldMatrix(!0, !1), this.matrixAutoUpdate && this.updateMatrix(), null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), !0 === e)
                for (var r = this.children, i = 0, o = r.length; i < o; i++) r[i].updateWorldMatrix(!1, !0)
        },
        toJSON: function(t) {
            var e = void 0 === t || "string" == typeof t,
                n = {};
            e && (t = {
                geometries: {},
                materials: {},
                textures: {},
                images: {},
                shapes: {}
            }, n.metadata = {
                version: 4.5,
                type: "Object",
                generator: "Object3D.toJSON"
            });
            var r = {};

            function i(e, n) {
                return void 0 === e[n.uuid] && (e[n.uuid] = n.toJSON(t)), n.uuid
            }
            if (r.uuid = this.uuid, r.type = this.type, "" !== this.name && (r.name = this.name), !0 === this.castShadow && (r.castShadow = !0), !0 === this.receiveShadow && (r.receiveShadow = !0), !1 === this.visible && (r.visible = !1), !1 === this.frustumCulled && (r.frustumCulled = !1), 0 !== this.renderOrder && (r.renderOrder = this.renderOrder), "{}" !== JSON.stringify(this.userData) && (r.userData = this.userData), r.layers = this.layers.mask, r.matrix = this.matrix.toArray(), !1 === this.matrixAutoUpdate && (r.matrixAutoUpdate = !1), this.isMesh && this.drawMode !== h.qc && (r.drawMode = this.drawMode), this.isInstancedMesh && (r.type = "InstancedMesh", r.count = this.count, r.instanceMatrix = this.instanceMatrix.toJSON()), this.isMesh || this.isLine || this.isPoints) {
                r.geometry = i(t.geometries, this.geometry);
                var o = this.geometry.parameters;
                if (void 0 !== o && void 0 !== o.shapes) {
                    var a = o.shapes;
                    if (Array.isArray(a))
                        for (var s = 0, u = a.length; s < u; s++) {
                            var c = a[s];
                            i(t.shapes, c)
                        } else i(t.shapes, a)
                }
            }
            if (void 0 !== this.material)
                if (Array.isArray(this.material)) {
                    var l = [];
                    for (s = 0, u = this.material.length; s < u; s++) l.push(i(t.materials, this.material[s]));
                    r.material = l
                } else r.material = i(t.materials, this.material);
            if (this.children.length > 0) {
                r.children = [];
                for (s = 0; s < this.children.length; s++) r.children.push(this.children[s].toJSON(t).object)
            }
            if (e) {
                var f = v(t.geometries),
                    p = v(t.materials),
                    d = v(t.textures),
                    m = v(t.images);
                a = v(t.shapes);
                f.length > 0 && (n.geometries = f), p.length > 0 && (n.materials = p), d.length > 0 && (n.textures = d), m.length > 0 && (n.images = m), a.length > 0 && (n.shapes = a)
            }
            return n.object = r, n;

            function v(t) {
                var e = [];
                for (var n in t) {
                    var r = t[n];
                    delete r.metadata, e.push(r)
                }
                return e
            }
        },
        clone: function(t) {
            return (new this.constructor).copy(this, t)
        },
        copy: function(t, e) {
            if (void 0 === e && (e = !0), this.name = t.name, this.up.copy(t.up), this.position.copy(t.position), this.quaternion.copy(t.quaternion), this.scale.copy(t.scale), this.matrix.copy(t.matrix), this.matrixWorld.copy(t.matrixWorld), this.matrixAutoUpdate = t.matrixAutoUpdate, this.matrixWorldNeedsUpdate = t.matrixWorldNeedsUpdate, this.layers.mask = t.layers.mask, this.visible = t.visible, this.castShadow = t.castShadow, this.receiveShadow = t.receiveShadow, this.frustumCulled = t.frustumCulled, this.renderOrder = t.renderOrder, this.userData = JSON.parse(JSON.stringify(t.userData)), !0 === e)
                for (var n = 0; n < t.children.length; n++) {
                    var r = t.children[n];
                    this.add(r.clone())
                }
            return this
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    }));
    var r = n(13),
        i = {
            aliceblue: 15792383,
            antiquewhite: 16444375,
            aqua: 65535,
            aquamarine: 8388564,
            azure: 15794175,
            beige: 16119260,
            bisque: 16770244,
            black: 0,
            blanchedalmond: 16772045,
            blue: 255,
            blueviolet: 9055202,
            brown: 10824234,
            burlywood: 14596231,
            cadetblue: 6266528,
            chartreuse: 8388352,
            chocolate: 13789470,
            coral: 16744272,
            cornflowerblue: 6591981,
            cornsilk: 16775388,
            crimson: 14423100,
            cyan: 65535,
            darkblue: 139,
            darkcyan: 35723,
            darkgoldenrod: 12092939,
            darkgray: 11119017,
            darkgreen: 25600,
            darkgrey: 11119017,
            darkkhaki: 12433259,
            darkmagenta: 9109643,
            darkolivegreen: 5597999,
            darkorange: 16747520,
            darkorchid: 10040012,
            darkred: 9109504,
            darksalmon: 15308410,
            darkseagreen: 9419919,
            darkslateblue: 4734347,
            darkslategray: 3100495,
            darkslategrey: 3100495,
            darkturquoise: 52945,
            darkviolet: 9699539,
            deeppink: 16716947,
            deepskyblue: 49151,
            dimgray: 6908265,
            dimgrey: 6908265,
            dodgerblue: 2003199,
            firebrick: 11674146,
            floralwhite: 16775920,
            forestgreen: 2263842,
            fuchsia: 16711935,
            gainsboro: 14474460,
            ghostwhite: 16316671,
            gold: 16766720,
            goldenrod: 14329120,
            gray: 8421504,
            green: 32768,
            greenyellow: 11403055,
            grey: 8421504,
            honeydew: 15794160,
            hotpink: 16738740,
            indianred: 13458524,
            indigo: 4915330,
            ivory: 16777200,
            khaki: 15787660,
            lavender: 15132410,
            lavenderblush: 16773365,
            lawngreen: 8190976,
            lemonchiffon: 16775885,
            lightblue: 11393254,
            lightcoral: 15761536,
            lightcyan: 14745599,
            lightgoldenrodyellow: 16448210,
            lightgray: 13882323,
            lightgreen: 9498256,
            lightgrey: 13882323,
            lightpink: 16758465,
            lightsalmon: 16752762,
            lightseagreen: 2142890,
            lightskyblue: 8900346,
            lightslategray: 7833753,
            lightslategrey: 7833753,
            lightsteelblue: 11584734,
            lightyellow: 16777184,
            lime: 65280,
            limegreen: 3329330,
            linen: 16445670,
            magenta: 16711935,
            maroon: 8388608,
            mediumaquamarine: 6737322,
            mediumblue: 205,
            mediumorchid: 12211667,
            mediumpurple: 9662683,
            mediumseagreen: 3978097,
            mediumslateblue: 8087790,
            mediumspringgreen: 64154,
            mediumturquoise: 4772300,
            mediumvioletred: 13047173,
            midnightblue: 1644912,
            mintcream: 16121850,
            mistyrose: 16770273,
            moccasin: 16770229,
            navajowhite: 16768685,
            navy: 128,
            oldlace: 16643558,
            olive: 8421376,
            olivedrab: 7048739,
            orange: 16753920,
            orangered: 16729344,
            orchid: 14315734,
            palegoldenrod: 15657130,
            palegreen: 10025880,
            paleturquoise: 11529966,
            palevioletred: 14381203,
            papayawhip: 16773077,
            peachpuff: 16767673,
            peru: 13468991,
            pink: 16761035,
            plum: 14524637,
            powderblue: 11591910,
            purple: 8388736,
            rebeccapurple: 6697881,
            red: 16711680,
            rosybrown: 12357519,
            royalblue: 4286945,
            saddlebrown: 9127187,
            salmon: 16416882,
            sandybrown: 16032864,
            seagreen: 3050327,
            seashell: 16774638,
            sienna: 10506797,
            silver: 12632256,
            skyblue: 8900331,
            slateblue: 6970061,
            slategray: 7372944,
            slategrey: 7372944,
            snow: 16775930,
            springgreen: 65407,
            steelblue: 4620980,
            tan: 13808780,
            teal: 32896,
            thistle: 14204888,
            tomato: 16737095,
            turquoise: 4251856,
            violet: 15631086,
            wheat: 16113331,
            white: 16777215,
            whitesmoke: 16119285,
            yellow: 16776960,
            yellowgreen: 10145074
        },
        o = {
            h: 0,
            s: 0,
            l: 0
        },
        a = {
            h: 0,
            s: 0,
            l: 0
        };

    function s(t, e, n) {
        return void 0 === e && void 0 === n ? this.set(t) : this.setRGB(t, e, n)
    }

    function u(t, e, n) {
        return n < 0 && (n += 1), n > 1 && (n -= 1), n < 1 / 6 ? t + 6 * (e - t) * n : n < .5 ? e : n < 2 / 3 ? t + 6 * (e - t) * (2 / 3 - n) : t
    }

    function c(t) {
        return t < .04045 ? .0773993808 * t : Math.pow(.9478672986 * t + .0521327014, 2.4)
    }

    function l(t) {
        return t < .0031308 ? 12.92 * t : 1.055 * Math.pow(t, .41666) - .055
    }
    Object.assign(s.prototype, {
        isColor: !0,
        r: 1,
        g: 1,
        b: 1,
        set: function(t) {
            return t && t.isColor ? this.copy(t) : "number" == typeof t ? this.setHex(t) : "string" == typeof t && this.setStyle(t), this
        },
        setScalar: function(t) {
            return this.r = t, this.g = t, this.b = t, this
        },
        setHex: function(t) {
            return t = Math.floor(t), this.r = (t >> 16 & 255) / 255, this.g = (t >> 8 & 255) / 255, this.b = (255 & t) / 255, this
        },
        setRGB: function(t, e, n) {
            return this.r = t, this.g = e, this.b = n, this
        },
        setHSL: function(t, e, n) {
            if (t = r.a.euclideanModulo(t, 1), e = r.a.clamp(e, 0, 1), n = r.a.clamp(n, 0, 1), 0 === e) this.r = this.g = this.b = n;
            else {
                var i = n <= .5 ? n * (1 + e) : n + e - n * e,
                    o = 2 * n - i;
                this.r = u(o, i, t + 1 / 3), this.g = u(o, i, t), this.b = u(o, i, t - 1 / 3)
            }
            return this
        },
        setStyle: function(t) {
            function e(e) {
                void 0 !== e && parseFloat(e) < 1 && console.warn("THREE.Color: Alpha component of " + t + " will be ignored.")
            }
            var n;
            if (n = /^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)) {
                var r, i = n[1],
                    o = n[2];
                switch (i) {
                    case "rgb":
                    case "rgba":
                        if (r = /^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)) return this.r = Math.min(255, parseInt(r[1], 10)) / 255, this.g = Math.min(255, parseInt(r[2], 10)) / 255, this.b = Math.min(255, parseInt(r[3], 10)) / 255, e(r[5]), this;
                        if (r = /^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)) return this.r = Math.min(100, parseInt(r[1], 10)) / 100, this.g = Math.min(100, parseInt(r[2], 10)) / 100, this.b = Math.min(100, parseInt(r[3], 10)) / 100, e(r[5]), this;
                        break;
                    case "hsl":
                    case "hsla":
                        if (r = /^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)) {
                            var a = parseFloat(r[1]) / 360,
                                s = parseInt(r[2], 10) / 100,
                                u = parseInt(r[3], 10) / 100;
                            return e(r[5]), this.setHSL(a, s, u)
                        }
                }
            } else if (n = /^\#([A-Fa-f0-9]+)$/.exec(t)) {
                var c = n[1],
                    l = c.length;
                if (3 === l) return this.r = parseInt(c.charAt(0) + c.charAt(0), 16) / 255, this.g = parseInt(c.charAt(1) + c.charAt(1), 16) / 255, this.b = parseInt(c.charAt(2) + c.charAt(2), 16) / 255, this;
                if (6 === l) return this.r = parseInt(c.charAt(0) + c.charAt(1), 16) / 255, this.g = parseInt(c.charAt(2) + c.charAt(3), 16) / 255, this.b = parseInt(c.charAt(4) + c.charAt(5), 16) / 255, this
            }
            return t && t.length > 0 ? this.setColorName(t) : this
        },
        setColorName: function(t) {
            var e = i[t];
            return void 0 !== e ? this.setHex(e) : console.warn("THREE.Color: Unknown color " + t), this
        },
        clone: function() {
            return new this.constructor(this.r, this.g, this.b)
        },
        copy: function(t) {
            return this.r = t.r, this.g = t.g, this.b = t.b, this
        },
        copyGammaToLinear: function(t, e) {
            return void 0 === e && (e = 2), this.r = Math.pow(t.r, e), this.g = Math.pow(t.g, e), this.b = Math.pow(t.b, e), this
        },
        copyLinearToGamma: function(t, e) {
            void 0 === e && (e = 2);
            var n = e > 0 ? 1 / e : 1;
            return this.r = Math.pow(t.r, n), this.g = Math.pow(t.g, n), this.b = Math.pow(t.b, n), this
        },
        convertGammaToLinear: function(t) {
            return this.copyGammaToLinear(this, t), this
        },
        convertLinearToGamma: function(t) {
            return this.copyLinearToGamma(this, t), this
        },
        copySRGBToLinear: function(t) {
            return this.r = c(t.r), this.g = c(t.g), this.b = c(t.b), this
        },
        copyLinearToSRGB: function(t) {
            return this.r = l(t.r), this.g = l(t.g), this.b = l(t.b), this
        },
        convertSRGBToLinear: function() {
            return this.copySRGBToLinear(this), this
        },
        convertLinearToSRGB: function() {
            return this.copyLinearToSRGB(this), this
        },
        getHex: function() {
            return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0
        },
        getHexString: function() {
            return ("000000" + this.getHex().toString(16)).slice(-6)
        },
        getHSL: function(t) {
            void 0 === t && (console.warn("THREE.Color: .getHSL() target is now required"), t = {
                h: 0,
                s: 0,
                l: 0
            });
            var e, n, r = this.r,
                i = this.g,
                o = this.b,
                a = Math.max(r, i, o),
                s = Math.min(r, i, o),
                u = (s + a) / 2;
            if (s === a) e = 0, n = 0;
            else {
                var c = a - s;
                switch (n = u <= .5 ? c / (a + s) : c / (2 - a - s), a) {
                    case r:
                        e = (i - o) / c + (i < o ? 6 : 0);
                        break;
                    case i:
                        e = (o - r) / c + 2;
                        break;
                    case o:
                        e = (r - i) / c + 4
                }
                e /= 6
            }
            return t.h = e, t.s = n, t.l = u, t
        },
        getStyle: function() {
            return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")"
        },
        offsetHSL: function(t, e, n) {
            return this.getHSL(o), o.h += t, o.s += e, o.l += n, this.setHSL(o.h, o.s, o.l), this
        },
        add: function(t) {
            return this.r += t.r, this.g += t.g, this.b += t.b, this
        },
        addColors: function(t, e) {
            return this.r = t.r + e.r, this.g = t.g + e.g, this.b = t.b + e.b, this
        },
        addScalar: function(t) {
            return this.r += t, this.g += t, this.b += t, this
        },
        sub: function(t) {
            return this.r = Math.max(0, this.r - t.r), this.g = Math.max(0, this.g - t.g), this.b = Math.max(0, this.b - t.b), this
        },
        multiply: function(t) {
            return this.r *= t.r, this.g *= t.g, this.b *= t.b, this
        },
        multiplyScalar: function(t) {
            return this.r *= t, this.g *= t, this.b *= t, this
        },
        lerp: function(t, e) {
            return this.r += (t.r - this.r) * e, this.g += (t.g - this.g) * e, this.b += (t.b - this.b) * e, this
        },
        lerpHSL: function(t, e) {
            this.getHSL(o), t.getHSL(a);
            var n = r.a.lerp(o.h, a.h, e),
                i = r.a.lerp(o.s, a.s, e),
                s = r.a.lerp(o.l, a.l, e);
            return this.setHSL(n, i, s), this
        },
        equals: function(t) {
            return t.r === this.r && t.g === this.g && t.b === this.b
        },
        fromArray: function(t, e) {
            return void 0 === e && (e = 0), this.r = t[e], this.g = t[e + 1], this.b = t[e + 2], this
        },
        toArray: function(t, e) {
            return void 0 === t && (t = []), void 0 === e && (e = 0), t[e] = this.r, t[e + 1] = this.g, t[e + 2] = this.b, t
        },
        toJSON: function() {
            return this.getHex()
        }
    }), s.NAMES = i
}, , function(t, e, n) {
    "use strict";
    var r, i, o = n(124),
        a = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        s = function(t) {
            function e(e, n) {
                var r = t.call(this, e) || this;
                return r.mode = n, r
            }
            return a(e, t), e
        }(o.a);
    n.d(e, "a", (function() {
            return i
        })), n.d(e, "c", (function() {
            return u
        })), n.d(e, "b", (function() {
            return c
        })),
        function(t) {
            t[t.Panorama = 1] = "Panorama", t[t.Dollhouse = 2] = "Dollhouse", t[t.Floorplan = 3] = "Floorplan", t[t.Outdoor = 4] = "Outdoor", t[t.Transition = -1] = "Transition"
        }(i || (i = {}));
    var u = function(t) {
        switch (t) {
            case "0":
            case 0:
                return i.Panorama;
            case "1":
            case 1:
                return i.Floorplan;
            case "2":
            case 2:
                return i.Dollhouse;
            case "3":
            case 3:
                return i.Transition
        }
        throw new s("No known conversion for Workshop int to viewmode for int: " + t, t)
    };

    function c(t) {
        switch (t) {
            case i.Panorama:
                return 0;
            case i.Floorplan:
                return 1;
            case i.Dollhouse:
                return 2;
            case i.Transition:
                return 3
        }
        throw new s("No known conversion for Viewmode to Workshop int", t)
    }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    }));
    var r = function() {}
}, function(t, e, n) {
    "use strict";
    n.d(e, "d", (function() {
        return a
    })), n.d(e, "c", (function() {
        return s
    })), n.d(e, "e", (function() {
        return u
    })), n.d(e, "f", (function() {
        return c
    })), n.d(e, "a", (function() {
        return l
    })), n.d(e, "h", (function() {
        return h
    })), n.d(e, "g", (function() {
        return f
    })), n.d(e, "b", (function() {
        return p
    }));
    var r = n(26),
        i = n(36),
        o = new r.a(0, 0, 0, .3),
        a = .01,
        s = .001,
        u = {
            dimWhileActive: !0,
            color: o
        },
        c = {
            highResThreshold: 1081,
            desktopSize: 192,
            desktopSizeHighRes: 320,
            mobileSize: 128
        },
        l = {
            smoothness: .4,
            perspective: {
                fov: 40,
                thresholdClose: 1,
                thresholdFar: 8,
                offsetClose: .25,
                offsetFar: .5,
                scale: 1
            },
            ortho: {
                fov: 5,
                thresholdClose: 5,
                thresholdFar: 20,
                offsetClose: 15,
                offsetFar: 30,
                scale: 4
            }
        },
        h = {
            desktop: i.a.Edges,
            floorplan: i.a.Axes,
            mobile: i.a.Edges,
            alt: i.a.Free,
            shift: i.a.PlanarAxes,
            shiftAlt: i.a.EdgesAndPlanarAxes,
            disabled: i.a.Free
        },
        f = {
            mobile: .15,
            desktop: .1
        },
        p = {
            SCALE: .1,
            SCALE_NDC: .5,
            SCALE_ASPECT: .035,
            SCALE_DISTANCE: .025
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    })), n.d(e, "e", (function() {
        return o
    })), n.d(e, "c", (function() {
        return a
    })), n.d(e, "b", (function() {
        return s
    })), n.d(e, "d", (function() {
        return u
    }));
    var r = function(t) {
            return "propertyObservers" === t || "changeObservers" === t || "isObservable" === t || "childChangeFunctions" === t || "isObservableProxy" === t || "diffRoot" === t || "elementChangedHandlers" === t || "knownKeysMap" === t || "knownKeysList" === t || "isVector3" === t || "onPropertyChanged" === t || "removeOnPropertyChanged" === t || "onChanged" === t || "target" === t
        },
        i = function(t, e) {
            if (void 0 === e && (e = []), void 0 !== t) {
                if (t in e) return {};
                if (t instanceof Date) return new Date(t);
                if (null === t) return null;
                if (t.deepCopy) return t.deepCopy();
                if ("object" == typeof t) {
                    var n = Array.isArray(t) || ArrayBuffer.isView(t) ? [] : {};
                    for (var o in t)
                        if (!r(o)) {
                            var a = t[o];
                            a instanceof Date ? n[o] = new Date(a) : "function" != typeof a && (n[o] = "object" == typeof a ? i(a, e.concat(t)) : a)
                        }
                    return n
                }
                return t
            }
        },
        o = function(t, e) {
            for (var n in e)
                if ("function" != typeof e[n] && (!r(n) || t.hasOwnProperty(n))) {
                    var a = e[n];
                    if (t.hasOwnProperty(n)) {
                        var s = t[n];
                        (null === s ? null : typeof s) !== (null === a ? null : typeof a) ? t[n] = i(a): "object" == typeof s ? s instanceof Date ? t[n] = new Date(a) : o(s, a) : t[n] = a
                    } else t[n] = i(a)
                }
        },
        a = function(t, e) {
            var n = {};
            for (var r in t) {
                var i = t[r],
                    o = e[r];
                s(i, o) && (void 0 === i || void 0 === o ? n[r] = o : typeof i != typeof o ? n[r] = o : "object" != typeof i ? n[r] = o : Array.isArray(o) ? s(i, o) && (n[r] = o) : n[r] = a(i, o))
            }
            for (var r in e) r in t || (n[r] = e[r]);
            return n
        },
        s = function(t, e) {
            if ("object" != typeof t) return t !== e;
            if (!e) return !0;
            for (var n in e)
                if (!(n in t)) return !0;
            for (var n in t)
                if (s(t[n], e[n])) return !0;
            return !1
        };

    function u(t) {
        return "number" == typeof t
    }
}, function(t, e, n) {
    "use strict";
    var r = n(1),
        i = n(37),
        o = n(64),
        a = n(12),
        s = n(49),
        u = n(5);

    function c() {
        this.vertices = [], this.normals = [], this.colors = [], this.uvs = [], this.uvs2 = [], this.groups = [], this.morphTargets = {}, this.skinWeights = [], this.skinIndices = [], this.boundingBox = null, this.boundingSphere = null, this.verticesNeedUpdate = !1, this.normalsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.uvsNeedUpdate = !1, this.groupsNeedUpdate = !1
    }
    Object.assign(c.prototype, {
        computeGroups: function(t) {
            for (var e, n = [], r = void 0, i = t.faces, o = 0; o < i.length; o++) {
                var a = i[o];
                a.materialIndex !== r && (r = a.materialIndex, void 0 !== e && (e.count = 3 * o - e.start, n.push(e)), e = {
                    start: 3 * o,
                    materialIndex: r
                })
            }
            void 0 !== e && (e.count = 3 * o - e.start, n.push(e)), this.groups = n
        },
        fromGeometry: function(t) {
            var e, n = t.faces,
                r = t.vertices,
                i = t.faceVertexUvs,
                o = i[0] && i[0].length > 0,
                a = i[1] && i[1].length > 0,
                s = t.morphTargets,
                c = s.length;
            if (c > 0) {
                e = [];
                for (var l = 0; l < c; l++) e[l] = {
                    name: s[l].name,
                    data: []
                };
                this.morphTargets.position = e
            }
            var h, f = t.morphNormals,
                p = f.length;
            if (p > 0) {
                h = [];
                for (l = 0; l < p; l++) h[l] = {
                    name: f[l].name,
                    data: []
                };
                this.morphTargets.normal = h
            }
            var d = t.skinIndices,
                m = t.skinWeights,
                v = d.length === r.length,
                y = m.length === r.length;
            r.length > 0 && 0 === n.length && console.error("THREE.DirectGeometry: Faceless geometries are not supported.");
            for (l = 0; l < n.length; l++) {
                var g = n[l];
                this.vertices.push(r[g.a], r[g.b], r[g.c]);
                var b = g.vertexNormals;
                if (3 === b.length) this.normals.push(b[0], b[1], b[2]);
                else {
                    var _ = g.normal;
                    this.normals.push(_, _, _)
                }
                var w, x = g.vertexColors;
                if (3 === x.length) this.colors.push(x[0], x[1], x[2]);
                else {
                    var E = g.color;
                    this.colors.push(E, E, E)
                }
                if (!0 === o) void 0 !== (w = i[0][l]) ? this.uvs.push(w[0], w[1], w[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ", l), this.uvs.push(new u.a, new u.a, new u.a));
                if (!0 === a) void 0 !== (w = i[1][l]) ? this.uvs2.push(w[0], w[1], w[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ", l), this.uvs2.push(new u.a, new u.a, new u.a));
                for (var S = 0; S < c; S++) {
                    var T = s[S].vertices;
                    e[S].data.push(T[g.a], T[g.b], T[g.c])
                }
                for (S = 0; S < p; S++) {
                    var M = f[S].vertexNormals[l];
                    h[S].data.push(M.a, M.b, M.c)
                }
                v && this.skinIndices.push(d[g.a], d[g.b], d[g.c]), y && this.skinWeights.push(m[g.a], m[g.b], m[g.c])
            }
            return this.computeGroups(t), this.verticesNeedUpdate = t.verticesNeedUpdate, this.normalsNeedUpdate = t.normalsNeedUpdate, this.colorsNeedUpdate = t.colorsNeedUpdate, this.uvsNeedUpdate = t.uvsNeedUpdate, this.groupsNeedUpdate = t.groupsNeedUpdate, null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()), null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone()), this
        }
    });
    var l = n(17),
        h = n(7),
        f = n(42),
        p = n(13),
        d = n(204);
    n.d(e, "a", (function() {
        return x
    }));
    var m = 1,
        v = new h.a,
        y = new l.a,
        g = new r.a,
        b = new i.a,
        _ = new i.a,
        w = new r.a;

    function x() {
        Object.defineProperty(this, "id", {
            value: m += 2
        }), this.uuid = p.a.generateUUID(), this.name = "", this.type = "BufferGeometry", this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.drawRange = {
            start: 0,
            count: 1 / 0
        }, this.userData = {}
    }
    x.prototype = Object.assign(Object.create(o.a.prototype), {
        constructor: x,
        isBufferGeometry: !0,
        getIndex: function() {
            return this.index
        },
        setIndex: function(t) {
            Array.isArray(t) ? this.index = new(Object(d.a)(t) > 65535 ? a.d : a.c)(t, 1) : this.index = t
        },
        getAttribute: function(t) {
            return this.attributes[t]
        },
        setAttribute: function(t, e) {
            return this.attributes[t] = e, this
        },
        deleteAttribute: function(t) {
            return delete this.attributes[t], this
        },
        addGroup: function(t, e, n) {
            this.groups.push({
                start: t,
                count: e,
                materialIndex: void 0 !== n ? n : 0
            })
        },
        clearGroups: function() {
            this.groups = []
        },
        setDrawRange: function(t, e) {
            this.drawRange.start = t, this.drawRange.count = e
        },
        applyMatrix: function(t) {
            var e = this.attributes.position;
            void 0 !== e && (t.applyToBufferAttribute(e), e.needsUpdate = !0);
            var n = this.attributes.normal;
            void 0 !== n && ((new f.a).getNormalMatrix(t).applyToBufferAttribute(n), n.needsUpdate = !0);
            var r = this.attributes.tangent;
            void 0 !== r && ((new f.a).getNormalMatrix(t).applyToBufferAttribute(r), r.needsUpdate = !0);
            return null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this
        },
        rotateX: function(t) {
            return v.makeRotationX(t), this.applyMatrix(v), this
        },
        rotateY: function(t) {
            return v.makeRotationY(t), this.applyMatrix(v), this
        },
        rotateZ: function(t) {
            return v.makeRotationZ(t), this.applyMatrix(v), this
        },
        translate: function(t, e, n) {
            return v.makeTranslation(t, e, n), this.applyMatrix(v), this
        },
        scale: function(t, e, n) {
            return v.makeScale(t, e, n), this.applyMatrix(v), this
        },
        lookAt: function(t) {
            return y.lookAt(t), y.updateMatrix(), this.applyMatrix(y.matrix), this
        },
        center: function() {
            return this.computeBoundingBox(), this.boundingBox.getCenter(g).negate(), this.translate(g.x, g.y, g.z), this
        },
        setFromObject: function(t) {
            var e = t.geometry;
            if (t.isPoints || t.isLine) {
                var n = new a.b(3 * e.vertices.length, 3),
                    r = new a.b(3 * e.colors.length, 3);
                if (this.setAttribute("position", n.copyVector3sArray(e.vertices)), this.setAttribute("color", r.copyColorsArray(e.colors)), e.lineDistances && e.lineDistances.length === e.vertices.length) {
                    var i = new a.b(e.lineDistances.length, 1);
                    this.setAttribute("lineDistance", i.copyArray(e.lineDistances))
                }
                null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone())
            } else t.isMesh && e && e.isGeometry && this.fromGeometry(e);
            return this
        },
        setFromPoints: function(t) {
            for (var e = [], n = 0, r = t.length; n < r; n++) {
                var i = t[n];
                e.push(i.x, i.y, i.z || 0)
            }
            return this.setAttribute("position", new a.b(e, 3)), this
        },
        updateFromObject: function(t) {
            var e, n = t.geometry;
            if (t.isMesh) {
                var r = n.__directGeometry;
                if (!0 === n.elementsNeedUpdate && (r = void 0, n.elementsNeedUpdate = !1), void 0 === r) return this.fromGeometry(n);
                r.verticesNeedUpdate = n.verticesNeedUpdate, r.normalsNeedUpdate = n.normalsNeedUpdate, r.colorsNeedUpdate = n.colorsNeedUpdate, r.uvsNeedUpdate = n.uvsNeedUpdate, r.groupsNeedUpdate = n.groupsNeedUpdate, n.verticesNeedUpdate = !1, n.normalsNeedUpdate = !1, n.colorsNeedUpdate = !1, n.uvsNeedUpdate = !1, n.groupsNeedUpdate = !1, n = r
            }
            return !0 === n.verticesNeedUpdate && (void 0 !== (e = this.attributes.position) && (e.copyVector3sArray(n.vertices), e.needsUpdate = !0), n.verticesNeedUpdate = !1), !0 === n.normalsNeedUpdate && (void 0 !== (e = this.attributes.normal) && (e.copyVector3sArray(n.normals), e.needsUpdate = !0), n.normalsNeedUpdate = !1), !0 === n.colorsNeedUpdate && (void 0 !== (e = this.attributes.color) && (e.copyColorsArray(n.colors), e.needsUpdate = !0), n.colorsNeedUpdate = !1), n.uvsNeedUpdate && (void 0 !== (e = this.attributes.uv) && (e.copyVector2sArray(n.uvs), e.needsUpdate = !0), n.uvsNeedUpdate = !1), n.lineDistancesNeedUpdate && (void 0 !== (e = this.attributes.lineDistance) && (e.copyArray(n.lineDistances), e.needsUpdate = !0), n.lineDistancesNeedUpdate = !1), n.groupsNeedUpdate && (n.computeGroups(t.geometry), this.groups = n.groups, n.groupsNeedUpdate = !1), this
        },
        fromGeometry: function(t) {
            return t.__directGeometry = (new c).fromGeometry(t), this.fromDirectGeometry(t.__directGeometry)
        },
        fromDirectGeometry: function(t) {
            var e = new Float32Array(3 * t.vertices.length);
            if (this.setAttribute("position", new a.a(e, 3).copyVector3sArray(t.vertices)), t.normals.length > 0) {
                var n = new Float32Array(3 * t.normals.length);
                this.setAttribute("normal", new a.a(n, 3).copyVector3sArray(t.normals))
            }
            if (t.colors.length > 0) {
                var r = new Float32Array(3 * t.colors.length);
                this.setAttribute("color", new a.a(r, 3).copyColorsArray(t.colors))
            }
            if (t.uvs.length > 0) {
                var i = new Float32Array(2 * t.uvs.length);
                this.setAttribute("uv", new a.a(i, 2).copyVector2sArray(t.uvs))
            }
            if (t.uvs2.length > 0) {
                var o = new Float32Array(2 * t.uvs2.length);
                this.setAttribute("uv2", new a.a(o, 2).copyVector2sArray(t.uvs2))
            }
            for (var s in this.groups = t.groups, t.morphTargets) {
                for (var u = [], c = t.morphTargets[s], l = 0, h = c.length; l < h; l++) {
                    var f = c[l],
                        p = new a.b(3 * f.data.length, 3);
                    p.name = f.name, u.push(p.copyVector3sArray(f.data))
                }
                this.morphAttributes[s] = u
            }
            if (t.skinIndices.length > 0) {
                var d = new a.b(4 * t.skinIndices.length, 4);
                this.setAttribute("skinIndex", d.copyVector4sArray(t.skinIndices))
            }
            if (t.skinWeights.length > 0) {
                var m = new a.b(4 * t.skinWeights.length, 4);
                this.setAttribute("skinWeight", m.copyVector4sArray(t.skinWeights))
            }
            return null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()), null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone()), this
        },
        computeBoundingBox: function() {
            null === this.boundingBox && (this.boundingBox = new i.a);
            var t = this.attributes.position,
                e = this.morphAttributes.position;
            if (void 0 !== t) {
                if (this.boundingBox.setFromBufferAttribute(t), e)
                    for (var n = 0, r = e.length; n < r; n++) {
                        var o = e[n];
                        b.setFromBufferAttribute(o), this.boundingBox.expandByPoint(b.min), this.boundingBox.expandByPoint(b.max)
                    }
            } else this.boundingBox.makeEmpty();
            (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this)
        },
        computeBoundingSphere: function() {
            null === this.boundingSphere && (this.boundingSphere = new s.a);
            var t = this.attributes.position,
                e = this.morphAttributes.position;
            if (t) {
                var n = this.boundingSphere.center;
                if (b.setFromBufferAttribute(t), e)
                    for (var r = 0, i = e.length; r < i; r++) {
                        var o = e[r];
                        _.setFromBufferAttribute(o), b.expandByPoint(_.min), b.expandByPoint(_.max)
                    }
                b.getCenter(n);
                var a = 0;
                for (r = 0, i = t.count; r < i; r++) w.fromBufferAttribute(t, r), a = Math.max(a, n.distanceToSquared(w));
                if (e)
                    for (r = 0, i = e.length; r < i; r++)
                        for (var u = 0, c = (o = e[r]).count; u < c; u++) w.fromBufferAttribute(o, u), a = Math.max(a, n.distanceToSquared(w));
                this.boundingSphere.radius = Math.sqrt(a), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this)
            }
        },
        computeFaceNormals: function() {},
        computeVertexNormals: function() {
            var t = this.index,
                e = this.attributes;
            if (e.position) {
                var n = e.position.array;
                if (void 0 === e.normal) this.setAttribute("normal", new a.a(new Float32Array(n.length), 3));
                else
                    for (var i = e.normal.array, o = 0, s = i.length; o < s; o++) i[o] = 0;
                var u, c, l, h = e.normal.array,
                    f = new r.a,
                    p = new r.a,
                    d = new r.a,
                    m = new r.a,
                    v = new r.a;
                if (t) {
                    var y = t.array;
                    for (o = 0, s = t.count; o < s; o += 3) u = 3 * y[o + 0], c = 3 * y[o + 1], l = 3 * y[o + 2], f.fromArray(n, u), p.fromArray(n, c), d.fromArray(n, l), m.subVectors(d, p), v.subVectors(f, p), m.cross(v), h[u] += m.x, h[u + 1] += m.y, h[u + 2] += m.z, h[c] += m.x, h[c + 1] += m.y, h[c + 2] += m.z, h[l] += m.x, h[l + 1] += m.y, h[l + 2] += m.z
                } else
                    for (o = 0, s = n.length; o < s; o += 9) f.fromArray(n, o), p.fromArray(n, o + 3), d.fromArray(n, o + 6), m.subVectors(d, p), v.subVectors(f, p), m.cross(v), h[o] = m.x, h[o + 1] = m.y, h[o + 2] = m.z, h[o + 3] = m.x, h[o + 4] = m.y, h[o + 5] = m.z, h[o + 6] = m.x, h[o + 7] = m.y, h[o + 8] = m.z;
                this.normalizeNormals(), e.normal.needsUpdate = !0
            }
        },
        merge: function(t, e) {
            if (t && t.isBufferGeometry) {
                void 0 === e && (e = 0, console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));
                var n = this.attributes;
                for (var r in n)
                    if (void 0 !== t.attributes[r])
                        for (var i = n[r].array, o = t.attributes[r], a = o.array, s = o.itemSize * e, u = Math.min(a.length, i.length - s), c = 0, l = s; c < u; c++, l++) i[l] = a[c];
                return this
            }
            console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", t)
        },
        normalizeNormals: function() {
            for (var t = this.attributes.normal, e = 0, n = t.count; e < n; e++) w.x = t.getX(e), w.y = t.getY(e), w.z = t.getZ(e), w.normalize(), t.setXYZ(e, w.x, w.y, w.z)
        },
        toNonIndexed: function() {
            function t(t, e) {
                for (var n = t.array, r = t.itemSize, i = new n.constructor(e.length * r), o = 0, s = 0, u = 0, c = e.length; u < c; u++) {
                    o = e[u] * r;
                    for (var l = 0; l < r; l++) i[s++] = n[o++]
                }
                return new a.a(i, r)
            }
            if (null === this.index) return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."), this;
            var e = new x,
                n = this.index.array,
                r = this.attributes;
            for (var i in r) {
                var o = t(r[i], n);
                e.setAttribute(i, o)
            }
            var s = this.morphAttributes;
            for (i in s) {
                for (var u = [], c = s[i], l = 0, h = c.length; l < h; l++) {
                    o = t(c[l], n);
                    u.push(o)
                }
                e.morphAttributes[i] = u
            }
            for (var f = this.groups, p = (l = 0, f.length); l < p; l++) {
                var d = f[l];
                e.addGroup(d.start, d.count, d.materialIndex)
            }
            return e
        },
        toJSON: function() {
            var t = {
                metadata: {
                    version: 4.5,
                    type: "BufferGeometry",
                    generator: "BufferGeometry.toJSON"
                }
            };
            if (t.uuid = this.uuid, t.type = this.type, "" !== this.name && (t.name = this.name), Object.keys(this.userData).length > 0 && (t.userData = this.userData), void 0 !== this.parameters) {
                var e = this.parameters;
                for (var n in e) void 0 !== e[n] && (t[n] = e[n]);
                return t
            }
            t.data = {
                attributes: {}
            };
            var r = this.index;
            null !== r && (t.data.index = {
                type: r.array.constructor.name,
                array: Array.prototype.slice.call(r.array)
            });
            var i = this.attributes;
            for (var n in i) {
                var o = (f = i[n]).toJSON();
                "" !== f.name && (o.name = f.name), t.data.attributes[n] = o
            }
            var a = {},
                s = !1;
            for (var n in this.morphAttributes) {
                for (var u = this.morphAttributes[n], c = [], l = 0, h = u.length; l < h; l++) {
                    var f;
                    o = (f = u[l]).toJSON();
                    "" !== f.name && (o.name = f.name), c.push(o)
                }
                c.length > 0 && (a[n] = c, s = !0)
            }
            s && (t.data.morphAttributes = a);
            var p = this.groups;
            p.length > 0 && (t.data.groups = JSON.parse(JSON.stringify(p)));
            var d = this.boundingSphere;
            return null !== d && (t.data.boundingSphere = {
                center: d.center.toArray(),
                radius: d.radius
            }), t
        },
        clone: function() {
            return (new x).copy(this)
        },
        copy: function(t) {
            var e, n, r;
            this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.name = t.name;
            var i = t.index;
            null !== i && this.setIndex(i.clone());
            var o = t.attributes;
            for (e in o) {
                var a = o[e];
                this.setAttribute(e, a.clone())
            }
            var s = t.morphAttributes;
            for (e in s) {
                var u = [],
                    c = s[e];
                for (n = 0, r = c.length; n < r; n++) u.push(c[n].clone());
                this.morphAttributes[e] = u
            }
            var l = t.groups;
            for (n = 0, r = l.length; n < r; n++) {
                var h = l[n];
                this.addGroup(h.start, h.count, h.materialIndex)
            }
            var f = t.boundingBox;
            null !== f && (this.boundingBox = f.clone());
            var p = t.boundingSphere;
            return null !== p && (this.boundingSphere = p.clone()), this.drawRange.start = t.drawRange.start, this.drawRange.count = t.drawRange.count, this.userData = t.userData, this
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(40),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";

    function r(t, e, n, r) {
        this.x = t || 0, this.y = e || 0, this.z = n || 0, this.w = void 0 !== r ? r : 1
    }
    n.d(e, "a", (function() {
        return r
    })), Object.defineProperties(r.prototype, {
        width: {
            get: function() {
                return this.z
            },
            set: function(t) {
                this.z = t
            }
        },
        height: {
            get: function() {
                return this.w
            },
            set: function(t) {
                this.w = t
            }
        }
    }), Object.assign(r.prototype, {
        isVector4: !0,
        set: function(t, e, n, r) {
            return this.x = t, this.y = e, this.z = n, this.w = r, this
        },
        setScalar: function(t) {
            return this.x = t, this.y = t, this.z = t, this.w = t, this
        },
        setX: function(t) {
            return this.x = t, this
        },
        setY: function(t) {
            return this.y = t, this
        },
        setZ: function(t) {
            return this.z = t, this
        },
        setW: function(t) {
            return this.w = t, this
        },
        setComponent: function(t, e) {
            switch (t) {
                case 0:
                    this.x = e;
                    break;
                case 1:
                    this.y = e;
                    break;
                case 2:
                    this.z = e;
                    break;
                case 3:
                    this.w = e;
                    break;
                default:
                    throw new Error("index is out of range: " + t)
            }
            return this
        },
        getComponent: function(t) {
            switch (t) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                case 2:
                    return this.z;
                case 3:
                    return this.w;
                default:
                    throw new Error("index is out of range: " + t)
            }
        },
        clone: function() {
            return new this.constructor(this.x, this.y, this.z, this.w)
        },
        copy: function(t) {
            return this.x = t.x, this.y = t.y, this.z = t.z, this.w = void 0 !== t.w ? t.w : 1, this
        },
        add: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(t, e)) : (this.x += t.x, this.y += t.y, this.z += t.z, this.w += t.w, this)
        },
        addScalar: function(t) {
            return this.x += t, this.y += t, this.z += t, this.w += t, this
        },
        addVectors: function(t, e) {
            return this.x = t.x + e.x, this.y = t.y + e.y, this.z = t.z + e.z, this.w = t.w + e.w, this
        },
        addScaledVector: function(t, e) {
            return this.x += t.x * e, this.y += t.y * e, this.z += t.z * e, this.w += t.w * e, this
        },
        sub: function(t, e) {
            return void 0 !== e ? (console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(t, e)) : (this.x -= t.x, this.y -= t.y, this.z -= t.z, this.w -= t.w, this)
        },
        subScalar: function(t) {
            return this.x -= t, this.y -= t, this.z -= t, this.w -= t, this
        },
        subVectors: function(t, e) {
            return this.x = t.x - e.x, this.y = t.y - e.y, this.z = t.z - e.z, this.w = t.w - e.w, this
        },
        multiplyScalar: function(t) {
            return this.x *= t, this.y *= t, this.z *= t, this.w *= t, this
        },
        applyMatrix4: function(t) {
            var e = this.x,
                n = this.y,
                r = this.z,
                i = this.w,
                o = t.elements;
            return this.x = o[0] * e + o[4] * n + o[8] * r + o[12] * i, this.y = o[1] * e + o[5] * n + o[9] * r + o[13] * i, this.z = o[2] * e + o[6] * n + o[10] * r + o[14] * i, this.w = o[3] * e + o[7] * n + o[11] * r + o[15] * i, this
        },
        divideScalar: function(t) {
            return this.multiplyScalar(1 / t)
        },
        setAxisAngleFromQuaternion: function(t) {
            this.w = 2 * Math.acos(t.w);
            var e = Math.sqrt(1 - t.w * t.w);
            return e < 1e-4 ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = t.x / e, this.y = t.y / e, this.z = t.z / e), this
        },
        setAxisAngleFromRotationMatrix: function(t) {
            var e, n, r, i, o = t.elements,
                a = o[0],
                s = o[4],
                u = o[8],
                c = o[1],
                l = o[5],
                h = o[9],
                f = o[2],
                p = o[6],
                d = o[10];
            if (Math.abs(s - c) < .01 && Math.abs(u - f) < .01 && Math.abs(h - p) < .01) {
                if (Math.abs(s + c) < .1 && Math.abs(u + f) < .1 && Math.abs(h + p) < .1 && Math.abs(a + l + d - 3) < .1) return this.set(1, 0, 0, 0), this;
                e = Math.PI;
                var m = (a + 1) / 2,
                    v = (l + 1) / 2,
                    y = (d + 1) / 2,
                    g = (s + c) / 4,
                    b = (u + f) / 4,
                    _ = (h + p) / 4;
                return m > v && m > y ? m < .01 ? (n = 0, r = .707106781, i = .707106781) : (r = g / (n = Math.sqrt(m)), i = b / n) : v > y ? v < .01 ? (n = .707106781, r = 0, i = .707106781) : (n = g / (r = Math.sqrt(v)), i = _ / r) : y < .01 ? (n = .707106781, r = .707106781, i = 0) : (n = b / (i = Math.sqrt(y)), r = _ / i), this.set(n, r, i, e), this
            }
            var w = Math.sqrt((p - h) * (p - h) + (u - f) * (u - f) + (c - s) * (c - s));
            return Math.abs(w) < .001 && (w = 1), this.x = (p - h) / w, this.y = (u - f) / w, this.z = (c - s) / w, this.w = Math.acos((a + l + d - 1) / 2), this
        },
        min: function(t) {
            return this.x = Math.min(this.x, t.x), this.y = Math.min(this.y, t.y), this.z = Math.min(this.z, t.z), this.w = Math.min(this.w, t.w), this
        },
        max: function(t) {
            return this.x = Math.max(this.x, t.x), this.y = Math.max(this.y, t.y), this.z = Math.max(this.z, t.z), this.w = Math.max(this.w, t.w), this
        },
        clamp: function(t, e) {
            return this.x = Math.max(t.x, Math.min(e.x, this.x)), this.y = Math.max(t.y, Math.min(e.y, this.y)), this.z = Math.max(t.z, Math.min(e.z, this.z)), this.w = Math.max(t.w, Math.min(e.w, this.w)), this
        },
        clampScalar: function(t, e) {
            return this.x = Math.max(t, Math.min(e, this.x)), this.y = Math.max(t, Math.min(e, this.y)), this.z = Math.max(t, Math.min(e, this.z)), this.w = Math.max(t, Math.min(e, this.w)), this
        },
        clampLength: function(t, e) {
            var n = this.length();
            return this.divideScalar(n || 1).multiplyScalar(Math.max(t, Math.min(e, n)))
        },
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), this
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this
        },
        dot: function(t) {
            return this.x * t.x + this.y * t.y + this.z * t.z + this.w * t.w
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
        },
        manhattanLength: function() {
            return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
        },
        normalize: function() {
            return this.divideScalar(this.length() || 1)
        },
        setLength: function(t) {
            return this.normalize().multiplyScalar(t)
        },
        lerp: function(t, e) {
            return this.x += (t.x - this.x) * e, this.y += (t.y - this.y) * e, this.z += (t.z - this.z) * e, this.w += (t.w - this.w) * e, this
        },
        lerpVectors: function(t, e, n) {
            return this.subVectors(e, t).multiplyScalar(n).add(t)
        },
        equals: function(t) {
            return t.x === this.x && t.y === this.y && t.z === this.z && t.w === this.w
        },
        fromArray: function(t, e) {
            return void 0 === e && (e = 0), this.x = t[e], this.y = t[e + 1], this.z = t[e + 2], this.w = t[e + 3], this
        },
        toArray: function(t, e) {
            return void 0 === t && (t = []), void 0 === e && (e = 0), t[e] = this.x, t[e + 1] = this.y, t[e + 2] = this.z, t[e + 3] = this.w, t
        },
        fromBufferAttribute: function(t, e, n) {
            return void 0 !== n && console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."), this.x = t.getX(e), this.y = t.getY(e), this.z = t.getZ(e), this.w = t.getW(e), this
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "p", (function() {
        return o
    })), n.d(e, "d", (function() {
        return a
    })), n.d(e, "c", (function() {
        return s
    })), n.d(e, "o", (function() {
        return u
    })), n.d(e, "a", (function() {
        return c
    })), n.d(e, "e", (function() {
        return l
    })), n.d(e, "f", (function() {
        return h
    })), n.d(e, "k", (function() {
        return f
    })), n.d(e, "g", (function() {
        return p
    })), n.d(e, "h", (function() {
        return d
    })), n.d(e, "j", (function() {
        return m
    })), n.d(e, "l", (function() {
        return v
    })), n.d(e, "n", (function() {
        return y
    })), n.d(e, "b", (function() {
        return g
    })), n.d(e, "i", (function() {
        return b
    })), n.d(e, "m", (function() {
        return w
    }));
    n(301), n(5), n(1), n(26);
    var r = n(302),
        i = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        o = function(t) {
            return t ? (t ^ 16 * Math.random() >> t / 4).toString(16) : ("" + [1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, o)
        },
        a = function(t) {
            return new Promise((function(e, n) {
                setTimeout(e, t)
            }))
        },
        s = function(t) {
            var e, n = -1;
            return {
                promise: new Promise((function(r, i) {
                    e = r, n = window.setTimeout(r, t)
                })).then((function() {
                    n = -1
                })),
                cancel: function() {
                    -1 !== n && (window.clearTimeout(n), e())
                }
            }
        },
        u = function(t) {
            var e, n, r = {};
            try {
                for (var o = i(t), a = o.next(); !a.done; a = o.next()) {
                    var s = a.value;
                    r[s] = s
                }
            } catch (t) {
                e = {
                    error: t
                }
            } finally {
                try {
                    a && !a.done && (n = o.return) && n.call(o)
                } finally {
                    if (e) throw e.error
                }
            }
            return r
        },
        c = function(t, e) {
            var n, r;
            if (e.setLength(0), 0 === t.length) return e;
            var o = 0;
            try {
                for (var a = i(t), s = a.next(); !s.done; s = a.next()) {
                    var u = s.value;
                    e.add(u), o++
                }
            } catch (t) {
                n = {
                    error: t
                }
            } finally {
                try {
                    s && !s.done && (r = a.return) && r.call(a)
                } finally {
                    if (n) throw n.error
                }
            }
            return e.divideScalar(o), e
        },
        l = function(t) {
            return !t.replace(/\n/g, "").trim().length
        },
        h = function(t, e) {
            for (var n = Math.min(t.length, e.length), r = 0; r < n; r++)
                if (t[r] !== e[r]) return !1;
            return !0
        },
        f = function(t, e, n) {
            if (void 0 === n && (n = !0), 0 === t.length) return null;
            n && t.sort((function(t, e) {
                return t - e
            }));
            var r = e / 100;
            return t[Math.floor(t.length * r)]
        },
        p = function(t, e) {
            var n, r;
            try {
                for (var o = i(e), a = o.next(); !a.done; a = o.next()) {
                    if (!(0, a.value)(t)) return !1
                }
            } catch (t) {
                n = {
                    error: t
                }
            } finally {
                try {
                    a && !a.done && (r = o.return) && r.call(o)
                } finally {
                    if (n) throw n.error
                }
            }
            return !0
        },
        d = function(t) {
            return [m(t.getMonth() + 1), ".", m(t.getDate()), ".", t.getFullYear(), "_", m(t.getHours()), ".", m(t.getMinutes()), ".", m(t.getSeconds())].join("")
        },
        m = function(t, e, n, r) {
            void 0 === e && (e = 2), void 0 === n && (n = "0"), void 0 === r && (r = 10);
            var i = t.toString(r),
                o = e - i.length + 1;
            return o > 0 ? new Array(o).join(n) + i : i
        },
        v = function(t) {
            for (var e = "", n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", r = 0; r < t; r++) e += n.charAt(Math.floor(Math.random() * n.length));
            return e
        },
        y = function(t) {
            for (var e = [], n = 0; n < t.length; n += 8192) e.push(String.fromCharCode.apply(null, t.subarray(n, n + 8192)));
            return btoa(e.join(""))
        },
        g = function(t) {
            var e, n;
            void 0 === t && (t = []);
            var r = {};
            try {
                for (var o = i(t), a = o.next(); !a.done; a = o.next()) {
                    r[a.value] = !0
                }
            } catch (t) {
                e = {
                    error: t
                }
            } finally {
                try {
                    a && !a.done && (n = o.return) && n.call(o)
                } finally {
                    if (e) throw e.error
                }
            }
            return r
        };

    function b(t, e) {
        return t.hasOwnProperty(e)
    }
    var _, w = function(t, e, n) {
        if (!(Math.abs(t) < 4294967295) || !(e < 32) || !(n < 32)) throw new r.a("argument out of range");
        var i = 1 & (t >>> e ^ t >>> n);
        return (t ^= i << e | i << n) >>> 0
    };
    _ = {}
}, function(t, e, n) {
    "use strict";
    n.d(e, "c", (function() {
        return o
    })), n.d(e, "f", (function() {
        return y
    })), n.d(e, "d", (function() {
        return g
    })), n.d(e, "b", (function() {
        return b
    })), n.d(e, "e", (function() {
        return _
    })), n.d(e, "a", (function() {
        return w
    }));
    var r, i, o, a = n(23),
        s = n(128),
        u = n(3),
        c = n(9),
        l = n(40),
        h = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        f = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        p = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        d = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        m = new u.a("datasync");
    ! function(t) {
        t[t.NONE = 0] = "NONE", t[t.LEGACY_SYNC = 1] = "LEGACY_SYNC", t[t.IGNORE_LEGACY_SAVE = 2] = "IGNORE_LEGACY_SAVE"
    }(i || (i = {})),
    function(t) {
        t.FLOOR_NAMES = "FLOOR_NAMES", t.HIGHLIGHTS = "HIGHLIGHTS", t.LABELS = "LABELS", t.MATTERTAGS = "MATTERTAGS", t.MEASUREMENTS = "MEASUREMENTS", t.SETTINGS = "SETTINGS", t.START_LOCATION = "START_LOCATION", t.SWEEPS = "SWEEPS"
    }(o || (o = {}));
    var v, y = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return h(e, t), e
        }(c.a),
        g = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.dirty = !1, e.dirtyWS2 = !1, e.sessionsSaving = 0, e
            }
            return h(e, t), e
        }(l.a);
    ! function(t) {
        t[t.IDLE = 0] = "IDLE", t[t.LOADING = 1] = "LOADING", t[t.CLEAN = 2] = "CLEAN", t[t.DIRTY = 3] = "DIRTY"
    }(v || (v = {}));
    var b = function() {
            function t(e, n) {
                this.state = v.IDLE, this.diff = {}, this.deletedKeys = [], this.config = e, this.collectionData = n, this.config.extras || (this.config.extras = 0), this.config.extras & i.LEGACY_SYNC || t.configuredSyncs.push(this)
            }
            return t.setGlobalStore = function(t) {
                var e = this;
                if (this.sharedStore) throw Error("Attempting to overwrite sync's internal store");
                this.sharedStore = t, this.sharedStore.read().then((function(t) {
                    e.sharedState.lastPublished = t.lastPublished, e.sharedState.commit()
                }))
            }, t.setMessageBus = function(t) {
                this.msgBus = t
            }, t.setAfterPublish = function(e) {
                t.afterPublishCallback = e
            }, t.publishAll = function() {
                return f(this, void 0, void 0, (function() {
                    var t;
                    return p(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return t = this.configuredSyncs.map((function(t) {
                                    return t.publish()
                                })), [4, Promise.all(t)];
                            case 1:
                                return e.sent(), m.debug("sharedState.dirty = false"), this.sharedState.dirty = !1, this.sharedState.lastPublished = new Date, this.sharedState.commit(), this.sharedStore.update(this.sharedState), this.afterPublishCallback ? [4, this.afterPublishCallback()] : [3, 3];
                            case 2:
                                e.sent(), e.label = 3;
                            case 3:
                                return [2, this.sharedState.lastPublished]
                        }
                    }))
                }))
            }, t.resetEditStore = function(t) {
                return f(this, void 0, void 0, (function() {
                    var e;
                    return p(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                return (e = this.configuredSyncs.find((function(e) {
                                    return e.config.editStoreKey === t
                                }))) ? [4, e.reset()] : [3, 2];
                            case 1:
                                n.sent(), n.label = 2;
                            case 2:
                                return [2]
                        }
                    }))
                }))
            }, t.getStateOfEditStores = function() {
                var t = [];
                return this.configuredSyncs.forEach((function(e) {
                    void 0 !== e.config.editStoreKey && t.push({
                        key: e.config.editStoreKey,
                        dirty: e.isDirty()
                    })
                })), t
            }, Object.defineProperty(t, "globalSession", {
                get: function() {
                    return this.sharedState
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.isDirty = function() {
                return this.state === v.DIRTY
            }, t.prototype.load = function() {
                return f(this, void 0, Promise, (function() {
                    var t, e, n, r, i, o, s, u, c, l, h, f, d, m = this;
                    return p(this, (function(p) {
                        switch (p.label) {
                            case 0:
                                if (this.state !== v.IDLE) throw Error("Data already loaded");
                                return this.setState(v.LOADING), t = this.config.publishStores && this.config.publishStores.length > 0, e = t ? this.config.publishStores.map((function(t) {
                                    return m.loadStore(t)
                                })) : [], this.config.editStore && e.push(this.loadStore(this.config.editStore)), this.config.legacyEditStore && e.push(this.loadStore(this.config.legacyEditStore, !0)), [4, Promise.all(e)];
                            case 1:
                                if (n = p.sent(), r = function(t, e, n) {
                                        return e && e.modified && n.modified && e.modified > n.modified ? e : (t && m.setState(v.DIRTY), n)
                                    }, i = function(t, e, n, r, i) {
                                        if (!e) return t && m.setState(v.DIRTY), n;
                                        if (r && i && i < r) return e;
                                        for (var o in n) n.hasOwnProperty(o) && (t && m.setState(v.DIRTY), e[o] = n[o]);
                                        return e
                                    }, this.data = n[0].data || {}, this.setState(v.CLEAN), this.publishedData = Object(a.a)(this.data), this.collectionData) {
                                    for (s = 1; s < n.length; s++)
                                        if (u = s > this.publish.length, (o = n[s]).data) {
                                            for (d in o.data) o.data.hasOwnProperty(d) && (this.data[d] ? this.config.partialData ? this.data[d] = i(u, this.data[d], o.data[d]) : this.data[d] = r(u, this.data[d], o.data[d]) : this.data[d] = o.data[d]);
                                            if (o.isLegacy)
                                                for (d in this.data) o.data[d] || (u && this.setState(v.DIRTY), this.data[d] = null, this.diff[d] = null);
                                            o.isLegacy || (this.diff = o.data)
                                        }
                                } else
                                    for (s = 1; s < n.length; s++) u = s > this.publish.length, (c = n[s].data) && (l = c, this.config.partialData ? (h = this.data.modified instanceof Date ? this.data.modified : void 0, f = l.modified instanceof Date ? l.modified : void 0, this.data = i(u, this.data, l, h, f)) : this.data = r(u, this.data, l));
                                for (d in this.data) this.data[d] || (this.deletedKeys.push(d), delete this.data[d]);
                                return [2, this.data]
                        }
                    }))
                }))
            }, t.prototype.loadStore = function(t, e) {
                return void 0 === e && (e = !1), t.read().then((function(t) {
                    return {
                        data: t,
                        isLegacy: e
                    }
                }))
            }, Object.defineProperty(t.prototype, "monitorNeeded", {
                get: function() {
                    return void 0 !== this.config.editStore || void 0 !== this.config.legacyEditStore || this.config.publishStores.length > 0
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.addMonitor = function(t) {
                var e = this;
                if (!this.monitorNeeded) throw Error("Adding a monitor unnecessarily!");
                this._monitor = t;
                this._monitor.onChanged((function() {
                    return f(e, void 0, void 0, (function() {
                        var t, e, n;
                        return p(this, (function(r) {
                            switch (r.label) {
                                case 0:
                                    if (this.onDataChanged(), this.config.safeKeys) {
                                        if (t = !1, this.collectionData)
                                            for (e in this.diff)
                                                for (n in this.diff[e]) - 1 !== this.config.safeKeys.indexOf(n) && (t = !0);
                                        else
                                            for (n in this.diff) - 1 !== this.config.safeKeys.indexOf(n) && (t = !0);
                                        if (!t) return [2]
                                    }
                                    return this.setState(v.DIRTY), [4, this.saveSession()];
                                case 1:
                                    return r.sent(), [2]
                            }
                        }))
                    }))
                }))
            }, Object.defineProperty(t.prototype, "monitor", {
                get: function() {
                    return this._monitor
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.setState = function(e) {
                this.config.extras & i.LEGACY_SYNC ? e !== v.DIRTY || t.sharedState.dirtyWS2 || (m.debug("sharedState.dirtyWS2 = true"), t.sharedState.dirtyWS2 = !0, t.sharedState.commit()) : (this.state = e, this.state !== v.DIRTY || t.sharedState.dirty || (m.debug("sharedState.dirty = true"), t.sharedState.dirty = !0, t.sharedState.commit()))
            }, t.prototype.saveSession = function() {
                return f(this, void 0, Promise, (function() {
                    return p(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                m.info("Saving session..."), t.sharedState.sessionsSaving++, t.sharedState.commit(), e.label = 1;
                            case 1:
                                return e.trys.push([1, 6, , 7]), this.config.editStore ? [4, this.config.editStore.update(this.data, this.diff)] : [3, 3];
                            case 2:
                                e.sent(), e.label = 3;
                            case 3:
                                return !this.config.legacyEditStore || this.config.extras & i.IGNORE_LEGACY_SAVE ? [3, 5] : [4, this.config.legacyEditStore.update(this.data, this.diff)];
                            case 4:
                                e.sent(), e.label = 5;
                            case 5:
                                return [3, 7];
                            case 6:
                                return e.sent(), t.msgBus.broadcast(new y), [3, 7];
                            case 7:
                                return t.sharedState.sessionsSaving--, t.sharedState.commit(), [2]
                        }
                    }))
                }))
            }, t.prototype.publish = function() {
                return f(this, void 0, Promise, (function() {
                    var t, e, n, r, o, s, u, c;
                    return p(this, (function(l) {
                        switch (l.label) {
                            case 0:
                                if (this.state !== v.DIRTY) return [2];
                                l.label = 1;
                            case 1:
                                l.trys.push([1, 10, 11, 12]), n = d(this.config.publishStores), r = n.next(), l.label = 2;
                            case 2:
                                if (r.done) return [3, 9];
                                if (o = r.value, !this.isWritable(o)) return [3, 7];
                                l.label = 3;
                            case 3:
                                return l.trys.push([3, 5, , 6]), [4, o.update(this.data, this.diff)];
                            case 4:
                                return l.sent(), this.publishedData = Object(a.a)(this.data), [3, 6];
                            case 5:
                                throw s = l.sent(), m.error("Failed to publish data: ", o.config, this.data, this.diff), s;
                            case 6:
                                return [3, 8];
                            case 7:
                                throw Error("Trying to publish with readonly store");
                            case 8:
                                return r = n.next(), [3, 2];
                            case 9:
                                return [3, 12];
                            case 10:
                                return u = l.sent(), t = {
                                    error: u
                                }, [3, 12];
                            case 11:
                                try {
                                    r && !r.done && (e = n.return) && e.call(n)
                                } finally {
                                    if (t) throw t.error
                                }
                                return [7];
                            case 12:
                                return l.trys.push([12, 17, , 18]), this.config.editStore ? [4, this.config.editStore.delete()] : [3, 14];
                            case 13:
                                l.sent(), l.label = 14;
                            case 14:
                                return !this.config.legacyEditStore || this.config.extras & i.IGNORE_LEGACY_SAVE ? [3, 16] : [4, this.config.legacyEditStore.delete()];
                            case 15:
                                l.sent(), l.label = 16;
                            case 16:
                                return this.setState(v.CLEAN), [3, 18];
                            case 17:
                                throw c = l.sent(), Error("Failed to clear session data after publishing: " + c);
                            case 18:
                                return [2]
                        }
                    }))
                }))
            }, t.prototype.reset = function() {
                return f(this, void 0, Promise, (function() {
                    return p(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                switch (this.state) {
                                    case v.CLEAN:
                                        return [3, 1];
                                    case v.IDLE:
                                        return [3, 2];
                                    case v.LOADING:
                                        return [3, 3];
                                    case v.DIRTY:
                                        return [3, 4]
                                }
                                return [3, 12];
                            case 1:
                                return [2, this.data];
                            case 2:
                                throw Error("Attempting to reset a Sync that was not loaded.");
                            case 3:
                                throw Error("Attempting to reset a Sync that is still loading.");
                            case 4:
                                m.info("Clearing session..."), t.sharedState.sessionsSaving++, t.sharedState.commit(), e.label = 5;
                            case 5:
                                return e.trys.push([5, 10, , 11]), this.config.editStore ? [4, this.config.editStore.delete()] : [3, 7];
                            case 6:
                                e.sent(), e.label = 7;
                            case 7:
                                return !this.config.legacyEditStore || this.config.extras & i.IGNORE_LEGACY_SAVE ? [3, 9] : [4, this.config.legacyEditStore.delete()];
                            case 8:
                                e.sent(), e.label = 9;
                            case 9:
                                return this.data = Object(a.a)(this.publishedData), this.setState(v.CLEAN), [3, 11];
                            case 10:
                                return e.sent(), t.msgBus.broadcast(new y), [3, 11];
                            case 11:
                                return t.sharedState.sessionsSaving--, t.sharedState.commit(), [2, this.data];
                            case 12:
                                return [2]
                        }
                    }))
                }))
            }, t.prototype.isWritable = function(t) {
                return void 0 !== t.update
            }, t.sharedState = new g, t.configuredSyncs = [], t
        }(),
        _ = function(t) {
            function e(e) {
                return t.call(this, e, !1) || this
            }
            return h(e, t), e.prototype.onDataChanged = function() {
                var t = this.monitor.getDiffRecord();
                this.diff = t, this.diff.modified = new Date
            }, e
        }(b),
        w = function(t) {
            function e(e) {
                return t.call(this, e, !0) || this
            }
            return h(e, t), e.prototype.onDataChanged = function() {
                var t, e, n = this.monitor.getDiffRecord();
                try {
                    for (var r = d(n), i = r.next(); !i.done; i = r.next()) {
                        var o = i.value;
                        switch (o.action) {
                            case s.a.added:
                                this.diff[o.index] = o.diff;
                                break;
                            case s.a.updated:
                                this.diff[o.index] || (this.diff[o.index] = {}), Object(a.e)(this.diff[o.index], o.diff);
                                break;
                            case s.a.removed:
                                delete this.diff[o.index], this.data[o.index] = null
                        }
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        i && !i.done && (e = r.return) && e.call(r)
                    } finally {
                        if (t) throw t.error
                    }
                }
                this.monitor.clearDiffRecord()
            }, e
        }(b);
    ! function(t) {
        function e(e) {
            return t.call(this, e, !0) || this
        }
        h(e, t), e.prototype.load = function() {
            return f(this, void 0, Promise, (function() {
                var e;
                return p(this, (function(n) {
                    switch (n.label) {
                        case 0:
                            return [4, t.prototype.load.call(this)];
                        case 1:
                            return (e = n.sent()) && 0 !== Object.keys(e).length ? [2, e] : [2, []]
                    }
                }))
            }))
        }, e.prototype.addMonitor = function(t) {
            throw Error("ArraySync is deprecated. Convert to CollectionSync to add save support")
        }, e.prototype.onDataChanged = function() {}
    }(b)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return R
    }));
    var r = n(1),
        i = n(5),
        o = n(49),
        a = n(76),
        s = n(7),
        u = n(17),
        c = n(145),
        l = n(120),
        h = n(0),
        f = n(54),
        p = n(24),
        d = new s.a,
        m = new a.a,
        v = new o.a,
        y = new r.a,
        g = new r.a,
        b = new r.a,
        _ = new r.a,
        w = new r.a,
        x = new r.a,
        E = new r.a,
        S = new r.a,
        T = new r.a,
        M = new i.a,
        O = new i.a,
        P = new i.a,
        A = new r.a,
        L = new r.a;

    function R(t, e) {
        u.a.call(this), this.type = "Mesh", this.geometry = void 0 !== t ? t : new p.a, this.material = void 0 !== e ? e : new f.a({
            color: 16777215 * Math.random()
        }), this.drawMode = h.qc, this.updateMorphTargets()
    }

    function D(t, e, n, r, i, o, a, s) {
        if (null === (e.side === h.h ? r.intersectTriangle(a, o, i, !0, s) : r.intersectTriangle(i, o, a, e.side !== h.w, s))) return null;
        L.copy(s), L.applyMatrix4(t.matrixWorld);
        var u = n.ray.origin.distanceTo(L);
        return u < n.near || u > n.far ? null : {
            distance: u,
            point: L.clone(),
            object: t
        }
    }

    function I(t, e, n, r, o, a, s, u, h, f, p) {
        y.fromBufferAttribute(o, h), g.fromBufferAttribute(o, f), b.fromBufferAttribute(o, p);
        var d = t.morphTargetInfluences;
        if (e.morphTargets && a && d) {
            E.set(0, 0, 0), S.set(0, 0, 0), T.set(0, 0, 0);
            for (var m = 0, v = a.length; m < v; m++) {
                var L = d[m],
                    R = a[m];
                0 !== L && (_.fromBufferAttribute(R, h), w.fromBufferAttribute(R, f), x.fromBufferAttribute(R, p), E.addScaledVector(_.sub(y), L), S.addScaledVector(w.sub(g), L), T.addScaledVector(x.sub(b), L))
            }
            y.add(E), g.add(S), b.add(T)
        }
        var I = D(t, e, n, r, y, g, b, A);
        if (I) {
            s && (M.fromBufferAttribute(s, h), O.fromBufferAttribute(s, f), P.fromBufferAttribute(s, p), I.uv = c.a.getUV(A, y, g, b, M, O, P, new i.a)), u && (M.fromBufferAttribute(u, h), O.fromBufferAttribute(u, f), P.fromBufferAttribute(u, p), I.uv2 = c.a.getUV(A, y, g, b, M, O, P, new i.a));
            var C = new l.a(h, f, p);
            c.a.getNormal(y, g, b, C.normal), I.face = C
        }
        return I
    }
    R.prototype = Object.assign(Object.create(u.a.prototype), {
        constructor: R,
        isMesh: !0,
        setDrawMode: function(t) {
            this.drawMode = t
        },
        copy: function(t) {
            return u.a.prototype.copy.call(this, t), this.drawMode = t.drawMode, void 0 !== t.morphTargetInfluences && (this.morphTargetInfluences = t.morphTargetInfluences.slice()), void 0 !== t.morphTargetDictionary && (this.morphTargetDictionary = Object.assign({}, t.morphTargetDictionary)), this
        },
        updateMorphTargets: function() {
            var t, e, n, r = this.geometry;
            if (r.isBufferGeometry) {
                var i = r.morphAttributes,
                    o = Object.keys(i);
                if (o.length > 0) {
                    var a = i[o[0]];
                    if (void 0 !== a)
                        for (this.morphTargetInfluences = [], this.morphTargetDictionary = {}, t = 0, e = a.length; t < e; t++) n = a[t].name || String(t), this.morphTargetInfluences.push(0), this.morphTargetDictionary[n] = t
                }
            } else {
                var s = r.morphTargets;
                void 0 !== s && s.length > 0 && console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")
            }
        },
        raycast: function(t, e) {
            var n, r = this.geometry,
                o = this.material,
                a = this.matrixWorld;
            if (void 0 !== o && (null === r.boundingSphere && r.computeBoundingSphere(), v.copy(r.boundingSphere), v.applyMatrix4(a), !1 !== t.ray.intersectsSphere(v) && (d.getInverse(a), m.copy(t.ray).applyMatrix4(d), null === r.boundingBox || !1 !== m.intersectsBox(r.boundingBox))))
                if (this.drawMode === h.qc) {
                    if (r.isBufferGeometry) {
                        var s, u, l, f, p, y, g, b, _, w = r.index,
                            x = r.attributes.position,
                            E = r.morphAttributes.position,
                            S = r.attributes.uv,
                            T = r.attributes.uv2,
                            L = r.groups,
                            R = r.drawRange;
                        if (null !== w)
                            if (Array.isArray(o))
                                for (f = 0, y = L.length; f < y; f++)
                                    for (_ = o[(b = L[f]).materialIndex], p = Math.max(b.start, R.start), g = Math.min(b.start + b.count, R.start + R.count); p < g; p += 3) s = w.getX(p), u = w.getX(p + 1), l = w.getX(p + 2), (n = I(this, _, t, m, x, E, S, T, s, u, l)) && (n.faceIndex = Math.floor(p / 3), n.face.materialIndex = b.materialIndex, e.push(n));
                            else
                                for (f = Math.max(0, R.start), y = Math.min(w.count, R.start + R.count); f < y; f += 3) s = w.getX(f), u = w.getX(f + 1), l = w.getX(f + 2), (n = I(this, o, t, m, x, E, S, T, s, u, l)) && (n.faceIndex = Math.floor(f / 3), e.push(n));
                        else if (void 0 !== x)
                            if (Array.isArray(o))
                                for (f = 0, y = L.length; f < y; f++)
                                    for (_ = o[(b = L[f]).materialIndex], p = Math.max(b.start, R.start), g = Math.min(b.start + b.count, R.start + R.count); p < g; p += 3)(n = I(this, _, t, m, x, E, S, T, s = p, u = p + 1, l = p + 2)) && (n.faceIndex = Math.floor(p / 3), n.face.materialIndex = b.materialIndex, e.push(n));
                            else
                                for (f = Math.max(0, R.start), y = Math.min(x.count, R.start + R.count); f < y; f += 3)(n = I(this, o, t, m, x, E, S, T, s = f, u = f + 1, l = f + 2)) && (n.faceIndex = Math.floor(f / 3), e.push(n))
                    } else if (r.isGeometry) {
                        var C, N, U, j, k = Array.isArray(o),
                            F = r.vertices,
                            B = r.faces,
                            G = r.faceVertexUvs[0];
                        G.length > 0 && (j = G);
                        for (var z = 0, H = B.length; z < H; z++) {
                            var V = B[z],
                                W = k ? o[V.materialIndex] : o;
                            if (void 0 !== W && (C = F[V.a], N = F[V.b], U = F[V.c], n = D(this, W, t, m, C, N, U, A))) {
                                if (j && j[z]) {
                                    var X = j[z];
                                    M.copy(X[0]), O.copy(X[1]), P.copy(X[2]), n.uv = c.a.getUV(A, C, N, U, M, O, P, new i.a)
                                }
                                n.face = V, n.faceIndex = z, e.push(n)
                            }
                        }
                    }
                } else console.warn("THREE.Mesh: TriangleStripDrawMode and TriangleFanDrawMode are not supported by .raycast().")
        },
        clone: function() {
            return new this.constructor(this.geometry, this.material).copy(this)
        }
    })
}, function(t, e, n) {
    "use strict";

    function r(t) {
        var e = {};
        for (var n in t)
            for (var r in e[n] = {}, t[n]) {
                var i = t[n][r];
                i && (i.isColor || i.isMatrix3 || i.isMatrix4 || i.isVector2 || i.isVector3 || i.isVector4 || i.isTexture) ? e[n][r] = i.clone() : Array.isArray(i) ? e[n][r] = i.slice() : e[n][r] = i
            }
        return e
    }

    function i(t) {
        for (var e = {}, n = 0; n < t.length; n++) {
            var i = r(t[n]);
            for (var o in i) e[o] = i[o]
        }
        return e
    }
    n.d(e, "b", (function() {
        return r
    })), n.d(e, "c", (function() {
        return i
    })), n.d(e, "a", (function() {
        return o
    }));
    var o = {
        clone: r,
        merge: i
    }
}, function(t, e, n) {
    "use strict";
    var r, i = n(71),
        o = n(153),
        a = n(52),
        s = n(136),
        u = n(100),
        c = n(156),
        l = n(157),
        h = n(158),
        f = n(199),
        p = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        d = function(t) {
            function e(e, n, r) {
                var i = t.call(this) || this;
                return i.position = e, i.buttons = n, i.threshold = r, i
            }
            return p(e, t), e
        }(a.a),
        m = function(t) {
            function e() {
                return t.call(this) || this
            }
            return p(e, t), e
        }(a.a),
        v = n(86);
    n(101);
    n.d(e, "m", (function() {
        return i.a
    })), n.d(e, "n", (function() {
        return i.b
    })), n.d(e, "f", (function() {
        return o.a
    })), n.d(e, "a", (function() {
        return s.b
    })), n.d(e, "b", (function() {
        return u.a
    })), n.d(e, "d", (function() {
        return u.c
    })), n.d(e, "c", (function() {
        return u.b
    })), n.d(e, "j", (function() {
        return c.b
    })), n.d(e, "i", (function() {
        return c.a
    })), n.d(e, "l", (function() {
        return l.b
    })), n.d(e, "k", (function() {
        return l.a
    })), n.d(e, "p", (function() {
        return h.b
    })), n.d(e, "o", (function() {
        return h.a
    })), n.d(e, "q", (function() {
        return f.a
    })), n.d(e, "h", (function() {
        return d
    })), n.d(e, "g", (function() {
        return m
    })), n.d(e, "e", (function() {
        return v.a
    })), n.d(e, "r", (function() {
        return v.b
    }))
}, function(t, e, n) {
    "use strict";
    var r, i;
    n.d(e, "a", (function() {
            return r
        })), n.d(e, "b", (function() {
            return i
        })), n.d(e, "c", (function() {
            return o
        })), n.d(e, "d", (function() {
            return a
        })),
        function(t) {
            t[t.PRIMARY = 0] = "PRIMARY", t[t.MIDDLE = 1] = "MIDDLE", t[t.SECONDARY = 2] = "SECONDARY", t[t.BACK = 3] = "BACK", t[t.FORWARD = 4] = "FORWARD", t[t.COUNT = 5] = "COUNT"
        }(r || (r = {})),
        function(t) {
            t[t.NONE = 0] = "NONE", t[t.PRIMARY = 1] = "PRIMARY", t[t.SECONDARY = 4] = "SECONDARY", t[t.MIDDLE = 2] = "MIDDLE", t[t.BACK = 8] = "BACK", t[t.FORWARD = 16] = "FORWARD", t[t.ALL = 31] = "ALL"
        }(i || (i = {}));
    var o = function(t) {
            var e = i[r[t]];
            return "number" == typeof e ? e : void 0
        },
        a = function(t) {
            var e = r[i[t]];
            return "number" == typeof e ? e : void 0
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    }));
    var r = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        i = function() {
            function t() {
                var t = this;
                this.base = new Promise((function(e, n) {
                    t.resolver = e, t.rejecter = n
                })), this._promise = new o(this.base, this), this.progressCallbacks = []
            }
            return t.prototype.then = function(t, e) {
                return this.base.then(t, e)
            }, t.prototype.catch = function(t) {
                return this.base.catch(t)
            }, t.prototype.resolve = function(t) {
                return this.resolver(t), this
            }, t.prototype.reject = function(t) {
                return this.rejecter(t), this
            }, t.prototype.notify = function(t) {
                var e, n;
                try {
                    for (var i = r(this.progressCallbacks), o = i.next(); !o.done; o = i.next()) {
                        (0, o.value)(t)
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        o && !o.done && (n = i.return) && n.call(i)
                    } finally {
                        if (e) throw e.error
                    }
                }
            }, t.prototype.progress = function(t) {
                return this.progressCallbacks.push(t), this
            }, t.prototype.promise = function() {
                return this._promise
            }, t.prototype.nativePromise = function() {
                return this.base
            }, t.resolve = function() {
                var e = new t;
                return e.resolve(), e.promise()
            }, t.reject = function(e) {
                var n = new t;
                return n.reject(e), n.promise()
            }, t.all = function(e) {
                var n, i, o = [];
                try {
                    for (var a = r(e), s = a.next(); !s.done; s = a.next()) {
                        var u = s.value;
                        u.nativePromise ? o.push(u.nativePromise()) : o.push(u)
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        s && !s.done && (i = a.return) && i.call(a)
                    } finally {
                        if (n) throw n.error
                    }
                }
                var c = new t;
                return Promise.all(o).then((function(t) {
                    return c.resolve(t)
                }), (function(t) {
                    return c.reject(t)
                })), c.promise()
            }, t
        }(),
        o = function() {
            function t(t, e) {
                this.basePromise = t, this.baseDeferred = e
            }
            return t.prototype.then = function(t, e) {
                return this.baseDeferred.then(t, e), this
            }, t.prototype.catch = function(t) {
                return this.baseDeferred.catch(t), this
            }, t.prototype.progress = function(t) {
                return this.baseDeferred.progress(t), this
            }, t.prototype.nativePromise = function() {
                return this.basePromise
            }, t
        }()
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    })), n.d(e, "b", (function() {
        return i
    }));
    var r = function(t) {
            if (t) {
                var e = t.valueOf();
                if (!isNaN(e)) return t.toISOString()
            }
            return (new Date).toISOString()
        },
        i = function(t) {
            if (t) {
                var e = new Date(t);
                if (!isNaN(e.valueOf())) return e
            }
            return new Date
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "c", (function() {
        return r
    })), n.d(e, "d", (function() {
        return i
    })), n.d(e, "b", (function() {
        return o
    })), n.d(e, "a", (function() {
        return a
    }));
    var r = {
            FADE_DURATION: 300,
            LABEL_HIDDEN_OPACITY: .15,
            DEPTH_WRITE_THRESHOD: .15,
            ALIGN_LABELS: !1,
            LABEL_SIZING: .14,
            LABEL_NDC_SCALEFACTOR: .5,
            LABEL_ASPECT_SCALEFACTOR: .035,
            OFFSET_TOWARDS_CAMERA: .25,
            HIDE_LABELS: !1
        },
        i = {
            dottedLineDefault: 2,
            lineDefault: 6,
            lineSelected: 6,
            endpointDefault: 2.5,
            endpointSelected: 3.75
        },
        o = .01,
        a = 5
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return o
    })), n.d(e, "b", (function() {
        return E
    }));
    var r, i, o, a = n(1),
        s = n(13),
        u = n(10),
        c = function() {
            return (c = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        l = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        };
    ! function(t) {
        t[t.Axes = 1] = "Axes", t[t.PlanarAxes = 2] = "PlanarAxes", t[t.EdgesAndPlanarAxes = 3] = "EdgesAndPlanarAxes", t[t.Edges = 4] = "Edges", t[t.Free = 5] = "Free", t[t.Locked = 6] = "Locked"
    }(o || (o = {}));
    var h, f, p, d, m, v, y, g, b, _, w = ((r = {})[u.a.UP] = {
            dir: Object.freeze(u.b.UP.clone())
        }, r[u.a.DOWN] = {
            dir: Object.freeze(u.b.DOWN.clone())
        }, r[u.a.BACK] = {
            dir: Object.freeze(u.b.BACK.clone())
        }, r[u.a.LEFT] = {
            dir: Object.freeze(u.b.LEFT.clone())
        }, r[u.a.RIGHT] = {
            dir: Object.freeze(u.b.RIGHT.clone())
        }, r[u.a.FORWARD] = {
            dir: Object.freeze(u.b.FORWARD.clone())
        }, r),
        x = ((i = {})[u.a.HORIZONTAL_PLANE] = {
            dir: Object.freeze(u.b.HORIZONTAL_PLANE.clone())
        }, i),
        E = (h = 0, f = new a.a, p = new a.a, d = new a.a, m = new a.a, v = Object.freeze(u.b.ZERO.clone()), y = Object.keys(w).map((function(t) {
            return c({}, w[t], {
                name: t,
                angleTo: 999
            })
        })), g = Object.keys(x).map((function(t) {
            return c({}, x[t], {
                name: t,
                angleTo: 999
            })
        })), b = function(t) {
            return (t + 3) % 2
        }, _ = y[0], function(t, e, n) {
            var r, i;
            if (void 0 === n && (n = o.Axes), n === o.Free) return {
                position: e.clone(),
                constrainedAxis: v,
                axisName: u.a.NONE
            };
            if (y.forEach((function(t) {
                    return t.angleTo = 999
                })), g.forEach((function(t) {
                    return t.angleTo = 999
                })), d.copy(e).sub(t), (h = d.length()) < .05) return {
                position: e.clone(),
                constrainedAxis: v,
                axisName: u.a.NONE
            };
            m.copy(d).normalize();
            var a = .05 * Math.min(h, 1);
            if (n !== o.Locked) {
                try {
                    for (var c = l(y), w = c.next(); !w.done; w = c.next()) {
                        var x = w.value,
                            E = s.a.radToDeg(m.angleTo(x.dir));
                        E < _.angleTo && (_ = x), x.angleTo = E
                    }
                } catch (t) {
                    r = {
                        error: t
                    }
                } finally {
                    try {
                        w && !w.done && (i = c.return) && i.call(c)
                    } finally {
                        if (r) throw r.error
                    }
                }
                if (_.angleTo > 20) {
                    var S = Math.abs(d.y);
                    S * S < a && (_ = g[0])
                }
            }
            return f.set(t.x * b(_.dir.x), t.y * b(_.dir.y), t.z * b(_.dir.z)), p.set(e.x * Math.abs(_.dir.x), e.y * Math.abs(_.dir.y), e.z * Math.abs(_.dir.z)).add(f), n === o.Locked || p.distanceToSquared(e) < a ? {
                position: p.clone(),
                constrainedAxis: _.dir,
                axisName: _.name
            } : {
                position: e.clone(),
                constrainedAxis: v,
                axisName: u.a.NONE
            }
        })
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return v
    }));
    var r = n(1),
        i = [new r.a, new r.a, new r.a, new r.a, new r.a, new r.a, new r.a, new r.a],
        o = new r.a,
        a = new r.a,
        s = new r.a,
        u = new r.a,
        c = new r.a,
        l = new r.a,
        h = new r.a,
        f = new r.a,
        p = new r.a,
        d = new r.a,
        m = new r.a;

    function v(t, e) {
        this.min = void 0 !== t ? t : new r.a(1 / 0, 1 / 0, 1 / 0), this.max = void 0 !== e ? e : new r.a(-1 / 0, -1 / 0, -1 / 0)
    }

    function y(t, e, n, r, i) {
        var o, a;
        for (o = 0, a = t.length - 3; o <= a; o += 3) {
            m.fromArray(t, o);
            var s = i.x * Math.abs(m.x) + i.y * Math.abs(m.y) + i.z * Math.abs(m.z),
                u = e.dot(m),
                c = n.dot(m),
                l = r.dot(m);
            if (Math.max(-Math.max(u, c, l), Math.min(u, c, l)) > s) return !1
        }
        return !0
    }
    Object.assign(v.prototype, {
        isBox3: !0,
        set: function(t, e) {
            return this.min.copy(t), this.max.copy(e), this
        },
        setFromArray: function(t) {
            for (var e = 1 / 0, n = 1 / 0, r = 1 / 0, i = -1 / 0, o = -1 / 0, a = -1 / 0, s = 0, u = t.length; s < u; s += 3) {
                var c = t[s],
                    l = t[s + 1],
                    h = t[s + 2];
                c < e && (e = c), l < n && (n = l), h < r && (r = h), c > i && (i = c), l > o && (o = l), h > a && (a = h)
            }
            return this.min.set(e, n, r), this.max.set(i, o, a), this
        },
        setFromBufferAttribute: function(t) {
            for (var e = 1 / 0, n = 1 / 0, r = 1 / 0, i = -1 / 0, o = -1 / 0, a = -1 / 0, s = 0, u = t.count; s < u; s++) {
                var c = t.getX(s),
                    l = t.getY(s),
                    h = t.getZ(s);
                c < e && (e = c), l < n && (n = l), h < r && (r = h), c > i && (i = c), l > o && (o = l), h > a && (a = h)
            }
            return this.min.set(e, n, r), this.max.set(i, o, a), this
        },
        setFromPoints: function(t) {
            this.makeEmpty();
            for (var e = 0, n = t.length; e < n; e++) this.expandByPoint(t[e]);
            return this
        },
        setFromCenterAndSize: function(t, e) {
            var n = o.copy(e).multiplyScalar(.5);
            return this.min.copy(t).sub(n), this.max.copy(t).add(n), this
        },
        setFromObject: function(t) {
            return this.makeEmpty(), this.expandByObject(t)
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(t) {
            return this.min.copy(t.min), this.max.copy(t.max), this
        },
        makeEmpty: function() {
            return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this
        },
        isEmpty: function() {
            return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
        },
        getCenter: function(t) {
            return void 0 === t && (console.warn("THREE.Box3: .getCenter() target is now required"), t = new r.a), this.isEmpty() ? t.set(0, 0, 0) : t.addVectors(this.min, this.max).multiplyScalar(.5)
        },
        getSize: function(t) {
            return void 0 === t && (console.warn("THREE.Box3: .getSize() target is now required"), t = new r.a), this.isEmpty() ? t.set(0, 0, 0) : t.subVectors(this.max, this.min)
        },
        expandByPoint: function(t) {
            return this.min.min(t), this.max.max(t), this
        },
        expandByVector: function(t) {
            return this.min.sub(t), this.max.add(t), this
        },
        expandByScalar: function(t) {
            return this.min.addScalar(-t), this.max.addScalar(t), this
        },
        expandByObject: function(t) {
            var e, n;
            t.updateWorldMatrix(!1, !1);
            var r = t.geometry;
            if (void 0 !== r)
                if (r.isGeometry) {
                    var i = r.vertices;
                    for (e = 0, n = i.length; e < n; e++) o.copy(i[e]), o.applyMatrix4(t.matrixWorld), this.expandByPoint(o)
                } else if (r.isBufferGeometry) {
                var a = r.attributes.position;
                if (void 0 !== a)
                    for (e = 0, n = a.count; e < n; e++) o.fromBufferAttribute(a, e).applyMatrix4(t.matrixWorld), this.expandByPoint(o)
            }
            var s = t.children;
            for (e = 0, n = s.length; e < n; e++) this.expandByObject(s[e]);
            return this
        },
        containsPoint: function(t) {
            return !(t.x < this.min.x || t.x > this.max.x || t.y < this.min.y || t.y > this.max.y || t.z < this.min.z || t.z > this.max.z)
        },
        containsBox: function(t) {
            return this.min.x <= t.min.x && t.max.x <= this.max.x && this.min.y <= t.min.y && t.max.y <= this.max.y && this.min.z <= t.min.z && t.max.z <= this.max.z
        },
        getParameter: function(t, e) {
            return void 0 === e && (console.warn("THREE.Box3: .getParameter() target is now required"), e = new r.a), e.set((t.x - this.min.x) / (this.max.x - this.min.x), (t.y - this.min.y) / (this.max.y - this.min.y), (t.z - this.min.z) / (this.max.z - this.min.z))
        },
        intersectsBox: function(t) {
            return !(t.max.x < this.min.x || t.min.x > this.max.x || t.max.y < this.min.y || t.min.y > this.max.y || t.max.z < this.min.z || t.min.z > this.max.z)
        },
        intersectsSphere: function(t) {
            return this.clampPoint(t.center, o), o.distanceToSquared(t.center) <= t.radius * t.radius
        },
        intersectsPlane: function(t) {
            var e, n;
            return t.normal.x > 0 ? (e = t.normal.x * this.min.x, n = t.normal.x * this.max.x) : (e = t.normal.x * this.max.x, n = t.normal.x * this.min.x), t.normal.y > 0 ? (e += t.normal.y * this.min.y, n += t.normal.y * this.max.y) : (e += t.normal.y * this.max.y, n += t.normal.y * this.min.y), t.normal.z > 0 ? (e += t.normal.z * this.min.z, n += t.normal.z * this.max.z) : (e += t.normal.z * this.max.z, n += t.normal.z * this.min.z), e <= -t.constant && n >= -t.constant
        },
        intersectsTriangle: function(t) {
            if (this.isEmpty()) return !1;
            this.getCenter(f), p.subVectors(this.max, f), a.subVectors(t.a, f), s.subVectors(t.b, f), u.subVectors(t.c, f), c.subVectors(s, a), l.subVectors(u, s), h.subVectors(a, u);
            var e = [0, -c.z, c.y, 0, -l.z, l.y, 0, -h.z, h.y, c.z, 0, -c.x, l.z, 0, -l.x, h.z, 0, -h.x, -c.y, c.x, 0, -l.y, l.x, 0, -h.y, h.x, 0];
            return !!y(e, a, s, u, p) && (!!y(e = [1, 0, 0, 0, 1, 0, 0, 0, 1], a, s, u, p) && (d.crossVectors(c, l), y(e = [d.x, d.y, d.z], a, s, u, p)))
        },
        clampPoint: function(t, e) {
            return void 0 === e && (console.warn("THREE.Box3: .clampPoint() target is now required"), e = new r.a), e.copy(t).clamp(this.min, this.max)
        },
        distanceToPoint: function(t) {
            return o.copy(t).clamp(this.min, this.max).sub(t).length()
        },
        getBoundingSphere: function(t) {
            return void 0 === t && console.error("THREE.Box3: .getBoundingSphere() target is now required"), this.getCenter(t.center), t.radius = .5 * this.getSize(o).length(), t
        },
        intersect: function(t) {
            return this.min.max(t.min), this.max.min(t.max), this.isEmpty() && this.makeEmpty(), this
        },
        union: function(t) {
            return this.min.min(t.min), this.max.max(t.max), this
        },
        applyMatrix4: function(t) {
            return this.isEmpty() ? this : (i[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(t), i[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(t), i[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(t), i[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(t), i[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(t), i[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(t), i[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(t), i[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(t), this.setFromPoints(i), this)
        },
        translate: function(t) {
            return this.min.add(t), this.max.add(t), this
        },
        equals: function(t) {
            return t.min.equals(this.min) && t.max.equals(this.max)
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "c", (function() {
        return r
    })), n.d(e, "b", (function() {
        return i
    })), n.d(e, "d", (function() {
        return o
    })), n.d(e, "a", (function() {
        return a
    }));
    var r = function(t) {
            return t.prototype.constructor.name
        },
        i = function(t) {
            return t.constructor
        },
        o = function(t) {
            var e = t.toString();
            return e.substring(0, e.indexOf("\n")).split(" ")[1]
        },
        a = function() {
            function t(t) {
                void 0 === t && (t = !1), this.typeLookup = [], this.funcProto = Function.__proto__, this.allowInheritance = t
            }
            return t.prototype.addIndexByType = function(t) {
                if (!t) throw Error("Cannot index undefined type");
                if (-1 !== this.typeLookup.indexOf(t)) throw Error("Type already registered");
                return this.typeLookup.push(t) - 1
            }, t.prototype.getIndexByType = function(t, e) {
                if (!t) throw Error("Cannot index undefined type");
                var n = -1;
                if (this.allowInheritance)
                    for (var r = 0; r < this.typeLookup.length; r++) {
                        for (var i = this.typeLookup[r]; i !== t && i !== this.funcProto;) i = i.__proto__;
                        if (i === t) return r
                    } else n = this.typeLookup.indexOf(t);
                return -1 === n && e && (n = this.typeLookup.push(t) - 1), n
            }, t.prototype.getIndicesByType = function(t) {
                if (!t) throw Error("Cannot index undefined type");
                if (!this.allowInheritance) return [this.getIndexByType(t)];
                for (var e = [], n = 0; n < this.typeLookup.length; n++) {
                    for (var r = this.typeLookup[n]; r !== t && r !== this.funcProto;) r = r.__proto__;
                    r === t && e.push(n)
                }
                return e
            }, t.prototype.getIndexByInstance = function(t, e) {
                if (!t) throw Error("Cannot index undefined data");
                var n = this.typeLookup.indexOf(t.constructor);
                return -1 === n && e && (n = this.typeLookup.push(t.constructor) - 1), n
            }, t.prototype.getTypeByIndex = function(t) {
                if (!(t in this.typeLookup)) throw Error("Index not found");
                return this.typeLookup[t]
            }, t.prototype.getKnownTypes = function() {
                return this.typeLookup.concat()
            }, t
        }()
}, function(t, e, n) {
    "use strict";
    var r;
    n.d(e, "a", (function() {
            return r
        })),
        function(t) {
            t[t.FloorplanOnly = 0] = "FloorplanOnly", t[t.ThreeD = 1] = "ThreeD"
        }(r || (r = {}))
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return f
    }));
    var r, i = n(70),
        o = n(23),
        a = n(6),
        s = n(3),
        u = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        c = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        l = new s.a("ObservableObject"),
        h = 1 === Object(a.z)("debug", 0),
        f = function(t) {
            function e() {
                var e = t.call(this) || this;
                return e._propertyObservables = {}, e._valueCache = {}, e._dirtyKeys = new Set, Object.defineProperties(e, {
                    _propertyObservables: {
                        value: e._propertyObservables,
                        writable: !1,
                        enumerable: !1
                    },
                    _valueCache: {
                        value: e._valueCache,
                        writable: !1,
                        enumerable: !1
                    },
                    _dirtyKeys: {
                        value: e._dirtyKeys,
                        writable: !1,
                        enumerable: !1
                    }
                }), h && setTimeout((function() {
                    ! function(t) {
                        var e = {},
                            n = function(n) {
                                t.hasOwnProperty(n) && (e[n] = t[n], t._valueCache[n] = t[n], Object.defineProperty(t, n, {
                                    get: function() {
                                        return e[n]
                                    },
                                    set: function(r) {
                                        var o = t._valueCache[n];
                                        (o !== r || i.a.isObservable(o) && o._dirtyObservable) && function(t, e) {
                                            p.has(t) || p.set(t, {});
                                            p.get(t)[e] = Error()
                                        }(t, n), e[n] = r
                                    },
                                    enumerable: !0
                                }))
                            };
                        for (var r in t) n(r)
                    }(e)
                }), 1), e
            }
            return u(e, t), e.prototype.onPropertyChanged = function(t, e) {
                var n = this;
                if (this._propertyObservables[t] || (this._propertyObservables[t] = []), -1 !== this._propertyObservables[t].indexOf(e)) throw new Error("This observer function is already observing this Observable, and double subscriptions are not supported.");
                var r = function() {
                    return n._propertyObservables[t].push(e)
                };
                return r(), {
                    renew: r,
                    cancel: function() {
                        return n.removeOnPropertyChanged(t, e)
                    }
                }
            }, e.prototype.removeOnPropertyChanged = function(t, e) {
                var n = this._propertyObservables[t].indexOf(e);
                this._propertyObservables[t].splice(n, 1)
            }, e.prototype.commit = function(t) {
                var e, n;
                void 0 === t && (t = []);
                try {
                    for (var r = c(t), i = r.next(); !i.done; i = r.next()) {
                        var o = i.value;
                        this._dirtyKeys.add(o)
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        i && !i.done && (n = r.return) && n.call(r)
                    } finally {
                        if (e) throw e.error
                    }
                }
                this.setDirtyUp(), this.notifyUp()
            }, e.prototype.setDirtyUp = function() {
                for (var e in this)
                    if (this.hasOwnProperty(e)) {
                        var n = this._valueCache[e],
                            r = this[e],
                            o = typeof r,
                            a = "undefined" === o || "string" === o || "number" === o || "boolean" === o || null === o;
                        if (this._propertyObservables[e] && !a && !i.a.isObservable(r)) throw new Error("Property " + e + " has property listeners, but has a value that is not observable or a primitive!");
                        n !== r ? (this.removeChildObservables(n), this.addChildObservable(r), this._valueCache[e] = r, this._dirtyKeys.add(e)) : i.a.isObservable(n) && n._dirtyObservable && this._dirtyKeys.add(e)
                    }
                t.prototype.setDirtyUp.call(this)
            }, e.prototype.notifyObservers = function() {
                var e, n, r, i;
                if (this._dirtyObservable && !this._observerNotifying && this._activeObservable) {
                    this._observerNotifying = !0;
                    try {
                        for (var o = c(this._dirtyKeys), a = o.next(); !a.done; a = o.next()) {
                            var s = a.value;
                            try {
                                for (var u = c(this._propertyObservables[s] || []), l = u.next(); !l.done; l = u.next()) {
                                    var f = l.value;
                                    this.notifyPropertyObserver(f, s)
                                }
                            } catch (t) {
                                r = {
                                    error: t
                                }
                            } finally {
                                try {
                                    l && !l.done && (i = u.return) && i.call(u)
                                } finally {
                                    if (r) throw r.error
                                }
                            }
                            h && d(this, s)
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            a && !a.done && (n = o.return) && n.call(o)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                    this._observerNotifying = !1, this._dirtyKeys.clear()
                }
                t.prototype.notifyObservers.call(this)
            }, e.prototype.notifyPropertyObserver = function(t, e) {
                t(this._valueCache[e])
            }, e.prototype.notifyObserver = function(t) {
                t(this)
            }, e.prototype.deepCopy = function() {
                var t = {};
                for (var e in this) this.hasOwnProperty(e) && (t[e] = Object(o.a)(this[e]));
                return t
            }, e
        }(i.a),
        p = new Map;

    function d(t, e) {
        if (p.has(t)) {
            var n = p.get(t);
            n[e] && delete n[e]
        }
    }
    if (h) var m = setInterval((function() {
        (function() {
            var t, e;
            try {
                for (var n = c(p.values()), r = n.next(); !r.done; r = n.next()) {
                    var i = r.value;
                    for (var o in i) return l.error('ObservableObject property "' + o + '" was still dirty after one tick! Did you forget a .commit()?'), l.error("See stack trace of the property write below:"), l.error(i[o].stack), !0
                }
            } catch (e) {
                t = {
                    error: e
                }
            } finally {
                try {
                    r && !r.done && (e = n.return) && e.call(n)
                } finally {
                    if (t) throw t.error
                }
            }
            return !1
        })() && void 0 !== m && clearInterval(m)
    }), 16)
}, function(t, e, n) {
    "use strict";
    var r, i = n(64),
        o = n(0),
        a = n(13),
        s = n(5),
        u = n(42),
        c = function(t) {
            var e;
            if ("undefined" == typeof HTMLCanvasElement) return t.src;
            if (t instanceof HTMLCanvasElement) e = t;
            else {
                void 0 === r && (r = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas")), r.width = t.width, r.height = t.height;
                var n = r.getContext("2d");
                t instanceof ImageData ? n.putImageData(t, 0, 0) : n.drawImage(t, 0, 0, t.width, t.height), e = r
            }
            return e.width > 2048 || e.height > 2048 ? e.toDataURL("image/jpeg", .6) : e.toDataURL("image/png")
        };
    n.d(e, "a", (function() {
        return h
    }));
    var l = 0;

    function h(t, e, n, r, i, c, f, p, d, m) {
        Object.defineProperty(this, "id", {
            value: l++
        }), this.uuid = a.a.generateUUID(), this.name = "", this.image = void 0 !== t ? t : h.DEFAULT_IMAGE, this.mipmaps = [], this.mapping = void 0 !== e ? e : h.DEFAULT_MAPPING, this.wrapS = void 0 !== n ? n : o.l, this.wrapT = void 0 !== r ? r : o.l, this.magFilter = void 0 !== i ? i : o.P, this.minFilter = void 0 !== c ? c : o.S, this.anisotropy = void 0 !== d ? d : 1, this.format = void 0 !== f ? f : o.yb, this.type = void 0 !== p ? p : o.tc, this.offset = new s.a(0, 0), this.repeat = new s.a(1, 1), this.center = new s.a(0, 0), this.rotation = 0, this.matrixAutoUpdate = !0, this.matrix = new u.a, this.generateMipmaps = !0, this.premultiplyAlpha = !1, this.flipY = !0, this.unpackAlignment = 4, this.encoding = void 0 !== m ? m : o.O, this.version = 0, this.onUpdate = null
    }
    h.DEFAULT_IMAGE = void 0, h.DEFAULT_MAPPING = o.rc, h.prototype = Object.assign(Object.create(i.a.prototype), {
        constructor: h,
        isTexture: !0,
        updateMatrix: function() {
            this.matrix.setUvTransform(this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y)
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(t) {
            return this.name = t.name, this.image = t.image, this.mipmaps = t.mipmaps.slice(0), this.mapping = t.mapping, this.wrapS = t.wrapS, this.wrapT = t.wrapT, this.magFilter = t.magFilter, this.minFilter = t.minFilter, this.anisotropy = t.anisotropy, this.format = t.format, this.type = t.type, this.offset.copy(t.offset), this.repeat.copy(t.repeat), this.center.copy(t.center), this.rotation = t.rotation, this.matrixAutoUpdate = t.matrixAutoUpdate, this.matrix.copy(t.matrix), this.generateMipmaps = t.generateMipmaps, this.premultiplyAlpha = t.premultiplyAlpha, this.flipY = t.flipY, this.unpackAlignment = t.unpackAlignment, this.encoding = t.encoding, this
        },
        toJSON: function(t) {
            var e = void 0 === t || "string" == typeof t;
            if (!e && void 0 !== t.textures[this.uuid]) return t.textures[this.uuid];
            var n = {
                metadata: {
                    version: 4.5,
                    type: "Texture",
                    generator: "Texture.toJSON"
                },
                uuid: this.uuid,
                name: this.name,
                mapping: this.mapping,
                repeat: [this.repeat.x, this.repeat.y],
                offset: [this.offset.x, this.offset.y],
                center: [this.center.x, this.center.y],
                rotation: this.rotation,
                wrap: [this.wrapS, this.wrapT],
                format: this.format,
                type: this.type,
                encoding: this.encoding,
                minFilter: this.minFilter,
                magFilter: this.magFilter,
                anisotropy: this.anisotropy,
                flipY: this.flipY,
                premultiplyAlpha: this.premultiplyAlpha,
                unpackAlignment: this.unpackAlignment
            };
            if (void 0 !== this.image) {
                var r = this.image;
                if (void 0 === r.uuid && (r.uuid = a.a.generateUUID()), !e && void 0 === t.images[r.uuid]) {
                    var i;
                    if (Array.isArray(r)) {
                        i = [];
                        for (var o = 0, s = r.length; o < s; o++) i.push(c(r[o]))
                    } else i = c(r);
                    t.images[r.uuid] = {
                        uuid: r.uuid,
                        url: i
                    }
                }
                n.image = r.uuid
            }
            return e || (t.textures[this.uuid] = n), n
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        },
        transformUv: function(t) {
            if (this.mapping !== o.rc) return t;
            if (t.applyMatrix3(this.matrix), t.x < 0 || t.x > 1) switch (this.wrapS) {
                case o.dc:
                    t.x = t.x - Math.floor(t.x);
                    break;
                case o.l:
                    t.x = t.x < 0 ? 0 : 1;
                    break;
                case o.ab:
                    1 === Math.abs(Math.floor(t.x) % 2) ? t.x = Math.ceil(t.x) - t.x : t.x = t.x - Math.floor(t.x)
            }
            if (t.y < 0 || t.y > 1) switch (this.wrapT) {
                case o.dc:
                    t.y = t.y - Math.floor(t.y);
                    break;
                case o.l:
                    t.y = t.y < 0 ? 0 : 1;
                    break;
                case o.ab:
                    1 === Math.abs(Math.floor(t.y) % 2) ? t.y = Math.ceil(t.y) - t.y : t.y = t.y - Math.floor(t.y)
            }
            return this.flipY && (t.y = 1 - t.y), t
        }
    }), Object.defineProperty(h.prototype, "needsUpdate", {
        set: function(t) {
            !0 === t && this.version++
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    }));
    var r = new(n(1).a);

    function i() {
        this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1], arguments.length > 0 && console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")
    }
    Object.assign(i.prototype, {
        isMatrix3: !0,
        set: function(t, e, n, r, i, o, a, s, u) {
            var c = this.elements;
            return c[0] = t, c[1] = r, c[2] = a, c[3] = e, c[4] = i, c[5] = s, c[6] = n, c[7] = o, c[8] = u, this
        },
        identity: function() {
            return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this
        },
        clone: function() {
            return (new this.constructor).fromArray(this.elements)
        },
        copy: function(t) {
            var e = this.elements,
                n = t.elements;
            return e[0] = n[0], e[1] = n[1], e[2] = n[2], e[3] = n[3], e[4] = n[4], e[5] = n[5], e[6] = n[6], e[7] = n[7], e[8] = n[8], this
        },
        setFromMatrix4: function(t) {
            var e = t.elements;
            return this.set(e[0], e[4], e[8], e[1], e[5], e[9], e[2], e[6], e[10]), this
        },
        applyToBufferAttribute: function(t) {
            for (var e = 0, n = t.count; e < n; e++) r.x = t.getX(e), r.y = t.getY(e), r.z = t.getZ(e), r.applyMatrix3(this), t.setXYZ(e, r.x, r.y, r.z);
            return t
        },
        multiply: function(t) {
            return this.multiplyMatrices(this, t)
        },
        premultiply: function(t) {
            return this.multiplyMatrices(t, this)
        },
        multiplyMatrices: function(t, e) {
            var n = t.elements,
                r = e.elements,
                i = this.elements,
                o = n[0],
                a = n[3],
                s = n[6],
                u = n[1],
                c = n[4],
                l = n[7],
                h = n[2],
                f = n[5],
                p = n[8],
                d = r[0],
                m = r[3],
                v = r[6],
                y = r[1],
                g = r[4],
                b = r[7],
                _ = r[2],
                w = r[5],
                x = r[8];
            return i[0] = o * d + a * y + s * _, i[3] = o * m + a * g + s * w, i[6] = o * v + a * b + s * x, i[1] = u * d + c * y + l * _, i[4] = u * m + c * g + l * w, i[7] = u * v + c * b + l * x, i[2] = h * d + f * y + p * _, i[5] = h * m + f * g + p * w, i[8] = h * v + f * b + p * x, this
        },
        multiplyScalar: function(t) {
            var e = this.elements;
            return e[0] *= t, e[3] *= t, e[6] *= t, e[1] *= t, e[4] *= t, e[7] *= t, e[2] *= t, e[5] *= t, e[8] *= t, this
        },
        determinant: function() {
            var t = this.elements,
                e = t[0],
                n = t[1],
                r = t[2],
                i = t[3],
                o = t[4],
                a = t[5],
                s = t[6],
                u = t[7],
                c = t[8];
            return e * o * c - e * a * u - n * i * c + n * a * s + r * i * u - r * o * s
        },
        getInverse: function(t, e) {
            t && t.isMatrix4 && console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");
            var n = t.elements,
                r = this.elements,
                i = n[0],
                o = n[1],
                a = n[2],
                s = n[3],
                u = n[4],
                c = n[5],
                l = n[6],
                h = n[7],
                f = n[8],
                p = f * u - c * h,
                d = c * l - f * s,
                m = h * s - u * l,
                v = i * p + o * d + a * m;
            if (0 === v) {
                var y = "THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";
                if (!0 === e) throw new Error(y);
                return console.warn(y), this.identity()
            }
            var g = 1 / v;
            return r[0] = p * g, r[1] = (a * h - f * o) * g, r[2] = (c * o - a * u) * g, r[3] = d * g, r[4] = (f * i - a * l) * g, r[5] = (a * s - c * i) * g, r[6] = m * g, r[7] = (o * l - h * i) * g, r[8] = (u * i - o * s) * g, this
        },
        transpose: function() {
            var t, e = this.elements;
            return t = e[1], e[1] = e[3], e[3] = t, t = e[2], e[2] = e[6], e[6] = t, t = e[5], e[5] = e[7], e[7] = t, this
        },
        getNormalMatrix: function(t) {
            return this.setFromMatrix4(t).getInverse(this).transpose()
        },
        transposeIntoArray: function(t) {
            var e = this.elements;
            return t[0] = e[0], t[1] = e[3], t[2] = e[6], t[3] = e[1], t[4] = e[4], t[5] = e[7], t[6] = e[2], t[7] = e[5], t[8] = e[8], this
        },
        setUvTransform: function(t, e, n, r, i, o, a) {
            var s = Math.cos(i),
                u = Math.sin(i);
            this.set(n * s, n * u, -n * (s * o + u * a) + o + t, -r * u, r * s, -r * (-u * o + s * a) + a + e, 0, 0, 1)
        },
        scale: function(t, e) {
            var n = this.elements;
            return n[0] *= t, n[3] *= t, n[6] *= t, n[1] *= e, n[4] *= e, n[7] *= e, this
        },
        rotate: function(t) {
            var e = Math.cos(t),
                n = Math.sin(t),
                r = this.elements,
                i = r[0],
                o = r[3],
                a = r[6],
                s = r[1],
                u = r[4],
                c = r[7];
            return r[0] = e * i + n * s, r[3] = e * o + n * u, r[6] = e * a + n * c, r[1] = -n * i + e * s, r[4] = -n * o + e * u, r[7] = -n * a + e * c, this
        },
        translate: function(t, e) {
            var n = this.elements;
            return n[0] += t * n[2], n[3] += t * n[5], n[6] += t * n[8], n[1] += e * n[2], n[4] += e * n[5], n[7] += e * n[8], this
        },
        equals: function(t) {
            for (var e = this.elements, n = t.elements, r = 0; r < 9; r++)
                if (e[r] !== n[r]) return !1;
            return !0
        },
        fromArray: function(t, e) {
            void 0 === e && (e = 0);
            for (var n = 0; n < 9; n++) this.elements[n] = t[n + e];
            return this
        },
        toArray: function(t, e) {
            void 0 === t && (t = []), void 0 === e && (e = 0);
            var n = this.elements;
            return t[e] = n[0], t[e + 1] = n[1], t[e + 2] = n[2], t[e + 3] = n[3], t[e + 4] = n[4], t[e + 5] = n[5], t[e + 6] = n[6], t[e + 7] = n[7], t[e + 8] = n[8], t
        }
    })
}, function(t, e, n) {
    "use strict";
    var r;
    n.d(e, "a", (function() {
            return r
        })),
        function(t) {
            t[t.Begin = 0] = "Begin", t[t.Logic = 1] = "Logic", t[t.Render = 2] = "Render", t[t.End = 3] = "End"
        }(r || (r = {}))
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    })), n.d(e, "c", (function() {
        return d
    })), n.d(e, "d", (function() {
        return m
    })), n.d(e, "b", (function() {
        return v
    }));
    var r, i, o = n(69),
        a = n(27),
        s = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        u = function() {
            return (u = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        c = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        l = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        h = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        f = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        p = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(f(arguments[e]));
            return t
        };
    ! function(t) {
        t.POST = "POST", t.PATCH = "PATCH", t.PUT = "PUT"
    }(i || (i = {}));
    var d = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.config = e, n
            }
            return s(e, t), e.prototype.read = function() {
                return c(this, void 0, Promise, (function() {
                    var t;
                    return l(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return t = null, this.config.cachedData && this.config.cachedData.data ? (t = this.config.cachedData.data, [3, 3]) : [3, 1];
                            case 1:
                                return [4, this.config.queue.get(this.config.path, this.options)];
                            case 2:
                                t = e.sent(), this.config.cachedData && (this.config.cachedData.data = t), e.label = 3;
                            case 3:
                                return [2, this.config.deserialize(t)]
                        }
                    }))
                }))
            }, e.prototype.clearCache = function() {
                this.config.cachedData && (this.config.cachedData.data = null)
            }, e
        }((function() {
            this.options = {
                responseType: "json"
            };
            var t = Object(o.a)();
            t && (this.options = u({}, this.options, {
                auth: t
            }))
        })),
        m = function(t) {
            function e(e) {
                var n = t.call(this, e) || this;
                return n.config = e, n
            }
            return s(e, t), e.prototype.create = function(t) {
                return c(this, void 0, Promise, (function() {
                    var e, n;
                    return l(this, (function(r) {
                        return this.clearCache(), e = this.config.serialize ? this.config.serialize(t) : t, n = u({}, this.options, {
                            body: e
                        }), [2, this.config.queue.put(this.config.path, n)]
                    }))
                }))
            }, e.prototype.update = function(t, e) {
                return c(this, void 0, Promise, (function() {
                    var n, r;
                    return l(this, (function(o) {
                        return this.clearCache(), n = this.config.serialize ? this.config.serialize(t, e) : t, r = u({}, this.options, {
                            body: n
                        }), [2, this.config.queue.request(this.config.httpMethod || i.POST, this.config.path, r)]
                    }))
                }))
            }, e.prototype.delete = function(t) {
                return c(this, void 0, Promise, (function() {
                    var e, n, r, i, o, a;
                    return l(this, (function(s) {
                        switch (s.label) {
                            case 0:
                                if (this.clearCache(), !(t instanceof Array)) return [3, 9];
                                s.label = 1;
                            case 1:
                                s.trys.push([1, 6, 7, 8]), r = h(t), i = r.next(), s.label = 2;
                            case 2:
                                return i.done ? [3, 5] : (o = i.value, [4, this.config.queue.delete(this.config.path + "/" + o.sid, this.options)]);
                            case 3:
                                s.sent(), s.label = 4;
                            case 4:
                                return i = r.next(), [3, 2];
                            case 5:
                                return [3, 8];
                            case 6:
                                return a = s.sent(), e = {
                                    error: a
                                }, [3, 8];
                            case 7:
                                try {
                                    i && !i.done && (n = r.return) && n.call(r)
                                } finally {
                                    if (e) throw e.error
                                }
                                return [7];
                            case 8:
                                return [2];
                            case 9:
                                return [2, this.config.queue.delete(this.config.path, this.options)]
                        }
                    }))
                }))
            }, Object.defineProperty(e.prototype, "acceptsPartial", {
                get: function() {
                    return this.config.httpMethod === i.PATCH
                },
                enumerable: !0,
                configurable: !0
            }), e
        }(d),
        v = function(t) {
            function e(e) {
                var n = t.call(this, e) || this;
                return n.config = e, n.acceptsPartial = !1, n.config.batchUpdate = "batchUpdate" in n.config && n.config.batchUpdate, n
            }
            return s(e, t), e.prototype.create = function(t) {
                return c(this, void 0, Promise, (function() {
                    return l(this, (function(t) {
                        throw Error("Not implemented")
                    }))
                }))
            }, e.prototype.updateBatch = function(t, e) {
                var n, r, o = [],
                    a = p(new Set(p(Object.keys(t), Object.keys(e))));
                try {
                    for (var s = h(a), c = s.next(); !c.done; c = s.next()) {
                        var l = c.value;
                        t[l] || e[l] || o.push(this.config.queue.delete(this.config.path + "/" + l, this.options))
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        c && !c.done && (r = s.return) && r.call(s)
                    } finally {
                        if (n) throw n.error
                    }
                }
                var f = this.config.serialize ? this.config.serialize(t, e) : t,
                    d = u({}, this.options, {
                        body: f
                    });
                return o.push(this.config.queue.request(this.config.httpMethod || i.POST, this.config.path, d)), Promise.all(o)
            }, e.prototype.updateInternal = function(t, e) {
                var n = [],
                    r = u({}, this.options),
                    o = Object.keys(t),
                    s = Object.keys(e),
                    c = Object(a.o)(o.concat(s));
                for (var l in c) {
                    var h = c[l],
                        f = t[h] || e[h];
                    if (f) {
                        var p = {};
                        p[h] = f;
                        var d = {},
                            m = e[h];
                        m && (d[h] = m);
                        var v = this.config.serialize ? this.config.serialize(p, d) : p;
                        r.body = v, n.push(this.config.queue.request(this.config.httpMethod || i.POST, this.config.path, r))
                    } else n.push(this.config.queue.delete(this.config.path + "/" + h, this.options))
                }
                return Promise.all(n)
            }, e.prototype.update = function(t, e) {
                return c(this, void 0, Promise, (function() {
                    return l(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                return this.clearCache(), [4, this.config.batchUpdate ? this.updateBatch(t, e || {}) : this.updateInternal(t, e || {})];
                            case 1:
                                return n.sent(), [2]
                        }
                    }))
                }))
            }, e.prototype.delete = function(t) {
                return c(this, void 0, Promise, (function() {
                    return l(this, (function(t) {
                        throw Error("Not implemented")
                    }))
                }))
            }, e
        }(d)
}, function(t, e, n) {
    "use strict";
    var r;
    ! function(t) {
        t.LOADING = "LOADING", t.PRESENTED_BY_CAPS = "PRESENTED_BY_CAPS", t.EXPLORE_3D_SPACE = "EXPLORE_3D_SPACE", t.VIEW_INSIDE = "VIEW_INSIDE", t.VIEW_INSIDE_MESH = "VIEW_INSIDE_MESH", t.VIEW_DOLLHOUSE = "VIEW_DOLLHOUSE", t.VIEW_FLOORPLAN = "VIEW_FLOORPLAN", t.VIEW_FULLSCREEN = "VIEW_FULLSCREEN", t.EXIT_FULLSCREEN = "EXIT_FULLSCREEN", t.OPEN_HIGHLIGHTS = "OPEN_HIGHLIGHTS", t.CLOSE_HIGHLIGHTS = "CLOSE_HIGHLIGHTS", t.PAUSE = "PAUSE", t.SOCIAL_SHARING = "SOCIAL_SHARING", t.VIEW_IN_VR = "VIEW_IN_VR", t.FLOOR_NAME = "FLOOR_NAME", t.FLOOR_ALL = "FLOOR_ALL", t.PRESENTED_BY = "PRESENTED_BY", t.MORE = "MORE", t.LESS = "LESS", t.TERMS = "TERMS", t.HELP = "HELP", t.TERMS_FAIL = "TERMS_FAIL", t.HELP_NAVIGATION_TAB = "HELP_NAVIGATION_TAB", t.HELP_MORE_HELP_TAB = "HELP_MORE_HELP_TAB", t.HELP_DESKTOP_360_2A = "HELP_DESKTOP_360_2A", t.HELP_DESKTOP_360_2B = "HELP_DESKTOP_360_2B", t.HELP_DESKTOP_DOLLHOUSE_1A = "HELP_DESKTOP_DOLLHOUSE_1A", t.HELP_DESKTOP_DOLLHOUSE_1B = "HELP_DESKTOP_DOLLHOUSE_1B", t.HELP_DESKTOP_DOLLHOUSE_2A = "HELP_DESKTOP_DOLLHOUSE_2A", t.HELP_DESKTOP_DOLLHOUSE_3A = "HELP_DESKTOP_DOLLHOUSE_3A", t.HELP_DESKTOP_FLOORPLAN_1A = "HELP_DESKTOP_FLOORPLAN_1A", t.HELP_DESKTOP_FLOORPLAN_2A = "HELP_DESKTOP_FLOORPLAN_2A", t.HELP_DESKTOP_FLOORPLAN_2B = "HELP_DESKTOP_FLOORPLAN_2B", t.HELP_DESKTOP_FLOORPLAN_3A = "HELP_DESKTOP_FLOORPLAN_3A", t.HELP_DESKTOP_FLOORPLAN_3B = "HELP_DESKTOP_FLOORPLAN_3B", t.HELP_DESKTOP_MORE_360_B = "HELP_DESKTOP_MORE_360_B", t.HELP_DESKTOP_MORE_DOLLHOUSE_B = "HELP_DESKTOP_MORE_DOLLHOUSE_B", t.HELP_DESKTOP_MORE_FLOORS_B = "HELP_DESKTOP_MORE_FLOORS_B", t.HELP_DESKTOP_MORE_FULLSCREEN_B = "HELP_DESKTOP_MORE_FULLSCREEN_B", t.HELP_DESKTOP_MORE_HLR_B = "HELP_DESKTOP_MORE_HLR_B", t.HELP_DESKTOP_MORE_INSIDE_B = "HELP_DESKTOP_MORE_INSIDE_B", t.HELP_DESKTOP_MORE_MATTERTAG_B = "HELP_DESKTOP_MORE_MATTERTAG_B", t.HELP_DESKTOP_MORE_TOUR_B = "HELP_DESKTOP_MORE_TOUR_B", t.HELP_DESKTOP_MORE_VR_B = "HELP_DESKTOP_MORE_VR_B", t.HELP_DESKTOP_MORE_ZOOM_B = "HELP_DESKTOP_MORE_ZOOM_B", t.HELP_DESKTOP_PANORAMA_1A = "HELP_DESKTOP_PANORAMA_1A", t.HELP_DESKTOP_PANORAMA_1B = "HELP_DESKTOP_PANORAMA_1B", t.HELP_DESKTOP_PANORAMA_2A = "HELP_DESKTOP_PANORAMA_2A", t.HELP_DESKTOP_PANORAMA_2B = "HELP_DESKTOP_PANORAMA_2B", t.HELP_DESKTOP_PANORAMA_3A = "HELP_DESKTOP_PANORAMA_3A", t.HELP_DESKTOP_PANORAMA_3B = "HELP_DESKTOP_PANORAMA_3B", t.HELP_MOBILE_3 = "HELP_MOBILE_3", t.HELP_MOBILE_360_2 = "HELP_MOBILE_360_2", t.HELP_MOBILE_DOLLHOUSE_1 = "HELP_MOBILE_DOLLHOUSE_1", t.HELP_MOBILE_DOLLHOUSE_2 = "HELP_MOBILE_DOLLHOUSE_2", t.HELP_MOBILE_FLOORPLAN_1 = "HELP_MOBILE_FLOORPLAN_1", t.HELP_MOBILE_FLOORPLAN_2 = "HELP_MOBILE_FLOORPLAN_2", t.HELP_MOBILE_MORE_360_B = "HELP_MOBILE_MORE_360_B", t.HELP_MOBILE_MORE_DOLLHOUSE_B = "HELP_MOBILE_MORE_DOLLHOUSE_B", t.HELP_MOBILE_MORE_FLOORPLAN_B = "HELP_MOBILE_MORE_FLOORPLAN_B", t.HELP_MOBILE_MORE_INSIDE_B = "HELP_MOBILE_MORE_INSIDE_B", t.HELP_MOBILE_MORE_MATTERTAG_B = "HELP_MOBILE_MORE_MATTERTAG_B", t.HELP_MOBILE_MORE_VR_B = "HELP_MOBILE_MORE_VR_B", t.HELP_MOBILE_PANORAMA_1 = "HELP_MOBILE_PANORAMA_1", t.HELP_MOBILE_PANORAMA_2 = "HELP_MOBILE_PANORAMA_2", t.HELP_MORE_360_A = "HELP_MORE_360_A", t.HELP_MORE_DOLLHOUSE_A = "HELP_MORE_DOLLHOUSE_A", t.HELP_MORE_FLOORS_A = "HELP_MORE_FLOORS_A", t.HELP_MORE_FLOORPLAN_A = "HELP_MORE_FLOORPLAN_A", t.HELP_MORE_FULLSCREEN_A = "HELP_MORE_FULLSCREEN_A", t.HELP_MORE_HLR_A = "HELP_MORE_HLR_A", t.HELP_MORE_INSIDE_A = "HELP_MORE_INSIDE_A", t.HELP_MORE_MATTERTAG_A = "HELP_MORE_MATTERTAG_A", t.HELP_MORE_TOUR_A = "HELP_MORE_TOUR_A", t.HELP_MORE_VR_A = "HELP_MORE_VR_A", t.HELP_MORE_ZOOM_A = "HELP_MORE_ZOOM_A", t.VR_VIEW_SPACE = "VR_VIEW_SPACE", t.VR_LEARN_MORE_CAPS = "VR_LEARN_MORE_CAPS", t.VR_PREVIOUS_CAPS = "VR_PREVIOUS_CAPS", t.VR_NEXT_CAPS = "VR_NEXT_CAPS", t.VR_GOT_IT_CAPS = "VR_GOT_IT_CAPS", t.VR_GOOGLE_CARDBOARD = "VR_GOOGLE_CARDBOARD", t.VR_SAMSUNG_GEAR_VR = "VR_SAMSUNG_GEAR_VR", t.VR_OPEN_ANDROID_LINK = "VR_OPEN_ANDROID_LINK", t.VR_ANDROID_OPTIONS = "VR_ANDROID_OPTIONS", t.VR_SHOW_IOS_1 = "VR_SHOW_IOS_1", t.VR_SHOW_IOS_2 = "VR_SHOW_IOS_2", t.VR_WHAT_YOU_NEED = "VR_WHAT_YOU_NEED", t.VR_NEED_CARDBOARD = "VR_NEED_CARDBOARD", t.VR_NEED_SAMSUNG = "VR_NEED_SAMSUNG", t.VR_COMPATIBLE_IPHONES_1 = "VR_COMPATIBLE_IPHONES_1", t.VR_COMPATIBLE_IPHONES_2 = "VR_COMPATIBLE_IPHONES_2", t.VR_COMPATIBLE_IPHONES_3 = "VR_COMPATIBLE_IPHONES_3", t.VR_APP_FOR_CARDBOARD = "VR_APP_FOR_CARDBOARD", t.VR_APP_FOR_SAMSUNG = "VR_APP_FOR_SAMSUNG", t.VR_DOWNLOAD_HERE = "VR_DOWNLOAD_HERE", t.VR_COMPATIBLE_ANDROID = "VR_COMPATIBLE_ANDROID", t.VR_ANDROID_DETAIL = "VR_ANDROID_DETAIL", t.VR_COMPATIBLE_SAMSUNG = "VR_COMPATIBLE_SAMSUNG", t.VR_SAMSUNG_DETAIL = "VR_SAMSUNG_DETAIL", t.VR_SHOW_SUPPORTED = "VR_SHOW_SUPPORTED", t.VR_REQUIRE_HEADSET = "VR_REQUIRE_HEADSET", t.VR_REDIRECT_TO_STORE = "VR_REDIRECT_TO_STORE", t.WEBVR_ENTER_WEBVR = "WEBVR_ENTER_WEBVR", t.WEBVR_LEARN_MORE = "WEBVR_LEARN_MORE", t.VR_APP_OPEN = "VR_APP_OPEN", t.ERROR_WEBGL_UNSUPPORTED_PROBLEM = "ERROR_WEBGL_UNSUPPORTED_PROBLEM", t.ERROR_BROWSER_SOLUTION = "ERROR_BROWSER_SOLUTION", t.ERROR_BROWSER_EXPLANATION = "ERROR_BROWSER_EXPLANATION", t.ERROR_LOADING_FAILED_PROBLEM = "ERROR_LOADING_FAILED_PROBLEM", t.ERROR_LOADING_FAILED_ACTIONS_1 = "ERROR_LOADING_FAILED_ACTIONS_1", t.ERROR_LOADING_FAILED_ACTIONS_2 = "ERROR_LOADING_FAILED_ACTIONS_2", t.ERROR_GENERIC_PROBLEM = "ERROR_GENERIC_PROBLEM", t.ERROR_GENERIC_SOLUTION = "ERROR_GENERIC_SOLUTION", t.ERROR_GENERIC_ACTIONS_1 = "ERROR_GENERIC_ACTIONS_1", t.ERROR_GENERIC_ACTIONS_2 = "ERROR_GENERIC_ACTIONS_2", t.ERROR_GENERIC_ACTIONS_3 = "ERROR_GENERIC_ACTIONS_3", t.ERROR_GENERIC_ACTIONS_4 = "ERROR_GENERIC_ACTIONS_4", t.DESKTOP_SHORT_CTA = "DESKTOP_SHORT_CTA", t.MOBILE_SHORT_CTA = "MOBILE_SHORT_CTA", t.ROTATE = "ROTATE", t.MOVE = "MOVE", t.PLAY = "PLAY", t.INSIDE = "INSIDE", t.ZOOM = "ZOOM", t.MEASUREMENT = "MEASUREMENT", t.MEASUREMENT_START_ADDING = "MEASUREMENT_START_ADDING", t.MEASUREMENT_CONTINUOUS_LINES = "MEASUREMENT_CONTINUOUS_LINES", t.MEASUREMENT_SNAPPING = "MEASUREMENT_SNAPPING", t.MEASUREMENT_UNITS = "MEASUREMENT_UNITS", t.MEASUREMENT_IMPERIAL = "MEASUREMENT_IMPERIAL", t.MEASUREMENT_METRIC = "MEASUREMENT_METRIC", t.MEASUREMENT_SETTINGS = "MEASUREMENT_SETTINGS", t.MEASUREMENT_HELP_CLICK_ANYWHERE = "MEASUREMENT_HELP_CLICK_ANYWHERE", t.MEASUREMENT_HELP_ESCAPE = "MEASUREMENT_HELP_ESCAPE", t.MEASUREMENT_HELP_PRESS_START = "MEASUREMENT_HELP_PRESS_START", t.MEASUREMENT_HELP_DRAG_EDIT = "MEASUREMENT_HELP_DRAG_EDIT", t.MEASUREMENT_HELP_PRESS_END = "MEASUREMENT_HELP_PRESS_END", t.MEASUREMENT_MODE = "MEASUREMENT_MODE", t.MEASUREMENT_HELP_MODAL_SUB_HEADER = "MEASUREMENT_HELP_MODAL_SUB_HEADER", t.MEASUREMENT_HELP_MODAL_BODY_1 = "MEASUREMENT_HELP_MODAL_BODY_1", t.MEASUREMENT_HELP_MODAL_BODY_2 = "MEASUREMENT_HELP_MODAL_BODY_2", t.MEASUREMENT_NUDGE_TITLE = "MEASUREMENT_NUDGE_TITLE", t.MEASUREMENT_NUDGE_MESSAGE = "MEASUREMENT_NUDGE_MESSAGE", t.ON = "ON", t.OFF = "OFF", t.CLOSE = "CLOSE", t.COPY = "COPY", t.COPY_URL = "COPY_URL", t.SHARE = "SHARE", t.SHARE_COPIED = "SHARE_COPIED", t.SHARE_CURRENT_LOCATION = "SHARE_CURRENT_LOCATION", t.SHARE_DEFAULT_LOCATION = "SHARE_DEFAULT_LOCATION", t.SHARE_ERROR_SWEEP_DISABLED = "SHARE_ERROR_SWEEP_DISABLED", t.SHARE_EXPLORE = "SHARE_EXPLORE", t.SHARE_AT = "SHARE_AT", t.SHARE_WITH = "SHARE_WITH", t.SHARE_3D = "SHARE_3D", t.SHARE_MODAL_TITLE = "SHARE_MODAL_TITLE", t.SHARED_TITLE = "SHARED_TITLE", t.SHARED_MESSAGE = "SHARED_MESSAGE", t.SHARED_MESSAGE_HASHTAG = "SHARED_MESSAGE_HASHTAG"
    }(r || (r = {})), e.a = r
}, function(t, e, n) {
    "use strict";
    var r, i;
    n.d(e, "b", (function() {
            return r
        })), n.d(e, "a", (function() {
            return i
        })),
        function(t) {
            t[t.Desktop = 0] = "Desktop", t[t.Mobile = 1] = "Mobile", t[t.VrOrientOnly = 2] = "VrOrientOnly", t[t.VrWithController = 3] = "VrWithController", t[t.VrWithTrackedController = 4] = "VrWithTrackedController"
        }(r || (r = {})),
        function(t) {
            t.None = "interaction.none", t.Direct = "interaction.direct", t.Key = "interaction.key", t.Gui = "interaction.gui"
        }(i || (i = {}))
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    }));
    var r = n(64),
        i = n(0),
        o = n(13),
        a = 0;

    function s() {
        Object.defineProperty(this, "id", {
            value: a++
        }), this.uuid = o.a.generateUUID(), this.name = "", this.type = "Material", this.fog = !0, this.blending = i.nb, this.side = i.F, this.flatShading = !1, this.vertexTangents = !1, this.vertexColors = i.lb, this.opacity = 1, this.transparent = !1, this.blendSrc = i.hc, this.blendDst = i.tb, this.blendEquation = i.b, this.blendSrcAlpha = null, this.blendDstAlpha = null, this.blendEquationAlpha = null, this.depthFunc = i.N, this.depthTest = !0, this.depthWrite = !0, this.stencilWriteMask = 255, this.stencilFunc = i.g, this.stencilRef = 0, this.stencilFuncMask = 255, this.stencilFail = i.L, this.stencilZFail = i.L, this.stencilZPass = i.L, this.stencilWrite = !1, this.clippingPlanes = null, this.clipIntersection = !1, this.clipShadows = !1, this.shadowSide = null, this.colorWrite = !0, this.precision = null, this.polygonOffset = !1, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.dithering = !1, this.alphaTest = 0, this.premultipliedAlpha = !1, this.visible = !0, this.toneMapped = !0, this.userData = {}, this.needsUpdate = !0
    }
    s.prototype = Object.assign(Object.create(r.a.prototype), {
        constructor: s,
        isMaterial: !0,
        onBeforeCompile: function() {},
        setValues: function(t) {
            if (void 0 !== t)
                for (var e in t) {
                    var n = t[e];
                    if (void 0 !== n)
                        if ("shading" !== e) {
                            var r = this[e];
                            void 0 !== r ? r && r.isColor ? r.set(n) : r && r.isVector3 && n && n.isVector3 ? r.copy(n) : this[e] = n : console.warn("THREE." + this.type + ": '" + e + "' is not a property of this material.")
                        } else console.warn("THREE." + this.type + ": .shading has been removed. Use the boolean .flatShading instead."), this.flatShading = n === i.D;
                    else console.warn("THREE.Material: '" + e + "' parameter is undefined.")
                }
        },
        toJSON: function(t) {
            var e = void 0 === t || "string" == typeof t;
            e && (t = {
                textures: {},
                images: {}
            });
            var n = {
                metadata: {
                    version: 4.5,
                    type: "Material",
                    generator: "Material.toJSON"
                }
            };

            function r(t) {
                var e = [];
                for (var n in t) {
                    var r = t[n];
                    delete r.metadata, e.push(r)
                }
                return e
            }
            if (n.uuid = this.uuid, n.type = this.type, "" !== this.name && (n.name = this.name), this.color && this.color.isColor && (n.color = this.color.getHex()), void 0 !== this.roughness && (n.roughness = this.roughness), void 0 !== this.metalness && (n.metalness = this.metalness), this.sheen && this.sheen.isColor && (n.sheen = this.sheen.getHex()), this.emissive && this.emissive.isColor && (n.emissive = this.emissive.getHex()), this.emissiveIntensity && 1 !== this.emissiveIntensity && (n.emissiveIntensity = this.emissiveIntensity), this.specular && this.specular.isColor && (n.specular = this.specular.getHex()), void 0 !== this.shininess && (n.shininess = this.shininess), void 0 !== this.clearcoat && (n.clearcoat = this.clearcoat), void 0 !== this.clearcoatRoughness && (n.clearcoatRoughness = this.clearcoatRoughness), this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture && (n.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(t).uuid, n.clearcoatNormalScale = this.clearcoatNormalScale.toArray()), this.map && this.map.isTexture && (n.map = this.map.toJSON(t).uuid), this.matcap && this.matcap.isTexture && (n.matcap = this.matcap.toJSON(t).uuid), this.alphaMap && this.alphaMap.isTexture && (n.alphaMap = this.alphaMap.toJSON(t).uuid), this.lightMap && this.lightMap.isTexture && (n.lightMap = this.lightMap.toJSON(t).uuid), this.aoMap && this.aoMap.isTexture && (n.aoMap = this.aoMap.toJSON(t).uuid, n.aoMapIntensity = this.aoMapIntensity), this.bumpMap && this.bumpMap.isTexture && (n.bumpMap = this.bumpMap.toJSON(t).uuid, n.bumpScale = this.bumpScale), this.normalMap && this.normalMap.isTexture && (n.normalMap = this.normalMap.toJSON(t).uuid, n.normalMapType = this.normalMapType, n.normalScale = this.normalScale.toArray()), this.displacementMap && this.displacementMap.isTexture && (n.displacementMap = this.displacementMap.toJSON(t).uuid, n.displacementScale = this.displacementScale, n.displacementBias = this.displacementBias), this.roughnessMap && this.roughnessMap.isTexture && (n.roughnessMap = this.roughnessMap.toJSON(t).uuid), this.metalnessMap && this.metalnessMap.isTexture && (n.metalnessMap = this.metalnessMap.toJSON(t).uuid), this.emissiveMap && this.emissiveMap.isTexture && (n.emissiveMap = this.emissiveMap.toJSON(t).uuid), this.specularMap && this.specularMap.isTexture && (n.specularMap = this.specularMap.toJSON(t).uuid), this.envMap && this.envMap.isTexture && (n.envMap = this.envMap.toJSON(t).uuid, n.reflectivity = this.reflectivity, n.refractionRatio = this.refractionRatio, void 0 !== this.combine && (n.combine = this.combine), void 0 !== this.envMapIntensity && (n.envMapIntensity = this.envMapIntensity)), this.gradientMap && this.gradientMap.isTexture && (n.gradientMap = this.gradientMap.toJSON(t).uuid), void 0 !== this.size && (n.size = this.size), void 0 !== this.sizeAttenuation && (n.sizeAttenuation = this.sizeAttenuation), this.blending !== i.nb && (n.blending = this.blending), !0 === this.flatShading && (n.flatShading = this.flatShading), this.side !== i.F && (n.side = this.side), this.vertexColors !== i.lb && (n.vertexColors = this.vertexColors), this.opacity < 1 && (n.opacity = this.opacity), !0 === this.transparent && (n.transparent = this.transparent), n.depthFunc = this.depthFunc, n.depthTest = this.depthTest, n.depthWrite = this.depthWrite, n.stencilWrite = this.stencilWrite, n.stencilWriteMask = this.stencilWriteMask, n.stencilFunc = this.stencilFunc, n.stencilRef = this.stencilRef, n.stencilFuncMask = this.stencilFuncMask, n.stencilFail = this.stencilFail, n.stencilZFail = this.stencilZFail, n.stencilZPass = this.stencilZPass, this.rotation && 0 !== this.rotation && (n.rotation = this.rotation), !0 === this.polygonOffset && (n.polygonOffset = !0), 0 !== this.polygonOffsetFactor && (n.polygonOffsetFactor = this.polygonOffsetFactor), 0 !== this.polygonOffsetUnits && (n.polygonOffsetUnits = this.polygonOffsetUnits), this.linewidth && 1 !== this.linewidth && (n.linewidth = this.linewidth), void 0 !== this.dashSize && (n.dashSize = this.dashSize), void 0 !== this.gapSize && (n.gapSize = this.gapSize), void 0 !== this.scale && (n.scale = this.scale), !0 === this.dithering && (n.dithering = !0), this.alphaTest > 0 && (n.alphaTest = this.alphaTest), !0 === this.premultipliedAlpha && (n.premultipliedAlpha = this.premultipliedAlpha), !0 === this.wireframe && (n.wireframe = this.wireframe), this.wireframeLinewidth > 1 && (n.wireframeLinewidth = this.wireframeLinewidth), "round" !== this.wireframeLinecap && (n.wireframeLinecap = this.wireframeLinecap), "round" !== this.wireframeLinejoin && (n.wireframeLinejoin = this.wireframeLinejoin), !0 === this.morphTargets && (n.morphTargets = !0), !0 === this.morphNormals && (n.morphNormals = !0), !0 === this.skinning && (n.skinning = !0), !1 === this.visible && (n.visible = !1), !1 === this.toneMapped && (n.toneMapped = !1), "{}" !== JSON.stringify(this.userData) && (n.userData = this.userData), e) {
                var o = r(t.textures),
                    a = r(t.images);
                o.length > 0 && (n.textures = o), a.length > 0 && (n.images = a)
            }
            return n
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(t) {
            this.name = t.name, this.fog = t.fog, this.blending = t.blending, this.side = t.side, this.flatShading = t.flatShading, this.vertexTangents = t.vertexTangents, this.vertexColors = t.vertexColors, this.opacity = t.opacity, this.transparent = t.transparent, this.blendSrc = t.blendSrc, this.blendDst = t.blendDst, this.blendEquation = t.blendEquation, this.blendSrcAlpha = t.blendSrcAlpha, this.blendDstAlpha = t.blendDstAlpha, this.blendEquationAlpha = t.blendEquationAlpha, this.depthFunc = t.depthFunc, this.depthTest = t.depthTest, this.depthWrite = t.depthWrite, this.stencilWriteMask = t.stencilWriteMask, this.stencilFunc = t.stencilFunc, this.stencilRef = t.stencilRef, this.stencilFuncMask = t.stencilFuncMask, this.stencilFail = t.stencilFail, this.stencilZFail = t.stencilZFail, this.stencilZPass = t.stencilZPass, this.stencilWrite = t.stencilWrite;
            var e = t.clippingPlanes,
                n = null;
            if (null !== e) {
                var r = e.length;
                n = new Array(r);
                for (var i = 0; i !== r; ++i) n[i] = e[i].clone()
            }
            return this.clippingPlanes = n, this.clipIntersection = t.clipIntersection, this.clipShadows = t.clipShadows, this.shadowSide = t.shadowSide, this.colorWrite = t.colorWrite, this.precision = t.precision, this.polygonOffset = t.polygonOffset, this.polygonOffsetFactor = t.polygonOffsetFactor, this.polygonOffsetUnits = t.polygonOffsetUnits, this.dithering = t.dithering, this.alphaTest = t.alphaTest, this.premultipliedAlpha = t.premultipliedAlpha, this.visible = t.visible, this.toneMapped = t.toneMapped, this.userData = JSON.parse(JSON.stringify(t.userData)), this
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "f", (function() {
        return a
    })), n.d(e, "b", (function() {
        return s
    })), n.d(e, "c", (function() {
        return u
    })), n.d(e, "g", (function() {
        return c
    })), n.d(e, "h", (function() {
        return l
    })), n.d(e, "d", (function() {
        return h
    })), n.d(e, "a", (function() {
        return f
    })), n.d(e, "i", (function() {
        return p
    })), n.d(e, "e", (function() {
        return d
    }));
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.data = e, n
            }
            return o(e, t), e
        }(i.a),
        s = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.data = e, n
            }
            return o(e, t), e
        }(i.a),
        u = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return o(e, t), e
        }(i.a),
        c = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.sid = e, r.text = n, r
            }
            return o(e, t), e
        }(i.a),
        l = function(t) {
            function e(e, n, r) {
                var i = t.call(this) || this;
                return i.sid = e, i.oldText = n, i.newText = r, i
            }
            return o(e, t), e
        }(i.a),
        h = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.data = e, n
            }
            return o(e, t), e
        }(i.a),
        f = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.count = e, n
            }
            return o(e, t), e
        }(i.a),
        p = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.data = e, n
            }
            return o(e, t), e
        }(i.a),
        d = function(t) {
            function e(e, n, r) {
                var i = t.call(this) || this;
                return i.opened = e, i.viewmode = n, i.count = r, i
            }
            return o(e, t), e
        }(i.a);
    ! function(t) {
        function e(e) {
            var n = t.call(this) || this;
            return n.snapping = e, n
        }
        o(e, t)
    }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r = n(37),
        i = n(1),
        o = new r.a;

    function a(t, e) {
        this.center = void 0 !== t ? t : new i.a, this.radius = void 0 !== e ? e : 0
    }
    Object.assign(a.prototype, {
        set: function(t, e) {
            return this.center.copy(t), this.radius = e, this
        },
        setFromPoints: function(t, e) {
            var n = this.center;
            void 0 !== e ? n.copy(e) : o.setFromPoints(t).getCenter(n);
            for (var r = 0, i = 0, a = t.length; i < a; i++) r = Math.max(r, n.distanceToSquared(t[i]));
            return this.radius = Math.sqrt(r), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(t) {
            return this.center.copy(t.center), this.radius = t.radius, this
        },
        empty: function() {
            return this.radius <= 0
        },
        containsPoint: function(t) {
            return t.distanceToSquared(this.center) <= this.radius * this.radius
        },
        distanceToPoint: function(t) {
            return t.distanceTo(this.center) - this.radius
        },
        intersectsSphere: function(t) {
            var e = this.radius + t.radius;
            return t.center.distanceToSquared(this.center) <= e * e
        },
        intersectsBox: function(t) {
            return t.intersectsSphere(this)
        },
        intersectsPlane: function(t) {
            return Math.abs(t.distanceToPoint(this.center)) <= this.radius
        },
        clampPoint: function(t, e) {
            var n = this.center.distanceToSquared(t);
            return void 0 === e && (console.warn("THREE.Sphere: .clampPoint() target is now required"), e = new i.a), e.copy(t), n > this.radius * this.radius && (e.sub(this.center).normalize(), e.multiplyScalar(this.radius).add(this.center)), e
        },
        getBoundingBox: function(t) {
            return void 0 === t && (console.warn("THREE.Sphere: .getBoundingBox() target is now required"), t = new r.a), t.set(this.center, this.center), t.expandByScalar(this.radius), t
        },
        applyMatrix4: function(t) {
            return this.center.applyMatrix4(t), this.radius = this.radius * t.getMaxScaleOnAxis(), this
        },
        translate: function(t) {
            return this.center.add(t), this
        },
        equals: function(t) {
            return t.center.equals(this.center) && t.radius === this.radius
        }
    })
}, function(t, e, n) {
    "use strict";
    var r, i, o = n(142),
        a = n(17),
        s = n(51),
        u = n(102),
        c = n(106),
        l = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        h = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.camera = new s.a(u.a.fov, e, u.a.near, u.a.far), n.add(n.camera), n.camera.layers.mask = c.a.ALL.mask, n
            }
            return l(e, t), e.prototype.dispose = function() {
                this.remove(this.camera)
            }, e
        }(a.a);
    n.d(e, "a", (function() {
            return i
        })),
        function(t) {
            t[t.Root = 0] = "Root", t[t.CameraRig = 1] = "CameraRig"
        }(i || (i = {}));
    var f = function() {
        function t(t, e, n) {
            this.cwfRenderer = t, this.cameraData = e, this.canvas = n, this.rendering = !1, this.cameraRigStale = !0
        }
        return t.prototype.addChild = function(t, e) {
            switch (t) {
                case i.Root:
                    this.scene.add(e);
                    break;
                case i.CameraRig:
                    this.cameraRig.add(e);
                    break;
                default:
                    return !1
            }
            return !0
        }, t.prototype.removeChild = function(t, e) {
            switch (t) {
                case i.Root:
                    this.scene.remove(e);
                    break;
                case i.CameraRig:
                    this.cameraRig.remove(e);
                    break;
                default:
                    return !1
            }
            return !0
        }, Object.defineProperty(t.prototype, "camera", {
            get: function() {
                return this.updateCameraRig(), this.cameraRig.camera
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.init = function() {
            this.scene = new o.a, this.cameraRig = new h(this.canvas.aspectRatio)
        }, t.prototype.dispose = function() {
            this.cameraRig.dispose()
        }, t.prototype.startRender = function(t) {
            this.rendering = t
        }, t.prototype.activate = function(t) {
            var e = this;
            this.scene.add(this.cameraRig), this.cameraDataCallback = function() {
                return e.cameraRigStale = !0
            }, this.cameraData.pose.onChanged(this.cameraDataCallback)
        }, t.prototype.deactivate = function(t) {
            this.scene.remove(this.cameraRig), this.cameraData.pose.removeOnChanged(this.cameraDataCallback)
        }, t.prototype.beforeRender = function() {
            this.updateCameraRig()
        }, t.prototype.updateCameraRig = function() {
            this.cameraRigStale && (this.cameraRig.position.copy(this.cameraData.pose.position), this.cameraRig.camera.quaternion.copy(this.cameraData.pose.rotation), this.cameraRig.camera.projectionMatrix.copy(this.cameraData.pose.projection.asThreeMatrix4()), this.cameraRig.camera.projectionMatrixInverse.getInverse(this.cameraRig.camera.projectionMatrix), this.cameraRig.updateMatrixWorld(!0), this.cameraRigStale = !1)
        }, t.prototype.render = function() {
            this.rendering && this.cwfRenderer.renderer.render(this.scene, this.cameraRig.camera)
        }, t.prototype.setSize = function(t, e) {
            this.cameraRigStale = !0, this.cameraRig.camera.updateProjectionMatrix()
        }, t
    }();
    e.b = f
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r = n(126),
        i = n(17),
        o = n(13);

    function a(t, e, n, i) {
        r.a.call(this), this.type = "PerspectiveCamera", this.fov = void 0 !== t ? t : 50, this.zoom = 1, this.near = void 0 !== n ? n : .1, this.far = void 0 !== i ? i : 2e3, this.focus = 10, this.aspect = void 0 !== e ? e : 1, this.view = null, this.filmGauge = 35, this.filmOffset = 0, this.updateProjectionMatrix()
    }
    a.prototype = Object.assign(Object.create(r.a.prototype), {
        constructor: a,
        isPerspectiveCamera: !0,
        copy: function(t, e) {
            return r.a.prototype.copy.call(this, t, e), this.fov = t.fov, this.zoom = t.zoom, this.near = t.near, this.far = t.far, this.focus = t.focus, this.aspect = t.aspect, this.view = null === t.view ? null : Object.assign({}, t.view), this.filmGauge = t.filmGauge, this.filmOffset = t.filmOffset, this
        },
        setFocalLength: function(t) {
            var e = .5 * this.getFilmHeight() / t;
            this.fov = 2 * o.a.RAD2DEG * Math.atan(e), this.updateProjectionMatrix()
        },
        getFocalLength: function() {
            var t = Math.tan(.5 * o.a.DEG2RAD * this.fov);
            return .5 * this.getFilmHeight() / t
        },
        getEffectiveFOV: function() {
            return 2 * o.a.RAD2DEG * Math.atan(Math.tan(.5 * o.a.DEG2RAD * this.fov) / this.zoom)
        },
        getFilmWidth: function() {
            return this.filmGauge * Math.min(this.aspect, 1)
        },
        getFilmHeight: function() {
            return this.filmGauge / Math.max(this.aspect, 1)
        },
        setViewOffset: function(t, e, n, r, i, o) {
            this.aspect = t / e, null === this.view && (this.view = {
                enabled: !0,
                fullWidth: 1,
                fullHeight: 1,
                offsetX: 0,
                offsetY: 0,
                width: 1,
                height: 1
            }), this.view.enabled = !0, this.view.fullWidth = t, this.view.fullHeight = e, this.view.offsetX = n, this.view.offsetY = r, this.view.width = i, this.view.height = o, this.updateProjectionMatrix()
        },
        clearViewOffset: function() {
            null !== this.view && (this.view.enabled = !1), this.updateProjectionMatrix()
        },
        updateProjectionMatrix: function() {
            var t = this.near,
                e = t * Math.tan(.5 * o.a.DEG2RAD * this.fov) / this.zoom,
                n = 2 * e,
                r = this.aspect * n,
                i = -.5 * r,
                a = this.view;
            if (null !== this.view && this.view.enabled) {
                var s = a.fullWidth,
                    u = a.fullHeight;
                i += a.offsetX * r / s, e -= a.offsetY * n / u, r *= a.width / s, n *= a.height / u
            }
            var c = this.filmOffset;
            0 !== c && (i += t * c / this.getFilmWidth()), this.projectionMatrix.makePerspective(i, i + r, e, e - n, t, this.far), this.projectionMatrixInverse.getInverse(this.projectionMatrix)
        },
        toJSON: function(t) {
            var e = i.a.prototype.toJSON.call(this, t);
            return e.object.fov = this.fov, e.object.zoom = this.zoom, e.object.near = this.near, e.object.far = this.far, e.object.focus = this.focus, e.object.aspect = this.aspect, null !== this.view && (e.object.view = Object.assign({}, this.view)), e.object.filmGauge = this.filmGauge, e.object.filmOffset = this.filmOffset, e
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(101),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    var r = n(7),
        i = function() {
            function t(e) {
                this.elements = [], e ? ! function(t) {
                    return void 0 !== t.elements
                }(e) ? r.a.prototype.set.apply(this, e) : this.elements = e.elements.slice() : r.a.prototype.set.apply(this, t.identity)
            }
            return t.prototype.equals = function(t) {
                return r.a.prototype.equals.call(this, t)
            }, t.prototype.clone = function() {
                return new t(this)
            }, t.identity = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], t
        }();
    n.d(e, "a", (function() {
        return s
    }));
    var o, a = (o = function(t, e) {
            return (o = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        s = function(t) {
            function e(e) {
                var n = this;
                return (n = e instanceof Array ? t.call(this, e) || this : e ? t.call(this, e) || this : t.call(this) || this).threeMatrix = new r.a, n
            }
            return a(e, t), e.prototype.set = function(t, e, n, i, o, a, s, u, c, l, h, f, p, d, m, v) {
                return r.a.prototype.set.call(this, t, e, n, i, o, a, s, u, c, l, h, f, p, d, m, v), this
            }, e.prototype.makeScale = function(t, e, n) {
                return r.a.prototype.makeScale.call(this, t, e, n), this
            }, e.prototype.copy = function(t) {
                for (var e = 0; e < this.elements.length; e++) this.elements[e] = t.elements[e];
                return this
            }, e.prototype.clone = function() {
                return (new e).copy(this)
            }, e.prototype.transpose = function() {
                return r.a.prototype.transpose.call(this)
            }, e.prototype.lookAt = function(t, e, n) {
                return r.a.prototype.lookAt.call(this, t, e, n), this
            }, e.prototype.setPosition = function(t) {
                return r.a.prototype.setPosition.call(this, t.x, t.y, t.z), this
            }, e.prototype.extractRotation = function(t) {
                return r.a.prototype.extractRotation.call(this, t), this
            }, e.prototype.makePerspective = function(t, e, n, i, o, a) {
                return r.a.prototype.makePerspective.call(this, t, e, n, i, o, a), this
            }, e.prototype.makePerspectiveFov = function(t, e, n, i) {
                void 0 === n && (n = .1), void 0 === i && (i = 1e3);
                var o = n * Math.tan(t * (Math.PI / 180) / 2),
                    a = -o,
                    s = o * e,
                    u = -s;
                return r.a.prototype.makePerspective.call(this, u, s, o, a, n, i), this
            }, e.prototype.makeOrthographic = function(t, e, n, i, o, a) {
                return r.a.prototype.makeOrthographic.call(this, t, e, n, i, o, a), this
            }, e.prototype.identity = function() {
                return this.set.apply(this, i.identity)
            }, e.prototype.makeRotationFromQuaternion = function(t) {
                return r.a.prototype.makeRotationFromQuaternion.call(this, t), this
            }, e.prototype.makeRotationFromEuler = function(t) {
                return r.a.prototype.makeRotationFromEuler.call(this, t), this
            }, e.prototype.getInverse = function(t) {
                return r.a.prototype.getInverse.call(this, t), this
            }, e.prototype.premultiply = function(t) {
                return r.a.prototype.premultiply.call(this, t), this
            }, e.prototype.multiplyMatrices = function(t, e) {
                return r.a.prototype.multiplyMatrices.call(this, t, e), this
            }, e.prototype.scale = function(t) {
                return r.a.prototype.scale.call(this, t), this
            }, e.prototype.compose = function(t, e, n) {
                return r.a.prototype.compose.call(this, t, e, n), this
            }, e.prototype.asThreeMatrix4 = function() {
                return this.threeMatrix.set(this.elements[0], this.elements[4], this.elements[8], this.elements[12], this.elements[1], this.elements[5], this.elements[9], this.elements[13], this.elements[2], this.elements[6], this.elements[10], this.elements[14], this.elements[3], this.elements[7], this.elements[11], this.elements[15])
            }, e
        }(i)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r = n(47),
        i = n(0),
        o = n(18);

    function a(t) {
        r.a.call(this), this.type = "MeshBasicMaterial", this.color = new o.a(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = i.db, this.reflectivity = 1, this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.setValues(t)
    }
    a.prototype = Object.create(r.a.prototype), a.prototype.constructor = a, a.prototype.isMeshBasicMaterial = !0, a.prototype.copy = function(t) {
        return r.a.prototype.copy.call(this, t), this.color.copy(t.color), this.map = t.map, this.lightMap = t.lightMap, this.lightMapIntensity = t.lightMapIntensity, this.aoMap = t.aoMap, this.aoMapIntensity = t.aoMapIntensity, this.specularMap = t.specularMap, this.alphaMap = t.alphaMap, this.envMap = t.envMap, this.combine = t.combine, this.reflectivity = t.reflectivity, this.refractionRatio = t.refractionRatio, this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, this.wireframeLinecap = t.wireframeLinecap, this.wireframeLinejoin = t.wireframeLinejoin, this.skinning = t.skinning, this.morphTargets = t.morphTargets, this
    }
}, function(t, e, n) {
    "use strict";
    var r;
    n.d(e, "a", (function() {
            return r
        })),
        function(t) {
            t.UnitType = "user_preference/unit_type", t.MeasurementSnapping = "user_preference/measurement_snapping", t.MeasurementContinuousLines = "user_preference/measurement_continuous", t.MeasurementUserNudge = "user_preference/measurement_nudge"
        }(r || (r = {}))
}, function(t, e, n) {
    "use strict";
    n.d(e, "n", (function() {
        return W
    })), n.d(e, "b", (function() {
        return X
    })), n.d(e, "c", (function() {
        return q
    })), n.d(e, "d", (function() {
        return Y
    })), n.d(e, "i", (function() {
        return K
    })), n.d(e, "l", (function() {
        return Z
    })), n.d(e, "j", (function() {
        return Q
    })), n.d(e, "k", (function() {
        return J
    })), n.d(e, "h", (function() {
        return $
    })), n.d(e, "f", (function() {
        return tt
    })), n.d(e, "r", (function() {
        return et
    })), n.d(e, "q", (function() {
        return nt
    })), n.d(e, "g", (function() {
        return rt
    })), n.d(e, "o", (function() {
        return it
    })), n.d(e, "a", (function() {
        return ot
    })), n.d(e, "m", (function() {
        return at
    })), n.d(e, "e", (function() {
        return st
    })), n.d(e, "p", (function() {
        return ut
    }));
    var r, i, o, a, s, u, c, l, h, f, p, d, m, v, y, g, b, _, w, x, E, S, T, M, O, P, A, L, R, D = n(5),
        I = n(1),
        C = n(26),
        N = n(16),
        U = n(57),
        j = n(76),
        k = n(7),
        F = n(89),
        B = n(53),
        G = n(10),
        z = n(160),
        H = n(99),
        V = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        W = function(t) {
            return 1 === t.elements[15]
        },
        X = function(t, e) {
            var n = new I.a;
            if (e.intersectBox(t, n), !n) return null;
            var r = new I.a;
            return Object(z.a)(n.x, t.max.x, H.a.epsilon) ? r.x = -1 : Object(z.a)(n.x, t.min.x, H.a.epsilon) ? r.x = 1 : Object(z.a)(n.y, t.max.y, H.a.epsilon) ? r.y = -1 : Object(z.a)(n.y, t.min.y, H.a.epsilon) ? r.y = 1 : Object(z.a)(n.z, t.max.z, H.a.epsilon) ? r.z = -1 : r.z = 1, t.containsPoint(e.origin) || r.multiplyScalar(-1), {
                point: n,
                normal: r
            }
        },
        q = (r = new I.a, function(t, e, n, i) {
            return r.copy(t).sub(e), r.clampLength(n, i), e.clone().add(r)
        }),
        Y = function() {
            var t = new I.a;
            return function(e, n, r, i) {
                t.copy(n).sub(e);
                var o = Math.atan2(Math.sqrt(Math.pow(t.x, 2) + Math.pow(t.z, 2)), t.y),
                    a = Math.min(Math.max(r, o), i);
                return Math.abs(o - a) > Number.EPSILON ? K(e, n, o - a, !1) : e
            }
        }(),
        K = function() {
            var t = new I.a,
                e = new I.a;
            return function(n, r, i, o) {
                return t.copy(r).sub(n), o ? e.copy(G.b.UP) : e.copy(t).applyAxisAngle(G.b.UP, -1 * Math.PI / 2).setY(0).normalize(), t.applyAxisAngle(e, i), r.clone().sub(t)
            }
        }(),
        Z = (i = new I.a, o = new I.a, function(t, e, n) {
            return i.copy(t).sub(e).normalize(), o.copy(t).sub(n).normalize(), (new N.a).setFromUnitVectors(i, o)
        }),
        Q = (a = new B.a, function(t, e) {
            return a.setPosition(t), a.lookAt(t, e, G.b.UP), (new N.a).setFromRotationMatrix(a.asThreeMatrix4())
        }),
        J = (s = new I.a, function(t, e, n) {
            return s.copy(G.b.FORWARD).applyQuaternion(t).normalize(), s.clone().multiplyScalar(-1 * n).add(e)
        }),
        $ = (u = new j.a, c = new I.a, l = new I.a, function(t, e, n) {
            return l.set(0, 0, 0), c.copy(G.b.FORWARD).applyQuaternion(e), u.set(t, c), u.intersectPlane(n, l)
        }),
        tt = (h = new I.a, f = new I.a, p = new I.a, d = new I.a, m = [new I.a, new I.a, new I.a, new I.a, new I.a, new I.a, new I.a, new I.a], v = new I.a, y = new I.a, g = new I.a, b = new I.a, _ = new U.a, w = new I.a, x = new j.a, E = new I.a, S = new I.a, function(t, e, n, r, i, o) {
            h.copy(G.b.FORWARD).applyQuaternion(e).setY(0), f.copy(h).setY(n).normalize(), d.copy(f).applyAxisAngle(G.b.UP, -Math.PI / 2).setY(0).normalize(), p.copy(d).cross(f).normalize();
            for (var a = 0, s = r.max, u = r.min, c = [s, u], l = 0; l < 2; l++)
                for (var T = c[l].x, M = 0; M < 2; M++)
                    for (var O = c[M].y, P = 0; P < 2; P++) {
                        var A = c[P].z;
                        m[a].set(T, O, A), a++
                    }
            v.copy(u), g.copy(t).setY(u.y);
            var L = y.copy(v).sub(g).dot(f);
            m.forEach((function(t) {
                if (t.y !== s.y) {
                    var e = y.copy(t).sub(g).dot(f);
                    e < L && (v.copy(t), L = e)
                }
            }));
            var R = Math.sign(v.dot(d));
            b.copy(v).setX(v.x === s.x ? u.x : s.x), Math.sign(b.dot(d)) !== R ? _.set(w.set(0, 0, -1 * Math.sign(v.z)), Math.abs(v.z)) : (b.copy(v).setZ(v.z === s.z ? u.z : s.z), _.set(w.set(-1 * Math.sign(v.x), 0, 0), Math.abs(v.x))), x.set(t, E.copy(f).multiplyScalar(-1)), x.intersectPlane(_, S);
            var D = Math.min(Math.abs(S && S.dot(f)), L),
                I = 0,
                C = 0;
            m.forEach((function(e) {
                y.copy(e).sub(t);
                var n = Math.abs(y.dot(d)),
                    r = Math.abs(y.dot(p));
                n > I && (I = n), r > C && (C = r)
            }));
            var N = I / Math.tan(i * o / 2),
                U = C / Math.tan(i / 2),
                j = Math.max(N, U) + Math.abs(D),
                k = {};
            return k.position = t.clone().add(f.clone().multiplyScalar(1.1 * -j)), k.rotation = Q(k.position, t), k
        }),
        et = (T = new k.a, function() {
            var t = new k.a,
                e = new C.a;
            return function(n, r, i, o, a) {
                return a = a || new D.a, t.makeRotationFromQuaternion(i).setPosition(r), t.getInverse(t), t.premultiply(o.asThreeMatrix4()), e.x = n.x, e.y = n.y, e.z = n.z, e.w = 1, e.applyMatrix4(t), e.x /= e.w, e.y /= e.w, e.z /= e.w, e.w = 1, a.x = e.x, a.y = e.y, a
            }
        }()),
        nt = (M = new I.a, function(t, e, n) {
            void 0 === n && (n = G.b.UP);
            var r = t.angleTo(e);
            return Math.sign(M.crossVectors(t, e).dot(n)) * r
        }),
        rt = (O = new B.a, P = new I.a, function(t, e, n, r) {
            return r = r || new B.a, t.parent ? t.parent.getWorldPosition(P) : t.getWorldPosition(P), r.lookAt(e, P, n), t.parent && r.premultiply(O.getInverse(t.parent.matrixWorld)), r.extractRotation(r), r
        }),
        it = function(t) {
            return !!t && 1 === t.elements[15]
        },
        ot = function(t, e, n, r, i) {
            void 0 === i && (i = 1.5);
            var o = 1 / t.elements[5];
            if (it(t)) return i * r / (2 * o);
            var a = e.distanceTo(n),
                s = Math.atan(o);
            return r * (i / (2 * Math.tan(s) * a))
        },
        at = (A = new I.a, L = new k.a, function(t, e, n) {
            var r = A.set(0, 0, -t).applyMatrix4(e).z;
            return A.set(2 / n, 0, r).applyMatrix4(L.getInverse(e)), A.x
        }),
        st = function(t) {
            return 1 / t.elements[5]
        },
        ut = (R = new I.a, function(t, e, n) {
            var r = n.angleTo(G.b.UP),
                i = Math.abs(r - Math.PI);
            return r < .2 || i < .2 ? (t.quaternion.setFromUnitVectors(G.b.FORWARD, n), !0) : (t.lookAt(R.copy(e).add(n)), !1)
        });
    ! function() {
        var t = new I.a,
            e = new I.a(1e4, 1e4, 1e4),
            n = [new F.a, new F.a, new F.a, new F.a],
            r = [new I.a, new I.a, new I.a, new I.a]
    }()
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return u
    }));
    var r = n(42),
        i = n(1),
        o = new i.a,
        a = new i.a,
        s = new r.a;

    function u(t, e) {
        this.normal = void 0 !== t ? t : new i.a(1, 0, 0), this.constant = void 0 !== e ? e : 0
    }
    Object.assign(u.prototype, {
        isPlane: !0,
        set: function(t, e) {
            return this.normal.copy(t), this.constant = e, this
        },
        setComponents: function(t, e, n, r) {
            return this.normal.set(t, e, n), this.constant = r, this
        },
        setFromNormalAndCoplanarPoint: function(t, e) {
            return this.normal.copy(t), this.constant = -e.dot(this.normal), this
        },
        setFromCoplanarPoints: function(t, e, n) {
            var r = o.subVectors(n, e).cross(a.subVectors(t, e)).normalize();
            return this.setFromNormalAndCoplanarPoint(r, t), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(t) {
            return this.normal.copy(t.normal), this.constant = t.constant, this
        },
        normalize: function() {
            var t = 1 / this.normal.length();
            return this.normal.multiplyScalar(t), this.constant *= t, this
        },
        negate: function() {
            return this.constant *= -1, this.normal.negate(), this
        },
        distanceToPoint: function(t) {
            return this.normal.dot(t) + this.constant
        },
        distanceToSphere: function(t) {
            return this.distanceToPoint(t.center) - t.radius
        },
        projectPoint: function(t, e) {
            return void 0 === e && (console.warn("THREE.Plane: .projectPoint() target is now required"), e = new i.a), e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)
        },
        intersectLine: function(t, e) {
            void 0 === e && (console.warn("THREE.Plane: .intersectLine() target is now required"), e = new i.a);
            var n = t.delta(o),
                r = this.normal.dot(n);
            if (0 === r) return 0 === this.distanceToPoint(t.start) ? e.copy(t.start) : void 0;
            var a = -(t.start.dot(this.normal) + this.constant) / r;
            return a < 0 || a > 1 ? void 0 : e.copy(n).multiplyScalar(a).add(t.start)
        },
        intersectsLine: function(t) {
            var e = this.distanceToPoint(t.start),
                n = this.distanceToPoint(t.end);
            return e < 0 && n > 0 || n < 0 && e > 0
        },
        intersectsBox: function(t) {
            return t.intersectsPlane(this)
        },
        intersectsSphere: function(t) {
            return t.intersectsPlane(this)
        },
        coplanarPoint: function(t) {
            return void 0 === t && (console.warn("THREE.Plane: .coplanarPoint() target is now required"), t = new i.a), t.copy(this.normal).multiplyScalar(-this.constant)
        },
        applyMatrix4: function(t, e) {
            var n = e || s.getNormalMatrix(t),
                r = this.coplanarPoint(o).applyMatrix4(t),
                i = this.normal.applyMatrix3(n).normalize();
            return this.constant = -r.dot(i), this
        },
        translate: function(t) {
            return this.constant -= t.dot(this.normal), this
        },
        equals: function(t) {
            return t.normal.equals(this.normal) && t.constant === this.constant
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return g
    }));
    var r = n(64),
        i = n(120),
        o = n(42),
        a = n(49),
        s = n(37),
        u = n(1),
        c = n(7),
        l = n(5),
        h = n(18),
        f = n(17),
        p = n(13),
        d = 0,
        m = new c.a,
        v = new f.a,
        y = new u.a;

    function g() {
        Object.defineProperty(this, "id", {
            value: d += 2
        }), this.uuid = p.a.generateUUID(), this.name = "", this.type = "Geometry", this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [
            []
        ], this.morphTargets = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.elementsNeedUpdate = !1, this.verticesNeedUpdate = !1, this.uvsNeedUpdate = !1, this.normalsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.lineDistancesNeedUpdate = !1, this.groupsNeedUpdate = !1
    }
    g.prototype = Object.assign(Object.create(r.a.prototype), {
        constructor: g,
        isGeometry: !0,
        applyMatrix: function(t) {
            for (var e = (new o.a).getNormalMatrix(t), n = 0, r = this.vertices.length; n < r; n++) {
                this.vertices[n].applyMatrix4(t)
            }
            for (n = 0, r = this.faces.length; n < r; n++) {
                var i = this.faces[n];
                i.normal.applyMatrix3(e).normalize();
                for (var a = 0, s = i.vertexNormals.length; a < s; a++) i.vertexNormals[a].applyMatrix3(e).normalize()
            }
            return null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this.verticesNeedUpdate = !0, this.normalsNeedUpdate = !0, this
        },
        rotateX: function(t) {
            return m.makeRotationX(t), this.applyMatrix(m), this
        },
        rotateY: function(t) {
            return m.makeRotationY(t), this.applyMatrix(m), this
        },
        rotateZ: function(t) {
            return m.makeRotationZ(t), this.applyMatrix(m), this
        },
        translate: function(t, e, n) {
            return m.makeTranslation(t, e, n), this.applyMatrix(m), this
        },
        scale: function(t, e, n) {
            return m.makeScale(t, e, n), this.applyMatrix(m), this
        },
        lookAt: function(t) {
            return v.lookAt(t), v.updateMatrix(), this.applyMatrix(v.matrix), this
        },
        fromBufferGeometry: function(t) {
            var e = this,
                n = null !== t.index ? t.index.array : void 0,
                r = t.attributes;
            if (void 0 === r.position) return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."), this;
            var o = r.position.array,
                a = void 0 !== r.normal ? r.normal.array : void 0,
                s = void 0 !== r.color ? r.color.array : void 0,
                c = void 0 !== r.uv ? r.uv.array : void 0,
                f = void 0 !== r.uv2 ? r.uv2.array : void 0;
            void 0 !== f && (this.faceVertexUvs[1] = []);
            for (var p = 0; p < o.length; p += 3) e.vertices.push((new u.a).fromArray(o, p)), void 0 !== s && e.colors.push((new h.a).fromArray(s, p));

            function d(t, n, r, o) {
                var h = void 0 === s ? [] : [e.colors[t].clone(), e.colors[n].clone(), e.colors[r].clone()],
                    p = void 0 === a ? [] : [(new u.a).fromArray(a, 3 * t), (new u.a).fromArray(a, 3 * n), (new u.a).fromArray(a, 3 * r)],
                    d = new i.a(t, n, r, p, h, o);
                e.faces.push(d), void 0 !== c && e.faceVertexUvs[0].push([(new l.a).fromArray(c, 2 * t), (new l.a).fromArray(c, 2 * n), (new l.a).fromArray(c, 2 * r)]), void 0 !== f && e.faceVertexUvs[1].push([(new l.a).fromArray(f, 2 * t), (new l.a).fromArray(f, 2 * n), (new l.a).fromArray(f, 2 * r)])
            }
            var m = t.groups;
            if (m.length > 0)
                for (p = 0; p < m.length; p++)
                    for (var v = m[p], y = v.start, g = y, b = y + v.count; g < b; g += 3) void 0 !== n ? d(n[g], n[g + 1], n[g + 2], v.materialIndex) : d(g, g + 1, g + 2, v.materialIndex);
            else if (void 0 !== n)
                for (p = 0; p < n.length; p += 3) d(n[p], n[p + 1], n[p + 2]);
            else
                for (p = 0; p < o.length / 3; p += 3) d(p, p + 1, p + 2);
            return this.computeFaceNormals(), null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone()), null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()), this
        },
        center: function() {
            return this.computeBoundingBox(), this.boundingBox.getCenter(y).negate(), this.translate(y.x, y.y, y.z), this
        },
        normalize: function() {
            this.computeBoundingSphere();
            var t = this.boundingSphere.center,
                e = this.boundingSphere.radius,
                n = 0 === e ? 1 : 1 / e,
                r = new c.a;
            return r.set(n, 0, 0, -n * t.x, 0, n, 0, -n * t.y, 0, 0, n, -n * t.z, 0, 0, 0, 1), this.applyMatrix(r), this
        },
        computeFaceNormals: function() {
            for (var t = new u.a, e = new u.a, n = 0, r = this.faces.length; n < r; n++) {
                var i = this.faces[n],
                    o = this.vertices[i.a],
                    a = this.vertices[i.b],
                    s = this.vertices[i.c];
                t.subVectors(s, a), e.subVectors(o, a), t.cross(e), t.normalize(), i.normal.copy(t)
            }
        },
        computeVertexNormals: function(t) {
            var e, n, r, i, o, a;
            for (void 0 === t && (t = !0), a = new Array(this.vertices.length), e = 0, n = this.vertices.length; e < n; e++) a[e] = new u.a;
            if (t) {
                var s, c, l, h = new u.a,
                    f = new u.a;
                for (r = 0, i = this.faces.length; r < i; r++) o = this.faces[r], s = this.vertices[o.a], c = this.vertices[o.b], l = this.vertices[o.c], h.subVectors(l, c), f.subVectors(s, c), h.cross(f), a[o.a].add(h), a[o.b].add(h), a[o.c].add(h)
            } else
                for (this.computeFaceNormals(), r = 0, i = this.faces.length; r < i; r++) a[(o = this.faces[r]).a].add(o.normal), a[o.b].add(o.normal), a[o.c].add(o.normal);
            for (e = 0, n = this.vertices.length; e < n; e++) a[e].normalize();
            for (r = 0, i = this.faces.length; r < i; r++) {
                var p = (o = this.faces[r]).vertexNormals;
                3 === p.length ? (p[0].copy(a[o.a]), p[1].copy(a[o.b]), p[2].copy(a[o.c])) : (p[0] = a[o.a].clone(), p[1] = a[o.b].clone(), p[2] = a[o.c].clone())
            }
            this.faces.length > 0 && (this.normalsNeedUpdate = !0)
        },
        computeFlatVertexNormals: function() {
            var t, e, n;
            for (this.computeFaceNormals(), t = 0, e = this.faces.length; t < e; t++) {
                var r = (n = this.faces[t]).vertexNormals;
                3 === r.length ? (r[0].copy(n.normal), r[1].copy(n.normal), r[2].copy(n.normal)) : (r[0] = n.normal.clone(), r[1] = n.normal.clone(), r[2] = n.normal.clone())
            }
            this.faces.length > 0 && (this.normalsNeedUpdate = !0)
        },
        computeMorphNormals: function() {
            var t, e, n, r, i;
            for (n = 0, r = this.faces.length; n < r; n++)
                for ((i = this.faces[n]).__originalFaceNormal ? i.__originalFaceNormal.copy(i.normal) : i.__originalFaceNormal = i.normal.clone(), i.__originalVertexNormals || (i.__originalVertexNormals = []), t = 0, e = i.vertexNormals.length; t < e; t++) i.__originalVertexNormals[t] ? i.__originalVertexNormals[t].copy(i.vertexNormals[t]) : i.__originalVertexNormals[t] = i.vertexNormals[t].clone();
            var o = new g;
            for (o.faces = this.faces, t = 0, e = this.morphTargets.length; t < e; t++) {
                if (!this.morphNormals[t]) {
                    this.morphNormals[t] = {}, this.morphNormals[t].faceNormals = [], this.morphNormals[t].vertexNormals = [];
                    var a = this.morphNormals[t].faceNormals,
                        s = this.morphNormals[t].vertexNormals;
                    for (n = 0, r = this.faces.length; n < r; n++) c = new u.a, l = {
                        a: new u.a,
                        b: new u.a,
                        c: new u.a
                    }, a.push(c), s.push(l)
                }
                var c, l, h = this.morphNormals[t];
                for (o.vertices = this.morphTargets[t].vertices, o.computeFaceNormals(), o.computeVertexNormals(), n = 0, r = this.faces.length; n < r; n++) i = this.faces[n], c = h.faceNormals[n], l = h.vertexNormals[n], c.copy(i.normal), l.a.copy(i.vertexNormals[0]), l.b.copy(i.vertexNormals[1]), l.c.copy(i.vertexNormals[2])
            }
            for (n = 0, r = this.faces.length; n < r; n++)(i = this.faces[n]).normal = i.__originalFaceNormal, i.vertexNormals = i.__originalVertexNormals
        },
        computeBoundingBox: function() {
            null === this.boundingBox && (this.boundingBox = new s.a), this.boundingBox.setFromPoints(this.vertices)
        },
        computeBoundingSphere: function() {
            null === this.boundingSphere && (this.boundingSphere = new a.a), this.boundingSphere.setFromPoints(this.vertices)
        },
        merge: function(t, e, n) {
            if (t && t.isGeometry) {
                var r, a = this.vertices.length,
                    s = this.vertices,
                    u = t.vertices,
                    c = this.faces,
                    l = t.faces,
                    h = this.colors,
                    f = t.colors;
                void 0 === n && (n = 0), void 0 !== e && (r = (new o.a).getNormalMatrix(e));
                for (var p = 0, d = u.length; p < d; p++) {
                    var m = u[p].clone();
                    void 0 !== e && m.applyMatrix4(e), s.push(m)
                }
                for (p = 0, d = f.length; p < d; p++) h.push(f[p].clone());
                for (p = 0, d = l.length; p < d; p++) {
                    var v, y, g, b = l[p],
                        _ = b.vertexNormals,
                        w = b.vertexColors;
                    (v = new i.a(b.a + a, b.b + a, b.c + a)).normal.copy(b.normal), void 0 !== r && v.normal.applyMatrix3(r).normalize();
                    for (var x = 0, E = _.length; x < E; x++) y = _[x].clone(), void 0 !== r && y.applyMatrix3(r).normalize(), v.vertexNormals.push(y);
                    v.color.copy(b.color);
                    for (x = 0, E = w.length; x < E; x++) g = w[x], v.vertexColors.push(g.clone());
                    v.materialIndex = b.materialIndex + n, c.push(v)
                }
                for (p = 0, d = t.faceVertexUvs.length; p < d; p++) {
                    var S = t.faceVertexUvs[p];
                    void 0 === this.faceVertexUvs[p] && (this.faceVertexUvs[p] = []);
                    for (x = 0, E = S.length; x < E; x++) {
                        for (var T = S[x], M = [], O = 0, P = T.length; O < P; O++) M.push(T[O].clone());
                        this.faceVertexUvs[p].push(M)
                    }
                }
            } else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", t)
        },
        mergeMesh: function(t) {
            t && t.isMesh ? (t.matrixAutoUpdate && t.updateMatrix(), this.merge(t.geometry, t.matrix)) : console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", t)
        },
        mergeVertices: function() {
            var t, e, n, r, i, o, a, s, u = {},
                c = [],
                l = [],
                h = Math.pow(10, 4);
            for (n = 0, r = this.vertices.length; n < r; n++) t = this.vertices[n], void 0 === u[e = Math.round(t.x * h) + "_" + Math.round(t.y * h) + "_" + Math.round(t.z * h)] ? (u[e] = n, c.push(this.vertices[n]), l[n] = c.length - 1) : l[n] = l[u[e]];
            var f = [];
            for (n = 0, r = this.faces.length; n < r; n++) {
                (i = this.faces[n]).a = l[i.a], i.b = l[i.b], i.c = l[i.c], o = [i.a, i.b, i.c];
                for (var p = 0; p < 3; p++)
                    if (o[p] === o[(p + 1) % 3]) {
                        f.push(n);
                        break
                    }
            }
            for (n = f.length - 1; n >= 0; n--) {
                var d = f[n];
                for (this.faces.splice(d, 1), a = 0, s = this.faceVertexUvs.length; a < s; a++) this.faceVertexUvs[a].splice(d, 1)
            }
            var m = this.vertices.length - c.length;
            return this.vertices = c, m
        },
        setFromPoints: function(t) {
            this.vertices = [];
            for (var e = 0, n = t.length; e < n; e++) {
                var r = t[e];
                this.vertices.push(new u.a(r.x, r.y, r.z || 0))
            }
            return this
        },
        sortFacesByMaterialIndex: function() {
            for (var t = this.faces, e = t.length, n = 0; n < e; n++) t[n]._id = n;
            t.sort((function(t, e) {
                return t.materialIndex - e.materialIndex
            }));
            var r, i, o = this.faceVertexUvs[0],
                a = this.faceVertexUvs[1];
            o && o.length === e && (r = []), a && a.length === e && (i = []);
            for (n = 0; n < e; n++) {
                var s = t[n]._id;
                r && r.push(o[s]), i && i.push(a[s])
            }
            r && (this.faceVertexUvs[0] = r), i && (this.faceVertexUvs[1] = i)
        },
        toJSON: function() {
            var t = {
                metadata: {
                    version: 4.5,
                    type: "Geometry",
                    generator: "Geometry.toJSON"
                }
            };
            if (t.uuid = this.uuid, t.type = this.type, "" !== this.name && (t.name = this.name), void 0 !== this.parameters) {
                var e = this.parameters;
                for (var n in e) void 0 !== e[n] && (t[n] = e[n]);
                return t
            }
            for (var r = [], i = 0; i < this.vertices.length; i++) {
                var o = this.vertices[i];
                r.push(o.x, o.y, o.z)
            }
            var a = [],
                s = [],
                u = {},
                c = [],
                l = {},
                h = [],
                f = {};
            for (i = 0; i < this.faces.length; i++) {
                var p = this.faces[i],
                    d = void 0 !== this.faceVertexUvs[0][i],
                    m = p.normal.length() > 0,
                    v = p.vertexNormals.length > 0,
                    y = 1 !== p.color.r || 1 !== p.color.g || 1 !== p.color.b,
                    g = p.vertexColors.length > 0,
                    b = 0;
                if (b = E(b, 0, 0), b = E(b, 1, !0), b = E(b, 2, !1), b = E(b, 3, d), b = E(b, 4, m), b = E(b, 5, v), b = E(b, 6, y), b = E(b, 7, g), a.push(b), a.push(p.a, p.b, p.c), a.push(p.materialIndex), d) {
                    var _ = this.faceVertexUvs[0][i];
                    a.push(M(_[0]), M(_[1]), M(_[2]))
                }
                if (m && a.push(S(p.normal)), v) {
                    var w = p.vertexNormals;
                    a.push(S(w[0]), S(w[1]), S(w[2]))
                }
                if (y && a.push(T(p.color)), g) {
                    var x = p.vertexColors;
                    a.push(T(x[0]), T(x[1]), T(x[2]))
                }
            }

            function E(t, e, n) {
                return n ? t | 1 << e : t & ~(1 << e)
            }

            function S(t) {
                var e = t.x.toString() + t.y.toString() + t.z.toString();
                return void 0 !== u[e] ? u[e] : (u[e] = s.length / 3, s.push(t.x, t.y, t.z), u[e])
            }

            function T(t) {
                var e = t.r.toString() + t.g.toString() + t.b.toString();
                return void 0 !== l[e] ? l[e] : (l[e] = c.length, c.push(t.getHex()), l[e])
            }

            function M(t) {
                var e = t.x.toString() + t.y.toString();
                return void 0 !== f[e] ? f[e] : (f[e] = h.length / 2, h.push(t.x, t.y), f[e])
            }
            return t.data = {}, t.data.vertices = r, t.data.normals = s, c.length > 0 && (t.data.colors = c), h.length > 0 && (t.data.uvs = [h]), t.data.faces = a, t
        },
        clone: function() {
            return (new g).copy(this)
        },
        copy: function(t) {
            var e, n, r, i, o, a;
            this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [
                []
            ], this.morphTargets = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.name = t.name;
            var s = t.vertices;
            for (e = 0, n = s.length; e < n; e++) this.vertices.push(s[e].clone());
            var u = t.colors;
            for (e = 0, n = u.length; e < n; e++) this.colors.push(u[e].clone());
            var c = t.faces;
            for (e = 0, n = c.length; e < n; e++) this.faces.push(c[e].clone());
            for (e = 0, n = t.faceVertexUvs.length; e < n; e++) {
                var l = t.faceVertexUvs[e];
                for (void 0 === this.faceVertexUvs[e] && (this.faceVertexUvs[e] = []), r = 0, i = l.length; r < i; r++) {
                    var h = l[r],
                        f = [];
                    for (o = 0, a = h.length; o < a; o++) {
                        var p = h[o];
                        f.push(p.clone())
                    }
                    this.faceVertexUvs[e].push(f)
                }
            }
            var d = t.morphTargets;
            for (e = 0, n = d.length; e < n; e++) {
                var m = {};
                if (m.name = d[e].name, void 0 !== d[e].vertices)
                    for (m.vertices = [], r = 0, i = d[e].vertices.length; r < i; r++) m.vertices.push(d[e].vertices[r].clone());
                if (void 0 !== d[e].normals)
                    for (m.normals = [], r = 0, i = d[e].normals.length; r < i; r++) m.normals.push(d[e].normals[r].clone());
                this.morphTargets.push(m)
            }
            var v = t.morphNormals;
            for (e = 0, n = v.length; e < n; e++) {
                var y = {};
                if (void 0 !== v[e].vertexNormals)
                    for (y.vertexNormals = [], r = 0, i = v[e].vertexNormals.length; r < i; r++) {
                        var g = v[e].vertexNormals[r],
                            b = {};
                        b.a = g.a.clone(), b.b = g.b.clone(), b.c = g.c.clone(), y.vertexNormals.push(b)
                    }
                if (void 0 !== v[e].faceNormals)
                    for (y.faceNormals = [], r = 0, i = v[e].faceNormals.length; r < i; r++) y.faceNormals.push(v[e].faceNormals[r].clone());
                this.morphNormals.push(y)
            }
            var _ = t.skinWeights;
            for (e = 0, n = _.length; e < n; e++) this.skinWeights.push(_[e].clone());
            var w = t.skinIndices;
            for (e = 0, n = w.length; e < n; e++) this.skinIndices.push(w[e].clone());
            var x = t.lineDistances;
            for (e = 0, n = x.length; e < n; e++) this.lineDistances.push(x[e]);
            var E = t.boundingBox;
            null !== E && (this.boundingBox = E.clone());
            var S = t.boundingSphere;
            return null !== S && (this.boundingSphere = S.clone()), this.elementsNeedUpdate = t.elementsNeedUpdate, this.verticesNeedUpdate = t.verticesNeedUpdate, this.uvsNeedUpdate = t.uvsNeedUpdate, this.normalsNeedUpdate = t.normalsNeedUpdate, this.colorsNeedUpdate = t.colorsNeedUpdate, this.lineDistancesNeedUpdate = t.lineDistancesNeedUpdate, this.groupsNeedUpdate = t.groupsNeedUpdate, this
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    })), n.d(e, "b", (function() {
        return a
    }));
    var r, i, o = n(167);
    ! function(t) {
        t[t.ADDED = 0] = "ADDED", t[t.REMOVED = 1] = "REMOVED", t[t.UPDATED = 2] = "UPDATED", t[t.COUNT = 3] = "COUNT"
    }(r || (r = {})),
    function(t) {
        t[t.ADDED = 1] = "ADDED", t[t.REMOVED = 2] = "REMOVED", t[t.UPDATED = 4] = "UPDATED", t[t.ALL = 7] = "ALL"
    }(i || (i = {}));
    var a = function(t, e) {
        var n, r = e & i.ADDED,
            a = e & i.REMOVED,
            s = e & i.UPDATED,
            u = {};
        return new o.a((function() {
            return t
        }), (function(e) {
            return n = t.onElementChanged(function(t) {
                return u.onAdded = r ? t : void 0, u.onRemoved = a ? t : void 0, u.onUpdated = s ? t : void 0, u
            }(e))
        }), (function(t) {
            n && n.cancel()
        }))
    }
}, function(t, e, n) {
    "use strict";
    var r, i = n(63),
        o = n(25),
        a = n(84),
        s = n(97),
        u = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        c = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        l = function(t) {
            function e(e) {
                var n, r, i = t.call(this) || this;
                if (i.name = "sweeps", i.transitionActive = !1, i.sweepList = new a.a, i.sweepMap = {}, e) try {
                    for (var o = c(e), u = o.next(); !u.done; u = o.next()) {
                        var l = u.value;
                        i.sweepMap[l.id] = l, i.sweepList.push(l)
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        u && !u.done && (r = o.return) && r.call(o)
                    } finally {
                        if (n) throw n.error
                    }
                }
                return i.transition = {
                    progress: new s.a(0),
                    pending: !1,
                    active: !1,
                    from: void 0,
                    to: void 0
                }, i
            }
            return u(e, t), e.prototype.canTransition = function() {
                return !this.transition.pending && !this.transition.active
            }, Object.defineProperty(e.prototype, "currentSweepIndex", {
                get: function() {
                    if (this.currentSweep) return this.sweepMap[this.currentSweep].index
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "currentSweepObject", {
                get: function() {
                    if (this.currentSweep) return this.getSweep(this.currentSweep)
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.makeSweepChangeSubscription = function(t) {
                return this.onPropertyChanged("currentSweep", t)
            }, e.prototype.copy = function(t) {
                var e = this,
                    n = !1;
                if (this.sweepList.length === t.sweepList.length) {
                    n = !0;
                    for (var r = 0; r < this.sweepList.length; r++) {
                        var i = this.sweepList.get(r),
                            o = t.sweepList.get(r);
                        if (i.id !== o.id) {
                            n = !1;
                            break
                        }
                    }
                }
                n || (this.sweepMap = {}, this.sweepList.length = 0, t.sweepList.forEach((function(t) {
                    e.addSweep(t)
                }))), this.currentSweep = t.currentSweep, this.transition.progress.copy(t.transition.progress), this.transition.pending = t.transition.pending, this.transition.active = t.transition.active, this.transition.to = t.transition.to, this.transition.from = t.transition.from, this.transitionActive = t.transitionActive, this.commit()
            }, e.prototype.clone = function() {
                var t = new e;
                return t.copy(this), t
            }, e.prototype.addSweep = function(t) {
                this.containsSweep(t.id) || (this.sweepList.push(t), this.sweepMap[t.id] = t)
            }, e.prototype.getSweep = function(t) {
                return this.sweepMap[t]
            }, e.prototype.getSweepByIndex = function(t) {
                for (var e = 0; e < this.sweepList.length; e++) {
                    var n = this.sweepList.get(e);
                    if (n.index === t) return n
                }
                return null
            }, e.prototype.containsSweep = function(t) {
                return t in this.sweepMap
            }, e.prototype.getFirstSweep = function() {
                for (var t = -1; ++t < this.sweepList.length;) {
                    var e = this.sweepList.get(t);
                    if (e.enabled) return e
                }
                throw new Error("First enabled sweep not found")
            }, e.prototype.getStartSweep = function(t) {
                var e = t && t.pano && t.pano.uuid ? this.getSweep(t.pano.uuid) : null;
                return e && e.enabled ? e : this.getFirstSweep()
            }, e.prototype.getClosestSweep = function(t, e) {
                var n = Number.MAX_VALUE,
                    r = null;
                return this.iterate((function(o) {
                    if (o.enabled && (!e || o.alignmentType === i.a.ALIGNED)) {
                        var a = t.distanceTo(o.position);
                        a < n && (n = a, r = o)
                    }
                })), r
            }, e.prototype.getFirstAlignedSweep = function() {
                for (var t = -1; ++t < this.sweepList.length;) {
                    var e = this.sweepList.get(t);
                    if (e.enabled && e.alignmentType === i.a.ALIGNED) return e
                }
                return null
            }, e.prototype.setTransitionPending = function(t) {
                this.transition.pending = t
            }, e.prototype.activateTransition = function(t, e) {
                this.transition.active = !0, this.transition.from = e, this.transition.to = t, this.transitionActive = !0
            }, e.prototype.deactivateTransition = function() {
                this.transition.active = !1, this.transition.from = void 0, this.transition.to = void 0, this.transitionActive = !1
            }, e.prototype.isSweepUnaligned = function(t) {
                var e = this.getSweep(t);
                return !(!e || e.alignmentType === i.a.ALIGNED)
            }, e.prototype.isSweepDisabled = function(t) {
                if (void 0 === t && (t = this.currentSweep), !t) return !1;
                var e = this.getSweep(t);
                return e && !e.enabled
            }, e.prototype.iterate = function(t) {
                this.sweepList.forEach((function(e, n) {
                    t(e, n)
                }))
            }, e.prototype.filter = function(t) {
                return this.sweepList.filter(t)
            }, e.prototype.sortByScore = function(t, e) {
                return this.sweepList.filter((function(e) {
                    return t.every((function(t) {
                        return t(e)
                    }))
                })).map((function(t) {
                    return {
                        sweep: t,
                        score: e.reduce((function(e, n) {
                            return e + n(t)
                        }), 0)
                    }
                })).sort((function(t, e) {
                    return e.score - t.score
                }))
            }, e.prototype.getSweepList = function() {
                return this.sweepList.values()
            }, e.prototype.getConnectedSweeps = function(t, e) {
                var n, r, i = [t],
                    o = new Set;
                for (e = e || function(t) {
                        return !0
                    }; i.length;) {
                    var a = i.pop(),
                        s = this.getSweep(a);
                    o.add(a);
                    try {
                        for (var u = c(s.neighbours), l = u.next(); !l.done; l = u.next()) {
                            var h = l.value;
                            e(this.getSweep(h)) && !o.has(h) && i.push(h)
                        }
                    } catch (t) {
                        n = {
                            error: t
                        }
                    } finally {
                        try {
                            l && !l.done && (r = u.return) && r.call(u)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                }
                return o
            }, e.prototype.equals = function(t) {
                if (this.sweepMap.length !== t.sweepMap.length || this.currentSweep !== t.currentSweep || this.transition.active !== t.transition.active || this.transition.from !== t.transition.from || this.transition.pending !== t.transition.pending || this.transition.to !== t.transition.to) return !1;
                for (var e in this.sweepMap) {
                    if (!t.containsSweep(e)) return !1;
                    if (!this.sweepMap[e].equals(t.getSweep(e))) return !1
                }
                return !0
            }, e
        }(o.a);
    e.a = l
}, function(t, e, n) {
    "use strict";
    var r = n(102),
        i = n(25),
        o = n(97),
        a = n(1),
        s = n(16),
        u = n(13),
        c = function(t, e) {
            return t && e ? t.equals(e) : t === e
        },
        l = n(56),
        h = n(53),
        f = n(40);
    n.d(e, "b", (function() {
        return v
    })), n.d(e, "a", (function() {
        return b
    }));
    var p, d = (p = function(t, e) {
            return (p = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            p(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        m = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.startTime = 0, e.duration = 0, e.active = !1, e.type = null, e.progress = new o.a(0), e.blackoutProgress = new o.a(0), e.from = {
                    position: new a.a,
                    rotation: new s.a,
                    projection: new h.a
                }, e.to = {
                    position: new a.a,
                    rotation: new s.a,
                    projection: new h.a
                }, e.rotationDelay = 0, e.rotationDuration = 1, e.matrixDelay = 0, e.matrixDuration = 1, e.activeInternal = !1, e
            }
            return d(e, t), e
        }(f.a),
        v = function(t, e, n) {
            void 0 === n && (n = !0), e.position = y(t.position, e.position, n), e.rotation = y(t.rotation, e.rotation, n), e.projection = y(t.projection, e.projection, n)
        },
        y = function(t, e, n) {
            return void 0 === n && (n = !0), t && !e ? e = t.clone() : t && e ? e.copy(t) : n && (e = void 0), e
        },
        g = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.position = new a.a, n.rotation = new s.a, n.focalDistance = -1, n.projection = Object(r.c)(e), n
            }
            return d(e, t), e
        }(f.a),
        b = function(t) {
            function e(e, n) {
                var i = t.call(this) || this;
                return i._width = e, i._height = n, i.name = "camera", i._baseProjection = new h.a, i._orthoMatrix = new h.a, i._perspectiveMatrix = new h.a, i.pose = new g(e / n), i.transition = new m, i.setCameraDimensions(e, n), i._baseFovY = u.a.DEG2RAD * r.a.fov, i
            }
            return d(e, t), e.prototype.setCameraDimensions = function(t, e) {
                void 0 !== t && void 0 !== e && (this._width = t, this._height = e, this.pose.projection.copy(this.isOrtho() ? Object(r.b)(t, e, e / (2 * this.orthoZoom()), this._orthoMatrix) : Object(r.c)(t / e, this._perspectiveMatrix)), this.pose.commit())
            }, e.prototype.setBaseProjection = function(t) {
                this._baseProjection = t
            }, Object.defineProperty(e.prototype, "width", {
                get: function() {
                    return this._width
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "height", {
                get: function() {
                    return this._height
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "baseFovY", {
                get: function() {
                    return this._baseFovY
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.aspect = function() {
                return this.pose.projection.elements[5] / this.pose.projection.elements[0]
            }, e.prototype.fovY = function() {
                return 2 * Math.atan(1 / this.pose.projection.elements[5])
            }, e.prototype.fovX = function() {
                return 2 * Math.atan(1 * this.aspect() / this.pose.projection.elements[5])
            }, e.prototype.isOrtho = function() {
                return Object(l.n)(this.pose.projection)
            }, e.prototype.baseZoom = function() {
                return this.pose.projection.elements[0] / 2
            }, e.prototype.defaultZoom = function() {
                return Object(l.n)(this._baseProjection) ? Object(l.e)(this._baseProjection) : this.perspectiveZoom()
            }, e.prototype.zoom = function() {
                return this.isOrtho() ? this.orthoZoom() : this.perspectiveZoom()
            }, e.prototype.orthoZoom = function() {
                return Object(l.e)(this.pose.projection)
            }, e.prototype.perspectiveZoom = function() {
                return this.baseFovY / this.fovY()
            }, e.prototype.copyTransition = function(t) {
                this.transition.active = t.active, this.transition.activeInternal = t.activeInternal, this.transition.type = t.type, this.transition.startTime = t.startTime, this.transition.duration = t.duration, this.transition.rotationDelay = t.rotationDelay, this.transition.rotationDuration = t.rotationDuration, this.transition.matrixDelay = t.matrixDelay, this.transition.matrixDuration = t.matrixDuration, t.progress && this.transition.progress.copy(t.progress), t.blackoutProgress && this.transition.blackoutProgress.copy(t.blackoutProgress), t.from && v(t.from, this.transition.from), t.to && v(t.to, this.transition.to)
            }, e.prototype.canTransition = function() {
                return !this.transition.active
            }, e.prototype.clone = function() {
                var t = new e(this.width, this.height);
                return t.copy(this), t
            }, e.prototype.copy = function(t) {
                this.pose.position.copy(t.pose.position), this.pose.rotation.copy(t.pose.rotation), this.pose.focalDistance = t.pose.focalDistance, this.pose.projection.copy(t.pose.projection), this.pose.commit(), this._baseFovY = t.baseFovY, this.copyTransition(t.transition), this.transition.commit(), this._width = t.width, this._height = t.height
            }, e.prototype.shallowIsEqual = function(t) {
                return this.pose.position.equals(t.pose.position) && this.pose.rotation.equals(t.pose.rotation) && this.pose.projection.equals(t.pose.projection) && this.pose.focalDistance === t.pose.focalDistance && this.baseFovY === t.baseFovY
            }, e.prototype.isEqual = function(t) {
                return this.shallowIsEqual(t) && this.transitionIsEqual(t.transition)
            }, e.prototype.transitionIsEqual = function(t) {
                return this.transition.active === t.active && this.transition.type === t.type && this.transition.progress.equals(t.progress) && this.transition.blackoutProgress.equals(t.blackoutProgress) && this.transition.rotationDelay === t.rotationDelay && this.transition.rotationDuration === t.rotationDuration && this.transition.matrixDelay === t.matrixDelay && this.transition.matrixDuration === t.matrixDuration && this.transition.activeInternal === t.activeInternal && c(this.transition.from.position, t.from.position) && c(this.transition.from.rotation, t.from.rotation) && c(this.transition.from.projection, t.from.projection) && c(this.transition.to.position, t.to.position) && c(this.transition.to.rotation, t.to.rotation) && c(this.transition.to.projection, t.to.projection) && this.transition.startTime === t.startTime && this.transition.duration === t.duration
            }, e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    var r;
    n.d(e, "a", (function() {
            return r
        })),
        function(t) {
            t[t.Instant = 0] = "Instant", t[t.FadeToBlack = 1] = "FadeToBlack", t[t.Interpolate = 2] = "Interpolate"
        }(r || (r = {}))
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    })), n.d(e, "b", (function() {
        return o
    }));
    var r, i, o, a = n(1),
        s = n(16),
        u = n(40),
        c = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        });
    ! function(t) {
        t.ALIGNED = "aligned", t.UNALIGNED = "unaligned"
    }(i || (i = {})),
    function(t) {
        t.UNPLACED = "unplaced", t.AUTO = "auto", t.MANUAL = "manual"
    }(o || (o = {}));
    var l = function(t) {
        function e(e) {
            var n = t.call(this) || this;
            if (!e) return n;
            n.id = e.id, n.index = e.index, n.name = e.name || "", n.position = e.position || new a.a, n.floorPosition = e.floorPosition || new a.a;
            var r = Number.parseInt(e.floor, 10);
            n.floor = isNaN(r) ? -1 : r;
            var u = Number.parseInt(e.room, 10);
            return n.room = isNaN(u) ? -1 : u, n.rotation = e.rotation || new s.a, n.enabled = e.enabled || !1, n.vrenabled = e.vrenabled || !1, n.neighbours = e.neighbours || [], n.alignmentType = e.alignmentType || i.ALIGNED, n.placementType = e.placementType || o.UNPLACED, n
        }
        return c(e, t), e.prototype.equals = function(t) {
            return this.id === t.id && this.index === t.index && this.name === t.name && this.position.equals(t.position) && this.floor === t.floor && this.room === t.room && this.rotation.equals(t.rotation) && this.enabled === t.enabled && this.vrenabled === t.vrenabled && this.alignmentType === t.alignmentType && this.placementType === t.placementType
        }, e.prototype.copy = function(t) {
            return this.id = t.id, this.index = t.index, this.name = t.name, this.position = (new a.a).copy(t.position), this.floorPosition = (new a.a).copy(t.floorPosition), this.floor = t.floor, this.room = t.room, this.rotation = (new s.a).copy(t.rotation), this.enabled = t.enabled, this.vrenabled = t.vrenabled, this.neighbours = t.neighbours.slice(), this.alignmentType = t.alignmentType, this.placementType = t.placementType, this
        }, e
    }(u.a);
    e.c = l
}, function(t, e, n) {
    "use strict";

    function r() {}
    n.d(e, "a", (function() {
        return r
    })), Object.assign(r.prototype, {
        addEventListener: function(t, e) {
            void 0 === this._listeners && (this._listeners = {});
            var n = this._listeners;
            void 0 === n[t] && (n[t] = []), -1 === n[t].indexOf(e) && n[t].push(e)
        },
        hasEventListener: function(t, e) {
            if (void 0 === this._listeners) return !1;
            var n = this._listeners;
            return void 0 !== n[t] && -1 !== n[t].indexOf(e)
        },
        removeEventListener: function(t, e) {
            if (void 0 !== this._listeners) {
                var n = this._listeners[t];
                if (void 0 !== n) {
                    var r = n.indexOf(e); - 1 !== r && n.splice(r, 1)
                }
            }
        },
        dispatchEvent: function(t) {
            if (void 0 !== this._listeners) {
                var e = this._listeners[t.type];
                if (void 0 !== e) {
                    t.target = this;
                    for (var n = e.slice(0), r = 0, i = n.length; r < i; r++) n[r].call(this, t)
                }
            }
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return a
    })), n.d(e, "a", (function() {
        return s
    }));
    var r = n(58),
        i = n(24),
        o = n(12);

    function a(t, e, n, i) {
        r.a.call(this), this.type = "PlaneGeometry", this.parameters = {
            width: t,
            height: e,
            widthSegments: n,
            heightSegments: i
        }, this.fromBufferGeometry(new s(t, e, n, i)), this.mergeVertices()
    }

    function s(t, e, n, r) {
        i.a.call(this), this.type = "PlaneBufferGeometry", this.parameters = {
            width: t,
            height: e,
            widthSegments: n,
            heightSegments: r
        };
        var a, s, u = (t = t || 1) / 2,
            c = (e = e || 1) / 2,
            l = Math.floor(n) || 1,
            h = Math.floor(r) || 1,
            f = l + 1,
            p = h + 1,
            d = t / l,
            m = e / h,
            v = [],
            y = [],
            g = [],
            b = [];
        for (s = 0; s < p; s++) {
            var _ = s * m - c;
            for (a = 0; a < f; a++) {
                var w = a * d - u;
                y.push(w, -_, 0), g.push(0, 0, 1), b.push(a / l), b.push(1 - s / h)
            }
        }
        for (s = 0; s < h; s++)
            for (a = 0; a < l; a++) {
                var x = a + f * s,
                    E = a + f * (s + 1),
                    S = a + 1 + f * (s + 1),
                    T = a + 1 + f * s;
                v.push(x, E, T), v.push(E, S, T)
            }
        this.setIndex(v), this.setAttribute("position", new o.b(y, 3)), this.setAttribute("normal", new o.b(g, 3)), this.setAttribute("uv", new o.b(b, 2))
    }
    a.prototype = Object.create(r.a.prototype), a.prototype.constructor = a, s.prototype = Object.create(i.a.prototype), s.prototype.constructor = s
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    })), n.d(e, "b", (function() {
        return s
    }));
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.phase = e, n
            }
            return o(e, t), e
        }(i.a),
        s = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.application = e, n
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    var r, i, o, a;
    n.d(e, "d", (function() {
            return o
        })), n.d(e, "c", (function() {
            return a
        })), n.d(e, "a", (function() {
            return s
        })), n.d(e, "b", (function() {
            return u
        })),
        function(t) {
            t[t.BASE = 1] = "BASE", t[t.STANDARD = 2] = "STANDARD", t[t.HIGH = 3] = "HIGH", t[t.ULTRAHIGH = 4] = "ULTRAHIGH"
        }(o || (o = {})),
        function(t) {
            t[t.BASE = 512] = "BASE", t[t.STANDARD = 1024] = "STANDARD", t[t.HIGH = 2048] = "HIGH", t[t.ULTRAHIGH = 4096] = "ULTRAHIGH"
        }(a || (a = {}));
    var s = ((r = {})[o.BASE] = 512, r[o.STANDARD] = 1024, r[o.HIGH] = 2048, r[o.ULTRAHIGH] = 4096, r),
        u = ((i = {})[a.BASE] = o.BASE, i[a.STANDARD] = o.STANDARD, i[a.HIGH] = o.HIGH, i[a.ULTRAHIGH] = o.ULTRAHIGH, i)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    }));
    var r = function() {
            function t(t) {
                this.matcher = t
            }
            return t.isValue = function(e) {
                return new t(new i(e))
            }, t.isType = function(e) {
                return new t(new o(e))
            }, t.isInstanceOf = function(e) {
                return new t(new a(e))
            }, t.is = function(e) {
                return new t(new s(e))
            }, t.isAny = function() {
                return new t(new u)
            }, t.prototype.compare = function(t) {
                return this.matcher.matches(t)
            }, t
        }(),
        i = function() {
            function t(t) {
                this.value = t
            }
            return t.prototype.matches = function(t) {
                return this.value === t
            }, t
        }(),
        o = function() {
            function t(t) {
                this.type = t
            }
            return t.prototype.matches = function(t) {
                return Object.getPrototypeOf(t).constructor === this.type
            }, t
        }(),
        a = function() {
            function t(t) {
                this.type = t
            }
            return t.prototype.matches = function(t) {
                if ("object" == typeof t) return t instanceof this.type;
                var e = this.type;
                switch (typeof t) {
                    case "number":
                        return e === Number;
                    case "string":
                        return e === String;
                    case "boolean":
                        return e === Boolean;
                    case "function":
                        return e === Function
                }
                return !1
            }, t
        }(),
        s = function() {
            function t(t) {
                this.predicate = t
            }
            return t.prototype.matches = function(t) {
                return this.predicate(t)
            }, t
        }(),
        u = function() {
            function t() {}
            return t.prototype.matches = function() {
                return !0
            }, t
        }()
}, function(t, e, n) {
    "use strict";
    n.d(e, "e", (function() {
        return o
    })), n.d(e, "c", (function() {
        return a
    })), n.d(e, "a", (function() {
        return s
    })), n.d(e, "d", (function() {
        return u
    })), n.d(e, "b", (function() {
        return c
    }));
    var r = n(249),
        i = n(6),
        o = function(t, e) {
            var n, i, o;
            if (void 0 === t && (t = ""), t.match(/^https?/)) {
                n = (a = Object(r.parse)(t)).protocol + "//" + a.host, i = t, o = t.match(/[^/]*$/)[0]
            } else {
                var a;
                if (e.match(/^https?/)) n = (a = Object(r.parse)(e)).protocol + "//" + a.host;
                else n = window.location.protocol + "//" + e;
                i = n + "/api/player/models/" + t, o = t
            }
            return {
                sid: o,
                urlBase: n,
                urlModel: i,
                urlFiles: i + (i.match(/\/$/) ? "files" : "/files"),
                urlThumb: i + (i.match(/\/$/) ? "thumb" : "/thumb")
            }
        },
        a = function() {
            return Object(i.z)("model") || Object(i.z)("m")
        },
        s = function() {
            var t = Object(i.z)("auth");
            return t ? t.replace(",", " ") : null
        },
        u = function(t, e) {
            for (var n in void 0 === e && (e = {}), e) {
                var r = e[n];
                t += (-1 === t.indexOf("?") ? "?" : "&") + n + "=" + r
            }
            return t
        },
        c = function(t) {
            return t.replace(/^https?:\/\/(?:www.)?/i, "").replace(/\/(.*)/, "")
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    }));
    var r = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        i = function() {
            function t() {
                this.isObservable = !0, this._dirtyObservable = !1, this._activeObservable = !0, this._observerNotifying = !1, this._changeObservers = new Set, this._parentObservables = new Set, this._childObservables = new Set, Object.defineProperties(this, {
                    isObservable: {
                        value: this.isObservable,
                        writable: !1,
                        enumerable: !1
                    },
                    _dirtyObservable: {
                        value: this._dirtyObservable,
                        enumerable: !1
                    },
                    _activeObservable: {
                        value: this._activeObservable,
                        enumerable: !1
                    },
                    _observerNotifying: {
                        value: this._observerNotifying,
                        enumerable: !1
                    },
                    _changeObservers: {
                        value: this._changeObservers,
                        writable: !1,
                        enumerable: !1
                    },
                    _childObservables: {
                        value: this._childObservables,
                        writable: !1,
                        enumerable: !1
                    },
                    _parentObservables: {
                        value: this._parentObservables,
                        writable: !1,
                        enumerable: !1
                    }
                })
            }
            return t.prototype.onChanged = function(t) {
                var e = this;
                if (this._changeObservers.has(t)) throw new Error("This observer function is already observing this Observable, and double subscriptions are not supported.");
                var n = function() {
                    return e._changeObservers.add(t)
                };
                return n(), {
                    renew: n,
                    cancel: function() {
                        return e.removeOnChanged(t)
                    }
                }
            }, t.prototype.removeOnChanged = function(t) {
                this._changeObservers.delete(t)
            }, t.prototype.notifyObservers = function() {
                var t, e;
                if (this._dirtyObservable && !this._observerNotifying && this._activeObservable) {
                    this._observerNotifying = !0;
                    try {
                        for (var n = r(this._changeObservers), i = n.next(); !i.done; i = n.next()) {
                            var o = i.value;
                            this.notifyObserver(o)
                        }
                    } catch (e) {
                        t = {
                            error: e
                        }
                    } finally {
                        try {
                            i && !i.done && (e = n.return) && e.call(n)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                    this._dirtyObservable = !1, this._observerNotifying = !1
                }
            }, t.prototype.notifyObserver = function(t) {
                t(void 0)
            }, t.prototype.notifyDown = function() {
                var t, e;
                try {
                    for (var n = r(this._childObservables), i = n.next(); !i.done; i = n.next()) {
                        i.value.notifyDown()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        i && !i.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
                this.notifyObservers()
            }, t.prototype.notifyUp = function() {
                var t, e;
                try {
                    for (var n = r(this._parentObservables), i = n.next(); !i.done; i = n.next()) {
                        i.value.notifyUp()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        i && !i.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
                this.notifyObservers()
            }, t.prototype.setDirty = function(t) {
                void 0 === t && (t = !0), this.setDirtyUp(), t && this.notifyUp()
            }, t.prototype.setDirtyUp = function() {
                var t, e;
                if (!this._dirtyObservable) {
                    this._dirtyObservable = !0;
                    try {
                        for (var n = r(this._parentObservables), i = n.next(); !i.done; i = n.next()) {
                            i.value.setDirtyUp()
                        }
                    } catch (e) {
                        t = {
                            error: e
                        }
                    } finally {
                        try {
                            i && !i.done && (e = n.return) && e.call(n)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                }
            }, t.prototype.addChildObservable = function(e) {
                t.isObservable(e) && (this._childObservables.add(e), e._parentObservables.add(this))
            }, t.prototype.removeChildObservables = function(e) {
                t.isObservable(e) && (this._childObservables.delete(e), e._parentObservables.delete(this))
            }, t.prototype.atomic = function(t) {
                if (!this._activeObservable) return t();
                try {
                    this.setActive(!1), t()
                } finally {
                    this.setActive(!0)
                }
            }, t.prototype.setActive = function(t) {
                var e, n, i = this._activeObservable;
                this._activeObservable = t, !i && t && this.notifyObservers();
                try {
                    for (var o = r(this._childObservables), a = o.next(); !a.done; a = o.next()) {
                        a.value.setActive(t)
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        a && !a.done && (n = o.return) && n.call(o)
                    } finally {
                        if (e) throw e.error
                    }
                }
            }, t.prototype.deepCopy = function() {
                throw Error("deepCopy is only implemented in subclasses of Observable")
            }, t.isObservable = function(t) {
                return t && t.isObservable
            }, t
        }()
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    })), n.d(e, "b", (function() {
        return u
    }));
    var r, i = n(101),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return o(e, t), e
        }(i.a),
        s = function(t) {
            function e(e, n, r, i) {
                var o = t.call(this) || this;
                return o.id = e, o.position = n, o.button = r, o.down = i, o
            }
            return o(e, t), e
        }(a),
        u = function(t) {
            function e(e, n, r) {
                var i = t.call(this) || this;
                return i.id = e, i.position = n, i.buttons = r, i
            }
            return o(e, t), e
        }(a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return i
    })), n.d(e, "a", (function() {
        return u
    }));
    var r, i, o = n(21),
        a = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        s = function() {
            return (s = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        };
    ! function(t) {
        t.left = "left", t.top = "top", t.width = "width", t.height = "height"
    }(i || (i = {}));
    var u = function(t) {
        function e(e) {
            var n = t.call(this) || this;
            return n.name = "resize-canvas", n.payload = s({}, e), n
        }
        return a(e, t), e
    }(o.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "e", (function() {
        return h
    })), n.d(e, "b", (function() {
        return f
    })), n.d(e, "d", (function() {
        return p
    })), n.d(e, "c", (function() {
        return m
    })), n.d(e, "a", (function() {
        return v
    }));
    var r, i, o, a, s = n(1),
        u = n(7),
        c = n(5),
        l = n(10),
        h = (r = new u.a, i = new u.a, function(t, e, n, o) {
            return n = n || new c.a, o = o || new s.a, d(t, i), r.getInverse(i), o.copy(e).applyMatrix4(r).applyMatrix4(t.pose.projection.asThreeMatrix4()), g(t.width, t.height, o, n), {
                screenPosition: n,
                ndcPosition: o
            }
        }),
        f = (o = new s.a, a = new c.a, function(t, e, n, r, i, s) {
            return o.copy(p(t, e, n, s)), g(r, i, o, a), a
        }),
        p = function() {
            var t = new u.a,
                e = new u.a,
                n = new s.a;
            return function(r, i, o, a) {
                return t.compose(i, o, l.b.UNIT), e.getInverse(t), n.copy(r).applyMatrix4(e).applyMatrix4(a), n
            }
        }(),
        d = function(t, e) {
            return (e = e || new u.a).compose(t.pose.position, t.pose.rotation, l.b.UNIT)
        },
        m = function(t, e, n, r, i) {
            return (i = i || new c.a).x = t / n * 2 - 1, i.y = -e / r * 2 + 1, i
        },
        v = function(t, e, n, r) {
            return void 0 === n && (n = .5), (r = r || new s.a).x = e.x, r.y = e.y, r.z = n, y(t, r)
        },
        y = function() {
            var t = new u.a,
                e = new u.a;
            return function(n, r, i) {
                return (i = i || new s.a).copy(r), e.copy(n.pose.projection.asThreeMatrix4()).getInverse(e), d(n, t), i.applyMatrix4(e).applyMatrix4(t)
            }
        }(),
        g = function(t, e, n, r) {
            return (r = r || new c.a).set((n.x + 1) * t / 2, (1 - n.y) * e / 2), r
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return d
    })), n.d(e, "a", (function() {
        return m
    }));
    var r = n(58),
        i = n(24),
        o = n(12),
        a = n(1);

    function s(t) {
        return (s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }

    function u(t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
    }

    function c(t, e) {
        return !e || "object" !== s(e) && "function" != typeof e ? l(t) : e
    }

    function l(t) {
        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return t
    }

    function h(t) {
        return (h = Object.setPrototypeOf ? Object.getPrototypeOf : function(t) {
            return t.__proto__ || Object.getPrototypeOf(t)
        })(t)
    }

    function f(t, e) {
        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        t.prototype = Object.create(e && e.prototype, {
            constructor: {
                value: t,
                writable: !0,
                configurable: !0
            }
        }), e && p(t, e)
    }

    function p(t, e) {
        return (p = Object.setPrototypeOf || function(t, e) {
            return t.__proto__ = e, t
        })(t, e)
    }
    var d = function(t) {
            function e(t, n, r, i, o, a) {
                var s;
                return u(this, e), (s = c(this, h(e).call(this))).type = "BoxGeometry", s.parameters = {
                    width: t,
                    height: n,
                    depth: r,
                    widthSegments: i,
                    heightSegments: o,
                    depthSegments: a
                }, s.fromBufferGeometry(new m(t, n, r, i, o, a)), s.mergeVertices(), s
            }
            return f(e, t), e
        }(r.a),
        m = function(t) {
            function e(t, n, r, i, s, f) {
                var p;
                u(this, e), (p = c(this, h(e).call(this))).type = "BoxBufferGeometry", p.parameters = {
                    width: t,
                    height: n,
                    depth: r,
                    widthSegments: i,
                    heightSegments: s,
                    depthSegments: f
                };
                var d = l(p);
                t = t || 1, n = n || 1, r = r || 1, i = Math.floor(i) || 1, s = Math.floor(s) || 1, f = Math.floor(f) || 1;
                var m = [],
                    v = [],
                    y = [],
                    g = [],
                    b = 0,
                    _ = 0;

                function w(t, e, n, r, i, o, s, u, c, l, h) {
                    var f, p, w = o / c,
                        x = s / l,
                        E = o / 2,
                        S = s / 2,
                        T = u / 2,
                        M = c + 1,
                        O = l + 1,
                        P = 0,
                        A = 0,
                        L = new a.a;
                    for (p = 0; p < O; p++) {
                        var R = p * x - S;
                        for (f = 0; f < M; f++) {
                            var D = f * w - E;
                            L[t] = D * r, L[e] = R * i, L[n] = T, v.push(L.x, L.y, L.z), L[t] = 0, L[e] = 0, L[n] = u > 0 ? 1 : -1, y.push(L.x, L.y, L.z), g.push(f / c), g.push(1 - p / l), P += 1
                        }
                    }
                    for (p = 0; p < l; p++)
                        for (f = 0; f < c; f++) {
                            var I = b + f + M * p,
                                C = b + f + M * (p + 1),
                                N = b + (f + 1) + M * (p + 1),
                                U = b + (f + 1) + M * p;
                            m.push(I, C, U), m.push(C, N, U), A += 6
                        }
                    d.addGroup(_, A, h), _ += A, b += P
                }
                return (w("z", "y", "x", -1, -1, r, n, t, f, s, 0), w("z", "y", "x", 1, -1, r, n, -t, f, s, 1), w("x", "z", "y", 1, 1, t, r, n, i, f, 2), w("x", "z", "y", 1, -1, t, r, -n, i, f, 3), w("x", "y", "z", 1, -1, t, n, r, i, s, 4), w("x", "y", "z", -1, -1, t, n, -r, i, s, 5), p.setIndex(m), p.setAttribute("position", new o.b(v, 3)), p.setAttribute("normal", new o.b(y, 3)), p.setAttribute("uv", new o.b(g, 2)), p)
            }
            return f(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    }));
    var r, i = n(25),
        o = n(46),
        a = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        s = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "interaction", e.mode = o.b.Desktop, e.source = o.a.None, e
            }
            return a(e, t), e.prototype.copy = function(t) {
                this.mode = t.mode, this.source = t.source
            }, e.prototype.hasController = function() {
                return this.mode === o.b.VrWithController || this.mode === o.b.VrWithTrackedController
            }, e.prototype.isVR = function() {
                return this.mode === o.b.VrOrientOnly || this.mode === o.b.VrWithController || this.mode === o.b.VrWithTrackedController
            }, e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return h
    }));
    var r = n(1),
        i = new r.a,
        o = new r.a,
        a = new r.a,
        s = new r.a,
        u = new r.a,
        c = new r.a,
        l = new r.a;

    function h(t, e) {
        this.origin = void 0 !== t ? t : new r.a, this.direction = void 0 !== e ? e : new r.a
    }
    Object.assign(h.prototype, {
        set: function(t, e) {
            return this.origin.copy(t), this.direction.copy(e), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(t) {
            return this.origin.copy(t.origin), this.direction.copy(t.direction), this
        },
        at: function(t, e) {
            return void 0 === e && (console.warn("THREE.Ray: .at() target is now required"), e = new r.a), e.copy(this.direction).multiplyScalar(t).add(this.origin)
        },
        lookAt: function(t) {
            return this.direction.copy(t).sub(this.origin).normalize(), this
        },
        recast: function(t) {
            return this.origin.copy(this.at(t, i)), this
        },
        closestPointToPoint: function(t, e) {
            void 0 === e && (console.warn("THREE.Ray: .closestPointToPoint() target is now required"), e = new r.a), e.subVectors(t, this.origin);
            var n = e.dot(this.direction);
            return n < 0 ? e.copy(this.origin) : e.copy(this.direction).multiplyScalar(n).add(this.origin)
        },
        distanceToPoint: function(t) {
            return Math.sqrt(this.distanceSqToPoint(t))
        },
        distanceSqToPoint: function(t) {
            var e = i.subVectors(t, this.origin).dot(this.direction);
            return e < 0 ? this.origin.distanceToSquared(t) : (i.copy(this.direction).multiplyScalar(e).add(this.origin), i.distanceToSquared(t))
        },
        distanceSqToSegment: function(t, e, n, r) {
            o.copy(t).add(e).multiplyScalar(.5), a.copy(e).sub(t).normalize(), s.copy(this.origin).sub(o);
            var i, u, c, l, h = .5 * t.distanceTo(e),
                f = -this.direction.dot(a),
                p = s.dot(this.direction),
                d = -s.dot(a),
                m = s.lengthSq(),
                v = Math.abs(1 - f * f);
            if (v > 0)
                if (u = f * p - d, l = h * v, (i = f * d - p) >= 0)
                    if (u >= -l)
                        if (u <= l) {
                            var y = 1 / v;
                            c = (i *= y) * (i + f * (u *= y) + 2 * p) + u * (f * i + u + 2 * d) + m
                        } else u = h, c = -(i = Math.max(0, -(f * u + p))) * i + u * (u + 2 * d) + m;
            else u = -h, c = -(i = Math.max(0, -(f * u + p))) * i + u * (u + 2 * d) + m;
            else u <= -l ? c = -(i = Math.max(0, -(-f * h + p))) * i + (u = i > 0 ? -h : Math.min(Math.max(-h, -d), h)) * (u + 2 * d) + m : u <= l ? (i = 0, c = (u = Math.min(Math.max(-h, -d), h)) * (u + 2 * d) + m) : c = -(i = Math.max(0, -(f * h + p))) * i + (u = i > 0 ? h : Math.min(Math.max(-h, -d), h)) * (u + 2 * d) + m;
            else u = f > 0 ? -h : h, c = -(i = Math.max(0, -(f * u + p))) * i + u * (u + 2 * d) + m;
            return n && n.copy(this.direction).multiplyScalar(i).add(this.origin), r && r.copy(a).multiplyScalar(u).add(o), c
        },
        intersectSphere: function(t, e) {
            i.subVectors(t.center, this.origin);
            var n = i.dot(this.direction),
                r = i.dot(i) - n * n,
                o = t.radius * t.radius;
            if (r > o) return null;
            var a = Math.sqrt(o - r),
                s = n - a,
                u = n + a;
            return s < 0 && u < 0 ? null : s < 0 ? this.at(u, e) : this.at(s, e)
        },
        intersectsSphere: function(t) {
            return this.distanceSqToPoint(t.center) <= t.radius * t.radius
        },
        distanceToPlane: function(t) {
            var e = t.normal.dot(this.direction);
            if (0 === e) return 0 === t.distanceToPoint(this.origin) ? 0 : null;
            var n = -(this.origin.dot(t.normal) + t.constant) / e;
            return n >= 0 ? n : null
        },
        intersectPlane: function(t, e) {
            var n = this.distanceToPlane(t);
            return null === n ? null : this.at(n, e)
        },
        intersectsPlane: function(t) {
            var e = t.distanceToPoint(this.origin);
            return 0 === e || t.normal.dot(this.direction) * e < 0
        },
        intersectBox: function(t, e) {
            var n, r, i, o, a, s, u = 1 / this.direction.x,
                c = 1 / this.direction.y,
                l = 1 / this.direction.z,
                h = this.origin;
            return u >= 0 ? (n = (t.min.x - h.x) * u, r = (t.max.x - h.x) * u) : (n = (t.max.x - h.x) * u, r = (t.min.x - h.x) * u), c >= 0 ? (i = (t.min.y - h.y) * c, o = (t.max.y - h.y) * c) : (i = (t.max.y - h.y) * c, o = (t.min.y - h.y) * c), n > o || i > r ? null : ((i > n || n != n) && (n = i), (o < r || r != r) && (r = o), l >= 0 ? (a = (t.min.z - h.z) * l, s = (t.max.z - h.z) * l) : (a = (t.max.z - h.z) * l, s = (t.min.z - h.z) * l), n > s || a > r ? null : ((a > n || n != n) && (n = a), (s < r || r != r) && (r = s), r < 0 ? null : this.at(n >= 0 ? n : r, e)))
        },
        intersectsBox: function(t) {
            return null !== this.intersectBox(t, i)
        },
        intersectTriangle: function(t, e, n, r, i) {
            u.subVectors(e, t), c.subVectors(n, t), l.crossVectors(u, c);
            var o, a = this.direction.dot(l);
            if (a > 0) {
                if (r) return null;
                o = 1
            } else {
                if (!(a < 0)) return null;
                o = -1, a = -a
            }
            s.subVectors(this.origin, t);
            var h = o * this.direction.dot(c.crossVectors(s, c));
            if (h < 0) return null;
            var f = o * this.direction.dot(u.cross(s));
            if (f < 0) return null;
            if (h + f > a) return null;
            var p = -o * s.dot(l);
            return p < 0 ? null : this.at(p / a, i)
        },
        applyMatrix4: function(t) {
            return this.origin.applyMatrix4(t), this.direction.transformDirection(t), this
        },
        equals: function(t) {
            return t.origin.equals(this.origin) && t.direction.equals(this.direction)
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return c
    }));
    var r, i = n(25),
        o = n(115),
        a = n(6),
        s = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        u = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        c = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "settings", e.properties = Object(o.b)(), e
            }
            return s(e, t), e.prototype.clone = function() {
                var t = new e;
                return t.copy(this), t
            }, e.prototype.copy = function(t) {
                var e, n, r = t.properties;
                try {
                    for (var i = u(r.keys), o = i.next(); !o.done; o = i.next()) {
                        var a = o.value,
                            s = r.get(a);
                        s && "function" == typeof s.clone ? this.setProperty(a, s.clone()) : this.setProperty(a, s)
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        o && !o.done && (n = i.return) && n.call(i)
                    } finally {
                        if (e) throw e.error
                    }
                }
            }, e.prototype.setProperty = function(t, e) {
                var n = this.properties.get(t);
                null != e && n === e || (this.properties.set(t, e), this.commit([t]))
            }, e.prototype.notifyPropertyObserver = function(t, e) {
                t(this.properties.get(e))
            }, e.prototype.setLocalStorageProperty = function(t, e) {
                Object(a.w)(t, e), this.setProperty(t, e)
            }, e.prototype.hasProperty = function(t) {
                return this.properties.has(t)
            }, e.prototype.tryGetProperty = function(t, e) {
                return this.hasProperty(t) ? this.properties.get(t) : e
            }, e.prototype.getProperty = function(t) {
                if (this.hasProperty(t)) return this.properties.get(t);
                throw new Error("SettingsData: " + t + " not found")
            }, e.prototype.checkUrlParam = function(t, e, n) {
                void 0 === n && (n = 0);
                var r = this.tryGetProperty(t, n);
                return "number" == typeof r ? r === e : parseInt(r, 10) === e
            }, e.prototype.iterate = function(t) {
                var e, n;
                try {
                    for (var r = u(this.properties.keys), i = r.next(); !i.done; i = r.next()) {
                        var o = i.value;
                        t(o, this.getProperty(o))
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        i && !i.done && (n = r.return) && n.call(r)
                    } finally {
                        if (e) throw e.error
                    }
                }
            }, e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return c
    })), n.d(e, "c", (function() {
        return i
    })), n.d(e, "a", (function() {
        return o
    }));
    var r, i, o, a = n(25),
        s = n(239),
        u = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        c = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.name = "player-options", n.options = new l(e), n
            }
            return u(e, t), e.prototype.copy = function(t) {
                this.options = Object.assign({}, t.options)
            }, e
        }(a.a),
        l = function(t) {
            this.presented_by = !1, this.highlight_reel = !0, this.floor_plan = !0, this.tour_buttons = !0, this.labels = !0, this.measurements = !0, this.measurements_saved = !0, this.dollhouse = !0, this.fast_transitions = !1, this.autoplay = !1, this.contact_email = !1, this.address = !1, this.contact_name = !1, this.model_summary = !1, this.contact_phone = !1, this.model_name = !1, this.external_url = !1, this.unit_type = i.USFractional, this.background_color = s.a.default, t && (this.presented_by = !!t.presented_by, this.highlight_reel = !!t.highlight_reel, this.floor_plan = !!t.floor_plan, this.tour_buttons = !!t.tour_buttons, this.labels = !!t.labels, this.dollhouse = !!t.dollhouse, this.fast_transitions = !!t.fast_transitions, this.contact_email = !!t.contact_email, this.address = !!t.address, this.contact_name = !!t.contact_name, this.model_summary = !!t.model_summary, this.contact_phone = !!t.contact_phone, this.model_name = !!t.model_name, this.external_url = !!t.external_url, this.autoplay = !!t.autoplay, void 0 !== t.measurements && (this.measurements = t.measurements), void 0 !== t.measurements_saved && (this.measurements_saved = t.measurements_saved), void 0 !== t.unit_type && (this.unit_type = t.unit_type), void 0 !== t.background_color && void 0 !== s.a[t.background_color] && (this.background_color = t.background_color))
        };
    ! function(t) {
        t.USFractional = "imperial", t.Metric = "metric"
    }(i || (i = {})),
    function(t) {
        t.PresentedBy = "presented_by", t.HighlightReel = "highlight_reel", t.FloorPlan = "floor_plan", t.TourButtons = "tour_buttons", t.Labels = "labels", t.Measurements = "measurements", t.SavedMeasurements = "measurements_saved", t.Dollhouse = "dollhouse", t.InstantTransitions = "fast_transitions", t.AutoPlay = "autoplay", t.Units = "unit_type", t.DetailsEmail = "contact_email", t.DetailsAddress = "address", t.DetailsName = "contact_name", t.DetailsSummary = "model_summary", t.DetailsPhone = "contact_phone", t.DetailsModelName = "model_name", t.DetailsExternalUrl = "external_url", t.BackgroundColor = "background_color"
    }(o || (o = {}))
}, function(t, e, n) {
    "use strict";
    var r = n(47),
        i = n(30);

    function o(t) {
        r.a.call(this), this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.vertexShader = "\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n", this.fragmentShader = "\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n", this.linewidth = 1, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.lights = !1, this.clipping = !1, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.extensions = {
            derivatives: !1,
            fragDepth: !1,
            drawBuffers: !1,
            shaderTextureLOD: !1
        }, this.defaultAttributeValues = {
            color: [1, 1, 1],
            uv: [0, 0],
            uv2: [0, 0]
        }, this.index0AttributeName = void 0, this.uniformsNeedUpdate = !1, void 0 !== t && (void 0 !== t.attributes && console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."), this.setValues(t))
    }
    n.d(e, "a", (function() {
        return o
    })), o.prototype = Object.create(r.a.prototype), o.prototype.constructor = o, o.prototype.isShaderMaterial = !0, o.prototype.copy = function(t) {
        return r.a.prototype.copy.call(this, t), this.fragmentShader = t.fragmentShader, this.vertexShader = t.vertexShader, this.uniforms = Object(i.b)(t.uniforms), this.defines = Object.assign({}, t.defines), this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, this.lights = t.lights, this.clipping = t.clipping, this.skinning = t.skinning, this.morphTargets = t.morphTargets, this.morphNormals = t.morphNormals, this.extensions = t.extensions, this
    }, o.prototype.toJSON = function(t) {
        var e = r.a.prototype.toJSON.call(this, t);
        for (var n in e.uniforms = {}, this.uniforms) {
            var i = this.uniforms[n].value;
            i && i.isTexture ? e.uniforms[n] = {
                type: "t",
                value: i.toJSON(t).uuid
            } : i && i.isColor ? e.uniforms[n] = {
                type: "c",
                value: i.getHex()
            } : i && i.isVector2 ? e.uniforms[n] = {
                type: "v2",
                value: i.toArray()
            } : i && i.isVector3 ? e.uniforms[n] = {
                type: "v3",
                value: i.toArray()
            } : i && i.isVector4 ? e.uniforms[n] = {
                type: "v4",
                value: i.toArray()
            } : i && i.isMatrix3 ? e.uniforms[n] = {
                type: "m3",
                value: i.toArray()
            } : i && i.isMatrix4 ? e.uniforms[n] = {
                type: "m4",
                value: i.toArray()
            } : e.uniforms[n] = {
                value: i
            }
        }
        Object.keys(this.defines).length > 0 && (e.defines = this.defines), e.vertexShader = this.vertexShader, e.fragmentShader = this.fragmentShader;
        var o = {};
        for (var a in this.extensions) !0 === this.extensions[a] && (o[a] = !0);
        return Object.keys(o).length > 0 && (e.extensions = o), e
    }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return h
    })), n.d(e, "b", (function() {
        return f
    }));
    var r, i = n(1),
        o = n(37),
        a = n(89),
        s = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        u = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        c = function() {
            function t(e, n) {
                var r, a, s = this;
                this.raycast = (r = new i.a, a = new o.a, function(e, n, i) {
                    var o, c, l = a.copy(s.bounds).expandByScalar(n);
                    if (e.ray.intersectsBox(l)) try {
                        for (var p = u(s.children), d = p.next(); !d.done; d = p.next()) {
                            var m = d.value;
                            if (m instanceof t) m.raycast(e, n, i);
                            else if (m instanceof h) {
                                var v = r,
                                    y = e.ray.distanceSqToSegment(m.start, m.end, void 0, r);
                                (g = Math.sqrt(y)) < n && i.push({
                                    distance: e.ray.origin.distanceTo(v),
                                    object: m,
                                    distanceToRay: g,
                                    point: v.clone(),
                                    isLineOctreeIntersection: !0
                                })
                            } else if (m instanceof f) {
                                var g;
                                (g = e.ray.distanceToPoint(m)) < n && i.push({
                                    distance: e.ray.origin.distanceTo(m),
                                    object: m,
                                    distanceToRay: g,
                                    point: m.clone(),
                                    isLineOctreeIntersection: !0
                                })
                            }
                        }
                    } catch (t) {
                        o = {
                            error: t
                        }
                    } finally {
                        try {
                            d && !d.done && (c = p.return) && c.call(p)
                        } finally {
                            if (o) throw o.error
                        }
                    }
                }), this.level = n, this.bounds = e.clone(), this.childNodes = [], this.children = []
            }
            return t.prototype.add = function(t) {
                var e, n, r = !1,
                    i = t instanceof a.a ? [t.start, t.end] : [t];
                if (this.level < 4) {
                    0 === this.childNodes.length && this.buildChildNodes();
                    var o = function(e) {
                        i.every((function(t) {
                            return e.bounds.containsPoint(t)
                        })) && (r = !0, e.add(t))
                    };
                    try {
                        for (var s = u(this.childNodes), c = s.next(); !c.done; c = s.next()) {
                            o(c.value)
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            c && !c.done && (n = s.return) && n.call(s)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }
                r || this.children.push(t)
            }, t.prototype.remove = function(e) {
                for (var n = e instanceof a.a ? [e.start, e.end] : [e], r = function(r) {
                        var o = i.children[r];
                        if (o instanceof t) {
                            if (n.every((function(t) {
                                    return o.bounds.containsPoint(t)
                                })) && o.remove(e)) return {
                                value: !0
                            }
                        } else if (o === e) return i.children.splice(r, 1), {
                            value: !0
                        }
                    }, i = this, o = 0; o < this.children.length; o++) {
                    var s = r(o);
                    if ("object" == typeof s) return s.value
                }
                return !1
            }, t.prototype.buildChildNodes = function() {
                for (var e = this.bounds.max.clone().sub(this.bounds.min).clone().multiplyScalar(.5), n = 0; n < 2; n++)
                    for (var r = 0; r < 2; r++)
                        for (var a = 0; a < 2; a++) {
                            var s = this.bounds.min.x + e.x * a,
                                u = s + e.x,
                                c = this.bounds.min.y + e.y * n,
                                l = c + e.y,
                                h = this.bounds.min.z + e.z * r,
                                f = h + e.z,
                                p = new t(new o.a(new i.a(s, c, h), new i.a(u, l, f)), this.level + 1);
                            this.childNodes.push(p), this.children.push(p)
                        }
            }, t.prototype.spherecast = function(e, n) {
                var r, o;
                if (e.intersectsBox(this.bounds)) try {
                    for (var a = u(this.children), s = a.next(); !s.done; s = a.next()) {
                        var c = s.value;
                        if (c instanceof t) c.spherecast(e, n);
                        else if (c instanceof h) {
                            var l = c.closestPointToPoint(e.center, !0, new i.a);
                            l.distanceTo(e.center) < e.radius && n.push(new f(l, c.roomIndex, c.floorIndex))
                        } else c instanceof i.a && c.distanceTo(e.center) < e.radius && n.push(c)
                    }
                } catch (t) {
                    r = {
                        error: t
                    }
                } finally {
                    try {
                        s && !s.done && (o = a.return) && o.call(a)
                    } finally {
                        if (r) throw r.error
                    }
                }
            }, t.prototype.traverse = function(e) {
                var n, r;
                try {
                    for (var i = u(this.children), o = i.next(); !o.done; o = i.next()) {
                        var a = o.value;
                        a instanceof t ? a.traverse(e) : e(a)
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        o && !o.done && (r = i.return) && r.call(i)
                    } finally {
                        if (n) throw n.error
                    }
                }
            }, t
        }(),
        l = function() {
            function t(t) {
                this.pointCount = 0, this.lineCount = 0, this.root = new c(t, 0)
            }
            return t.prototype.add = function(t) {
                t instanceof a.a ? this.lineCount++ : t instanceof i.a && this.pointCount++, this.root.add(t)
            }, t.prototype.remove = function(t) {
                t instanceof h ? this.lineCount-- : t instanceof f && this.pointCount--, this.root.remove(t)
            }, t.prototype.traverse = function(t) {
                this.root.traverse(t)
            }, t.prototype.raycast = function(t, e) {
                var n = [];
                return this.root.raycast(t, e, n), n
            }, t
        }();
    e.c = l;
    var h = function(t) {
            function e(e, n, r, i) {
                var o = t.call(this, e, n) || this;
                return o.start = e, o.end = n, o.roomIndex = r, o.floorIndex = i, o.isSnapLine3 = !0, o
            }
            return s(e, t), e.prototype.copy = function(t) {
                return this.start.copy(t.start), this.end.copy(t.end), this.roomIndex = t.roomIndex, this.floorIndex = t.floorIndex, this
            }, e.prototype.clone = function() {
                return new e(this.start, this.end, this.roomIndex, this.floorIndex)
            }, e
        }(a.a),
        f = function(t) {
            function e(e, n, r) {
                var i = t.call(this) || this;
                return i.point = e, i.roomIndex = n, i.floorIndex = r, i.isSnapVector3 = !0, t.prototype.copy.call(i, e), i
            }
            return s(e, t), e.prototype.copy = function(t) {
                return this.point.copy(t.point), this.roomIndex = t.roomIndex, this.floorIndex = t.floorIndex, this
            }, e.prototype.clone = function() {
                return new e(this.point, this.roomIndex, this.floorIndex)
            }, e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    })), n.d(e, "b", (function() {
        return u
    }));
    var r, i = n(70),
        o = n(23),
        a = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        s = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.value = e, n
            }
            return a(e, t), e.prototype.notifyObserver = function(t) {
                t(this.value)
            }, Object.defineProperty(e.prototype, "value", {
                get: function() {
                    return this._value
                },
                set: function(t) {
                    this._value !== t && (this.removeChildObservables(this._value), this.addChildObservable(t), this._value = t, this.setDirty())
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.deepCopy = function() {
                return Object(o.a)(this._value)
            }, e
        }(i.a),
        u = function(t) {
            return new s(t)
        }
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(3),
        o = n(18),
        a = n(1),
        s = n(16),
        u = n(27),
        c = n(33),
        l = (n(423), function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        }),
        h = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        f = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        };
    ! function(t) {
        t[t.Init = 0] = "Init", t[t.Loading = 1] = "Loading", t[t.Loaded = 2] = "Loaded"
    }(r || (r = {}));
    var p = function() {
            function t(t) {
                var e = this;
                this.onChange = t, this.settings = {}, this.helperObject = {
                    colors: {},
                    vectors: {},
                    quaternions: {}
                }, this.initPromise = new c.a, this.loadState = r.Init, this.uninitError = "ControlKit not yet initialized", this.lastKeys = [], this.lastKeysBufferLength = 0, this.controlKit = void 0, this.updateRequired = !1, this.panels = [], this.onToggleCallbacks = {}, this.onKeyDown = function(t) {
                    e.lastKeys.unshift(t.keyCode), e.lastKeys.length > e.lastKeysBufferLength && e.lastKeys.pop();
                    for (var n = 0; n < e.panels.length; n++) {
                        var r = e.panels[n].activationSequence;
                        Object(u.f)(e.lastKeys, r) && e.toggle(n)
                    }
                }, this.getPanelId = function(t) {
                    var n, r;
                    try {
                        for (var i = f(e.panels), o = i.next(); !o.done; o = i.next()) {
                            var a = o.value;
                            if (t === a.header) return a.index
                        }
                    } catch (t) {
                        n = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (r = i.return) && r.call(i)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                    return -1
                }, this.getSubGroup = function(t, n) {
                    var r = e.panels[t];
                    if (r.guiPanel || (r.guiPanel = r.makeGuiPanel()), !r.allowSubGroups) return r.guiPanel;
                    var i = r.subGroups[n];
                    return i || (i = r.guiPanel.addSubGroup({
                        label: n,
                        enable: !1
                    }), r.subGroups[n] = i), i
                }, this.addColor = function(t, n, r, i) {
                    e.updateHelperObject(n + r, i), t.addColor(e.helperObject.colors, n + r, {
                        label: r,
                        colorMode: "hex",
                        onChange: function(t) {
                            e.settings[n + r].setHex(parseInt(t.substring(1), 16));
                            var i = {};
                            i[r] = e.settings[n + r], e.onChange(i)
                        }
                    })
                }, this.addVector3 = function(t, n, r, i) {
                    e.updateHelperObject(r, i);
                    var o = t.addSubGroup({
                            label: r
                        }),
                        s = ["x", "y", "z"];
                    for (var u in s) o.addNumberInput(e.helperObject.vectors[n + r], s[u], {
                        label: s[u],
                        onChange: function() {
                            e.settings[n + r] = new a.a(e.helperObject.vectors[r].x, e.helperObject.vectors[r].y, e.helperObject.vectors[r].z);
                            var t = {};
                            t[r] = e.settings[n + r], e.onChange(t)
                        }
                    })
                }, this.addQuaternion = function(t, n, r, i) {
                    e.updateHelperObject(r, i);
                    var o = t.addSubGroup({
                            label: r
                        }),
                        a = ["x", "y", "z", "w"];
                    for (var u in a) {
                        var c = r + a[u];
                        o.addNumberInput(e.helperObject.quaternions[n + r], c, {
                            label: a[u],
                            onChange: function() {
                                e.settings[n + r] = new s.a(e.helperObject.quaternions[n + r].x, e.helperObject.quaternions[n + r].y, e.helperObject.quaternions[n + r].z, e.helperObject.quaternions[n + r].w);
                                var t = {};
                                t[r] = e.settings[n + r], e.onChange(t)
                            }
                        })
                    }
                }
            }
            return t.prototype.init = function() {}, t.prototype.loadGuiPackage = function() {
                return l(this, void 0, Promise, (function() {
                    var t = this;
                    return h(this, (function(e) {
                        return this.loadState === r.Init && (n.e(10).then(n.t.bind(null, 992, 7)).then((function(e) {
                            var n = document.createElement("div");
                            n.id = "controlKitElement", (document.getElementById("control-kit-wrapper") || document.body).appendChild(n), t.controlKit = new e.default({
                                opacity: .9,
                                enable: !1,
                                parentDomElementId: "controlKitElement"
                            }), t.controlKit.setShortcutEnable(""), t.controlKit.enable(), t.initPromise.resolve(), t.loadState = r.Loaded
                        })), this.loadState = r.Loading), [2, this.loadPromise]
                    }))
                }))
            }, Object.defineProperty(t.prototype, "loadPromise", {
                get: function() {
                    return this.initPromise.nativePromise()
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "isLoaded", {
                get: function() {
                    return void 0 !== this.controlKit
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.addPanel = function(t, e, n) {
                var r = this;
                for (void 0 === n && (n = {}), void 0 === n.width && (n.width = 250), void 0 === n.allowSubGroups && (n.allowSubGroups = !0), void 0 === n.ratio && (n.ratio = 60), this.lastKeysBufferLength = Math.max(this.lastKeysBufferLength, e.length); this.lastKeysBufferLength > this.lastKeys.length;) this.lastKeys.unshift(-1);
                return this.panels.push({
                    index: this.panels.length,
                    header: t,
                    guiPanel: null,
                    makeGuiPanel: function() {
                        return r.controlKit.addPanel({
                            label: t,
                            align: "right",
                            ratio: n.ratio,
                            width: n.width
                        })
                    },
                    subGroups: [],
                    allowSubGroups: n.allowSubGroups,
                    activationSequence: e.reverse()
                }), this.panels.length - 1
            }, t.prototype.isVisible = function(t) {
                if (!this.controlKit) throw new Error(this.uninitError);
                return this.panels[t].guiPanel._enabled
            }, t.prototype.toggle = function(t) {
                var e = this;
                this.controlKit ? this.toggleVisibility(t) : this.loadGuiPackage().then((function() {
                    e.toggleVisibility(t)
                }))
            }, t.prototype.onToggle = function(t, e) {
                this.onToggleCallbacks[t] || (this.onToggleCallbacks[t] = []), this.onToggleCallbacks[t].push(e)
            }, t.prototype.toggleVisibility = function(t) {
                var e, n;
                if (!this.controlKit) throw new Error(this.uninitError);
                var r = this.panels[t].guiPanel._enabled;
                if (r ? this.panels[t].guiPanel.disable() : this.panels[t].guiPanel.enable(), this.onToggleCallbacks[t]) try {
                    for (var i = f(this.onToggleCallbacks[t]), o = i.next(); !o.done; o = i.next()) {
                        (0, o.value)(!r)
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        o && !o.done && (n = i.return) && n.call(i)
                    } finally {
                        if (e) throw e.error
                    }
                }
            }, t.prototype.dispose = function() {
                var t = document.getElementById("controlKit");
                t && t.remove(), this.controlKit = void 0
            }, t.prototype.activate = function(t) {
                window.addEventListener("keydown", this.onKeyDown)
            }, t.prototype.deactivate = function(t) {
                this.controlKit && this.controlKit.disable(), window.removeEventListener("keydown", this.onKeyDown)
            }, t.prototype.render = function() {
                this.controlKit && this.updateRequired && this.controlKit.update()
            }, t.prototype.updateSetting = function(t, e, n) {
                if (!this.controlKit) throw new Error(this.uninitError);
                var r = this.settings[t + e];
                n && "function" == typeof n.equals && "function" == typeof n.copy && r && "function" == typeof r.equals && "function" == typeof r.copy ? n.equals(this.settings[t + e]) || (this.settings[t + e].copy(n), this.updateHelperObject(name, n), this.updateRequired = !0) : n !== this.settings[t + e] && (this.settings[t + e] = n, this.updateRequired = !0)
            }, t.prototype.getSetting = function(t, e) {
                return this.settings[t + e]
            }, t.prototype.isRegistered = function(t, e) {
                return void 0 !== this.settings[t + e]
            }, t.prototype.addControl = function(t, e, n, r, i, u) {
                var c = this;
                if (void 0 === u && (u = 2), !this.controlKit) throw new Error(this.uninitError);
                var l = this.getSubGroup(t, e);
                this.settings[t + n] = r;
                var h = typeof r;
                if (("string" === h && "true" === r || "false" === r) && (h = "boolean"), r instanceof o.a) this.addColor(l, t, n, r);
                else if (r instanceof a.a) this.addVector3(l, t, n, r);
                else if (r instanceof s.a) this.addQuaternion(l, t, n, r);
                else switch (h) {
                    case "string":
                        l.addStringInput(this.settings, t + n, {
                            label: n,
                            onChange: function(e) {
                                var r = {};
                                c.settings[t + n] = e, r[n] = c.settings[t + n], c.onChange(r)
                            }
                        });
                        break;
                    case "number":
                        this.settings[t + n + "_range"] = i || [0, 10], l.addSlider(this.settings, t + n, t + n + "_range", {
                            label: n,
                            onChange: function() {
                                var e = {};
                                e[n] = c.settings[t + n], c.onChange(e)
                            },
                            dp: u
                        });
                        break;
                    case "boolean":
                        l.addCheckbox(this.settings, t + n, {
                            label: n,
                            ratio: 10,
                            onChange: function() {
                                var e = {};
                                e[n] = c.settings[t + n], c.onChange(e)
                            }
                        });
                        break;
                    default:
                        l.addStringOutput(this.settings, t + n, {
                            label: n
                        })
                }
            }, t.prototype.addButton = function(t, e, n, r) {
                if (!this.controlKit) throw new Error(this.uninitError);
                this.getSubGroup(t, e).addButton(n, r, {
                    label: "none",
                    ratio: 100
                })
            }, t.prototype.addSlider = function(t, e, n, r, i, o, a) {
                var s = this;
                if (!this.controlKit) throw new Error(this.uninitError);
                var u = this.getSubGroup(t, e);
                this.settings[t + n] = r, this.settings[t + n + "_range"] = [i, o], u.addSlider(this.settings, t + n, t + n + "_range", {
                    label: n,
                    dp: a,
                    onChange: function() {
                        var e = {};
                        e[n] = s.settings[t + n], s.onChange(e)
                    }
                })
            }, t.prototype.updateHelperObject = function(t, e) {
                e instanceof o.a ? this.helperObject.colors[t] = "#" + e.getHexString() : e instanceof a.a ? (this.helperObject.vectors[t] = {}, this.helperObject.vectors[t].x = e.x, this.helperObject.vectors[t].y = e.y, this.helperObject.vectors[t].z = e.z) : e instanceof s.a && (this.helperObject.quaternions[t] = {}, this.helperObject.quaternions[t].x = e.x, this.helperObject.quaternions[t].y = e.y, this.helperObject.quaternions[t].z = e.z, this.helperObject.quaternions[t].w = e.w)
            }, t
        }(),
        d = n(4),
        m = n(77),
        v = n(6);
    n.d(e, "SettingPersistence", (function() {
        return g
    }));
    var y, g, b = (y = function(t, e) {
            return (y = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            y(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        _ = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        w = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        x = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        E = new i.a("settings");
    ! function(t) {
        t[t.NONE = 0] = "NONE", t[t.LOCAL_STORAGE = 1] = "LOCAL_STORAGE"
    }(g || (g = {}));
    var S = function(t) {
        function e() {
            var e = null !== t && t.apply(this, arguments) || this;
            return e.name = "settings", e.queuedControls = [], e.queuedButtons = [], e.secretWord = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65, 72], e.panelID = -1, e.addPanel = function(t, n, r) {
                var i = e.getPanelId(t);
                return -1 === i ? e.settingsGUI.addPanel(t, n, r) : i
            }, e.getPanelId = function(t) {
                return e.settingsGUI.getPanelId(t)
            }, e
        }
        return b(e, t), e.prototype.init = function(t, e) {
            return _(this, void 0, void 0, (function() {
                var n, r, i, o, a = this;
                return w(this, (function(s) {
                    for (r in this.engine = e, this.settings = new m.a, this.engine.market.register(this, m.a, this.settings), t.useGUI && (this.settingsGUI = new p((function(t) {
                            a.updateSettings(t)
                        })), e.addComponent(this, this.settingsGUI), this.panelID = this.settingsGUI.addPanel("3.0.35.5-0-g683e0bbd4", this.secretWord)), n = Object(v.s)()) "string" == typeof(i = n[r]) && (o = Number.parseFloat(i), isNaN(o) || (i = o)), this.settings.setProperty(r, i), t.useGUI && this.queuedControls.push({
                        panelId: this.panelID,
                        group: "Engine Config",
                        settingName: r,
                        value: i
                    });
                    return t.useGUI && this.settingsGUI.loadPromise.then((function() {
                        var t, e, n, r;
                        try {
                            for (var i = x(a.queuedControls), o = i.next(); !o.done; o = i.next()) {
                                var s = o.value;
                                a.settingsGUI.addControl(s.panelId, s.group, s.settingName, s.value, s.range, s.rangePrecision)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (e = i.return) && e.call(i)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                        try {
                            for (var u = x(a.queuedButtons), c = u.next(); !c.done; c = u.next()) {
                                var l = c.value;
                                a.settingsGUI.addButton(l.panelId, l.group, l.buttonName, l.callback)
                            }
                        } catch (t) {
                            n = {
                                error: t
                            }
                        } finally {
                            try {
                                c && !c.done && (r = u.return) && r.call(u)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                        a.settingsGUI.toggle(a.panelID)
                    })), [2]
                }))
            }))
        }, Object.defineProperty(e.prototype, "loadPromise", {
            get: function() {
                return this.settingsGUI.loadPromise
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.getSettingsGui = function() {
            return this.settingsGUI
        }, e.prototype.getMainPanelId = function() {
            return this.panelID
        }, e.prototype.updateSetting = function(t, e, n) {
            void 0 === n && (n = this.panelID), e && e.clone && "function" == typeof e.clone ? this.settings.setProperty(t, e.clone()) : this.settings.setProperty(t, e), this.settingsGUI && this.settingsGUI.isLoaded && this.settingsGUI.updateSetting(n, t, e)
        }, e.prototype.updateSettings = function(t) {
            for (var e in t) this.updateSetting(e, t[e])
        }, e.prototype.registerSetting = function(t, e, n, r, i, o, a, s) {
            if (void 0 === r && (r = !0), void 0 === i && (i = g.NONE), void 0 === a && (a = this.panelID), void 0 === s && (s = 2), this.settingsGUI && this.settingsGUI.isRegistered(a, e)) E.warn("Duplicate setting " + e + " registered. Is a module being used twice?");
            else {
                var u;
                u = n && n.clone && "function" == typeof n.clone ? n.clone() : n, this.settingsGUI && r && (this.settingsGUI.isLoaded ? this.settingsGUI.addControl(a, t, e, u, o, s) : this.queuedControls.push({
                    panelId: a,
                    group: t,
                    settingName: e,
                    value: n,
                    range: o,
                    rangePrecision: s
                }));
                var c = i === g.LOCAL_STORAGE ? Object(v.e)(e, n) : n;
                this.updateSetting(e, c)
            }
        }, e.prototype.registerMenuEntry = function(t) {
            var e = t.header,
                n = t.setting,
                r = t.initialValue,
                i = t.persist,
                o = t.displayInUi,
                a = t.range,
                s = t.panel,
                u = t.onChange,
                c = t.rangePrecision,
                l = r();
            return this.registerSetting(e, n, l, o, i, a, s, c), u ? (u(l), this.settings.onPropertyChanged(n, u)) : null
        }, e.prototype.registerMenuButton = function(t) {
            var e = t.header,
                n = t.buttonName,
                r = t.panel,
                i = t.callback;
            this.registerButton(e, n, i, r)
        }, e.prototype.registerButton = function(t, e, n, r) {
            void 0 === r && (r = this.panelID), this.settingsGUI && (this.settingsGUI.isLoaded ? this.settingsGUI.addButton(r, t, e, n) : this.queuedButtons.push({
                panelId: r,
                group: t,
                buttonName: e,
                callback: n
            }))
        }, e.prototype.hasProperty = function(t) {
            return this.settings.hasProperty(t)
        }, e.prototype.getProperty = function(t) {
            return this.settings.getProperty(t)
        }, e.prototype.tryGetProperty = function(t, e) {
            return this.settings.tryGetProperty(t, e)
        }, e.prototype.toggleMenu = function() {
            this.settingsGUI && this.settingsGUI.toggle(0)
        }, e.prototype.disposeGui = function() {
            this.settingsGUI.dispose()
        }, e
    }(d.a);
    e.default = S
}, function(t, e, n) {
    "use strict";
    var r = n(0),
        i = {
            enabled: !1,
            files: {},
            add: function(t, e) {
                !1 !== this.enabled && (this.files[t] = e)
            },
            get: function(t) {
                if (!1 !== this.enabled) return this.files[t]
            },
            remove: function(t) {
                delete this.files[t]
            },
            clear: function() {
                this.files = {}
            }
        };
    var o = new function(t, e, n) {
        var r = this,
            i = !1,
            o = 0,
            a = 0,
            s = void 0,
            u = [];
        this.onStart = void 0, this.onLoad = t, this.onProgress = e, this.onError = n, this.itemStart = function(t) {
            a++, !1 === i && void 0 !== r.onStart && r.onStart(t, o, a), i = !0
        }, this.itemEnd = function(t) {
            o++, void 0 !== r.onProgress && r.onProgress(t, o, a), o === a && (i = !1, void 0 !== r.onLoad && r.onLoad())
        }, this.itemError = function(t) {
            void 0 !== r.onError && r.onError(t)
        }, this.resolveURL = function(t) {
            return s ? s(t) : t
        }, this.setURLModifier = function(t) {
            return s = t, this
        }, this.addHandler = function(t, e) {
            return u.push(t, e), this
        }, this.removeHandler = function(t) {
            var e = u.indexOf(t);
            return -1 !== e && u.splice(e, 2), this
        }, this.getHandler = function(t) {
            for (var e = 0, n = u.length; e < n; e += 2) {
                var r = u[e],
                    i = u[e + 1];
                if (r.test(t)) return i
            }
            return null
        }
    };

    function a(t) {
        this.manager = void 0 !== t ? t : o, this.crossOrigin = "anonymous", this.path = "", this.resourcePath = ""
    }

    function s(t) {
        a.call(this, t)
    }
    Object.assign(a.prototype, {
        load: function() {},
        parse: function() {},
        setCrossOrigin: function(t) {
            return this.crossOrigin = t, this
        },
        setPath: function(t) {
            return this.path = t, this
        },
        setResourcePath: function(t) {
            return this.resourcePath = t, this
        }
    }), s.prototype = Object.assign(Object.create(a.prototype), {
        constructor: s,
        load: function(t, e, n, r) {
            void 0 !== this.path && (t = this.path + t), t = this.manager.resolveURL(t);
            var o = this,
                a = i.get(t);
            if (void 0 !== a) return o.manager.itemStart(t), setTimeout((function() {
                e && e(a), o.manager.itemEnd(t)
            }), 0), a;
            var s = document.createElementNS("http://www.w3.org/1999/xhtml", "img");

            function u() {
                s.removeEventListener("load", u, !1), s.removeEventListener("error", c, !1), i.add(t, this), e && e(this), o.manager.itemEnd(t)
            }

            function c(e) {
                s.removeEventListener("load", u, !1), s.removeEventListener("error", c, !1), r && r(e), o.manager.itemError(t), o.manager.itemEnd(t)
            }
            return s.addEventListener("load", u, !1), s.addEventListener("error", c, !1), "data:" !== t.substr(0, 5) && void 0 !== this.crossOrigin && (s.crossOrigin = this.crossOrigin), o.manager.itemStart(t), s.src = t, s
        }
    });
    var u = n(41);

    function c(t) {
        a.call(this, t)
    }
    c.prototype = Object.assign(Object.create(a.prototype), {
        constructor: c,
        load: function(t, e, n, i) {
            var o = new u.a,
                a = new s(this.manager);
            return a.setCrossOrigin(this.crossOrigin), a.setPath(this.path), a.load(t, (function(n) {
                o.image = n;
                var i = t.search(/\.jpe?g($|\?)/i) > 0 || 0 === t.search(/^data\:image\/jpeg/);
                o.format = i ? r.Ub : r.yb, o.needsUpdate = !0, void 0 !== e && e(o)
            }), n, i), o
        }
    });
    var l = n(3);
    n.d(e, "a", (function() {
        return f
    }));
    var h = new l.a("texture"),
        f = function(t) {
            var e = new c;
            return e.crossOrigin = "anonymous", e.load(t, void 0, void 0, (function() {
                h.error("Failed to load " + t)
            }))
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return h
    })), n.d(e, "b", (function() {
        return f
    }));
    var r, i = n(70),
        o = n(23),
        a = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        s = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        u = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        c = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        l = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(c(arguments[e]));
            return t
        },
        h = function(t) {
            function e() {
                var e = t.call(this) || this;
                return e.isObservableArray = !0, e.elements = [], e
            }
            return a(e, t), e.prototype.push = function(t) {
                return this.elements.push(t), this.addChildObservable(t), this.setDirty(), this.length
            }, e.prototype.concat = function(t) {
                var e = this.elements.length;
                this.elements = this.elements.concat(t);
                for (var n = e; n < this.elements.length; n++) this.addChildObservable(this.elements[n]);
                return this.setDirty(), this.length
            }, e.prototype.replace = function(t) {
                var e, n;
                try {
                    for (var r = u(this.elements), i = r.next(); !i.done; i = r.next()) {
                        var o = i.value;
                        this.removeChildObservables(o)
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        i && !i.done && (n = r.return) && n.call(r)
                    } finally {
                        if (e) throw e.error
                    }
                }
                return this.elements = [], this.concat(t)
            }, e.prototype.remove = function(t) {
                if (t < 0 || t >= this.length) throw new Error("Index " + t + " not in range of ObservableArray");
                var e = c(this.elements.splice(t, 1), 1)[0];
                this.removeChildObservables(e), this.setDirty()
            }, e.prototype.update = function(t, e) {
                var n = this.elements[t];
                n !== e && (this.elements[t] = e, this.removeChildObservables(n), this.addChildObservable(e), this.setDirty())
            }, Object.defineProperty(e.prototype, "length", {
                get: function() {
                    return this.elements.length
                },
                set: function(t) {
                    if (t < this.elements.length) {
                        for (var e = this.elements.length - 1; e >= t; e--) {
                            var n = this.elements[e];
                            this.removeChildObservables(n)
                        }
                        this.elements.length = t, this.setDirty()
                    }
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.values = function() {
                return l(this.elements)
            }, e.prototype.filter = function(t) {
                return this.elements.filter(t)
            }, e.prototype[Symbol.iterator] = function() {
                var t, e, n, r, i;
                return s(this, (function(o) {
                    switch (o.label) {
                        case 0:
                            o.trys.push([0, 5, 6, 7]), n = u(this.elements), r = n.next(), o.label = 1;
                        case 1:
                            return r.done ? [3, 4] : [4, r.value];
                        case 2:
                            o.sent(), o.label = 3;
                        case 3:
                            return r = n.next(), [3, 1];
                        case 4:
                            return [3, 7];
                        case 5:
                            return i = o.sent(), t = {
                                error: i
                            }, [3, 7];
                        case 6:
                            try {
                                r && !r.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                            return [7];
                        case 7:
                            return [2]
                    }
                }))
            }, e.prototype.map = function(t) {
                return this.elements.map(t)
            }, e.prototype.forEach = function(t) {
                this.elements.forEach(t)
            }, e.prototype.get = function(t) {
                return this.elements[t]
            }, e.prototype.findIndex = function(t) {
                return this.elements.findIndex(t)
            }, e.prototype.indexOf = function(t) {
                return this.elements.indexOf(t)
            }, e.prototype.splice = function(t, e) {
                for (var n, r, i, o, a, s, c = [], h = 2; h < arguments.length; h++) c[h - 2] = arguments[h];
                if (c.length) {
                    s = (n = this.elements).splice.apply(n, l([t, e], c));
                    try {
                        for (var f = u(c), p = f.next(); !p.done; p = f.next()) {
                            var d = p.value;
                            this.addChildObservable(d)
                        }
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            p && !p.done && (i = f.return) && i.call(f)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                } else s = this.elements.splice(t, e);
                try {
                    for (var m = u(s), v = m.next(); !v.done; v = m.next()) {
                        d = v.value;
                        this.removeChildObservables(d)
                    }
                } catch (t) {
                    o = {
                        error: t
                    }
                } finally {
                    try {
                        v && !v.done && (a = m.return) && a.call(m)
                    } finally {
                        if (o) throw o.error
                    }
                }
                return this.setDirty(), s
            }, e.prototype.insert = function(t, e) {
                if (t > this.elements.length) throw new Error("Tried to insert at index " + t + " in an array that's only " + this.elements.length + " long");
                t !== this.elements.length ? (this.elements.splice(t, 0, e), this.addChildObservable(e), this.setDirty()) : this.push(e)
            }, e.prototype.shift = function() {
                var t = this.elements.shift();
                return t && (this.removeChildObservables(t), this.setDirty()), t
            }, e.prototype.move = function(t, e) {
                if (e > this.elements.length - 1) throw Error("Index to move to is out of bounds");
                var n = this.elements[t];
                this.elements.splice(t, 1), this.elements.splice(e, 0, n), this.setDirty()
            }, e.prototype.onElementChanged = function(t) {
                var e = this,
                    n = this.elements.slice();
                return this.onChanged((function() {
                    for (var r in n) {
                        var o = parseInt(r, 10);
                        t.onRemoved && void 0 === e.get(o) && t.onRemoved(n[o], o)
                    }
                    for (var r in e.elements) {
                        o = parseInt(r, 10);
                        var a = e.get(o);
                        void 0 === n[o] ? t.onAdded && t.onAdded(a, o) : (i.a.isObservable(a) && a._dirtyObservable || a !== n[o]) && (t.onUpdated ? t.onUpdated(a, o) : t.onRemoved && null === a && t.onRemoved(n[o], o))
                    }
                    n = e.elements.slice()
                }))
            }, e.prototype.deepCopy = function() {
                return this.map((function(t) {
                    return Object(o.a)(t)
                }))
            }, e
        }(i.a),
        f = function(t) {
            var e = new h;
            return t && e.concat(t), e
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    })), n.d(e, "b", (function() {
        return u
    }));
    var r, i = n(20),
        o = n(25),
        a = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        s = function(t) {
            function e(e, n, r) {
                var i = t.call(this) || this;
                return i.name = "cam-start", i.icon = e, i.thumb = n, i.modified = new Date(0), i.pose = new u, r && i.pose.copy(r), i
            }
            return a(e, t), e.prototype.copy = function(t) {
                return this.icon = t.icon, this.thumb = t.thumb, this.modified = t.modified || new Date, this.pose.copy(t.pose), this
            }, Object.defineProperty(e.prototype, "hasCameraPose", {
                get: function() {
                    return this.pose && this.pose.camera && void 0 !== this.pose.camera.position
                },
                enumerable: !0,
                configurable: !0
            }), e
        }(o.a),
        u = function() {
            function t(t, e, n, r, o, a) {
                void 0 === t && (t = i.a.Panorama), this.mode = t, this.camera = {
                    position: e || void 0,
                    rotation: n || void 0,
                    zoom: r || void 0
                }, this.pano = o || {
                    position: void 0,
                    rotation: void 0,
                    uuid: void 0
                }, this.floorVisibility = a || void 0
            }
            return t.prototype.copy = function(t) {
                return this.camera.position = c(t.camera.position, this.camera.position), this.camera.rotation = c(t.camera.rotation, this.camera.rotation), this.camera.zoom = t.camera.zoom, this.pano.uuid = t.pano.uuid ? t.pano.uuid.slice() : void 0, this.pano.rotation = c(t.pano.rotation, this.pano.rotation), this.pano.position = c(t.pano.position, this.pano.position), this.mode = t.mode, this.floorVisibility = t.floorVisibility ? t.floorVisibility.slice() : void 0, this
            }, t
        }(),
        c = function(t, e) {
            return t && e ? e.copy(t) : t && !e ? t.clone() : void 0
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    })), n.d(e, "b", (function() {
        return s
    }));
    var r, i = n(101),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.type = "hover", e
            }
            return o(e, t), e
        }(i.a),
        s = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.type = "unhover", e
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    var r;
    n.d(e, "a", (function() {
            return r
        })),
        function(t) {
            t.NONE = "none", t.DEFAULT = "default", t.MOVE = "move", t.MOVE_LF = "col-resize", t.MOVE_UD = "row-resize", t.XHAIR = "crosshair", t.PLUS = "cell", t.QUESTION = "help", t.NOPE = "not-allowed", t.FINGER = "pointer", t.TEXT = "text", t.TEXT_VERT = "vertical-text", t.ZOOM_IN = "zoom-in", t.ZOOM_OUT = "zoom-in", t.GRAB = "grab", t.GRABBING = "grabbing", t.ARROW_R = "e-resize", t.ARROW_L = "w-resize", t.ARROW_U = "n-resize", t.ARROW_D = "s-resize", t.ARROW_UR = "ne-resize", t.ARROW_UL = "nw-resize", t.ARROW_DR = "se-resize", t.ARROW_DL = "sw-resize", t.ARROW_LR = "ew-resize", t.ARROW_UD = "ns-resize", t.ARROW_URDL = "nesw-resize", t.ARROW_ULDR = "nwse-resize"
        }(r || (r = {}))
}, function(t, e, n) {
    "use strict";
    n.d(e, "c", (function() {
        return i
    })), n.d(e, "b", (function() {
        return o
    })), n.d(e, "a", (function() {
        return a
    }));
    var r = n(27);

    function i(t) {
        return {
            x: t.x,
            y: t.y,
            z: t.z
        }
    }

    function o(t) {
        return {
            x: t.x || t._x,
            y: t.y || t._y,
            z: t.z || t._z,
            w: t.w || t._w
        }
    }

    function a(t) {
        return "#" + Object(r.j)(255 * t.r, 2, "0", 16) + Object(r.j)(255 * t.g, 2, "0", 16) + Object(r.j)(255 * t.b, 2, "0", 16)
    }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    }));
    var r = n(1),
        i = n(13),
        o = new r.a,
        a = new r.a;

    function s(t, e) {
        this.start = void 0 !== t ? t : new r.a, this.end = void 0 !== e ? e : new r.a
    }
    Object.assign(s.prototype, {
        set: function(t, e) {
            return this.start.copy(t), this.end.copy(e), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(t) {
            return this.start.copy(t.start), this.end.copy(t.end), this
        },
        getCenter: function(t) {
            return void 0 === t && (console.warn("THREE.Line3: .getCenter() target is now required"), t = new r.a), t.addVectors(this.start, this.end).multiplyScalar(.5)
        },
        delta: function(t) {
            return void 0 === t && (console.warn("THREE.Line3: .delta() target is now required"), t = new r.a), t.subVectors(this.end, this.start)
        },
        distanceSq: function() {
            return this.start.distanceToSquared(this.end)
        },
        distance: function() {
            return this.start.distanceTo(this.end)
        },
        at: function(t, e) {
            return void 0 === e && (console.warn("THREE.Line3: .at() target is now required"), e = new r.a), this.delta(e).multiplyScalar(t).add(this.start)
        },
        closestPointToPointParameter: function(t, e) {
            o.subVectors(t, this.start), a.subVectors(this.end, this.start);
            var n = a.dot(a),
                r = a.dot(o) / n;
            return e && (r = i.a.clamp(r, 0, 1)), r
        },
        closestPointToPoint: function(t, e, n) {
            var i = this.closestPointToPointParameter(t, e);
            return void 0 === n && (console.warn("THREE.Line3: .closestPointToPoint() target is now required"), n = new r.a), this.delta(n).multiplyScalar(i).add(this.start)
        },
        applyMatrix4: function(t) {
            return this.start.applyMatrix4(t), this.end.applyMatrix4(t), this
        },
        equals: function(t) {
            return t.start.equals(this.start) && t.end.equals(this.end)
        }
    })
}, , function(t, e, n) {
    "use strict";
    var r;
    n.d(e, "a", (function() {
            return r
        })),
        function(t) {
            t[t.ESCAPE = 27] = "ESCAPE", t[t.ZERO = 48] = "ZERO", t[t.ONE = 49] = "ONE", t[t.TWO = 50] = "TWO", t[t.THREE = 51] = "THREE", t[t.FOUR = 52] = "FOUR", t[t.FIVE = 53] = "FIVE", t[t.SIX = 54] = "SIX", t[t.SEVEN = 55] = "SEVEN", t[t.EIGHT = 56] = "EIGHT", t[t.NINE = 57] = "NINE", t[t.LEFTARROW = 37] = "LEFTARROW", t[t.UPARROW = 38] = "UPARROW", t[t.RIGHTARROW = 39] = "RIGHTARROW", t[t.DOWNARROW = 40] = "DOWNARROW", t[t.TAB = 9] = "TAB", t[t.A = 65] = "A", t[t.B = 66] = "B", t[t.C = 67] = "C", t[t.D = 68] = "D", t[t.E = 69] = "E", t[t.F = 70] = "F", t[t.G = 71] = "G", t[t.H = 72] = "H", t[t.I = 73] = "I", t[t.J = 74] = "J", t[t.K = 75] = "K", t[t.L = 76] = "L", t[t.M = 77] = "M", t[t.N = 78] = "N", t[t.O = 79] = "O", t[t.P = 80] = "P", t[t.Q = 81] = "Q", t[t.R = 82] = "R", t[t.S = 83] = "S", t[t.T = 84] = "T", t[t.U = 85] = "U", t[t.V = 86] = "V", t[t.W = 87] = "W", t[t.X = 88] = "X", t[t.Y = 89] = "Y", t[t.Z = 90] = "Z", t[t.SPACE = 32] = "SPACE", t[t.RETURN = 13] = "RETURN", t[t.DELETE = 46] = "DELETE", t[t.BACKSPACE = 8] = "BACKSPACE", t[t.SEMICOLON = 186] = "SEMICOLON", t[t.PLUSEQUALS = 187] = "PLUSEQUALS", t[t.DASHUNDERSCORE = 189] = "DASHUNDERSCORE", t[t.OPENBRACKET = 219] = "OPENBRACKET", t[t.SHIFT = 16] = "SHIFT", t[t.ALT = 18] = "ALT", t[t.CONTROL = 17] = "CONTROL"
        }(r || (r = {}))
}, function(t, e, n) {
    "use strict";
    var r;
    n.d(e, "a", (function() {
            return r
        })),
        function(t) {
            t.text = "text", t.link = "link", t.photo = "photo", t.video = "video", t.rich = "rich", t.none = "none", t.error = "error"
        }(r || (r = {})),
        function(t) {
            t.parse = function(e) {
                return null !== e && e in t ? t[e] : t.none
            }
        }(r || (r = {}))
}, function(t, e, n) {
    (function(e) {
        var n = "object",
            r = function(t) {
                return t && t.Math == Math && t
            };
        t.exports = r(typeof globalThis == n && globalThis) || r(typeof window == n && window) || r(typeof self == n && self) || r(typeof e == n && e) || Function("return this")()
    }).call(this, n(225))
}, function(t, e, n) {
    "use strict";
    n.d(e, "i", (function() {
        return r
    })), n.d(e, "f", (function() {
        return i
    })), n.d(e, "h", (function() {
        return o
    })), n.d(e, "d", (function() {
        return a
    })), n.d(e, "b", (function() {
        return s
    })), n.d(e, "g", (function() {
        return u
    })), n.d(e, "c", (function() {
        return c
    })), n.d(e, "e", (function() {
        return l
    })), n.d(e, "a", (function() {
        return h
    }));
    var r = function(t, e, n, r) {
            return n * t / r + e
        },
        i = function(t, e, n, r) {
            return n * (t /= r) * t + e
        },
        o = function(t, e, n, r) {
            return -n * (t /= r) * (t - 2) + e
        },
        a = function(t, e, n, r) {
            return (t /= r / 2) < 1 ? n / 2 * t * t + e : -n / 2 * (--t * (t - 2) - 1) + e
        },
        s = function(t, e, n, r) {
            return n * (t /= r) * t * t + e
        },
        u = function(t, e, n, r) {
            return t /= r, n * (--t * t * t + 1) + e
        },
        c = function(t, e, n, r) {
            return (t /= r / 2) < 1 ? n / 2 * t * t * t + e : n / 2 * ((t -= 2) * t * t + 2) + e
        },
        l = function(t, e, n, r) {
            return -n / 2 * (Math.cos(Math.PI * t / r) - 1) + e
        },
        h = function(t, e, n, r, i) {
            var o = e;
            if (i > 0) {
                var a = (1 - Math.max(i, 0)) * Math.abs(r);
                o = n <= a ? 0 : t(n - a, 0, 1, a)
            }
            return o
        }
}, function(t, e, n) {
    "use strict";
    var r;
    n.d(e, "a", (function() {
            return r
        })),
        function(t) {
            t[t.visibleFloor = 1] = "visibleFloor", t[t.ghostFloor = 3] = "ghostFloor", t[t.boundingSkybox = 1] = "boundingSkybox", t[t.panoMarker = 2] = "panoMarker", t[t.reticule = 3] = "reticule", t[t.grid = 5] = "grid", t[t.pins = 6] = "pins", t[t.portals = 9] = "portals", t[t.rotators = 10] = "rotators", t[t.ribbon = 100] = "ribbon", t[t.colorOverlay = 1e3] = "colorOverlay"
        }(r || (r = {}))
}, function(t, e, n) {
    "use strict";
    n.d(e, "c", (function() {
        return i
    })), n.d(e, "a", (function() {
        return o
    })), n.d(e, "b", (function() {
        return p
    }));
    var r, i, o, a = n(25),
        s = n(254),
        u = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        c = function() {
            return (c = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        l = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        h = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        f = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        };
    ! function(t) {
        t[t.Inactive = 0] = "Inactive", t[t.Active = 1] = "Active", t[t.StopScheduled = 2] = "StopScheduled"
    }(i || (i = {})),
    function(t) {
        t[t.Beginning = 0] = "Beginning", t[t.Current = 1] = "Current", t[t.End = 2] = "End"
    }(o || (o = {}));
    var p = function(t) {
        function e(e, n, r, o, a) {
            void 0 === e && (e = {});
            var u = t.call(this) || this;
            return u.snapshots = e, u.activeReel = n, u.allowedModes = r, u.modelSweeps = o, u.looping = a, u.name = "tour", u.enabledTourStops = [], u.tourPlaying = !1, u.tourEnded = !1, u.updateEnabledStops = function(t) {
                var e, n;
                if (u.enabledTourStops = [], u.activeReel && u.activeReel.reel) {
                    var r = function(e) {
                        if (e && e.sid in u.snapshots) {
                            var n = u.snapshots[e.sid],
                                r = n.metadata.camera_mode,
                                i = n.metadata.scan_id,
                                o = -1 !== t.indexOf(r),
                                a = u.modelSweeps.findIndex((function(t) {
                                    return t.id === i
                                })),
                                s = void 0 !== i && -1 !== a && u.modelSweeps[a].enabled;
                            o && (!i || s) && u.enabledTourStops.push(e.sid)
                        }
                    };
                    try {
                        for (var i = f(u.activeReel.reel), o = i.next(); !o.done; o = i.next()) {
                            r(o.value)
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }
            }, u.updateEnabledStops(r), u.tourState = i.Inactive, u.tourCurrentSnapshot = -1, u.transition = {
                active: !1,
                type: s.c.Move,
                promise: Promise.resolve(),
                stop: function() {
                    return Promise.resolve()
                },
                toIndex: -1
            }, u.looping = a, u.commit(), u
        }
        return u(e, t), e.prototype.addSnapshotToTour = function(t, e) {
            void 0 === e && (e = o.Current), this.snapshots[t.sid] = t, t.metadata.camera_mode in this.allowedModes && this.enabledTourStops.push(t.sid);
            var n = this.tourCurrentSnapshotSid;
            switch (this.tourCurrentSnapshotSid = t.sid, e) {
                case o.Beginning:
                    this.tourCurrentSnapshot = 0, this.activeReel.reel.insert(0, {
                        sid: t.sid
                    });
                    break;
                case o.End:
                    this.tourCurrentSnapshot = this.enabledTourStops.length - 1, this.activeReel.reel.push({
                        sid: t.sid
                    });
                    break;
                case o.Current:
                    if (void 0 === n) this.tourCurrentSnapshot = this.enabledTourStops.length - 1, this.activeReel.reel.push({
                        sid: t.sid
                    });
                    else {
                        var r = this.activeReel.reel.findIndex((function(t) {
                            return !!t && t.sid === n
                        })) + 1;
                        (r <= 0 || r > this.activeReel.reel.length) && (r = this.activeReel.reel.length - 1), this.tourCurrentSnapshot = this.tourCurrentSnapshot + 1, this.activeReel.reel.insert(r, {
                            sid: t.sid
                        })
                    }
                    break;
                default:
                    throw new Error("Tours.addSnapshotToTour not implemented: " + e)
            }
            this.commit()
        }, e.prototype.setHighlightOverrides = function(t, e) {
            var n = this.activeReel.reel.findIndex((function(e) {
                    return !!e && e.sid === t
                })),
                r = this.activeReel.reel.get(n);
            if (!r) throw Error("Highlight not found for " + t);
            var i = {
                sid: r.sid
            };
            r.overrides ? (i.overrides = c({}, r.overrides), e.hasOwnProperty("panDirection") && (i.overrides.panDirection = e.panDirection), e.hasOwnProperty("transitionType") && (i.overrides.transitionType = e.transitionType)) : i.overrides = {
                panDirection: e.panDirection,
                transitionType: e.transitionType
            }, this.activeReel.reel.update(n, i)
        }, e.prototype.resetAllTransitionTypeOverrides = function() {
            var t = this;
            if (this.activeReel && this.activeReel.reel) {
                var e = !1;
                this.activeReel.reel.forEach((function(n, r) {
                    n && n.overrides && n.overrides.transitionType && (delete n.overrides.transitionType, t.activeReel.reel.update(r, n), e = !0)
                })), e && this.activeReel.setDirty()
            }
        }, e.prototype.moveTourStop = function(t, e) {
            var n = this.activeReel.reel.findIndex((function(e) {
                    return !!e && e.sid === t
                })),
                r = this.activeReel.reel.findIndex((function(t) {
                    return !!t && t.sid === e
                }));
            this.activeReel.reel.move(n, r)
        }, e.prototype.clear = function() {
            this.resetEmptyReel(), this.enabledTourStops.length = 0, this.activeReel.reel.length = 0, this.commit()
        }, e.prototype.removeTourStop = function(t) {
            var e = this.enabledTourStops.indexOf(t),
                n = this.activeReel.reel.findIndex((function(e) {
                    return !!e && e.sid === t
                })),
                r = this.getTourIndexBySid(t);
            if (-1 !== e && this.enabledTourStops.splice(e, 1), this.enabledTourStops.length > 0) {
                var i = r <= this.tourCurrentSnapshot ? this.tourCurrentSnapshot - 1 : this.tourCurrentSnapshot;
                this.setTourCurrentSnapshotByIndex(Math.max(i, 0))
            } else this.resetEmptyReel();
            this.activeReel.reel.update(n, null)
        }, e.prototype.getReel = function() {
            return this.activeReel
        }, e.prototype.clone = function() {
            var t, n, r = new e({}, this.activeReel, this.allowedModes, this.modelSweeps, this.looping);
            try {
                for (var i = f(Object.keys(this.snapshots)), o = i.next(); !o.done; o = i.next()) {
                    var a = o.value,
                        s = this.snapshots[a];
                    r.snapshots[a] = s.clone()
                }
            } catch (e) {
                t = {
                    error: e
                }
            } finally {
                try {
                    o && !o.done && (n = i.return) && n.call(i)
                } finally {
                    if (t) throw t.error
                }
            }
            return r
        }, e.prototype.copy = function(t) {
            for (var e in t.snapshots) this.snapshots[e] = t.snapshots[e];
            this.activeReel = t.activeReel, this.allowedModes = t.allowedModes, this.tourState = t.tourState, this.tourPlaying = t.tourPlaying, this.tourEnded = t.tourEnded, this.tourCurrentSnapshot = t.tourCurrentSnapshot, this.tourCurrentSnapshotSid = t.tourCurrentSnapshotSid, this.modelSweeps = t.modelSweeps, this.looping = t.looping, this.updateEnabledStops(this.allowedModes)
        }, e.prototype.isLooping = function() {
            return this.looping
        }, e.prototype.isTourActive = function() {
            return this.tourState !== i.Inactive
        }, e.prototype.getCurrentTourState = function() {
            return {
                active: this.tourState !== i.Inactive,
                currentStep: this.getTourCurrentSnapshotIndex(),
                tourPlaying: this.tourPlaying,
                totalSteps: this.getSnapshotCount(),
                tourEnded: this.tourEnded,
                activeStep: this.transition && -1 !== this.transition.toIndex ? this.transition.toIndex : this.getTourCurrentSnapshotIndex(),
                highlights: this.getReelHighlights(),
                transition: this.transition
            }
        }, e.prototype.isTourTransitionActive = function() {
            return this.transition.active
        }, e.prototype.getTourTransitionType = function() {
            return this.transition.type
        }, e.prototype.useTransition = function(t) {
            this.transition = t
        }, e.prototype.setTourTransitionToIndex = function(t) {
            this.transition.toIndex = t
        }, e.prototype.stopTourTransition = function() {
            return l(this, void 0, Promise, (function() {
                return h(this, (function(t) {
                    switch (t.label) {
                        case 0:
                            return [4, this.transition.stop()];
                        case 1:
                            return t.sent(), [2]
                    }
                }))
            }))
        }, e.prototype.iterateSnapshots = function(t) {
            var e = this,
                n = 0;
            this.activeReel.reel.forEach((function(r) {
                if (r && e.isEnabled(r.sid)) {
                    var i = e.snapshots[r.sid];
                    t(i, n++)
                }
            }))
        }, e.prototype.isSnapshotInTour = function(t) {
            return -1 !== this.activeReel.reel.findIndex((function(e) {
                return !!e && e.sid === t
            }))
        }, e.prototype.getEnabledSnapshots = function() {
            var t = [];
            return this.iterateSnapshots((function(e, n) {
                t.push(e)
            })), t
        }, e.prototype.updateSnapshots = function(t) {
            this.snapshots = t
        }, e.prototype.getPhotosForTour = function() {
            var t = [],
                e = function(e) {
                    var r = n.snapshots[e];
                    "tour" !== r.category && "panorama" !== r.category && t.push({
                        name: r.name,
                        sid: r.sid,
                        thumbnailUrl: r.thumbnailUrl,
                        inReel: -1 !== n.activeReel.reel.findIndex((function(t) {
                            return !!t && t.sid === e
                        }))
                    })
                },
                n = this;
            for (var r in this.snapshots) e(r);
            return t
        }, e.prototype.getSnapshot = function(t) {
            return this.snapshots[t]
        }, e.prototype.getHighlightDescription = function(t) {
            var e = this.activeReel.reel.findIndex((function(e) {
                    return !!e && e.sid === t
                })),
                n = this.activeReel.reel.get(e);
            return {
                snapshot: this.getSnapshot(t),
                reelEntry: n
            }
        }, e.prototype.getReelHighlights = function() {
            var t = this,
                e = [];
            return this.activeReel.reel.forEach((function(n) {
                if (n && t.isEnabled(n.sid)) {
                    var r = t.snapshots[n.sid];
                    e.push({
                        sid: r.sid,
                        snapshot: r,
                        panDirection: n.overrides && n.overrides.panDirection,
                        transitionType: n.overrides && n.overrides.transitionType
                    })
                }
            })), e
        }, e.prototype.getSnapshotCount = function() {
            return this.enabledTourStops.length
        }, e.prototype.getTourState = function() {
            return this.tourState
        }, e.prototype.setTourState = function(t) {
            this.tourState = t
        }, e.prototype.getTourCurrentSnapshotIndex = function() {
            return this.tourCurrentSnapshot
        }, e.prototype.getTourCurrentSnapshotSid = function() {
            return this.tourCurrentSnapshotSid
        }, e.prototype.getTourSnapshotSid = function(t) {
            var e, n, r = 0;
            try {
                for (var i = f(this.activeReel.reel), o = i.next(); !o.done; o = i.next()) {
                    var a = o.value;
                    if (a && this.isEnabled(a.sid)) {
                        if (r === t) return a.sid;
                        r++
                    }
                }
            } catch (t) {
                e = {
                    error: t
                }
            } finally {
                try {
                    o && !o.done && (n = i.return) && n.call(i)
                } finally {
                    if (e) throw e.error
                }
            }
            throw new Error("getTourSnapshotSid() -> Invalid snapshot index.")
        }, e.prototype.getTourSnapshotsWithSweepId = function(t) {
            var e, n, r = [];
            try {
                for (var i = f(this.activeReel.reel), o = i.next(); !o.done; o = i.next()) {
                    var a = o.value;
                    a && a.sid in this.snapshots && this.snapshots[a.sid].metadata.scan_id === t && r.push(a.sid)
                }
            } catch (t) {
                e = {
                    error: t
                }
            } finally {
                try {
                    o && !o.done && (n = i.return) && n.call(i)
                } finally {
                    if (e) throw e.error
                }
            }
            return r
        }, e.prototype.setTourCurrentSnapshotByIndex = function(t) {
            var e, n;
            if (t < 0 || t > this.getSnapshotCount()) throw new Error("setTourCurrentSnapshotByIndex() -> Invalid tour index.");
            var r = -1;
            try {
                for (var i = f(this.activeReel.reel), o = i.next(); !o.done; o = i.next()) {
                    var a = o.value;
                    if (a && this.isEnabled(a.sid) && ++r === t) {
                        this.tourCurrentSnapshot = t, this.tourCurrentSnapshotSid = a.sid;
                        break
                    }
                }
            } catch (t) {
                e = {
                    error: t
                }
            } finally {
                try {
                    o && !o.done && (n = i.return) && n.call(i)
                } finally {
                    if (e) throw e.error
                }
            } - 1 === r && this.resetEmptyReel(), this.setTourTransitionToIndex(-1), this.commit()
        }, e.prototype.getTourIndexBySid = function(t) {
            var e, n, r = -1;
            try {
                for (var i = f(this.activeReel.reel), o = i.next(); !o.done; o = i.next()) {
                    var a = o.value;
                    if (a && this.isEnabled(a.sid) && (r++, a.sid === t)) return r
                }
            } catch (t) {
                e = {
                    error: t
                }
            } finally {
                try {
                    o && !o.done && (n = i.return) && n.call(i)
                } finally {
                    if (e) throw e.error
                }
            }
            return -1
        }, e.prototype.isEnabled = function(t) {
            return -1 !== this.enabledTourStops.indexOf(t)
        }, e.prototype.resetEmptyReel = function() {
            this.tourCurrentSnapshot = -1, this.tourCurrentSnapshotSid = void 0, this.setTourTransitionToIndex(-1), this.commit()
        }, e
    }(a.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    }));
    var r, i = n(94),
        o = n(40),
        a = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        s = function(t) {
            function e(e, n, r, o, a) {
                void 0 === o && (o = i.i), void 0 === a && (a = 0);
                var s = t.call(this) || this;
                return s._easing = i.i, void 0 === n && (n = e), void 0 === r && (s._active = !1, r = 0, s._elapsed = 0, s._duration = 0), s.modifyAnimation(e, n, r, o, 0, a), s
            }
            return a(e, t), Object.defineProperty(e.prototype, "active", {
                get: function() {
                    return this._active
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "duration", {
                get: function() {
                    return this._duration
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "endValue", {
                get: function() {
                    return this._endValue
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "easing", {
                get: function() {
                    return this._easing
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "elapsed", {
                get: function() {
                    return this._elapsed
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.tick = function(t) {
                if (!this._active) return this.endValue;
                if (this._delay > 0) return this._delay -= t, this.startValue;
                this._elapsed = this._elapsed + t;
                var e = this._elapsed / Math.max(this._duration, 1e-5);
                return this.updateProgress(e), this.value
            }, e.prototype.updateProgress = function(t) {
                if (isNaN(t) || t < 0) throw Error("Invalid progress value: " + t);
                var e = this.active,
                    n = this.value;
                if (t >= 1) return this.activate(!1), this.value = this.endValue, this._elapsed = this.duration, void this.commit();
                this.activate(!0), this.value = this._easing(t, this.startValue, this._endValue - this.startValue, 1), this._elapsed = t * this.duration, n === this.value && e === this.active || this.commit()
            }, e.prototype.updateAbsolute = function(t) {
                var e = t / Math.max(this._duration, 1e-5);
                this.updateProgress(e)
            }, e.prototype.modifyAnimation = function(t, e, n, r, o, a) {
                void 0 === r && (r = i.i), void 0 === o && (o = 0), void 0 === a && (a = 0), this._easing = r, this._endValue = e, this._duration = n, this.activate(this._duration >= 0 && t !== e), this._elapsed = o, this._delay = a, this.startValue = t, this.value = t, this.commit()
            }, e.prototype.activate = function(t) {
                this._active = t
            }, e.prototype.copy = function(t) {
                this._endValue = t.endValue, this._duration = t.duration, this._active = t.active, this._easing = t.easing, this._elapsed = t.elapsed, this.startValue = t.startValue, this.value = t.value, this.commit()
            }, e.prototype.clone = function() {
                var t = new e(0);
                return t.copy(this), t
            }, e.prototype.stop = function(t) {
                this._active = !1, this._elapsed = this._duration, this.value = t, this._endValue = t, this.commit()
            }, e.prototype.equals = function(t) {
                return this._active === t._active && this.duration === t.duration && this.easing === t.easing && this.elapsed === t.elapsed && this.endValue === t.endValue && this.startValue === t.startValue && this.value === t.value
            }, e
        }(o.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return c
    }));
    var r = n(16),
        i = n(1),
        o = n(7),
        a = n(13),
        s = new o.a,
        u = new r.a;

    function c(t, e, n, r) {
        this._x = t || 0, this._y = e || 0, this._z = n || 0, this._order = r || c.DefaultOrder
    }
    c.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"], c.DefaultOrder = "XYZ", Object.defineProperties(c.prototype, {
        x: {
            get: function() {
                return this._x
            },
            set: function(t) {
                this._x = t, this._onChangeCallback()
            }
        },
        y: {
            get: function() {
                return this._y
            },
            set: function(t) {
                this._y = t, this._onChangeCallback()
            }
        },
        z: {
            get: function() {
                return this._z
            },
            set: function(t) {
                this._z = t, this._onChangeCallback()
            }
        },
        order: {
            get: function() {
                return this._order
            },
            set: function(t) {
                this._order = t, this._onChangeCallback()
            }
        }
    }), Object.assign(c.prototype, {
        isEuler: !0,
        set: function(t, e, n, r) {
            return this._x = t, this._y = e, this._z = n, this._order = r || this._order, this._onChangeCallback(), this
        },
        clone: function() {
            return new this.constructor(this._x, this._y, this._z, this._order)
        },
        copy: function(t) {
            return this._x = t._x, this._y = t._y, this._z = t._z, this._order = t._order, this._onChangeCallback(), this
        },
        setFromRotationMatrix: function(t, e, n) {
            var r = a.a.clamp,
                i = t.elements,
                o = i[0],
                s = i[4],
                u = i[8],
                c = i[1],
                l = i[5],
                h = i[9],
                f = i[2],
                p = i[6],
                d = i[10];
            return "XYZ" === (e = e || this._order) ? (this._y = Math.asin(r(u, -1, 1)), Math.abs(u) < .9999999 ? (this._x = Math.atan2(-h, d), this._z = Math.atan2(-s, o)) : (this._x = Math.atan2(p, l), this._z = 0)) : "YXZ" === e ? (this._x = Math.asin(-r(h, -1, 1)), Math.abs(h) < .9999999 ? (this._y = Math.atan2(u, d), this._z = Math.atan2(c, l)) : (this._y = Math.atan2(-f, o), this._z = 0)) : "ZXY" === e ? (this._x = Math.asin(r(p, -1, 1)), Math.abs(p) < .9999999 ? (this._y = Math.atan2(-f, d), this._z = Math.atan2(-s, l)) : (this._y = 0, this._z = Math.atan2(c, o))) : "ZYX" === e ? (this._y = Math.asin(-r(f, -1, 1)), Math.abs(f) < .9999999 ? (this._x = Math.atan2(p, d), this._z = Math.atan2(c, o)) : (this._x = 0, this._z = Math.atan2(-s, l))) : "YZX" === e ? (this._z = Math.asin(r(c, -1, 1)), Math.abs(c) < .9999999 ? (this._x = Math.atan2(-h, l), this._y = Math.atan2(-f, o)) : (this._x = 0, this._y = Math.atan2(u, d))) : "XZY" === e ? (this._z = Math.asin(-r(s, -1, 1)), Math.abs(s) < .9999999 ? (this._x = Math.atan2(p, l), this._y = Math.atan2(u, o)) : (this._x = Math.atan2(-h, d), this._y = 0)) : console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: " + e), this._order = e, !1 !== n && this._onChangeCallback(), this
        },
        setFromQuaternion: function(t, e, n) {
            return s.makeRotationFromQuaternion(t), this.setFromRotationMatrix(s, e, n)
        },
        setFromVector3: function(t, e) {
            return this.set(t.x, t.y, t.z, e || this._order)
        },
        reorder: function(t) {
            return u.setFromEuler(this), this.setFromQuaternion(u, t)
        },
        equals: function(t) {
            return t._x === this._x && t._y === this._y && t._z === this._z && t._order === this._order
        },
        fromArray: function(t) {
            return this._x = t[0], this._y = t[1], this._z = t[2], void 0 !== t[3] && (this._order = t[3]), this._onChangeCallback(), this
        },
        toArray: function(t, e) {
            return void 0 === t && (t = []), void 0 === e && (e = 0), t[e] = this._x, t[e + 1] = this._y, t[e + 2] = this._z, t[e + 3] = this._order, t
        },
        toVector3: function(t) {
            return t ? t.set(this._x, this._y, this._z) : new i.a(this._x, this._y, this._z)
        },
        _onChange: function(t) {
            return this._onChangeCallback = t, this
        },
        _onChangeCallback: function() {}
    })
}, function(t, e, n) {
    "use strict";
    e.a = Object.freeze({
        signedUrlDefaultExpireTime: 24e4,
        signedUrlCheckInterval: 1e4,
        signedUrlRefreshBuffer: 15e3,
        visionTilingStartDate: new Date("8/26/2016"),
        visionTilingStartVersion: "1.1.407.13667",
        epsilon: 1e-5,
        skyboxMeshGroup: "_group_skybox_",
        skysphereMeshGroup: "_group_skysphere_"
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    })), n.d(e, "c", (function() {
        return s
    })), n.d(e, "b", (function() {
        return u
    }));
    var r, i = n(52),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.position = e, r.buttons = n, r
            }
            return o(e, t), e
        }(i.a),
        s = function(t) {
            function e(e, n, r) {
                var i = t.call(this) || this;
                return i.position = e, i.delta = n, i.buttons = r, i
            }
            return o(e, t), e
        }(i.a),
        u = function(t) {
            function e(e, n, r, i, o) {
                var a = t.call(this, e, n, r) || this;
                return a.timeSinceLastMove = i, a.fullDelta = o, a
            }
            return o(e, t), e
        }(s)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    }));
    var r = function() {
        this.eventType = "input"
    }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    })), n.d(e, "c", (function() {
        return o
    })), n.d(e, "b", (function() {
        return a
    }));
    var r = n(53),
        i = {
            fov: 75,
            near: .1,
            far: 1500
        },
        o = function(t, e) {
            return e || (e = new r.a), e.makePerspectiveFov(i.fov, t, i.near, i.far)
        },
        a = function(t, e, n, o) {
            void 0 === n && (n = 1), o || (o = new r.a);
            var a = t / 2,
                s = e / 2,
                u = o.makeOrthographic(-a, a, s, -s, i.near, i.far);
            return u.elements[0] *= n, u.elements[5] *= n, u
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    }));
    var r = n(64),
        i = n(41),
        o = n(0),
        a = n(26);

    function s(t, e, n) {
        this.width = t, this.height = e, this.scissor = new a.a(0, 0, t, e), this.scissorTest = !1, this.viewport = new a.a(0, 0, t, e), n = n || {}, this.texture = new i.a(void 0, void 0, n.wrapS, n.wrapT, n.magFilter, n.minFilter, n.format, n.type, n.anisotropy, n.encoding), this.texture.image = {}, this.texture.image.width = t, this.texture.image.height = e, this.texture.generateMipmaps = void 0 !== n.generateMipmaps && n.generateMipmaps, this.texture.minFilter = void 0 !== n.minFilter ? n.minFilter : o.P, this.depthBuffer = void 0 === n.depthBuffer || n.depthBuffer, this.stencilBuffer = void 0 === n.stencilBuffer || n.stencilBuffer, this.depthTexture = void 0 !== n.depthTexture ? n.depthTexture : null
    }
    s.prototype = Object.assign(Object.create(r.a.prototype), {
        constructor: s,
        isWebGLRenderTarget: !0,
        setSize: function(t, e) {
            this.width === t && this.height === e || (this.width = t, this.height = e, this.texture.image.width = t, this.texture.image.height = e, this.dispose()), this.viewport.set(0, 0, t, e), this.scissor.set(0, 0, t, e)
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(t) {
            return this.width = t.width, this.height = t.height, this.viewport.copy(t.viewport), this.texture = t.texture.clone(), this.depthBuffer = t.depthBuffer, this.stencilBuffer = t.stencilBuffer, this.depthTexture = t.depthTexture, this
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "c", (function() {
        return r
    })), n.d(e, "b", (function() {
        return i
    })), n.d(e, "d", (function() {
        return o
    })), n.d(e, "a", (function() {
        return a
    }));
    var r = "features/measurements",
        i = "features/measurements-saved",
        o = "tools/measurements",
        a = "features/measurements-nudge"
}, function(t, e, n) {
    "use strict";
    var r;
    n.d(e, "a", (function() {
            return r
        })),
        function(t) {
            t[t.Immediate = 0] = "Immediate", t[t.NextFrame = 1] = "NextFrame", t[t.Duration = 2] = "Duration", t[t.Manual = 3] = "Manual"
        }(r || (r = {}))
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    }));
    var r = function() {
            function t(t) {
                this._mask = t
            }
            return Object.defineProperty(t.prototype, "mask", {
                get: function() {
                    return this._mask
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.addLayers = function(t) {
                this._mask |= t.mask
            }, t.prototype.removeLayers = function(t) {
                return this._mask &= ~t.mask
            }, t.prototype.clone = function() {
                return new t(this._mask)
            }, t
        }(),
        i = function() {
            function t() {
                this.layerRegistry = [], this.unusedLayers = [];
                for (var t = 1; t < 32; t++) this.unusedLayers.push(t)
            }
            return Object.defineProperty(t, "ALL", {
                get: function() {
                    return new r(-1)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t, "NONE", {
                get: function() {
                    return new r(0)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t, "DEFAULT", {
                get: function() {
                    return new r(1)
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.claimLayer = function(t) {
                var e = this.getLayer(t);
                if (e.mask) return e;
                if (0 === this.unusedLayers.length) throw Error("All render layers have already been claimed");
                var n = this.unusedLayers[0];
                return this.layerRegistry[n] = t, this.unusedLayers.shift(), new r(1 << n)
            }, t.prototype.getLayer = function(e) {
                var n = this.layerRegistry.indexOf(e);
                return -1 !== n ? new r(1 << n) : t.NONE
            }, t.prototype.disposeLayer = function(t) {
                var e = this.layerRegistry.indexOf(t); - 1 !== e && this.unusedLayers.push(e)
            }, t
        }()
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return o
    }));
    var r = n(47),
        i = n(18);

    function o(t) {
        r.a.call(this), this.type = "LineBasicMaterial", this.color = new i.a(16777215), this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.setValues(t)
    }
    o.prototype = Object.create(r.a.prototype), o.prototype.constructor = o, o.prototype.isLineBasicMaterial = !0, o.prototype.copy = function(t) {
        return r.a.prototype.copy.call(this, t), this.color.copy(t.color), this.linewidth = t.linewidth, this.linecap = t.linecap, this.linejoin = t.linejoin, this
    }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    })), n.d(e, "b", (function() {
        return c
    })), n.d(e, "c", (function() {
        return f
    }));
    var r, i, o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        };
    ! function(t) {
        t[t.None = 0] = "None", t[t.Duration = 1] = "Duration", t[t.Phase = 2] = "Phase", t[t.Promise = 3] = "Promise"
    }(i || (i = {}));
    var s, u = function(t) {
            this.type = t
        },
        c = function(t) {
            function e() {
                return t.call(this, i.None) || this
            }
            return o(e, t), e
        }(u),
        l = function(t) {
            function e(e) {
                var n = t.call(this, i.Duration) || this;
                return n.duration = e, n.startTime = Date.now(), n
            }
            return o(e, t), e
        }(u),
        h = function(t) {
            function e(e) {
                var n = t.call(this, i.Phase) || this;
                return n.phase = e, n
            }
            return o(e, t), e
        }(u);
    ! function(t) {
        t[t.Pending = 0] = "Pending", t[t.Fulfilled = 1] = "Fulfilled", t[t.Rejected = 2] = "Rejected"
    }(s || (s = {}));
    var f = function(t) {
            function e(e) {
                var n = t.call(this, i.Promise) || this;
                return n.promise = e, n.promiseState = s.Pending, e.then((function() {
                    n.promiseState = s.Fulfilled
                })).catch((function() {
                    n.promiseState = s.Rejected
                })), n
            }
            return o(e, t), e
        }(u),
        p = function() {
            function t(t, e) {
                void 0 === e && (e = !0), this.generator = t, e && this.start()
            }
            return t.prototype.start = function() {
                this.started || (this.iterator = this.generator()), this.started = !0
            }, t.prototype.iterate = function() {
                var t = this.iterator.next();
                this.currentResult = t.value, t.done && (this.started = !1)
            }, t
        }(),
        d = function() {
            function t() {
                this.generators = []
            }
            return t.prototype.startGenerator = function(t) {
                for (var e = this.generators.length, n = 0; n < this.generators.length; n++) {
                    this.generators[n].generator === t && (e = n)
                }
                this.generators[e] = new p(t)
            }, t.prototype.stopGenerator = function(t) {
                var e, n;
                try {
                    for (var r = a(this.generators), i = r.next(); !i.done; i = r.next()) {
                        var o = i.value;
                        o.generator === t && (o.started = !1)
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        i && !i.done && (n = r.return) && n.call(r)
                    } finally {
                        if (e) throw e.error
                    }
                }
            }, t.prototype.processGenerators = function(t, e) {
                var n, r;
                try {
                    for (var o = a(this.generators), u = o.next(); !u.done; u = o.next()) {
                        var p = u.value;
                        if (p.started) switch (t) {
                            case i.None:
                                (!p.currentResult || p.currentResult instanceof c) && p.iterate();
                                break;
                            case i.Phase:
                                if (p.currentResult instanceof h) {
                                    var d = p.currentResult;
                                    void 0 !== e && d.phase === e && p.iterate()
                                }
                                break;
                            case i.Promise:
                                if (p.currentResult instanceof f) p.currentResult.promiseState === s.Fulfilled && p.iterate();
                                break;
                            case i.Duration:
                                if (p.currentResult instanceof l) {
                                    var m = p.currentResult;
                                    Date.now() - m.startTime >= m.duration && p.iterate()
                                }
                        }
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        u && !u.done && (r = o.return) && r.call(o)
                    } finally {
                        if (n) throw n.error
                    }
                }
            }, t
        }();
    e.d = d
}, function(t, e, n) {
    "use strict";

    function r(t, e, n, r) {
        this.data = t, this.itemSize = e, this.offset = n, this.normalized = !0 === r
    }
    n.d(e, "a", (function() {
        return r
    })), Object.defineProperties(r.prototype, {
        count: {
            get: function() {
                return this.data.count
            }
        },
        array: {
            get: function() {
                return this.data.array
            }
        }
    }), Object.assign(r.prototype, {
        isInterleavedBufferAttribute: !0,
        setX: function(t, e) {
            return this.data.array[t * this.data.stride + this.offset] = e, this
        },
        setY: function(t, e) {
            return this.data.array[t * this.data.stride + this.offset + 1] = e, this
        },
        setZ: function(t, e) {
            return this.data.array[t * this.data.stride + this.offset + 2] = e, this
        },
        setW: function(t, e) {
            return this.data.array[t * this.data.stride + this.offset + 3] = e, this
        },
        getX: function(t) {
            return this.data.array[t * this.data.stride + this.offset]
        },
        getY: function(t) {
            return this.data.array[t * this.data.stride + this.offset + 1]
        },
        getZ: function(t) {
            return this.data.array[t * this.data.stride + this.offset + 2]
        },
        getW: function(t) {
            return this.data.array[t * this.data.stride + this.offset + 3]
        },
        setXY: function(t, e, n) {
            return t = t * this.data.stride + this.offset, this.data.array[t + 0] = e, this.data.array[t + 1] = n, this
        },
        setXYZ: function(t, e, n, r) {
            return t = t * this.data.stride + this.offset, this.data.array[t + 0] = e, this.data.array[t + 1] = n, this.data.array[t + 2] = r, this
        },
        setXYZW: function(t, e, n, r, i) {
            return t = t * this.data.stride + this.offset, this.data.array[t + 0] = e, this.data.array[t + 1] = n, this.data.array[t + 2] = r, this.data.array[t + 3] = i, this
        }
    })
}, , , function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    })), n.d(e, "b", (function() {
        return o
    })), n.d(e, "d", (function() {
        return a
    })), n.d(e, "c", (function() {
        return s
    }));
    var r = n(143),
        i = "analytics/name",
        o = "analytics/config_key",
        a = "analytics_provider",
        s = r.a.Logging
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return l
    }));
    var r, i = n(25),
        o = n(1),
        a = n(16),
        s = n(20),
        u = n(81),
        c = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        l = function(t) {
            function e() {
                var e = t.call(this) || this;
                return e.name = "viewmode", e.isPano = function() {
                    return e.currentMode === s.a.Panorama
                }, e.isFloorplan = function() {
                    return e.currentMode === s.a.Floorplan
                }, e.isDollhouse = function() {
                    return e.currentMode === s.a.Dollhouse
                }, e.lastInsidePosition = new o.a, e.lastInsideRotation = new a.a, e.currentModeObservable = Object(u.b)(null), e.transition = {
                    active: !1,
                    progress: 0,
                    from: null,
                    to: null,
                    startTime: 0,
                    transitionTime: 0
                }, e
            }
            return c(e, t), Object.defineProperty(e.prototype, "currentMode", {
                get: function() {
                    return this.currentModeObservable.value
                },
                set: function(t) {
                    t !== this.currentModeObservable.value && (this.currentModeObservable.value = t)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "closestMode", {
                get: function() {
                    return this.currentMode === s.a.Transition ? this.transition.progress < .5 ? this.transition.from : this.transition.to : this.currentMode
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.makeModeChangeSubscription = function(t) {
                return this.currentModeObservable.onChanged(t)
            }, e.prototype.copyTransition = function(t) {
                this.transition.active = t.active, this.transition.progress = t.progress, this.transition.from = t.from, this.transition.to = t.to, this.transition.startTime = t.startTime, this.transition.transitionTime = t.transitionTime
            }, e.prototype.activateTransition = function(t, e, n) {
                this.transition.active = !0, this.transition.progress = 0, this.transition.startTime = Date.now(), this.transition.transitionTime = n, this.transition.to = e, this.transition.from = t
            }, e.prototype.deactivateTransition = function() {
                this.transition.active = !1
            }, e.prototype.clone = function() {
                var t = new e;
                return t.copy(this), t
            }, e.prototype.copy = function(t) {
                this.currentMode = t.currentMode, this.lastInsidePosition.copy(t.lastInsidePosition), this.lastInsideRotation.copy(t.lastInsideRotation), this.copyTransition(t.transition)
            }, e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    }));
    var r = n(79);

    function i(t) {
        r.a.call(this, t), this.type = "RawShaderMaterial"
    }
    i.prototype = Object.create(r.a.prototype), i.prototype.constructor = i, i.prototype.isRawShaderMaterial = !0
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return l
    })), n.d(e, "b", (function() {
        return h
    }));
    var r, i = n(70),
        o = n(23),
        a = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        s = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        u = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        };

    function c(t) {
        return Object(o.d)(t) ? "" + t : t
    }
    var l = function(t) {
            function e() {
                var e = t.call(this) || this;
                return e.map = {}, e._keysSet = new Set, e._keysList = [], e
            }
            return a(e, t), Object.defineProperty(e.prototype, "keys", {
                get: function() {
                    return this._keysList.slice()
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "values", {
                get: function() {
                    var t = this;
                    return this._keysList.map((function(e) {
                        return t.get(e)
                    }))
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "length", {
                get: function() {
                    return this._keysList.length
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype[Symbol.iterator] = function() {
                var t, e, n, r, i, o;
                return s(this, (function(a) {
                    switch (a.label) {
                        case 0:
                            a.trys.push([0, 5, 6, 7]), n = u(this._keysList), r = n.next(), a.label = 1;
                        case 1:
                            return r.done ? [3, 4] : (i = r.value, [4, this.get(i)]);
                        case 2:
                            a.sent(), a.label = 3;
                        case 3:
                            return r = n.next(), [3, 1];
                        case 4:
                            return [3, 7];
                        case 5:
                            return o = a.sent(), t = {
                                error: o
                            }, [3, 7];
                        case 6:
                            try {
                                r && !r.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                            return [7];
                        case 7:
                            return [2]
                    }
                }))
            }, e.prototype.get = function(t) {
                return this.map[t]
            }, e.prototype.has = function(t) {
                return void 0 !== this.map[t]
            }, e.prototype.set = function(t, e) {
                t = c(t), this.map[t] !== e && (this.removeChildObservables(this.map[t]), this.addChildObservable(e), this.map[t] = e, this._keysSet.has(t) || (this._keysList.push(t), this._keysSet.add(t)), this.setDirty())
            }, e.prototype.delete = function(t) {
                t = c(t), this.removeChildObservables(this.map[t]);
                var e = this.map.hasOwnProperty(t);
                return delete this.map[t], e && (this._keysSet.delete(t), this._keysList.splice(this._keysList.indexOf(t), 1), this.setDirty()), e
            }, e.prototype.onElementChanged = function(t) {
                var e = this,
                    n = Object.assign({}, this.map);
                return this.onChanged((function() {
                    var r, o;
                    for (var a in n) t.onRemoved && !e.has(a) && t.onRemoved(n[a], a);
                    try {
                        for (var s = u(e._keysList), c = s.next(); !c.done; c = s.next()) {
                            a = c.value;
                            var l = e.get(a);
                            void 0 === n[a] ? t.onAdded && t.onAdded(l, a) : (i.a.isObservable(l) && l._dirtyObservable || l !== n[a]) && (t.onUpdated && null !== l ? t.onUpdated(l, a) : t.onRemoved && null === l && t.onRemoved(n[a], a))
                        }
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            c && !c.done && (o = s.return) && o.call(s)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    n = Object.assign({}, e.map)
                }))
            }, e.prototype.deepCopy = function() {
                var t, e, n = {};
                try {
                    for (var r = u(this._keysList), i = r.next(); !i.done; i = r.next()) {
                        var a = i.value;
                        n[a] = Object(o.a)(this.map[a])
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        i && !i.done && (e = r.return) && e.call(r)
                    } finally {
                        if (t) throw t.error
                    }
                }
                return n
            }, e
        }(i.a),
        h = function(t) {
            void 0 === t && (t = {});
            var e = new l;
            for (var n in t) e.set(n, t[n]);
            return e
        }
}, function(t, e, n) {
    "use strict";
    var r = n(151);
    t.exports = function(t) {
        if (!r(t)) throw new TypeError("Cannot use null or undefined");
        return t
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t) {
        if ("function" != typeof t) throw new TypeError(t + " is not a function");
        return t
    }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(25),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                r.name = "canvas", r.x = 0, r.y = 0, r.width = e || 0, r.height = n || 0;
                var i = r.width / r.height;
                return r.aspectRatio = isFinite(i) ? i : 1, r
            }
            return o(e, t), e.prototype.copy = function(t) {
                this.width = t.width, this.height = t.height, this.aspectRatio = t.width / t.height, this.x = t.x, this.y = t.y
            }, e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(165),
        o = n(4),
        a = n(27),
        s = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        u = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        c = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        l = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        h = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "analytics", e.endpoints = [], e.loaded = !1, e.bufferedData = [], e.track = function(t, n) {
                    return e.loaded ? Object(a.d)(0).then((function() {
                        e.endpoints.forEach((function(e) {
                            e.track(t, n)
                        }))
                    })) : (e.bufferedData.push({
                        event: t,
                        data: n
                    }), Promise.resolve())
                }, e.trackAsync = function(t, n) {
                    e.loaded ? e.endpoints.forEach((function(e) {
                        e.trackAsync(t, n)
                    })) : e.bufferedData.push({
                        event: t,
                        data: n
                    })
                }, e
            }
            return s(e, t), e.prototype.load = function(t, e, n, r, o) {
                return u(this, void 0, void 0, (function() {
                    var a, s, u, h, f, p, d, m, v, y, g;
                    return c(this, (function(c) {
                        switch (c.label) {
                            case 0:
                                this.loaded = !1, c.label = 1;
                            case 1:
                                c.trys.push([1, 6, 7, 8]), u = l(t), h = u.next(), c.label = 2;
                            case 2:
                                return h.done ? [3, 5] : (f = h.value, p = f.provider, d = f.token, m = f.url, void 0 === i.b[p] ? [3, 4] : (v = i.b[p].class, [4, (y = new v(d, m, e)).init(n, r)]));
                            case 3:
                                c.sent(), o && o.loggedIn && y.identify(o), this.endpoints.push(y), this.loaded = !0, c.label = 4;
                            case 4:
                                return h = u.next(), [3, 2];
                            case 5:
                                return [3, 8];
                            case 6:
                                return g = c.sent(), a = {
                                    error: g
                                }, [3, 8];
                            case 7:
                                try {
                                    h && !h.done && (s = u.return) && s.call(u)
                                } finally {
                                    if (a) throw a.error
                                }
                                return [7];
                            case 8:
                                return this.loaded && this.flushBufferedData(), [2, this.loaded]
                        }
                    }))
                }))
            }, e.prototype.flushBufferedData = function() {
                var t, e, n = function(t) {
                        r.endpoints.forEach((function(e) {
                            e.track(t.event, t.data)
                        }))
                    },
                    r = this;
                try {
                    for (var i = l(this.bufferedData), o = i.next(); !o.done; o = i.next()) {
                        n(o.value)
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        o && !o.done && (e = i.return) && e.call(i)
                    } finally {
                        if (t) throw t.error
                    }
                }
                this.bufferedData.length = 0
            }, e
        }(o.a);
    n.d(e, "Analytics", (function() {
        return h
    }));
    e.default = h
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return o
    }));
    var r = n(18),
        i = n(1);

    function o(t, e, n, o, a, s) {
        this.a = t, this.b = e, this.c = n, this.normal = o && o.isVector3 ? o : new i.a, this.vertexNormals = Array.isArray(o) ? o : [], this.color = a && a.isColor ? a : new r.a, this.vertexColors = Array.isArray(a) ? a : [], this.materialIndex = void 0 !== s ? s : 0
    }
    Object.assign(o.prototype, {
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(t) {
            this.a = t.a, this.b = t.b, this.c = t.c, this.normal.copy(t.normal), this.color.copy(t.color), this.materialIndex = t.materialIndex;
            for (var e = 0, n = t.vertexNormals.length; e < n; e++) this.vertexNormals[e] = t.vertexNormals[e].clone();
            for (e = 0, n = t.vertexColors.length; e < n; e++) this.vertexColors[e] = t.vertexColors[e].clone();
            return this
        }
    })
}, function(t, e) {
    var n = {}.hasOwnProperty;
    t.exports = function(t, e) {
        return n.call(t, e)
    }
}, function(t, e, n) {
    "use strict";
    t.exports = n(291)() ? Symbol : n(293)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(29),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    var r, i = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        o = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return i(e, t), e
        }(Error);
    e.a = o
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(4),
        o = n(202);
    ! function(t) {
        t.POSTMESSAGE = "postmesesage", t.DIRECT = "direct"
    }(r || (r = {}));
    var a, s, u = (a = function(t, e) {
            return (a = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            a(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        c = function() {
            return (c = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        };
    ! function(t) {
        t.CONNECT = "postmessage.connect", t.HANDSHAKE = "postmessage.handshake", t.ACCEPT = "postmessage.accept", t.REJECT = "postmessage.reject", t.ACTION = "postmessage.action", t.RESPONSE = "postmessage.response", t.EVENT = "postmessage.event", t.SUBSCRIBE = "postmessage.subscribe", t.UNSUBSCRIBE = "postmessage.unsubscribe", t.OBSERVE = "postmessage.observe", t.UNOBSERVE = "postmessage.unobserve", t.OBSERVATION = "postmessage.observation"
    }(s || (s = {}));
    var l, h = function(t) {
        function e(e, n, r) {
            var i = t.call(this) || this;
            return i.id = n, i.clientId = r, i.clientWindow = null, i.clientOrigin = null, i.hostWindow = e, i.messageHandler = function(t) {
                i.onPostmessageReceived(t)
            }, i.bindEvents(), i
        }
        return u(e, t), e.prototype.send = function(t) {
            this.clientWindow && this.clientOrigin && this.clientWindow.postMessage(c({
                payload: t
            }, t, {
                fromId: this.id
            }), this.clientOrigin)
        }, e.prototype.setTarget = function(t, e) {
            this.clientWindow = t, this.clientOrigin = e
        }, e.prototype.clearTarget = function() {
            this.clientWindow = null, this.clientOrigin = null
        }, e.prototype.bindEvents = function() {
            this.hostWindow.addEventListener("message", this.messageHandler)
        }, e.prototype.dispose = function() {
            this.hostWindow.removeEventListener("message", this.messageHandler)
        }, e.prototype.onPostmessageReceived = function(t) {
            var e = t.origin,
                n = t.source;
            if (n) {
                switch (t.data.type) {
                    case s.CONNECT:
                        break;
                    case s.ACTION:
                    case s.SUBSCRIBE:
                    case s.UNSUBSCRIBE:
                    case s.OBSERVE:
                    case s.UNOBSERVE:
                        if (!this.validateMessageOrigin(t.data.fromId, e, n)) return;
                        break;
                    default:
                        return
                }
                if (t.data.payload) this.emit(t.data.type, c({}, t.data.payload, {
                    type: t.data.type,
                    fromId: t.data.fromId,
                    source: n,
                    origin: e,
                    method: r.POSTMESSAGE
                }));
                else {
                    var i = c({}, t.data, {
                        source: n,
                        origin: e,
                        timestamp: Date.now(),
                        method: r.POSTMESSAGE
                    });
                    this.emit(t.data.type, i)
                }
            }
        }, e.prototype.validateMessageOrigin = function(t, e, n) {
            return -1 === this.clientId && "*" === this.clientOrigin || this.clientId === t && this.clientWindow === n && this.clientOrigin === e
        }, e
    }(o.EventEmitter);
    ! function(t) {
        t.CONNECTION = "sdk.connection", t.MESSAGED = "sdk.messaged", t.SUBSCRIBED = "sdk.subscribed", t.UNSUBSCRIBED = "sdk.unsubscribed", t.OBSERVE = "sdk.observe", t.UNOBSERVE = "sdk.unobserve"
    }(l || (l = {}));
    var f = n(3),
        p = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        d = function() {
            return (d = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        m = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        v = new f.a("SdkHost"),
        y = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.hostWindow = e, n.id = Math.floor(1e5 * Math.random()), n.clients = {}, n.connectionHandler = new h(e, n.id, -1), n.bindEvents(e), n
            }
            return p(e, t), e.prototype.broadcastEventToClient = function(t, e, n) {
                var r = this.clients[t];
                if (r) {
                    var i = {
                        type: s.EVENT,
                        eventType: e,
                        eventData: n,
                        toId: t
                    };
                    r.messenger.send(i)
                }
            }, e.prototype.broadcastObservationToClient = function(t, e, n) {
                var r = this.clients[t];
                if (r) {
                    var i = {
                        type: s.OBSERVATION,
                        observableKey: e,
                        observableData: n,
                        toId: t
                    };
                    r.messenger.send(i)
                }
            }, e.prototype.broadcastEvent = function(t, e, n) {
                var r, i;
                void 0 === n && (n = !0);
                try {
                    for (var o = m(Object.keys(this.clients)), a = o.next(); !a.done; a = o.next()) {
                        var s = a.value;
                        (n || this.clients[parseInt(s, 10)].subscriptions[t]) && this.broadcastEventToClient(parseInt(s, 10), t, e)
                    }
                } catch (t) {
                    r = {
                        error: t
                    }
                } finally {
                    try {
                        a && !a.done && (i = o.return) && i.call(o)
                    } finally {
                        if (r) throw r.error
                    }
                }
            }, e.prototype.bindEvents = function(t) {
                var e = this;
                this.connectionHandler.on(s.CONNECT, (function(n) {
                    var r = new h(t, e.id, n.fromId);
                    e.onConnectionReceived(r, n)
                }))
            }, e.prototype.onConnectionReceived = function(t, e) {
                var n = this,
                    i = d({}, e, {
                        handshake: function() {
                            var r = n.clients[i.fromId];
                            if (r && r.connected) v.info("client already connected: " + i.fromId);
                            else {
                                n.clients[i.fromId] = {
                                    key: e.applicationKey,
                                    origin: e.origin,
                                    messenger: t,
                                    subscriptions: {},
                                    connected: !1
                                };
                                var o = {
                                    type: s.HANDSHAKE,
                                    toId: i.fromId
                                };
                                v.info("handshake " + i.fromId), t.send(o)
                            }
                        },
                        accept: function(e, r, o) {
                            var a = n.clients[i.fromId];
                            if (a && a.connected) v.info("client already connected: " + i.fromId);
                            else {
                                var u = {
                                    type: s.ACCEPT,
                                    toId: i.fromId,
                                    targetId: n.id,
                                    targetOrigin: n.hostWindow.location.protocol + "//" + n.hostWindow.location.host,
                                    warning: o,
                                    scriptUrl: e,
                                    interface: r
                                };
                                v.info("accept " + i.fromId), t.send(u), a.connected = !0, t.on(s.ACTION, (function(t) {
                                    return n.onMessageReceived(a, t)
                                })), t.on(s.SUBSCRIBE, (function(t) {
                                    return n.onEventSubscribe(a, t)
                                })), t.on(s.UNSUBSCRIBE, (function(t) {
                                    return n.onEventUnsubscribe(a, t)
                                })), t.on(s.OBSERVE, (function(t) {
                                    return n.onObservableSubscribe(a, t)
                                })), t.on(s.UNOBSERVE, (function(t) {
                                    return n.onObservableUnsubscribe(a, t)
                                }))
                            }
                        },
                        reject: function(e) {
                            var r = {
                                type: s.REJECT,
                                toId: i.fromId,
                                reason: e
                            };
                            t.send(r), t.clearTarget(), t.dispose(), delete n.clients[i.fromId]
                        },
                        requestedVersion: e.requestedVersion,
                        method: r.POSTMESSAGE
                    });
                t.setTarget(i.source, i.origin), this.emit(l.CONNECTION, i)
            }, e.prototype.onMessageReceived = function(t, e) {
                var n = {
                    toId: e.fromId,
                    uid: e.uid,
                    message: null,
                    success: !0,
                    type: s.RESPONSE,
                    timestamp: Date.now()
                };

                function r(e) {
                    n.message = e, t.messenger.send(n)
                }
                var i = d({}, e, {
                    applicationKey: t.key,
                    origin: t.origin,
                    onSuccess: function(t) {
                        r(t)
                    },
                    onFail: function(t) {
                        n.success = !1, n.error = t, r(t)
                    }
                });
                this.emit(l.MESSAGED, i)
            }, e.prototype.onEventSubscribe = function(t, e) {
                t.subscriptions[e.subscription] = !0, this.emitSdkEvent(l.SUBSCRIBED, t, e)
            }, e.prototype.onEventUnsubscribe = function(t, e) {
                t.subscriptions[e.subscription] = !1, this.emitSdkEvent(l.UNSUBSCRIBED, t, e)
            }, e.prototype.onObservableSubscribe = function(t, e) {
                this.emitSdkEvent(l.OBSERVE, t, e)
            }, e.prototype.onObservableUnsubscribe = function(t, e) {
                this.emitSdkEvent(l.UNOBSERVE, t, e)
            }, e.prototype.emitSdkEvent = function(t, e, n) {
                this.emit(t, d({}, n, {
                    applicationKey: e.key,
                    origin: e.origin
                }))
            }, e
        }(o.EventEmitter),
        g = function() {
            function t(t) {
                this.messageReceiver = t
            }
            return t.prototype.notify = function(t) {
                this.messageReceiver.onMessageReceived(t)
            }, t
        }(),
        b = function() {
            function t() {
                this.values = {}
            }
            return t.prototype.add = function(t, e) {
                this.getValuesAtKey(t).push(e)
            }, t.prototype.remove = function(t, e) {
                var n = this.values[t];
                if (n) {
                    var r = n.indexOf(e);
                    r > -1 && n.splice(r, 1)
                }
            }, t.prototype.getValuesAtKey = function(t) {
                var e = this.values[t] || [];
                return this.values[t] = e, e
            }, t.prototype.valuesPerKey = function(t) {
                return this.getValuesAtKey(t).length
            }, t
        }(),
        _ = function() {
            return (_ = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        w = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        x = function() {
            function t(t, e, n) {
                this.sourceId = t, this.targetId = e, this.messageBridge = n, this.observers = new b
            }
            return t.prototype.init = function() {
                var e = new t.MessengerFacade(this),
                    n = new g(e);
                this.messageBridge.listen(n)
            }, t.prototype.dispose = function() {
                this.messageBridge.stopListening()
            }, t.prototype.addObserver = function(t) {
                this.observers.add(t.messageType, t)
            }, t.prototype.removeObserver = function(t) {
                this.observers.remove(t.messageType, t)
            }, t.prototype.send = function(t) {
                var e = this.sourceId,
                    n = void 0 === this.targetId ? -1 : this.targetId;
                this.messageBridge.send(_({}, t, {
                    fromId: e,
                    toId: n,
                    timestamp: Date.now()
                }))
            }, t.prototype.onMessageReceived = function(t) {
                var e, n;
                if (this.filterMessageId(t)) {
                    var r = t.type,
                        i = this.observers.getValuesAtKey(r);
                    if (i) try {
                        for (var o = w(i), a = o.next(); !a.done; a = o.next()) {
                            a.value.notify(t.payload, t.timestamp)
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            a && !a.done && (n = o.return) && n.call(o)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }
            }, t.prototype.filterMessageId = function(t) {
                var e = t.toId;
                return e instanceof Array ? e.indexOf(this.sourceId) > -1 : -1 === e || e === this.sourceId
            }, t.MessengerFacade = function() {
                function t(t) {
                    this.messenger = t
                }
                return t.prototype.onMessageReceived = function(t) {
                    this.messenger.onMessageReceived(t)
                }, t
            }(), t
        }(),
        E = {
            0: !0
        };
    var S, T, M = function() {
            return (M = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        O = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        P = function() {
            function t() {
                this.observers = []
            }
            return t.prototype.addObserver = function(t) {
                this.observers.push(t)
            }, t.prototype.removeObserver = function(t) {
                var e = this.observers.indexOf(t);
                e > -1 && this.observers.splice(e, 1)
            }, t.prototype.post = function(t) {
                var e, n;
                try {
                    for (var r = O(this.observers), i = r.next(); !i.done; i = r.next()) {
                        i.value.notify(t)
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        i && !i.done && (n = r.return) && n.call(r)
                    } finally {
                        if (e) throw e.error
                    }
                }
            }, t
        }(),
        A = function() {
            function t(t, e) {
                this.source = t, this.target = e, this.messageObserver = null
            }
            return t.prototype.listen = function(t) {
                this.messageObserver || (this.messageObserver = t, this.source.addObserver(t))
            }, t.prototype.stopListening = function() {
                this.messageObserver && this.source.removeObserver(this.messageObserver)
            }, t.prototype.send = function(t) {
                var e = this.target;
                e && e.post(M({}, t))
            }, t
        }(),
        L = function() {
            function t(t, e, n) {
                this.hostId = t, this.host = e, this.onCreationObserver = n
            }
            return t.prototype.createMessenger = function() {
                var t = function() {
                        var t;
                        do {
                            t = Math.floor(1e6 * Math.random())
                        } while (E[t]);
                        return E[t] = !0, t
                    }(),
                    e = new P,
                    n = new x(t, this.hostId, new A(e, this.host));
                return this.onCreationObserver.notify(t, e, n), n
            }, t
        }(),
        R = function() {
            function t(t, e, n) {
                this.listener = t, this.applicationKey = e, this.origin = n
            }
            return t.prototype.notify = function(t, e, n) {
                this.listener.onConnectionReceived(this.applicationKey, this.origin, {
                    id: t,
                    node: e,
                    messenger: n
                })
            }, t
        }();
    ! function(t) {
        t.ACTION = "postmessage.action", t.SUBSCRIBE = "postmessage.subscribe", t.UNSUBSCRIBE = "postmessage.unsubscribe", t.OBSERVE = "postmessage.observe", t.UNOBSERVE = "postmessage.unobserve"
    }(S || (S = {})),
    function(t) {
        t.EVENT = "postmessage.event", t.RESPONSE = "postmessage.response", t.OBSERVATION = "postmessage.observation"
    }(T || (T = {}));
    var D = function() {
            function t(t, e) {
                this.receiver = t, this.clientId = e, this.messageType = S.ACTION
            }
            return t.prototype.notify = function(t) {
                this.receiver.receiveAction(t, this.clientId)
            }, t
        }(),
        I = function() {
            function t(t, e) {
                this.listener = t, this.clientId = e, this.messageType = S.SUBSCRIBE
            }
            return t.prototype.notify = function(t) {
                this.listener.receiveSubscription(t, this.clientId)
            }, t
        }(),
        C = function() {
            function t(t, e) {
                this.listener = t, this.clientId = e, this.messageType = S.UNSUBSCRIBE
            }
            return t.prototype.notify = function(t) {
                this.listener.receiveUnsubscription(t, this.clientId)
            }, t
        }(),
        N = function() {
            function t(t, e) {
                this.listener = t, this.clientId = e, this.messageType = S.OBSERVE
            }
            return t.prototype.notify = function(t) {
                this.listener.receiveObserve(t, this.clientId)
            }, t
        }(),
        U = function() {
            function t(t, e) {
                this.listener = t, this.clientId = e, this.messageType = S.UNOBSERVE
            }
            return t.prototype.notify = function(t) {
                this.listener.receiveUnobserve(t, this.clientId)
            }, t
        }(),
        j = function(t, e, n, r) {
            this.type = T.RESPONSE, this.payload = {
                uid: t,
                message: e,
                success: n,
                error: r
            }
        },
        k = function(t, e) {
            this.type = T.EVENT, this.payload = {
                eventType: t,
                eventData: e
            }
        },
        F = function(t, e) {
            this.type = T.OBSERVATION, this.payload = {
                observableKey: t,
                observableData: e
            }
        },
        B = function() {
            return (B = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        G = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        z = function() {
            function t() {
                this.hostId = Math.floor(1e6 * Math.random()), this.host = new P, this.clientConnections = {}, this.clientSubscriptions = new b, this.facade = new t.DirectMessageHostFacade(this)
            }
            return t.prototype.createFactory = function(t, e) {
                var n = new R(this.facade, t, e);
                return new L(this.hostId, this.host, n)
            }, t.prototype.broadcastEvent = function(t, e, n) {
                var r, i;
                void 0 === n && (n = !0);
                var o = this.clientSubscriptions.getValuesAtKey(t);
                if (o || n) try {
                    for (var a = G(o), s = a.next(); !s.done; s = a.next()) {
                        var u = s.value;
                        this.clientConnections[u].hostToClient.send(new k(t, e || []))
                    }
                } catch (t) {
                    r = {
                        error: t
                    }
                } finally {
                    try {
                        s && !s.done && (i = a.return) && i.call(a)
                    } finally {
                        if (r) throw r.error
                    }
                }
            }, t.prototype.broadcastObservationToClient = function(t, e, n) {
                var r = this.clientConnections[t];
                r && r.hostToClient.send(new F(e, n))
            }, t.prototype.onCallReceived = function(t) {
                this.functionCallcallback = t
            }, t.prototype.onSubscribeReceived = function(t) {
                this.subscribeCallback = t
            }, t.prototype.onUnsubscribeReceived = function(t) {
                this.unsubscribeCallback = t
            }, t.prototype.onObserveReceived = function(t) {
                this.observeCallback = t
            }, t.prototype.onUnobserveReceived = function(t) {
                this.unobserveCallback = t
            }, t.prototype.createHostToClientConnection = function(e, n) {
                var r = new x(this.hostId, e, new A(this.host, n)),
                    i = new t.DirectMessageHostFacade(this);
                return r.addObserver(new D(i, e)), r.addObserver(new I(i, e)), r.addObserver(new C(i, e)), r.addObserver(new N(i, e)), r.addObserver(new U(i, e)), r.init(), r
            }, t.prototype.onConnectionReceived = function(t, e, n) {
                var r = n.id,
                    i = this.createHostToClientConnection(r, n.node);
                this.clientConnections[r] = {
                    id: r,
                    clientToHost: n.messenger,
                    hostToClient: i,
                    applicationKey: t,
                    origin: e
                }
            }, t.prototype.receiveAction = function(t, e) {
                var n = this.clientConnections[e];
                if (n) {
                    this.functionCallcallback && this.functionCallcallback(B({}, t, {
                        type: s.ACTION,
                        onSuccess: function(e) {
                            n.hostToClient.send(new j(t.uid, e, !0, ""))
                        },
                        onFail: function(e) {
                            n.hostToClient.send(new j(t.uid, {}, !1, e))
                        },
                        fromId: e,
                        applicationKey: n.applicationKey,
                        origin: n.origin,
                        method: r.DIRECT,
                        source: void 0
                    }))
                }
            }, t.prototype.receiveSubscription = function(t, e) {
                var n = this.clientConnections[e];
                n && this.subscribeCallback && (this.clientSubscriptions.add(t.subscription, e), this.subscribeCallback(this.createBridgedMessage(s.SUBSCRIBE, t, n)))
            }, t.prototype.receiveUnsubscription = function(t, e) {
                var n = this.clientConnections[e];
                n && this.unsubscribeCallback && (this.clientSubscriptions.remove(t.subscription, e), this.unsubscribeCallback(this.createBridgedMessage(s.UNSUBSCRIBE, t, n)))
            }, t.prototype.receiveObserve = function(t, e) {
                var n = this.clientConnections[e];
                n && this.observeCallback && this.observeCallback(this.createBridgedMessage(s.OBSERVE, t, n))
            }, t.prototype.receiveUnobserve = function(t, e) {
                var n = this.clientConnections[e];
                n && this.unobserveCallback && this.unobserveCallback(this.createBridgedMessage(s.UNOBSERVE, t, n))
            }, t.prototype.createBridgedMessage = function(t, e, n) {
                return B({}, e, {
                    fromId: n.id,
                    uid: -1,
                    type: t,
                    applicationKey: n.applicationKey,
                    origin: n.origin,
                    method: r.DIRECT,
                    source: void 0
                })
            }, t.DirectMessageHostFacade = function() {
                function t(t) {
                    this.directMessageHost = t
                }
                return t.prototype.onConnectionReceived = function(t, e, n) {
                    this.directMessageHost.onConnectionReceived(t, e, n)
                }, t.prototype.receiveAction = function(t, e) {
                    this.directMessageHost.receiveAction(t, e)
                }, t.prototype.receiveSubscription = function(t, e) {
                    this.directMessageHost.receiveSubscription(t, e)
                }, t.prototype.receiveUnsubscription = function(t, e) {
                    this.directMessageHost.receiveUnsubscription(t, e)
                }, t.prototype.receiveObserve = function(t, e) {
                    this.directMessageHost.receiveObserve(t, e)
                }, t.prototype.receiveUnobserve = function(t, e) {
                    this.directMessageHost.receiveUnobserve(t, e)
                }, t
            }(), t
        }(),
        H = n(248),
        V = n(33),
        W = n(119),
        X = n(25),
        q = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        Y = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "sdk", e.applicationKey = null, e.requestedVersion = null, e
            }
            return q(e, t), e.prototype.copy = function(t) {
                this.applicationKey = t.applicationKey, this.requestedVersion = t.requestedVersion
            }, e
        }(X.a);
    n.d(e, "setupSdk", (function() {
        return nt
    }));
    var K = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        Z = function() {
            return (Z = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        Q = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        J = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        $ = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        tt = new f.a("sdk"),
        et = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "sdk", e.clientInterface = {
                    functions: {},
                    enums: {},
                    observables: {}
                }, e.valueToClientInterface = {}, e.commandCreators = {}, e.observables = {}, e.registeredEventUsers = {}, e.registeredObservers = {}, e
            }
            return K(e, t), e.prototype.init = function(t, e) {
                return Q(this, void 0, void 0, (function() {
                    var n;
                    return J(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return this.validationUrl = t.validationUrl, this.postMessageHost = new y(window), this.directMessageHost = new z, n = this, [4, e.getModule(W.default)];
                            case 1:
                                return n.analytics = r.sent(), this.clientFilter = t.clientFilter || function() {
                                    return !0
                                }, this.issueCommand = e.commandBinder.issueCommand.bind(e.commandBinder), this.interfacePromise = new V.a, this.clientScriptUrl = t.clientScriptUrl, this.requestQueue = t.queue, this.data = new Y, e.market.register(this, Y, this.data), [2]
                        }
                    }))
                }))
            }, e.prototype.connect = function(t, e, n) {
                return Q(this, void 0, Promise, (function() {
                    var i = this;
                    return J(this, (function(o) {
                        return [2, new Promise((function(o, a) {
                            i.onConnectionReceived({
                                accept: function(r, a, s) {
                                    o({
                                        scriptUrl: r,
                                        serializedInterface: a,
                                        messengerFactory: i.directMessageHost.createFactory(t, n),
                                        warning: s
                                    }), i.data.atomic((function() {
                                        i.data.applicationKey = t, i.data.requestedVersion = e
                                    }))
                                },
                                reject: function(t) {
                                    return a(t)
                                },
                                handshake: function() {},
                                applicationKey: t,
                                origin: n,
                                requestedVersion: e,
                                method: r.DIRECT
                            })
                        }))]
                    }))
                }))
            }, e.prototype.enableHandshaking = function() {
                var t = this;
                this.postMessageHost.on(l.CONNECTION, (function(e) {
                    return t.onConnectionReceived(e)
                }))
            }, e.prototype.acceptConnections = function() {
                var t = this;
                this.postMessageHost.on(l.MESSAGED, (function(e) {
                    return t.onMessageReceived(e)
                })), this.postMessageHost.on(l.SUBSCRIBED, (function(e) {
                    return t.onSubscribeReceived(e)
                })), this.postMessageHost.on(l.UNSUBSCRIBED, (function(e) {
                    return t.onUnsubscribeReceived(e)
                })), this.postMessageHost.on(l.OBSERVE, (function(e) {
                    return t.onObserveReceived(e)
                })), this.postMessageHost.on(l.UNOBSERVE, (function(e) {
                    return t.onUnobserveReceived(e)
                })), this.directMessageHost.onCallReceived((function(e) {
                    return t.onMessageReceived(e)
                })), this.directMessageHost.onSubscribeReceived((function(e) {
                    return t.onSubscribeReceived(e)
                })), this.directMessageHost.onUnsubscribeReceived((function(e) {
                    return t.onUnsubscribeReceived(e)
                })), this.directMessageHost.onObserveReceived((function(e) {
                    return t.onObserveReceived(e)
                })), this.directMessageHost.onUnobserveReceived((function(e) {
                    return t.onUnobserveReceived(e)
                })), this.interfacePromise.resolve()
            }, e.prototype.clearInterface = function() {
                this.clientInterface.functions = {}, this.clientInterface.enums = {}, this.commandCreators = {}
            }, e.prototype.addCommandToInterface = function(t, e) {
                var n = this.getInterfaceIndex(t);
                this.clientInterface.functions.hasOwnProperty(n) && tt.debug("Overwriting " + n + " function in sdk interface"), this.clientInterface.functions[n] = t, this.commandCreators[n] = e, t.namespace || (this.clientInterface.functions[t.name] = t, this.commandCreators[t.name] = e)
            }, e.prototype.addEnumToInterface = function(t) {
                var e = this.getInterfaceIndex(t);
                if (this.clientInterface.functions.hasOwnProperty(e) && tt.debug("Overwriting " + e + " enum in sdk interface"), this.clientInterface.enums[e] = Z({}, t, {
                        values: Z({}, t.values)
                    }), "Event" === t.name) {
                    var n = Object.keys(t.values);
                    for (var r in n) {
                        this.valueToClientInterface;
                        var i = t.values[n[r]];
                        this.valueToClientInterface.hasOwnProperty(i) ? tt.warn("Duplicate event detected for " + JSON.stringify(t)) : this.valueToClientInterface[i] = t
                    }
                }
            }, e.prototype.addObservableToInterface = function(t, e) {
                var n = this.getInterfaceIndex(t);
                this.clientInterface.functions.hasOwnProperty(n) && tt.debug("Overwriting " + n + " observable in sdk interface"), this.clientInterface.observables[n] = Z({}, t), this.observables[n] = e
            }, e.prototype.getInterfaceIndex = function(t) {
                var e = t.name + "." + t.version;
                return t.namespace && (e = t.namespace + "." + e), e
            }, e.prototype.broadcast = function(t, e, n, r) {
                void 0 === r && (r = !0);
                var i = this.registeredEventUsers[t] > 0;
                (r || i) && (e ? void 0 !== n ? (this.postMessageHost.broadcastEvent(t, e(n), r), this.directMessageHost.broadcastEvent(t, e(n), r)) : (this.postMessageHost.broadcastEvent(t, e(), r), this.directMessageHost.broadcastEvent(t, e(), r)) : (this.postMessageHost.broadcastEvent(t, void 0, r), this.directMessageHost.broadcastEvent(t, void 0, r)))
            }, e.prototype.notify = function(t, e, n) {
                this.postMessageHost.broadcastObservationToClient(t, e, n), this.directMessageHost.broadcastObservationToClient(t, e, n)
            }, e.prototype.makeVersionedInterface = function(t) {
                H.valid(t) || (t += ".0");
                var e = function(e) {
                    var n, r, i = {};
                    try {
                        for (var o = $(Object.keys(e)), a = o.next(); !a.done; a = o.next()) {
                            var s = a.value,
                                u = e[s];
                            H.satisfies(t, "^" + u.version) && (i[s] = u)
                        }
                    } catch (t) {
                        n = {
                            error: t
                        }
                    } finally {
                        try {
                            a && !a.done && (r = o.return) && r.call(o)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                    return i
                };
                return {
                    enums: e(this.clientInterface.enums),
                    functions: e(this.clientInterface.functions),
                    observables: e(this.clientInterface.observables)
                }
            }, e.prototype.onConnectionReceived = function(t) {
                return Q(this, void 0, void 0, (function() {
                    var e, n, r = this;
                    return J(this, (function(i) {
                        switch (i.label) {
                            case 0:
                                if (!this.clientFilter(t)) return [2, t.reject("Connection refused")];
                                i.label = 1;
                            case 1:
                                return i.trys.push([1, 3, , 4]), [4, this.verifyConnection(t)];
                            case 2:
                                return i.sent(), [3, 4];
                            case 3:
                                return i.sent(), [2, t.reject("key/referrer mismatch")];
                            case 4:
                                return e = t.requestedVersion, n = function(n) {
                                    var i = r.makeVersionedInterface(e);
                                    if (0 === Object.keys(i.enums).length && 0 === Object.keys(i.functions).length) return t.reject("unsupported version: " + e);
                                    r.trackSdkConnect(t), t.accept(r.clientScriptUrl, i, n)
                                }, t.handshake(), this.interfacePromise.then((function() {
                                    return n()
                                })), [2]
                        }
                    }))
                }))
            }, e.prototype.verifyConnection = function(t) {
                var e = {
                    cache: !1,
                    headers: {
                        "X-Matterport-Application-Key": t.applicationKey,
                        "X-Matterport-Referrer": t.origin
                    }
                };
                return this.requestQueue.get(this.validationUrl, e)
            }, e.prototype.onMessageReceived = function(t) {
                var e = this.commandCreators[t.targetFunction];
                if (!e) return t.onFail(t.targetFunction + " is not a valid command");
                this.trackSdkCall(t);
                try {
                    return this.issueCommand(e(t.params)).then(t.onSuccess, (function(e) {
                        return t.onFail(e.message)
                    }))
                } catch (e) {
                    return tt.debug(e), t.onFail(e.message)
                }
            }, e.prototype.onSubscribeReceived = function(t) {
                this.registeredEventUsers.hasOwnProperty(t.subscription) || (this.registeredEventUsers[t.subscription] = 0), this.registeredEventUsers[t.subscription]++, this.trackSdkEvent(l.SUBSCRIBED, t)
            }, e.prototype.onUnsubscribeReceived = function(t) {
                this.registeredEventUsers.hasOwnProperty(t.subscription) && (this.trackSdkEvent(l.UNSUBSCRIBED, t), this.registeredEventUsers[t.subscription]--)
            }, e.prototype.onObserveReceived = function(t) {
                return Q(this, void 0, void 0, (function() {
                    var e, n, r, i, o = this;
                    return J(this, (function(a) {
                        switch (a.label) {
                            case 0:
                                return e = t.fromId, n = t.observableKey, (r = this.observables[n]) ? [4, r] : [3, 2];
                            case 1:
                                i = a.sent(), this.registeredObservers[e] = this.registeredObservers[e] || {}, void 0 === this.registeredObservers[e][n] && (this.registeredObservers[e][n] = i.subscribe((function() {
                                    return o.notify(e, n, i.getData())
                                })), this.trackClientSubscribe(l.OBSERVE, t)), this.notify(e, n, i.getData()), a.label = 2;
                            case 2:
                                return [2]
                        }
                    }))
                }))
            }, e.prototype.onUnobserveReceived = function(t) {
                var e = t.fromId,
                    n = t.observableKey;
                this.registeredObservers[e] && this.registeredObservers[e][n] && (this.registeredObservers[e][n].cancel(), delete this.registeredObservers[e][n], this.trackClientSubscribe(l.UNOBSERVE, t))
            }, e.prototype.trackSdkEvent = function(t, e) {
                if (this.analytics) {
                    var n = t === l.SUBSCRIBED ? "on" : "off",
                        r = this.valueToClientInterface[e.subscription];
                    if (r) {
                        var i = Object.keys(r.values),
                            o = i.find((function(t, n) {
                                var o = i[n];
                                return r.values[o] === e.subscription
                            }));
                        if (o) {
                            var a = {
                                origin: e.origin,
                                applicationKey: e.applicationKey,
                                version: r.version,
                                name: n,
                                namespace: r.namespace,
                                eventType: o,
                                count: this.registeredEventUsers[e.subscription],
                                method: e.method
                            };
                            this.analytics.track("sdk_event", a)
                        }
                    }
                }
            }, e.prototype.trackSdkConnect = function(t) {
                if (this.analytics) {
                    var e = {
                        origin: t.origin,
                        applicationKey: t.applicationKey,
                        version: t.requestedVersion,
                        method: t.method
                    };
                    this.analytics.track("sdk_connect", e)
                }
            }, e.prototype.trackSdkCall = function(t) {
                if (this.analytics) {
                    var e = this.clientInterface.functions[t.targetFunction],
                        n = Object.keys(t.params).map((function(e) {
                            return t.params[e]
                        })),
                        r = Z({
                            origin: t.origin,
                            applicationKey: t.applicationKey
                        }, e, {
                            args: n,
                            method: t.method
                        });
                    this.analytics.track("sdk_call", r)
                }
            }, e.prototype.trackClientSubscribe = function(t, e) {
                var n = t === l.OBSERVE,
                    r = this.clientInterface.observables[e.observableKey],
                    i = Z({
                        origin: e.origin,
                        applicationKey: e.applicationKey
                    }, r, {
                        action: n ? "subscribe" : "cancel",
                        method: e.method
                    });
                this.analytics.track("sdk_subscribe", i)
            }, e
        }(i.a),
        nt = (e.default = et, function(t, e) {
            return Q(void 0, void 0, void 0, (function() {
                var n, r = this;
                return J(this, (function(i) {
                    switch (i.label) {
                        case 0:
                            return [4, t.waitForModule(et)];
                        case 1:
                            return (n = i.sent()).enableHandshaking(), [4, Promise.all(e.map((function(e) {
                                return Q(r, void 0, void 0, (function() {
                                    return J(this, (function(r) {
                                        switch (r.label) {
                                            case 0:
                                                return [4, e(t, n)];
                                            case 1:
                                                return r.sent(), [2]
                                        }
                                    }))
                                }))
                            })))];
                        case 2:
                            return i.sent(), n.acceptConnections(), [2]
                    }
                }))
            }))
        })
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r = n(7),
        i = n(17),
        o = n(1);

    function a() {
        i.a.call(this), this.type = "Camera", this.matrixWorldInverse = new r.a, this.projectionMatrix = new r.a, this.projectionMatrixInverse = new r.a
    }
    a.prototype = Object.assign(Object.create(i.a.prototype), {
        constructor: a,
        isCamera: !0,
        copy: function(t, e) {
            return i.a.prototype.copy.call(this, t, e), this.matrixWorldInverse.copy(t.matrixWorldInverse), this.projectionMatrix.copy(t.projectionMatrix), this.projectionMatrixInverse.copy(t.projectionMatrixInverse), this
        },
        getWorldDirection: function(t) {
            void 0 === t && (console.warn("THREE.Camera: .getWorldDirection() target is now required"), t = new o.a), this.updateMatrixWorld(!0);
            var e = this.matrixWorld.elements;
            return t.set(-e[8], -e[9], -e[10]).normalize()
        },
        updateMatrixWorld: function(t) {
            i.a.prototype.updateMatrixWorld.call(this, t), this.matrixWorldInverse.getInverse(this.matrixWorld)
        },
        clone: function() {
            return (new this.constructor).copy(this)
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "c", (function() {
        return a
    })), n.d(e, "a", (function() {
        return s
    })), n.d(e, "b", (function() {
        return u
    }));
    var r, i = n(124),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e) {
                return t.call(this, e) || this
            }
            return o(e, t), e
        }(i.a),
        s = function(t) {
            function e(e) {
                return t.call(this, e) || this
            }
            return o(e, t), e
        }(i.a),
        u = function(t) {
            function e(e) {
                return t.call(this, e) || this
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    })), n.d(e, "b", (function() {
        return u
    })), n.d(e, "c", (function() {
        return c
    }));
    var r, i = n(164),
        o = n(105),
        a = n(43),
        s = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        };
    ! function(t) {
        t.added = "added", t.removed = "removed", t.updated = "updated"
    }(r || (r = {}));
    var u = function(t, e, n) {
            this.index = t, this.action = e, this.diff = n
        },
        c = function() {
            function t(t, e) {
                if (this.changedHandlers = [], this.awaitingInvoke = !1, this.diffRecord = [], this.targetMonitors = {}, this.triggerChangeHandlers = this.invokeChangeHandlers.bind(this), this.config = t, this.updatePhaseSync = e, this.config.aggregationType === o.a.NextFrame) {
                    if (!e) throw Error("UpdatePhaseSync required for NextFrame aggregation")
                } else if (this.config.aggregationType === o.a.Duration) throw Error("Aggregation Type not implemented")
            }
            return t.prototype.hasDiffRecord = function() {
                return this.diffRecord.length > 0
            }, t.prototype.clearDiffRecord = function() {
                for (var t in this.diffRecord = [], this.targetMonitors) {
                    var e = this.targetMonitors[t];
                    e.hasDiffRecord() && e.clearDiffRecord()
                }
            }, t.prototype.onChanged = function(t) {
                this.changedHandlers.push(t)
            }, t.prototype.removeOnChanged = function(t) {
                Object(i.a)(this.changedHandlers, t)
            }, t.prototype.invokeCallbacks = function(t) {
                var e, n;
                if (this.changedHandlers.length > 0) try {
                    for (var r = s(this.changedHandlers), i = r.next(); !i.done; i = r.next()) {
                        (0, i.value)(t)
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        i && !i.done && (n = r.return) && n.call(r)
                    } finally {
                        if (e) throw e.error
                    }
                }
            }, t.prototype.invokeChangeHandlers = function(t) {
                var e = this;
                switch (this.config.aggregationType) {
                    case o.a.Immediate:
                        this.invokeCallbacks(t);
                        break;
                    case o.a.NextFrame:
                        this.awaitingInvoke || (this.awaitingInvoke = !0, this.updatePhaseSync.after(a.a.End).then((function() {
                            e.awaitingInvoke = !1, e.invokeCallbacks(t)
                        })));
                        break;
                    case o.a.Manual:
                }
            }, t
        }()
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return a
    })), n.d(e, "d", (function() {
        return h
    })), n.d(e, "c", (function() {
        return f
    })), n.d(e, "a", (function() {
        return p
    }));
    var r, i, o, a, s = n(21),
        u = n(20),
        c = n(62),
        l = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        });
    ! function(t) {
        t.INSIDE = "mode.inside", t.OUTSIDE = "mode.outside", t.DOLLHOUSE = "mode.dollhouse", t.FLOORPLAN = "mode.floorplan", t.TRANSITIONING = "mode.transitioning"
    }(a || (a = {}));
    (i = {})[a.INSIDE] = u.a.Panorama, i[a.DOLLHOUSE] = u.a.Dollhouse, i[a.FLOORPLAN] = u.a.Floorplan, i[a.TRANSITIONING] = u.a.Transition, i[a.OUTSIDE] = u.a.Outdoor;
    var h = ((o = {})[u.a.Panorama] = a.INSIDE, o[u.a.Dollhouse] = a.DOLLHOUSE, o[u.a.Floorplan] = a.FLOORPLAN, o[u.a.Transition] = a.TRANSITIONING, o[u.a.Outdoor] = a.OUTSIDE, o),
        f = function(t) {
            var e = h[t];
            return void 0 !== e ? e : a.OUTSIDE
        },
        p = function(t) {
            function e(e, n, r) {
                void 0 === n && (n = c.a.Interpolate), void 0 === r && (r = {});
                var i = t.call(this) || this;
                return i.payload = {
                    mode: e,
                    transitionType: n,
                    pose: r
                }, i
            }
            return l(e, t), e.id = "CHANGE_VIEWMODE", e
        }(s.a)
}, function(t, e, n) {
    var r = n(147);
    t.exports = !r((function() {
        return 7 != Object.defineProperty({}, "a", {
            get: function() {
                return 7
            }
        }).a
    }))
}, function(t, e, n) {
    "use strict";
    var r = n(236),
        i = n(295),
        o = n(383),
        a = n(237);
    (t.exports = function(t, e) {
        var n, o, s, u, c;
        return arguments.length < 2 || "string" != typeof t ? (u = e, e = t, t = null) : u = arguments[2], null == t ? (n = s = !0, o = !1) : (n = a.call(t, "c"), o = a.call(t, "e"), s = a.call(t, "w")), c = {
            value: e,
            configurable: n,
            enumerable: o,
            writable: s
        }, u ? r(i(u), c) : c
    }).gs = function(t, e, n) {
        var s, u, c, l;
        return "string" != typeof t ? (c = n, n = e, e = t, t = null) : c = arguments[3], null == e ? e = void 0 : o(e) ? null == n ? n = void 0 : o(n) || (c = n, n = void 0) : (c = e, e = n = void 0), null == t ? (s = !0, u = !1) : (s = a.call(t, "c"), u = a.call(t, "e")), l = {
            get: e,
            set: n,
            configurable: s,
            enumerable: u
        }, c ? r(i(c), l) : l
    }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    })), n.d(e, "b", (function() {
        return i
    })), n.d(e, "c", (function() {
        return o
    }));
    var r = function(t) {
            return .3048 * t
        },
        i = function(t) {
            return t / .3048
        },
        o = function(t) {
            var e = t / .3048,
                n = Math.floor(e),
                r = 12 * e % 12;
            return 12 === Math.round(r) ? (n += 1, r = 0) : r = Math.round(r), {
                feet: n,
                inches: r
            }
        }
}, function(t, e) {
    t.exports = "precision highp float;\nprecision highp int;\n\nuniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"
}, function(t, e) {
    t.exports = "precision highp float;\nprecision highp int;\n\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n"
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i, o;
    Object.defineProperty(e, "__esModule", {
            value: !0
        }),
        function(t) {
            t[t.LOW = 0] = "LOW", t[t.MEDIUM = 1] = "MEDIUM", t[t.HIGH = 2] = "HIGH", t[t.HIGHEST = 3] = "HIGHEST"
        }(i = e.RequestPriority || (e.RequestPriority = {})),
        function(t) {
            t[t.PENDING = 0] = "PENDING", t[t.SENDING = 1] = "SENDING", t[t.FAILED = 2] = "FAILED", t[t.DONE = 3] = "DONE"
        }(o = e.RequestStatus || (e.RequestStatus = {}));
    var a = function() {
        function t(t) {
            var e = void 0 === t ? {} : t,
                n = e.retries,
                r = void 0 === n ? 3 : n,
                i = e.concurrency,
                o = void 0 === i ? 6 : i;
            this.queue = [], this.retries = r, this.concurrency = o
        }
        return t.prototype.get = function(t, e) {
            return this.request("GET", t, e)
        }, t.prototype.head = function(t, e) {
            return this.request("HEAD", t, e)
        }, t.prototype.options = function(t, e) {
            return this.request("OPTIONS", t, e)
        }, t.prototype.post = function(t, e) {
            return this.request("POST", t, e)
        }, t.prototype.put = function(t, e) {
            return this.request("PUT", t, e)
        }, t.prototype.patch = function(t, e) {
            return this.request("PATCH", t, e)
        }, t.prototype.delete = function(t, e) {
            return this.request("DELETE", t, e)
        }, t.prototype.request = function(t, e, n) {
            var r = new s(t, e, n);
            return this.enqueue(r), r.promise
        }, t.prototype.update = function() {
            for (var t; t = this.getNextPendingRequest();) this.sendRequest(t);
            for (; t = this.getNextOverflowingRequest();) t.abort(), t.status = o.PENDING;
            this.updateTimeout = null
        }, t.prototype.enqueue = function(t) {
            var e = this,
                n = 0;
            for (n = 0; n < this.queue.length; n++) {
                if (this.queue[n].priority < t.priority) break
            }
            this.queue.splice(n, 0, t), this.updateTimeout || (this.updateTimeout = window.setTimeout((function() {
                e.update()
            }), 1))
        }, t.prototype.dequeue = function(t) {
            var e = this.queue.indexOf(t);
            if (-1 === e) throw new Error("Can't dequeue request not in queue");
            this.queue.splice(e, 1), this.update()
        }, t.prototype.getNextPendingRequest = function() {
            for (var t = 0; t < this.queue.length && t < this.concurrency; t++) {
                var e = this.queue[t];
                if (e.status === o.PENDING) return e
            }
            return null
        }, t.prototype.getNextOverflowingRequest = function() {
            for (var t = this.concurrency; t < this.queue.length; t++) {
                var e = this.queue[t];
                if (e.status === o.SENDING && e.priority !== i.HIGHEST) return e
            }
            return null
        }, t.prototype.sendRequest = function(t) {
            var e = this;
            t.status = o.SENDING, t.send().then((function(n) {
                t.status = o.DONE, e.dequeue(t), t.onDone(n)
            })).catch((function(n) {
                var r = null !== t.maxRetries ? t.maxRetries : e.retries;
                t.sendAttempts < r ? (t.status = o.PENDING, e.update(), console.warn("Retried " + t.url), console.warn(n)) : (t.status = o.FAILED, e.dequeue(t), console.warn("Failed " + t.url), t.onFail(n))
            }))
        }, t
    }();
    e.RequestQueue = a;
    var s = function() {
        function t(t, e, n) {
            void 0 === n && (n = {});
            var r = this;
            this.sendAttempts = 0, this.status = o.PENDING, this.url = e, this.method = t, this.auth = n.auth || null, this.priority = n.priority || i.MEDIUM, this.responseType = n.responseType || null, this.body = n.body || null, this.headers = n.headers || {}, this.maxRetries = n.maxRetries || null, this.onProgress = n.onProgress, this.promise = new Promise((function(t, e) {
                r.onDone = t, r.onFail = e
            }))
        }
        return t.prototype.send = function() {
            var t = this,
                e = this.xhr = function(t, e, n) {
                    var r;
                    if ("undefined" != typeof XMLHttpRequest)(r = new XMLHttpRequest).withCredentials = n;
                    else {
                        if ("undefined" == typeof XDomainRequest) throw new Error("No XMLHTTPRequest or XDomainRequest... are you trying to run me in node? :(");
                        r = new XDomainRequest
                    }
                    return r.open(t, e, !0), r
                }(this.method, this.url, !1);
            if (this.responseType)
                if ("arraybuffer" === this.responseType || "text" === this.responseType || "json" === this.responseType || "blob" === this.responseType) e.responseType = this.responseType;
                else {
                    if ("image" !== this.responseType) throw new Error('reponseType can only be one of "arraybuffer", "text", "json", "blob", "image"');
                    e.responseType = "blob"
                }
            for (var n in "json" === this.responseType && e.setRequestHeader("Accept", "application/json"), this.auth && "string" == typeof this.auth && e.setRequestHeader("Authorization", this.auth), this.headers) e.setRequestHeader(n, this.headers[n]);
            return this.body && "object" === r(this.body) && (this.body instanceof FormData || (this.body = JSON.stringify(this.body), e.setRequestHeader("Content-Type", "application/json"))), this.onProgress && (e.onprogress = this.onProgress), new Promise((function(n, r) {
                e.onreadystatechange = function(i) {
                    if (4 === e.readyState) {
                        if (200 === e.status || 201 === e.status || 204 === e.status) return t.parseResponse(t.xhr).then((function(t) {
                            n(t)
                        }));
                        0 !== e.status && r({
                            status_code: e.status
                        })
                    }
                }, e.onerror = function(t) {
                    r(t)
                }, e.send(t.body), t.sendAttempts++
            }))
        }, t.prototype.parseResponse = function(t) {
            var e = this;
            return new Promise((function(n, i) {
                try {
                    var o = t.response;
                    if ("json" === e.responseType && "object" !== r(o)) n(JSON.parse(t.responseText));
                    else if ("image" === e.responseType) {
                        var a = URL.createObjectURL(o);
                        (o = new Image).src = a, o.crossOrigin = "Anonymous", o.onload = function() {
                            URL.revokeObjectURL(a), n(o)
                        }
                    } else n(o)
                } catch (t) {
                    i({
                        error: "Payload was not valid JSON"
                    })
                }
            }))
        }, t.prototype.abort = function() {
            if (null === this.xhr) throw new Error("Cannot abort unsent Request");
            this.xhr.abort()
        }, t
    }();
    e.Request = s
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    })), n.d(e, "b", (function() {
        return s
    }));
    var r, i = n(52),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.position = e, r.buttons = n, r
            }
            return o(e, t), e
        }(i.a),
        s = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.position = e, r.button = n, r
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return v
    }));
    var r = n(49),
        i = n(76),
        o = n(7),
        a = n(17),
        s = n(1),
        u = n(107),
        c = n(24),
        l = n(12),
        h = new s.a,
        f = new s.a,
        p = new o.a,
        d = new i.a,
        m = new r.a;

    function v(t, e, n) {
        1 === n && console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."), a.a.call(this), this.type = "Line", this.geometry = void 0 !== t ? t : new c.a, this.material = void 0 !== e ? e : new u.a({
            color: 16777215 * Math.random()
        })
    }
    v.prototype = Object.assign(Object.create(a.a.prototype), {
        constructor: v,
        isLine: !0,
        computeLineDistances: function() {
            var t = this.geometry;
            if (t.isBufferGeometry)
                if (null === t.index) {
                    for (var e = t.attributes.position, n = [0], r = 1, i = e.count; r < i; r++) h.fromBufferAttribute(e, r - 1), f.fromBufferAttribute(e, r), n[r] = n[r - 1], n[r] += h.distanceTo(f);
                    t.setAttribute("lineDistance", new l.b(n, 1))
                } else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
            else if (t.isGeometry) {
                var o = t.vertices;
                (n = t.lineDistances)[0] = 0;
                for (r = 1, i = o.length; r < i; r++) n[r] = n[r - 1], n[r] += o[r - 1].distanceTo(o[r])
            }
            return this
        },
        raycast: function(t, e) {
            var n = t.linePrecision,
                r = this.geometry,
                i = this.matrixWorld;
            if (null === r.boundingSphere && r.computeBoundingSphere(), m.copy(r.boundingSphere), m.applyMatrix4(i), m.radius += n, !1 !== t.ray.intersectsSphere(m)) {
                p.getInverse(i), d.copy(t.ray).applyMatrix4(p);
                var o = n / ((this.scale.x + this.scale.y + this.scale.z) / 3),
                    a = o * o,
                    u = new s.a,
                    c = new s.a,
                    l = new s.a,
                    h = new s.a,
                    f = this && this.isLineSegments ? 2 : 1;
                if (r.isBufferGeometry) {
                    var v = r.index,
                        y = r.attributes.position.array;
                    if (null !== v)
                        for (var g = v.array, b = 0, _ = g.length - 1; b < _; b += f) {
                            var w = g[b],
                                x = g[b + 1];
                            if (u.fromArray(y, 3 * w), c.fromArray(y, 3 * x), !(d.distanceSqToSegment(u, c, h, l) > a)) h.applyMatrix4(this.matrixWorld), (T = t.ray.origin.distanceTo(h)) < t.near || T > t.far || e.push({
                                distance: T,
                                point: l.clone().applyMatrix4(this.matrixWorld),
                                index: b,
                                face: null,
                                faceIndex: null,
                                object: this
                            })
                        } else
                            for (b = 0, _ = y.length / 3 - 1; b < _; b += f) {
                                if (u.fromArray(y, 3 * b), c.fromArray(y, 3 * b + 3), !(d.distanceSqToSegment(u, c, h, l) > a)) h.applyMatrix4(this.matrixWorld), (T = t.ray.origin.distanceTo(h)) < t.near || T > t.far || e.push({
                                    distance: T,
                                    point: l.clone().applyMatrix4(this.matrixWorld),
                                    index: b,
                                    face: null,
                                    faceIndex: null,
                                    object: this
                                })
                            }
                } else if (r.isGeometry) {
                    var E = r.vertices,
                        S = E.length;
                    for (b = 0; b < S - 1; b += f) {
                        var T;
                        if (!(d.distanceSqToSegment(E[b], E[b + 1], h, l) > a)) h.applyMatrix4(this.matrixWorld), (T = t.ray.origin.distanceTo(h)) < t.near || T > t.far || e.push({
                            distance: T,
                            point: l.clone().applyMatrix4(this.matrixWorld),
                            index: b,
                            face: null,
                            faceIndex: null,
                            object: this
                        })
                    }
                }
            }
        },
        clone: function() {
            return new this.constructor(this.geometry, this.material).copy(this)
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return a
    })), n.d(e, "a", (function() {
        return s
    }));
    var r, i = n(25),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "pointer", e.hit = null, e
            }
            return o(e, t), e
        }(i.a),
        s = function(t, e, n) {
            this.point = t, this.object = n, this.face = {
                normal: e
            }
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return o
    })), n.d(e, "a", (function() {
        return a
    })), n.d(e, "e", (function() {
        return s
    })), n.d(e, "c", (function() {
        return u
    })), n.d(e, "d", (function() {
        return c
    })), n.d(e, "h", (function() {
        return l
    })), n.d(e, "f", (function() {
        return h
    })), n.d(e, "g", (function() {
        return f
    }));
    var r = n(6),
        i = n(14),
        o = "features/smoothertour",
        a = "features/sc2pandirection",
        s = "TourSpeed &wts",
        u = "ToursMetersPerSecond",
        c = 1.25,
        l = function(t) {
            var e = c;
            if (!isNaN(t)) {
                var n = Math.min(Math.max(.4, t), 10);
                e = Object(i.p)(n, .4, 10, .8, 3)
            }
            return e
        },
        h = function(t) {
            return Object(i.p)(t, .8, 3, .4, 10)
        },
        f = Object.freeze({
            panAtSnapshot: r.z("kb", 1),
            snapshotPanDuration: r.z("st", 3500),
            snapshotPanAngle: r.z("sspa", 35),
            walkingTourIncludeExtraPanosDistance: .4,
            walkingStageMinimumDistance: .8,
            maxWalkingSweepsBetweenSnapshots: 40,
            autoStartDelay: r.z("ts", -1)
        })
}, function(t, e, n) {
    "use strict";
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.fromSweep = n, r.toSweep = e, r.timestamp = Date.now(), r
            }
            return o(e, t), e
        }(i.a);
    e.a = a
}, function(t, e, n) {
    "use strict";
    var r, i = n(21),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = (function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            o(e, t)
        }(i.a), function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }()),
        s = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.payload = e, n
            }
            return a(e, t), e
        }(i.a),
        u = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        c = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return u(e, t), e
        }(i.a),
        l = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        h = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.payload = {
                    on: e,
                    dimWhileActive: void 0 !== n ? n : e
                }, r
            }
            return l(e, t), e
        }(i.a),
        f = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        p = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return f(e, t), e
        }(i.a),
        d = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        m = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.payload = e, n
            }
            return d(e, t), e
        }(i.a),
        v = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        y = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return v(e, t), e
        }(i.a);
    n.d(e, "a", (function() {
        return s
    })), n.d(e, "b", (function() {
        return c
    })), n.d(e, "c", (function() {
        return h
    })), n.d(e, "d", (function() {
        return p
    })), n.d(e, "e", (function() {
        return m
    })), n.d(e, "f", (function() {
        return y
    }))
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    }));
    var r = n(17);

    function i() {
        r.a.call(this), this.type = "Scene", this.background = null, this.fog = null, this.overrideMaterial = null, this.autoUpdate = !0, "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", {
            detail: this
        }))
    }
    i.prototype = Object.assign(Object.create(r.a.prototype), {
        constructor: i,
        isScene: !0,
        copy: function(t, e) {
            return r.a.prototype.copy.call(this, t, e), null !== t.background && (this.background = t.background.clone()), null !== t.fog && (this.fog = t.fog.clone()), null !== t.overrideMaterial && (this.overrideMaterial = t.overrideMaterial.clone()), this.autoUpdate = t.autoUpdate, this.matrixAutoUpdate = t.matrixAutoUpdate, this
        },
        toJSON: function(t) {
            var e = r.a.prototype.toJSON.call(this, t);
            return null !== this.background && (e.object.background = this.background.toJSON(t)), null !== this.fog && (e.object.fog = this.fog.toJSON()), e
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    })
}, function(t, e, n) {
    "use strict";
    var r;
    n.d(e, "a", (function() {
            return r
        })),
        function(t) {
            t.Segment = "segment", t.Logging = "logging", t.Matterport = "mp"
        }(r || (r = {}))
}, function(t, e, n) {
    "use strict";
    var r;
    ! function(t) {
        t[t.GL_TEXTURE_CUBE_MAP_POSITIVE_X = 0] = "GL_TEXTURE_CUBE_MAP_POSITIVE_X", t[t.GL_TEXTURE_CUBE_MAP_NEGATIVE_X = 1] = "GL_TEXTURE_CUBE_MAP_NEGATIVE_X", t[t.GL_TEXTURE_CUBE_MAP_POSITIVE_Y = 2] = "GL_TEXTURE_CUBE_MAP_POSITIVE_Y", t[t.GL_TEXTURE_CUBE_MAP_NEGATIVE_Y = 3] = "GL_TEXTURE_CUBE_MAP_NEGATIVE_Y", t[t.GL_TEXTURE_CUBE_MAP_POSITIVE_Z = 4] = "GL_TEXTURE_CUBE_MAP_POSITIVE_Z", t[t.GL_TEXTURE_CUBE_MAP_NEGATIVE_Z = 5] = "GL_TEXTURE_CUBE_MAP_NEGATIVE_Z"
    }(r || (r = {})), e.a = r
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return m
    }));
    var r = n(1),
        i = n(57),
        o = new r.a,
        a = new r.a,
        s = new r.a,
        u = new r.a,
        c = new r.a,
        l = new r.a,
        h = new r.a,
        f = new r.a,
        p = new r.a,
        d = new r.a;

    function m(t, e, n) {
        this.a = void 0 !== t ? t : new r.a, this.b = void 0 !== e ? e : new r.a, this.c = void 0 !== n ? n : new r.a
    }
    Object.assign(m, {
        getNormal: function(t, e, n, i) {
            void 0 === i && (console.warn("THREE.Triangle: .getNormal() target is now required"), i = new r.a), i.subVectors(n, e), o.subVectors(t, e), i.cross(o);
            var a = i.lengthSq();
            return a > 0 ? i.multiplyScalar(1 / Math.sqrt(a)) : i.set(0, 0, 0)
        },
        getBarycoord: function(t, e, n, i, u) {
            o.subVectors(i, e), a.subVectors(n, e), s.subVectors(t, e);
            var c = o.dot(o),
                l = o.dot(a),
                h = o.dot(s),
                f = a.dot(a),
                p = a.dot(s),
                d = c * f - l * l;
            if (void 0 === u && (console.warn("THREE.Triangle: .getBarycoord() target is now required"), u = new r.a), 0 === d) return u.set(-2, -1, -1);
            var m = 1 / d,
                v = (f * h - l * p) * m,
                y = (c * p - l * h) * m;
            return u.set(1 - v - y, y, v)
        },
        containsPoint: function(t, e, n, r) {
            return m.getBarycoord(t, e, n, r, u), u.x >= 0 && u.y >= 0 && u.x + u.y <= 1
        },
        getUV: function(t, e, n, r, i, o, a, s) {
            return this.getBarycoord(t, e, n, r, u), s.set(0, 0), s.addScaledVector(i, u.x), s.addScaledVector(o, u.y), s.addScaledVector(a, u.z), s
        },
        isFrontFacing: function(t, e, n, r) {
            return o.subVectors(n, e), a.subVectors(t, e), o.cross(a).dot(r) < 0
        }
    }), Object.assign(m.prototype, {
        set: function(t, e, n) {
            return this.a.copy(t), this.b.copy(e), this.c.copy(n), this
        },
        setFromPointsAndIndices: function(t, e, n, r) {
            return this.a.copy(t[e]), this.b.copy(t[n]), this.c.copy(t[r]), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(t) {
            return this.a.copy(t.a), this.b.copy(t.b), this.c.copy(t.c), this
        },
        getArea: function() {
            return o.subVectors(this.c, this.b), a.subVectors(this.a, this.b), .5 * o.cross(a).length()
        },
        getMidpoint: function(t) {
            return void 0 === t && (console.warn("THREE.Triangle: .getMidpoint() target is now required"), t = new r.a), t.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3)
        },
        getNormal: function(t) {
            return m.getNormal(this.a, this.b, this.c, t)
        },
        getPlane: function(t) {
            return void 0 === t && (console.warn("THREE.Triangle: .getPlane() target is now required"), t = new i.a), t.setFromCoplanarPoints(this.a, this.b, this.c)
        },
        getBarycoord: function(t, e) {
            return m.getBarycoord(t, this.a, this.b, this.c, e)
        },
        getUV: function(t, e, n, r, i) {
            return m.getUV(t, this.a, this.b, this.c, e, n, r, i)
        },
        containsPoint: function(t) {
            return m.containsPoint(t, this.a, this.b, this.c)
        },
        isFrontFacing: function(t) {
            return m.isFrontFacing(this.a, this.b, this.c, t)
        },
        intersectsBox: function(t) {
            return t.intersectsTriangle(this)
        },
        closestPointToPoint: function(t, e) {
            void 0 === e && (console.warn("THREE.Triangle: .closestPointToPoint() target is now required"), e = new r.a);
            var n, i, o = this.a,
                a = this.b,
                s = this.c;
            c.subVectors(a, o), l.subVectors(s, o), f.subVectors(t, o);
            var u = c.dot(f),
                m = l.dot(f);
            if (u <= 0 && m <= 0) return e.copy(o);
            p.subVectors(t, a);
            var v = c.dot(p),
                y = l.dot(p);
            if (v >= 0 && y <= v) return e.copy(a);
            var g = u * y - v * m;
            if (g <= 0 && u >= 0 && v <= 0) return n = u / (u - v), e.copy(o).addScaledVector(c, n);
            d.subVectors(t, s);
            var b = c.dot(d),
                _ = l.dot(d);
            if (_ >= 0 && b <= _) return e.copy(s);
            var w = b * m - u * _;
            if (w <= 0 && m >= 0 && _ <= 0) return i = m / (m - _), e.copy(o).addScaledVector(l, i);
            var x = v * _ - b * y;
            if (x <= 0 && y - v >= 0 && b - _ >= 0) return h.subVectors(s, a), i = (y - v) / (y - v + (b - _)), e.copy(a).addScaledVector(h, i);
            var E = 1 / (x + w + g);
            return n = w * E, i = g * E, e.copy(o).addScaledVector(c, n).addScaledVector(l, i)
        },
        equals: function(t) {
            return t.a.equals(this.a) && t.b.equals(this.b) && t.c.equals(this.c)
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return r
    })), n.d(e, "a", (function() {
        return i
    })), n.d(e, "d", (function() {
        return l
    })), n.d(e, "c", (function() {
        return p
    }));
    var r, i, o = n(167);
    ! function(t) {
        t[t.RESIZE = 1] = "RESIZE", t[t.ORIENTATION_CHANGED = 2] = "ORIENTATION_CHANGED"
    }(r || (r = {})),
    function(t) {
        t[t.PORTRAIT = 1] = "PORTRAIT", t[t.LANDSCAPE = 2] = "LANDSCAPE"
    }(i || (i = {}));
    var a = [],
        s = [],
        u = {
            w: window.innerWidth,
            h: window.innerHeight
        },
        c = new o.c((function() {
            return u
        }), (function(t) {
            return a.push(t)
        }), (function(t) {
            a = a.filter((function(e) {
                return e !== t
            }))
        })),
        l = function() {
            return window.innerWidth > window.innerHeight ? i.LANDSCAPE : i.PORTRAIT
        },
        h = l(),
        f = new o.c((function() {
            return h
        }), (function(t) {
            return s.push(t)
        }), (function(t) {
            s = s.filter((function(e) {
                return e !== t
            }))
        }));

    function p(t, e) {
        switch (t) {
            case r.RESIZE:
                return c.createSubscription(e);
            case r.ORIENTATION_CHANGED:
                return f.createSubscription(e)
        }
    }
    var d, m, v = function() {
        var t = function() {
            window.clearInterval(d), window.clearTimeout(m)
        };
        t();
        var e = function() {
            u.w === window.innerWidth && u.h === window.innerHeight || (u.w = window.innerWidth, u.h = window.innerHeight, function() {
                if (a.length > 0 && a.forEach((function(t) {
                        return t(u)
                    })), s.length > 0) {
                    var t = l();
                    t !== h && (h = t, s.forEach((function(e) {
                        return e(t)
                    })))
                }
            }())
        };
        d = window.setInterval(e, 100), m = window.setTimeout(t, 1e3), e()
    };
    window.addEventListener("resize", v)
}, function(t, e) {
    t.exports = function(t) {
        try {
            return !!t()
        } catch (t) {
            return !0
        }
    }
}, function(t, e, n) {
    var r = n(273),
        i = n(275);
    t.exports = function(t) {
        return r(i(t))
    }
}, function(t, e) {
    t.exports = function(t) {
        return "object" == typeof t ? null !== t : "function" == typeof t
    }
}, function(t, e, n) {
    var r = n(130),
        i = n(276),
        o = n(169),
        a = n(229),
        s = Object.defineProperty;
    e.f = r ? s : function(t, e, n) {
        if (o(t), e = a(e, !0), o(n), i) try {
            return s(t, e, n)
        } catch (t) {}
        if ("get" in n || "set" in n) throw TypeError("Accessors not supported");
        return "value" in n && (t[e] = n.value), t
    }
}, function(t, e, n) {
    "use strict";
    var r = n(294)();
    t.exports = function(t) {
        return t !== r && null !== t
    }
}, function(t, e, n) {
    "use strict";
    var r;
    n.d(e, "a", (function() {
            return r
        })),
        function(t) {
            t[t.DOWN = 0] = "DOWN", t[t.PRESSED = 1] = "PRESSED", t[t.UP = 2] = "UP"
        }(r || (r = {}))
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(101),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n, r) {
                var i = t.call(this) || this;
                return i.key = e, i.state = n, i.modifiers = r, i
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return i
    })), n.d(e, "a", (function() {
        return o
    })), n.d(e, "c", (function() {
        return a
    }));
    var r = n(63),
        i = function(t, e) {
            if (!t || !e) return !1;
            var n = e && t.getSweep(e);
            return !!n && n.alignmentType === r.a.ALIGNED
        },
        o = function(t) {
            return i(t, t.currentSweep)
        },
        a = function(t, e) {
            switch (t) {
                case r.a.ALIGNED:
                    return 1;
                case r.a.UNALIGNED:
                    return 2
            }
            switch (e) {
                case r.b.MANUAL:
                    return 3
            }
            return 0
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    }));
    var r = n(17);

    function i() {
        r.a.call(this), this.type = "Group"
    }
    i.prototype = Object.assign(Object.create(r.a.prototype), {
        constructor: i,
        isGroup: !0
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return s
    })), n.d(e, "a", (function() {
        return u
    }));
    var r, i = n(52),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function() {
            return (a = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        s = function(t) {
            function e(e, n, r) {
                var i = t.call(this) || this;
                return i.pointerCount = e, i.position = a({}, n), i.delta = a({}, r), i
            }
            return o(e, t), e
        }(i.a),
        u = function(t) {
            function e(e, n, r, i) {
                var o = t.call(this, e, n, r) || this;
                return o.timeSinceLastMove = i, o
            }
            return o(e, t), e
        }(s)
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return a
    })), n.d(e, "a", (function() {
        return s
    }));
    var r, i = n(52),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.pinchDelta = e, n
            }
            return o(e, t), e
        }(i.a),
        s = function(t) {
            function e(e, n) {
                var r = t.call(this, e) || this;
                return r.timeSinceLastMove = n, r
            }
            return o(e, t), e
        }(a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return a
    })), n.d(e, "a", (function() {
        return s
    }));
    var r, i = n(52),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.rotateDelta = e, n
            }
            return o(e, t), e
        }(i.a),
        s = function(t) {
            function e(e, n) {
                var r = t.call(this, e) || this;
                return r.timeSinceLastMove = n, r
            }
            return o(e, t), e
        }(a)
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(4),
        o = n(15),
        a = n(66),
        s = n(3),
        u = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        c = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        l = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        h = new s.a("app-phase"),
        f = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "app-phase", e
            }
            return u(e, t), e.prototype.init = function(t, e) {
                return c(this, void 0, void 0, (function() {
                    return l(this, (function(n) {
                        return this.market = e.market, this.broadcast = e.broadcast.bind(e), this.tasks = t.tasks, this.appState = Object(o.d)(), this.appState.phase = o.a.UNINITIALIZED, this.appState.phaseTimes[o.a.UNINITIALIZED] = Date.now(), this.appState.application = o.b.SHOWCASE, this.market.register(this, o.c, this.appState), this.watchTasks(this.appState.phase), this.watchErrors(), [2]
                    }))
                }))
            }, e.prototype.watchTasks = function(t) {
                return c(this, void 0, void 0, (function() {
                    var e, n;
                    return l(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                if (t >= o.a.PLAYING) return [2];
                                e = t + 1, r.label = 1;
                            case 1:
                                return r.trys.push([1, 3, , 4]), [4, Promise.all(this.tasks[e])];
                            case 2:
                                return r.sent(), [3, 4];
                            case 3:
                                return n = r.sent(), this.error(n), [3, 4];
                            case 4:
                                return t !== o.a.ERROR && (this.updateCurrentPhase(e), this.watchTasks(e)), [2]
                        }
                    }))
                }))
            }, e.prototype.watchErrors = function() {
                return c(this, void 0, void 0, (function() {
                    var t;
                    return l(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return e.trys.push([0, 2, , 3]), [4, Promise.all(this.tasks[o.a.ERROR])];
                            case 1:
                                return e.sent(), [3, 3];
                            case 2:
                                return t = e.sent(), this.error(t), [3, 3];
                            case 3:
                                return [2]
                        }
                    }))
                }))
            }, e.prototype.updateCurrentPhase = function(t) {
                this.appState.phase = t, this.appState.phaseTimes[t] = Date.now(), h.info("" + JSON.stringify(this.appState)), this.appState.commit(), this.broadcast(new a.a(t))
            }, e.prototype.error = function(t) {
                this.appState.error = t, this.updateCurrentPhase(o.a.ERROR)
            }, e.prototype.updateActiveApp = function(t) {
                this.appState.application = t, this.appState.commit(), this.broadcast(new a.b(t))
            }, e.prototype.getData = function() {
                return this.appState
            }, e
        }(i.a);
    e.default = f
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    }));
    var r = function(t, e, n) {
        return Math.abs(t - e) <= n
    }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.width = e, r.height = n, r
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.from = n, r.to = e, r.timestamp = Date.now(), r
            }
            return o(e, t), e
        }(i.a);
    e.a = a
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return u
    }));
    var r = n(1),
        i = n(49),
        o = n(57),
        a = new i.a,
        s = new r.a;

    function u(t, e, n, r, i, a) {
        this.planes = [void 0 !== t ? t : new o.a, void 0 !== e ? e : new o.a, void 0 !== n ? n : new o.a, void 0 !== r ? r : new o.a, void 0 !== i ? i : new o.a, void 0 !== a ? a : new o.a]
    }
    Object.assign(u.prototype, {
        set: function(t, e, n, r, i, o) {
            var a = this.planes;
            return a[0].copy(t), a[1].copy(e), a[2].copy(n), a[3].copy(r), a[4].copy(i), a[5].copy(o), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(t) {
            for (var e = this.planes, n = 0; n < 6; n++) e[n].copy(t.planes[n]);
            return this
        },
        setFromMatrix: function(t) {
            var e = this.planes,
                n = t.elements,
                r = n[0],
                i = n[1],
                o = n[2],
                a = n[3],
                s = n[4],
                u = n[5],
                c = n[6],
                l = n[7],
                h = n[8],
                f = n[9],
                p = n[10],
                d = n[11],
                m = n[12],
                v = n[13],
                y = n[14],
                g = n[15];
            return e[0].setComponents(a - r, l - s, d - h, g - m).normalize(), e[1].setComponents(a + r, l + s, d + h, g + m).normalize(), e[2].setComponents(a + i, l + u, d + f, g + v).normalize(), e[3].setComponents(a - i, l - u, d - f, g - v).normalize(), e[4].setComponents(a - o, l - c, d - p, g - y).normalize(), e[5].setComponents(a + o, l + c, d + p, g + y).normalize(), this
        },
        intersectsObject: function(t) {
            var e = t.geometry;
            return null === e.boundingSphere && e.computeBoundingSphere(), a.copy(e.boundingSphere).applyMatrix4(t.matrixWorld), this.intersectsSphere(a)
        },
        intersectsSprite: function(t) {
            return a.center.set(0, 0, 0), a.radius = .7071067811865476, a.applyMatrix4(t.matrixWorld), this.intersectsSphere(a)
        },
        intersectsSphere: function(t) {
            for (var e = this.planes, n = t.center, r = -t.radius, i = 0; i < 6; i++) {
                if (e[i].distanceToPoint(n) < r) return !1
            }
            return !0
        },
        intersectsBox: function(t) {
            for (var e = this.planes, n = 0; n < 6; n++) {
                var r = e[n];
                if (s.x = r.normal.x > 0 ? t.max.x : t.min.x, s.y = r.normal.y > 0 ? t.max.y : t.min.y, s.z = r.normal.z > 0 ? t.max.z : t.min.z, r.distanceToPoint(s) < 0) return !1
            }
            return !0
        },
        containsPoint: function(t) {
            for (var e = this.planes, n = 0; n < 6; n++)
                if (e[n].distanceToPoint(t) < 0) return !1;
            return !0
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    }));
    var r = function(t, e) {
        if (0 !== t.length)
            for (var n = 0; n < t.length; n++) {
                t[n] === e && t.splice(n, 1)
            }
    }
}, function(t, e, n) {
    "use strict";
    var r, i = n(3),
        o = function() {
            return (o = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        a = new i.a("segment"),
        s = function() {
            function t(t) {
                this.token = t, this.endpointType = g.a.Segment
            }
            return t.prototype.init = function(t, e) {
                return this.options = t, this.context = e, this.token ? (window.analytics && window.analytics.initialize && (window.analytics = null), window.analytics || function() {
                    var t = window.analytics = window.analytics || [];
                    if (!t.initialize)
                        if (t.invoked) window.console && console.error && console.error("Segment snippet included twice.");
                        else {
                            t.invoked = !0, t.methods = ["trackSubmit", "trackClick", "trackLink", "trackForm", "pageview", "identify", "reset", "group", "track", "ready", "alias", "debug", "page", "once", "off", "on"], t.factory = function(e) {
                                return function() {
                                    var n = Array.prototype.slice.call(arguments);
                                    return n.unshift(e), t.push(n), t
                                }
                            };
                            for (var e = 0; e < t.methods.length; e++) {
                                var n = t.methods[e];
                                t[n] = t.factory(n)
                            }
                            t.load = function(e, n) {
                                var r = document.createElement("script");
                                r.type = "text/javascript", r.async = !0, r.src = ("https:" === document.location.protocol ? "https://" : "http://") + "cdn.segment.com/analytics.js/v1/" + e + "/analytics.min.js";
                                var i = document.getElementsByTagName("script")[0];
                                i.parentNode.insertBefore(r, i), t._loadOptions = n
                            }, t.SNIPPET_VERSION = "4.1.0"
                        }
                }(), window.analytics.load(this.token), new Promise((function(t, e) {
                    window.analytics.ready(t)
                }))) : Promise.resolve()
            }, t.prototype.identify = function(t) {
                window.analytics.identify(t.sid, {
                    first_name: t.firstName,
                    last_name: t.lastName,
                    email: t.email
                })
            }, t.prototype.track = function(t, e) {
                i.a.level >= 3 && a.debug(t, e ? JSON.stringify(e).replace('\\"', '"') : e), e = Object.assign(e || {}, this.options);
                try {
                    window.analytics.track(t, e, this.context)
                } catch (e) {
                    a.error("Failed to send data to segment for " + t)
                }
            }, t.prototype.trackAsync = function(t, e) {
                if (e = e || {}, navigator.sendBeacon) try {
                    navigator.sendBeacon("https://api.segment.io/v1/t", JSON.stringify({
                        event: t,
                        anonymousId: window.analytics.user().anonymousId(),
                        properties: o({
                            data: e
                        }, this.options),
                        writeKey: this.token,
                        sentAt: Date.now(),
                        type: "track",
                        context: this.context
                    }))
                } catch (t) {
                    a.error("Failed to send async segment request")
                }
            }, t
        }(),
        u = new i.a("log-analytics"),
        c = function() {
            function t() {}
            return t.prototype.init = function(t, e) {
                return u.debug("logging analytics to console", {
                    options: t,
                    context: e
                }), Promise.resolve()
            }, t.prototype.identify = function(t) {
                u.debug("identify as", t)
            }, t.prototype.track = function(t, e) {
                u.debug({
                    eventName: t,
                    data: e
                })
            }, t.prototype.trackAsync = function(t, e) {
                u.debug({
                    eventName: t,
                    data: e
                })
            }, t
        }(),
        l = n(27),
        h = n(34),
        f = n(6),
        p = function() {
            return (p = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        d = new i.a("mp-analytics"),
        m = "ajs_anonymous_id",
        v = "sc_anonymous_id",
        y = function() {
            function t(t, e, n) {
                var r = this;
                this.token = t, this.url = e, this.queue = n, this.segmentStylePayload = function(t, e, n) {
                    return {
                        timestamp: Object(h.a)(new Date),
                        integrations: {},
                        context: r.segmentStyleContext(n),
                        properties: e,
                        event: t,
                        messageId: Object(l.p)(),
                        anonymousId: r.anonymousId,
                        type: "track",
                        userId: r.user ? r.user.sid : null,
                        sentAt: Object(h.a)(new Date)
                    }
                }, this.segmentStyleContext = function(t) {
                    var e = {
                        page: {
                            path: window.location.pathname,
                            referrer: window.document.referrer,
                            search: window.location.search,
                            title: window.document.title,
                            url: window.location.href
                        },
                        userAgent: navigator.userAgent,
                        library: {
                            name: "showcase",
                            version: "1"
                        },
                        campaign: {}
                    };
                    return p({}, t, e)
                };
                var i = Object(f.e)(v);
                if (i) this.anonymousId = i;
                else {
                    var o = Object(f.y)(m);
                    this.anonymousId = o ? o.replace(/%22/g, "") : Object(l.p)(), Object(f.w)(v, this.anonymousId)
                }
                this.headers = {
                    "X-API-Key": this.token,
                    "Content-Type": "application/json",
                    Accept: "application/json"
                }
            }
            return t.prototype.init = function(t, e) {
                return this.options = t, this.context = e, d.debug("init", {
                    options: this.options,
                    context: this.segmentStyleContext(this.context)
                }), Promise.resolve()
            }, t.prototype.identify = function(t) {
                d.debug("identify as", t), this.user = t
            }, t.prototype.track = function(t, e) {
                i.a.level >= 3 && d.debug(t, e ? JSON.stringify(e).replace('\\"', '"') : e), e = Object.assign(e || {}, this.options);
                var n = this.segmentStylePayload(t, e, this.context);
                this.queue.post(this.url, {
                    body: n,
                    headers: this.headers
                })
            }, t.prototype.trackAsync = function(t, e) {
                if (e = Object.assign(e || {}, this.options), navigator.sendBeacon) try {
                    var n = this.segmentStylePayload(t, e, this.context);
                    navigator.sendBeacon(this.url + "?api_key=" + this.token, JSON.stringify(n))
                } catch (t) {
                    d.error("Failed to sendBeacon analytics request")
                }
            }, t
        }(),
        g = n(143);
    n(303);
    n.d(e, "b", (function() {
        return b
    })), n.d(e, "a", (function() {
        return g.a
    }));
    var b = ((r = {})[g.a.Segment] = {
        class: s,
        key: "segment_key",
        url: null
    }, r[g.a.Logging] = {
        class: c,
        key: null,
        url: null
    }, r[g.a.Matterport] = {
        class: y,
        key: "analytics_mp_key",
        url: "analytics_mp_url"
    }, r)
}, function(t, e, n) {
    "use strict";
    var r = n(6);
    e.a = Object.freeze({
        camera: {
            transitionBlackoutTime: 300,
            transitionFadeTime: 800,
            baseTransitionTime: r.z("btt", 200),
            minRotationTransitionTime: r.z("mttr", 1250),
            transitionSpeed: r.z("tsp", 3)
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    })), n.d(e, "c", (function() {
        return o
    })), n.d(e, "b", (function() {
        return a
    }));
    var r = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        i = function() {
            function t(t, e, n) {
                this.watchedData = t, this.registerSubscription = e, this.unregisterSubscription = n
            }
            return t.prototype.createSubscription = function(t, e) {
                var n = this;
                return new s((function() {
                    return n.registerSubscription(t)
                }), (function() {
                    return n.unregisterSubscription(t)
                }), e)
            }, t.prototype.getData = function() {
                return this.watchedData()
            }, t
        }(),
        o = function() {
            function t(t, e, n) {
                this.watchedData = t, this.registerSubscription = e, this.unregisterSubscription = n
            }
            return t.prototype.createSubscription = function(t, e) {
                var n = this,
                    r = function() {
                        return t(n.watchedData())
                    };
                return new s((function() {
                    return n.registerSubscription(r)
                }), (function() {
                    return n.unregisterSubscription(r)
                }), e)
            }, t.prototype.getData = function() {
                return this.watchedData()
            }, t
        }(),
        a = function() {
            function t(t, e, n, r) {
                this.collection = t, this.itemProperty = e, this.subscribeFcn = n, this.unsubcribeFcn = r
            }
            return t.prototype.createSubscription = function(t, e) {
                var n = this,
                    i = [],
                    o = new s((function() {
                        var e, o, a = function(e) {
                            var r = function() {
                                return t(e, n.itemProperty)
                            };
                            i.push(r), n.subscribeFcn(e, r)
                        };
                        try {
                            for (var s = r(n.collection), u = s.next(); !u.done; u = s.next()) {
                                a(u.value)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                u && !u.done && (o = s.return) && o.call(s)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                    }), (function() {
                        var t, e, o = 0;
                        try {
                            for (var a = r(n.collection), s = a.next(); !s.done; s = a.next()) {
                                var u = s.value;
                                n.unsubcribeFcn(u, i[o]), o++
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                s && !s.done && (e = a.return) && e.call(a)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    }), e);
                return this.collection.hasOwnProperty("isObservable") ? (this.collection.onElementChanged({
                    onAdded: function(e) {
                        i.push((function() {
                            return t(e, n.itemProperty)
                        })), o.active && n.subscribeFcn(e, i[i.length - 1])
                    },
                    onRemoved: function(t) {
                        var e, o, a = 0;
                        try {
                            for (var s = r(n.collection), u = s.next(); !u.done; u = s.next()) {
                                if (u.value === t) break;
                                a++
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                u && !u.done && (o = s.return) && o.call(s)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        n.unsubcribeFcn(t, i[a]), i.splice(a, 1)
                    }
                }), o) : o
            }, t.prototype.getData = function() {
                return this.collection
            }, t
        }(),
        s = function() {
            function t(t, e, n) {
                void 0 === n && (n = !1), this.startSubscription = t, this.endSubscription = e, this.isSubbed = !1, n && this.renew()
            }
            return t.prototype.renew = function() {
                this.isSubbed || (this.startSubscription(), this.isSubbed = !0)
            }, t.prototype.cancel = function() {
                this.isSubbed && (this.endSubscription(), this.isSubbed = !1)
            }, Object.defineProperty(t.prototype, "active", {
                get: function() {
                    return this.isSubbed
                },
                enumerable: !0,
                configurable: !0
            }), t
        }()
}, function(t, e, n) {
    var r = n(130),
        i = n(150),
        o = n(228);
    t.exports = r ? function(t, e, n) {
        return i.f(t, e, o(1, n))
    } : function(t, e, n) {
        return t[e] = n, t
    }
}, function(t, e, n) {
    var r = n(149);
    t.exports = function(t) {
        if (!r(t)) throw TypeError(String(t) + " is not an object");
        return t
    }
}, function(t, e, n) {
    var r = n(93),
        i = n(230),
        o = n(279),
        a = r["__core-js_shared__"] || i("__core-js_shared__", {});
    (t.exports = function(t, e) {
        return a[t] || (a[t] = void 0 !== e ? e : {})
    })("versions", []).push({
        version: "3.2.1",
        mode: o ? "pure" : "global",
        copyright: "© 2019 Denis Pushkarev (zloirock.ru)"
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "e", (function() {
        return i
    })), n.d(e, "d", (function() {
        return a
    })), n.d(e, "a", (function() {
        return s
    })), n.d(e, "c", (function() {
        return u
    })), n.d(e, "b", (function() {
        return c
    })), n.d(e, "f", (function() {
        return l
    }));
    var r, i, o = n(26);
    ! function(t) {
        t[t.LOW = 1] = "LOW", t[t.MEDIUM = 2] = "MEDIUM", t[t.HIGH = 3] = "HIGH", t[t.ULTRA = 4] = "ULTRA"
    }(i || (i = {}));
    var a = ((r = {})[i.LOW] = {
            debugColor: new o.a(1, 0, 0, .5),
            textureSize: 256,
            tileSize: 256,
            assetType: "low",
            assetSize: 512,
            texelSize: .096
        }, r[i.MEDIUM] = {
            debugColor: new o.a(1, 1, 0, .5),
            textureSize: 512,
            tileSize: 512,
            assetType: "low",
            assetSize: 512,
            texelSize: .048
        }, r[i.HIGH] = {
            debugColor: new o.a(0, 1, 0, .5),
            textureSize: 1024,
            tileSize: 512,
            assetType: "high",
            assetSize: 2048,
            texelSize: .024
        }, r[i.ULTRA] = {
            debugColor: new o.a(0, 1, 1, .5),
            textureSize: 2048,
            tileSize: 512,
            assetType: "high",
            assetSize: 2048,
            texelSize: .012
        }, r),
        s = [i.LOW, i.MEDIUM, i.HIGH, i.ULTRA],
        u = s[0],
        c = s[s.length - 1],
        l = function(t) {
            for (var e in a)
                if (a[e].tileSize === t) return parseInt(e, 10);
            throw new Error("Not a valid texture size: " + t)
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return o
    }));
    var r = n(41),
        i = n(0);

    function o(t, e, n, o, a, s, u, c, l, h) {
        t = void 0 !== t ? t : [], e = void 0 !== e ? e : i.m, u = void 0 !== u ? u : i.Ub, r.a.call(this, t, e, n, o, a, s, u, c, l, h), this.flipY = !1
    }
    o.prototype = Object.create(r.a.prototype), o.prototype.constructor = o, o.prototype.isCubeTexture = !0, Object.defineProperty(o.prototype, "images", {
        get: function() {
            return this.image
        },
        set: function(t) {
            this.image = t
        }
    })
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return d
    }));
    var r = n(98),
        i = n(16),
        o = n(1),
        a = n(20),
        s = n(6),
        u = n(3),
        c = n(14),
        l = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        h = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(l(arguments[e]));
            return t
        },
        f = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        p = new u.a("navurl"),
        d = function() {
            function t() {}
            return t.encodeVector3 = function(e, n) {
                void 0 === n && (n = 2);
                var r = e.x,
                    i = e.y,
                    o = e.z;
                return t.packFloats([r, i, o], n)
            }, t.decodeVector3 = function(e) {
                var n = t.unpackFloats(e, 3);
                return n ? new(o.a.bind.apply(o.a, h([void 0], n))) : null
            }, t.encodeQuaternion = function(e, n) {
                return void 0 === n && (n = 2), t.packFloats([e.x, e.y, e.z, e.w], n)
            }, t.decodeQuaternion = function(e) {
                var n = t.unpackFloats(e, 4);
                return n ? new(i.a.bind.apply(i.a, h([void 0], n))) : null
            }, t.encodeEuler = function(e, n) {
                return void 0 === n && (n = 2), t.packFloats([e.x, e.y, e.z], n)
            }, t.decodeEuler = function(e) {
                var n = t.unpackFloats(e, 3);
                return n ? new r.a(n[0], n[1], n[2], "XYZ") : void 0
            }, t.packFloats = function(t, e) {
                void 0 === e && (e = 2);
                var n = t.map((function(t) {
                    var n = parseFloat(t.toFixed(e)).toString().replace(/^(\-)?0+.(\d+)/, "$1.$2");
                    return "0" === n ? "" : n
                })).join(",");
                return n = n.replace(/,+$/, "")
            }, t.unpackFloats = function(t, e) {
                void 0 === e && (e = 0);
                var n = t.split(",").map((function(t) {
                    return "" === t ? 0 : parseFloat(t)
                }));
                if (!n || n.includes(NaN)) return [];
                for (; n.length < e;) n.push(0);
                return n
            }, t.getQueryString = function(e, n) {
                void 0 === n && (n = !0);
                var r = t.serialize(e, n);
                return Object.keys(r).map((function(t) {
                    return t + "=" + r[t]
                })).join("&")
            }, t.serialize = function(e, n) {
                void 0 === n && (n = !0);
                var r = t.removeNavigationKeys(s.s());
                if (n) Object.assign(r, t.getShortPose(e));
                else {
                    var i = t.getStartPose(e);
                    Object.assign(r, {
                        start: encodeURIComponent(JSON.stringify(i))
                    })
                }
                return r
            }, t.deserialize = function(e) {
                var n = s.s(e);
                return "start" in n ? t.parseStartObject(n.start) : t.parseShortUrl(n)
            }, t.removeNavigationKeys = function(t) {
                var e, n, r = Object.assign({}, t);
                try {
                    for (var i = f(["start", "sm", "sp", "sq", "sr", "ss", "sf", "sz"]), o = i.next(); !o.done; o = i.next()) {
                        delete r[o.value]
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        o && !o.done && (n = i.return) && n.call(i)
                    } finally {
                        if (e) throw e.error
                    }
                }
                return r
            }, t.parseShortUrl = function(e) {
                var n = e.sm,
                    o = e.sp,
                    s = e.sq,
                    u = e.sr,
                    l = e.ss,
                    h = e.sf,
                    f = e.sz,
                    d = n ? parseInt(n, 10) : a.a.Panorama,
                    m = t.decodeEuler(u || "") || new r.a(0, 0, 0),
                    v = t.decodeQuaternion(s || "") || new i.a(0, 0, 0, 1),
                    y = o ? t.decodeVector3(o) : void 0,
                    g = l ? parseInt(l, 10) - 1 : void 0,
                    b = h ? t.unpackFloats(h, 4) : void 0,
                    _ = f ? parseFloat(f) : void 0;
                if (d === a.a.Panorama && !g) return null;
                if (d !== a.a.Panorama && !y) return null;
                var w = s ? v : (new i.a).setFromEuler(m);
                d === a.a.Panorama && (w = Object(c.m)(w));
                var x = {
                    mode: d,
                    quaternion: w,
                    position: y || void 0,
                    sweepIndex: g,
                    floorVisibility: b,
                    zoom: _
                };
                return p.debug("Parsed short URL pose data:", x), x
            }, t.parseStartObject = function(t) {
                var e;
                try {
                    e = JSON.parse(decodeURIComponent(t))
                } catch (e) {
                    return p.debug("Failed to parse &start param: " + t), null
                }
                try {
                    if (!e.camera_quaternion) throw Error("Start override is missing camera_quaternion");
                    if (!e.camera_position) throw Error("Start override is missing camera_position");
                    if (!e.camera_mode) throw Error("Start override is missing camera_mode");
                    var n = (new i.a).copy(e.camera_quaternion),
                        r = {
                            mode: e.camera_mode,
                            panoId: e.scan_id,
                            position: (new o.a).copy(e.camera_position),
                            quaternion: n,
                            zoom: e.ortho_zoom,
                            floorVisibility: e.floor_visibility
                        };
                    return p.debug("Parsed &start URL pose data:", r), r
                } catch (t) {
                    p.debug(t)
                }
                return null
            }, t.getShortPose = function(e) {
                var n = e.cameraData,
                    i = e.viewmodeData,
                    o = e.floorsViewData,
                    s = e.sweepData,
                    u = (new r.a).setFromQuaternion(n.pose.rotation, "XYZ"),
                    c = s.currentSweepIndex,
                    l = {};
                if (i.currentMode === a.a.Panorama) u.z = 0, l.sr = t.encodeEuler(u), void 0 !== c && (l.ss = c + 1);
                else {
                    l.sm = i.currentMode || void 0, l.sr = t.encodeEuler(u), l.sp = t.encodeVector3(n.pose.position);
                    var h = o.getFloorsVisibility();
                    h.length && o.totalFloors > 1 && (l.sf = h)
                }
                return i.currentMode === a.a.Floorplan && (l.sz = parseFloat(n.zoom().toFixed(2))), l.sq = t.encodeQuaternion(n.pose.rotation), p.debug("Short URL params for current location " + JSON.stringify(l)), delete l.sq, l
            }, t.getStartPose = function(t) {
                var e = t.cameraData,
                    n = t.viewmodeData,
                    r = t.floorsViewData,
                    i = t.sweepData,
                    o = {
                        x: 0,
                        y: 0,
                        z: 0,
                        w: 1
                    };
                o.x = e.pose.rotation.x, o.y = e.pose.rotation.y, o.z = e.pose.rotation.z, o.w = e.pose.rotation.w;
                var s = {
                    x: 0,
                    y: 0,
                    z: 0
                };
                s.x = e.pose.position.x, s.y = e.pose.position.y, s.z = e.pose.position.z;
                var u = {
                    camera_mode: n.currentMode,
                    camera_position: s,
                    camera_quaternion: o
                };
                return n.currentMode === a.a.Panorama ? u.scan_id = i.currentSweep : u.floor_visibility = r.getFloorsVisibility(), n.currentMode === a.a.Floorplan && (u.ortho_zoom = e.zoom()), u
            }, t
        }()
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(25),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                for (var r in n.name = "snapshots", n.snapshots = {}, e) n.snapshots[r] = e[r].clone();
                return n
            }
            return o(e, t), e.prototype.get = function(t) {
                return this.snapshots[t]
            }, Object.defineProperty(e.prototype, "collection", {
                get: function() {
                    return this.snapshots
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.add = function(t) {
                this.snapshots[t.sid] = t
            }, e.prototype.clone = function() {
                return new e(this.snapshots)
            }, e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    })), n.d(e, "b", (function() {
        return s
    }));
    var r, i = n(65),
        o = n(177),
        a = n(95);
    ! function(t) {
        t.line = "line", t.start = "start", t.end = "end"
    }(r || (r = {}));
    var s = function() {
        function t(t, e, n, s, u) {
            var c = this;
            this.startPosition = t, this.endPosition = e, this.lineMaterial = n, this.options = s, this.endpointMaterial = u, this.endpoints = !1, this.isVisible = !0, this.meshToLinePartMap = {}, this.opacity = function(t) {
                c.endpointMaterial && (c.endpointMaterial.opacity = t), c.lineMesh.material.opacity = t
            }, this.updatePositions = function(t, e) {
                return c.startPosition.copy(t), c.endPosition.copy(e), c.options.beforeUpdatePositions && (t = c.options.beforeUpdatePositions(t), e = c.options.beforeUpdatePositions(e)), c.lineMesh.geometry.setPositions([t.x, t.y, t.z, e.x, e.y, e.z]), c.endpoints && (c.endMesh.position.copy(e), c.startMesh.position.copy(t), c.lastBillboardOptions && c.updateBillboard(c.lastBillboardOptions)), c.lineMesh.material.dashed && c.lineMesh.computeLineDistances(), c
            }, this.updateBillboard = function(t) {
                if (c.endpoints && (t.rotation && (c.endMesh.quaternion.copy(t.rotation), c.startMesh.quaternion.copy(t.rotation)), t.position && t.projection)) {
                    var e = c.lineMesh.material.uniforms.resolution.y;
                    c.endMesh.billboardScale(t.position, t.projection, e), c.startMesh.billboardScale(t.position, t.projection, e)
                }
                c.lastBillboardOptions = t
            }, this.updateSelected = function(t) {
                c.lineMesh.material.updateSelected(t), c.endpoints && (c.endMesh.material.updateHovered(t), c.endMesh.updateSelected(t), c.startMesh.updateSelected(t))
            }, this.setRenderLayer = function(t) {
                c.children.forEach((function(e) {
                    return e.layers.mask = t.mask
                }))
            }, this.updateResolution = function(t, e) {
                c.lineMesh.material.uniforms.resolution.x = t, c.lineMesh.material.uniforms.resolution.y = e
            }, this.hide = function() {
                c.options.onHide && c.options.onHide(), c.isVisible = !1
            }, this.show = function() {
                c.options.onShow && c.options.onShow(), c.isVisible = !0
            }, this.toggle = function(t) {
                return t ? c.show() : c.hide(), c
            }, this.dispose = function() {
                c.options.onHide && c.options.onHide(), c.lineMesh.geometry.dispose(), c.lineMesh.material.dispose(), c.endMesh && c.endMesh.dispose(), c.startMesh && c.startMesh.dispose(), c.meshToLinePartMap = {}
            }, this.overrideLineMaterial = function(t) {
                c.lineMesh.material = t
            }, this.restoreLineMaterial = function() {
                c.lineMesh.material = c.lineMaterial
            }, this.lineMesh = new o.a(new o.d, n), this.lineMesh.matrixAutoUpdate = !1, this.lineMesh.part = r.line, this.lineMesh.renderOrder = a.a.visibleFloor + 1, this.meshToLinePartMap[r.line] = this.lineMesh, u && (this.endpoints = !0, this.endMesh = new o.b(new i.a(1, 1), u), this.endMesh.part = r.end, this.endMesh.renderOrder = a.a.visibleFloor + 2, this.meshToLinePartMap[r.end] = this.endMesh, this.startMesh = new o.b(new i.a(1, 1), u), this.startMesh.part = r.start, this.startMesh.renderOrder = a.a.visibleFloor + 2, this.meshToLinePartMap[r.start] = this.startMesh), this.updatePositions(t, e), this.updateSelected(!1)
        }
        return Object.defineProperty(t.prototype, "currentOpacity", {
            get: function() {
                return this.lineMesh.material.opacity
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.getMesh = function(t) {
            return this.meshToLinePartMap[t]
        }, Object.defineProperty(t.prototype, "children", {
            get: function() {
                var t = this;
                return Object.keys(this.meshToLinePartMap).map((function(e) {
                    return t.meshToLinePartMap[e]
                }))
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "visible", {
            get: function() {
                return this.isVisible
            },
            enumerable: !0,
            configurable: !0
        }), t
    }()
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    }));
    var r = n(76);

    function i(t, e, n, i) {
        this.ray = new r.a(t, e), this.near = n || 0, this.far = i || 1 / 0, this.camera = null, this.params = {
            Mesh: {},
            Line: {},
            LOD: {},
            Points: {
                threshold: 1
            },
            Sprite: {}
        }, Object.defineProperties(this.params, {
            PointCloud: {
                get: function() {
                    return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."), this.Points
                }
            }
        })
    }

    function o(t, e) {
        return t.distance - e.distance
    }

    function a(t, e, n, r) {
        if (!1 !== t.visible && (t.raycast(e, n), !0 === r))
            for (var i = t.children, o = 0, s = i.length; o < s; o++) a(i[o], e, n, !0)
    }
    Object.assign(i.prototype, {
        linePrecision: 1,
        set: function(t, e) {
            this.ray.set(t, e)
        },
        setFromCamera: function(t, e) {
            e && e.isPerspectiveCamera ? (this.ray.origin.setFromMatrixPosition(e.matrixWorld), this.ray.direction.set(t.x, t.y, .5).unproject(e).sub(this.ray.origin).normalize(), this.camera = e) : e && e.isOrthographicCamera ? (this.ray.origin.set(t.x, t.y, (e.near + e.far) / (e.near - e.far)).unproject(e), this.ray.direction.set(0, 0, -1).transformDirection(e.matrixWorld), this.camera = e) : console.error("THREE.Raycaster: Unsupported camera type.")
        },
        intersectObject: function(t, e, n) {
            var r = n || [];
            return a(t, this, r, e), r.sort(o), r
        },
        intersectObjects: function(t, e, n) {
            var r = n || [];
            if (!1 === Array.isArray(t)) return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."), r;
            for (var i = 0, s = t.length; i < s; i++) a(t[i], this, r, e);
            return r.sort(o), r
        }
    })
}, function(t, e, n) {
    "use strict";
    var r = n(29),
        i = n(1),
        o = n(0);

    function a(t, e) {
        this.array = t, this.stride = e, this.count = void 0 !== t ? t.length / e : 0, this.usage = o.kc, this.updateRange = {
            offset: 0,
            count: -1
        }, this.version = 0
    }

    function s(t, e, n) {
        a.call(this, t, e), this.meshPerAttribute = n || 1
    }
    Object.defineProperty(a.prototype, "needsUpdate", {
        set: function(t) {
            !0 === t && this.version++
        }
    }), Object.assign(a.prototype, {
        isInterleavedBuffer: !0,
        onUploadCallback: function() {},
        setUsage: function(t) {
            return this.usage = t, this
        },
        copy: function(t) {
            return this.array = new t.array.constructor(t.array), this.count = t.count, this.stride = t.stride, this.usage = t.usage, this
        },
        copyAt: function(t, e, n) {
            t *= this.stride, n *= e.stride;
            for (var r = 0, i = this.stride; r < i; r++) this.array[t + r] = e.array[n + r];
            return this
        },
        set: function(t, e) {
            return void 0 === e && (e = 0), this.array.set(t, e), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        onUpload: function(t) {
            return this.onUploadCallback = t, this
        }
    }), s.prototype = Object.assign(Object.create(a.prototype), {
        constructor: s,
        isInstancedInterleavedBuffer: !0,
        copy: function(t) {
            return a.prototype.copy.call(this, t), this.meshPerAttribute = t.meshPerAttribute, this
        }
    });
    var u, c = n(109),
        l = n(175),
        h = (u = function(t, e) {
            return (u = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            u(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        f = function(t) {
            function e(e, n) {
                var r, o, a = t.call(this) || this;
                return a.type = "Line", a.part = l.a.line, a.computeLineDistances = (r = new i.a, o = new i.a, function() {
                    for (var t = a.geometry, e = t.attributes.instanceStart, n = t.attributes.instanceEnd, i = new Float32Array(2 * e.data.count), u = 0, l = 0, h = e.data.count; u < h; u++, l += 2) r.fromBufferAttribute(e, u), o.fromBufferAttribute(n, u), i[l] = 0 === l ? 0 : i[l - 1], i[l + 1] = i[l] + r.distanceTo(o);
                    return a.instanceDistanceBuffer ? (a.instanceDistanceBuffer.set(i, 0), a.instanceDistanceBuffer.needsUpdate = !0) : (a.instanceDistanceBuffer = new s(i, 2, 1), t.setAttribute("instanceDistanceStart", new c.a(a.instanceDistanceBuffer, 1, 0, !1)), t.setAttribute("instanceDistanceEnd", new c.a(a.instanceDistanceBuffer, 1, 1, !1))), a
                }), a.geometry = e, a.material = n, a
            }
            return h(e, t), e.prototype.copy = function(t) {
                throw Error("not implemented")
            }, e
        }(r.a),
        p = n(56),
        d = n(35),
        m = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        v = function(t) {
            function e(e, n, r, i) {
                void 0 === r && (r = d.d.endpointSelected), void 0 === i && (i = d.d.endpointDefault);
                var o = t.call(this, e, n) || this;
                return o.selectedSize = r, o.defaultSize = i, o.currentSize = d.d.endpointDefault, o.currentSize = o.defaultSize, o.scale.set(d.b, d.b, d.b), o
            }
            return m(e, t), e.prototype.dispose = function() {
                this.material.dispose(), this.geometry.dispose()
            }, e.prototype.billboardScale = function(t, e, n) {
                var r = Object(p.a)(e, t, this.position, n, .5),
                    i = Math.max(Math.min(1 / r * this.currentSize, d.a), d.b);
                this.scale.set(i, i, i)
            }, e.prototype.updateSelected = function(t) {
                this.currentSize = t ? this.selectedSize : this.defaultSize
            }, e
        }(r.a),
        y = n(30),
        g = n(114),
        b = n(18),
        _ = n(5),
        w = n(11),
        x = n(133),
        E = n(134),
        S = {
            endpoint: {
                uniforms: {
                    opacity: {
                        type: "f",
                        value: 1
                    },
                    color: {
                        type: "c",
                        value: new b.a
                    },
                    bg: {
                        type: "t",
                        value: null
                    }
                },
                vertexShader: E + n(268),
                fragmentShader: x + n(437)
            },
            line: {
                uniforms: y.a.merge([w.a.common, w.a.fog, {
                    linewidth: {
                        value: 4
                    },
                    resolution: {
                        value: new _.a(window.innerWidth, window.innerHeight)
                    },
                    dashScale: {
                        value: 1
                    },
                    dashSize: {
                        value: .025
                    },
                    gapSize: {
                        value: .05
                    },
                    mask: {
                        value: null
                    }
                }]),
                vertexShader: n(438),
                fragmentShader: n(439)
            }
        },
        T = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        M = function(t) {
            function e(e, n, r) {
                var i = this,
                    o = y.a.clone(S.endpoint.uniforms);
                return (i = t.call(this, {
                    fragmentShader: S.endpoint.fragmentShader,
                    vertexShader: S.endpoint.vertexShader,
                    uniforms: o,
                    name: "LineEndpointMaterial",
                    transparent: !0,
                    depthWrite: !1,
                    depthTest: !0
                }) || this).color = e, i.defaultTex = n, i.hoverTex = r, i.uniforms.bg.value = n, i.uniforms.color.value.copy(i.color), i
            }
            return T(e, t), e.prototype.clone = function() {
                return new e(this.color, this.defaultTex, this.hoverTex).copy(this)
            }, Object.defineProperty(e.prototype, "opacity", {
                get: function() {
                    return this.uniforms.opacity.value
                },
                set: function(t) {
                    this.uniforms && t !== this.uniforms.opacity.value && (this.uniforms.opacity.value = t)
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.updateHovered = function(t) {
                var e = t ? this.hoverTex : this.defaultTex;
                this.uniforms.bg.value !== e && (this.uniforms.bg.value = e)
            }, e
        }(g.a),
        O = n(79),
        P = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        A = function(t) {
            function e(e, n, r, i) {
                void 0 === i && (i = d.d.lineSelected);
                var o = t.call(this) || this;
                return o.parameters = e, o.hoverTexture = n, o.defaultTexture = r, o.selectedWidth = i, o.type = "LineMaterial", o.isLineMaterial = !0, o.defaultWidth = d.d.lineDefault, o.setValues({
                    uniforms: y.a.clone(S.line.uniforms),
                    vertexShader: S.line.vertexShader,
                    fragmentShader: S.line.fragmentShader,
                    transparent: !0,
                    depthWrite: !1,
                    depthTest: !0,
                    opacity: 1
                }), o.setValues(e), r && (o.mask = r), o.defaultWidth = e && e.linewidth ? e.linewidth : d.d.lineDefault, o
            }
            return P(e, t), e.prototype.updateSelected = function(t) {
                var e = t ? this.hoverTexture : this.defaultTexture;
                e && this.mask !== e && (this.mask = e, this.linewidth = t ? this.selectedWidth : this.defaultWidth)
            }, Object.defineProperty(e.prototype, "linewidth", {
                get: function() {
                    return this.uniforms.linewidth.value
                },
                set: function(t) {
                    this.uniforms.linewidth || (this.uniforms = y.a.clone(S.line.uniforms)), this.linewidth !== t && (this.uniforms.linewidth.value = t)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "color", {
                get: function() {
                    return this.uniforms.diffuse.value
                },
                set: function(t) {
                    this.uniforms.diffuse.value = t
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "opacity", {
                get: function() {
                    return this.uniforms.opacity.value
                },
                set: function(t) {
                    this.uniforms || (this.uniforms = y.a.clone(S.line.uniforms)), this.opacity !== t && (this.uniforms.opacity.value = t)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "dashScale", {
                get: function() {
                    return this.uniforms.dashScale.value
                },
                set: function(t) {
                    this.uniforms.dashScale.value = t
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "dashed", {
                get: function() {
                    return "USE_DASH" in this.defines
                },
                set: function(t) {
                    t ? this.defines.USE_DASH = "" : delete this.defines.USE_DASH, this.needsUpdate = !0
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "dashSize", {
                get: function() {
                    return this.uniforms.dashSize.value
                },
                set: function(t) {
                    this.uniforms.dashSize.value = t
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "gapSize", {
                get: function() {
                    return this.uniforms.gapSize.value
                },
                set: function(t) {
                    this.uniforms.gapSize.value = t
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "resolution", {
                get: function() {
                    return this.uniforms.resolution.value
                },
                set: function(t) {
                    this.uniforms.resolution.value = t
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "mask", {
                get: function() {
                    return this.uniforms.mask.value
                },
                set: function(t) {
                    this.uniforms.mask.value !== t && (t ? this.defines.USE_MASK = "" : delete this.defines.USE_MASK, this.uniforms.mask.value = t, this.needsUpdate = !0)
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.copy = function(t) {
                return O.a.prototype.copy.call(this, t), this.parameters = t.parameters, this.color.copy(t.color), this.defaultWidth = t.defaultWidth, this.linewidth = t.linewidth, this.resolution.copy(t.resolution), this.defaultTexture = t.defaultTexture, this.hoverTexture = t.hoverTexture, this.mask = t.mask, this.opacity = t.opacity, this.dashed = t.dashed, this.dashScale = t.dashScale, this.dashSize = t.dashSize, this.gapSize = t.gapSize, this
            }, e
        }(O.a),
        L = n(24);

    function R() {
        L.a.call(this), this.type = "InstancedBufferGeometry", this.maxInstancedCount = void 0
    }
    R.prototype = Object.assign(Object.create(L.a.prototype), {
        constructor: R,
        isInstancedBufferGeometry: !0,
        copy: function(t) {
            return L.a.prototype.copy.call(this, t), this.maxInstancedCount = t.maxInstancedCount, this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        toJSON: function() {
            var t = L.a.prototype.toJSON.call(this);
            return t.maxInstancedCount = this.maxInstancedCount, t.isInstancedBufferGeometry = !0, t
        }
    });
    var D = n(58),
        I = n(12);

    function C(t) {
        L.a.call(this), this.type = "WireframeGeometry";
        var e, n, r, o, a, s, u, c, l, h, f = [],
            p = [0, 0],
            d = {},
            m = ["a", "b", "c"];
        if (t && t.isGeometry) {
            var v = t.faces;
            for (e = 0, r = v.length; e < r; e++) {
                var y = v[e];
                for (n = 0; n < 3; n++) u = y[m[n]], c = y[m[(n + 1) % 3]], p[0] = Math.min(u, c), p[1] = Math.max(u, c), void 0 === d[l = p[0] + "," + p[1]] && (d[l] = {
                    index1: p[0],
                    index2: p[1]
                })
            }
            for (l in d) s = d[l], h = t.vertices[s.index1], f.push(h.x, h.y, h.z), h = t.vertices[s.index2], f.push(h.x, h.y, h.z)
        } else if (t && t.isBufferGeometry) {
            var g, b, _, w, x, E, S;
            if (h = new i.a, null !== t.index) {
                for (g = t.attributes.position, b = t.index, 0 === (_ = t.groups).length && (_ = [{
                        start: 0,
                        count: b.count,
                        materialIndex: 0
                    }]), o = 0, a = _.length; o < a; ++o)
                    for (e = x = (w = _[o]).start, r = x + w.count; e < r; e += 3)
                        for (n = 0; n < 3; n++) u = b.getX(e + n), c = b.getX(e + (n + 1) % 3), p[0] = Math.min(u, c), p[1] = Math.max(u, c), void 0 === d[l = p[0] + "," + p[1]] && (d[l] = {
                            index1: p[0],
                            index2: p[1]
                        });
                for (l in d) s = d[l], h.fromBufferAttribute(g, s.index1), f.push(h.x, h.y, h.z), h.fromBufferAttribute(g, s.index2), f.push(h.x, h.y, h.z)
            } else
                for (e = 0, r = (g = t.attributes.position).count / 3; e < r; e++)
                    for (n = 0; n < 3; n++) E = 3 * e + n, h.fromBufferAttribute(g, E), f.push(h.x, h.y, h.z), S = 3 * e + (n + 1) % 3, h.fromBufferAttribute(g, S), f.push(h.x, h.y, h.z)
        }
        this.setAttribute("position", new I.b(f, 3))
    }
    C.prototype = Object.create(L.a.prototype), C.prototype.constructor = C;
    var N, U = n(49),
        j = n(37),
        k = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        F = function(t) {
            function e() {
                var e = t.call(this) || this;
                e.type = "LineSegmentsGeometry";
                return e.setIndex([0, 2, 1, 2, 3, 1, 2, 4, 3, 4, 5, 3, 4, 6, 5, 6, 7, 5]), e.setAttribute("position", new I.b([-1, 2, 0, 1, 2, 0, -1, 1, 0, 1, 1, 0, -1, 0, 0, 1, 0, 0, -1, -1, 0, 1, -1, 0], 3)), e.setAttribute("uv", new I.b([0, 1, .5, 1, 0, .5, .5, .5, 0, 0, .5, 0, 0, 1, .5, 1], 2)), e
            }
            return k(e, t), e.prototype.applyMatrix = function(t) {
                var e = this.attributes.instanceStart,
                    n = this.attributes.instanceEnd;
                return void 0 !== e && (t.applyToBufferAttribute(e), t.applyToBufferAttribute(n), e.data.needsUpdate = !0), null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this
            }, e.prototype.setPositions = function(t) {
                var e;
                return t instanceof Float32Array ? e = t : Array.isArray(t) && (e = new Float32Array(t)), e && (this.positionBuffer ? (this.positionBuffer.set(e, 0), this.positionBuffer.needsUpdate = !0) : (this.positionBuffer = new s(e, 6, 1), this.setAttribute("instanceStart", new c.a(this.positionBuffer, 3, 0, !1)), this.setAttribute("instanceEnd", new c.a(this.positionBuffer, 3, 3, !1))), this.computeBoundingBox(), this.computeBoundingSphere()), this
            }, e.prototype.setColors = function(t) {
                var e;
                return t instanceof Float32Array ? e = t : Array.isArray(t) && (e = new Float32Array(t)), e && (this.colorBuffer ? (this.colorBuffer.set(e, 0), this.colorBuffer.needsUpdate = !0) : (this.colorBuffer = new s(e, 6, 1), this.setAttribute("instanceColorStart", new c.a(this.colorBuffer, 3, 0, !1)), this.setAttribute("instanceColorEnd", new c.a(this.colorBuffer, 3, 3, !1)))), this
            }, e.prototype.fromWireframeGeometry = function(t) {
                return this.setPositions(t.attributes.position.array), this
            }, e.prototype.fromEdgesGeometry = function(t) {
                return this.setPositions(t.attributes.position.array), this
            }, e.prototype.fromMesh = function(t) {
                return this.fromWireframeGeometry(new C(t.geometry)), this
            }, e.prototype.fromLineSegements = function(t) {
                var e = t.geometry;
                return e instanceof D.a ? this.setPositions(e.vertices) : e instanceof L.a && this.setPositions(e.position.array), this
            }, e.prototype.computeBoundingBox = function() {
                this.boundingBox || (this.boundingBox = new j.a), this.box || (this.box = new j.a);
                var t = this.attributes.instanceStart,
                    e = this.attributes.instanceEnd;
                void 0 !== t && void 0 !== e && (this.boundingBox.setFromBufferAttribute(t), this.box.setFromBufferAttribute(e), this.boundingBox.union(this.box))
            }, e.prototype.computeBoundingSphere = function() {
                this.tempVector || (this.tempVector = new i.a), this.boundingSphere || (this.boundingSphere = new U.a), this.boundingBox || this.computeBoundingBox();
                var t = this.attributes.instanceStart,
                    e = this.attributes.instanceEnd;
                if (void 0 !== t && void 0 !== e) {
                    var n = this.boundingSphere.center;
                    this.boundingBox.getCenter(n);
                    for (var r = 0, o = 0, a = t.count; o < a; o++) this.tempVector.fromBufferAttribute(t, o), r = Math.max(r, n.distanceToSquared(this.tempVector)), this.tempVector.fromBufferAttribute(e, o), r = Math.max(r, n.distanceToSquared(this.tempVector));
                    this.boundingSphere.radius = Math.sqrt(r), isNaN(this.boundingSphere.radius) && console.error("computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.", this)
                }
            }, e
        }(R),
        B = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        G = function(t) {
            function e() {
                var e = t.call(this) || this;
                return e.type = "LineGeometry", e.isLineGeometry = !0, e
            }
            return B(e, t), e.prototype.setPositions = function(t) {
                for (var e = t.length - 3, n = new Float32Array(2 * e), r = 0; r < e; r += 3) n[2 * r] = t[r], n[2 * r + 1] = t[r + 1], n[2 * r + 2] = t[r + 2], n[2 * r + 3] = t[r + 3], n[2 * r + 4] = t[r + 4], n[2 * r + 5] = t[r + 5];
                return F.prototype.setPositions.call(this, n), this
            }, e.prototype.setColors = function(t) {
                for (var e = t.length - 3, n = new Float32Array(2 * e), r = 0; r < e; r += 3) n[2 * r] = t[r], n[2 * r + 1] = t[r + 1], n[2 * r + 2] = t[r + 2], n[2 * r + 3] = t[r + 3], n[2 * r + 4] = t[r + 4], n[2 * r + 5] = t[r + 5];
                return F.prototype.setColors.call(this, n), this
            }, e.prototype.fromLine = function(t) {
                throw new Error("LineGeometry.fromLine not converted to TS yet")
            }, e.prototype.copy = function(t) {
                return this
            }, e
        }(F),
        z = n(83),
        H = n(337),
        V = n.n(H),
        W = n(338),
        X = n.n(W),
        q = n(339),
        Y = n.n(q),
        K = n(340),
        Z = n.n(K);
    ! function(t) {
        t[t.LINE_DEFAULT = 0] = "LINE_DEFAULT", t[t.LINE_HOVER = 1] = "LINE_HOVER", t[t.END_DEFAULT = 2] = "END_DEFAULT", t[t.END_HOVER = 3] = "END_HOVER"
    }(N || (N = {}));
    var Q = function() {
        function t() {
            var t, e = Object(z.a)(V.a),
                n = Object(z.a)(X.a),
                r = Object(z.a)(Y.a),
                i = Object(z.a)(Z.a);
            this.textures = ((t = {})[N.LINE_DEFAULT] = r, t[N.LINE_HOVER] = i, t[N.END_DEFAULT] = e, t[N.END_HOVER] = n, t), r.minFilter = o.P, i.minFilter = o.P, e.minFilter = o.P, n.minFilter = o.P
        }
        return t.prototype.get = function(t) {
            return this.textures[t]
        }, t.prototype.dispose = function() {
            for (var t in this.textures) {
                var e = Number(t);
                this.get(e).dispose()
            }
        }, t
    }();
    n.d(e, "a", (function() {
        return f
    })), n.d(e, "b", (function() {
        return v
    })), n.d(e, "c", (function() {
        return M
    })), n.d(e, "e", (function() {
        return A
    })), n.d(e, "d", (function() {
        return G
    })), n.d(e, "g", (function() {
        return Q
    })), n.d(e, "f", (function() {
        return N
    }))
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.pixelRatio = e, n
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return x
    })), n.d(e, "c", (function() {
        return E
    })), n.d(e, "b", (function() {
        return S
    }));
    var r, i = n(21),
        o = n(2),
        a = n(129),
        s = n(261),
        u = n(96),
        c = n(3),
        l = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        h = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        f = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        p = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        d = new c.a("tours"),
        m = function(t, e) {
            e.addBinding(w, (function() {
                return h(void 0, void 0, void 0, (function() {
                    return f(this, (function(e) {
                        return [2, Promise.all([t.market.waitForData(u.b)]).then((function(t) {
                            var e = p(t, 1)[0],
                                n = [];
                            if (e.iterateSnapshots((function(t) {
                                    n.push(_(t))
                                })), 0 === n.length) throw Error("No tour data found");
                            return n
                        }))]
                    }))
                }))
            }))
        },
        v = function(t, e, n) {
            t.addBinding(x, (function(t) {
                return h(void 0, void 0, void 0, (function() {
                    var r;
                    return f(this, (function(i) {
                        if (0 === n.getSnapshotCount()) throw Error("No tour data found");
                        try {
                            e.canChangeTourLocation() ? (r = t ? t.index : void 0, e.startTour(r)) : d.warn("TourStart ignored, cannot change location at this time, another transition is active")
                        } catch (t) {
                            throw d.warn(t), Error("Error occurred while starting tour - " + t)
                        }
                        return [2]
                    }))
                }))
            }))
        },
        y = function(t, e) {
            t.addBinding(E, (function() {
                return h(void 0, void 0, void 0, (function() {
                    var t;
                    return f(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                return n.trys.push([0, 2, , 3]), [4, e.stopTour()];
                            case 1:
                                return n.sent(), [3, 3];
                            case 2:
                                throw t = n.sent(), d.warn(t), Error("Error occurred while stopping tour - " + t);
                            case 3:
                                return [2]
                        }
                    }))
                }))
            }))
        },
        g = function(t, e) {
            t.addBinding(S, (function(t) {
                return h(void 0, void 0, void 0, (function() {
                    return f(this, (function(n) {
                        try {
                            if (e.canChangeTourLocation()) return [2, e.tourGoTo(t.index)];
                            d.warn("TourStep ignored, cannot change location at this time, another transition is active")
                        } catch (t) {
                            throw d.warn(t), Error("Error occurred while jumping to new tour location - " + t)
                        }
                        return [2]
                    }))
                }))
            }))
        },
        b = function(t, e) {
            t.addBinding(T, (function(t) {
                return h(void 0, void 0, void 0, (function() {
                    var n;
                    return f(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return r.trys.push([0, 4, , 5]), e.canChangeTourLocation() ? [4, t.forward] : [3, 2];
                            case 1:
                                return r.sent() ? e.tourGoNext() : e.tourGoPrevious(), [3, 3];
                            case 2:
                                d.warn("TourNext ignored, cannot change location at this time, another transition is active"), r.label = 3;
                            case 3:
                                return [3, 5];
                            case 4:
                                throw n = r.sent(), d.warn(n), Error("Error while trying to travel to the next tour snapshot - " + n);
                            case 5:
                                return [2]
                        }
                    }))
                }))
            }))
        },
        _ = function(t) {
            var e = a.d[t.metadata.camera_mode];
            if (!e || e === a.b.TRANSITIONING) throw Error("Failed to convert snapshot, invalid viewmode");
            return e === a.b.INSIDE && t.is360 && (e = a.b.OUTSIDE), {
                sid: t.sid,
                thumbnailUrl: t.thumbnailUrl,
                imageUrl: t.imageUrl,
                is360: t.is360,
                name: t.name,
                mode: e,
                zoom: t.metadata.ss_zoom,
                position: t.metadata.camera_position,
                rotation: Object(s.b)(t.metadata.camera_quaternion)
            }
        },
        w = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.id = "GET_TOUR_DATA", e
            }
            return l(e, t), e
        }(i.a),
        x = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.id = "TOUR_START", n.payload = {
                    index: e
                }, n
            }
            return l(e, t), e
        }(i.a),
        E = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.id = "TOUR_STOP", e
            }
            return l(e, t), e
        }(i.a),
        S = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.id = "TOUR_STEP", n.payload = {
                    index: e
                }, n
            }
            return l(e, t), e
        }(i.a),
        T = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.id = "TOUR_STEP", n.payload = {
                    forward: e
                }, n
            }
            return l(e, t), e
        }(i.a);
    e.d = function(t, e, n) {
        Promise.all([t.waitForModule(o.Ib), t.market.waitForData(u.b)]).then((function(t) {
            var n = p(t, 2),
                r = n[0],
                i = n[1];
            v(e, r, i), y(e, r), g(e, r), b(e, r)
        })), m(t, e), n.addCommandToInterface({
            version: "3.x",
            namespace: "Tour",
            name: "start",
            args: ["index"]
        }, (function(t) {
            return new x(t.index)
        })), n.addCommandToInterface({
            version: "3.x",
            namespace: "Tour",
            name: "stop",
            args: []
        }, (function() {
            return new E
        })), n.addCommandToInterface({
            version: "3.x",
            namespace: "Tour",
            name: "step",
            args: ["index"]
        }, (function(t) {
            return new S(t.index)
        })), n.addCommandToInterface({
            version: "3.x",
            namespace: "Tour",
            name: "getData",
            args: []
        }, (function() {
            return new w
        })), n.addCommandToInterface({
            version: "3.x",
            namespace: "Tour",
            name: "next",
            args: []
        }, (function() {
            return new T(!0)
        })), n.addCommandToInterface({
            version: "3.x",
            namespace: "Tour",
            name: "prev",
            args: []
        }, (function() {
            return new T(!1)
        }))
    }
}, , function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return f
    })), n.d(e, "b", (function() {
        return p
    })), n.d(e, "c", (function() {
        return d
    }));
    var r, i = n(34),
        o = n(3),
        a = n(84),
        s = n(23),
        u = n(40),
        c = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        l = function() {
            return (l = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        h = new o.a("active-reel"),
        f = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.reel = Object(a.b)([]), e.modified = new Date(0), e
            }
            return c(e, t), e
        }(u.a),
        p = function(t) {
            if (!t) return null;
            var e = new f;
            return t.active_reel && t.active_reel.modified && (e.modified = Object(i.b)(t.active_reel.modified)), t.active_reel && t.active_reel.reel && t.active_reel.reel instanceof Array ? (h.info("Reel has " + t.active_reel.reel.length + " items"), e.reel.replace(t.active_reel.reel)) : h.info("No reel found"), e.commit(), e
        },
        d = function(t, e) {
            var n = t.modified;
            e && e.modified && (n = e.modified);
            var r = Object(s.a)(t && t.reel ? t.reel : []),
                o = e && e.reel ? e.reel : new a.a;
            Object(s.e)(r, Object(s.a)(o));
            var u = [];
            for (var c in r) {
                var h = r[c];
                if (h) {
                    var f = void 0,
                        p = {};
                    h.overrides && (void 0 !== h.overrides.panDirection && (p = l({}, p, {
                        panDirection: h.overrides.panDirection
                    })), void 0 !== h.overrides.transitionType && (p = l({}, p, {
                        transitionType: h.overrides.transitionType
                    }))), f = Object.keys(p).length > 0 ? {
                        sid: h.sid,
                        overrides: p
                    } : {
                        sid: h.sid
                    }, u.push(f)
                }
            }
            return {
                active_reel: {
                    reel: u,
                    modified: Object(i.a)(n)
                }
            }
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return l
    })), n.d(e, "b", (function() {
        return h
    }));
    var r = n(85),
        i = n(14),
        o = n(20),
        a = n(34),
        s = n(3),
        u = n(88),
        c = new s.a("camera-start-serializer"),
        l = function(t) {
            if (!t) return null;
            var e = new r.a;
            if (!t.camera_start && !t.icon) return null;
            e.modified = Object(a.b)(t && t.modified), e.icon = t.icon || void 0;
            var n = 250,
                s = Math.ceil(140.625);
            e.thumb = t.image ? t.image + "&width=" + n + "&height=" + s + "&fit=crop&imgopt=1" : void 0;
            e.pose = {};
            var u = t.camera_start || null;
            try {
                if (u && Object.keys(u).length > 0) {
                    if (!u.camera || !u.camera.position || !u.camera.quaternion) return c.warn("Corrupt camera_start - camera data invalid"), e;
                    if (!u.hasOwnProperty("mode")) return c.warn("Corrupt camera_start - mode missing"), e;
                    var l = void 0;
                    if (0 === u.mode) {
                        if (!(u.pano && u.pano.uuid && u.pano.position && u.pano.quaternion)) return c.warn("Corrupt camera_start - pano data invalid", u), e;
                        l = {
                            uuid: u.pano.uuid,
                            position: Object(i.j)(u.pano.position),
                            rotation: Object(i.h)(u.pano.quaternion)
                        }
                    } else l = {};
                    var h = new r.b(Object(o.c)(3 === u.mode ? 0 : u.mode), Object(i.j)(u.camera.position), Object(i.i)(u.camera.quaternion), u.camera.zoom, l, u.floorVisibility);
                    e.pose = h
                }
            } catch (t) {
                return c.warn("invalid scanmodel.camera_start", t), null
            }
            return e
        },
        h = function(t, e) {
            var n = e && "icon" in e ? e : t,
                r = n.pose;
            return {
                modified: Object(a.a)(n.modified),
                thumb: n.thumb,
                icon: n.icon,
                camera_start: {
                    camera: {
                        position: r.camera.position ? Object(u.c)(Object(i.j)(r.camera.position)) : void 0,
                        quaternion: r.camera.rotation ? Object(u.b)(Object(i.i)(r.camera.rotation)) : void 0,
                        zoom: r.camera.zoom ? r.camera.zoom : -1
                    },
                    mode: Object(o.b)(r.mode),
                    pano: {
                        position: r.pano.position ? Object(i.j)(r.pano.position) : void 0,
                        quaternion: r.pano.rotation ? Object(u.b)(Object(i.h)(r.pano.rotation)) : void 0,
                        uuid: r.pano.uuid
                    },
                    floorVisibility: r.floorVisibility
                }
            }
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return h
    })), n.d(e, "b", (function() {
        return f
    }));
    var r = n(14),
        i = n(63),
        o = n(23),
        a = n(27),
        s = n(88),
        u = n(3),
        c = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        l = new u.a("sweeps");

    function h(t) {
        function e(e, n, r, i, o) {
            var a = e[n];
            if (void 0 !== a) r[i] = o ? o(a) : a;
            else if (t) throw Error("Required property missing in data: " + n)
        }
        return void 0 === t && (t = !0),
            function(t) {
                var n, o, a, s;
                if (!t || Object.keys(t).length < 1) return null;
                var u = {};
                try {
                    var h = [];
                    try {
                        for (var f = c(t), p = f.next(); !p.done; p = f.next()) {
                            var d = p.value,
                                m = new i.c;
                            if (e(d, "index", m, "index"), h[m.index]) throw Error("Duplicate sweep index found");
                            h[m.index] = m, e(d, "sweep_uuid", h[m.index], "id", (function(t) {
                                return t.replace(/-/g, "")
                            }))
                        }
                    } catch (t) {
                        n = {
                            error: t
                        }
                    } finally {
                        try {
                            p && !p.done && (o = f.return) && o.call(f)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                    var v = function(t) {
                        var n = h[t.index];
                        e(t, "neighbors", n, "neighbours", (function(t) {
                            return t.map((function(t) {
                                return h[t] ? h[t].id : void 0
                            })).filter((function(t) {
                                return void 0 !== t
                            }))
                        })), e(t, "alignment_type", n, "alignmentType", (function(t) {
                            return "string" == typeof t && i.a.hasOwnProperty(t.toUpperCase()) ? t : i.a.UNALIGNED
                        })), e(t, "placement", n, "placementType", (function(e) {
                            return "string" == typeof t.placement && i.b.hasOwnProperty(t.placement.toUpperCase()) ? t.placement : i.b.UNPLACED
                        })), e(t, "rotation", n, "rotation", (function(t) {
                            return r.a.fromVisionQuaternion(t)
                        })), e(t, "position", n, "position", (function(t) {
                            return r.a.fromVisionVector(t)
                        })), e(t, "floor_position", n, "floorPosition", (function(t) {
                            return r.a.fromVisionVector(t)
                        })), e(t, "sweep_name", n, "name"), e(t, "floor_index", n, "floor", (function(t) {
                            return isNaN(t) ? -1 : t
                        })), e(t, "room_index", n, "room", (function(t) {
                            return isNaN(t) ? -1 : t
                        })), e(t, "tags", n, "enabled", (function(t) {
                            return -1 !== t.indexOf("showcase")
                        })), e(t, "tags", n, "vrenabled", (function(t) {
                            return -1 !== t.indexOf("vr")
                        })), u[n.id] = n
                    };
                    try {
                        for (var y = c(t), g = y.next(); !g.done; g = y.next()) {
                            v(d = g.value)
                        }
                    } catch (t) {
                        a = {
                            error: t
                        }
                    } finally {
                        try {
                            g && !g.done && (s = y.return) && s.call(y)
                        } finally {
                            if (a) throw a.error
                        }
                    }
                } catch (t) {
                    l.error("Error reading sweeps list", t)
                }
                return 0 === Object.keys(u).length ? null : u
            }
    }
    var f = function(t, e) {
        var n = [];
        if (!e) throw Error("SweepsV2 must serialize via diffs");

        function u(t, e, n) {
            return function(r, i, u) {
                if (Object(a.i)(e, r)) {
                    var c = void 0;
                    "object" == typeof e[r] ? (c = {}, Object(o.e)(c, t[r]), "rotation" === r && (c = Object(s.b)(c))) : c = t[r], n[i] = u ? u(c) : c
                }
            }
        }
        for (var c in e) {
            var l = t[c],
                h = e[c],
                f = {},
                p = u(l, h, f);
            p("placementType", "placement"), h.placementType !== i.b.UNPLACED && (p("position", "position", (function(t) {
                return r.a.toVisionVector(t)
            })), p("rotation", "rotation", (function(t) {
                return Object(s.b)(r.a.toVisionQuaternion(t))
            }))), (Object(a.i)(h, "enabled") || Object(a.i)(h, "vrenabled")) && (f.tags = [], (void 0 !== h.enabled ? h.enabled : l.enabled) && (f.tags.push("showcase"), (void 0 !== h.vrenabled ? h.vrenabled : l.vrenabled) && f.tags.push("vr"))), p("name", "sweep_name"), p("floor", "floor_index"), Object.keys(f).length > 0 && (f.index = l.index, f.sweep_uuid = l.id, n.push(f))
        }
        return 0 === n.length ? null : n
    }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return h
    })), n.d(e, "b", (function() {
        return f
    })), n.d(e, "c", (function() {
        return p
    }));
    var r = n(14),
        i = n(306),
        o = n(23),
        a = n(3),
        s = n(34),
        u = function() {
            return (u = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        c = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        l = new a.a("label-serialization"),
        h = function(t) {
            var e, n;
            if (!t) return null;
            var o = {};
            if (t) try {
                for (var a = c(Object.keys(t)), u = a.next(); !u.done; u = a.next()) {
                    var h = t[u.value];
                    try {
                        if (!h || !h.version || isNaN(Number.parseFloat(h.version)) || Number.parseFloat(h.version) < 3) continue;
                        var f = new i.a;
                        f.copy({
                            floor: void 0 !== h.floorId ? h.floorId : 0,
                            position: Object(r.j)(h.position),
                            sid: h.sid,
                            text: h.text,
                            visible: h.visible,
                            roomId: h.roomId,
                            created: Object(s.b)(h.created),
                            created_by: h.created_by,
                            modified: Object(s.b)(h.modified),
                            version: h.version
                        }), o[h.sid] = f
                    } catch (t) {
                        l.warn("Error parsing label data; not adding label: ", h)
                    }
                }
            } catch (t) {
                e = {
                    error: t
                }
            } finally {
                try {
                    u && !u.done && (n = a.return) && n.call(a)
                } finally {
                    if (e) throw e.error
                }
            }
            return o
        },
        f = function(t, e) {
            var n, i, a = {},
                l = u({}, t);
            Object(o.e)(l, e);
            try {
                for (var h = c(Object.keys(l)), f = h.next(); !f.done; f = h.next()) {
                    var p = l[f.value];
                    p && (a[p.sid] = {
                        floorId: p.floor,
                        position: p.position,
                        sid: p.sid,
                        text: p.text,
                        visible: p.visible,
                        roomId: p.roomId,
                        created: Object(s.a)(p.created),
                        created_by: p.created_by,
                        modified: Object(s.a)(p.modified),
                        version: p.version
                    }, a[p.sid].position = Object(r.j)(p.position))
                }
            } catch (t) {
                n = {
                    error: t
                }
            } finally {
                try {
                    f && !f.done && (i = h.return) && i.call(h)
                } finally {
                    if (n) throw n.error
                }
            }
            return a
        },
        p = function(t, e) {
            var n, i, a = [],
                l = u({}, t);
            Object(o.e)(l, e);
            try {
                for (var h = c(Object.keys(l)), f = h.next(); !f.done; f = h.next()) {
                    var p = l[f.value];
                    p && a.push({
                        floorId: p.floor,
                        position: Object(r.j)(p.position),
                        sid: p.sid,
                        text: p.text,
                        visible: p.visible,
                        roomId: p.roomId,
                        created: Object(s.a)(p.created),
                        created_by: p.created_by,
                        modified: Object(s.a)(p.modified),
                        version: p.version
                    })
                }
            } catch (t) {
                n = {
                    error: t
                }
            } finally {
                try {
                    f && !f.done && (i = h.return) && i.call(h)
                } finally {
                    if (n) throw n.error
                }
            }
            return a
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return p
    })), n.d(e, "b", (function() {
        return d
    }));
    var r = n(14),
        i = n(267),
        o = n(39),
        a = n(23),
        s = n(3),
        u = n(34),
        c = n(10),
        l = function() {
            return (l = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        h = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        f = new s.a("measurement-serialization"),
        p = function(t) {
            var e, n;
            if (!t) return null;
            var a = {};
            try {
                if (t) try {
                    for (var s = h(Object.keys(t)), l = s.next(); !l.done; l = s.next()) {
                        var p = t[l.value];
                        if (p && p.version && !isNaN(Number.parseFloat(p.version)) && !(Number.parseFloat(p.version) < 3)) {
                            var d = "type" in p ? p.type : p.start_normal ? o.a.ThreeD : o.a.FloorplanOnly,
                                m = new i.a;
                            a[p.sid] = m.copy({
                                start_position: Object(r.j)(p.start_position),
                                end_position: Object(r.j)(p.end_position),
                                type: d,
                                start_normal: p.start_normal && Object(r.j)(p.start_normal) || c.b.UP.clone(),
                                end_normal: p.end_normal && Object(r.j)(p.end_normal) || c.b.UP.clone(),
                                sid: p.sid,
                                text: p.text,
                                visible: p.visible,
                                floor: void 0 !== p.floor ? p.floor : -1,
                                created: Object(u.b)(p.created),
                                created_by: p.created_by,
                                modified: Object(u.b)(p.modified),
                                version: m.version,
                                room: void 0 !== p.room ? p.room : -1,
                                group: void 0 !== p.group ? p.group : -1,
                                groupOrder: void 0 !== p.groupOrder ? p.groupOrder : -1
                            })
                        }
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        l && !l.done && (n = s.return) && n.call(s)
                    } finally {
                        if (e) throw e.error
                    }
                }
            } catch (t) {
                return f.debug("Error parsing measurement data;", t), null
            }
            return a
        },
        d = function(t) {
            return function(e, n) {
                var r, i, o = l({}, e);
                Object(a.e)(o, n);
                var s = {};
                try {
                    for (var u = h(Object.keys(o)), c = u.next(); !c.done; c = u.next()) {
                        var f = c.value,
                            p = o[f];
                        void 0 !== t && p.type !== t || (s[f] = p)
                    }
                } catch (t) {
                    r = {
                        error: t
                    }
                } finally {
                    try {
                        c && !c.done && (i = u.return) && i.call(u)
                    } finally {
                        if (r) throw r.error
                    }
                }
                return m(s, {})
            }
        },
        m = function(t, e) {
            var n, i, o = {},
                s = l({}, t);
            Object(a.e)(s, e);
            try {
                for (var c = h(Object.keys(s)), f = c.next(); !f.done; f = c.next()) {
                    var p = s[f.value];
                    p && (o[p.sid] = {
                        type: p.type,
                        start_position: Object(r.j)(p.start_position),
                        end_position: Object(r.j)(p.end_position),
                        start_normal: Object(r.j)(p.start_normal),
                        end_normal: Object(r.j)(p.end_normal),
                        floor: p.floor,
                        sid: p.sid,
                        text: p.text,
                        visible: p.visible,
                        created: Object(u.a)(p.created),
                        created_by: p.created_by,
                        modified: Object(u.a)(p.modified),
                        version: "3.2",
                        room: p.room,
                        group: p.group,
                        groupOrder: p.groupOrder
                    })
                }
            } catch (t) {
                n = {
                    error: t
                }
            } finally {
                try {
                    f && !f.done && (i = c.return) && i.call(c)
                } finally {
                    if (n) throw n.error
                }
            }
            return o
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return u
    })), n.d(e, "b", (function() {
        return c
    }));
    var r = n(3),
        i = n(23),
        o = function() {
            return (o = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        a = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        s = new r.a("floor-serialization"),
        u = function(t) {
            if (!t || !t.floors) return null;
            var e = {},
                n = t.floors;
            try {
                n.split(",").forEach((function(t, n) {
                    t = t || "Floor " + (n + 1), e[n] = {
                        name: t.trim(),
                        floorIndex: n
                    }
                }))
            } catch (t) {
                return s.debug("Error parsing floors data or no data inputted - " + t), null
            }
            return e
        },
        c = function(t, e) {
            var n, r, s = o({}, t),
                u = [];
            Object(i.e)(s, e);
            try {
                for (var c = a(Object.keys(s)), l = c.next(); !l.done; l = c.next()) {
                    var h = l.value;
                    s[h] && u.push(s[h].name)
                }
            } catch (t) {
                n = {
                    error: t
                }
            } finally {
                try {
                    l && !l.done && (r = c.return) && r.call(c)
                } finally {
                    if (n) throw n.error
                }
            }
            return {
                floors: u.join(", ")
            }
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    })), n.d(e, "b", (function() {
        return o
    }));
    var r = n(78),
        i = function(t) {
            return t && t.player_options ? ("unit_type" in t.player_options || (t.player_options.unit_type = t.unit_type), new r.b(t.player_options)) : null
        },
        o = function(t, e) {
            var n = t.options;
            return e && e.options && (n = e.options), {
                player_options: n
            }
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return c
    })), n.d(e, "b", (function() {
        return l
    })), n.d(e, "c", (function() {
        return h
    }));
    var r, i = n(84),
        o = n(97),
        a = n(25),
        s = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        u = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        c = .1,
        l = 1,
        h = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.floors = e, n.name = "floors-view", n.floorNames = new i.a, n.floorHidden = {}, n.currentFloor = -1, n.getFloorMin = function() {
                    var t = n.floors.getFloor(Math.max(n.currentFloor, 0));
                    return t ? t.boundingBox.min.y : 0
                }, n.getFloorMax = function() {
                    var t = n.floors.floors.get(n.highestVisibleFloor());
                    return t ? t.boundingBox.max.y : 0
                }, n.isHidden = function(t) {
                    return !!n.floorHidden[t]
                }, n.getHighestVisibleFloor = function() {
                    return n.currentFloor > -1 ? n.currentFloor : n.totalFloors - 1
                }, n.getViewData = function(t) {
                    var e = n.floors.getFloor(t),
                        r = n.derivedData[t];
                    return e && !r && n.makeViewData && (n.derivedData[t] = n.makeViewData(e)), n.derivedData[t]
                }, n.raycastGroups = function(t) {
                    var e, r, i = [],
                        o = -1 === n.currentFloor,
                        a = n.floors.getCollection();
                    try {
                        for (var s = u(a), c = s.next(); !c.done; c = s.next()) {
                            var l = c.value,
                                h = l.floorIndex === n.currentFloor;
                            (t || o || h) && i.push(l.colliderGroupName)
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            c && !c.done && (r = s.return) && r.call(s)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                    return i
                }, n.derivedData = {}, n.currentFloor = -1, n.transition = {
                    from: -1,
                    to: -1,
                    progress: new o.a(0),
                    promise: Promise.resolve()
                }, n
            }
            return s(e, t), e.prototype.setFloorVisibility = function(t, e) {
                var n, r;
                if (t.mesh) try {
                    for (var i = u(t.mesh.roomMeshes), o = i.next(); !o.done; o = i.next()) {
                        o.value.opacity = e
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        o && !o.done && (r = i.return) && r.call(i)
                    } finally {
                        if (n) throw n.error
                    }
                }
                switch (e) {
                    case c:
                        this.setHidden(t, !0);
                        break;
                    case l:
                        this.setHidden(t, !1)
                }
            }, Object.defineProperty(e.prototype, "totalFloors", {
                get: function() {
                    return this.floors.getFloorCount()
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.resetFloorVisibility = function() {
                var t, e;
                if (this.floors.floors) try {
                    for (var n = u(this.floors.floors), r = n.next(); !r.done; r = n.next()) {
                        var i = r.value;
                        this.showFloor(i)
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
                this.floorHidden = {}
            }, e.prototype.showFloor = function(t) {
                var e, n;
                if (this.isHidden(t.floorIndex) && t.mesh) {
                    try {
                        for (var r = u(t.mesh.roomMeshes), i = r.next(); !i.done; i = r.next()) {
                            i.value.opacity = 1
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            i && !i.done && (n = r.return) && n.call(r)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                    this.setHidden(t, !1)
                }
            }, e.prototype.setHidden = function(t, e) {
                this.floorHidden[t.floorIndex] = e
            }, Object.defineProperty(e.prototype, "highestVisibleFloor", {
                get: function() {
                    return this.getHighestVisibleFloor
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.setViewDataFactory = function(t) {
                this.makeViewData = t
            }, e.prototype.iterate = function(t) {
                for (var e in this.derivedData) {
                    t(this.getViewData(parseInt(e, 10)))
                }
            }, e.prototype.getFloorNames = function() {
                var t = [];
                for (var e in this.derivedData) t.push(this.derivedData[e].name);
                return t
            }, e.prototype.initialize = function() {}, e.prototype.dispose = function() {}, e.prototype.getFloorsVisibility = function() {
                if (-1 === this.currentFloor) return [];
                for (var t = [], e = 0; e < this.totalFloors; e++) t[e] = e === this.currentFloor ? 1 : 0;
                return t
            }, e
        }(a.a)
}, function(t, e, n) {
    "use strict";
    var r = n(24),
        i = n(54),
        o = n(1),
        a = n(58),
        s = n(106),
        u = n(205),
        c = n(123),
        l = n(95),
        h = n(120),
        f = function() {
            function t(t) {
                this.maxEdgeLength = t
            }
            return t.prototype.modify = function(t) {
                for (var e, n = [], r = [], i = this.maxEdgeLength * this.maxEdgeLength, o = 0, a = t.faceVertexUvs.length; o < a; o++) r[o] = [];
                for (o = 0, a = t.faces.length; o < a; o++) {
                    var s = t.faces[o];
                    if (s instanceof h.a) {
                        var u = s.a,
                            c = s.b,
                            l = s.c,
                            f = t.vertices[u],
                            p = t.vertices[c],
                            d = t.vertices[l],
                            m = f.distanceToSquared(p),
                            v = p.distanceToSquared(d),
                            y = f.distanceToSquared(d);
                        if (m > i || v > i || y > i) {
                            var g = void 0,
                                b = t.vertices.length,
                                _ = s.clone(),
                                w = s.clone();
                            if (m >= v && m >= y) {
                                if ((g = f.clone()).lerp(p, .5), _.a = u, _.b = b, _.c = l, w.a = b, w.b = c, w.c = l, 3 === s.vertexNormals.length)(x = s.vertexNormals[0].clone()).lerp(s.vertexNormals[1], .5), _.vertexNormals[1].copy(x), w.vertexNormals[0].copy(x);
                                if (3 === s.vertexColors.length)(E = s.vertexColors[0].clone()).lerp(s.vertexColors[1], .5), _.vertexColors[1].copy(E), w.vertexColors[0].copy(E);
                                e = 0
                            } else if (v >= m && v >= y) {
                                if ((g = p.clone()).lerp(d, .5), _.a = u, _.b = c, _.c = b, w.a = b, w.b = l, w.c = u, 3 === s.vertexNormals.length)(x = s.vertexNormals[1].clone()).lerp(s.vertexNormals[2], .5), _.vertexNormals[2].copy(x), w.vertexNormals[0].copy(x), w.vertexNormals[1].copy(s.vertexNormals[2]), w.vertexNormals[2].copy(s.vertexNormals[0]);
                                if (3 === s.vertexColors.length)(E = s.vertexColors[1].clone()).lerp(s.vertexColors[2], .5), _.vertexColors[2].copy(E), w.vertexColors[0].copy(E), w.vertexColors[1].copy(s.vertexColors[2]), w.vertexColors[2].copy(s.vertexColors[0]);
                                e = 1
                            } else {
                                var x, E;
                                if ((g = f.clone()).lerp(d, .5), _.a = u, _.b = c, _.c = b, w.a = b, w.b = c, w.c = l, 3 === s.vertexNormals.length)(x = s.vertexNormals[0].clone()).lerp(s.vertexNormals[2], .5), _.vertexNormals[2].copy(x), w.vertexNormals[0].copy(x);
                                if (3 === s.vertexColors.length)(E = s.vertexColors[0].clone()).lerp(s.vertexColors[2], .5), _.vertexColors[2].copy(E), w.vertexColors[0].copy(E);
                                e = 2
                            }
                            n.push(_, w), t.vertices.push(g);
                            for (var S = 0, T = t.faceVertexUvs.length; S < T; S++)
                                if (t.faceVertexUvs[S].length) {
                                    var M = t.faceVertexUvs[S][o],
                                        O = M[0],
                                        P = M[1],
                                        A = M[2],
                                        L = void 0,
                                        R = void 0;
                                    if (0 === e)(D = O.clone()).lerp(P, .5), L = [O.clone(), D.clone(), A.clone()], R = [D.clone(), P.clone(), A.clone()];
                                    else if (1 === e) {
                                        (D = P.clone()).lerp(A, .5), L = [O.clone(), P.clone(), D.clone()], R = [D.clone(), A.clone(), O.clone()]
                                    } else {
                                        var D;
                                        (D = O.clone()).lerp(A, .5), L = [O.clone(), P.clone(), D.clone()], R = [D.clone(), P.clone(), A.clone()]
                                    }
                                    r[S].push(L, R)
                                }
                        } else {
                            n.push(s);
                            for (S = 0, T = t.faceVertexUvs.length; S < T; S++) r[S].push(t.faceVertexUvs[S][o])
                        }
                    }
                }
                t.faces = n, t.faceVertexUvs = r
            }, t
        }();
    n.d(e, "a", (function() {
        return g
    })), n.d(e, "b", (function() {
        return b
    }));
    var p, d = (p = function(t, e) {
            return (p = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            p(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        m = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        v = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        y = new i.a({
            wireframe: !0
        }),
        g = .1,
        b = function(t) {
            function e(e, n, r) {
                void 0 === r && (r = s.a.ALL);
                var i = t.call(this) || this;
                return i.floorIndex = e, i.roomIndex = n, i._opacity = 1, i._chunks = [], i.built = !1, i.layers.mask = r.mask, i
            }
            return d(e, t), e.prototype.addChunk = function(t) {
                -1 === this._chunks.indexOf(t) && this._chunks.push(t)
            }, e.prototype.getChunk = function(t) {
                return this._chunks[t]
            }, e.prototype.build = function() {
                var t = this;
                if (this.built) throw new Error("build() should only be called once");
                var e = Object(u.a)(this._chunks.map((function(t) {
                    return t.geometry
                })));
                e.clearGroups();
                var n = 0;
                this._chunks.forEach((function(r, i) {
                    var o = r.geometry;
                    r.geometry.dispose(), r.geometry = null, r.build(t, i), e.addGroup(n, o.index.count, i), n += o.index.count
                })), this.geometry = e, this.material = this._chunks.map((function(t) {
                    return y
                })), this.size = this.boundingBox.getSize(new o.a), this.center = this.boundingBox.getCenter(new o.a), this.built = !0
            }, e.prototype.tessellate = function(t) {
                for (var e = new f(t), n = (new a.a).fromBufferGeometry(this.geometry), i = 0; n.faces.length !== i;) i = n.faces.length, e.modify(n);
                this.geometry = (new r.a).fromGeometry(n)
            }, Object.defineProperty(e.prototype, "boundingBox", {
                get: function() {
                    return this.geometry.boundingBox
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "opacity", {
                get: function() {
                    return this._opacity
                },
                set: function(t) {
                    var e, n;
                    if (t !== this.opacity) {
                        var r = t > g;
                        this.renderOrder = r ? l.a.visibleFloor : l.a.ghostFloor, this._opacity = t;
                        try {
                            for (var i = v(this.chunks), o = i.next(); !o.done; o = i.next()) {
                                o.value.setOpacity(t)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                o && !o.done && (n = i.return) && n.call(i)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                    }
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "chunks", {
                get: function() {
                    var t = this._chunks;
                    return function() {
                        return m(this, (function(e) {
                            switch (e.label) {
                                case 0:
                                    return [5, v(t)];
                                case 1:
                                    return e.sent(), [2]
                            }
                        }))
                    }()
                },
                enumerable: !0,
                configurable: !0
            }), e
        }(c.a)
}, function(t, e) {
    t.exports = {}
}, function(t, e, n) {
    t.exports = n(93)
}, function(t, e, n) {
    var r = n(93),
        i = n(170),
        o = n(232),
        a = n(287),
        s = r.Symbol,
        u = i("wks");
    t.exports = function(t) {
        return u[t] || (u[t] = a && s[t] || (a ? s : o)("Symbol." + t))
    }
}, function(t, e, n) {
    "use strict";
    t.exports = n(298)() ? Object.setPrototypeOf : n(299)
}, function(t, e, n) {
    "use strict";
    var r = Object.prototype.toString,
        i = r.call(function() {
            return arguments
        }());
    t.exports = function(t) {
        return r.call(t) === i
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i = Object.prototype.toString,
        o = i.call("");
    t.exports = function(t) {
        return "string" == typeof t || t && "object" === r(t) && (t instanceof String || i.call(t) === o) || !1
    }
}, function(t, e, n) {
    "use strict";
    var r = n(449);
    t.exports = Function.prototype.bind || r
}, function(t, e, n) {
    "use strict";
    var r, i = n(140),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n, r, i) {
                var o = t.call(this, e, i) || this;
                return o.alignmentType = n, o.placementType = r, o
            }
            return o(e, t), e
        }(i.a);
    e.a = a
}, function(t, e, n) {
    "use strict";
    var r, i = n(140),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return o(e, t), e
        }(i.a);
    e.a = a
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(52),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.position = e, r.delta = n, r
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.fromMode = n, r.toMode = e, r.timestamp = Date.now(), r
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return o
    }));
    var r = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        i = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        o = function() {
            function t(t) {
                this.size = t, this.index = 0, this.buffer = []
            }
            return t.prototype.push = function(t) {
                this.index >= this.size && (this.index = 0), this.buffer[this.index] = t, this.index++
            }, t.prototype.peek = function() {
                return this.buffer[this.index <= this.buffer.length ? this.index - 1 : 0] || null
            }, t.prototype.getList = function() {
                return this.buffer
            }, t.prototype[Symbol.iterator] = function() {
                return r(this, (function(t) {
                    switch (t.label) {
                        case 0:
                            return [5, i(this.buffer)];
                        case 1:
                            return t.sent(), [2]
                    }
                }))
            }, t.prototype.clear = function() {
                this.buffer = [], this.index = 0
            }, t
        }()
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i, o = "object" === ("undefined" == typeof Reflect ? "undefined" : r(Reflect)) ? Reflect : null,
        a = o && "function" == typeof o.apply ? o.apply : function(t, e, n) {
            return Function.prototype.apply.call(t, e, n)
        };
    i = o && "function" == typeof o.ownKeys ? o.ownKeys : Object.getOwnPropertySymbols ? function(t) {
        return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))
    } : function(t) {
        return Object.getOwnPropertyNames(t)
    };
    var s = Number.isNaN || function(t) {
        return t != t
    };

    function u() {
        u.init.call(this)
    }
    t.exports = u, u.EventEmitter = u, u.prototype._events = void 0, u.prototype._eventsCount = 0, u.prototype._maxListeners = void 0;
    var c = 10;

    function l(t) {
        return void 0 === t._maxListeners ? u.defaultMaxListeners : t._maxListeners
    }

    function h(t, e, n, i) {
        var o, a, s, u;
        if ("function" != typeof n) throw new TypeError('The "listener" argument must be of type Function. Received type ' + r(n));
        if (void 0 === (a = t._events) ? (a = t._events = Object.create(null), t._eventsCount = 0) : (void 0 !== a.newListener && (t.emit("newListener", e, n.listener ? n.listener : n), a = t._events), s = a[e]), void 0 === s) s = a[e] = n, ++t._eventsCount;
        else if ("function" == typeof s ? s = a[e] = i ? [n, s] : [s, n] : i ? s.unshift(n) : s.push(n), (o = l(t)) > 0 && s.length > o && !s.warned) {
            s.warned = !0;
            var c = new Error("Possible EventEmitter memory leak detected. " + s.length + " " + String(e) + " listeners added. Use emitter.setMaxListeners() to increase limit");
            c.name = "MaxListenersExceededWarning", c.emitter = t, c.type = e, c.count = s.length, u = c, console && console.warn && console.warn(u)
        }
        return t
    }

    function f() {
        for (var t = [], e = 0; e < arguments.length; e++) t.push(arguments[e]);
        this.fired || (this.target.removeListener(this.type, this.wrapFn), this.fired = !0, a(this.listener, this.target, t))
    }

    function p(t, e, n) {
        var r = {
                fired: !1,
                wrapFn: void 0,
                target: t,
                type: e,
                listener: n
            },
            i = f.bind(r);
        return i.listener = n, r.wrapFn = i, i
    }

    function d(t, e, n) {
        var r = t._events;
        if (void 0 === r) return [];
        var i = r[e];
        return void 0 === i ? [] : "function" == typeof i ? n ? [i.listener || i] : [i] : n ? function(t) {
            for (var e = new Array(t.length), n = 0; n < e.length; ++n) e[n] = t[n].listener || t[n];
            return e
        }(i) : v(i, i.length)
    }

    function m(t) {
        var e = this._events;
        if (void 0 !== e) {
            var n = e[t];
            if ("function" == typeof n) return 1;
            if (void 0 !== n) return n.length
        }
        return 0
    }

    function v(t, e) {
        for (var n = new Array(e), r = 0; r < e; ++r) n[r] = t[r];
        return n
    }
    Object.defineProperty(u, "defaultMaxListeners", {
        enumerable: !0,
        get: function() {
            return c
        },
        set: function(t) {
            if ("number" != typeof t || t < 0 || s(t)) throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + t + ".");
            c = t
        }
    }), u.init = function() {
        void 0 !== this._events && this._events !== Object.getPrototypeOf(this)._events || (this._events = Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0
    }, u.prototype.setMaxListeners = function(t) {
        if ("number" != typeof t || t < 0 || s(t)) throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + t + ".");
        return this._maxListeners = t, this
    }, u.prototype.getMaxListeners = function() {
        return l(this)
    }, u.prototype.emit = function(t) {
        for (var e = [], n = 1; n < arguments.length; n++) e.push(arguments[n]);
        var r = "error" === t,
            i = this._events;
        if (void 0 !== i) r = r && void 0 === i.error;
        else if (!r) return !1;
        if (r) {
            var o;
            if (e.length > 0 && (o = e[0]), o instanceof Error) throw o;
            var s = new Error("Unhandled error." + (o ? " (" + o.message + ")" : ""));
            throw s.context = o, s
        }
        var u = i[t];
        if (void 0 === u) return !1;
        if ("function" == typeof u) a(u, this, e);
        else {
            var c = u.length,
                l = v(u, c);
            for (n = 0; n < c; ++n) a(l[n], this, e)
        }
        return !0
    }, u.prototype.addListener = function(t, e) {
        return h(this, t, e, !1)
    }, u.prototype.on = u.prototype.addListener, u.prototype.prependListener = function(t, e) {
        return h(this, t, e, !0)
    }, u.prototype.once = function(t, e) {
        if ("function" != typeof e) throw new TypeError('The "listener" argument must be of type Function. Received type ' + r(e));
        return this.on(t, p(this, t, e)), this
    }, u.prototype.prependOnceListener = function(t, e) {
        if ("function" != typeof e) throw new TypeError('The "listener" argument must be of type Function. Received type ' + r(e));
        return this.prependListener(t, p(this, t, e)), this
    }, u.prototype.removeListener = function(t, e) {
        var n, i, o, a, s;
        if ("function" != typeof e) throw new TypeError('The "listener" argument must be of type Function. Received type ' + r(e));
        if (void 0 === (i = this._events)) return this;
        if (void 0 === (n = i[t])) return this;
        if (n === e || n.listener === e) 0 == --this._eventsCount ? this._events = Object.create(null) : (delete i[t], i.removeListener && this.emit("removeListener", t, n.listener || e));
        else if ("function" != typeof n) {
            for (o = -1, a = n.length - 1; a >= 0; a--)
                if (n[a] === e || n[a].listener === e) {
                    s = n[a].listener, o = a;
                    break
                }
            if (o < 0) return this;
            0 === o ? n.shift() : function(t, e) {
                for (; e + 1 < t.length; e++) t[e] = t[e + 1];
                t.pop()
            }(n, o), 1 === n.length && (i[t] = n[0]), void 0 !== i.removeListener && this.emit("removeListener", t, s || e)
        }
        return this
    }, u.prototype.off = u.prototype.removeListener, u.prototype.removeAllListeners = function(t) {
        var e, n, r;
        if (void 0 === (n = this._events)) return this;
        if (void 0 === n.removeListener) return 0 === arguments.length ? (this._events = Object.create(null), this._eventsCount = 0) : void 0 !== n[t] && (0 == --this._eventsCount ? this._events = Object.create(null) : delete n[t]), this;
        if (0 === arguments.length) {
            var i, o = Object.keys(n);
            for (r = 0; r < o.length; ++r) "removeListener" !== (i = o[r]) && this.removeAllListeners(i);
            return this.removeAllListeners("removeListener"), this._events = Object.create(null), this._eventsCount = 0, this
        }
        if ("function" == typeof(e = n[t])) this.removeListener(t, e);
        else if (void 0 !== e)
            for (r = e.length - 1; r >= 0; r--) this.removeListener(t, e[r]);
        return this
    }, u.prototype.listeners = function(t) {
        return d(this, t, !0)
    }, u.prototype.rawListeners = function(t) {
        return d(this, t, !1)
    }, u.listenerCount = function(t, e) {
        return "function" == typeof t.listenerCount ? t.listenerCount(e) : m.call(t, e)
    }, u.prototype.listenerCount = m, u.prototype.eventNames = function() {
        return this._eventsCount > 0 ? i(this._events) : []
    }
}, function(t, e, n) {
    "use strict";
    var r, i;
    n.d(e, "a", (function() {
            return i
        })),
        function(t) {
            t[t.NAVIGATION = 0] = "NAVIGATION", t[t.MODEL = 1] = "MODEL", t[t.EXT_LINK = 2] = "EXT_LINK"
        }(i || (i = {}));
    (r = {})[i.NAVIGATION] = "navigation", r[i.MODEL] = "model", r[i.EXT_LINK] = "ext-link"
}, function(t, e, n) {
    "use strict";

    function r(t) {
        if (0 === t.length) return -1 / 0;
        for (var e = t[0], n = 1, r = t.length; n < r; ++n) t[n] > e && (e = t[n]);
        return e
    }
    n.d(e, "a", (function() {
        return r
    }))
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return u
    }));
    var r = n(24),
        i = n(12),
        o = n(37),
        a = n(49),
        s = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        };

    function u(t) {
        var e, n;
        if (0 === t.length) throw Error("Can't merge empty list of geometries");
        if (1 === t.length) return t[0];
        var u = 0,
            l = 0,
            h = 0,
            f = 0,
            p = new o.a;
        try {
            for (var d = s(t), m = d.next(); !m.done; m = d.next()) {
                var v = m.value;
                u += v.index.count, l += v.getAttribute("position").count, v.getAttribute("uv") && (h += v.getAttribute("uv").count), v.boundingBox && (p.union(v.boundingBox), f++)
            }
        } catch (t) {
            e = {
                error: t
            }
        } finally {
            try {
                m && !m.done && (n = d.return) && n.call(d)
            } finally {
                if (e) throw e.error
            }
        }
        var y = new r.a;
        f !== t.length || p.isEmpty() ? y.computeBoundingBox() : y.boundingBox = p, y.boundingSphere = y.boundingBox.getBoundingSphere(new a.a);
        var g = c(new Float32Array(3 * l), "position", t);
        y.setAttribute("position", new i.a(g, 3));
        var b = function(t, e) {
            var n, r, i = 0,
                o = 0;
            try {
                for (var a = s(e), u = a.next(); !u.done; u = a.next()) {
                    for (var c = u.value, l = c.index, h = 0; h < l.array.length; h++) t[i + h] = l.array[h] + o;
                    i += l.array.length, o += c.getAttribute("position").count
                }
            } catch (t) {
                n = {
                    error: t
                }
            } finally {
                try {
                    u && !u.done && (r = a.return) && r.call(a)
                } finally {
                    if (n) throw n.error
                }
            }
            return t
        }(new Uint32Array(u), t);
        if (y.setIndex(new i.a(b, 1)), h) {
            var _ = c(new Float32Array(2 * h), "uv", t);
            y.setAttribute("uv", new i.a(_, 2))
        }
        return y
    }

    function c(t, e, n) {
        var r, i, o = 0;
        try {
            for (var a = s(n), u = a.next(); !u.done; u = a.next()) {
                var c = u.value.getAttribute(e);
                t.set(c.array, o), o += c.array.length
            }
        } catch (t) {
            r = {
                error: t
            }
        } finally {
            try {
                u && !u.done && (i = a.return) && i.call(a)
            } finally {
                if (r) throw r.error
            }
        }
        return t
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        try {
            var e = t.getExtension("WEBGL_debug_renderer_info");
            if (e) return {
                vendor: t.getParameter(e.UNMASKED_VENDOR_WEBGL),
                renderer: t.getParameter(e.UNMASKED_RENDERER_WEBGL)
            }
        } catch (t) {}
        return {
            vendor: "Unknown",
            renderer: "Unknown"
        }
    }

    function i(t) {
        return /Apple A(9|1\d)/.test(t.renderer) || /Adreno \(TM\) (512|530|540|[6-9]\d\d)/.test(t.renderer) || /Mali-G(7[1-9]|[8-9]\d)/.test(t.renderer)
    }
    n.d(e, "a", (function() {
        return r
    })), n.d(e, "b", (function() {
        return i
    }))
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(21),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n, r, i) {
                void 0 === i && (i = 1);
                var o = t.call(this) || this;
                return o.id = "SCHEDULE_PROCESS_COMMAND", o.payload = {
                    type: e,
                    func: n,
                    maxDelay: r,
                    steps: i
                }, o
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return m
    })), n.d(e, "c", (function() {
        return y
    })), n.d(e, "a", (function() {
        return g
    }));
    var r = n(319),
        i = n(3),
        o = n(34),
        a = n(1),
        s = n(18),
        u = n(305),
        c = n(92),
        l = n(88),
        h = n(23),
        f = function() {
            return (f = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        p = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        d = new i.a("mattertags");

    function m(t, e) {
        var n = new u.a(t);
        return function(t) {
            if (!t) return null;
            var i = {};
            for (var u in t) {
                var l = t[u];
                try {
                    if (e && (!l.enabled || 0 === l.label.length && 0 === l.description.length && (!l.media || 0 === l.media.src.length))) continue;
                    var h = new r.a;
                    h.sid = l.sid, h.created = Object(o.b)(l.created), h.modified = Object(o.b)(l.modified), h.enabled = l.enabled, h.label = l.label, h.description = l.description, h.parsedDescription = n.parse(l.description), h.anchorPosition = new a.a(l.position.x, l.position.y, l.position.z), h.anchorNormal = new a.a(l.normal.x, l.normal.y, l.normal.z), h.stemVector = new a.a(l.stem.direction.x, l.stem.direction.y, l.stem.direction.z), h.stemVisible = void 0 === l.stem.enabled || l.stem.enabled, h.floorIndex = l.floor, h.color = l.color ? new s.a(l.color) : new s.a("#03687d"), l.media ? (h.mediaType = c.a.parse(l.media.type), h.mediaSrc = l.media.src) : (h.mediaType = c.a.none, h.mediaSrc = ""), h.isActive = !1, i[u] = h
                } catch (t) {
                    d.warn("Failed to parse tag: " + l.sid)
                }
            }
            return i
        }
    }
    var v = function(t) {
            var e = {
                sid: t.sid,
                created: Object(o.a)(t.created),
                modified: Object(o.a)(t.modified),
                enabled: t.enabled,
                label: t.label,
                description: t.description,
                color: Object(l.a)(t.color),
                position: Object(l.c)(t.anchorPosition),
                normal: Object(l.c)(t.anchorNormal),
                floor: t.floorIndex,
                stem: {
                    direction: Object(l.c)(t.stemVector),
                    enabled: void 0 === t.stemVisible || t.stemVisible
                }
            };
            return t.mediaType !== c.a.none && (e.media = {
                type: t.mediaType,
                src: t.mediaSrc
            }), e
        },
        y = function(t, e) {
            var n, r, i = {},
                o = f({}, t);
            Object(h.e)(o, e);
            try {
                for (var a = p(Object.keys(o)), s = a.next(); !s.done; s = a.next()) {
                    var u = o[s.value];
                    u && (i[u.sid] = v(u))
                }
            } catch (t) {
                n = {
                    error: t
                }
            } finally {
                try {
                    s && !s.done && (r = a.return) && r.call(a)
                } finally {
                    if (n) throw n.error
                }
            }
            return i
        },
        g = function(t, e) {
            var n, r, i = [],
                o = f({}, t);
            Object(h.e)(o, e);
            try {
                for (var a = p(Object.keys(o)), s = a.next(); !s.done; s = a.next()) {
                    var u = o[s.value];
                    u && i.push(v(u))
                }
            } catch (t) {
                n = {
                    error: t
                }
            } finally {
                try {
                    s && !s.done && (r = a.return) && r.call(a)
                } finally {
                    if (n) throw n.error
                }
            }
            return i
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return p
    })), n.d(e, "c", (function() {
        return m
    })), n.d(e, "a", (function() {
        return v
    }));
    var r = n(1),
        i = n(5),
        o = n(14),
        a = n(78),
        s = n(73),
        u = n(132),
        c = new i.a,
        l = new r.a,
        h = new i.a,
        f = new i.a,
        p = function(t, e, n) {
            var r = function(t, e, n) {
                return Object(s.e)(n, t, h), Object(s.e)(n, e, f), {
                    pixelDistance: h.distanceTo(f),
                    startScreenPosition: h,
                    endScreenPosition: f
                }
            }(t, e, n);
            return {
                screenPosition: function(t, e, n) {
                    return l.copy(t).add(e).multiplyScalar(.5), Object(s.e)(n, l, c), c
                }(t, e, n),
                rotation: d(h, f),
                pixelDistance: r.pixelDistance,
                startScreenPosition: r.startScreenPosition,
                endScreenPosition: r.endScreenPosition
            }
        },
        d = function(t, e) {
            var n = t.y - e.y,
                r = t.x - e.x,
                i = Math.atan2(n, r) * o.c;
            return i = i >= 90 || i <= -90 ? i + 180 : i
        },
        m = function(t, e) {
            void 0 === e && (e = a.c.USFractional);
            var n = '0"';
            switch (e) {
                case a.c.USFractional:
                    var r = Object(u.c)(t),
                        i = r.feet,
                        o = r.inches;
                    n = i > 0 ? i + "' " + o + '"' : o + '"';
                    break;
                case a.c.Metric:
                    n = t.toFixed(2) + "m"
            }
            return n
        },
        v = function(t, e, n) {
            void 0 === e && (e = 10), void 0 === n && (n = 40);
            return {
                width: Math.max(9 * Math.max(t, 2) + e, n),
                height: 18 + e
            }
        }
}, , function(t, e, n) {
    "use strict";
    var r = n(3),
        i = n(15),
        o = n(159),
        a = n(2),
        s = n(6),
        u = n(85),
        c = n(182),
        l = n(125),
        h = n(44),
        f = n(135),
        p = n(183),
        d = n(55),
        m = n(82),
        v = n(96),
        y = n(181),
        g = n(224),
        b = n(208),
        _ = n(184),
        w = n(185),
        x = n(186),
        E = n(69),
        S = n(20),
        T = n(75),
        M = n(46),
        O = n(113),
        P = n(220),
        A = n(78),
        L = n(187),
        R = n(28),
        D = n(127),
        I = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        C = new r.a("AB"),
        N = function() {
            function t(t) {
                for (var e in this.values = {}, t) {
                    var n = t[e];
                    if (n && n.ab) try {
                        this.values[e] = U(n.ab)
                    } catch (t) {
                        C.warn("Skipping key " + e + ", could not pick: " + t)
                    }
                }
            }
            return t.prototype.get = function(t) {
                return this.values[t]
            }, t.prototype.serialize = function() {
                var t = this;
                return Object.keys(this.values).map((function(e) {
                    return e + ":" + t.values[e]
                }))
            }, t
        }();

    function U(t) {
        var e, n, r, i;
        if (0 === t.length) throw Error("A/B cannot choose from an empty choice array");
        var o = 0;
        try {
            for (var a = I(t), s = a.next(); !s.done; s = a.next()) {
                if (void 0 === (f = s.value).value || void 0 === f.weight || f.weight < 0) throw Error("Malformed AB choice: " + f);
                o += f.weight
            }
        } catch (t) {
            e = {
                error: t
            }
        } finally {
            try {
                s && !s.done && (n = a.return) && n.call(a)
            } finally {
                if (e) throw e.error
            }
        }
        var u = Math.random() * o,
            c = 0;
        try {
            for (var l = I(t), h = l.next(); !h.done; h = l.next()) {
                var f;
                if (u <= (c += (f = h.value).weight)) return f.value
            }
        } catch (t) {
            r = {
                error: t
            }
        } finally {
            try {
                h && !h.done && (i = l.return) && i.call(l)
            } finally {
                if (r) throw r.error
            }
        }
    }
    var j = n(264),
        k = n(257),
        F = n(265),
        B = n(104),
        G = n(260),
        z = n(266),
        H = n(139),
        V = n(171),
        W = n(206),
        X = n(67),
        q = new r.a("showcase-settings/quality"),
        Y = n(222),
        K = n(112),
        Z = n(179),
        Q = n(218),
        J = n(27),
        $ = n(119),
        tt = n(243),
        et = n(33);
    n.d(e, "a", (function() {
        return ct
    }));
    var nt = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        rt = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        it = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        ot = new r.a("showcase"),
        at = window.MP_PREFETCHED_MODELDATA,
        st = at && at.model ? at.model : null;
    try {
        "xr" in navigator && "getVRDisplays" in navigator && Object.defineProperty(navigator, "xr", {
            value: {}
        })
    } catch (t) {
        ot.warn("Tried to remove WebXR support, but failed:", t)
    }
    var ut = function() {
            function t(t, e) {
                var n = this;
                this.sdkBindings = t, this.settingOverrides = e, this.urlValues = s.s(), this.storeQueue = new f.RequestQueue({
                    retries: 0
                }), this.scanmodelStoreCache = {
                    data: st
                }, this.errorPromise = new et.a, this.quickstart = "1" === this.urlValues.qs, this.stopTourHook = function(t) {
                    return nt(n, void 0, void 0, (function() {
                        var e;
                        return rt(this, (function(n) {
                            switch (n.label) {
                                case 0:
                                    return (e = t.market.tryGetData(v.b)) && e.tourPlaying ? [4, t.commandBinder.issueCommand(new Z.c)] : [3, 3];
                                case 1:
                                    return n.sent(), [4, Object(J.d)(10)];
                                case 2:
                                    n.sent(), n.label = 3;
                                case 3:
                                    return [2]
                            }
                        }))
                    }))
                }, this.tick = function() {
                    var t = window.requestAnimationFrame(n.tick);
                    try {
                        n.engine.tick()
                    } catch (e) {
                        Promise.all([n.engine.getModule(a.n)]).then((function(r) {
                            var i = it(r, 1)[0];
                            window.cancelAnimationFrame(t), n.setError(e), i.showError(a.o.GENERIC)
                        }))
                    }
                }.bind(this), this.apiHost = window.location.protocol + "//" + window.location.host, this.settingOverrides && this.settingOverrides.hasOwnProperty("apiHost") && this.settingOverrides.apiHost && (this.apiHost = this.settingOverrides.apiHost), this.modelUrls = Object(E.e)(this.urlValues.m || this.urlValues.model, this.apiHost), this.modelUrl = this.modelUrls.urlBase + "/api/v1/player/models/" + this.modelUrls.sid, this.mattertagParserOptions = {
                    model: this.modelUrls.sid,
                    supportLinks: !this.urlValues.mls || "0" === this.urlValues.mls,
                    keepLinkLabels: !0
                }
            }
            return t.prototype.getManifest = function() {
                var t = [{
                        type: o.default,
                        promise: function() {
                            return Promise.resolve(n(159))
                        }
                    }, {
                        type: m.default,
                        promise: function() {
                            return Promise.resolve(n(82))
                        }
                    }, {
                        type: $.default,
                        promise: function() {
                            return Promise.resolve(n(119))
                        }
                    }, {
                        type: l.default,
                        promise: function() {
                            return Promise.resolve(n(125))
                        }
                    }, {
                        type: a.E,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 486))
                        }
                    }, {
                        type: a.a,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 483))
                        }
                    }, {
                        type: a.R,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 484))
                        }
                    }, {
                        type: a.eb,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 479))
                        }
                    }, {
                        type: a.d,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 443))
                        }
                    }, {
                        type: a.sb,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 444))
                        }
                    }, {
                        type: a.F,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 445))
                        }
                    }, {
                        type: a.ub,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 485))
                        }
                    }, {
                        type: a.mb,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 478))
                        }
                    }, {
                        type: a.Nb,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 476))
                        }
                    }, {
                        type: a.b,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 468))
                        }
                    }, {
                        type: a.e,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 469))
                        }
                    }, {
                        type: a.x,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 477))
                        }
                    }, {
                        type: a.n,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 480))
                        }
                    }, {
                        type: a.c,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 482))
                        }
                    }, {
                        type: a.kb,
                        promise: function() {
                            return Promise.resolve().then(n.bind(null, 481))
                        }
                    }, {
                        type: a.Eb,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 963))
                        }
                    }, {
                        type: a.xb,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 1010))
                        }
                    }, {
                        type: a.wb,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 1027))
                        }
                    }, {
                        type: a.qb,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 1016))
                        }
                    }, {
                        type: a.S,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 1009))
                        }
                    }, {
                        type: a.Mb,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 1021))
                        }
                    }, {
                        type: a.Lb,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 964))
                        }
                    }, {
                        type: a.t,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 965))
                        }
                    }, {
                        type: a.fb,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 1020))
                        }
                    }, {
                        type: a.w,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 966))
                        }
                    }, {
                        type: a.f,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 967))
                        }
                    }, {
                        type: a.W,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 1039))
                        }
                    }, {
                        type: a.U,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 968))
                        }
                    }, {
                        type: a.u,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 1038))
                        }
                    }, {
                        type: a.gb,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 1037))
                        }
                    }, {
                        type: a.y,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 969))
                        }
                    }, {
                        type: a.l,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 1022))
                        }
                    }, {
                        type: a.r,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 1040))
                        }
                    }, {
                        type: a.Qb,
                        promise: function() {
                            return n.e(18).then(n.bind(null, 1035))
                        }
                    }, {
                        type: a.nb,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 970))
                        }
                    }, {
                        type: a.pb,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 971))
                        }
                    }, {
                        type: a.ob,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 972))
                        }
                    }, {
                        type: a.V,
                        promise: function() {
                            return Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 973))
                        }
                    }, {
                        type: a.Db,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 974))
                        }
                    }, {
                        type: a.i,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 975))
                        }
                    }, {
                        type: a.j,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 1034))
                        }
                    }, {
                        type: a.h,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 976))
                        }
                    }, {
                        type: a.z,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 977))
                        }
                    }, {
                        type: a.A,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 978))
                        }
                    }, {
                        type: a.M,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 979))
                        }
                    }, {
                        type: a.N,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 980))
                        }
                    }, {
                        type: a.I,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 981))
                        }
                    }, {
                        type: a.L,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 982))
                        }
                    }, {
                        type: a.Fb,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 1033))
                        }
                    }, {
                        type: a.K,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 1011))
                        }
                    }, {
                        type: a.H,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 983))
                        }
                    }, {
                        type: a.zb,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 1012))
                        }
                    }, {
                        type: a.Jb,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 984))
                        }
                    }, {
                        type: a.Ib,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 1008))
                        }
                    }, {
                        type: a.cb,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 1024))
                        }
                    }, {
                        type: a.Ob,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 985))
                        }
                    }, {
                        type: a.db,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 986))
                        }
                    }, {
                        type: a.rb,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 1023))
                        }
                    }, {
                        type: a.T,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 987))
                        }
                    }, {
                        type: a.g,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 1028))
                        }
                    }, {
                        type: a.D,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 988))
                        }
                    }, {
                        type: a.lb,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 989))
                        }
                    }, {
                        type: P.default,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 220))
                        }
                    }, {
                        type: a.O,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 990))
                        }
                    }, {
                        type: a.Kb,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 1025))
                        }
                    }, {
                        type: a.Cb,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 1031))
                        }
                    }, {
                        type: a.bb,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 1017))
                        }
                    }, {
                        type: a.Bb,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 991))
                        }
                    }, {
                        type: a.Ab,
                        promise: function() {
                            return Promise.all([n.e(0), n.e(2), n.e(6)]).then(n.bind(null, 1029))
                        }
                    }],
                    e = Object(tt.b)();
                return e && t.push(e), t
            }, t.prototype.getAppPhases = function(t) {
                var e, n = this;
                return (e = {})[i.a.UNINITIALIZED] = [], e[i.a.WAITING] = [nt(n, void 0, void 0, (function() {
                    return rt(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return [4, t.waitForModule(a.E)];
                            case 1:
                                return e.sent(), [2]
                        }
                    }))
                }))], e[i.a.LOADING] = [nt(n, void 0, void 0, (function() {
                    return rt(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return [4, t.waitForModule(a.E)];
                            case 1:
                                return [2, e.sent().waitForPlaying]
                        }
                    }))
                }))], e[i.a.STARTING] = [nt(n, void 0, void 0, (function() {
                    return rt(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return [4, t.waitForModule(a.pb)];
                            case 1:
                                return [2, e.sent().waitForFirstRender]
                        }
                    }))
                }))], e[i.a.PLAYING] = [nt(n, void 0, void 0, (function() {
                    return rt(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return [4, t.waitForModule(a.pb)];
                            case 1:
                                return [2, e.sent().waitForFlyin]
                        }
                    }))
                }))], e[i.a.ERROR] = [this.errorPromise.nativePromise()], e
            }, t.prototype.setError = function(t) {
                this.errorPromise.reject(t)
            }, t.prototype.load = function(t, e) {
                return nt(this, void 0, Promise, (function() {
                    var n, c, l, f, p, g, E, I, C, U, J, et, at, st, ut, ct, lt, ht, ft, pt, dt, mt, vt, yt, gt, bt, _t, wt, xt, Et, St, Tt, Mt, Ot, Pt, At, Lt, Rt, Dt, It, Ct, Nt, Ut, jt, kt, Ft, Bt, Gt, zt, Ht, Vt, Wt, Xt, qt, Yt, Kt, Zt = this;
                    return rt(this, (function(Qt) {
                        switch (Qt.label) {
                            case 0:
                                return this.engine = t, this.loadModules([{
                                    type: o.default,
                                    config: {
                                        tasks: this.getAppPhases(t)
                                    }
                                }, {
                                    type: m.default,
                                    config: {
                                        useGUI: !0
                                    }
                                }, {
                                    type: $.default
                                }]), t.waitForModule(o.default).then((function(t) {
                                    t.updateActiveApp(i.b.SHOWCASE)
                                })), t.market.waitForData(i.c).then((function(e) {
                                    e.onChanged((function() {
                                        return nt(Zt, void 0, void 0, (function() {
                                            var n, r;
                                            return rt(this, (function(o) {
                                                switch (o.label) {
                                                    case 0:
                                                        return e.phase !== i.a.ERROR ? [3, 2] : (n = e.error, [4, t.waitForModule(a.n)]);
                                                    case 1:
                                                        throw r = o.sent(), n instanceof D.c ? r.showError(a.o.UNSUPPORTED) : n instanceof D.b ? r.showError(a.o.WEBGL) : r.showError(a.o.GENERIC), n;
                                                    case 2:
                                                        return [2]
                                                }
                                            }))
                                        }))
                                    }))
                                })), e.coldStart ? (ot.info("Showcase app version: 3.0.35.5-0-g683e0bbd4"), this.canvas = document.createElement("canvas"), this.canvas.className = "webgl-canvas", f = document.querySelector("#canvas-container"), p = parseInt(this.urlValues.log, 10), this.urlValues.hasOwnProperty("log") && !isNaN(p) && (r.a.level = p), this.quickstart && ot.info("Quickstart engaged. Hold on to your knickers. " + performance.now()), this.loadModules([{
                                    type: a.a,
                                    config: {
                                        queue: this.storeQueue,
                                        prefetchedData: window.MP_PREFETCHED_MODELDATA,
                                        baseUrl: this.modelUrls.urlBase,
                                        preloadConfig: "showcase"
                                    }
                                }, {
                                    type: a.Nb,
                                    config: {
                                        antialias: "1" === this.urlValues.aa
                                    }
                                }, {
                                    type: a.c
                                }, {
                                    type: a.b,
                                    config: {
                                        container: document.querySelector("#app-container")
                                    }
                                }, {
                                    type: a.e,
                                    config: {
                                        canvas: this.canvas,
                                        container: f
                                    }
                                }, {
                                    type: a.kb
                                }]), [4, Promise.all([t.waitForModule(a.a), t.waitForModule(a.Nb), t.waitForModule(m.default)])]) : (this.loadUI(), [2]);
                            case 1:
                                for (gt in g = it.apply(void 0, [Qt.sent(), 3]), E = g[0], I = g[1], C = g[2], U = E.getApi(), J = U.user.getFlags("showcase/"), et = Object(H.h)(parseFloat(this.urlValues.wts)), at = this.urlValues, st = at.labels, ut = at.mt, ct = at.measure, lt = at.savedMeasurements, ht = at.smooth, ft = at.sc2pan, pt = J.has(B.c) && "0" !== ct, dt = J.has(B.b) && "0" !== lt, mt = J.has(B.a), vt = "en-US" === navigator.language ? A.c.USFractional : A.c.Metric, yt = {
                                        Features: (n = {}, n[z.a] = !0, n[j.a] = !0, n[G.a] = !0, n[H.b] = void 0 === ht && J.has(H.b) || "0" !== ht, n[H.a] = void 0 === ft && J.has(H.a) || "0" !== ft, n[F.a] = "0" !== st, n[k.a] = "0" !== ut, n[B.c] = pt, n[B.b] = pt && dt, n[H.c] = et, n[B.a] = mt, n),
                                        "User Preferences": (c = {}, c[d.a.UnitType] = vt, c[d.a.MeasurementSnapping] = !0, c[d.a.MeasurementContinuousLines] = !0, c[d.a.MeasurementUserNudge] = !1, c)
                                    })
                                    for (wt in yt[gt]) void 0 !== yt[gt][wt] && (bt = "User Preferences" === gt ? m.SettingPersistence.LOCAL_STORAGE : m.SettingPersistence.NONE, C.registerSetting(gt, wt, yt[gt][wt], !0, bt));
                                for (wt in (l = {})[K.a] = "showcase_3.0", l[K.b] = "showcase", l[Y.a] = null, l.sid = this.modelUrls.sid, l.quickstart = this.quickstart, l.lang = this.urlValues.lang, l.perf = this.urlValues.perf, l.perfInterval = this.urlValues.perfInterval, _t = l) C.updateSetting(wt, _t[wt]);
                                if (this.settingOverrides)
                                    for (wt in this.settingOverrides) C.updateSetting(wt, this.settingOverrides[wt]);
                                return this.setupSdk(t, U), xt = new h.c({
                                    queue: this.storeQueue,
                                    path: this.modelUrl,
                                    deserialize: function(t) {
                                        return t
                                    },
                                    cachedData: this.scanmodelStoreCache
                                }), St = N.bind, [4, U.getConfigs("showcase")];
                            case 2:
                                Et = new(St.apply(N, [void 0, Qt.sent()])), this.loadInitialModules(xt, Et, I.cwfRenderer.gpuInfo, !!e.autoPlay), t.commandBinder.hookCommand(Q.a, !0, (function() {
                                    return Zt.stopTourHook(t)
                                })), t.commandBinder.hookCommand(Z.b, !0, (function() {
                                    return Zt.stopTourHook(t)
                                })), Qt.label = 3;
                            case 3:
                                return Qt.trys.push([3, 5, , 6]), [4, t.waitForLoadingModules()];
                            case 4:
                                return Qt.sent(), [3, 6];
                            case 5:
                                return Tt = Qt.sent(), this.setError(Tt), t.tick(), [3, 6];
                            case 6:
                                return Mt = document, [4, t.waitForModule(a.R)];
                            case 7:
                                return Mt.title = Qt.sent().getModel().data.name, [4, t.market.waitForData(u.a)];
                            case 8:
                                return Ot = Qt.sent().pose, !this.quickstart || Ot && Ot.mode === S.a.Panorama || (ot.warn("Disabling quickstart. No panorama start position."), this.quickstart = !1, C.updateSetting("quickstart", !1)), Pt = function(t, e) {
                                    var n, r, i, o;
                                    Object(s.o)() || Object(s.k)() ? Object(s.o)() && Object(W.b)(e) ? (n = V.e.ULTRA, r = X.a[X.d.STANDARD], i = X.a[X.d.HIGH], o = 10) : (n = V.e.MEDIUM, r = X.a[X.d.STANDARD], i = X.a[X.d.HIGH], o = 6) : (n = V.e.ULTRA, r = X.a[X.d.HIGH], i = X.a[X.d.ULTRAHIGH], o = 20);
                                    try {
                                        n = t.maxmeshq ? Object(V.f)(parseInt(t.maxmeshq, 10)) : n
                                    } catch (e) {
                                        q.warn("Not a valid texture size: " + t.maxmeshq)
                                    }
                                    return {
                                        maxMeshQuality: n,
                                        navPanoSize: r = t.maxtileq ? parseInt(t.maxtileq, 10) : r,
                                        zoomPanoSize: i = t.maxztileq ? parseInt(t.maxztileq, 10) : i,
                                        textureLODThreshold: o = t.lodtexth ? parseInt(t.lodtexth, 10) : o
                                    }
                                }(this.urlValues, I.cwfRenderer.gpuInfo), At = Pt.maxMeshQuality, Lt = Pt.navPanoSize, Rt = Pt.zoomPanoSize, Dt = Pt.textureLODThreshold, ot.info({
                                    maxMeshQuality: At,
                                    navPanoSize: Lt,
                                    zoomPanoSize: Rt,
                                    textureLODThreshold: Dt
                                }), "0" === this.urlValues.tiles ? [3, 10] : [4, this.loadModules([{
                                    type: a.xb,
                                    config: {
                                        navPanoSize: Lt,
                                        zoomPanoSize: Rt
                                    }
                                }])];
                            case 9:
                                return Qt.sent(), [3, 12];
                            case 10:
                                return [4, this.loadModules([{
                                    type: a.wb
                                }])];
                            case 11:
                                Qt.sent(), Qt.label = 12;
                            case 12:
                                return [4, this.loadModules([{
                                    type: a.qb
                                }])];
                            case 13:
                                return Qt.sent(), this.quickstart && (this.loadPanoControls(), window.requestAnimationFrame(this.tick)), [4, t.waitForModule(a.E)];
                            case 14:
                                return [4, Qt.sent().waitForPlaying];
                            case 15:
                                return Qt.sent(), It = new h.c({
                                    queue: this.storeQueue,
                                    path: this.modelUrl,
                                    deserialize: L.a,
                                    cachedData: this.scanmodelStoreCache
                                }), Ct = new R.e({
                                    publishStores: [It]
                                }), Nt = new h.c({
                                    queue: this.storeQueue,
                                    path: this.modelUrl,
                                    deserialize: x.a,
                                    cachedData: this.scanmodelStoreCache
                                }), Ut = new R.e({
                                    publishStores: [Nt]
                                }), this.loadModules([{
                                    type: a.U
                                }, {
                                    type: a.S,
                                    config: {
                                        renderMeshGeometry: !0,
                                        maxQuality: At,
                                        textureLOD: "2" === this.urlValues.texlod ? a.Gb.RAYCAST : "0" === this.urlValues.texlod ? a.Gb.NONE : Et.get("raycast_lod") ? a.Gb.RAYCAST : a.Gb.NONE,
                                        textureLODThreshold: Dt,
                                        maxEdgeLength: this.urlValues.tessellate ? parseFloat(this.urlValues.tessellate) : void 0,
                                        colorizeRooms: "1" === this.urlValues.colorizeRooms,
                                        colorizeChunks: "1" === this.urlValues.colorizeChunks,
                                        wireframe: "1" === this.urlValues.wireframe
                                    }
                                }, {
                                    type: a.Lb
                                }, {
                                    type: a.Mb,
                                    config: {
                                        startingMode: this.quickstart ? S.a.Panorama : null
                                    }
                                }, {
                                    type: a.t,
                                    config: {
                                        floorsSync: Ut
                                    }
                                }, {
                                    type: a.gb
                                }, {
                                    type: a.Eb
                                }, {
                                    type: a.u
                                }, {
                                    type: a.fb
                                }, {
                                    type: a.w,
                                    config: {
                                        sid: this.modelUrls.sid
                                    }
                                }, {
                                    type: a.y
                                }, {
                                    type: a.l
                                }, {
                                    type: a.r
                                }, {
                                    type: a.Qb,
                                    config: {
                                        enabled: "1" !== this.urlValues.nozoom,
                                        tiles: "0" !== this.urlValues.tiles
                                    }
                                }, {
                                    type: a.pb
                                }, {
                                    type: a.V,
                                    config: {
                                        enableWheel: "1" === this.urlValues.nozoom
                                    }
                                }, {
                                    type: a.ob,
                                    config: {
                                        optionsSync: Ct,
                                        modelDetailsStore: xt
                                    }
                                }, {
                                    type: a.nb
                                }]), this.quickstart || this.tick(), this.quickstart || this.loadPanoControls(), [4, this.engine.waitForLoadingModules()];
                            case 16:
                                return Qt.sent(), Object(tt.c)(t), jt = "/api/v1/jsonstore/model/", kt = "" + this.modelUrls.urlBase + jt + "labels/" + this.modelUrls.sid, Ft = new h.c({
                                    queue: this.storeQueue,
                                    path: kt,
                                    deserialize: _.a
                                }), Bt = new R.a({
                                    publishStores: [Ft]
                                }), Gt = "" + this.modelUrls.urlBase + jt + "measurements/" + this.modelUrls.sid, zt = new h.c({
                                    queue: this.storeQueue,
                                    path: Gt,
                                    deserialize: w.a
                                }), Ht = new R.a({
                                    publishStores: [zt]
                                }), Vt = "" + this.modelUrls.urlBase + jt + "mattertags/" + this.modelUrls.sid, Wt = new h.c({
                                    queue: this.storeQueue,
                                    path: Vt,
                                    deserialize: Object(b.b)(this.mattertagParserOptions, !1)
                                }), Xt = new R.a({
                                    publishStores: [Wt]
                                }), qt = "" + this.modelUrls.urlBase + jt + "highlights/" + this.modelUrls.sid, Yt = new h.c({
                                    queue: this.storeQueue,
                                    path: qt,
                                    deserialize: y.b
                                }), Kt = new R.e({
                                    publishStores: [Yt]
                                }), "0" !== this.urlValues.portal && this.loadModules([{
                                    type: a.bb
                                }, {
                                    type: a.Cb
                                }]), "0" !== this.urlValues.pin && this.loadModules([{
                                    type: a.Ab
                                }, {
                                    type: a.Bb
                                }]), this.loadModules([{
                                    type: a.Db,
                                    config: {
                                        checkRenderModes: function() {
                                            try {
                                                var e = t.market.tryGetData(v.b);
                                                if (!e || e.isTourActive()) return !1;
                                                var n = t.market.tryGetData(T.a),
                                                    r = t.market.tryGetData(O.a),
                                                    i = [S.a.Panorama],
                                                    o = [M.b.Desktop, M.b.Mobile];
                                                return r && n && -1 !== o.indexOf(n.mode) && r.currentMode && -1 !== i.indexOf(r.currentMode)
                                            } catch (t) {
                                                return ot.debug(t), !1
                                            }
                                        }
                                    }
                                }, {
                                    type: a.z,
                                    config: {
                                        sid: this.modelUrls.sid,
                                        labelsSync: Bt
                                    }
                                }, {
                                    type: a.A
                                }, {
                                    type: a.M,
                                    config: {
                                        measurementsSync: Ht
                                    }
                                }, {
                                    type: a.N
                                }, {
                                    type: a.D
                                }, {
                                    type: a.I,
                                    config: {
                                        modelSid: this.modelUrls.sid,
                                        tagSync: Xt
                                    }
                                }, {
                                    type: a.L
                                }, {
                                    type: a.Fb
                                }, {
                                    type: a.K
                                }, {
                                    type: a.H
                                }, {
                                    type: a.zb
                                }, {
                                    type: a.Jb,
                                    config: {
                                        activeReelSync: Kt,
                                        looping: "1" === this.urlValues.lp
                                    }
                                }, {
                                    type: a.Ib
                                }, {
                                    type: a.cb
                                }, {
                                    type: a.i
                                }, {
                                    type: a.j
                                }, {
                                    type: a.h
                                }, {
                                    type: a.Ob
                                }, {
                                    type: a.db
                                }, {
                                    type: a.T
                                }, {
                                    type: a.g
                                }, {
                                    type: a.lb
                                }, {
                                    type: a.Kb
                                }, {
                                    type: P.default,
                                    config: {
                                        inputDebug: "1" === this.urlValues.tapeDebug,
                                        floorplanDebug: "1" === this.urlValues.floorplanDebug
                                    }
                                }, {
                                    type: a.O
                                }, {
                                    type: a.rb,
                                    config: {
                                        queue: this.storeQueue,
                                        uploadEndpoint: this.modelUrl + "/images/"
                                    }
                                }]), [2]
                        }
                    }))
                }))
            }, t.prototype.unload = function(t) {
                return nt(this, void 0, Promise, (function() {
                    var e;
                    return rt(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                return n.trys.push([0, 2, , 3]), [4, t.getModuleSync(a.Ib).stopTour()];
                            case 1:
                                return n.sent(), [3, 3];
                            case 2:
                                return e = n.sent(), ot.debug("showcase unload called before tour controls registered, ignoring stopTour", e), [3, 3];
                            case 3:
                                return [4, this.guiModule.unloadUi(this.guiNode)];
                            case 4:
                                return n.sent(), t.commandBinder.resetHooks(), [2]
                        }
                    }))
                }))
            }, t.prototype.loadInitialModules = function(t, e, n, r) {
                var i = new h.c({
                        queue: this.storeQueue,
                        path: this.modelUrl,
                        deserialize: c.a,
                        cachedData: this.scanmodelStoreCache
                    }),
                    o = new R.e({
                        publishStores: [i]
                    }),
                    u = new h.c({
                        queue: this.storeQueue,
                        path: this.modelUrl,
                        deserialize: g.c,
                        cachedData: this.scanmodelStoreCache
                    }),
                    l = this.modelUrls.urlBase + "/api/v2/models/" + this.modelUrls.sid + "/sweeps?tag=showcase",
                    f = new h.c({
                        queue: this.storeQueue,
                        path: l,
                        deserialize: Object(p.a)(!0),
                        cachedData: {
                            data: null
                        }
                    }),
                    d = new R.a({
                        publishStores: [f]
                    });
                this.loadModules([{
                    type: a.eb
                }, {
                    type: a.x,
                    config: {
                        disableWheel: "0" === this.urlValues.wh,
                        pointerPreventDefault: !this.settingOverrides || !this.settingOverrides.hasOwnProperty("pointerPreventDefault") || this.settingOverrides.pointerPreventDefault
                    }
                }, {
                    type: a.mb,
                    config: {
                        provider: this.urlValues.analytics,
                        additionalValues: {
                            ab_tests: e.serialize(),
                            gpu: n
                        }
                    }
                }, {
                    type: a.E,
                    config: {
                        modelDetailsStore: t,
                        sid: this.modelUrls.sid,
                        baseUrl: this.modelUrls.urlBase,
                        quickstart: this.quickstart,
                        autoplay: "1" === this.urlValues.play || !s.g() || r,
                        startNewTab: "1" === this.urlValues.nt,
                        hideTitle: "0" === this.urlValues.title || "2" === this.urlValues.title,
                        hideBranding: "1" === this.urlValues.mls || "2" === this.urlValues.mls || "0" === this.urlValues.brand
                    }
                }, {
                    type: a.n,
                    config: {}
                }, {
                    type: a.sb,
                    config: {
                        snapshotsStore: u
                    }
                }, {
                    type: a.d,
                    config: {
                        cameraStartSync: o
                    }
                }, {
                    type: a.R,
                    config: {
                        modelDetailsStore: t,
                        sid: this.modelUrls.sid
                    }
                }, {
                    type: a.F,
                    config: {
                        queue: this.storeQueue
                    }
                }, {
                    type: a.ub,
                    config: {
                        sweepSync: d
                    }
                }])
            }, t.prototype.loadPanoControls = function() {
                this.loadUI(), this.loadModules([{
                    type: a.f
                }, {
                    type: a.W
                }])
            }, t.prototype.loadModules = function(t) {
                var e = t.map((function(t) {
                    return {
                        type: t.type,
                        config: t.config
                    }
                }));
                return this.engine.loadModules(e)
            }, t.prototype.setupSdk = function(t, e) {
                return nt(this, void 0, void 0, (function() {
                    var n, r, i;
                    return rt(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return n = this.apiHost + "/api/v1/user/", [4, e.getAppKey("showcase", "sdk_version")];
                            case 1:
                                return (r = o.sent()) ? i = "https://static.matterport.com/showcase/" + r + "/sdk-client.js" : (ot.warn("The sdk client version was not configured. Falling back to the last built version."), i = "./sdk-client.js"), this.engine.loadModules([{
                                    type: l.default,
                                    config: {
                                        validationUrl: n,
                                        clientScriptUrl: i,
                                        queue: this.storeQueue
                                    }
                                }]), Object(l.setupSdk)(t, this.sdkBindings), [2]
                        }
                    }))
                }))
            }, t.prototype.loadUI = function() {
                var t = this;
                Promise.all([this.engine.waitForModule(a.w), Promise.all([n.e(3), n.e(11), n.e(0), n.e(1), n.e(5)]).then(n.bind(null, 1007))]).then((function(e) {
                    var n = it(e, 2),
                        r = n[0],
                        i = n[1];
                    t.guiModule = r, r.loadUi(i.initShowcaseUi).then((function(e) {
                        t.guiNode = e
                    }))
                }))
            }, t
        }(),
        ct = (e.b = ut, function(t, e) {
            return nt(void 0, void 0, void 0, (function() {
                return rt(this, (function(r) {
                    switch (r.label) {
                        case 0:
                            return [4, Promise.all([n.e(0), n.e(1), n.e(2), n.e(7)]).then(n.bind(null, 1006))];
                        case 1:
                            return r.sent().bindSdkInterface(t, t.commandBinder, e), [2]
                    }
                }))
            }))
        })
}, , , function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(21),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.name = "blur-canvas", r.payload = {
                    duration: e,
                    pixelBlur: n
                }, r
            }
            return o(e, t), e
        }(i.a)
}, , function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return u
    }));
    var r, i = n(25),
        o = n(115),
        a = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        s = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        u = function(t) {
            function e(e) {
                var n, r, i = t.call(this) || this;
                if (i.name = "tag", i.mattertags = Object(o.b)(), e) try {
                    for (var a = s(e), u = a.next(); !u.done; u = a.next()) {
                        var c = u.value;
                        i.mattertags.set(c.sid, c)
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        u && !u.done && (r = a.return) && r.call(a)
                    } finally {
                        if (n) throw n.error
                    }
                }
                return i.commit(), i
            }
            return a(e, t), e.prototype.clear = function() {
                var t, e;
                try {
                    for (var n = s(this.mattertags), r = n.next(); !r.done; r = n.next()) {
                        var i = r.value;
                        this.removeTag(i.sid)
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
            }, e.prototype.clone = function() {
                return (new e).copy(this)
            }, e.prototype.copy = function(t) {
                return e.copyTagCollection(this, t), this
            }, e.copyTagCollection = function(t, e) {
                var n, r, i, o, a = t.mattertags,
                    u = e.mattertags;
                try {
                    for (var c = s(a.keys), l = c.next(); !l.done; l = c.next()) {
                        var h = l.value;
                        u.has(h) || t.removeTag(h)
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        l && !l.done && (r = c.return) && r.call(c)
                    } finally {
                        if (n) throw n.error
                    }
                }
                try {
                    for (var f = s(u), p = f.next(); !p.done; p = f.next()) {
                        var d = p.value;
                        t.addTag(d)
                    }
                } catch (t) {
                    i = {
                        error: t
                    }
                } finally {
                    try {
                        p && !p.done && (o = f.return) && o.call(f)
                    } finally {
                        if (i) throw i.error
                    }
                }
            }, Object.defineProperty(e.prototype, "collection", {
                get: function() {
                    return this.mattertags
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.addTag = function(t) {
                this.mattertags.has(t.sid) ? this.mattertags.get(t.sid).copy(t) : this.mattertags.set(t.sid, t.clone())
            }, e.prototype.removeTag = function(t) {
                return this.mattertags.delete(t)
            }, e.prototype.getTag = function(t) {
                return this.mattertags.get(t)
            }, e.prototype.getTagList = function() {
                return this.mattertags.keys
            }, e.prototype.getTagCount = function() {
                return this.mattertags.length
            }, e.prototype.iterate = function(t) {
                var e, n;
                try {
                    for (var r = s(this.mattertags), i = r.next(); !i.done; i = r.next()) {
                        t(i.value)
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        i && !i.done && (n = r.return) && n.call(r)
                    } finally {
                        if (e) throw e.error
                    }
                }
            }, e
        }(i.a)
}, , function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    }));
    var r, i = n(21),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function() {
            return (a = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        s = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.id = "MOVE_TO_SWEEP", n.payload = a({}, e), n
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "d", (function() {
        return i
    })), n.d(e, "b", (function() {
        return o
    })), n.d(e, "c", (function() {
        return p
    })), n.d(e, "a", (function() {
        return d
    }));
    var r, i, o, a = n(25),
        s = n(84),
        u = n(81),
        c = n(115),
        l = n(40),
        h = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        f = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        };
    ! function(t) {
        t.UP = "Up", t.DOWN = "Down", t.LEFT = "Left", t.LEFT_UP = "LeftUp", t.LEFT_DOWN = "LeftDown", t.RIGHT = "Right", t.RIGHT_UP = "RightUp", t.RIGHT_DOWN = "RightDown"
    }(i || (i = {})),
    function(t) {
        t[t.DISABLED = 0] = "DISABLED", t[t.ENABLED = 1] = "ENABLED", t[t.PLACING = 2] = "PLACING", t[t.OPENING = 3] = "OPENING", t[t.OPEN = 4] = "OPEN"
    }(o || (o = {}));
    var p = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.mattertags = e, n.name = "tag-view", n.openBillboards = new s.a, n.visitedTags = new s.a, n.persistentBillboards = {}, n.observables = {
                    selectedTag: Object(u.b)(null),
                    uncommittedEdit: Object(u.b)(null),
                    editingTag: Object(u.b)(null),
                    navigatingTag: Object(u.b)(null)
                }, n.addStateObservable = Object(u.b)(o.ENABLED), n.viewedTags = 0, n.getViewData = function(t) {
                    var e = n.mattertags.getTag(t),
                        r = n.derivedData[t];
                    return e && !r && n.makeViewData && (n.derivedData[t] = n.makeViewData(e)), n.derivedData[t]
                }, n.derivedData = {}, n.activeBillboards = Object(c.b)(), n
            }
            return h(e, t), e.prototype.setViewDataFactory = function(t) {
                this.makeViewData = t
            }, e.prototype.togglePersistentBillboards = function(t, e) {
                var n, r;
                try {
                    for (var i = f(t), o = i.next(); !o.done; o = i.next()) {
                        var a = o.value;
                        this.mattertags.getTag(a) && (this.persistentBillboards[a] = e)
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        o && !o.done && (r = i.return) && r.call(i)
                    } finally {
                        if (n) throw n.error
                    }
                }
            }, e.prototype.addBillboards = function(t) {
                var e = this;
                t.length && (t = t.filter((function(t) {
                    return e.mattertags.getTag(t) && -1 === e.openBillboards.indexOf(t)
                })), this.openBillboards.concat(t), t.forEach((function(t) {
                    var n = e.mattertags.getTag(t);
                    n.isActive = !0, n.commit()
                })))
            }, e.prototype.removeBillboards = function(t, e) {
                var n = this,
                    r = this.openBillboards.values().filter((function(r) {
                        var i = n.mattertags.getTag(r);
                        return !e && n.persistentBillboards[r] || i && -1 === t.indexOf(r)
                    }));
                t.forEach((function(t) {
                    var r = n.mattertags.getTag(t);
                    r && r.isActive && (!e && n.persistentBillboards[t] || (r.isActive = !1, r.commit()))
                })), this.openBillboards.replace(r)
            }, e.prototype.removeAllBillboards = function() {
                this.removeBillboards(this.openBillboards.values())
            }, e.prototype.resetBillboardData = function() {
                this.removeAllBillboards(), this.selectTag(null), this.setEditing(null)
            }, e.prototype.getTagCount = function() {
                return this.mattertags.collection.length
            }, e.prototype.removeAllBillboardsExcept = function(t) {
                var e = this.mattertags.getTagList().filter((function(e) {
                    return e !== t
                }));
                this.removeBillboards(e)
            }, e.prototype.selectTag = function(t) {
                this.observables.selectedTag.value !== t && (this.observables.selectedTag.value = t)
            }, Object.defineProperty(e.prototype, "selected", {
                get: function() {
                    return this.observables.selectedTag.value
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.onSelectedChanged = function(t) {
                return this.makePropertySubscription("selectedTag", t)
            }, e.prototype.setEditing = function(t) {
                this.observables.editingTag.value !== t && (this.observables.editingTag.value = t)
            }, Object.defineProperty(e.prototype, "editing", {
                get: function() {
                    return this.observables.editingTag.value
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.onEditingTagChanged = function(t) {
                return this.makePropertySubscription("editingTag", t)
            }, e.prototype.setNavigatingTag = function(t) {
                this.observables.navigatingTag.value !== t && (this.observables.navigatingTag.value = t)
            }, Object.defineProperty(e.prototype, "navigating", {
                get: function() {
                    return this.observables.navigatingTag.value
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.onNavigatingChanged = function(t) {
                return this.makePropertySubscription("navigatingTag", t)
            }, e.prototype.setUncommittedTag = function(t) {
                this.observables.uncommittedEdit.value = t
            }, Object.defineProperty(e.prototype, "uncommittedTag", {
                get: function() {
                    return this.observables.uncommittedEdit.value
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.makePropertySubscription = function(t, e) {
                return this.observables[t].onChanged(e)
            }, e.prototype.setAddState = function(t) {
                this.addStateObservable.value = t
            }, Object.defineProperty(e.prototype, "addState", {
                get: function() {
                    return this.addStateObservable.value
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.onAddStateChanged = function(t) {
                return this.addStateObservable.onChanged(t)
            }, e.prototype.isAddingTag = function() {
                var t = this.addStateObservable.value;
                return t === o.PLACING || t === o.OPENING || t === o.OPEN
            }, e.prototype.visitTag = function(t) {
                this.viewedTags++, -1 === this.visitedTags.indexOf(t) && this.visitedTags.push(t)
            }, e.prototype.getViewedTagCount = function() {
                return this.viewedTags
            }, e.prototype.getVisitedTags = function() {
                return this.visitedTags.values()
            }, e.prototype.getBillboards = function() {
                return this.openBillboards.values()
            }, e.prototype.setNavigatingPosition = function(t) {
                this.navigatingPosition = t
            }, e.prototype.getNavigatingPosition = function() {
                return this.navigatingPosition
            }, e
        }(a.a),
        d = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.sid = e, n.closing = !1, n.position = null, n.distance = 0, n.timeoutId = 0, n
            }
            return h(e, t), e
        }(l.a)
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i, o, a, s = n(4),
        u = n(2),
        c = n(50),
        l = n(87),
        h = n(61),
        f = n(188),
        p = n(113),
        d = n(320),
        m = n(77),
        v = n(78),
        y = n(55),
        g = n(60),
        b = n(154),
        _ = n(15),
        w = n(141),
        x = n(1),
        E = n(89),
        S = n(10),
        T = n(189),
        M = n(123),
        O = n(8),
        P = n(74),
        A = n(54),
        L = n(17),
        R = n(18),
        D = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        I = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        C = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return D(e, t), e
        }(M.a),
        N = function() {
            function t(t, e, n, r, i, o, a) {
                var s = this;
                this.floors = t, this.isHidden = e, this.modelMesh = n, this.viewmode = r, this.getPhase = i, this.input = o, this.debug = a, this.container = new L.a, this.colliders = {}, this.toggleColliders = function(t) {
                    var e, n;
                    try {
                        for (var r = I(s.floors), i = r.next(); !i.done; i = r.next()) {
                            var o = i.value,
                                a = s.colliders[o.floorIndex],
                                u = t && !s.isHidden(o.floorIndex);
                            u !== a.visible && (u ? (s.input.registerMesh(a, !1), a.visible = !0) : (s.input.unregisterMesh(a), a.visible = !1))
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            i && !i.done && (n = r.return) && n.call(r)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }
            }
            return t.prototype.init = function() {
                var t, e;
                try {
                    for (var n = I(this.floors), r = n.next(); !r.done; r = n.next()) {
                        var i = r.value,
                            o = new P.b(this.modelMesh.size.x + 100, .1, this.modelMesh.size.z + 100),
                            a = new R.a(16777215 * Math.random()),
                            s = new A.a({
                                transparent: !0,
                                opacity: .3,
                                depthWrite: !1,
                                color: a
                            }),
                            u = new C(o, s);
                        u.floorIndex = i.floorIndex, u.visible = !1, u.position.set(this.modelMesh.center.x, i.center.y + i.size.y / 2 - .1, this.modelMesh.center.z), this.colliders[i.floorIndex] = u, this.container.add(u)
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
                this.container.updateMatrixWorld(!0)
            }, t.prototype.dispose = function() {
                var t, e;
                this.toggleColliders(!1);
                try {
                    for (var n = I(this.floors), r = n.next(); !r.done; r = n.next()) {
                        var i = r.value;
                        this.colliders[i.floorIndex].geometry.dispose()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
            }, t.prototype.activate = function() {}, t.prototype.deactivate = function() {}, t.prototype.beforeRender = function() {
                var t = this.viewmode.isFloorplan() || !0 === this.debug && this.viewmode.isDollhouse();
                this.toggleColliders(this.getPhase() !== O.a.CLOSED && t)
            }, t.prototype.render = function() {}, t
        }(),
        U = n(80),
        j = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }();
    ! function(t) {
        t[t.SnapPoint = 1] = "SnapPoint", t[t.SnapLine = 2] = "SnapLine", t[t.AxisAny = 3] = "AxisAny", t[t.AxisX = 4] = "AxisX", t[t.AxisY = 5] = "AxisY", t[t.AxisZ = 6] = "AxisZ", t[t.Mesh = 7] = "Mesh", t[t.RoomMesh = 8] = "RoomMesh", t[t.LinePoint = 9] = "LinePoint", t[t.LineSegment = 10] = "LineSegment"
    }(a || (a = {}));
    var k, F = function(t) {
            function e(e, n, r, i, o) {
                var a = t.call(this, e, n, r, i) || this;
                return a.roomIndex = r, a.floorIndex = i, a.featureType = o, a
            }
            return j(e, t), e
        }(U.a),
        B = function(t) {
            function e(e, n, r, i, o) {
                var a = t.call(this, e, n, r, i) || this;
                return a.roomIndex = r, a.floorIndex = i, a.featureType = o, a
            }
            return j(e, t), e
        }(U.a),
        G = ((i = {})[S.a.UP] = a.AxisY, i[S.a.DOWN] = a.AxisY, i[S.a.FORWARD] = a.AxisZ, i[S.a.BACK] = a.AxisZ, i[S.a.LEFT] = a.AxisX, i[S.a.RIGHT] = a.AxisX, i[S.a.HORIZONTAL_PLANE] = a.AxisY, i.NONE = void 0, i);
    ! function(t) {
        t[t.UserAxis = 1] = "UserAxis", t[t.UserPoint = 2] = "UserPoint", t[t.UserLine = 3] = "UserLine", t[t.ModelFeature = 4] = "ModelFeature"
    }(k || (k = {}));
    var z, H = ((o = {})[a.LinePoint] = k.UserPoint, o[a.LineSegment] = k.UserLine, o[a.AxisAny] = k.UserAxis, o[a.AxisX] = k.UserAxis, o[a.AxisY] = k.UserAxis, o[a.AxisZ] = k.UserAxis, o[a.Mesh] = k.ModelFeature, o[a.RoomMesh] = k.ModelFeature, o[a.SnapLine] = k.ModelFeature, o[a.SnapPoint] = k.ModelFeature, o),
        V = n(36),
        W = n(56),
        X = n(7),
        q = n(107),
        Y = n(137),
        K = n(58);
    ! function(t) {
        t[t.x = 16711680] = "x", t[t.y = 32768] = "y", t[t.z = 255] = "z", t[t.free = 16777215] = "free", t[t.xz = 16711935] = "xz", t[t.laser = 16724312] = "laser", t[t.yellow = 16776960] = "yellow", t[t.white = 16777215] = "white"
    }(z || (z = {}));
    var Z = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        Q = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        J = function() {
            function t(t, e, n, r, i) {
                var o = this;
                this.pointer = t, this.mobile = e, this.getPhase = n, this.scene = r, this.getLayer = i, this.subscriptions = [], this.editing = !1, this.axisLines = [], this.axisAlignmentHelper = new L.a, this.updateSnapping = function(t) {
                    if (o.axisLines.length > 0 && (o.pointer.removeSnapFeatures(o, a.AxisAny), o.axisLines.length = 0), t) {
                        o.axisAlignmentHelper.position.copy(t.point);
                        var e = Object(W.p)(o.axisAlignmentHelper, t.point, t.normal);
                        o.axisAlignmentHelper.updateMatrixWorld(!0);
                        var n = o.axisAlignmentHelper.matrixWorld,
                            r = function(t, e, n, r, i, o) {
                                var a = new F(t.clone().multiplyScalar(100), e.clone().multiplyScalar(100), r, i, o);
                                return a.applyMatrix4(n), a
                            },
                            i = (new X.a).copyPosition(n);
                        o.axisLines.push(r(S.b.UP, S.b.DOWN, i, t.room, t.floor, a.AxisY)), e || o.axisLines.push(r(S.b.FORWARD, S.b.BACK, n, t.room, t.floor, a.AxisY), r(S.b.UP, S.b.DOWN, n, t.room, t.floor, a.AxisX), r(S.b.LEFT, S.b.RIGHT, n, t.room, t.floor, a.AxisZ)), o.axisLines.length > 0 && o.pointer.addSnapFeatures(o, a.AxisAny, o.axisLines)
                    }
                }
            }
            return t.prototype.init = function() {}, t.prototype.dispose = function() {}, t.prototype.activate = function() {
                this.subscriptions.push(this.pointer.onOriginChanged(this.updateSnapping, !0)), this.axisLineRenderer = new $(this.scene, this.getLayer("cursor-mesh"))
            }, t.prototype.deactivate = function() {
                this.subscriptions.forEach((function(t) {
                    return t.cancel()
                })), this.subscriptions.length = 0, this.pointer.removeSnapFeatures(this, a.AxisAny), this.axisLineRenderer.dispose(), this.axisLineRenderer = null
            }, t.prototype.beforeRender = function() {
                var t = this.getPhase(),
                    e = this.mobile ? !!O.b.mobile[t] : !!O.b.desktop[t];
                e !== this.editing && (this.editing = e, this.axisLineRenderer.clearLines())
            }, t.prototype.render = function() {
                this.editing && this.axisLineRenderer.render(this.pointer.lastIntersection, this.axisLines)
            }, t
        }(),
        $ = function() {
            function t(t, e) {
                var n, r, i = this;
                this.scene = t, this.layer = e, this.offsetFromMesh = .0075, this.featureColors = ((n = {})[a.AxisX] = z.x, n[a.AxisZ] = z.z, n[a.AxisY] = z.y, n), this.axesVisibleInConstraints = ((r = {})[V.a.EdgesAndPlanarAxes] = !0, r[V.a.Axes] = !0, r[V.a.PlanarAxes] = !0, r), this.linesActive = [], this.linesFree = [], this.axesVisible = [], this.axisMat = new q.a({
                    color: 4095,
                    linewidth: 1,
                    opacity: .75,
                    transparent: !0,
                    depthWrite: !1,
                    depthTest: !0
                }), this.render = function(t, e) {
                    var n, r;
                    if (t && i.axesVisibleInConstraints[t.constraint] && e.length > 0) {
                        if (e.length !== i.axesVisible.length) i.clearLines();
                        else i.axesVisible.every((function(t, n) {
                            return t.equals(e[n])
                        })) || i.clearLines();
                        if (i.container.parent !== i.scene.scene) {
                            try {
                                for (var o = Q(e), a = o.next(); !a.done; a = o.next()) {
                                    var s = a.value,
                                        u = i.getMesh(s);
                                    u.material.color.setHex(i.featureColors[s.featureType]), i.container.add(u), i.linesActive.push(u)
                                }
                            } catch (t) {
                                n = {
                                    error: t
                                }
                            } finally {
                                try {
                                    a && !a.done && (r = o.return) && r.call(o)
                                } finally {
                                    if (n) throw n.error
                                }
                            }
                            i.axesVisible = e.map((function(t) {
                                return t
                            })), i.scene.addChild(c.a.Root, i.container), i.container.position.copy(t.normal).multiplyScalar(i.offsetFromMesh), i.container.updateMatrixWorld(!0)
                        }
                    } else i.clearLines()
                }, this.clearLines = function() {
                    if (0 !== i.linesActive.length) {
                        for (; i.linesActive.length > 0;) {
                            var t = i.linesActive.pop();
                            t && (i.container.remove(t), i.linesFree.push(t))
                        }
                        i.scene.removeChild(c.a.Root, i.container)
                    }
                }, this.container = new L.a
            }
            return t.prototype.getMesh = function(t) {
                var e = this.linesFree.pop();
                return e ? (e.geometry.setFromPoints([t.start, t.end]), e.geometry.verticesNeedUpdate = !0) : (e = new tt(t, this.axisMat.clone())).layers.mask = this.layer.mask, e
            }, t.prototype.dispose = function() {
                for (this.clearLines(); this.linesFree.length > 0;) {
                    var t = this.linesFree.pop();
                    t && (this.container.remove(t), t.geometry.dispose(), t.material.dispose())
                }
                this.linesActive = [], this.linesFree = [], this.container = null
            }, t
        }(),
        tt = function(t) {
            function e(e, n) {
                var r = t.call(this, void 0, n) || this;
                return r.material = n, r.geometry = (new K.a).setFromPoints([e.start, e.end]), r
            }
            return Z(e, t), e
        }(Y.a),
        et = n(59),
        nt = n(321),
        rt = function() {
            function t(t, e, n, r) {
                var i = this;
                this.points = t, this.createPointSubscription = e, this.pointer = n, this.mobileCreateHackJob = r, this.subscriptions = [], this.lineSegments = [], this.updateSnapping = function(t) {
                    i.lineSegments.length > 0 && (i.pointer.removeSnapFeatures(i, a.LineSegment), i.lineSegments.length = 0);
                    for (var e = 0; e < i.points.length; e++)
                        if (e !== t && e !== t - 1 && e !== t + 1 && !i.points.isStartIndex(e)) {
                            var n = i.points.get(e),
                                r = i.points.get(e - 1),
                                o = i.points.getGroup(i.points.groupFromPointIndex(e));
                            i.lineSegments.push(new B(r, n, o.info.room, o.info.floor, a.LineSegment))
                        }
                    i.lineSegments.length > 0 && i.pointer.addSnapFeatures(i, a.LineSegment, i.lineSegments)
                }
            }
            return t.prototype.init = function() {}, t.prototype.dispose = function() {}, t.prototype.activate = function() {
                var t = this,
                    e = -1,
                    n = -1,
                    r = Object(nt.a)((function() {
                        return t.updateSnapping(t.points.length)
                    }), 16);
                this.subscriptions.push(this.createPointSubscription(et.a.ADDED, r, !0), this.createPointSubscription(et.a.REMOVED, r, !0), this.createPointSubscription(et.a.UPDATED, (function(r, i) {
                    i === e || t.mobileCreateHackJob() && i === n || (t.updateSnapping(i), n = e, e = i)
                }), !0))
            }, t.prototype.deactivate = function() {
                this.subscriptions.forEach((function(t) {
                    return t.cancel()
                })), this.subscriptions.length = 0, this.pointer.removeSnapFeatures(this, a.LinePoint), this.pointer.removeSnapFeatures(this, a.LineSegment)
            }, t.prototype.beforeRender = function() {}, t.prototype.render = function() {}, t
        }(),
        it = n(3),
        ot = n(57),
        at = n(76),
        st = function() {
            function t(t, e, n) {
                this.constraint = e, this.point = new x.a, this.normal = new x.a, ut(t) ? this.updateFromIntersection(t, e) : ct(t) && n && this.updateFromSnapIntersection(t, e, n), this.source = t
            }
            return t.prototype.updatePoint = function(t) {
                return this.point.copy(t), this.source.point.copy(t), this
            }, t.prototype.updateFromIntersection = function(t, e) {
                return this.source = t, this.updateContents(e, t.point, t.face.normal, t.distance, t.object), this
            }, t.prototype.updateFromSnapIntersection = function(t, e, n) {
                return this.source = t, this.updateContents(e, t.point, n, t.distance, t.object), this
            }, t.prototype.copy = function(t) {
                var e = t.constraint,
                    n = t.point,
                    r = t.normal,
                    i = t.distance,
                    o = t.object;
                this.updateContents(e, n, r, i, o)
            }, t.prototype.clone = function() {
                return new t(this.source, this.constraint)
            }, t.prototype.updateContents = function(t, e, n, r, i) {
                this.constraint = t, this.point.copy(e), this.normal.copy(n), this.distance = r, this.object = i, lt(i) ? (this.room = i.roomIndex, this.floor = i.floorIndex) : ht(i) && (this.floor = i.floorIndex), this.featureType = function(t) {
                    if (t) return "featureType" in t && void 0 !== t.featureType ? t.featureType : t instanceof x.a || t instanceof U.b ? a.SnapPoint : t instanceof T.b ? a.RoomMesh : t instanceof M.a ? a.Mesh : t instanceof C ? a.Mesh : t instanceof E.a || t instanceof U.a ? a.SnapLine : void 0
                }(i)
            }, t
        }(),
        ut = function(t) {
            return t && "face" in t && void 0 !== t.face && ht(t.object)
        },
        ct = function(t) {
            return t && "isLineOctreeIntersection" in t && ht(t.object)
        },
        lt = function(t) {
            return t && "roomIndex" in t && "floorIndex" in t
        },
        ht = function(t) {
            return t && "floorIndex" in t
        },
        ft = n(164),
        pt = n(22),
        dt = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        mt = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        vt = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(mt(arguments[e]));
            return t
        },
        yt = new it.a("snapping"),
        gt = function() {
            function t(t, e, n, r, i) {
                var o, s = this;
                this.raycaster = t, this.targetGroups = e, this.getConstraintStyle = n, this.isFloorHidden = i, this.origin = null, this.planeNormal = new x.a, this.plane = new ot.a, this.ray = new at.a, this.originChangedListeners = [], this.registeredSnapFeatures = ((o = {})[k.UserAxis] = [], o[k.UserLine] = [], o[k.UserPoint] = [], o[k.ModelFeature] = [], o), this.clearOrigin = function() {
                    s.origin = null, s.originChangedListeners.forEach((function(t) {
                        return t(null)
                    }))
                }, this.setOrigin = function(t, e) {
                    void 0 === e && (e = !1), s.origin && !e || (s.origin = t, s.plane.setFromNormalAndCoplanarPoint(s.origin.normal, s.origin.point), s.originChangedListeners.forEach((function(t) {
                        return t(s.origin)
                    })), yt.debug("Updating origin", s.origin, {
                        forceUpdate: e
                    }))
                }, this.setOriginFromPointer = function(t) {
                    if (!s.origin) {
                        var e = s.getMeshIntersection();
                        if (e) {
                            var n = new st(e, s.getConstraintStyle());
                            t && n.updatePoint(t), s.setOrigin(n, !0)
                        }
                    }
                }, this.snapFeatures = function(t) {
                    return s.registeredSnapFeatures[t].reduce((function(t, e) {
                        return t.concat(e.features)
                    }), [])
                }, this.addSnapFeatures = function(t, e, n) {
                    var r = H[e];
                    s.registeredSnapFeatures[r].push({
                        owner: t,
                        features: n
                    }), yt.debug("Adding " + n.length + " snap feature groups", a[e], e)
                }, this.removeSnapFeatures = function(t, e) {
                    var n = H[e],
                        r = s.registeredSnapFeatures[n].findIndex((function(e) {
                            return e.owner === t
                        }));
                    if (-1 !== r) {
                        var i = s.registeredSnapFeatures[n].splice(r, 1);
                        yt.debug("Removing " + i.length + " snap feature groups", a[e], e)
                    } else yt.debug("removeTemporarySnapFeature: " + e + " " + a[e] + " not found from", t, s.registeredSnapFeatures)
                }, this.filters = {
                    nop: function(t) {
                        return !0
                    },
                    userPoints: function(t) {
                        var e, n, r;
                        if (void 0 === t.object) return !1;
                        if ((r = t.object) && r instanceof x.a) try {
                            for (var i = dt(s.snapFeatures(k.UserPoint)), o = i.next(); !o.done; o = i.next()) {
                                if (o.value.equals(t.object)) return !0
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                o && !o.done && (n = i.return) && n.call(i)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        return !1
                    },
                    userLines: function(t) {
                        var e, n, r, i, o;
                        if (void 0 === t.object) return !1;
                        if ((o = t.object) && "isSnapAxisLine3" in o || "isSnapUserLine3" in o || "isSnapLine3" in o || "start" in o && "end" in o && "closestPointToPoint" in o) {
                            try {
                                for (var a = dt(s.snapFeatures(k.UserLine)), u = a.next(); !u.done; u = a.next()) {
                                    if (u.value.equals(t.object)) return !0
                                }
                            } catch (t) {
                                e = {
                                    error: t
                                }
                            } finally {
                                try {
                                    u && !u.done && (n = a.return) && n.call(a)
                                } finally {
                                    if (e) throw e.error
                                }
                            }
                            try {
                                for (var c = dt(s.snapFeatures(k.UserAxis)), l = c.next(); !l.done; l = c.next()) {
                                    if (l.value.equals(t.object)) return !0
                                }
                            } catch (t) {
                                r = {
                                    error: t
                                }
                            } finally {
                                try {
                                    l && !l.done && (i = c.return) && i.call(c)
                                } finally {
                                    if (r) throw r.error
                                }
                            }
                        }
                        return !1
                    },
                    userFeatures: function(t) {
                        return s.filters.userPoints(t) || s.filters.userLines(t)
                    },
                    onVisibleFloor: function(t) {
                        return t.object && void 0 !== t.object.floorIndex && !s.isFloorHidden(t.object.floorIndex)
                    },
                    targetGroup: function(t) {
                        var e, n;
                        try {
                            for (var r = dt(s.targetGroups()), i = r.next(); !i.done; i = r.next()) {
                                var o = i.value;
                                if (t.object && t.object instanceof o) return !0
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                i && !i.done && (n = r.return) && n.call(r)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        return !1
                    }
                }, this.meshSnapRadius = r ? pt.g.mobile : pt.g.desktop
            }
            return t.prototype.preload = function() {
                this.raycaster.snapPreload()
            }, t.prototype.getMeshIntersection = function(t) {
                var e = this,
                    n = (t && t.origin && t.normal ? this.raycaster.cast(t.origin, t.normal) : this.raycaster.getPointerHits()).filter((function(t) {
                        return e.filters.targetGroup(t) && e.filters.onVisibleFloor(t)
                    }))[0];
                return ut(n) ? n : null
            }, t.prototype.getIntersection = function(t) {
                var e = this.getMeshIntersection(t);
                if (!e) return null;
                this.cachedHit || (this.cachedHit = new st(e, this.getConstraintStyle()));
                var n = this.cachedHit.updateFromIntersection(e, this.getConstraintStyle()),
                    r = this.raycaster.getPointerRay();
                switch (this.ray.set(r.origin, r.direction), this.planeNormal.copy(n.normal), this.getConstraintStyle()) {
                    case V.a.Free:
                        return n;
                    case V.a.Axes:
                        return this.lockToWorldAxes(n);
                    case V.a.PlanarAxes:
                        var i = vt(this.snapFeatures(k.UserAxis), this.snapFeatures(k.UserLine), this.snapFeatures(k.UserPoint));
                        return this.softSnapToEdges(n, i, this.filters.userFeatures);
                    case V.a.Edges:
                        var o = vt(this.snapFeatures(k.UserLine), this.snapFeatures(k.UserPoint));
                        return this.softSnapToEdges(n, o, this.filters.onVisibleFloor);
                    case V.a.EdgesAndPlanarAxes:
                        var a = vt(this.snapFeatures(k.UserAxis), this.snapFeatures(k.UserLine), this.snapFeatures(k.UserPoint));
                        return this.softSnapToEdges(n, a, this.filters.onVisibleFloor)
                }
                return n
            }, Object.defineProperty(t.prototype, "lastIntersection", {
                get: function() {
                    return this.cachedHit
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onOriginChanged = function(t, e) {
                var n = this;
                void 0 === e && (e = !1);
                var r = {
                    renew: function() {
                        n.originChangedListeners.push(t)
                    },
                    cancel: function() {
                        Object(ft.a)(n.originChangedListeners, t)
                    }
                };
                return e && r.renew(), r
            }, t.prototype.lockToWorldAxes = function(t) {
                if (this.origin) {
                    var e = Object(V.b)(this.origin.point, t.point, V.a.Axes);
                    return this.cachedHit.copy(t), this.cachedHit.point.copy(e.position), this.cachedHit.constraint = "NONE" !== e.axisName ? V.a.Axes : V.a.Free, this.cachedHit.featureType = G[e.axisName], this.cachedHit
                }
                return t
            }, t.prototype.softSnapToEdges = function(t, e, n) {
                var r, i, o = this.origin ? this.origin.point : t.point,
                    a = this.origin ? this.origin.normal : t.normal;
                (r = this.raycaster).snapAddFeatures.apply(r, vt(e));
                var s = this.raycaster.snapCast(this.ray, this.meshSnapRadius, o, a).filter(n),
                    u = this.raycaster.snapPick(this.ray, this.meshSnapRadius, s);
                return (i = this.raycaster).snapRemoveFeatures.apply(i, vt(e)), u ? (this.cachedHit.updateFromSnapIntersection(u, this.getConstraintStyle(), a), this.cachedHit) : t
            }, t
        }(),
        bt = n(106),
        _t = n(5),
        wt = n(51),
        xt = n(0),
        Et = n(16),
        St = n(330),
        Tt = n.n(St),
        Mt = n(83),
        Ot = n(322),
        Pt = n(73),
        At = n(14),
        Lt = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        Rt = function() {
            function t(t, e, n, r, i, o, a, s, u) {
                var c = this;
                this.mobile = t, this.getPhase = e, this.pointer = n, this.sceneInfo = r, this.renderToTexture = i, this.getLayer = o, this.getChunks = a, this.onEditChange = s, this.editing = !1, this.editingStateChange = !1, this.setOverlay = function(t, e) {
                    var n, r;
                    try {
                        for (var i = Lt(c.getChunks()), o = i.next(); !o.done; o = i.next()) {
                            o.value.setColorOverlay(t ? e : null)
                        }
                    } catch (t) {
                        n = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (r = i.return) && r.call(i)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                }, this.setupCursorRenderCamera = function() {
                    var t, e, n = new wt.a(pt.a.perspective.fov, 1, .1, 100);
                    n.name = "Cursor Peek Camera";
                    var r = bt.a.ALL;
                    try {
                        for (var i = Lt(["measurement-mode", "measurement3d"]), o = i.next(); !o.done; o = i.next()) {
                            var a = o.value;
                            r.removeLayers(c.getLayer(a))
                        }
                    } catch (e) {
                        t = {
                            error: e
                        }
                    } finally {
                        try {
                            o && !o.done && (e = i.return) && e.call(i)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                    n.layers.mask = r.mask, n.updateProjectionMatrix();
                    return {
                        camera: n,
                        update: function(t, e, r) {
                            n.fov = t, n.near = e, n.far = r, n.updateProjectionMatrix()
                        }
                    }
                };
                var l = Object(Mt.a)(Tt.a),
                    h = new _t.a;
                this.cursorMesh = new Ot.a(this.sceneInfo.scene, this.getLayer("cursor-mesh")), this.cursorMesh.setVisible(!1);
                var f, p, d = new x.a,
                    m = new Et.a,
                    v = new _t.a,
                    y = u(),
                    g = pt.a.perspective;
                this.renderIntersection = function(t, e, n) {
                    f || (p = c.setupCursorRenderCamera(), f = p.camera, p.update(pt.a.perspective.fov, .1, 100)), y !== u() && (g = u() ? pt.a.ortho : pt.a.perspective, c.cursorMesh.scale(g.scale), p.update(g.fov, .1, 100), y = u());
                    var o = c.editingStateChange ? 1 : pt.a.smoothness;
                    if (e) {
                        if (r.playerCamera.getWorldPosition(d), r.playerCamera.getWorldQuaternion(m), u()) {
                            var a = r.cameraData.zoom(),
                                s = Object(At.g)(a, g.thresholdClose, g.thresholdFar, g.offsetClose, g.offsetFar);
                            f.position.copy(e.point).addScaledVector(S.b.UP, s), f.quaternion.copy(m)
                        } else {
                            s = Object(At.g)(e.distance, g.thresholdClose, g.thresholdFar, g.offsetClose, g.offsetFar);
                            var b = d.sub(e.point).setLength(s).add(e.point);
                            f.position.lerp(b, o), f.lookAt(e.point)
                        }
                        f.updateMatrixWorld(), pt.e.dimWhileActive && c.setOverlay(!1, pt.e.color), i.render(t, r.scene.scene, f), pt.e.dimWhileActive && c.setOverlay(!0, pt.e.color), v.lerp(function(t) {
                            var e = c.rttView.height,
                                n = c.rttView.width,
                                r = c.sceneInfo.cameraData,
                                i = e / 2,
                                o = -n / 2;
                            i = t.y < e / 2 + i ? e + i : -i;
                            var a = t.x + o,
                                s = r.height - t.y - i;
                            return h.set(a, s)
                        }(n), o), i.renderToScreen(t, v, l)
                    }
                    c.editingStateChange = !1
                }
            }
            return t.prototype.init = function() {}, t.prototype.dispose = function() {}, t.prototype.activate = function() {
                this.sceneInfo.scene.addChild(c.a.Root, this.cursorMesh.container);
                var t = this.mobile ? pt.f.mobileSize : this.sceneInfo.cameraData.height > pt.f.highResThreshold ? pt.f.desktopSizeHighRes : pt.f.desktopSize;
                this.rttView = this.renderToTexture.createRenderTarget2D(t, t, {
                    format: xt.Ub
                }, !1)
            }, t.prototype.deactivate = function() {
                this.sceneInfo.scene.removeChild(c.a.Root, this.cursorMesh.container), this.renderToTexture.disposeRenderTarget2D(this.rttView), this.editing = !1
            }, t.prototype.beforeRender = function() {
                var t = this.getPhase(),
                    e = this.mobile ? !!O.b.mobile[t] : !!O.b.desktop[t];
                e !== this.editing && (this.editingStateChange = !0, this.editing = e, this.cursorMesh.setVisible(this.editing), this.onEditChange())
            }, t.prototype.render = function() {
                if (this.editing && (this.hit = this.mobile ? this.pointer.lastIntersection : this.pointer.getIntersection(), this.hit)) {
                    this.cursorMesh.onPositionUpdate(this.hit.point, this.hit.normal);
                    var t = Object(Pt.e)(this.sceneInfo.cameraData, this.hit.point).screenPosition;
                    this.renderIntersection(this.rttView, this.hit, t)
                }
            }, t
        }(),
        Dt = (n(309), n(39)),
        It = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        Ct = function() {
            function t(e, n, r, i, o, a, s, u) {
                var c = this;
                this.points = e, this.setSelected = n, this.pointer = r, this.changePhase = i, this.getPhase = o, this.isFloorplan = a, this.currentFloor = s, this.toggleMeasuringAnalytics = u, this.id = t, this.previousPhase = O.a.IDLE, this.currentLinePoints = 0, this.previousPoint = new x.a, this.inputSubscriptions = [], this.log = new it.a("measurement-creator"), this.createNewLine = function(t) {
                    c.toggleMeasuringAnalytics(!0);
                    var e = {
                            visible: !0,
                            room: void 0 !== t.room ? t.room : -1,
                            floor: void 0 !== t.floor ? t.floor : c.currentFloor(),
                            type: c.isFloorplan() ? Dt.a.FloorplanOnly : Dt.a.ThreeD,
                            text: ""
                        },
                        n = c.points.startGroup(e);
                    c.currentGroup = n, c.points.push(t.point), c.currentLinePoints = 1, c.setSelected(n), c.pointer.setOrigin(t, !0)
                }, this.addPointToLine = function(t) {
                    c.previousPoint.copy(t.point), c.points.push(t.point), ++c.currentLinePoints, c.pointer.setOrigin(t, !0)
                }, this.updateLastPoint = function(t) {
                    c.points.update(c.points.length - 1, t.point)
                }, this.getIntersection = function(t) {
                    return c.pointer.getIntersection(t)
                }, this.setPhase = function(t) {
                    var e = c.getPhase();
                    t !== e && (c.previousPhase = e, c.changePhase(t))
                }, this.restorePreviousPhase = function() {
                    c.setPhase(c.previousPhase)
                }
            }
            return t.prototype.start = function() {
                var t, e;
                if (this.getPhase() === O.a.IDLE) {
                    this.previousPoint.set(1e3, 1e3, 1e3), this.setPhase(O.a.CREATING), this.setSelected(-1);
                    try {
                        for (var n = It(this.inputSubscriptions), r = n.next(); !r.done; r = n.next()) {
                            r.value.renew()
                        }
                    } catch (e) {
                        t = {
                            error: e
                        }
                    } finally {
                        try {
                            r && !r.done && (e = n.return) && e.call(n)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                }
            }, t.prototype.cancelSubs = function() {
                var t, e;
                try {
                    for (var n = It(this.inputSubscriptions), r = n.next(); !r.done; r = n.next()) {
                        r.value.cancel()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
            }, t.prototype.stop = function() {
                this.cancelSubs(), this.currentLinePoints = 0, this.setSelected(-1), this.setPhase(O.a.IDLE), this.pointer.clearOrigin(), this.toggleMeasuringAnalytics(!1)
            }, t
        }(),
        Nt = n(32),
        Ut = n(100),
        jt = n(31),
        kt = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        Ft = function(t) {
            function e(n, r, i, o, a, s, u, c, l, h, f, p, d) {
                var m = t.call(this, n, r, o, a, l, f, p, d) || this;
                return m.setCreatePointProgress = s, m.updateCreatePointHit = u, m.toggleCameraMovement = c, m.continuous = h, m.onLongPressSuccess = function(t) {
                    m.log.debug("onLongPressSuccess while in phase:", O.a[m.getPhase()]), m.getPhase() === O.a.CREATING ? (m.createNewLine(t), m.addPointToLine(t)) : m.getPhase() === O.a.CREATING_NEXT_POINT && (m.continuous() ? (m.updateLastPoint(t), m.addPointToLine(t)) : m.updateLastPoint(t)), m.setPhase(O.a.POINT_PLACED)
                }, m.onLongPressStart = function(t) {
                    if (t.buttons === Nt.b.PRIMARY && (m.getPhase() === O.a.CREATING || m.getPhase() === O.a.CREATING_NEXT_POINT)) {
                        var n = m.getIntersection();
                        n && (m.previousPoint.equals(n.point) || (m.setPhase(O.a.CONFIRMING_POINT), m.toggleCameraMovement(!1), m.setCreatePointProgress(Date.now(), e.longPressCreateThreshold), m.updateCreatePointHit(n), m.previousPhase === O.a.CREATING_NEXT_POINT && (m.updateLastPoint(n), m.toggleLastPointDraggable(!1)), m.creatingPointTimeout = window.setTimeout((function() {
                            m.restorePreviousPhase(), m.onLongPressSuccess(n), m.toggleLastPointDraggable(!0)
                        }), e.longPressCreateThreshold)))
                    }
                }, m.onLongPressEnd = function() {
                    m.getPhase() === O.a.CONFIRMING_POINT && (m.log.debug("onLongPressEnd, cancelling confirmation"), m.setCreatePointProgress(0, e.longPressCreateThreshold), window.clearTimeout(m.creatingPointTimeout), m.toggleCameraMovement(!0), m.restorePreviousPhase()), m.getPhase() === O.a.CREATING_NEXT_POINT && m.points.update(m.points.length - 1, m.points.get(m.points.length - 2)), m.setPlacedtoCreatePhase()
                }, m.onDrag = function() {
                    var t = m.getIntersection();
                    t && (m.setPlacedtoCreatePhase(), m.setPhase(O.a.EDITING), m.previousPhase === O.a.CREATING_NEXT_POINT ? m.updateLastTwoPoints(t) : m.previousPhase === O.a.CREATING && m.updateLastPoint(t))
                }, m.onDragEnd = function() {
                    m.getPhase() === O.a.EDITING && m.restorePreviousPhase(), m.getPhase() !== O.a.CREATING && m.getPhase() !== O.a.CREATING_NEXT_POINT || (m.toggleLastPointDraggable(!1), m.toggleCameraMovement(!0))
                }, m.toggleLastPointDraggable = function(t) {
                    t ? (m.dragSub.renew(), m.dragEndSub.renew()) : (m.dragSub.cancel(), m.dragEndSub.cancel())
                }, m.updateLastTwoPoints = function(t) {
                    m.points.update(m.points.length - 1, t.point), m.points.update(m.points.length - 2, t.point)
                }, m.dragSub = i(Ut.c, m.onDrag), m.dragEndSub = i(Ut.b, m.onDragEnd), m.inputSubscriptions.push(i(jt.h, m.onLongPressStart), i(jt.g, m.onLongPressEnd)), m.dragSub.cancel(), m.dragEndSub.cancel(), m.cancelSubs(), m
            }
            return kt(e, t), e.prototype.start = function() {
                t.prototype.start.call(this)
            }, e.prototype.stop = function() {
                if (this.getPhase() === O.a.CREATING_NEXT_POINT)
                    if (this.continuous()) this.points.pop();
                    else {
                        var e = this.points.getGroup(this.currentGroup);
                        this.points.removeFromIdx(e.startIndex)
                    }
                t.prototype.stop.call(this)
            }, e.prototype.setPlacedtoCreatePhase = function() {
                this.getPhase() === O.a.POINT_PLACED && (this.continuous() ? this.previousPhase === O.a.CREATING ? this.setPhase(O.a.CREATING_NEXT_POINT) : this.previousPhase === O.a.CREATING_NEXT_POINT && this.setPhase(O.a.CREATING_NEXT_POINT) : this.previousPhase === O.a.CREATING ? this.setPhase(O.a.CREATING_NEXT_POINT) : this.previousPhase === O.a.CREATING_NEXT_POINT && this.setPhase(O.a.CREATING))
            }, e.longPressCreateThreshold = 500, e
        }(Ct),
        Bt = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        Gt = function(t) {
            function e(e, n, r, i, o, a, s, u, c, l) {
                var h = t.call(this, e, n, i, o, a, u, c, l) || this;
                return h.continuous = s, h.onCreate = function(t) {
                    var e = h.previousPoint.distanceTo(t.point) > pt.d;
                    if (e || 2 !== h.currentLinePoints) {
                        if (h.getPhase() === O.a.CREATING) return h.createNewLine(t), h.addPointToLine(t), void h.setPhase(O.a.CREATING_NEXT_POINT);
                        e && h.getPhase() === O.a.CREATING_NEXT_POINT && (h.continuous() ? (h.updateLastPoint(t), h.addPointToLine(t)) : h.finishLine(t))
                    } else {
                        var n = {
                                origin: t.point.addScaledVector(t.normal, .05),
                                normal: t.normal
                            },
                            r = h.pointer.getMeshIntersection(n);
                        if (r)
                            if (h.continuous()) {
                                h.points.pop();
                                var i = new st(r, V.a.Free);
                                h.addPointToLine(i), h.addPointToLine(i), h.setPhase(O.a.CREATING_NEXT_POINT)
                            } else h.finishLine(new st(r, V.a.Free))
                    }
                }, h.onMouseMove = function() {
                    if (h.getPhase() === O.a.CREATING_NEXT_POINT) {
                        var t = h.getIntersection();
                        t && h.updateLastPoint(t)
                    }
                }, h.onMouseClick = function(t) {
                    if (t.button === Nt.a.PRIMARY && h.getPhase() !== O.a.IDLE) {
                        var e = h.getIntersection();
                        e && h.onCreate(e)
                    }
                }, h.inputSubscriptions.push(r(jt.n, h.onMouseMove), r(jt.a, h.onMouseClick)), h.cancelSubs(), h
            }
            return Bt(e, t), e.prototype.start = function() {
                t.prototype.start.call(this)
            }, e.prototype.stop = function() {
                this.getPhase() === O.a.CREATING_NEXT_POINT && (this.points.pop(), this.currentLinePoints < 3 && this.points.pop()), t.prototype.stop.call(this)
            }, e.prototype.finishLine = function(t) {
                this.points.pop(), this.addPointToLine(t), this.setPhase(O.a.CREATING), this.toggleMeasuringAnalytics(!1)
            }, e
        }(Ct),
        zt = n(29),
        Ht = function(t) {
            return t instanceof jt.a ? t.button === Nt.a.PRIMARY : t.buttons === Nt.b.PRIMARY
        },
        Vt = n(68),
        Wt = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        Xt = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        qt = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(Xt(arguments[e]));
            return t
        },
        Yt = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        Kt = function() {
            function t(t, e, n, r, i, o, a, s, u) {
                var c, h, f = this;
                this.points = t, this.input = e, this.mobile = n, this.getPhase = r, this.changePhase = i, this.restorePreviousPhase = o, this.setSelectedLine = a, this.changeCursor = s, this.onDragEnd = u, this.colliderGeometry = new P.a(.125, .125, .125), this.colliderMaterial = new A.a({
                    color: 65280,
                    transparent: !0,
                    opacity: .25,
                    depthWrite: !1
                }), this.colliderPool = [], this.colliders = new Zt, this.inputSubscriptions = [], this.registerCommonInput = function() {
                    return [f.input.registerMeshHandler(jt.d, Vt.a.isType(Qt), (function(t, e) {
                        Ht(t) && O.c[f.getPhase()] && f.validJoint(e) && (f.setSelectedLine(e.groupIndex), f.changePhase(O.a.EDITING), f.mobile || f.changeCursor(l.a.GRABBING))
                    })), f.input.registerMeshHandler(jt.c, Vt.a.isType(Qt), (function(t, e) {
                        f.getPhase() === O.a.EDITING && f.validJoint(e) && (f.update(), f.restorePreviousPhase(), f.onDragEnd(), f.mobile || f.changeCursor(l.a.DEFAULT))
                    }))]
                }, (c = this.inputSubscriptions).push.apply(c, qt(this.registerCommonInput())), this.mobile || (h = this.inputSubscriptions).push.apply(h, qt(this.registerHoverInput())), this.deactivate()
            }
            return t.prototype.activate = function() {
                var t, e;
                try {
                    for (var n = Yt(this.inputSubscriptions), r = n.next(); !r.done; r = n.next()) {
                        r.value.renew()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
                this.update()
            }, t.prototype.deactivate = function() {
                var t, e;
                this.removeAllColliders();
                try {
                    for (var n = Yt(this.inputSubscriptions), r = n.next(); !r.done; r = n.next()) {
                        r.value.cancel()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
            }, t.prototype.dispose = function() {
                this.deactivate(), this.colliderMaterial.dispose(), this.colliderGeometry.dispose()
            }, t.prototype.validJoint = function(t) {
                return -1 !== this.container.children.indexOf(t)
            }, Object.defineProperty(t.prototype, "container", {
                get: function() {
                    return this.colliders
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.update = function() {
                var t, e;
                this.removeAllColliders();
                var n = 0;
                try {
                    for (var r = Yt(this.points), i = r.next(); !i.done; i = r.next()) {
                        var o = i.value,
                            a = this.getCollider(n);
                        a.position.copy(o), this.colliders.add(a), this.input.registerMesh(a, !1), ++n, a.updateMatrixWorld(!0)
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        i && !i.done && (e = r.return) && e.call(r)
                    } finally {
                        if (t) throw t.error
                    }
                }
            }, t.prototype.getCollider = function(t) {
                var e = this.colliderPool[t] || new Qt(this.colliderGeometry, this.colliderMaterial);
                return this.colliderPool[t] = e, e.index = t, e.groupIndex = this.points.groupFromPointIndex(t), e
            }, t.prototype.removeAllColliders = function() {
                for (var t; t = this.colliders.children[0];) this.input.unregisterMesh(t), this.colliders.remove(t)
            }, t.prototype.registerHoverInput = function() {
                var t = this;
                return [this.input.registerMeshHandler(jt.e, Vt.a.isType(Qt), (function() {
                    O.d[t.getPhase()] && t.changeCursor(l.a.GRAB)
                })), this.input.registerMeshHandler(jt.r, Vt.a.isType(Qt), (function() {
                    O.d[t.getPhase()] && t.changeCursor(l.a.DEFAULT)
                }))]
            }, t
        }(),
        Zt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return Wt(e, t), e
        }(L.a),
        Qt = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return Wt(e, t), e
        }(zt.a),
        Jt = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        $t = function() {
            function t(t, e, n, r, i) {
                var o = this;
                this.points = t, this.pointer = n, this.getPhase = r, this.toggleMeasuringAnalytics = i, this.inputSubscriptions = [], this.onDragBegin = function(t, e) {
                    if (O.d[o.getPhase()]) {
                        o.toggleMeasuringAnalytics(!0);
                        var n = o.points.isStartIndex(e.index) ? e.index + 1 : e.index - 1,
                            r = o.points.get(n);
                        o.pointer.clearOrigin(), o.pointer.setOriginFromPointer(r)
                    }
                }, this.onDragEnd = function() {
                    O.d[o.getPhase()] && (o.toggleMeasuringAnalytics(!1), o.pointer.clearOrigin())
                }, this.onDrag = function(t, e) {
                    if (t.buttons === Nt.b.PRIMARY && O.d[o.getPhase()]) {
                        var n = o.pointer.getIntersection();
                        n && o.points.update(e.index, n.point)
                    }
                }, this.inputSubscriptions.push(e.registerMeshHandler(jt.b, Vt.a.isType(Qt), this.onDragBegin), e.registerMeshHandler(jt.d, Vt.a.isType(Qt), this.onDrag), e.registerMeshHandler(jt.c, Vt.a.isType(Qt), this.onDragEnd)), this.deactivate()
            }
            return t.prototype.activate = function() {
                var t, e;
                try {
                    for (var n = Jt(this.inputSubscriptions), r = n.next(); !r.done; r = n.next()) {
                        r.value.renew()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
            }, t.prototype.deactivate = function() {
                var t, e;
                try {
                    for (var n = Jt(this.inputSubscriptions), r = n.next(); !r.done; r = n.next()) {
                        r.value.cancel()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
            }, t
        }(),
        te = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        ee = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        ne = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(ee(arguments[e]));
            return t
        },
        re = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return te(e, t), e
        }(L.a),
        ie = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return te(e, t), e
        }(zt.a),
        oe = function() {
            function t(t, e, n, r, i, o, a) {
                var s;
                this.pointGroups = t, this.input = e, this.changeCursor = r, this.getPhase = i, this.setSelectedLine = o, this.getSelected = a, this.colliderGeometry = new P.b(1, .125, .125), this.colliderMaterial = new A.a({
                    color: 16753920,
                    transparent: !0,
                    opacity: .25,
                    depthWrite: !1
                }), this.colliderPool = [], this.colliders = new re, this.directionCache = new x.a, this.inputSubscriptions = [], this.inputSubscriptions.push(this.registerClickInput()), n || (s = this.inputSubscriptions).push.apply(s, ne(this.registerHoverInput())), this.deactivate()
            }
            return t.prototype.activate = function() {
                this.inputSubscriptions.forEach((function(t) {
                    return t.renew()
                })), this.update()
            }, t.prototype.deactivate = function() {
                this.removeAllColliders(), this.inputSubscriptions.forEach((function(t) {
                    return t.cancel()
                }))
            }, t.prototype.dispose = function() {
                this.deactivate(), this.colliderMaterial.dispose(), this.colliderGeometry.dispose()
            }, t.prototype.update = function() {
                this.removeAllColliders();
                for (var t = 0, e = 0; e < this.pointGroups.groupCount; ++e)
                    for (var n = this.pointGroups.getGroup(e), r = 0; r < n.count - 1; ++r) {
                        var i = this.getCollider(t, e);
                        ++t;
                        var o = n.get(r),
                            a = n.get(r + 1);
                        o && a && (this.updateCollider(i, o, a), this.colliders.add(i), this.input.registerMesh(i, !1))
                    }
            }, t.prototype.updateCollider = function(t, e, n) {
                t.position.copy(e).add(n).multiplyScalar(.5), this.directionCache.copy(n).sub(e).normalize(), t.quaternion.setFromUnitVectors(S.b.RIGHT, this.directionCache), t.scale.x = Math.max(e.distanceTo(n), .01), t.updateMatrixWorld(!0)
            }, t.prototype.validLine = function(t) {
                return -1 !== this.container.children.indexOf(t)
            }, Object.defineProperty(t.prototype, "container", {
                get: function() {
                    return this.colliders
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.getCollider = function(t, e) {
                var n = this.colliderPool[t] || new ie(this.colliderGeometry, this.colliderMaterial);
                return this.colliderPool[t] = n, n.groupIndex = e, n.visible = !0, n
            }, t.prototype.removeAllColliders = function() {
                for (; this.colliders.children.length > 0;) {
                    var t = this.colliders.children[0];
                    this.colliders.remove(t), this.input.unregisterMesh(t)
                }
            }, t.prototype.registerHoverInput = function() {
                var t = this;
                return [this.input.registerMeshHandler(jt.e, Vt.a.isType(ie), (function(e, n) {
                    t.validLine(n) && t.getPhase() === O.a.IDLE && t.changeCursor(l.a.FINGER)
                })), this.input.registerMeshHandler(jt.r, Vt.a.isType(ie), (function(e, n) {
                    t.validLine(n) && t.getPhase() === O.a.IDLE && t.changeCursor(l.a.DEFAULT)
                }))]
            }, t.prototype.registerClickInput = function() {
                var t = this;
                return this.input.registerMeshHandler(jt.a, Vt.a.isType(ie), (function(e, n) {
                    if (t.validLine(n) && Ht(e) && t.getPhase() === O.a.IDLE) {
                        var r = t.getSelected() === n.groupIndex ? -1 : n.groupIndex;
                        t.setSelectedLine(r)
                    }
                }))
            }, t
        }(),
        ae = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        se = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        ue = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(se(arguments[e]));
            return t
        },
        ce = function() {
            function t(t, e, n, r, i, o, a) {
                var s, u = this;
                this.lines = t, this.getLinesForPoint = e, this.editingMaterial = n, this.createPointSubscription = r, this.getPhase = o, this.getSelected = a, this.bindings = [], this.onDragEnd = function(t) {
                    var e, n;
                    try {
                        for (var r = ae(u.lines), i = r.next(); !i.done; i = r.next()) {
                            i.value.restoreLineMaterial()
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            i && !i.done && (n = r.return) && n.call(r)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }, this.onClick = function(t, e) {
                    var n, r;
                    if (u.getPhase() === O.a.IDLE) {
                        try {
                            for (var i = ae(u.lines), o = i.next(); !o.done; o = i.next()) {
                                o.value.restoreLineMaterial()
                            }
                        } catch (t) {
                            n = {
                                error: t
                            }
                        } finally {
                            try {
                                o && !o.done && (r = i.return) && r.call(i)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                        if (t.down) {
                            var a = e.index;
                            void 0 !== a && u.styleLines(a)
                        }
                    }
                }, this.styleLines = function(t) {
                    var e, n, r = u.getLinesForPoint(t);
                    try {
                        for (var i = ae(r), o = i.next(); !o.done; o = i.next()) {
                            var a = o.value;
                            a.group === u.getSelected() && a.line.overrideLineMaterial(u.editingMaterial)
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }, (s = this.bindings).push.apply(s, ue([i.registerMeshHandler(jt.m, Vt.a.isType(Qt), this.onClick), i.registerUnfilteredHandler(jt.c, this.onDragEnd)], this.setupLineStyler(this.createPointSubscription))), this.deactivate()
            }
            return t.prototype.activate = function() {
                var t, e;
                try {
                    for (var n = ae(this.bindings), r = n.next(); !r.done; r = n.next()) {
                        r.value.renew()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
            }, t.prototype.deactivate = function() {
                var t, e;
                try {
                    for (var n = ae(this.bindings), r = n.next(); !r.done; r = n.next()) {
                        r.value.cancel()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
            }, t.prototype.setupLineStyler = function(t) {
                var e = this;
                return [t(et.a.ADDED, (function() {
                    var t = e.lines[e.lines.length - 1];
                    t && t.restoreLineMaterial()
                }), !1), t(et.a.UPDATED, (function(t, n) {
                    e.styleLines(n)
                }), !1)]
            }, t
        }(),
        le = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        he = function(t) {
            var e = this;
            this.getChunks = t, this.active = null, this.toggle = function(t) {
                var n, r;
                if (t !== e.active) try {
                    for (var i = le(e.getChunks()), o = i.next(); !o.done; o = i.next()) o.value.setColorOverlay(t ? pt.e.color : null)
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        o && !o.done && (r = i.return) && r.call(i)
                    } finally {
                        if (n) throw n.error
                    }
                }
                e.active = t
            }
        },
        fe = (n(310), n(329)),
        pe = n(84),
        de = n(152),
        me = n(91),
        ve = n(6),
        ye = n(95),
        ge = n(48),
        be = n(104),
        _e = n(28),
        we = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        xe = function() {
            return (xe = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        Ee = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        Se = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        Te = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        Me = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(Te(arguments[e]));
            return t
        },
        Oe = new it.a("measurement-mode"),
        Pe = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "measurement-mode", e.longPressStart = Date.now(), e.threshold = 800, e.lineSidToPointMap = {}, e.mobile = !1, e.blockNavigation = function() {
                    return !1
                }, e.onToggleContinuous = function(t) {
                    e.mobile || t(), e.stopMeasuring()
                }, e.changePhase = function(t) {
                    e.data.phase !== t && (Oe.debug("Phase Change: " + O.a[e.data.phase] + " -> " + O.a[t]), e.previousPhase = e.data.phase, e.data.phase = t, e.data.commit())
                }, e.restorePreviousPhase = function() {
                    e.changePhase(e.previousPhase)
                }, e.buildAnalyticsMessage = function(t) {
                    var n = e.data.getGroupInfo(t);
                    return n && n.hasLength() ? xe({
                        sid: n.info && n.info.sid ? n.info.sid : n.describe(),
                        totalLength: n ? n.length : 0,
                        segments: n ? n.count : 0,
                        temporary: !n.info || n.info.sid === n.describe(),
                        viewmode: e.viewmodeData.currentMode,
                        floor: n.info && void 0 !== n.info.floor ? n.info.floor : e.floorsViewData.getHighestVisibleFloor(),
                        continuous: e.settings.tryGetProperty(y.a.MeasurementContinuousLines, !1)
                    }, e.getAnalyticsForConstraints(), {
                        type: Dt.a[n.info.type]
                    }) : null
                }, e.getAnalyticsForConstraints = function() {
                    var t = e.pointer.lastIntersection;
                    if (t) {
                        var n = t.featureType,
                            r = t.constraint;
                        return {
                            featureType: void 0 !== n ? a[n] : "None",
                            constraint: V.a[r]
                        }
                    }
                    return null
                }, e.toggleMeasuringAnalytics = function(t) {
                    t ? e.analyticsSubs.forEach((function(t) {
                        return t.renew()
                    })) : e.analyticsSubs.forEach((function(t) {
                        return t.cancel()
                    }))
                }, e.toggleMeasuringMode = function(t) {
                    Oe.debug("toggleMeasuringMode", t), t !== (e.data.phase !== O.a.CLOSED) && (t ? (e.engine.toggleRendering(e, !0), e.changePhase(O.a.IDLE), e.editor.activate(), e.lineStyler.activate(), e.jointColliders.activate(), e.lineColliders.activate(), e.renderer.activate(), e.textRenderer.activate(), e.scene.addChild(c.a.Root, e.textRenderer.container), e.engine.broadcast(new ge.e(!0, e.viewmodeData.currentMode, e.pointGroups.groupCount)), e.pointer.preload()) : (e.engine.toggleRendering(e, !1), e.stopMeasuring(), e.changePhase(O.a.CLOSED), e.editor.deactivate(), e.lineStyler.deactivate(), e.jointColliders.deactivate(), e.lineColliders.deactivate(), e.renderer.deactivate(), e.textRenderer.deactivate(), e.scene.removeChild(c.a.Root, e.textRenderer.container), e.engine.broadcast(new ge.e(!1, e.viewmodeData.currentMode, e.pointGroups.groupCount))))
                }, e.startMeasuring = function() {
                    e.mobile || (e.navigation.addNavigationRule(e.blockNavigation), e.mouseCursor.changeCursor(l.a.XHAIR)), e.creator.start()
                }, e.stopMeasuring = function() {
                    var t = e.settings.tryGetProperty(y.a.MeasurementContinuousLines, !1),
                        n = e.data.getGroupInfo(e.data.selectedGroupIndex);
                    if (t && n && n.count > 2) {
                        var r = e.buildAnalyticsMessage(e.data.selectedGroupIndex);
                        r && e.engine.broadcast(new ge.b(xe({}, r, {
                            type: e.viewmodeData.isFloorplan() ? Dt.a[Dt.a.FloorplanOnly] : Dt.a[Dt.a.ThreeD]
                        })))
                    }
                    e.creator.stop(), e.lineColliders.update(), e.jointColliders.update(), e.mobile || (e.navigation.removeNavigationRule(e.blockNavigation), e.mouseCursor.changeCursor(l.a.DEFAULT))
                }, e.setupIntersectionVisuals = function(t, e, n, r, i, o, a, s, u, c) {
                    var l = e.addVisibilityRule((function() {
                            var t = s();
                            return !(!a && t === O.a.CREATING || t === O.a.CONFIRMING_POINT || t === O.a.CREATING_NEXT_POINT || t === O.a.EDITING)
                        })),
                        h = {
                            cameraData: i,
                            playerCamera: r.camera,
                            scene: r
                        };
                    return new Rt(a, s, o, h, t, u, (function() {
                        return n.chunks
                    }), (function() {
                        l()
                    }), c.isFloorplan)
                }, e
            }
            return we(e, t), e.prototype.init = function(t, e) {
                return Ee(this, void 0, void 0, (function() {
                    var n, r, i, o, a, s, x, E, S, P, A, L, R, D, I, U, j, k, F, B, G, z, H, W, X, q, Y, K, Z, Q, $, tt, nt, it, ot, at, st, ut, ct, lt, ht, ft, dt, mt, vt, yt, bt, _t, wt, xt, Et = this;
                    return Se(this, (function(St) {
                        switch (St.label) {
                            case 0:
                                return this.mobile = Object(ve.o)(), this.engine = e, [4, Promise.all([e.getModule(u.Nb), e.getModule(u.fb), e.getModule(u.x), e.getModule(u.D), e.getModule(u.U), e.getModule(u.eb), e.market.waitForData(f.c), e.market.waitForData(h.a), e.market.waitForData(p.a), e.market.waitForData(g.a)])];
                            case 1:
                                return r = Te.apply(void 0, [St.sent(), 10]), i = r[0], o = r[1], a = r[2], s = r[3], x = r[4], E = r[5], S = r[6], P = r[7], A = r[8], L = r[9], R = this, [4, e.market.waitForData(m.a)];
                            case 2:
                                return R.settings = St.sent(), this.scene = i.getScene(), this.viewmodeData = A, this.floorsViewData = S, this.input = a, this.mouseCursor = x, D = this, [4, e.getModule(u.V)];
                            case 3:
                                return D.navigation = St.sent(), this.lineDerivedDataFactory = new d.a(P, A, S, (function() {
                                    return Object(b.a)(L)
                                }), (function() {
                                    return Et.settings.tryGetProperty(y.a.UnitType, v.c.USFractional)
                                }), (function() {
                                    return !0
                                })), I = function() {
                                    return Et.viewmodeData.isFloorplan() ? [C] : [T.b]
                                }, U = e.claimRenderLayer(this.name), this.data = new Ce, e.market.register(this, Ce, this.data), j = Object(pe.b)([]), this.pointGroups = new Ke(j), k = function(t, e, n) {
                                    return void 0 === n && (n = !1), Object(et.b)(j, t).createSubscription(e, n)
                                }, this.dataSubscription = k(et.a.ALL, (function() {
                                    Et.data.repopulate(Et.pointGroups.groups()), Et.data.commit()
                                }), !0), F = function() {
                                    return Et.data.selectedGroupIndex
                                }, B = function(t) {
                                    Et.data.selectedGroupIndex !== t && (Et.data.selectedGroupIndex = t, Et.data.commit())
                                }, G = this.mobile ? pt.h.mobile : pt.h.desktop, z = {
                                    value: G
                                }, H = function() {
                                    return Et.settings.tryGetProperty(y.a.MeasurementSnapping, !1) ? Et.viewmodeData.isFloorplan() ? pt.h.floorplan : z.value : pt.h.disabled
                                }, W = function(t) {
                                    Oe.debug("setConstraintStyle:", V.a[t]), z.value = t
                                }, X = function() {
                                    return Et.data.phase
                                }, this.pointer = new gt(E, I, H, this.mobile, this.floorsViewData.isHidden), q = function() {
                                    var t = Et.settings.tryGetProperty(y.a.MeasurementContinuousLines, !1),
                                        e = Et.data.phase === O.a.CREATING || Et.data.phase === O.a.CREATING_NEXT_POINT || Et.previousPhase === O.a.CREATING_NEXT_POINT && Et.data.phase === O.a.EDITING;
                                    return t && Et.mobile && e
                                }, Y = new rt(this.pointGroups, k, this.pointer, q), e.addComponent(this, Y), K = new J(this.pointer, this.mobile, X, this.scene, e.getRenderLayer), e.addComponent(this, K), Z = function(t, e) {
                                    return a.registerUnfilteredHandler(t, e)
                                }, this.mobile ? (Q = function(t, e) {
                                    Et.longPressStart = t, Et.threshold = e
                                }, $ = function(t) {
                                    var e = Object(Pt.e)(P, t.point);
                                    Et.data.createPointPosition = e.screenPosition, Et.data.commit()
                                }, tt = function(t) {
                                    t ? (Et.dragInterceptor.cancel(), Et.navigation.removeNavigationRule(Et.blockNavigation)) : (Et.dragInterceptor.renew(), Et.navigation.addNavigationRule(Et.blockNavigation))
                                }, this.creator = new Ft(this.pointGroups, B, Z, this.pointer, this.changePhase, Q, $, tt, X, (function() {
                                    return Et.settings.tryGetProperty(y.a.MeasurementContinuousLines, !1)
                                }), this.viewmodeData.isFloorplan, this.floorsViewData.getHighestVisibleFloor, this.toggleMeasuringAnalytics)) : this.creator = new Gt(this.pointGroups, B, Z, this.pointer, this.changePhase, X, (function() {
                                    return Et.settings.tryGetProperty(y.a.MeasurementContinuousLines, !1)
                                }), this.viewmodeData.isFloorplan, this.floorsViewData.getHighestVisibleFloor, this.toggleMeasuringAnalytics), nt = function(t, e, n) {
                                    var r = Et.pointGroups.getGroup(t),
                                        i = r.describe(n);
                                    Et.lineSidToPointMap[i] = n;
                                    var o = Et.lineDerivedDataFactory.get(i);
                                    return Et.lineDerivedDataFactory.make(i, (function() {
                                        return {
                                            start_position: Et.pointGroups.get(e),
                                            end_position: Et.pointGroups.get(n),
                                            visible: r.info.visible,
                                            floor: r.info.floor,
                                            room: r.info.room,
                                            type: r.info.type,
                                            text: Et.pointGroups.isStartIndex(e) ? r.info.text : ""
                                        }
                                    }), o)
                                }, it = function() {
                                    return Et.viewmodeData.isFloorplan()
                                }, this.renderer = new He(this.pointGroups, k, P, s, U, e.claimRenderLayer("measure-lines"), F, it, nt), [4, e.addComponent(this, this.renderer)];
                            case 4:
                                return St.sent(), ot = new fe.a({
                                    color: "black",
                                    background: !0,
                                    backgroundColor: "#ffffff"
                                }), this.textRenderer = new Be(this.pointGroups, k, P, U, ye.a.visibleFloor + 3, ot, nt, it), [4, e.addComponent(this, this.textRenderer)];
                            case 5:
                                return St.sent(), this.textRenderer.deactivate(), this.editor = new $t(this.pointGroups, a, this.pointer, X, this.toggleMeasuringAnalytics), this.lineColliders = new oe(this.pointGroups, this.input, this.mobile, x.changeCursor, X, B, F), at = function() {
                                    Et.lineColliders.update();
                                    var t = Et.buildAnalyticsMessage(Et.data.selectedGroupIndex);
                                    t && Et.engine.broadcast(new ge.i(t))
                                }, this.jointColliders = new Kt(this.pointGroups, this.input, this.mobile, X, this.changePhase, this.restorePreviousPhase, B, x.changeCursor, at), this.lineStyler = new ce(this.renderer.lines, this.renderer.getLinesForPoint, this.renderer.dottedMaterial, k, this.input, X, F), [4, Promise.all([e.getModule(u.h), e.getModule(u.S)])];
                            case 6:
                                return st = Te.apply(void 0, [St.sent(), 2]), ut = st[0], ct = st[1], lt = this.setupIntersectionVisuals(o, ut, ct.mesh, this.scene, P, this.pointer, this.mobile, X, e.getRenderLayer, this.viewmodeData), e.addComponent(this, lt), ht = new he((function() {
                                    return ct.mesh.chunks
                                })), ft = this.data.onPhaseChanged((function(t) {
                                    ht.toggle(t !== O.a.CLOSED)
                                })), dt = new N(S.floors.floors, (function(t) {
                                    return S.isHidden(t)
                                }), ct.mesh, this.viewmodeData, X, a, t.floorplanDebug), e.addComponent(this, dt), t.floorplanDebug && this.scene.addChild(c.a.Root, dt.container), t.inputDebug && (this.scene.addChild(c.a.Root, this.jointColliders.container), this.scene.addChild(c.a.Root, this.lineColliders.container)), this.dragInterceptor = this.input.registerPriorityHandler(jt.d, M.a, (function() {
                                    return !0
                                })), this.dragInterceptor.cancel(), mt = function() {
                                    if (-1 !== Et.data.selectedGroupIndex) {
                                        var t = Et.data.selectedGroupIndex,
                                            e = Et.buildAnalyticsMessage(t);
                                        if (e) Et.settings.tryGetProperty(y.a.MeasurementContinuousLines, !1) && X() === O.a.CREATING_NEXT_POINT && Et.engine.broadcast(new ge.b(xe({}, e))), Et.engine.broadcast(new ge.d(xe({}, e, {
                                            count: Et.pointGroups.groupCount - 1
                                        })));
                                        Et.pointGroups.removeGroup(t), B(-1), Et.lineColliders.update(), Et.jointColliders.update(), Et.changePhase(O.a.IDLE), Et.mobile || Et.navigation.removeNavigationRule(Et.blockNavigation), Et.mobile || Et.mouseCursor.changeCursor(l.a.DEFAULT)
                                    }
                                }, vt = L.makeSweepChangeSubscription((function() {
                                    var t = X();
                                    t !== O.a.CREATING && t !== O.a.CREATING_NEXT_POINT && B(-1)
                                })), this.analyticsSubs = this.analytics(k, (function(t) {
                                    return e.broadcast(t)
                                })), [4, e.market.waitForData(_.c)];
                            case 7:
                                return yt = St.sent(), bt = yt.application, _t = function() {
                                    return yt.application
                                }, wt = yt.onPropertyChanged("application", (function(t) {
                                    t !== bt && (Et.textRenderer.activate(), Et.pointGroups.reset(), Et.textRenderer.deactivate(), Et.toggleMeasuringMode(!1), bt = t)
                                })), this.mobile || (n = this.bindings).push.apply(n, Me(this.hotkeys(mt, W, _t))), xt = A.makeModeChangeSubscription((function() {
                                    Et.data.phase !== O.a.CLOSED && Et.stopMeasuring()
                                })), this.bindings.push(ft, wt, xt, vt, e.commandBinder.addBinding(w.c, (function(t) {
                                    return Ee(Et, void 0, void 0, (function() {
                                        return Se(this, (function(e) {
                                            return this.toggleMeasuringMode(t.on), ht.toggle(t.dimWhileActive), [2]
                                        }))
                                    }))
                                })), e.commandBinder.addBinding(w.d, (function() {
                                    return Ee(Et, void 0, void 0, (function() {
                                        return Se(this, (function(t) {
                                            return [2, this.startMeasuring()]
                                        }))
                                    }))
                                })), e.commandBinder.addBinding(w.e, (function(t) {
                                    return Ee(Et, void 0, void 0, (function() {
                                        return Se(this, (function(e) {
                                            return [2, B(t.index)]
                                        }))
                                    }))
                                })), e.commandBinder.addBinding(w.f, (function() {
                                    return Ee(Et, void 0, void 0, (function() {
                                        return Se(this, (function(t) {
                                            return [2, this.stopMeasuring()]
                                        }))
                                    }))
                                })), e.commandBinder.addBinding(w.b, (function() {
                                    return Ee(Et, void 0, void 0, (function() {
                                        return Se(this, (function(t) {
                                            return [2, mt()]
                                        }))
                                    }))
                                })), e.commandBinder.addBinding(w.a, (function(t) {
                                    return Ee(Et, void 0, void 0, (function() {
                                        return Se(this, (function(e) {
                                            return this.lineDerivedDataFactory.clear(), this.pointGroups.copy(t.points.groups()), this.lineColliders.update(), this.jointColliders.update(), [2]
                                        }))
                                    }))
                                })), this.dataSubscription, this.settings.onPropertyChanged(y.a.MeasurementContinuousLines, (function() {
                                    return Et.onToggleContinuous(mt)
                                })), this.settings.onPropertyChanged(be.c, (function(t) {
                                    t || Et.toggleMeasuringMode(!1)
                                })), _e.b.globalSession.onChanged((function() {
                                    Et.data.phase !== O.a.CLOSED && Et.stopMeasuring()
                                }))), e.toggleRendering(this, !1), [2]
                        }
                    }))
                }))
            }, e.prototype.analytics = function(t, e) {
                var n = this;
                return [t(et.a.UPDATED, (function() {
                    var t = n.settings.tryGetProperty(y.a.MeasurementContinuousLines, !1);
                    if (n.mobile && n.data.phase === O.a.CREATING_NEXT_POINT && !t) {
                        var e = n.buildAnalyticsMessage(n.data.selectedGroupIndex);
                        e && n.engine.broadcast(new ge.b(xe({}, e, {
                            type: n.viewmodeData.isFloorplan() ? Dt.a[Dt.a.FloorplanOnly] : Dt.a[Dt.a.ThreeD]
                        })))
                    }
                })), t(et.a.ADDED, (function() {
                    var t = n.buildAnalyticsMessage(n.data.selectedGroupIndex);
                    if (n.data.phase === O.a.CREATING_NEXT_POINT && t) {
                        var e = n.settings.tryGetProperty(y.a.MeasurementContinuousLines, !1);
                        if (t && e) {
                            var r = n.pointGroups.getGroup(n.data.selectedGroupIndex);
                            n.engine.broadcast(new ge.f(xe({}, t, {
                                startPosition: n.pointGroups.get(r.startIndex),
                                endPosition: n.pointGroups.get(r.endIndex)
                            })))
                        } else n.engine.broadcast(new ge.b(xe({}, t, {
                            type: n.viewmodeData.isFloorplan() ? Dt.a[Dt.a.FloorplanOnly] : Dt.a[Dt.a.ThreeD]
                        })))
                    }
                })), t(et.a.REMOVED, (function() {
                    var t = n.data.getGroupInfo(n.pointGroups.groupCount - 1);
                    t && t.count
                }))]
            }, e.prototype.hotkeys = function(t, e, n) {
                var r = this;
                return [this.input.registerHandler(jt.f, (function(e) {
                    if (e.state === de.a.PRESSED) switch (e.key) {
                        case me.a.ESCAPE:
                            r.data.phase === O.a.CONFIRMING_POINT ? (r.creator.stop(), r.creator.start(), r.changePhase(O.a.CREATING)) : r.data.phase === O.a.CREATING || r.data.phase === O.a.CREATING_NEXT_POINT ? r.stopMeasuring() : n() !== _.b.WORKSHOP && r.data.phase !== O.a.CLOSED && r.toggleMeasuringMode(!1);
                            break;
                        case me.a.BACKSPACE:
                        case me.a.DELETE:
                            r.data.phase !== O.a.CLOSED && r.data.phase !== O.a.EDITING && t();
                            break;
                        case me.a.RETURN:
                            var i = r.data.getGroupInfo(r.pointGroups.groupCount - 1);
                            if (i)(r.settings.tryGetProperty(y.a.MeasurementContinuousLines, !1) ? i.count > 2 && r.data.phase === O.a.CREATING_NEXT_POINT : i.count >= 2 && r.data.phase === O.a.CREATING) && r.stopMeasuring()
                    }
                })), this.input.registerHandler(jt.f, (function(t) {
                    if (t.key === me.a.SHIFT || t.key === me.a.ALT) {
                        var n = t.modifiers,
                            r = n.altKey,
                            i = n.shiftKey,
                            o = i && r ? pt.h.shiftAlt : r ? pt.h.alt : i ? pt.h.shift : pt.h.desktop;
                        e(o)
                    }
                }))]
            }, e.prototype.onUpdate = function(t) {
                if (this.data.phase !== O.a.CLOSED) {
                    var e = this.data.selectedGroupIndex,
                        n = this.mobile ? O.e.mobile[this.data.phase] : O.e.desktop[this.data.phase];
                    for (var r in this.lineSidToPointMap) {
                        var i = this.lineDerivedDataFactory.get(r);
                        if (i) {
                            i.opacity.tick(t);
                            var o = this.lineSidToPointMap[r],
                                a = this.pointGroups.groupFromPointIndex(o) === e ? 1 : i.opacity.value,
                                s = n && !i.labelVisible ? 0 : a;
                            this.textRenderer.setTextOpacityByPoint(o, s), this.renderer.setLineOpacityByPoint(o, a)
                        }
                    }
                    if (this.mobile)
                        if (this.data.phase === O.a.CONFIRMING_POINT)(u = (Date.now() - this.longPressStart) / this.threshold) <= 1 && (this.data.createPointProgress = u, this.data.commit());
                        else if (this.data.phase === O.a.CREATING && 0 !== this.data.createPointProgress) {
                        var u = 0;
                        this.data.createPointProgress = u, this.data.commit()
                    }
                }
            }, e.prototype.dispose = function(e) {
                this.stopMeasuring(), this.toggleMeasuringMode(!1), this.lineColliders.dispose(), this.jointColliders.dispose(), this.textRenderer.dispose(), this.renderer.dispose(), e.disposeRenderLayer(this.name), t.prototype.dispose.call(this, e)
            }, e
        }(s.a),
        Ae = n(25),
        Le = n(81),
        Re = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        De = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        Ie = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        Ce = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "measure-mode", e._groups = [], e.phaseObservable = Object(Le.b)(O.a.CLOSED), e._selectedGroupIndex = -1, e._createPointProgress = -1, e
            }
            return Re(e, t), e.prototype.modeActive = function() {
                return this.phase !== O.a.CLOSED
            }, e.prototype.groups = function() {
                var t, e, n, r, i;
                return De(this, (function(o) {
                    switch (o.label) {
                        case 0:
                            o.trys.push([0, 5, 6, 7]), n = Ie(this._groups), r = n.next(), o.label = 1;
                        case 1:
                            return r.done ? [3, 4] : [4, r.value];
                        case 2:
                            o.sent(), o.label = 3;
                        case 3:
                            return r = n.next(), [3, 1];
                        case 4:
                            return [3, 7];
                        case 5:
                            return i = o.sent(), t = {
                                error: i
                            }, [3, 7];
                        case 6:
                            try {
                                r && !r.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                            return [7];
                        case 7:
                            return [2]
                    }
                }))
            }, Object.defineProperty(e.prototype, "selectedGroupSid", {
                get: function() {
                    var t = this.selectedGroupInfo;
                    return t && t.info.sid ? t.info.sid : null
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "selectedGroupInfo", {
                get: function() {
                    return -1 === this._selectedGroupIndex ? null : this.getGroupInfo(this._selectedGroupIndex)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "phase", {
                get: function() {
                    return this.phaseObservable.value
                },
                set: function(t) {
                    this.phase !== t && (this.phaseObservable.value = t)
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.onPhaseChanged = function(t) {
                return this.phaseObservable.onChanged(t)
            }, Object.defineProperty(e.prototype, "groupCount", {
                get: function() {
                    return this._groups.length
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "selectedGroupIndex", {
                get: function() {
                    return this._selectedGroupIndex
                },
                set: function(t) {
                    this._selectedGroupIndex = t
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "createPointPosition", {
                get: function() {
                    return this._createPointPosition
                },
                set: function(t) {
                    this._createPointPosition = t
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "createPointProgress", {
                get: function() {
                    return this._createPointProgress
                },
                set: function(t) {
                    this._createPointProgress = t
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.getGroupInfo = function(t) {
                return t < 0 || t >= this._groups.length ? null : this._groups[t]
            }, e.prototype.repopulate = function(t) {
                var e, n;
                this.clear();
                try {
                    for (var r = Ie(t), i = r.next(); !i.done; i = r.next()) {
                        var o = i.value;
                        this._groups.push(o.clone())
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        i && !i.done && (n = r.return) && n.call(r)
                    } finally {
                        if (e) throw e.error
                    }
                }
            }, e.prototype.clear = function() {
                this._groups = []
            }, e.prototype.clone = function() {
                return (new e).copy(this)
            }, e.prototype.copy = function(t) {
                return this.repopulate(t._groups), this._selectedGroupIndex = t._selectedGroupIndex, this._createPointProgress = t.createPointProgress, this._createPointPosition = t.createPointPosition, this.phase = t.phase, this.commit(), this
            }, e
        }(Ae.a),
        Ne = n(313),
        Ue = n(65),
        je = n(53),
        ke = n(35),
        Fe = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        Be = function() {
            function t(t, e, n, r, i, o, a, s) {
                var u = this;
                this.points = t, this.createPointSubscription = e, this.cameraData = n, this.renderLayer = r, this.renderOrder = i, this.textRenderer = o, this.getLineDetails = a, this.isOrthographic = s, this.lengthCache = [], this.meshPool = [], this.groupsToMeshes = {}, this.textContainer = new L.a, this.textGeometry = new Ue.a(1, 1), this.tmpCamPos = new x.a, this.tmpMidpoint = new x.a, this.cameraRotation = new Et.a, this.cameraProjection = new je.a, this.cameraPosition = new x.a, this.dataSubs = [this.createPointSubscription(et.a.REMOVED, (function(t, e) {
                    var n = u.meshPool[e];
                    n && (u.textContainer.remove(n), u.meshPool[e] = null);
                    for (var r = u.points.length - 1; r < u.lengthCache.length - 1; ++r) u.lengthCache[r] = -1
                }))]
            }
            return t.prototype.reset = function() {
                var t, e;
                try {
                    for (var n = Fe(this.meshPool), r = n.next(); !r.done; r = n.next()) {
                        var i = r.value;
                        i && this.textContainer.remove(i)
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
                this.meshPool = [], this.lengthCache = []
            }, t.prototype.init = function() {}, t.prototype.dispose = function() {
                this.textGeometry.dispose()
            }, t.prototype.activate = function() {
                var t, e;
                try {
                    for (var n = Fe(this.dataSubs), r = n.next(); !r.done; r = n.next()) {
                        r.value.renew()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
            }, t.prototype.deactivate = function() {
                var t, e;
                try {
                    for (var n = Fe(this.dataSubs), r = n.next(); !r.done; r = n.next()) {
                        r.value.cancel()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
                this.reset()
            }, Object.defineProperty(t.prototype, "container", {
                get: function() {
                    return this.textContainer
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.beforeRender = function() {
                var t = this.cameraData.pose;
                this.cameraRotation.copy(t.rotation), this.cameraPosition.copy(t.position), this.cameraProjection.copy(t.projection);
                for (var e = this.cameraData.height, n = this.cameraData.zoom(), r = this.cameraData.aspect(), i = 1; i < this.points.length; ++i) {
                    var o = i - 1,
                        a = this.points.groupFromPointIndex(i);
                    if (a === this.points.groupFromPointIndex(o)) {
                        var s = this.points.get(o),
                            u = this.points.get(i),
                            c = this.getLineDetails(a, o, i);
                        if (c) {
                            var l = this.setMeshVisible(i, c.labelVisible);
                            if (l) {
                                l.text !== c.labelContents && (l.text = c.labelContents);
                                var h = this.cameraPosition.distanceTo(l.position);
                                if (this.updateMeshPose(l, s, u, this.cameraRotation, this.cameraPosition, h, c.rotation), this.isOrthographic()) l.scaleFactor = pt.b.SCALE_DISTANCE * n;
                                else {
                                    var f = Object(Pt.d)(l.position, this.cameraPosition, this.cameraRotation, this.cameraProjection.asThreeMatrix4()),
                                        p = Math.abs(f.x);
                                    if (p < 1) {
                                        var d = Object(W.a)(this.cameraProjection, this.cameraPosition, l.position, e, pt.b.SCALE),
                                            m = (Object(At.e)(r, 1, 2.5) + n) * pt.b.SCALE_ASPECT,
                                            v = 1 + pt.b.SCALE_NDC - p * pt.b.SCALE_NDC - m;
                                        l.scaleFactor = Math.max(Math.min(1 / d * v, 3), .001)
                                    } else l.scaleFactor = .001
                                }
                            }
                        }
                    }
                }
            }, t.prototype.setTextOpacityByGroup = function(t, e) {
                var n, r, i = this.groupsToMeshes[t];
                if (i) try {
                    for (var o = Fe(i), a = o.next(); !a.done; a = o.next()) {
                        a.value.opacity = e
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        a && !a.done && (r = o.return) && r.call(o)
                    } finally {
                        if (n) throw n.error
                    }
                }
            }, t.prototype.setTextOpacityByPoint = function(t, e) {
                var n = this.meshPool[t];
                n && (n.opacity = e)
            }, t.prototype.updateMeshPose = function(t, e, n, r, i, o, a) {
                var s = this;
                this.tmpMidpoint.copy(e).add(n).multiplyScalar(.5);
                var u = this.isOrthographic() ? void 0 : function(t) {
                    return s.tmpCamPos.copy(i).sub(t).setLength(.15 * o).add(t)
                };
                t.setPosition(this.tmpMidpoint, u), t.setOrientation(r, a)
            }, t.prototype.render = function() {}, t.prototype.setMeshVisible = function(t, e) {
                var n = this.meshPool[t];
                if (!n && e) {
                    (n = this.textRenderer.createLabel()).setRenderLayer(this.renderLayer), n.renderOrder = this.renderOrder, n.opacity = 0, n.visible = !1;
                    var r = this.points.groupFromPointIndex(t);
                    n.userData.groupIndex = r, this.groupsToMeshes[r] || (this.groupsToMeshes[r] = []), this.groupsToMeshes[r].push(n), this.textContainer.add(n)
                }
                if (n) {
                    var i = e ? .001 : ke.c.LABEL_HIDDEN_OPACITY;
                    if (n.visible = n.opacity > i, !n.visible) return null
                }
                return this.meshPool[t] = n, n
            }, t
        }(),
        Ge = n(175),
        ze = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        He = function() {
            function t(t, e, n, r, i, o, a, s, u, c) {
                void 0 === a && (a = function() {
                    return -1
                }), void 0 === c && (c = 16777215);
                var l = this;
                this.points = t, this.createPointSubscription = e, this.cameraData = n, this.lineModule = r, this.mainLayer = i, this.lineLayer = o, this.selectedGroup = a, this.isOrthographic = s, this.getLineDetails = u, this.lineColor = c, this.endpointGeometry = new Ue.a(1, 1), this.linePool = [], this.groupToLines = {}, this.pointToLines = {}, this.activeLines = [], this.cameraQuaternion = new Et.a, this.cameraPosition = new x.a, this.cameraProjection = new je.a, this.getLinesForPoint = function(t) {
                    var e, n, r = [];
                    if (l.pointToLines[t]) try {
                        for (var i = ze(l.pointToLines[t]), o = i.next(); !o.done; o = i.next()) {
                            var a = o.value,
                                s = a.getMesh(Ge.a.line).userData,
                                u = s.startIndex,
                                c = s.endIndex,
                                h = s.group;
                            r.push({
                                endIndex: c,
                                startIndex: u,
                                line: a,
                                group: h
                            })
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                    return r
                }, this.updateMaterialColors(this.lineColor), this.dataSubs = [this.createPointSubscription(et.a.REMOVED, (function(t, e) {
                    l.resetLines()
                }))]
            }
            return t.prototype.updateMaterialColors = function(t) {
                var e = ke.d.lineDefault;
                this.lineMaterial = this.lineModule.makeLineMaterial(t, !0, {
                    linewidth: e
                }), this.endpointMaterial = this.lineModule.makeEndpointMaterial(t);
                var n = {
                    dashed: !0,
                    dashSize: .025,
                    gapSize: .05,
                    linewidth: ke.d.dottedLineDefault
                };
                this.dottedLineMaterial = this.lineModule.makeLineMaterial(t, !1, n), this.xLineMaterial = this.lineModule.makeLineMaterial(z.x, !1, n), this.yLineMaterial = this.lineModule.makeLineMaterial(z.y, !1, n), this.zLineMaterial = this.lineModule.makeLineMaterial(z.z, !1, n), this.xzLineMaterial = this.lineModule.makeLineMaterial(z.xz, !1, n)
            }, t.prototype.setLineOpacityByGroup = function(t, e) {
                var n, r, i = this.groupToLines[t];
                if (i) try {
                    for (var o = ze(i), a = o.next(); !a.done; a = o.next()) {
                        a.value.opacity(e)
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        a && !a.done && (r = o.return) && r.call(o)
                    } finally {
                        if (n) throw n.error
                    }
                }
            }, t.prototype.setLineOpacityByPoint = function(t, e) {
                var n, r, i = this.getLinesForPoint(t);
                if (i) try {
                    for (var o = ze(i), a = o.next(); !a.done; a = o.next()) {
                        a.value.line.opacity(e)
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        a && !a.done && (r = o.return) && r.call(o)
                    } finally {
                        if (n) throw n.error
                    }
                }
            }, t.prototype.resetLines = function() {
                var t, e;
                try {
                    for (var n = ze(this.lines), r = n.next(); !r.done; r = n.next()) {
                        var i = r.value;
                        i.opacity(0), i.hide()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
                this.groupToLines = {}, this.pointToLines = {}, this.lines.length = 0
            }, t.prototype.updateAllLines = function() {
                var t, e;
                if (!(this.points.length < 1)) {
                    for (var n = 0; n < this.points.length; n++) this.updateLine(n);
                    for (var r in this.groupToLines) {
                        var i = Number(r),
                            o = this.groupToLines[i];
                        try {
                            for (var a = ze(o), s = a.next(); !s.done; s = a.next()) {
                                s.value.updateSelected(this.selectedGroup() === i)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                s && !s.done && (e = a.return) && e.call(a)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    }
                }
            }, t.prototype.init = function() {}, t.prototype.dispose = function() {
                var t, e;
                this.deactivate();
                try {
                    for (var n = ze(this.linePool), r = n.next(); !r.done; r = n.next()) {
                        r.value.dispose()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
                this.endpointGeometry.dispose(), this.dottedLineMaterial.dispose(), this.lineMaterial.dispose(), this.endpointMaterial.dispose(), this.xLineMaterial.dispose(), this.yLineMaterial.dispose(), this.zLineMaterial.dispose()
            }, t.prototype.activate = function() {
                var t, e;
                try {
                    for (var n = ze(this.dataSubs), r = n.next(); !r.done; r = n.next()) {
                        r.value.renew()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
            }, t.prototype.deactivate = function() {
                var t, e;
                try {
                    for (var n = ze(this.dataSubs), r = n.next(); !r.done; r = n.next()) {
                        r.value.cancel()
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
                this.resetLines()
            }, Object.defineProperty(t.prototype, "lines", {
                get: function() {
                    return this.activeLines
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "dottedMaterial", {
                get: function() {
                    return this.dottedLineMaterial
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.beforeRender = function() {
                this.cameraQuaternion.copy(this.cameraData.pose.rotation), this.cameraPosition.copy(this.cameraData.pose.position), this.cameraProjection.copy(this.cameraData.pose.projection), this.updateAllLines()
            }, Object.defineProperty(t.prototype, "xMaterial", {
                get: function() {
                    return this.xLineMaterial
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "yMaterial", {
                get: function() {
                    return this.yLineMaterial
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "zMaterial", {
                get: function() {
                    return this.zLineMaterial
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "xzMaterial", {
                get: function() {
                    return this.xzLineMaterial
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.render = function() {}, t.prototype.updateLine = function(t) {
                var e = this.points.get(t),
                    n = this.points.get(t + 1),
                    r = this.points.groupFromPointIndex(t) === this.points.groupFromPointIndex(t + 1);
                e && n && r && this.setLinePosition(t, e, n)
            }, t.prototype.setLinePosition = function(t, e, n) {
                var r = this,
                    i = this.linePool[t];
                if (!i) {
                    var o = this.points.groupFromPointIndex(t);
                    if (!this.getLineDetails(o, t, t + 1).visible) return;
                    var a = ke.d.endpointDefault > .01 ? this.endpointMaterial.clone() : void 0;
                    i = this.lineModule.makeLine(e, n, this.lineMaterial.clone(), a, (function() {
                        return !r.isOrthographic()
                    })), this.setupLine(i, t), i.setRenderLayer(this.mainLayer)
                }
                i.visible || this.setupLine(i, t), this.linePool[t] = i, i.updateResolution(this.cameraData.width, this.cameraData.height), i.updatePositions(e, n), i.updateBillboard({
                    rotation: this.cameraQuaternion,
                    position: this.cameraPosition,
                    projection: this.cameraProjection
                })
            }, t.prototype.setupLine = function(t, e) {
                var n = this,
                    r = this.points.groupFromPointIndex(e);
                t.children.forEach((function(t) {
                    t.userData.startIndex = e, t.userData.endIndex = e + 1, t.userData.group = r, t.layers.mask = n.mainLayer.mask
                })), t.getMesh(Ge.a.line).layers.mask = this.lineLayer.mask, this.activeLines.push(t), this.addLineToGroup(r, t), this.addLineToPoint(e, t), this.addLineToPoint(e + 1, t), t.show(), t.opacity(0)
            }, t.prototype.addLineToGroup = function(t, e) {
                this.groupToLines[t] || (this.groupToLines[t] = []), this.groupToLines[t].push(e)
            }, t.prototype.addLineToPoint = function(t, e) {
                this.pointToLines[t] || (this.pointToLines[t] = []), this.pointToLines[t].push(e)
            }, t
        }(),
        Ve = n(23),
        We = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        Xe = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        qe = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        Ye = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(qe(arguments[e]));
            return t
        },
        Ke = function() {
            function t(t) {
                this.contents = t, this.groupInfo = [], this.groupIndices = [], this.groupIndicesMap = {}
            }
            return t.prototype.startGroup = function(t) {
                var e = 0 === this.groupCount,
                    n = this.contents.length !== this.groupIndices[this.groupCount - 1];
                return (e || n) && (this.groupInfo.push(t), this.groupIndices.push(this.contents.length), this.groupIndicesMap[this.contents.length] = !0), this.groupIndices.length - 1
            }, t.prototype.reset = function() {
                var t = this;
                this.contents.atomic((function() {
                    for (var e = t.contents.length - 1; e >= 0; --e) t.removeFromIdx(e);
                    t.groupIndices = [], t.groupInfo = [], t.groupIndicesMap = {}
                }))
            }, t.prototype.isStartIndex = function(t) {
                return !!this.groupIndicesMap[t]
            }, t.prototype.groups = function() {
                var t;
                return We(this, (function(e) {
                    switch (e.label) {
                        case 0:
                            t = 0, e.label = 1;
                        case 1:
                            return t < this.groupCount ? [4, this.getGroup(t)] : [3, 4];
                        case 2:
                            e.sent(), e.label = 3;
                        case 3:
                            return ++t, [3, 1];
                        case 4:
                            return [2]
                    }
                }))
            }, t.prototype[Symbol.iterator] = function() {
                var t, e, n, r, i;
                return We(this, (function(o) {
                    switch (o.label) {
                        case 0:
                            o.trys.push([0, 5, 6, 7]), n = Xe(this.contents), r = n.next(), o.label = 1;
                        case 1:
                            return r.done ? [3, 4] : [4, r.value];
                        case 2:
                            o.sent(), o.label = 3;
                        case 3:
                            return r = n.next(), [3, 1];
                        case 4:
                            return [3, 7];
                        case 5:
                            return i = o.sent(), t = {
                                error: i
                            }, [3, 7];
                        case 6:
                            try {
                                r && !r.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                            return [7];
                        case 7:
                            return [2]
                    }
                }))
            }, t.prototype.getGroupStartIndex = function(t) {
                return this.groupIndices[t]
            }, t.prototype.getGroup = function(t) {
                var e = this.groupIndices[t],
                    n = isNaN(this.groupIndices[t + 1] - 1) ? this.contents.length - 1 : this.groupIndices[t + 1] - 1;
                return new Ze(t, this.contents, e, n, Object.assign({}, this.groupInfo[t]))
            }, Object.defineProperty(t.prototype, "groupCount", {
                get: function() {
                    return this.groupIndices.length
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "length", {
                get: function() {
                    return this.contents.length
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.get = function(t) {
                return this.contents.get(t)
            }, t.prototype.push = function(t) {
                if (0 === this.groupCount) throw Error("Grouper: Error pushing points when we have no groups!");
                return this.contents.push(t.clone()), this.contents.length
            }, t.prototype.pop = function() {
                return this.removeFromIdx(this.contents.length - 1)
            }, t.prototype.removeFromIdx = function(t) {
                if (t < this.contents.length && t >= 0 && this.contents.length >= 0) {
                    var e = this.contents.get(t);
                    return this.contents.remove(t), this.removeEmptyGroups(), e
                }
            }, t.prototype.removeEmptyGroups = function() {
                this.contents.length <= this.groupIndices[this.groupCount - 1] && this.removeGroup(this.groupCount - 1)
            }, t.prototype.groupFromPointIndex = function(t) {
                if (0 > t || t >= this.length) return -1;
                for (var e = this.groupCount - 1; t < this.groupIndices[e];) --e;
                return e
            }, t.prototype.removeGroup = function(t) {
                if (!(t > this.groupCount || t < 0)) {
                    var e = this.getGroup(t);
                    if (0 !== e.count) {
                        this.groupIndices.splice(t, 1), this.groupInfo.splice(t, 1), this.groupIndicesMap[t] = !1;
                        for (var n = t; n < this.groupCount; ++n) this.groupIndices[n] -= e.count, this.groupIndicesMap[n] = !0;
                        this.contents.splice(e.startIndex, e.count)
                    }
                }
            }, t.prototype.update = function(t, e) {
                this.contents.update(t, e.clone())
            }, t.prototype.copy = function(t) {
                var e = this;
                return this.contents.atomic((function() {
                    var n, r, i, o;
                    e.reset();
                    try {
                        for (var a = Xe(t), s = a.next(); !s.done; s = a.next()) {
                            var u = s.value;
                            e.startGroup(u.info);
                            try {
                                for (var c = Xe(u), l = c.next(); !l.done; l = c.next()) {
                                    var h = l.value;
                                    e.push(h)
                                }
                            } catch (t) {
                                i = {
                                    error: t
                                }
                            } finally {
                                try {
                                    l && !l.done && (o = c.return) && o.call(c)
                                } finally {
                                    if (i) throw i.error
                                }
                            }
                        }
                    } catch (t) {
                        n = {
                            error: t
                        }
                    } finally {
                        try {
                            s && !s.done && (r = a.return) && r.call(a)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                })), this
            }, t.prototype.toString = function() {
                return "Grouper: { groupCount: " + this.groupCount + ", length: " + this.length + ", groups: [" + Ye(this.groups()).map((function(t) {
                    return "" + t
                })) + "]}"
            }, t
        }(),
        Ze = function() {
            function t(t, e, n, r, i) {
                this.index = t, this.grouper = e, this.startIndex = n, this.endIndex = r, this.data = i
            }
            return t.prototype[Symbol.iterator] = function() {
                var t;
                return We(this, (function(e) {
                    switch (e.label) {
                        case 0:
                            t = 0, e.label = 1;
                        case 1:
                            return t < this.count ? [4, this.get(t)] : [3, 4];
                        case 2:
                            e.sent(), e.label = 3;
                        case 3:
                            return ++t, [3, 1];
                        case 4:
                            return [2]
                    }
                }))
            }, t.prototype.get = function(t) {
                if (!this.has(t)) throw RangeError("Out of range error " + t + " / " + (this.count - 1));
                return this.grouper.get(this.startIndex + t)
            }, t.prototype.has = function(t) {
                return t >= 0 && this.startIndex + t <= this.endIndex
            }, Object.defineProperty(t.prototype, "count", {
                get: function() {
                    return this.endIndex - this.startIndex + 1
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "info", {
                get: function() {
                    return this.data
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "isClosed", {
                get: function() {
                    var t = this.grouper.get(this.startIndex),
                        e = this.grouper.get(this.endIndex);
                    return this.count > 2 && t.distanceTo(e) <= pt.c
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "length", {
                get: function() {
                    for (var t = 0, e = null, n = 0; n < this.count; n++) e && (t += this.get(n).distanceTo(e)), e = this.get(n);
                    return t
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.hasLength = function() {
                var t = this.grouper.get(this.startIndex),
                    e = this.grouper.get(this.endIndex);
                return this.isClosed || t.distanceTo(e) > pt.c
            }, t.prototype.clone = function() {
                for (var e = [], n = {
                        get: function(t) {
                            return e[t]
                        },
                        contents: e
                    }, r = 0; r < this.count; r++) n.contents.push(this.get(r));
                return new t(this.index, n, 0, n.contents.length - 1, Object.assign({}, this.data))
            }, t.prototype.describe = function(t) {
                return void 0 === t && (t = this.endIndex), "GroupSegment" + this.index + "/" + this.startIndex + "/" + t + "}"
            }, t.prototype.equals = function(t) {
                if (this.count !== t.count || this.index !== t.index) return !1;
                if (Object(Ve.b)(this.info, t.info)) return !1;
                for (var e = 0; e < this.count; ++e)
                    if (!this.get(e).equals(t.get(e))) return !1;
                return !0
            }, t
        }(),
        Qe = n(263);
    n.d(e, "MeasurementModeData", (function() {
        return Ce
    })), n.d(e, "MeasuringPhase", (function() {
        return O.a
    })), n.d(e, "labelVisible", (function() {
        return O.e
    })), n.d(e, "MeasurementGroupData", (function() {
        return Ne.MeasurementGroupData
    })), n.d(e, "MeasurementLabelRenderer", (function() {
        return Be
    })), n.d(e, "MeasurementLineRenderer", (function() {
        return He
    })), n.d(e, "Grouper", (function() {
        return Ke
    })), n.d(e, "Group", (function() {
        return Ze
    })), n.d(e, "formatDistance", (function() {
        return Qe.a
    }));
    e.default = Pe
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return a
    })), n.d(e, "d", (function() {
        return s
    })), n.d(e, "a", (function() {
        return u
    })), n.d(e, "c", (function() {
        return c
    })), n.d(e, "e", (function() {
        return l
    }));
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.sid = e, r.hovering = n, r
            }
            return o(e, t), e
        }(i.a),
        s = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.sid = e, n
            }
            return o(e, t), e
        }(i.a),
        u = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.sid = e, n
            }
            return o(e, t), e
        }(i.a),
        c = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.url = e, r.embed = n, r
            }
            return o(e, t), e
        }(i.a),
        l = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.sid = e, r.view = n, r
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    })), n.d(e, "c", (function() {
        return o
    })), n.d(e, "b", (function() {
        return a
    }));
    var r = n(6),
        i = "settings/tiling/preload_quality",
        o = Object.freeze({
            overlayStyle: r.z("tileoverlay", 0),
            uploadIntervalDelay: r.z("tileupdelay", 50),
            highResUploadsPerFrame: r.z("maxnbtpf", 2),
            maxHighResUploadsPerFrame: 100,
            uploadsPerFrame: r.z("maxbtpf", 6),
            maxUploadsPerFrame: 100,
            windowHeightHighQualityThreshold: 800,
            windowHeightHighQualityThresholdOverride: r.z("threshold2k", void 0),
            concurrentDownloads: r.z("tileconc", 3),
            maxConcurrentDownloads: 12,
            navigation: {
                directionFactor: 10,
                distanceFactor: -1
            }
        }),
        a = function() {
            function t() {
                this.reset()
            }
            return t.prototype.reset = function() {
                this.downloadFullPano = !1, this.concurrentDownloads = o.concurrentDownloads, this.uploadsPerFrame = o.uploadsPerFrame, this.highResUploadsPerFrame = o.highResUploadsPerFrame
            }, t
        }()
}, function(t, e) {
    (function(e) {
        t.exports = e
    }).call(this, {})
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    })), n.d(e, "c", (function() {
        return f
    })), n.d(e, "b", (function() {
        return p
    }));
    var r, i = n(1),
        o = n(16),
        a = n(14),
        s = n(20),
        u = n(3),
        c = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        l = new u.a("snapshot-serializer");
    ! function(t) {
        t.user = "user", t.panorama = "panorama", t.unaligned = "unaligned", t.auto = "auto", t.tour = "tour"
    }(r || (r = {}));
    var h = function() {
            function t(t, e, n, i, o, a, s, u, c, l, h, f) {
                this.sid = t || "", this.metadata = e || {}, this.thumbnailUrl = n || "", this.imageUrl = i || "", this.name = o || "", this.is360 = !!a, this.category = s || r.user, this.height = u || 0, this.width = c || 0, this.modified = l || new Date, this.visionLabel = h || "", this.visionName = f || ""
            }
            return t.prototype.clone = function() {
                return (new t).copy(this)
            }, t.prototype.copy = function(t) {
                return this.sid = t.sid, this.thumbnailUrl = t.thumbnailUrl, this.imageUrl = t.imageUrl, this.name = t.name, this.is360 = t.is360, this.category = t.category, this.height = t.height, this.width = t.width, this.modified = t.modified, this.visionLabel = t.visionLabel, this.visionName = t.visionName, this.metadata = {
                    camera_mode: t.metadata.camera_mode,
                    camera_position: t.metadata.camera_position.clone(),
                    camera_quaternion: t.metadata.camera_quaternion.clone(),
                    scan_id: t.metadata.scan_id,
                    ortho_zoom: t.metadata.ortho_zoom,
                    floor: t.metadata.floor,
                    ss_zoom: t.metadata.ss_zoom,
                    floorVisibility: t.metadata.floorVisibility
                }, this
            }, t.prototype.isInsidePano = function() {
                return this.metadata.camera_mode === s.a.Panorama && "" !== this.metadata.scan_id
            }, t
        }(),
        f = function(t) {
            var e, n, r = {};
            if (!t || !t.images || t.images.length < 1) return r;
            var i = t.images,
                o = t.icon;
            try {
                for (var a = c(Object.keys(i)), s = a.next(); !s.done; s = a.next()) {
                    var u = s.value,
                        l = p(i[u]);
                    l && (l.icon = l.sid === o, r[l.sid] = l)
                }
            } catch (t) {
                e = {
                    error: t
                }
            } finally {
                try {
                    s && !s.done && (n = a.return) && n.call(a)
                } finally {
                    if (e) throw e.error
                }
            }
            return r
        },
        p = function(t) {
            var e = null;
            if (!t) return e;
            if (!t.metadata || 0 === Object.keys(t.metadata).length) return l.warn("Image has no metadata: " + t.sid), e;
            var n = t.metadata;
            if ("string" == typeof t.metadata) try {
                n = JSON.parse(t.metadata)
            } catch (e) {
                return l.warn("Image metadata parse failed: " + t.sid), null
            }
            var r, u = -1;
            if ("object" == typeof n.floor_visibility)
                for (var c = 0; c < n.floor_visibility.length; c++) !0 === n.floor_visibility[c] && (u = c);
            "number" == typeof n.highest_floor && (u = n.highest_floor);
            try {
                var f = Object(s.c)(3 === n.camera_mode ? 0 : n.camera_mode),
                    p = Object(a.j)(n.camera_position ? n.camera_position : new i.a),
                    d = Object(a.i)(n.camera_quaternion || new o.a);
                f !== s.a.Floorplan && (d = Object(a.m)(d)), r = {
                    camera_mode: f,
                    camera_position: p,
                    camera_quaternion: d,
                    scan_id: n.scan_id,
                    ortho_zoom: n.ortho_zoom,
                    floor: u,
                    ss_zoom: n.ss_zoom || 1,
                    floorVisibility: n.floorVisibility
                }
            } catch (e) {
                return l.debug("Image metadata parse failed: ", t.sid, e), null
            }
            var m = t.name && (!t.name.match(/^[0-9.]+_[0-9.]+$/) || "") && t.name || "";
            return e = new h(t.sid, r, t.thumbnail_signed_src, t.signed_src, m, "unaligned" === t.category, t.category, t.height, t.width, new Date(Date.parse(t.modified)), t.vision_generated_label, t.vision_generated_name)
        }
}, function(t, e) {
    function n(t) {
        return (n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var r;
    r = function() {
        return this
    }();
    try {
        r = r || new Function("return this")()
    } catch (t) {
        "object" === ("undefined" == typeof window ? "undefined" : n(window)) && (r = window)
    }
    t.exports = r
}, function(t, e, n) {
    var r = n(130),
        i = n(227),
        o = n(228),
        a = n(148),
        s = n(229),
        u = n(121),
        c = n(276),
        l = Object.getOwnPropertyDescriptor;
    e.f = r ? l : function(t, e) {
        if (t = a(t), e = s(e, !0), c) try {
            return l(t, e)
        } catch (t) {}
        if (u(t, e)) return o(!i.f.call(t, e), t[e])
    }
}, function(t, e, n) {
    "use strict";
    var r = {}.propertyIsEnumerable,
        i = Object.getOwnPropertyDescriptor,
        o = i && !r.call({
            1: 2
        }, 1);
    e.f = o ? function(t) {
        var e = i(this, t);
        return !!e && e.enumerable
    } : r
}, function(t, e) {
    t.exports = function(t, e) {
        return {
            enumerable: !(1 & t),
            configurable: !(2 & t),
            writable: !(4 & t),
            value: e
        }
    }
}, function(t, e, n) {
    var r = n(149);
    t.exports = function(t, e) {
        if (!r(t)) return t;
        var n, i;
        if (e && "function" == typeof(n = t.toString) && !r(i = n.call(t))) return i;
        if ("function" == typeof(n = t.valueOf) && !r(i = n.call(t))) return i;
        if (!e && "function" == typeof(n = t.toString) && !r(i = n.call(t))) return i;
        throw TypeError("Can't convert object to primitive value")
    }
}, function(t, e, n) {
    var r = n(93),
        i = n(168);
    t.exports = function(t, e) {
        try {
            i(r, t, e)
        } catch (n) {
            r[t] = e
        }
        return e
    }
}, function(t, e, n) {
    var r = n(170),
        i = n(232),
        o = r("keys");
    t.exports = function(t) {
        return o[t] || (o[t] = i(t))
    }
}, function(t, e) {
    var n = 0,
        r = Math.random();
    t.exports = function(t) {
        return "Symbol(" + String(void 0 === t ? "" : t) + ")_" + (++n + r).toString(36)
    }
}, function(t, e, n) {
    var r = n(283),
        i = n(234).concat("length", "prototype");
    e.f = Object.getOwnPropertyNames || function(t) {
        return r(t, i)
    }
}, function(t, e) {
    t.exports = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"]
}, function(t, e, n) {
    var r = n(283),
        i = n(234);
    t.exports = Object.keys || function(t) {
        return r(t, i)
    }
}, function(t, e, n) {
    "use strict";
    t.exports = n(378)() ? Object.assign : n(379)
}, function(t, e, n) {
    "use strict";
    t.exports = n(384)() ? String.prototype.contains : n(385)
}, function(t, e, n) {
    "use strict";
    var r, i = n(296),
        o = n(236),
        a = n(117),
        s = n(116),
        u = n(131),
        c = n(405),
        l = n(122),
        h = Object.defineProperty,
        f = Object.defineProperties;
    t.exports = r = function(t, e) {
        if (!(this instanceof r)) throw new TypeError("Constructor requires 'new'");
        f(this, {
            __list__: u("w", s(t)),
            __context__: u("w", e),
            __nextIndex__: u("w", 0)
        }), e && (a(e.on), e.on("_add", this._onAdd), e.on("_delete", this._onDelete), e.on("_clear", this._onClear))
    }, delete r.prototype.constructor, f(r.prototype, o({
        _next: u((function() {
            var t;
            if (this.__list__) return this.__redo__ && void 0 !== (t = this.__redo__.shift()) ? t : this.__nextIndex__ < this.__list__.length ? this.__nextIndex__++ : void this._unBind()
        })),
        next: u((function() {
            return this._createResult(this._next())
        })),
        _createResult: u((function(t) {
            return void 0 === t ? {
                done: !0,
                value: void 0
            } : {
                done: !1,
                value: this._resolve(t)
            }
        })),
        _resolve: u((function(t) {
            return this.__list__[t]
        })),
        _unBind: u((function() {
            this.__list__ = null, delete this.__redo__, this.__context__ && (this.__context__.off("_add", this._onAdd), this.__context__.off("_delete", this._onDelete), this.__context__.off("_clear", this._onClear), this.__context__ = null)
        })),
        toString: u((function() {
            return "[object " + (this[l.toStringTag] || "Object") + "]"
        }))
    }, c({
        _onAdd: u((function(t) {
            t >= this.__nextIndex__ || (++this.__nextIndex__, this.__redo__ ? (this.__redo__.forEach((function(e, n) {
                e >= t && (this.__redo__[n] = ++e)
            }), this), this.__redo__.push(t)) : h(this, "__redo__", u("c", [t])))
        })),
        _onDelete: u((function(t) {
            var e;
            t >= this.__nextIndex__ || (--this.__nextIndex__, this.__redo__ && (-1 !== (e = this.__redo__.indexOf(t)) && this.__redo__.splice(e, 1), this.__redo__.forEach((function(e, n) {
                e > t && (this.__redo__[n] = --e)
            }), this)))
        })),
        _onClear: u((function() {
            this.__redo__ && i.call(this.__redo__), this.__nextIndex__ = 0
        }))
    }))), h(r.prototype, l.iterator, u((function() {
        return this
    })))
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return o
    })), n.d(e, "a", (function() {
        return r
    }));
    var r, i = {
            bgPrimary: "#0F1011",
            bgSecondary: "#1e2023",
            gridPrimary: "#2d3035",
            gridSecondary: "#171a1c"
        },
        o = {
            black: i,
            grey: {
                bgPrimary: "#c9cbcc",
                bgSecondary: "#9d9d9e",
                gridPrimary: "#c9cbcc",
                gridSecondary: "#b0b1b1"
            },
            white: {
                bgPrimary: "#fcfdff",
                bgSecondary: "#ced0d3",
                gridPrimary: "#fcfdff",
                gridSecondary: "#e2e3e5"
            },
            default: i
        };
    ! function(t) {
        t.black = "black", t.grey = "grey", t.white = "white", t.default = "black"
    }(r || (r = {}))
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i = Function.prototype.toString,
        o = /^\s*class /,
        a = function(t) {
            try {
                var e = i.call(t).replace(/\/\/.*\n/g, "").replace(/\/\*[.\s\S]*\*\//g, "").replace(/\n/gm, " ").replace(/ {2}/g, " ");
                return o.test(e)
            } catch (t) {
                return !1
            }
        },
        s = Object.prototype.toString,
        u = "function" == typeof Symbol && "symbol" === r(Symbol.toStringTag);
    t.exports = function(t) {
        if (!t) return !1;
        if ("function" != typeof t && "object" !== r(t)) return !1;
        if (u) return function(t) {
            try {
                return !a(t) && (i.call(t), !0)
            } catch (t) {
                return !1
            }
        }(t);
        if (a(t)) return !1;
        var e = s.call(t);
        return "[object Function]" === e || "[object GeneratorFunction]" === e
    }
}, function(t, e, n) {
    "use strict";
    var r = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        i = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        o = function(t) {
            return "" + t
        },
        a = function() {
            function t(t) {
                void 0 === t && (t = o), this.mappingFunction = t, this.list = [], this.map = {}
            }
            return t.prototype.add = function(t) {
                var e = this.mappingFunction(t);
                return !this.map[e] && (this.list.push(t), this.map[e] = t, !0)
            }, t.prototype.set = function(t) {
                var e = this.mappingFunction(t);
                return this.map[e] ? (this.map[e] = t, !0) : (this.add(t), !0)
            }, t.prototype.count = function() {
                return this.list.length
            }, t.prototype[Symbol.iterator] = function() {
                var t, e, n, o, a;
                return r(this, (function(r) {
                    switch (r.label) {
                        case 0:
                            r.trys.push([0, 5, 6, 7]), n = i(this.list), o = n.next(), r.label = 1;
                        case 1:
                            return o.done ? [3, 4] : [4, o.value];
                        case 2:
                            r.sent(), r.label = 3;
                        case 3:
                            return o = n.next(), [3, 1];
                        case 4:
                            return [3, 7];
                        case 5:
                            return a = r.sent(), t = {
                                error: a
                            }, [3, 7];
                        case 6:
                            try {
                                o && !o.done && (e = n.return) && e.call(n)
                            } finally {
                                if (t) throw t.error
                            }
                            return [7];
                        case 7:
                            return [2]
                    }
                }))
            }, t.prototype.getByIndex = function(t) {
                return this.list[t]
            }, t.prototype.get = function(t) {
                return this.map[t]
            }, t.prototype.copyToList = function(t) {
                t.push.apply(t, this.list)
            }, t.prototype.clear = function() {
                this.list = [], this.map = {}
            }, t.prototype.mapElements = function(t) {
                return this.list.map(t)
            }, t
        }();
    e.a = a
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return r
    })), n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(38),
        o = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        };
    ! function(t) {
        t[t.PERMANENT = 0] = "PERMANENT", t[t.ONCE = 1] = "ONCE"
    }(r || (r = {}));
    var a = function() {
        function t() {
            this.typeLookup = new i.a, this.callbacks = [], this.messageQueue = [], this.messageCount = 0
        }
        return t.prototype.subscribe = function(t, e, n) {
            var i = this;
            void 0 === n && (n = r.PERMANENT);
            var o = this.typeLookup.getIndexByType(t, !0);
            return this.callbacks[o] || (this.callbacks[o] = []), this.callbacks[o].push({
                type: n,
                callback: e
            }), {
                renew: function() {
                    return null
                },
                cancel: function() {
                    return i.unsubscribe(t, e)
                },
                active: !0
            }
        }, t.prototype.unsubscribe = function(t, e) {
            var n = this.typeLookup.getIndexByType(t);
            if (-1 === n) throw Error("Message callback not bound for Type: " + t.name);
            this.unsubscribeByIndex(n, e)
        }, t.prototype.unsubscribeByIndex = function(t, e) {
            var n = this.callbacks[t].findIndex((function(t) {
                return t.callback === e
            }));
            if (-1 === n) throw Error("Message callback not bound for TypeIndex: " + t);
            this.callbacks[t].splice(n, 1)
        }, t.prototype.broadcast = function(t) {
            var e, n, i, a;
            if (t.setID(this.messageCount++), this.messageQueue.push(t), 1 === this.messageQueue.length) {
                try {
                    for (var s = o(this.messageQueue), u = s.next(); !u.done; u = s.next()) {
                        var c = u.value,
                            l = this.typeLookup.getIndexByInstance(c);
                        if (-1 !== l) {
                            var h = this.callbacks[l].slice();
                            try {
                                for (var f = o(h), p = f.next(); !p.done; p = f.next()) {
                                    var d = p.value;
                                    d.callback(c), d.type === r.ONCE && this.unsubscribeByIndex(l, d.callback)
                                }
                            } catch (t) {
                                i = {
                                    error: t
                                }
                            } finally {
                                try {
                                    p && !p.done && (a = f.return) && a.call(f)
                                } finally {
                                    if (i) throw i.error
                                }
                            }
                        }
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        u && !u.done && (n = s.return) && n.call(s)
                    } finally {
                        if (e) throw e.error
                    }
                }
                this.messageQueue = []
            }
        }, t
    }()
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return o
    })), n.d(e, "b", (function() {
        return a
    })), n.d(e, "c", (function() {
        return s
    }));
    var r = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        i = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        o = [],
        a = function() {
            return null
        },
        s = function(t) {
            return r(void 0, void 0, void 0, (function() {
                return i(this, (function(t) {
                    return [2, Promise.resolve()]
                }))
            }))
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return a
    })), n.d(e, "a", (function() {
        return s
    }));
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.modelMesh = e, n
            }
            return o(e, t), e
        }(i.a),
        s = (function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            o(e, t)
        }(function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.hitPoint = e, n
            }
            return o(e, t), e
        }(i.a)), function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.loaded = e, r.total = n, r
            }
            return o(e, t), e
        }(i.a))
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(21),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.id = "PLAY_APPLICATION", e
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.is360 = e, n
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return o
    }));
    var r = n(126),
        i = n(17);

    function o(t, e, n, i, o, a) {
        r.a.call(this), this.type = "OrthographicCamera", this.zoom = 1, this.view = null, this.left = void 0 !== t ? t : -1, this.right = void 0 !== e ? e : 1, this.top = void 0 !== n ? n : 1, this.bottom = void 0 !== i ? i : -1, this.near = void 0 !== o ? o : .1, this.far = void 0 !== a ? a : 2e3, this.updateProjectionMatrix()
    }
    o.prototype = Object.assign(Object.create(r.a.prototype), {
        constructor: o,
        isOrthographicCamera: !0,
        copy: function(t, e) {
            return r.a.prototype.copy.call(this, t, e), this.left = t.left, this.right = t.right, this.top = t.top, this.bottom = t.bottom, this.near = t.near, this.far = t.far, this.zoom = t.zoom, this.view = null === t.view ? null : Object.assign({}, t.view), this
        },
        setViewOffset: function(t, e, n, r, i, o) {
            null === this.view && (this.view = {
                enabled: !0,
                fullWidth: 1,
                fullHeight: 1,
                offsetX: 0,
                offsetY: 0,
                width: 1,
                height: 1
            }), this.view.enabled = !0, this.view.fullWidth = t, this.view.fullHeight = e, this.view.offsetX = n, this.view.offsetY = r, this.view.width = i, this.view.height = o, this.updateProjectionMatrix()
        },
        clearViewOffset: function() {
            null !== this.view && (this.view.enabled = !1), this.updateProjectionMatrix()
        },
        updateProjectionMatrix: function() {
            var t = (this.right - this.left) / (2 * this.zoom),
                e = (this.top - this.bottom) / (2 * this.zoom),
                n = (this.right + this.left) / 2,
                r = (this.top + this.bottom) / 2,
                i = n - t,
                o = n + t,
                a = r + e,
                s = r - e;
            if (null !== this.view && this.view.enabled) {
                var u = this.zoom / (this.view.width / this.view.fullWidth),
                    c = this.zoom / (this.view.height / this.view.fullHeight),
                    l = (this.right - this.left) / this.view.width,
                    h = (this.top - this.bottom) / this.view.height;
                o = (i += l * (this.view.offsetX / u)) + l * (this.view.width / u), s = (a -= h * (this.view.offsetY / c)) - h * (this.view.height / c)
            }
            this.projectionMatrix.makeOrthographic(i, o, a, s, this.near, this.far), this.projectionMatrixInverse.getInverse(this.projectionMatrix)
        },
        toJSON: function(t) {
            var e = i.a.prototype.toJSON.call(this, t);
            return e.object.zoom = this.zoom, e.object.left = this.left, e.object.right = this.right, e.object.top = this.top, e.object.bottom = this.bottom, e.object.near = this.near, e.object.far = this.far, null !== this.view && (e.object.view = Object.assign({}, this.view)), e
        }
    })
}, function(t, e, n) {
    (function(n) {
        function r(t) {
            return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            } : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            })(t)
        }
        var i;
        e = t.exports = Y, i = "object" === (void 0 === n ? "undefined" : r(n)) && n.env && n.env.NODE_DEBUG && /\bsemver\b/i.test(n.env.NODE_DEBUG) ? function() {
            var t = Array.prototype.slice.call(arguments, 0);
            t.unshift("SEMVER"), console.log.apply(console, t)
        } : function() {}, e.SEMVER_SPEC_VERSION = "2.0.0";
        var o = Number.MAX_SAFE_INTEGER || 9007199254740991,
            a = e.re = [],
            s = e.src = [],
            u = 0,
            c = u++;
        s[c] = "0|[1-9]\\d*";
        var l = u++;
        s[l] = "[0-9]+";
        var h = u++;
        s[h] = "\\d*[a-zA-Z-][a-zA-Z0-9-]*";
        var f = u++;
        s[f] = "(" + s[c] + ")\\.(" + s[c] + ")\\.(" + s[c] + ")";
        var p = u++;
        s[p] = "(" + s[l] + ")\\.(" + s[l] + ")\\.(" + s[l] + ")";
        var d = u++;
        s[d] = "(?:" + s[c] + "|" + s[h] + ")";
        var m = u++;
        s[m] = "(?:" + s[l] + "|" + s[h] + ")";
        var v = u++;
        s[v] = "(?:-(" + s[d] + "(?:\\." + s[d] + ")*))";
        var y = u++;
        s[y] = "(?:-?(" + s[m] + "(?:\\." + s[m] + ")*))";
        var g = u++;
        s[g] = "[0-9A-Za-z-]+";
        var b = u++;
        s[b] = "(?:\\+(" + s[g] + "(?:\\." + s[g] + ")*))";
        var _ = u++,
            w = "v?" + s[f] + s[v] + "?" + s[b] + "?";
        s[_] = "^" + w + "$";
        var x = "[v=\\s]*" + s[p] + s[y] + "?" + s[b] + "?",
            E = u++;
        s[E] = "^" + x + "$";
        var S = u++;
        s[S] = "((?:<|>)?=?)";
        var T = u++;
        s[T] = s[l] + "|x|X|\\*";
        var M = u++;
        s[M] = s[c] + "|x|X|\\*";
        var O = u++;
        s[O] = "[v=\\s]*(" + s[M] + ")(?:\\.(" + s[M] + ")(?:\\.(" + s[M] + ")(?:" + s[v] + ")?" + s[b] + "?)?)?";
        var P = u++;
        s[P] = "[v=\\s]*(" + s[T] + ")(?:\\.(" + s[T] + ")(?:\\.(" + s[T] + ")(?:" + s[y] + ")?" + s[b] + "?)?)?";
        var A = u++;
        s[A] = "^" + s[S] + "\\s*" + s[O] + "$";
        var L = u++;
        s[L] = "^" + s[S] + "\\s*" + s[P] + "$";
        var R = u++;
        s[R] = "(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";
        var D = u++;
        s[D] = "(?:~>?)";
        var I = u++;
        s[I] = "(\\s*)" + s[D] + "\\s+", a[I] = new RegExp(s[I], "g");
        var C = u++;
        s[C] = "^" + s[D] + s[O] + "$";
        var N = u++;
        s[N] = "^" + s[D] + s[P] + "$";
        var U = u++;
        s[U] = "(?:\\^)";
        var j = u++;
        s[j] = "(\\s*)" + s[U] + "\\s+", a[j] = new RegExp(s[j], "g");
        var k = u++;
        s[k] = "^" + s[U] + s[O] + "$";
        var F = u++;
        s[F] = "^" + s[U] + s[P] + "$";
        var B = u++;
        s[B] = "^" + s[S] + "\\s*(" + x + ")$|^$";
        var G = u++;
        s[G] = "^" + s[S] + "\\s*(" + w + ")$|^$";
        var z = u++;
        s[z] = "(\\s*)" + s[S] + "\\s*(" + x + "|" + s[O] + ")", a[z] = new RegExp(s[z], "g");
        var H = u++;
        s[H] = "^\\s*(" + s[O] + ")\\s+-\\s+(" + s[O] + ")\\s*$";
        var V = u++;
        s[V] = "^\\s*(" + s[P] + ")\\s+-\\s+(" + s[P] + ")\\s*$";
        var W = u++;
        s[W] = "(<|>)?=?\\s*\\*";
        for (var X = 0; X < 35; X++) i(X, s[X]), a[X] || (a[X] = new RegExp(s[X]));

        function q(t, e) {
            if (t instanceof Y) return t;
            if ("string" != typeof t) return null;
            if (t.length > 256) return null;
            if (!(e ? a[E] : a[_]).test(t)) return null;
            try {
                return new Y(t, e)
            } catch (t) {
                return null
            }
        }

        function Y(t, e) {
            if (t instanceof Y) {
                if (t.loose === e) return t;
                t = t.version
            } else if ("string" != typeof t) throw new TypeError("Invalid Version: " + t);
            if (t.length > 256) throw new TypeError("version is longer than 256 characters");
            if (!(this instanceof Y)) return new Y(t, e);
            i("SemVer", t, e), this.loose = e;
            var n = t.trim().match(e ? a[E] : a[_]);
            if (!n) throw new TypeError("Invalid Version: " + t);
            if (this.raw = t, this.major = +n[1], this.minor = +n[2], this.patch = +n[3], this.major > o || this.major < 0) throw new TypeError("Invalid major version");
            if (this.minor > o || this.minor < 0) throw new TypeError("Invalid minor version");
            if (this.patch > o || this.patch < 0) throw new TypeError("Invalid patch version");
            n[4] ? this.prerelease = n[4].split(".").map((function(t) {
                if (/^[0-9]+$/.test(t)) {
                    var e = +t;
                    if (e >= 0 && e < o) return e
                }
                return t
            })) : this.prerelease = [], this.build = n[5] ? n[5].split(".") : [], this.format()
        }
        e.parse = q, e.valid = function(t, e) {
            var n = q(t, e);
            return n ? n.version : null
        }, e.clean = function(t, e) {
            var n = q(t.trim().replace(/^[=v]+/, ""), e);
            return n ? n.version : null
        }, e.SemVer = Y, Y.prototype.format = function() {
            return this.version = this.major + "." + this.minor + "." + this.patch, this.prerelease.length && (this.version += "-" + this.prerelease.join(".")), this.version
        }, Y.prototype.toString = function() {
            return this.version
        }, Y.prototype.compare = function(t) {
            return i("SemVer.compare", this.version, this.loose, t), t instanceof Y || (t = new Y(t, this.loose)), this.compareMain(t) || this.comparePre(t)
        }, Y.prototype.compareMain = function(t) {
            return t instanceof Y || (t = new Y(t, this.loose)), Z(this.major, t.major) || Z(this.minor, t.minor) || Z(this.patch, t.patch)
        }, Y.prototype.comparePre = function(t) {
            if (t instanceof Y || (t = new Y(t, this.loose)), this.prerelease.length && !t.prerelease.length) return -1;
            if (!this.prerelease.length && t.prerelease.length) return 1;
            if (!this.prerelease.length && !t.prerelease.length) return 0;
            var e = 0;
            do {
                var n = this.prerelease[e],
                    r = t.prerelease[e];
                if (i("prerelease compare", e, n, r), void 0 === n && void 0 === r) return 0;
                if (void 0 === r) return 1;
                if (void 0 === n) return -1;
                if (n !== r) return Z(n, r)
            } while (++e)
        }, Y.prototype.inc = function(t, e) {
            switch (t) {
                case "premajor":
                    this.prerelease.length = 0, this.patch = 0, this.minor = 0, this.major++, this.inc("pre", e);
                    break;
                case "preminor":
                    this.prerelease.length = 0, this.patch = 0, this.minor++, this.inc("pre", e);
                    break;
                case "prepatch":
                    this.prerelease.length = 0, this.inc("patch", e), this.inc("pre", e);
                    break;
                case "prerelease":
                    0 === this.prerelease.length && this.inc("patch", e), this.inc("pre", e);
                    break;
                case "major":
                    0 === this.minor && 0 === this.patch && 0 !== this.prerelease.length || this.major++, this.minor = 0, this.patch = 0, this.prerelease = [];
                    break;
                case "minor":
                    0 === this.patch && 0 !== this.prerelease.length || this.minor++, this.patch = 0, this.prerelease = [];
                    break;
                case "patch":
                    0 === this.prerelease.length && this.patch++, this.prerelease = [];
                    break;
                case "pre":
                    if (0 === this.prerelease.length) this.prerelease = [0];
                    else {
                        for (var n = this.prerelease.length; --n >= 0;) "number" == typeof this.prerelease[n] && (this.prerelease[n]++, n = -2); - 1 === n && this.prerelease.push(0)
                    }
                    e && (this.prerelease[0] === e ? isNaN(this.prerelease[1]) && (this.prerelease = [e, 0]) : this.prerelease = [e, 0]);
                    break;
                default:
                    throw new Error("invalid increment argument: " + t)
            }
            return this.format(), this.raw = this.version, this
        }, e.inc = function(t, e, n, r) {
            "string" == typeof n && (r = n, n = void 0);
            try {
                return new Y(t, n).inc(e, r).version
            } catch (t) {
                return null
            }
        }, e.diff = function(t, e) {
            if (tt(t, e)) return null;
            var n = q(t),
                r = q(e);
            if (n.prerelease.length || r.prerelease.length) {
                for (var i in n)
                    if (("major" === i || "minor" === i || "patch" === i) && n[i] !== r[i]) return "pre" + i;
                return "prerelease"
            }
            for (var i in n)
                if (("major" === i || "minor" === i || "patch" === i) && n[i] !== r[i]) return i
        }, e.compareIdentifiers = Z;
        var K = /^[0-9]+$/;

        function Z(t, e) {
            var n = K.test(t),
                r = K.test(e);
            return n && r && (t = +t, e = +e), n && !r ? -1 : r && !n ? 1 : t < e ? -1 : t > e ? 1 : 0
        }

        function Q(t, e, n) {
            return new Y(t, n).compare(new Y(e, n))
        }

        function J(t, e, n) {
            return Q(t, e, n) > 0
        }

        function $(t, e, n) {
            return Q(t, e, n) < 0
        }

        function tt(t, e, n) {
            return 0 === Q(t, e, n)
        }

        function et(t, e, n) {
            return 0 !== Q(t, e, n)
        }

        function nt(t, e, n) {
            return Q(t, e, n) >= 0
        }

        function rt(t, e, n) {
            return Q(t, e, n) <= 0
        }

        function it(t, e, n, i) {
            var o;
            switch (e) {
                case "===":
                    "object" === r(t) && (t = t.version), "object" === r(n) && (n = n.version), o = t === n;
                    break;
                case "!==":
                    "object" === r(t) && (t = t.version), "object" === r(n) && (n = n.version), o = t !== n;
                    break;
                case "":
                case "=":
                case "==":
                    o = tt(t, n, i);
                    break;
                case "!=":
                    o = et(t, n, i);
                    break;
                case ">":
                    o = J(t, n, i);
                    break;
                case ">=":
                    o = nt(t, n, i);
                    break;
                case "<":
                    o = $(t, n, i);
                    break;
                case "<=":
                    o = rt(t, n, i);
                    break;
                default:
                    throw new TypeError("Invalid operator: " + e)
            }
            return o
        }

        function ot(t, e) {
            if (t instanceof ot) {
                if (t.loose === e) return t;
                t = t.value
            }
            if (!(this instanceof ot)) return new ot(t, e);
            i("comparator", t, e), this.loose = e, this.parse(t), this.semver === at ? this.value = "" : this.value = this.operator + this.semver.version, i("comp", this)
        }
        e.rcompareIdentifiers = function(t, e) {
            return Z(e, t)
        }, e.major = function(t, e) {
            return new Y(t, e).major
        }, e.minor = function(t, e) {
            return new Y(t, e).minor
        }, e.patch = function(t, e) {
            return new Y(t, e).patch
        }, e.compare = Q, e.compareLoose = function(t, e) {
            return Q(t, e, !0)
        }, e.rcompare = function(t, e, n) {
            return Q(e, t, n)
        }, e.sort = function(t, n) {
            return t.sort((function(t, r) {
                return e.compare(t, r, n)
            }))
        }, e.rsort = function(t, n) {
            return t.sort((function(t, r) {
                return e.rcompare(t, r, n)
            }))
        }, e.gt = J, e.lt = $, e.eq = tt, e.neq = et, e.gte = nt, e.lte = rt, e.cmp = it, e.Comparator = ot;
        var at = {};

        function st(t, e) {
            if (t instanceof st) return t.loose === e ? t : new st(t.raw, e);
            if (t instanceof ot) return new st(t.value, e);
            if (!(this instanceof st)) return new st(t, e);
            if (this.loose = e, this.raw = t, this.set = t.split(/\s*\|\|\s*/).map((function(t) {
                    return this.parseRange(t.trim())
                }), this).filter((function(t) {
                    return t.length
                })), !this.set.length) throw new TypeError("Invalid SemVer Range: " + t);
            this.format()
        }

        function ut(t) {
            return !t || "x" === t.toLowerCase() || "*" === t
        }

        function ct(t, e, n, r, i, o, a, s, u, c, l, h, f) {
            return ((e = ut(n) ? "" : ut(r) ? ">=" + n + ".0.0" : ut(i) ? ">=" + n + "." + r + ".0" : ">=" + e) + " " + (s = ut(u) ? "" : ut(c) ? "<" + (+u + 1) + ".0.0" : ut(l) ? "<" + u + "." + (+c + 1) + ".0" : h ? "<=" + u + "." + c + "." + l + "-" + h : "<=" + s)).trim()
        }

        function lt(t, e) {
            for (var n = 0; n < t.length; n++)
                if (!t[n].test(e)) return !1;
            if (e.prerelease.length) {
                for (n = 0; n < t.length; n++)
                    if (i(t[n].semver), t[n].semver !== at && t[n].semver.prerelease.length > 0) {
                        var r = t[n].semver;
                        if (r.major === e.major && r.minor === e.minor && r.patch === e.patch) return !0
                    }
                return !1
            }
            return !0
        }

        function ht(t, e, n) {
            try {
                e = new st(e, n)
            } catch (t) {
                return !1
            }
            return e.test(t)
        }

        function ft(t, e, n, r) {
            var i, o, a, s, u;
            switch (t = new Y(t, r), e = new st(e, r), n) {
                case ">":
                    i = J, o = rt, a = $, s = ">", u = ">=";
                    break;
                case "<":
                    i = $, o = nt, a = J, s = "<", u = "<=";
                    break;
                default:
                    throw new TypeError('Must provide a hilo val of "<" or ">"')
            }
            if (ht(t, e, r)) return !1;
            for (var c = 0; c < e.set.length; ++c) {
                var l = e.set[c],
                    h = null,
                    f = null;
                if (l.forEach((function(t) {
                        t.semver === at && (t = new ot(">=0.0.0")), h = h || t, f = f || t, i(t.semver, h.semver, r) ? h = t : a(t.semver, f.semver, r) && (f = t)
                    })), h.operator === s || h.operator === u) return !1;
                if ((!f.operator || f.operator === s) && o(t, f.semver)) return !1;
                if (f.operator === u && a(t, f.semver)) return !1
            }
            return !0
        }
        ot.prototype.parse = function(t) {
            var e = this.loose ? a[B] : a[G],
                n = t.match(e);
            if (!n) throw new TypeError("Invalid comparator: " + t);
            this.operator = n[1], "=" === this.operator && (this.operator = ""), n[2] ? this.semver = new Y(n[2], this.loose) : this.semver = at
        }, ot.prototype.toString = function() {
            return this.value
        }, ot.prototype.test = function(t) {
            return i("Comparator.test", t, this.loose), this.semver === at || ("string" == typeof t && (t = new Y(t, this.loose)), it(t, this.operator, this.semver, this.loose))
        }, ot.prototype.intersects = function(t, e) {
            if (!(t instanceof ot)) throw new TypeError("a Comparator is required");
            var n;
            if ("" === this.operator) return n = new st(t.value, e), ht(this.value, n, e);
            if ("" === t.operator) return n = new st(this.value, e), ht(t.semver, n, e);
            var r = !(">=" !== this.operator && ">" !== this.operator || ">=" !== t.operator && ">" !== t.operator),
                i = !("<=" !== this.operator && "<" !== this.operator || "<=" !== t.operator && "<" !== t.operator),
                o = this.semver.version === t.semver.version,
                a = !(">=" !== this.operator && "<=" !== this.operator || ">=" !== t.operator && "<=" !== t.operator),
                s = it(this.semver, "<", t.semver, e) && (">=" === this.operator || ">" === this.operator) && ("<=" === t.operator || "<" === t.operator),
                u = it(this.semver, ">", t.semver, e) && ("<=" === this.operator || "<" === this.operator) && (">=" === t.operator || ">" === t.operator);
            return r || i || o && a || s || u
        }, e.Range = st, st.prototype.format = function() {
            return this.range = this.set.map((function(t) {
                return t.join(" ").trim()
            })).join("||").trim(), this.range
        }, st.prototype.toString = function() {
            return this.range
        }, st.prototype.parseRange = function(t) {
            var e = this.loose;
            t = t.trim(), i("range", t, e);
            var n = e ? a[V] : a[H];
            t = t.replace(n, ct), i("hyphen replace", t), t = t.replace(a[z], "$1$2$3"), i("comparator trim", t, a[z]), t = (t = (t = t.replace(a[I], "$1~")).replace(a[j], "$1^")).split(/\s+/).join(" ");
            var r = e ? a[B] : a[G],
                o = t.split(" ").map((function(t) {
                    return function(t, e) {
                        return i("comp", t), t = function(t, e) {
                            return t.trim().split(/\s+/).map((function(t) {
                                return function(t, e) {
                                    i("caret", t, e);
                                    var n = e ? a[F] : a[k];
                                    return t.replace(n, (function(e, n, r, o, a) {
                                        var s;
                                        return i("caret", t, e, n, r, o, a), ut(n) ? s = "" : ut(r) ? s = ">=" + n + ".0.0 <" + (+n + 1) + ".0.0" : ut(o) ? s = "0" === n ? ">=" + n + "." + r + ".0 <" + n + "." + (+r + 1) + ".0" : ">=" + n + "." + r + ".0 <" + (+n + 1) + ".0.0" : a ? (i("replaceCaret pr", a), "-" !== a.charAt(0) && (a = "-" + a), s = "0" === n ? "0" === r ? ">=" + n + "." + r + "." + o + a + " <" + n + "." + r + "." + (+o + 1) : ">=" + n + "." + r + "." + o + a + " <" + n + "." + (+r + 1) + ".0" : ">=" + n + "." + r + "." + o + a + " <" + (+n + 1) + ".0.0") : (i("no pr"), s = "0" === n ? "0" === r ? ">=" + n + "." + r + "." + o + " <" + n + "." + r + "." + (+o + 1) : ">=" + n + "." + r + "." + o + " <" + n + "." + (+r + 1) + ".0" : ">=" + n + "." + r + "." + o + " <" + (+n + 1) + ".0.0"), i("caret return", s), s
                                    }))
                                }(t, e)
                            })).join(" ")
                        }(t, e), i("caret", t), t = function(t, e) {
                            return t.trim().split(/\s+/).map((function(t) {
                                return function(t, e) {
                                    var n = e ? a[N] : a[C];
                                    return t.replace(n, (function(e, n, r, o, a) {
                                        var s;
                                        return i("tilde", t, e, n, r, o, a), ut(n) ? s = "" : ut(r) ? s = ">=" + n + ".0.0 <" + (+n + 1) + ".0.0" : ut(o) ? s = ">=" + n + "." + r + ".0 <" + n + "." + (+r + 1) + ".0" : a ? (i("replaceTilde pr", a), "-" !== a.charAt(0) && (a = "-" + a), s = ">=" + n + "." + r + "." + o + a + " <" + n + "." + (+r + 1) + ".0") : s = ">=" + n + "." + r + "." + o + " <" + n + "." + (+r + 1) + ".0", i("tilde return", s), s
                                    }))
                                }(t, e)
                            })).join(" ")
                        }(t, e), i("tildes", t), t = function(t, e) {
                            return i("replaceXRanges", t, e), t.split(/\s+/).map((function(t) {
                                return function(t, e) {
                                    t = t.trim();
                                    var n = e ? a[L] : a[A];
                                    return t.replace(n, (function(e, n, r, o, a, s) {
                                        i("xRange", t, e, n, r, o, a, s);
                                        var u = ut(r),
                                            c = u || ut(o),
                                            l = c || ut(a);
                                        return "=" === n && l && (n = ""), u ? e = ">" === n || "<" === n ? "<0.0.0" : "*" : n && l ? (c && (o = 0), l && (a = 0), ">" === n ? (n = ">=", c ? (r = +r + 1, o = 0, a = 0) : l && (o = +o + 1, a = 0)) : "<=" === n && (n = "<", c ? r = +r + 1 : o = +o + 1), e = n + r + "." + o + "." + a) : c ? e = ">=" + r + ".0.0 <" + (+r + 1) + ".0.0" : l && (e = ">=" + r + "." + o + ".0 <" + r + "." + (+o + 1) + ".0"), i("xRange return", e), e
                                    }))
                                }(t, e)
                            })).join(" ")
                        }(t, e), i("xrange", t), t = function(t, e) {
                            return i("replaceStars", t, e), t.trim().replace(a[W], "")
                        }(t, e), i("stars", t), t
                    }(t, e)
                })).join(" ").split(/\s+/);
            return this.loose && (o = o.filter((function(t) {
                return !!t.match(r)
            }))), o = o.map((function(t) {
                return new ot(t, e)
            }))
        }, st.prototype.intersects = function(t, e) {
            if (!(t instanceof st)) throw new TypeError("a Range is required");
            return this.set.some((function(n) {
                return n.every((function(n) {
                    return t.set.some((function(t) {
                        return t.every((function(t) {
                            return n.intersects(t, e)
                        }))
                    }))
                }))
            }))
        }, e.toComparators = function(t, e) {
            return new st(t, e).set.map((function(t) {
                return t.map((function(t) {
                    return t.value
                })).join(" ").trim().split(" ")
            }))
        }, st.prototype.test = function(t) {
            if (!t) return !1;
            "string" == typeof t && (t = new Y(t, this.loose));
            for (var e = 0; e < this.set.length; e++)
                if (lt(this.set[e], t)) return !0;
            return !1
        }, e.satisfies = ht, e.maxSatisfying = function(t, e, n) {
            var r = null,
                i = null;
            try {
                var o = new st(e, n)
            } catch (t) {
                return null
            }
            return t.forEach((function(t) {
                o.test(t) && (r && -1 !== i.compare(t) || (i = new Y(r = t, n)))
            })), r
        }, e.minSatisfying = function(t, e, n) {
            var r = null,
                i = null;
            try {
                var o = new st(e, n)
            } catch (t) {
                return null
            }
            return t.forEach((function(t) {
                o.test(t) && (r && 1 !== i.compare(t) || (i = new Y(r = t, n)))
            })), r
        }, e.validRange = function(t, e) {
            try {
                return new st(t, e).range || "*"
            } catch (t) {
                return null
            }
        }, e.ltr = function(t, e, n) {
            return ft(t, e, "<", n)
        }, e.gtr = function(t, e, n) {
            return ft(t, e, ">", n)
        }, e.outside = ft, e.prerelease = function(t, e) {
            var n = q(t, e);
            return n && n.prerelease.length ? n.prerelease : null
        }, e.intersects = function(t, e, n) {
            return t = new st(t, n), e = new st(e, n), t.intersects(e)
        }, e.coerce = function(t) {
            if (t instanceof Y) return t;
            if ("string" != typeof t) return null;
            var e = t.match(a[R]);
            return null == e ? null : q((e[1] || "0") + "." + (e[2] || "0") + "." + (e[3] || "0"))
        }
    }).call(this, n(271))
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i = n(418),
        o = n(419);

    function a() {
        this.protocol = null, this.slashes = null, this.auth = null, this.host = null, this.port = null, this.hostname = null, this.hash = null, this.search = null, this.query = null, this.pathname = null, this.path = null, this.href = null
    }
    e.parse = _, e.resolve = function(t, e) {
        return _(t, !1, !0).resolve(e)
    }, e.resolveObject = function(t, e) {
        return t ? _(t, !1, !0).resolveObject(e) : e
    }, e.format = function(t) {
        o.isString(t) && (t = _(t));
        return t instanceof a ? t.format() : a.prototype.format.call(t)
    }, e.Url = a;
    var s = /^([a-z0-9.+-]+:)/i,
        u = /:[0-9]*$/,
        c = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,
        l = ["{", "}", "|", "\\", "^", "`"].concat(["<", ">", '"', "`", " ", "\r", "\n", "\t"]),
        h = ["'"].concat(l),
        f = ["%", "/", "?", ";", "#"].concat(h),
        p = ["/", "?", "#"],
        d = /^[+a-z0-9A-Z_-]{0,63}$/,
        m = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
        v = {
            javascript: !0,
            "javascript:": !0
        },
        y = {
            javascript: !0,
            "javascript:": !0
        },
        g = {
            http: !0,
            https: !0,
            ftp: !0,
            gopher: !0,
            file: !0,
            "http:": !0,
            "https:": !0,
            "ftp:": !0,
            "gopher:": !0,
            "file:": !0
        },
        b = n(420);

    function _(t, e, n) {
        if (t && o.isObject(t) && t instanceof a) return t;
        var r = new a;
        return r.parse(t, e, n), r
    }
    a.prototype.parse = function(t, e, n) {
        if (!o.isString(t)) throw new TypeError("Parameter 'url' must be a string, not " + r(t));
        var a = t.indexOf("?"),
            u = -1 !== a && a < t.indexOf("#") ? "?" : "#",
            l = t.split(u);
        l[0] = l[0].replace(/\\/g, "/");
        var _ = t = l.join(u);
        if (_ = _.trim(), !n && 1 === t.split("#").length) {
            var w = c.exec(_);
            if (w) return this.path = _, this.href = _, this.pathname = w[1], w[2] ? (this.search = w[2], this.query = e ? b.parse(this.search.substr(1)) : this.search.substr(1)) : e && (this.search = "", this.query = {}), this
        }
        var x = s.exec(_);
        if (x) {
            var E = (x = x[0]).toLowerCase();
            this.protocol = E, _ = _.substr(x.length)
        }
        if (n || x || _.match(/^\/\/[^@\/]+@[^@\/]+/)) {
            var S = "//" === _.substr(0, 2);
            !S || x && y[x] || (_ = _.substr(2), this.slashes = !0)
        }
        if (!y[x] && (S || x && !g[x])) {
            for (var T, M, O = -1, P = 0; P < p.length; P++) {
                -1 !== (A = _.indexOf(p[P])) && (-1 === O || A < O) && (O = A)
            } - 1 !== (M = -1 === O ? _.lastIndexOf("@") : _.lastIndexOf("@", O)) && (T = _.slice(0, M), _ = _.slice(M + 1), this.auth = decodeURIComponent(T)), O = -1;
            for (P = 0; P < f.length; P++) {
                var A; - 1 !== (A = _.indexOf(f[P])) && (-1 === O || A < O) && (O = A)
            } - 1 === O && (O = _.length), this.host = _.slice(0, O), _ = _.slice(O), this.parseHost(), this.hostname = this.hostname || "";
            var L = "[" === this.hostname[0] && "]" === this.hostname[this.hostname.length - 1];
            if (!L)
                for (var R = this.hostname.split(/\./), D = (P = 0, R.length); P < D; P++) {
                    var I = R[P];
                    if (I && !I.match(d)) {
                        for (var C = "", N = 0, U = I.length; N < U; N++) I.charCodeAt(N) > 127 ? C += "x" : C += I[N];
                        if (!C.match(d)) {
                            var j = R.slice(0, P),
                                k = R.slice(P + 1),
                                F = I.match(m);
                            F && (j.push(F[1]), k.unshift(F[2])), k.length && (_ = "/" + k.join(".") + _), this.hostname = j.join(".");
                            break
                        }
                    }
                }
            this.hostname.length > 255 ? this.hostname = "" : this.hostname = this.hostname.toLowerCase(), L || (this.hostname = i.toASCII(this.hostname));
            var B = this.port ? ":" + this.port : "",
                G = this.hostname || "";
            this.host = G + B, this.href += this.host, L && (this.hostname = this.hostname.substr(1, this.hostname.length - 2), "/" !== _[0] && (_ = "/" + _))
        }
        if (!v[E])
            for (P = 0, D = h.length; P < D; P++) {
                var z = h[P];
                if (-1 !== _.indexOf(z)) {
                    var H = encodeURIComponent(z);
                    H === z && (H = escape(z)), _ = _.split(z).join(H)
                }
            }
        var V = _.indexOf("#"); - 1 !== V && (this.hash = _.substr(V), _ = _.slice(0, V));
        var W = _.indexOf("?");
        if (-1 !== W ? (this.search = _.substr(W), this.query = _.substr(W + 1), e && (this.query = b.parse(this.query)), _ = _.slice(0, W)) : e && (this.search = "", this.query = {}), _ && (this.pathname = _), g[E] && this.hostname && !this.pathname && (this.pathname = "/"), this.pathname || this.search) {
            B = this.pathname || "";
            var X = this.search || "";
            this.path = B + X
        }
        return this.href = this.format(), this
    }, a.prototype.format = function() {
        var t = this.auth || "";
        t && (t = (t = encodeURIComponent(t)).replace(/%3A/i, ":"), t += "@");
        var e = this.protocol || "",
            n = this.pathname || "",
            r = this.hash || "",
            i = !1,
            a = "";
        this.host ? i = t + this.host : this.hostname && (i = t + (-1 === this.hostname.indexOf(":") ? this.hostname : "[" + this.hostname + "]"), this.port && (i += ":" + this.port)), this.query && o.isObject(this.query) && Object.keys(this.query).length && (a = b.stringify(this.query));
        var s = this.search || a && "?" + a || "";
        return e && ":" !== e.substr(-1) && (e += ":"), this.slashes || (!e || g[e]) && !1 !== i ? (i = "//" + (i || ""), n && "/" !== n.charAt(0) && (n = "/" + n)) : i || (i = ""), r && "#" !== r.charAt(0) && (r = "#" + r), s && "?" !== s.charAt(0) && (s = "?" + s), e + i + (n = n.replace(/[?#]/g, (function(t) {
            return encodeURIComponent(t)
        }))) + (s = s.replace("#", "%23")) + r
    }, a.prototype.resolve = function(t) {
        return this.resolveObject(_(t, !1, !0)).format()
    }, a.prototype.resolveObject = function(t) {
        if (o.isString(t)) {
            var e = new a;
            e.parse(t, !1, !0), t = e
        }
        for (var n = new a, r = Object.keys(this), i = 0; i < r.length; i++) {
            var s = r[i];
            n[s] = this[s]
        }
        if (n.hash = t.hash, "" === t.href) return n.href = n.format(), n;
        if (t.slashes && !t.protocol) {
            for (var u = Object.keys(t), c = 0; c < u.length; c++) {
                var l = u[c];
                "protocol" !== l && (n[l] = t[l])
            }
            return g[n.protocol] && n.hostname && !n.pathname && (n.path = n.pathname = "/"), n.href = n.format(), n
        }
        if (t.protocol && t.protocol !== n.protocol) {
            if (!g[t.protocol]) {
                for (var h = Object.keys(t), f = 0; f < h.length; f++) {
                    var p = h[f];
                    n[p] = t[p]
                }
                return n.href = n.format(), n
            }
            if (n.protocol = t.protocol, t.host || y[t.protocol]) n.pathname = t.pathname;
            else {
                for (var d = (t.pathname || "").split("/"); d.length && !(t.host = d.shift()););
                t.host || (t.host = ""), t.hostname || (t.hostname = ""), "" !== d[0] && d.unshift(""), d.length < 2 && d.unshift(""), n.pathname = d.join("/")
            }
            if (n.search = t.search, n.query = t.query, n.host = t.host || "", n.auth = t.auth, n.hostname = t.hostname || t.host, n.port = t.port, n.pathname || n.search) {
                var m = n.pathname || "",
                    v = n.search || "";
                n.path = m + v
            }
            return n.slashes = n.slashes || t.slashes, n.href = n.format(), n
        }
        var b = n.pathname && "/" === n.pathname.charAt(0),
            _ = t.host || t.pathname && "/" === t.pathname.charAt(0),
            w = _ || b || n.host && t.pathname,
            x = w,
            E = n.pathname && n.pathname.split("/") || [],
            S = (d = t.pathname && t.pathname.split("/") || [], n.protocol && !g[n.protocol]);
        if (S && (n.hostname = "", n.port = null, n.host && ("" === E[0] ? E[0] = n.host : E.unshift(n.host)), n.host = "", t.protocol && (t.hostname = null, t.port = null, t.host && ("" === d[0] ? d[0] = t.host : d.unshift(t.host)), t.host = null), w = w && ("" === d[0] || "" === E[0])), _) n.host = t.host || "" === t.host ? t.host : n.host, n.hostname = t.hostname || "" === t.hostname ? t.hostname : n.hostname, n.search = t.search, n.query = t.query, E = d;
        else if (d.length) E || (E = []), E.pop(), E = E.concat(d), n.search = t.search, n.query = t.query;
        else if (!o.isNullOrUndefined(t.search)) {
            if (S) n.hostname = n.host = E.shift(), (A = !!(n.host && n.host.indexOf("@") > 0) && n.host.split("@")) && (n.auth = A.shift(), n.host = n.hostname = A.shift());
            return n.search = t.search, n.query = t.query, o.isNull(n.pathname) && o.isNull(n.search) || (n.path = (n.pathname ? n.pathname : "") + (n.search ? n.search : "")), n.href = n.format(), n
        }
        if (!E.length) return n.pathname = null, n.search ? n.path = "/" + n.search : n.path = null, n.href = n.format(), n;
        for (var T = E.slice(-1)[0], M = (n.host || t.host || E.length > 1) && ("." === T || ".." === T) || "" === T, O = 0, P = E.length; P >= 0; P--) "." === (T = E[P]) ? E.splice(P, 1) : ".." === T ? (E.splice(P, 1), O++) : O && (E.splice(P, 1), O--);
        if (!w && !x)
            for (; O--; O) E.unshift("..");
        !w || "" === E[0] || E[0] && "/" === E[0].charAt(0) || E.unshift(""), M && "/" !== E.join("/").substr(-1) && E.push("");
        var A, L = "" === E[0] || E[0] && "/" === E[0].charAt(0);
        S && (n.hostname = n.host = L ? "" : E.length ? E.shift() : "", (A = !!(n.host && n.host.indexOf("@") > 0) && n.host.split("@")) && (n.auth = A.shift(), n.host = n.hostname = A.shift()));
        return (w = w || n.host && E.length) && !L && E.unshift(""), E.length ? n.pathname = E.join("/") : (n.pathname = null, n.path = null), o.isNull(n.pathname) && o.isNull(n.search) || (n.path = (n.pathname ? n.pathname : "") + (n.search ? n.search : "")), n.auth = t.auth || n.auth, n.slashes = n.slashes || t.slashes, n.href = n.format(), n
    }, a.prototype.parseHost = function() {
        var t = this.host,
            e = u.exec(t);
        e && (":" !== (e = e[0]) && (this.port = e.substr(1)), t = t.substr(0, t.length - e.length)), t && (this.hostname = t)
    }
}, function(t, e, n) {
    "use strict";
    (function(t) {
        n.d(e, "a", (function() {
            return w
        })), n.d(e, "b", (function() {
            return T
        }));
        var r = n(256),
            i = n(27),
            o = n(201),
            a = n(66),
            s = n(15),
            u = n(20),
            c = n(3),
            l = n(113),
            h = n(178),
            f = function(t) {
                var e = "function" == typeof Symbol && t[Symbol.iterator],
                    n = 0;
                return e ? e.call(t) : {
                    next: function() {
                        return t && n >= t.length && (t = void 0), {
                            value: t && t[n++],
                            done: !t
                        }
                    }
                }
            },
            p = new c.a(t),
            d = 0,
            m = 1 / 0,
            v = null,
            y = null,
            g = window.devicePixelRatio || 1,
            b = {},
            _ = new o.a(1e3),
            w = function() {
                this.handlers = [{
                    msgType: r.a,
                    func: function(t, e, n) {
                        y !== s.a.STARTING && y !== s.a.PLAYING || x(t, u.a[e.toMode], 1e4)
                    }
                }, {
                    msgType: a.a,
                    func: function(t, e, n) {
                        var r = n.tryGetData(l.a);
                        e.phase === s.a.LOADING ? x(t, "Loading", 6e4) : (e.phase === s.a.STARTING || e.phase === s.a.PLAYING) && r && r.currentMode && x(t, u.a[r.currentMode], 1e4), y = e.phase
                    }
                }, {
                    msgType: h.a,
                    func: function(t, e, n) {
                        g = e.pixelRatio
                    }
                }]
            };

        function x(t, e, n) {
            e !== v && (v && (S(t), E()), b[e] || (m = n, b[v = e] = !0))
        }
        var E = function() {
                v = null, _.clear(), d = 0
            },
            S = function(t) {
                var e = _.getList();
                if (0 !== e.length) try {
                    var n = M(e);
                    t.track("performance", n)
                } catch (t) {
                    p.warn("Could not send performance metrics", t)
                }
            },
            T = function(t, e) {
                v && (_.push(e), (d += e) >= m && (S(t), E()))
            },
            M = function(t) {
                var e, n, r = 0,
                    o = 0,
                    a = 0,
                    s = 0,
                    u = 0,
                    c = 0;
                try {
                    for (var l = f(t), h = l.next(); !h.done; h = l.next()) {
                        var p = h.value;
                        r += p, p < 0 || (p <= 16.7 ? o += p : p <= 33.3 ? a += p : p <= 100 ? s += p : p <= 1e3 ? u += p : c += p)
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        h && !h.done && (n = l.return) && n.call(l)
                    } finally {
                        if (e) throw e.error
                    }
                }
                if (r <= 0) throw Error("No positive timings, cannot calculate performance data");
                var d = r / t.length;
                o /= r, a /= r, s /= r, u /= r, c /= r;
                var m = t.slice(),
                    y = Object(i.k)(m, 50),
                    b = Object(i.k)(m, 95, !1),
                    _ = m[m.length - 1];
                return {
                    phase: v,
                    frame_delta: d,
                    frame_delta_avg: d,
                    frame_delta_median: y,
                    frame_delta_95th: b,
                    frame_delta_max: _,
                    duration: r,
                    time_60_fps: o,
                    time_60_30_fps: a,
                    time_30_10_fps: s,
                    time_10_1_fps: u,
                    time_1_0_fps: c,
                    pixel_ratio: g
                }
            }
    }).call(this, "/index.js")
}, , , , function(t, e, n) {
    "use strict";
    var r, i, o;
    n.d(e, "a", (function() {
            return r
        })), n.d(e, "b", (function() {
            return i
        })), n.d(e, "c", (function() {
            return o
        })),
        function(t) {
            t[t.Pan = 0] = "Pan", t[t.PanDollhouse = 1] = "PanDollhouse", t[t.Zoom = 2] = "Zoom", t[t.Delay = 3] = "Delay", t[t.None = 4] = "None"
        }(r || (r = {})),
        function(t) {
            t[t.Left = 1] = "Left", t[t.Right = -1] = "Right"
        }(i || (i = {})),
        function(t) {
            t[t.Move = 0] = "Move", t[t.Burns = 1] = "Burns", t[t.Zoom = 2] = "Zoom", t[t.Path = 3] = "Path", t[t.FloorChange = 4] = "FloorChange", t[t.Delay = 5] = "Delay", t[t.Nop = 6] = "Nop"
        }(o || (o = {}))
}, function(t, e, n) {
    "use strict";
    var r, i = n(200),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return o(e, t), e
        }(i.a);
    e.a = a
}, function(t, e, n) {
    "use strict";
    var r, i = n(200),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return o(e, t), e
        }(i.a);
    e.a = a
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    })), e.b = Object.freeze({
        mattertags: {
            visibility: {
                alphaTestLevel: .05
            },
            disc: {
                scale: {
                    nearBound: 1.5,
                    farBound: 4.8,
                    maxSize: 80,
                    minSize: 40,
                    baseViewportSize: 800,
                    responsiveness: 100
                }
            },
            pole: {
                height: .5,
                width: 2,
                opacity: .5,
                color: "white"
            }
        }
    });
    var r = "features/mattertags"
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return s
    })), n.d(e, "a", (function() {
        return u
    }));
    var r = n(58),
        i = n(24),
        o = n(12),
        a = n(1);

    function s(t, e, n, i, o, a, s) {
        r.a.call(this), this.type = "SphereGeometry", this.parameters = {
            radius: t,
            widthSegments: e,
            heightSegments: n,
            phiStart: i,
            phiLength: o,
            thetaStart: a,
            thetaLength: s
        }, this.fromBufferGeometry(new u(t, e, n, i, o, a, s)), this.mergeVertices()
    }

    function u(t, e, n, r, s, u, c) {
        i.a.call(this), this.type = "SphereBufferGeometry", this.parameters = {
            radius: t,
            widthSegments: e,
            heightSegments: n,
            phiStart: r,
            phiLength: s,
            thetaStart: u,
            thetaLength: c
        }, t = t || 1, e = Math.max(3, Math.floor(e) || 8), n = Math.max(2, Math.floor(n) || 6), r = void 0 !== r ? r : 0, s = void 0 !== s ? s : 2 * Math.PI, u = void 0 !== u ? u : 0, c = void 0 !== c ? c : Math.PI;
        var l, h, f = Math.min(u + c, Math.PI),
            p = 0,
            d = [],
            m = new a.a,
            v = new a.a,
            y = [],
            g = [],
            b = [],
            _ = [];
        for (h = 0; h <= n; h++) {
            var w = [],
                x = h / n,
                E = 0;
            for (0 == h && 0 == u ? E = .5 / e : h == n && f == Math.PI && (E = -.5 / e), l = 0; l <= e; l++) {
                var S = l / e;
                m.x = -t * Math.cos(r + S * s) * Math.sin(u + x * c), m.y = t * Math.cos(u + x * c), m.z = t * Math.sin(r + S * s) * Math.sin(u + x * c), g.push(m.x, m.y, m.z), v.copy(m).normalize(), b.push(v.x, v.y, v.z), _.push(S + E, 1 - x), w.push(p++)
            }
            d.push(w)
        }
        for (h = 0; h < n; h++)
            for (l = 0; l < e; l++) {
                var T = d[h][l + 1],
                    M = d[h][l],
                    O = d[h + 1][l],
                    P = d[h + 1][l + 1];
                (0 !== h || u > 0) && y.push(T, M, P), (h !== n - 1 || f < Math.PI) && y.push(M, O, P)
            }
        this.setIndex(y), this.setAttribute("position", new o.b(g, 3)), this.setAttribute("normal", new o.b(b, 3)), this.setAttribute("uv", new o.b(_, 2))
    }
    s.prototype = Object.create(r.a.prototype), s.prototype.constructor = s, u.prototype = Object.create(i.a.prototype), u.prototype.constructor = u
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.floorIndex = e, r.floorName = n, r
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    }));
    var r = "features/360_views"
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return a
    })), n.d(e, "a", (function() {
        return s
    }));
    var r = n(13),
        i = n(98),
        o = n(16),
        a = function(t) {
            var e = (new i.a).setFromQuaternion(t, "YXZ");
            return {
                x: r.a.radToDeg(e.x),
                y: r.a.radToDeg(e.y),
                z: r.a.radToDeg(e.z)
            }
        },
        s = function(t) {
            var e = new i.a;
            return e.x = r.a.degToRad(t.x), e.y = r.a.degToRad(t.y), e.z = r.a.degToRad(t.z), e.order = "YXZ", (new o.a).setFromEuler(e)
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    }));
    var r = n(18),
        i = function() {
            function t() {}
            return t.MP_BRAND = new r.a("rgb(255, 49, 88)"), t.MATTERTAG_BLUE = new r.a("rgb(3, 104, 125)"), t.WHITE = new r.a("rgb(255, 255, 255)"), t.BLACK = new r.a("rgb(0, 0, 0)"), t
        }()
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return o
    }));
    var r = n(78),
        i = n(132),
        o = function(t, e) {
            if (e === r.c.Metric) return t.toFixed(2) + "m";
            var n = Object(i.c)(t),
                o = n.feet,
                a = n.inches;
            return o > 0 ? o + "' " + a + '"' : a + '"'
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return i
    })), n.d(e, "b", (function() {
        return o
    }));
    var r = n(6);
    e.c = Object.freeze({
        debugLOD: r.z("debuglod", !1),
        highQualityDam: r.z("highqdam", !1)
    });
    var i = "features/mesh-rendering",
        o = "wireframeEnabled"
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    }));
    var r = "features/labels"
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    }));
    var r = "features/sweep_pucks"
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return u
    }));
    var r, i = n(1),
        o = n(39),
        a = n(40),
        s = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        u = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.type = o.a.FloorplanOnly, e.sid = "", e.visible = !1, e.version = "3.2", e.created = new Date, e.created_by = "", e.modified = new Date, e.start_position = new i.a, e.end_position = new i.a, e.text = "", e.start_normal = new i.a, e.end_normal = new i.a, e.floor = -1, e.room = -1, e.group = -1, e.groupOrder = -1, e
            }
            return s(e, t), e.prototype.copy = function(t) {
                return this.type = t.type, this.sid = t.sid, this.text = t.text, this.visible = t.visible, this.created = t.created, this.created_by = t.created_by, this.modified = t.modified, this.floor = t.floor, this.start_position.copy(t.start_position), this.end_position.copy(t.end_position), this.start_normal.copy(t.start_normal), this.end_normal.copy(t.end_normal), this.group = t.group, this.groupOrder = t.groupOrder, this.room = t.room, this.commit(), this
            }, e.RAYCASTER_GROUP = "measurements", e
        }(a.a)
}, function(t, e) {
    t.exports = "varying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"
}, function(t, e, n) {
    "use strict";
    n.d(e, "b", (function() {
        return r
    })), n.d(e, "a", (function() {
        return u
    }));
    var r, i = n(216),
        o = n(219),
        a = n(221),
        s = n(92);
    ! function(t) {
        t.OVERLAY = "overlay", t.HOVER = "hover", t.OPEN = "open"
    }(r || (r = {}));
    var u = function() {
        this.handlers = [{
            msgType: a.d,
            func: function(t, e, n) {
                var r = n.tryGetData(i.a),
                    a = n.tryGetData(o.c);
                if (r && a) {
                    var u = r.getTagCount(),
                        c = a.getVisitedTags().length,
                        l = a.getViewedTagCount(),
                        h = r.getTag(e.sid);
                    h && t.track("tag_opened", {
                        tag_count: u,
                        tag_id: e.sid,
                        tags_visited: c,
                        tag_view_count: l,
                        has_media: h.mediaType !== s.a.none
                    })
                }
            }
        }, {
            msgType: a.e,
            func: function(t, e, n) {
                var r = n.tryGetData(i.a),
                    a = n.tryGetData(o.c);
                if (r && a) {
                    var s = r.getTagCount(),
                        u = a.getVisitedTags().length,
                        c = a.getViewedTagCount(),
                        l = r.getTag(e.sid);
                    if (l) {
                        var h = {
                            mattertag_sid: e.sid,
                            mattertag_view: e.view,
                            mattertag_media: l.mediaType,
                            mattertags_count: s,
                            mattertags_total_views: c,
                            mattertags_visited: u
                        };
                        t.track("mattertag_view", h)
                    }
                }
            }
        }]
    }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    }));
    var r, i = n(21),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        s = function(t) {
            function e(e, n, r) {
                var i = t.call(this) || this;
                i.id = "SCHEDULE_TASK_COMMAND";
                var o = function() {
                    return a(this, (function(t) {
                        return [2, n()]
                    }))
                }();
                return i.payload = {
                    type: e,
                    func: o,
                    maxDelay: r,
                    steps: 1
                }, i
            }
            return o(e, t), e
        }(i.a)
}, function(t, e) {
    var n, r, i = t.exports = {};

    function o() {
        throw new Error("setTimeout has not been defined")
    }

    function a() {
        throw new Error("clearTimeout has not been defined")
    }

    function s(t) {
        if (n === setTimeout) return setTimeout(t, 0);
        if ((n === o || !n) && setTimeout) return n = setTimeout, setTimeout(t, 0);
        try {
            return n(t, 0)
        } catch (e) {
            try {
                return n.call(null, t, 0)
            } catch (e) {
                return n.call(this, t, 0)
            }
        }
    }! function() {
        try {
            n = "function" == typeof setTimeout ? setTimeout : o
        } catch (t) {
            n = o
        }
        try {
            r = "function" == typeof clearTimeout ? clearTimeout : a
        } catch (t) {
            r = a
        }
    }();
    var u, c = [],
        l = !1,
        h = -1;

    function f() {
        l && u && (l = !1, u.length ? c = u.concat(c) : h = -1, c.length && p())
    }

    function p() {
        if (!l) {
            var t = s(f);
            l = !0;
            for (var e = c.length; e;) {
                for (u = c, c = []; ++h < e;) u && u[h].run();
                h = -1, e = c.length
            }
            u = null, l = !1,
                function(t) {
                    if (r === clearTimeout) return clearTimeout(t);
                    if ((r === a || !r) && clearTimeout) return r = clearTimeout, clearTimeout(t);
                    try {
                        r(t)
                    } catch (e) {
                        try {
                            return r.call(null, t)
                        } catch (e) {
                            return r.call(this, t)
                        }
                    }
                }(t)
        }
    }

    function d(t, e) {
        this.fun = t, this.array = e
    }

    function m() {}
    i.nextTick = function(t) {
        var e = new Array(arguments.length - 1);
        if (arguments.length > 1)
            for (var n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];
        c.push(new d(t, e)), 1 !== c.length || l || s(p)
    }, d.prototype.run = function() {
        this.fun.apply(null, this.array)
    }, i.title = "browser", i.browser = !0, i.env = {}, i.argv = [], i.version = "", i.versions = {}, i.on = m, i.addListener = m, i.once = m, i.off = m, i.removeListener = m, i.removeAllListeners = m, i.emit = m, i.prependListener = m, i.prependOnceListener = m, i.listeners = function(t) {
        return []
    }, i.binding = function(t) {
        throw new Error("process.binding is not supported")
    }, i.cwd = function() {
        return "/"
    }, i.chdir = function(t) {
        throw new Error("process.chdir is not supported")
    }, i.umask = function() {
        return 0
    }
}, function(t, e, n) {
    var r = n(93),
        i = n(226).f,
        o = n(168),
        a = n(278),
        s = n(230),
        u = n(358),
        c = n(362);
    t.exports = function(t, e) {
        var n, l, h, f, p, d = t.target,
            m = t.global,
            v = t.stat;
        if (n = m ? r : v ? r[d] || s(d, {}) : (r[d] || {}).prototype)
            for (l in e) {
                if (f = e[l], h = t.noTargetGet ? (p = i(n, l)) && p.value : n[l], !c(m ? l : d + (v ? "." : "#") + l, t.forced) && void 0 !== h) {
                    if (typeof f == typeof h) continue;
                    u(f, h)
                }(t.sham || h && h.sham) && o(f, "sham", !0), a(n, l, f, t)
            }
    }
}, function(t, e, n) {
    var r = n(147),
        i = n(274),
        o = "".split;
    t.exports = r((function() {
        return !Object("z").propertyIsEnumerable(0)
    })) ? function(t) {
        return "String" == i(t) ? o.call(t, "") : Object(t)
    } : Object
}, function(t, e) {
    var n = {}.toString;
    t.exports = function(t) {
        return n.call(t).slice(8, -1)
    }
}, function(t, e) {
    t.exports = function(t) {
        if (null == t) throw TypeError("Can't call method on " + t);
        return t
    }
}, function(t, e, n) {
    var r = n(130),
        i = n(147),
        o = n(277);
    t.exports = !r && !i((function() {
        return 7 != Object.defineProperty(o("div"), "a", {
            get: function() {
                return 7
            }
        }).a
    }))
}, function(t, e, n) {
    var r = n(93),
        i = n(149),
        o = r.document,
        a = i(o) && i(o.createElement);
    t.exports = function(t) {
        return a ? o.createElement(t) : {}
    }
}, function(t, e, n) {
    var r = n(93),
        i = n(170),
        o = n(168),
        a = n(121),
        s = n(230),
        u = n(280),
        c = n(281),
        l = c.get,
        h = c.enforce,
        f = String(u).split("toString");
    i("inspectSource", (function(t) {
        return u.call(t)
    })), (t.exports = function(t, e, n, i) {
        var u = !!i && !!i.unsafe,
            c = !!i && !!i.enumerable,
            l = !!i && !!i.noTargetGet;
        "function" == typeof n && ("string" != typeof e || a(n, "name") || o(n, "name", e), h(n).source = f.join("string" == typeof e ? e : "")), t !== r ? (u ? !l && t[e] && (c = !0) : delete t[e], c ? t[e] = n : o(t, e, n)) : c ? t[e] = n : s(e, n)
    })(Function.prototype, "toString", (function() {
        return "function" == typeof this && l(this).source || u.call(this)
    }))
}, function(t, e) {
    t.exports = !1
}, function(t, e, n) {
    var r = n(170);
    t.exports = r("native-function-to-string", Function.toString)
}, function(t, e, n) {
    var r, i, o, a = n(357),
        s = n(93),
        u = n(149),
        c = n(168),
        l = n(121),
        h = n(231),
        f = n(190),
        p = s.WeakMap;
    if (a) {
        var d = new p,
            m = d.get,
            v = d.has,
            y = d.set;
        r = function(t, e) {
            return y.call(d, t, e), e
        }, i = function(t) {
            return m.call(d, t) || {}
        }, o = function(t) {
            return v.call(d, t)
        }
    } else {
        var g = h("state");
        f[g] = !0, r = function(t, e) {
            return c(t, g, e), e
        }, i = function(t) {
            return l(t, g) ? t[g] : {}
        }, o = function(t) {
            return l(t, g)
        }
    }
    t.exports = {
        set: r,
        get: i,
        has: o,
        enforce: function(t) {
            return o(t) ? i(t) : r(t, {})
        },
        getterFor: function(t) {
            return function(e) {
                var n;
                if (!u(e) || (n = i(e)).type !== t) throw TypeError("Incompatible receiver, " + t + " required");
                return n
            }
        }
    }
}, function(t, e, n) {
    var r = n(191),
        i = n(93),
        o = function(t) {
            return "function" == typeof t ? t : void 0
        };
    t.exports = function(t, e) {
        return arguments.length < 2 ? o(r[t]) || o(i[t]) : r[t] && r[t][e] || i[t] && i[t][e]
    }
}, function(t, e, n) {
    var r = n(121),
        i = n(148),
        o = n(360).indexOf,
        a = n(190);
    t.exports = function(t, e) {
        var n, s = i(t),
            u = 0,
            c = [];
        for (n in s) !r(a, n) && r(s, n) && c.push(n);
        for (; e.length > u;) r(s, n = e[u++]) && (~o(c, n) || c.push(n));
        return c
    }
}, function(t, e, n) {
    var r = n(285),
        i = Math.min;
    t.exports = function(t) {
        return t > 0 ? i(r(t), 9007199254740991) : 0
    }
}, function(t, e) {
    var n = Math.ceil,
        r = Math.floor;
    t.exports = function(t) {
        return isNaN(t = +t) ? 0 : (t > 0 ? r : n)(t)
    }
}, function(t, e) {
    e.f = Object.getOwnPropertySymbols
}, function(t, e, n) {
    var r = n(147);
    t.exports = !!Object.getOwnPropertySymbols && !r((function() {
        return !String(Symbol())
    }))
}, function(t, e, n) {
    var r = n(274);
    t.exports = Array.isArray || function(t) {
        return "Array" == r(t)
    }
}, function(t, e, n) {
    var r = n(275);
    t.exports = function(t) {
        return Object(r(t))
    }
}, function(t, e, n) {
    e.f = n(192)
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i = {
        object: !0,
        symbol: !0
    };
    t.exports = function() {
        var t;
        if ("function" != typeof Symbol) return !1;
        t = Symbol("test symbol");
        try {
            String(t)
        } catch (t) {
            return !1
        }
        return !!i[r(Symbol.iterator)] && (!!i[r(Symbol.toPrimitive)] && !!i[r(Symbol.toStringTag)])
    }
}, function(t, e) {
    t.exports = function() {
        return this
    }()
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i, o, a, s, u = n(131),
        c = n(386),
        l = Object.create,
        h = Object.defineProperties,
        f = Object.defineProperty,
        p = Object.prototype,
        d = l(null);
    if ("function" == typeof Symbol) {
        i = Symbol;
        try {
            String(i()), s = !0
        } catch (t) {}
    }
    var m, v = (m = l(null), function(t) {
        for (var e, n, r = 0; m[t + (r || "")];) ++r;
        return m[t += r || ""] = !0, f(p, e = "@@" + t, u.gs(null, (function(t) {
            n || (n = !0, f(this, e, u(t)), n = !1)
        }))), e
    });
    a = function(t) {
        if (this instanceof a) throw new TypeError("Symbol is not a constructor");
        return o(t)
    }, t.exports = o = function t(e) {
        var n;
        if (this instanceof t) throw new TypeError("Symbol is not a constructor");
        return s ? i(e) : (n = l(a.prototype), e = void 0 === e ? "" : String(e), h(n, {
            __description__: u("", e),
            __name__: u("", v(e))
        }))
    }, h(o, {
        for: u((function(t) {
            return d[t] ? d[t] : d[t] = o(String(t))
        })),
        keyFor: u((function(t) {
            var e;
            for (e in c(t), d)
                if (d[e] === t) return e
        })),
        hasInstance: u("", i && i.hasInstance || o("hasInstance")),
        isConcatSpreadable: u("", i && i.isConcatSpreadable || o("isConcatSpreadable")),
        iterator: u("", i && i.iterator || o("iterator")),
        match: u("", i && i.match || o("match")),
        replace: u("", i && i.replace || o("replace")),
        search: u("", i && i.search || o("search")),
        species: u("", i && i.species || o("species")),
        split: u("", i && i.split || o("split")),
        toPrimitive: u("", i && i.toPrimitive || o("toPrimitive")),
        toStringTag: u("", i && i.toStringTag || o("toStringTag")),
        unscopables: u("", i && i.unscopables || o("unscopables"))
    }), h(a.prototype, {
        constructor: u(o),
        toString: u("", (function() {
            return this.__name__
        }))
    }), h(o.prototype, {
        toString: u((function() {
            return "Symbol (" + c(this).__description__ + ")"
        })),
        valueOf: u((function() {
            return c(this)
        }))
    }), f(o.prototype, o.toPrimitive, u("", (function() {
        var t = c(this);
        return "symbol" === r(t) ? t : t.toString()
    }))), f(o.prototype, o.toStringTag, u("c", "Symbol")), f(a.prototype, o.toStringTag, u("c", o.prototype[o.toStringTag])), f(a.prototype, o.toPrimitive, u("c", o.prototype[o.toPrimitive]))
}, function(t, e, n) {
    "use strict";
    t.exports = function() {}
}, function(t, e, n) {
    "use strict";
    var r = n(151),
        i = Array.prototype.forEach,
        o = Object.create,
        a = function(t, e) {
            var n;
            for (n in t) e[n] = t[n]
        };
    t.exports = function(t) {
        var e = o(null);
        return i.call(arguments, (function(t) {
            r(t) && a(Object(t), e)
        })), e
    }
}, function(t, e, n) {
    "use strict";
    var r = n(116);
    t.exports = function() {
        return r(this).length = 0, this
    }
}, function(t, e, n) {
    "use strict";
    var r = n(394),
        i = Math.max;
    t.exports = function(t) {
        return i(0, r(t))
    }
}, function(t, e, n) {
    "use strict";
    var r = Object.create,
        i = Object.getPrototypeOf,
        o = {};
    t.exports = function() {
        var t = Object.setPrototypeOf,
            e = arguments[0] || r;
        return "function" == typeof t && i(t(e(null), o)) === o
    }
}, function(t, e, n) {
    "use strict";
    var r, i = n(398),
        o = n(116),
        a = Object.prototype.isPrototypeOf,
        s = Object.defineProperty,
        u = {
            configurable: !0,
            enumerable: !1,
            writable: !0,
            value: void 0
        };
    r = function(t, e) {
        if (o(t), null === e || i(e)) return t;
        throw new TypeError("Prototype must be null or an object")
    }, t.exports = function(t) {
        var e, n;
        return t ? (2 === t.level ? t.set ? (n = t.set, e = function(t, e) {
            return n.call(r(t, e), e), t
        }) : e = function(t, e) {
            return r(t, e).__proto__ = e, t
        } : e = function t(e, n) {
            var i;
            return r(e, n), (i = a.call(t.nullPolyfill, e)) && delete t.nullPolyfill.__proto__, null === n && (n = t.nullPolyfill), e.__proto__ = n, i && s(t.nullPolyfill, "__proto__", u), e
        }, Object.defineProperty(e, "level", {
            configurable: !1,
            enumerable: !1,
            writable: !1,
            value: t.level
        })) : null
    }(function() {
        var t, e = Object.create(null),
            n = {},
            r = Object.getOwnPropertyDescriptor(Object.prototype, "__proto__");
        if (r) {
            try {
                (t = r.set).call(e, n)
            } catch (t) {}
            if (Object.getPrototypeOf(e) === n) return {
                set: t,
                level: 2
            }
        }
        return e.__proto__ = n, Object.getPrototypeOf(e) === n ? {
            level: 2
        } : ((e = {}).__proto__ = n, Object.getPrototypeOf(e) === n && {
            level: 1
        })
    }()), n(399)
}, function(t, e, n) {
    "use strict";
    var r = n(401);
    t.exports = function(t) {
        if (!r(t)) throw new TypeError(t + " is not iterable");
        return t
    }
}, function(t, e) {}, function(t, e, n) {
    "use strict";
    var r, i = n(124),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return o(e, t), e
        }(i.a);
    e.a = a
}, function(t, e) {}, function(t, e) {
    t.exports = function(t) {
        return t.webpackPolyfill || (t.deprecate = function() {}, t.paths = [], t.children || (t.children = []), Object.defineProperty(t, "loaded", {
            enumerable: !0,
            get: function() {
                return t.l
            }
        }), Object.defineProperty(t, "id", {
            enumerable: !0,
            get: function() {
                return t.i
            }
        }), t.webpackPolyfill = 1), t
    }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r = n(203),
        i = n(173),
        o = n(92),
        a = function() {
            function t(t) {
                this.modelSID = t.model, this.capabilites = {
                    links: {
                        enable: t.supportLinks,
                        keepLabels: t.keepLinkLabels
                    }
                }
            }
            return t.prototype.parse = function(t) {
                var e = this,
                    n = [];
                return t.split("[").map((function(t, e) {
                    return 0 === e ? t : "[" + t
                })).forEach((function(t) {
                    var r = e.findLink(t);
                    r ? -1 === r.url.indexOf("javascript:") && (e.addLinkChunk(n, r), e.addTextChunk(n, t.slice(r.markdown.length))) : e.addTextChunk(n, t)
                })), n
            }, t.prototype.findLink = function(t) {
                var e = t.match(/\[([^\]]*)\]\((.*)\)/);
                if (!e) return null;
                for (var n = e[2], r = 1, i = 0; i < n.length && ("(" === n[i] ? r++ : ")" === n[i] && r--, 0 !== r);) i++;
                var o = n.length - i;
                return {
                    markdown: e[0].substring(0, e[0].length - o),
                    label: e[1],
                    url: this.conditionallyEncode(e[2].substring(0, i))
                }
            }, t.prototype.conditionallyEncode = function(t) {
                return this.needsEncoding(t) ? encodeURI(t) : t
            }, t.prototype.needsEncoding = function(t) {
                return !!t.match(/([#\s\{\}\"\']|[^\x00-\x7F]|%[^0-9a-fA-F]{2})+/g) || (decodeURI(t), !1)
            }, t.prototype.addTextChunk = function(t, e) {
                0 !== e.length && t.push({
                    type: o.a.text,
                    text: e
                })
            }, t.prototype.addLinkChunk = function(t, e) {
                if (this.capabilites.links.enable) {
                    var n = {
                        label: e.label,
                        url: e.url,
                        type: r.a.EXT_LINK
                    }; - 1 === n.url.indexOf("://") && (n.url = "http://" + n.url);
                    var a = -1 !== n.url.indexOf("matterport.com/show"),
                        s = -1 !== n.url.indexOf(window.location.host + "/show");
                    if (a || s) {
                        var u = -1 !== n.url.indexOf(this.modelSID),
                            c = i.a.deserialize(n.url);
                        u && c ? (n.type = r.a.NAVIGATION, n.navigationData = c) : (n.type = r.a.MODEL, n.url += "&play=1")
                    }
                    t.push({
                        type: o.a.link,
                        link: n
                    })
                } else this.capabilites.links.keepLabels && this.addTextChunk(t, e.label)
            }, t
        }()
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    }));
    var r, i = n(40),
        o = n(1),
        a = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        s = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.position = new o.a, e.floor = 0, e.sid = "", e.text = "", e.visible = !1, e.roomId = "", e.created = new Date, e.created_by = "", e.modified = new Date, e.version = "3.1", e
            }
            return a(e, t), e.prototype.copy = function(t) {
                return this.floor = t.floor, this.sid = t.sid, this.text = t.text, this.visible = t.visible, this.roomId = t.roomId, this.created = t.created, this.created_by = t.created_by, this.modified = t.modified, this.position.copy(t.position), this.version = t.version, this.commit(), this
            }, e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    }));
    var r, i = n(97),
        o = n(25),
        a = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        s = function(t) {
            function e() {
                var e = t.call(this) || this;
                return e.name = "cursor", e.opacity = new i.a(0), e
            }
            return a(e, t), e
        }(o.a)
}, function(t, e, n) {
    "use strict";
    var r;
    n.d(e, "a", (function() {
            return r
        })),
        function(t) {
            t[t.Reticle = 0] = "Reticle", t[t.GridPlane = 1] = "GridPlane"
        }(r || (r = {}))
}, function(t, e) {}, function(t, e) {}, function(t, e) {
    t.exports = function(t) {
        switch (t) {
            case "int8":
                return Int8Array;
            case "int16":
                return Int16Array;
            case "int32":
                return Int32Array;
            case "uint8":
                return Uint8Array;
            case "uint16":
                return Uint16Array;
            case "uint32":
                return Uint32Array;
            case "float32":
                return Float32Array;
            case "float64":
                return Float64Array;
            case "array":
                return Array;
            case "uint8_clamped":
                return Uint8ClampedArray
        }
    }
}, function(t, e, n) {
    "use strict";
    var r = Object.getOwnPropertySymbols,
        i = Object.prototype.hasOwnProperty,
        o = Object.prototype.propertyIsEnumerable;

    function a(t) {
        if (null == t) throw new TypeError("Object.assign cannot be called with null or undefined");
        return Object(t)
    }
    t.exports = function() {
        try {
            if (!Object.assign) return !1;
            var t = new String("abc");
            if (t[5] = "de", "5" === Object.getOwnPropertyNames(t)[0]) return !1;
            for (var e = {}, n = 0; n < 10; n++) e["_" + String.fromCharCode(n)] = n;
            if ("0123456789" !== Object.getOwnPropertyNames(e).map((function(t) {
                    return e[t]
                })).join("")) return !1;
            var r = {};
            return "abcdefghijklmnopqrst".split("").forEach((function(t) {
                r[t] = t
            })), "abcdefghijklmnopqrst" === Object.keys(Object.assign({}, r)).join("")
        } catch (t) {
            return !1
        }
    }() ? Object.assign : function(t, e) {
        for (var n, s, u = a(t), c = 1; c < arguments.length; c++) {
            for (var l in n = Object(arguments[c])) i.call(n, l) && (u[l] = n[l]);
            if (r) {
                s = r(n);
                for (var h = 0; h < s.length; h++) o.call(n, s[h]) && (u[s[h]] = n[s[h]])
            }
        }
        return u
    }
}, function(t, e) {}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i = n(451),
        o = n(453),
        a = "function" == typeof Symbol && "symbol" === r(Symbol()),
        s = Object.prototype.toString,
        u = Object.defineProperty && function() {
            var t = {};
            try {
                for (var e in Object.defineProperty(t, "x", {
                        enumerable: !1,
                        value: t
                    }), t) return !1;
                return t.x === t
            } catch (t) {
                return !1
            }
        }(),
        c = function(t, e, n, r) {
            var i;
            e in t && ("function" != typeof(i = r) || "[object Function]" !== s.call(i) || !r()) || (u ? Object.defineProperty(t, e, {
                configurable: !0,
                enumerable: !1,
                value: n,
                writable: !0
            }) : t[e] = n)
        },
        l = function(t, e) {
            var n = arguments.length > 2 ? arguments[2] : {},
                r = i(e);
            a && (r = r.concat(Object.getOwnPropertySymbols(e))), o(r, (function(r) {
                c(t, r, e[r], n[r])
            }))
        };
    l.supportsDescriptors = !!u, t.exports = l
}, function(t, e, n) {
    "use strict";
    var r = n(196),
        i = n(454),
        o = r.call(Function.call, String.prototype.replace),
        a = /^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,
        s = /[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;
    t.exports = function() {
        var t = i.ToString(i.CheckObjectCoercible(this));
        return o(o(t, a, ""), s, "")
    }
}, function(t, e, n) {
    "use strict";
    var r = n(315);
    t.exports = function() {
        return String.prototype.trim && "​" === "​".trim() ? String.prototype.trim : r
    }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.x = e, r.y = n, r
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return r
    })), n.d(e, "b", (function() {
        return i
    }));
    var r = function(t) {
            return void 0 !== t.pointerId
        },
        i = function(t) {
            return void 0 !== t.changedTouches
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return h
    }));
    var r, i = n(1),
        o = n(262),
        a = n(92),
        s = n(132),
        u = n(40),
        c = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        l = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        h = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.sid = "", e.created = new Date, e.modified = new Date, e.enabled = !0, e.label = "", e.description = "", e.parsedDescription = [], e.anchorPosition = new i.a, e.anchorNormal = new i.a(0, 0, Object(s.a)(1)), e.floorIndex = 0, e.stemVector = new i.a(0, 0, Object(s.a)(1)), e.stemVisible = !0, e.color = o.a.MATTERTAG_BLUE.clone(), e.mediaType = a.a.none, e.mediaSrc = "", e.isActive = !1, e
            }
            return c(e, t), e.prototype.copy = function(t) {
                var e, n;
                this.anchorNormal.copy(t.anchorNormal), this.anchorPosition.copy(t.anchorPosition), this.color.copy(t.color), this.created.setTime(t.created.getTime()), this.description = t.description, this.enabled = t.enabled, this.floorIndex = t.floorIndex, this.isActive = t.isActive, this.label = t.label, this.mediaType = t.mediaType, this.mediaSrc = t.mediaSrc, this.modified.setTime(t.modified.getTime()), this.sid = t.sid, this.stemVector.copy(t.stemVector), this.stemVisible = t.stemVisible, this.parsedDescription = [];
                try {
                    for (var r = l(t.parsedDescription), i = r.next(); !i.done; i = r.next()) {
                        var o = i.value;
                        this.parsedDescription.push({
                            link: o.link && {
                                label: o.link.label.slice(),
                                url: o.link.url.slice(),
                                type: o.link.type,
                                navigationData: o.link.navigationData && {
                                    floorVisibility: o.link.navigationData.floorVisibility,
                                    mode: o.link.navigationData.mode,
                                    sweepIndex: o.link.navigationData.sweepIndex,
                                    panoId: o.link.navigationData.panoId,
                                    position: o.link.navigationData.position && o.link.navigationData.position.clone(),
                                    quaternion: o.link.navigationData.quaternion.clone(),
                                    zoom: o.link.navigationData.zoom
                                }
                            },
                            text: o.text,
                            type: o.type
                        })
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        i && !i.done && (n = r.return) && n.call(r)
                    } finally {
                        if (e) throw e.error
                    }
                }
                return this.commit(), this
            }, e.prototype.clone = function() {
                return (new e).copy(this)
            }, e
        }(u.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return l
    }));
    var r = n(3),
        i = n(5),
        o = n(97),
        a = n(39),
        s = n(209),
        u = n(35),
        c = new r.a("line-data"),
        l = function(t, e, n, r, l, h, f) {
            void 0 === f && (f = function() {
                return {
                    lineVisibleByFeatureType: !0,
                    labelVisibleByFeatureType: !0
                }
            });
            var p = this;
            this.cameraData = t, this.viewmodeData = e, this.floorsViewData = n, this.isCurrentSweepAligned = r, this.getUnits = l, this.isFeatureEnabled = h, this.visibleFilter = f, this.derivedDataCache = {}, this.setVisibilityFilter = function(t) {
                p.visibleFilter = t
            }, this.defaultVisibilityFilter = function() {
                p.visibleFilter = function() {
                    return {
                        lineVisibleByFeatureType: !0,
                        labelVisibleByFeatureType: !0
                    }
                }
            }, this.make = function(t, e, n) {
                var r = e(),
                    i = r.start_position,
                    c = r.end_position,
                    l = r.visible,
                    h = r.floor,
                    f = r.type,
                    d = r.text,
                    m = f === a.a.ThreeD,
                    v = void 0 !== n ? n.opacity.value : 0,
                    y = 0 === v || v === u.c.LABEL_HIDDEN_OPACITY,
                    g = l && p.isFeatureEnabled(),
                    b = g && p.visibleByFloorAndModes(h, m);
                if (n && y && (!g || !b)) return n;
                var _ = b,
                    w = b;
                if (b) {
                    var x = p.visibleFilter(t);
                    _ = _ && x.lineVisibleByFeatureType, w = w && x.labelVisibleByFeatureType
                }
                var E, S = 0,
                    T = i.distanceTo(c),
                    M = Object(s.c)(T, p.getUnits());
                if (w || !y) {
                    var O = Object(s.a)(d.length + M.length),
                        P = O.width,
                        A = O.height,
                        L = Object(s.b)(i, c, p.cameraData);
                    p.tmpVec.copy(L.startScreenPosition).sub(L.endScreenPosition);
                    var R = Math.abs(p.tmpVec.y) < Math.abs(p.tmpVec.x) ? A : P;
                    u.c.ALIGN_LABELS && (R = P, S = L.rotation), w = w && L.pixelDistance > R
                }
                var D = _ && w ? 1 : _ && !w ? u.c.LABEL_HIDDEN_OPACITY : 0;
                n ? (E = n.opacity).endValue === D && _ === n.visible && w === n.labelVisible || E.modifyAnimation(E.value, D, u.c.FADE_DURATION) : E = new o.a(0, D, u.c.FADE_DURATION);
                var I = {
                    sid: t,
                    rotation: S,
                    labelVisible: w,
                    visible: _,
                    length: T,
                    displayLength: M,
                    labelContents: d.length > 0 ? M + " " + d : M,
                    opacity: E
                };
                return p.derivedDataCache[t] = {
                    getLineData: e,
                    previousDerivedData: I
                }, I
            }, this.update = function(t) {
                if (p.derivedDataCache[t]) {
                    var e = p.derivedDataCache[t],
                        n = e.getLineData,
                        r = e.previousDerivedData;
                    return p.make(t, n, r)
                }
                c.warn("data not found for " + t)
            }, this.get = function(t) {
                if (p.derivedDataCache[t]) return p.derivedDataCache[t].previousDerivedData
            }, this.remove = function(t) {
                p.derivedDataCache[t] && delete p.derivedDataCache[t]
            }, this.clear = function() {
                p.derivedDataCache = {}
            }, this.visibleByFloorAndModes = function(t, e) {
                if (p.floorsViewData.transition.progress.active) return !1;
                var n = p.viewmodeData.isPano(),
                    r = p.viewmodeData.isFloorplan(),
                    i = p.viewmodeData.isDollhouse(),
                    o = p.floorsViewData.currentFloor,
                    a = -1 === o,
                    s = o === t,
                    u = p.floorsViewData.totalFloors - 1,
                    c = !e && r && (s || u === t && a),
                    l = e && i && (s || a);
                return e && n && p.isCurrentSweepAligned() || l || c
            }, this.tmpVec = new i.a
        }
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return o
    }));
    var r = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        i = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(r(arguments[e]));
            return t
        },
        o = function(t, e) {
            var n;
            return void 0 === e && (e = 250),
                function() {
                    for (var r = [], o = 0; o < arguments.length; o++) r[o] = arguments[o];
                    var a = function() {
                        return t.apply.apply(t, i([null], r))
                    };
                    clearTimeout(n), n = window.setTimeout(a, e)
                }
        }
}, function(t, e, n) {
    "use strict";
    var r = n(29),
        i = n(65),
        o = n(54),
        a = n(0),
        s = n(155),
        u = n(307),
        c = n(138),
        l = n(106),
        h = n(50),
        f = n(10),
        p = n(308),
        d = n(83),
        m = n(56),
        v = n(331),
        y = n.n(v),
        g = n(332),
        b = n.n(g),
        _ = function() {
            return (_ = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        w = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        x = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        E = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        S = function() {
            function t(t, e) {
                void 0 === e && (e = l.a.ALL);
                var n = this;
                this.scene = t, this.layer = e, this.supportsMobile = !0, this.style = p.a.GridPlane, this.alignToNormal = !0, this.xzTex = Object(d.a)(y.a), this.zyTex = Object(d.a)(b.a), this.bindings = [], this.onOpacityUpdate = function(t) {
                    n.container.children.forEach((function(e) {
                        e.isMesh && (e.material.opacity = Math.max(0, t.opacity.value))
                    }))
                }, this.onPositionUpdate = function(t, e) {
                    n.container.position.copy(t).addScaledVector(e, .005), n.alignToNormal && Object(m.p)(n.container, t, e)
                }, this.scale = function(t) {
                    n.container.scale.set(t, t, t)
                }, this.onRaycasterUpdate = function(t) {
                    t.hit && t.hit.face && n.onPositionUpdate(t.hit.point.clone(), t.hit.face.normal)
                }, this.container = new s.a;
                var u = new i.b(.4, .4),
                    c = {
                        color: 16777215,
                        side: a.w,
                        transparent: !0,
                        depthTest: !0,
                        depthWrite: !1
                    };
                this.xzTex.generateMipmaps = !1, this.xzTex.minFilter = a.P, this.xzMaterial = new o.a(_({}, c, {
                    color: 65280,
                    map: this.xzTex
                })), this.xzMaterial.premultipliedAlpha = !1;
                var h = new r.a(u, this.xzMaterial);
                h.rotateOnAxis(f.b.LEFT, Math.PI / 2), this.zyTex.generateMipmaps = !1, this.zyTex.minFilter = a.eb, this.zyMaterial = new o.a(_({}, c, {
                    map: this.zyTex
                })), this.zyMaterial.premultipliedAlpha = !1;
                var v = new r.a(u, this.zyMaterial);
                this.container.add(h, v), this.container.children.forEach((function(t) {
                    return t.layers.mask = n.layer.mask
                }))
            }
            return t.prototype.init = function() {}, t.prototype.render = function() {}, t.prototype.dispose = function() {
                this.container.children.forEach((function(t) {
                    if (t.isMesh) {
                        t.geometry.dispose();
                        var e = t.material;
                        e.dispose(), e.map && e.map.dispose()
                    }
                }))
            }, t.prototype.activate = function(t) {
                return w(this, void 0, void 0, (function() {
                    var e, n;
                    return x(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, t.market.waitForData(u.a)];
                            case 1:
                                return e = r.sent(), [4, t.market.waitForData(c.b)];
                            case 2:
                                return n = r.sent(), this.bindings.push(e.onChanged(this.onOpacityUpdate), n.onChanged(this.onRaycasterUpdate)), this.scene.addChild(h.a.Root, this.container), [2]
                        }
                    }))
                }))
            }, t.prototype.deactivate = function(t) {
                var e, n;
                try {
                    for (var r = E(this.bindings), i = r.next(); !i.done; i = r.next()) {
                        i.value.cancel()
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        i && !i.done && (n = r.return) && n.call(r)
                    } finally {
                        if (e) throw e.error
                    }
                }
                this.bindings.length = 0, this.scene.removeChild(h.a.Root, this.container)
            }, t.prototype.setVisible = function(t) {
                this.container.visible = t
            }, t
        }();
    e.a = S
}, function(t, e, n) {
    "use strict";
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n, r, i) {
                var o = t.call(this) || this;
                return o.urls = e, o.sid = n, o.vrSupported = r, o.sweepList = i, o
            }
            return o(e, t), e
        }(i.a);
    e.a = a
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    })), n.d(e, "b", (function() {
        return s
    }));
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.mode = e, r.fromMode = n, r
            }
            return o(e, t), e
        }(i.a),
        s = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.source = e, n
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.zoomLevel = e, n
            }
            return o(e, t), e
        }(i.a);
    e.a = a
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return a
    }));
    var r, i = n(9),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function(t) {
            function e(e, n, r, i, o, a) {
                var s = t.call(this) || this;
                return s.roomId = e, s.roomIndex = n, s.viewmode = r, s.visitCount = i, s.roomCount = o, s.roomType = a, s
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return o
    }));
    var r = n(41),
        i = n(0);

    function o(t, e, n, o, a, s, u, c, l, h, f, p) {
        r.a.call(this, null, s, u, c, l, h, o, a, f, p), this.image = {
            data: t || null,
            width: e || 1,
            height: n || 1
        }, this.magFilter = void 0 !== l ? l : i.eb, this.minFilter = void 0 !== h ? h : i.eb, this.generateMipmaps = !1, this.flipY = !1, this.unpackAlignment = 1, this.needsUpdate = !0
    }
    o.prototype = Object.create(r.a.prototype), o.prototype.constructor = o, o.prototype.isDataTexture = !0
}, function(t, e, n) {
    "use strict";
    n.d(e, "a", (function() {
        return s
    }));
    var r, i = n(21),
        o = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        a = function() {
            return (a = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        s = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.name = "screen-to-canvas-point", n.payload = a({}, e), n
            }
            return o(e, t), e
        }(i.a)
}, function(t, e, n) {
    "use strict";
    var r = n(29),
        i = n(0),
        o = n(13),
        a = n(17),
        s = n(114),
        u = n(16),
        c = n(54),
        l = n(74),
        h = n(24),
        f = n(49),
        p = n(37),
        d = n(41),
        m = n(18),
        v = n(12),
        y = function() {
            return (y = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        };
    window.THREE = y({}, window.THREE, {
        BufferGeometry: h.a,
        Sphere: f.a,
        Box3: p.a,
        Texture: d.a,
        Color: m.a,
        BufferAttribute: v.a
    }), v.a.prototype.setArray && delete v.a.prototype.setArray;
    var g = n(333),
        b = n(334),
        _ = n(10),
        w = n(335),
        x = n.n(w),
        E = n(336),
        S = n(83),
        T = n(35),
        M = n(14),
        O = n(73),
        P = n(56),
        A = n(22);
    n.d(e, "a", (function() {
        return C
    }));
    var L, R = (L = function(t, e) {
            return (L = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            L(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        D = function() {
            return (D = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        I = Object(S.a)(x.a),
        C = function() {
            function t(t) {
                this.defaultTextConfig = {
                    text: "",
                    color: "black",
                    backgroundColor: "white",
                    backgroundBorderWidth: 50,
                    backgroundBorderHeight: 30,
                    background: !0,
                    texture: I,
                    font: E,
                    scale: 1,
                    negate: !0
                }, this.currentTextConfig = this.defaultTextConfig, t ? this.updateTextStyle(t) : this.updateTextStyle(this.defaultTextConfig)
            }
            return t.prototype.updateTextStyle = function(t) {
                this.currentTextConfig = D({}, this.currentTextConfig, t)
            }, t.prototype.createLabel = function(t) {
                return void 0 === t && (t = {
                    text: ""
                }), new N(D({}, this.currentTextConfig, t))
            }, t
        }(),
        N = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                n.config = e, n.update = function() {
                    n.textGeometry.update(n.config), n.textGeometry.computeBoundingBox(), n.labelTextMesh.position.x = .5 * -n.textGeometry.layout.width, n.labelTextMesh.position.y = -(.5 * n.textGeometry.layout.height + n.config.backgroundBorderHeight), n.labelTextMesh.position.z = .25, n.unscaledWidth = n.textGeometry.layout.width + n.config.backgroundBorderWidth, n.unscaledHeight = n.textGeometry.layout.height + n.config.backgroundBorderHeight, n.config.background && n.labelBackgroundMesh.scale.set(n.unscaledWidth, n.unscaledHeight, .01), n.aspect = n.unscaledWidth / Math.max(n.unscaledHeight, .001), n.updateScale()
                };
                var a = void 0 !== n.config.opacity ? n.config.opacity : 1;
                if (e.background) {
                    n.config.backgroundOpacity = void 0 !== n.config.backgroundOpacity ? n.config.backgroundOpacity : 1;
                    var h = new l.b(1, 1, .01),
                        f = new c.a({
                            color: e.backgroundColor,
                            transparent: !0,
                            depthTest: a > 0,
                            depthWrite: a > 0,
                            opacity: n.config.backgroundOpacity
                        });
                    n.labelBackgroundMesh = new r.a(h, f), n.labelBackgroundMesh.position.z = -.25, n.labelBackgroundMesh.name = "Label Background", n.add(n.labelBackgroundMesh)
                }
                var p = b({
                        map: e.texture,
                        color: e.color,
                        negate: !!e.negate
                    }),
                    d = new s.a({
                        uniforms: p.uniforms,
                        fragmentShader: p.fragmentShader,
                        vertexShader: p.vertexShader,
                        side: i.w,
                        transparent: !0,
                        depthTest: a > 0,
                        depthWrite: a > 0,
                        opacity: a
                    });
                n.textGeometry = g(e), n.labelTextMesh = new r.a(n.textGeometry, d), n.labelTextMesh.name = "Label Text", n.labelTextMesh.renderOrder = 10;
                var m = (new u.a).setFromAxisAngle(_.b.FORWARD, o.a.degToRad(180)),
                    v = (new u.a).setFromAxisAngle(_.b.UP, o.a.degToRad(180));
                return n.labelTextMesh.quaternion.multiply(m).multiply(v), n.add(n.labelTextMesh), n.name = "Label Container", n.fontHeightToMeters = 1 / e.font.info.size, n.scaleFactor = e.scale || n.fontHeightToMeters, n
            }
            return R(e, t), e.prototype.updateScale = function() {
                this.height = this.textGeometry.layout.height * this.config.scale, this.width = this.textGeometry.layout.width * this.config.scale;
                var t = this.config.scale * this.fontHeightToMeters;
                this.scale.set(t, t, t)
            }, Object.defineProperty(e.prototype, "text", {
                get: function() {
                    return this.config.text
                },
                set: function(t) {
                    this.config.text = t, this.name = t, this.update()
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "scaleFactor", {
                get: function() {
                    return this.config.scale
                },
                set: function(t) {
                    this.config.scale = t, this.updateScale()
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "opacity", {
                get: function() {
                    return this.config.opacity ? this.config.opacity : 1
                },
                set: function(t) {
                    if (t !== this.config.opacity) {
                        this.config.opacity = t;
                        var e = this.labelBackgroundMesh.material;
                        e.opacity = Math.min(this.config.backgroundOpacity || 1, t), e.depthWrite = t > T.c.DEPTH_WRITE_THRESHOD, e.depthTest = t > 0;
                        var n = this.labelTextMesh.material;
                        n.uniforms.opacity.value = t, n.depthWrite = t > T.c.DEPTH_WRITE_THRESHOD, n.depthTest = t > 0
                    }
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.setRenderLayer = function(t) {
                this.labelTextMesh.layers.mask = t.mask, this.labelBackgroundMesh.layers.mask = t.mask
            }, e.prototype.setPosition = function(t, e) {
                void 0 === e && (e = function(t) {
                    return t
                }), this.position.copy(e(t))
            }, e.prototype.setOrientation = function(t, e) {
                void 0 === e && (e = 0), this.quaternion.copy(t), 0 !== e && this.rotateZ(-e * M.b)
            }, e.prototype.scaleBillboard = function(t, e, n, r, i, o, a) {
                void 0 === a && (a = A.b.SCALE);
                var s = Object(O.d)(this.position, t, e, n.asThreeMatrix4()),
                    u = Math.abs(s.x);
                if (u < 1) {
                    var c = Object(P.a)(n, t, this.position, r, a),
                        l = (Object(M.e)(i, 1, 2.5) + o) * A.b.SCALE_ASPECT,
                        h = 1 + A.b.SCALE_NDC - u * A.b.SCALE_NDC - l;
                    this.scaleFactor = Math.max(Math.min(1 / c * h, 3), .001)
                } else this.scaleFactor = .001
            }, e
        }(a.a)
}, function(t, e, n) {
    t.exports = n.p + "images/filled-circle.png"
}, function(t, e, n) {
    t.exports = n.p + "images/vert_arrows.png"
}, function(t, e, n) {
    t.exports = n.p + "images/surface_grid_planar_256.png"
}, function(t, e, n) {
    var r = n(425),
        i = n(429),
        o = n(430),
        a = n(433),
        s = n(312),
        u = n(435),
        c = n(436),
        l = THREE.BufferGeometry;

    function h(t) {
        l.call(this), "string" == typeof t && (t = {
            text: t
        }), this._opt = s({}, t), t && this.update(t)
    }
    t.exports = function(t) {
        return new h(t)
    }, i(h, l), h.prototype.update = function(t) {
        if ("string" == typeof t && (t = {
                text: t
            }), !(t = s({}, this._opt, t)).font) throw new TypeError("must specify a { font } in options");
        this.layout = r(t);
        var e = !1 !== t.flipY,
            n = t.font,
            i = n.common.scaleW,
            c = n.common.scaleH,
            l = this.layout.glyphs.filter((function(t) {
                var e = t.data;
                return e.width * e.height > 0
            }));
        this.visibleGlyphs = l;
        var h = u.positions(l),
            f = u.uvs(l, i, c, e),
            p = o({
                clockwise: !0,
                type: "uint16",
                count: l.length
            });
        if (a.index(this, p, 1, "uint16"), a.attr(this, "position", h, 2), a.attr(this, "uv", f, 2), !t.multipage && "page" in this.attributes) this.removeAttribute("page");
        else if (t.multipage) {
            var d = u.pages(l);
            a.attr(this, "page", d, 1)
        }
    }, h.prototype.computeBoundingSphere = function() {
        null === this.boundingSphere && (this.boundingSphere = new THREE.Sphere);
        var t = this.attributes.position.array,
            e = this.attributes.position.itemSize;
        if (!t || !e || t.length < 2) return this.boundingSphere.radius = 0, void this.boundingSphere.center.set(0, 0, 0);
        c.computeSphere(t, this.boundingSphere), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')
    }, h.prototype.computeBoundingBox = function() {
        null === this.boundingBox && (this.boundingBox = new THREE.Box3);
        var t = this.boundingBox,
            e = this.attributes.position.array,
            n = this.attributes.position.itemSize;
        !e || !n || e.length < 2 ? t.makeEmpty() : c.computeBox(e, t)
    }
}, function(t, e, n) {
    var r = n(312);
    t.exports = function(t) {
        var e = "number" == typeof(t = t || {}).opacity ? t.opacity : 1,
            n = "number" == typeof t.alphaTest ? t.alphaTest : 1e-4,
            i = t.precision || "highp",
            o = t.color,
            a = t.map,
            s = "boolean" != typeof t.negate || t.negate;
        return delete t.map, delete t.color, delete t.precision, delete t.opacity, delete t.negate, r({
            uniforms: {
                opacity: {
                    type: "f",
                    value: e
                },
                map: {
                    type: "t",
                    value: a || new THREE.Texture
                },
                color: {
                    type: "c",
                    value: new THREE.Color(o)
                }
            },
            vertexShader: ["attribute vec2 uv;", "attribute vec4 position;", "uniform mat4 projectionMatrix;", "uniform mat4 modelViewMatrix;", "varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * position;", "}"].join("\n"),
            fragmentShader: ["#ifdef GL_OES_standard_derivatives", "#extension GL_OES_standard_derivatives : enable", "#endif", "precision " + i + " float;", "uniform float opacity;", "uniform vec3 color;", "uniform sampler2D map;", "varying vec2 vUv;", "float median(float r, float g, float b) {", "  return max(min(r, g), min(max(r, g), b));", "}", "void main() {", "  vec3 sample = " + (s ? "1.0 - " : "") + "texture2D(map, vUv).rgb;", "  float sigDist = median(sample.r, sample.g, sample.b) - 0.5;", "  float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);", "  gl_FragColor = vec4(color.xyz, alpha * opacity);", 0 === n ? "" : "  if (gl_FragColor.a < " + n + ") discard;", "}"].join("\n")
        }, t)
    }
}, function(t, e, n) {
    t.exports = n.p + "images/Roboto-Bold.png"
}, function(t) {
    t.exports = JSON.parse('{"pages":["Roboto-Bold.png"],"chars":[{"id":40,"width":24,"height":52,"xoffset":0,"yoffset":-33.140625,"xadvance":14.7451171875,"chnl":15,"x":0,"y":0,"page":0},{"id":41,"width":22,"height":52,"xoffset":0,"yoffset":-33.140625,"xadvance":14.806640625,"chnl":15,"x":0,"y":54,"page":0},{"id":93,"width":19,"height":52,"xoffset":0,"yoffset":-34.740234375,"xadvance":11.6689453125,"chnl":15,"x":0,"y":108,"page":0},{"id":91,"width":21,"height":52,"xoffset":0,"yoffset":-34.740234375,"xadvance":11.6689453125,"chnl":15,"x":0,"y":162,"page":0},{"id":106,"width":21,"height":50,"xoffset":0,"yoffset":-30.9873046875,"xadvance":10.91015625,"chnl":15,"x":0,"y":216,"page":0},{"id":125,"width":23,"height":50,"xoffset":0,"yoffset":-32.7509765625,"xadvance":13.86328125,"chnl":15,"x":0,"y":268,"page":0},{"id":123,"width":23,"height":50,"xoffset":0,"yoffset":-32.7509765625,"xadvance":13.86328125,"chnl":15,"x":0,"y":320,"page":0},{"id":36,"width":32,"height":49,"xoffset":0,"yoffset":-34.5966796875,"xadvance":24.0966796875,"chnl":15,"x":0,"y":372,"page":0},{"id":64,"width":46,"height":48,"xoffset":0,"yoffset":-29.0390625,"xadvance":37.5908203125,"chnl":15,"x":0,"y":423,"page":0},{"id":81,"width":37,"height":46,"xoffset":0,"yoffset":-30.26953125,"xadvance":28.998046875,"chnl":15,"x":48,"y":423,"page":0},{"id":87,"width":46,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":36.7294921875,"chnl":15,"x":87,"y":423,"page":0},{"id":124,"width":17,"height":45,"xoffset":0,"yoffset":-29.859375,"xadvance":10.623046875,"chnl":15,"x":34,"y":372,"page":0},{"id":77,"width":44,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":36.791015625,"chnl":15,"x":135,"y":423,"page":0},{"id":109,"width":44,"height":33,"xoffset":0,"yoffset":-22.599609375,"xadvance":36.3603515625,"chnl":15,"x":0,"y":473,"page":0},{"id":92,"width":29,"height":42,"xoffset":0,"yoffset":-29.859375,"xadvance":17.71875,"chnl":15,"x":53,"y":372,"page":0},{"id":98,"width":32,"height":42,"xoffset":0,"yoffset":-31.5,"xadvance":23.6455078125,"chnl":15,"x":84,"y":372,"page":0},{"id":96,"width":22,"height":42,"xoffset":0,"yoffset":-31.5,"xadvance":13.8837890625,"chnl":15,"x":118,"y":372,"page":0},{"id":107,"width":33,"height":42,"xoffset":0,"yoffset":-31.5,"xadvance":22.435546875,"chnl":15,"x":142,"y":372,"page":0},{"id":102,"width":25,"height":42,"xoffset":0,"yoffset":-31.9306640625,"xadvance":15.052734375,"chnl":15,"x":177,"y":372,"page":0},{"id":108,"width":19,"height":42,"xoffset":0,"yoffset":-31.5,"xadvance":11.1357421875,"chnl":15,"x":204,"y":372,"page":0},{"id":47,"width":25,"height":42,"xoffset":0,"yoffset":-29.859375,"xadvance":15.6884765625,"chnl":15,"x":225,"y":372,"page":0},{"id":34,"width":22,"height":42,"xoffset":0,"yoffset":-31.5,"xadvance":13.4736328125,"chnl":15,"x":252,"y":372,"page":0},{"id":104,"width":31,"height":42,"xoffset":0,"yoffset":-31.5,"xadvance":23.501953125,"chnl":15,"x":276,"y":372,"page":0},{"id":39,"width":16,"height":42,"xoffset":0,"yoffset":-31.5,"xadvance":6.7880859375,"chnl":15,"x":309,"y":372,"page":0},{"id":100,"width":31,"height":42,"xoffset":0,"yoffset":-31.5,"xadvance":23.666015625,"chnl":15,"x":327,"y":372,"page":0},{"id":48,"width":32,"height":41,"xoffset":0,"yoffset":-30.26953125,"xadvance":24.0966796875,"chnl":15,"x":360,"y":372,"page":0},{"id":103,"width":32,"height":41,"xoffset":0,"yoffset":-22.599609375,"xadvance":23.9736328125,"chnl":15,"x":394,"y":372,"page":0},{"id":105,"width":19,"height":41,"xoffset":0,"yoffset":-30.9873046875,"xadvance":11.1357421875,"chnl":15,"x":428,"y":372,"page":0},{"id":113,"width":31,"height":41,"xoffset":0,"yoffset":-22.599609375,"xadvance":23.7275390625,"chnl":15,"x":449,"y":372,"page":0},{"id":63,"width":29,"height":41,"xoffset":0,"yoffset":-30.26953125,"xadvance":20.8974609375,"chnl":15,"x":482,"y":372,"page":0},{"id":51,"width":32,"height":41,"xoffset":0,"yoffset":-30.26953125,"xadvance":24.0966796875,"chnl":15,"x":25,"y":320,"page":0},{"id":112,"width":32,"height":41,"xoffset":0,"yoffset":-22.599609375,"xadvance":23.6455078125,"chnl":15,"x":59,"y":320,"page":0},{"id":79,"width":37,"height":41,"xoffset":0,"yoffset":-30.26953125,"xadvance":28.998046875,"chnl":15,"x":93,"y":320,"page":0},{"id":67,"width":36,"height":41,"xoffset":0,"yoffset":-30.26953125,"xadvance":27.48046875,"chnl":15,"x":132,"y":320,"page":0},{"id":37,"width":39,"height":41,"xoffset":0,"yoffset":-30.2900390625,"xadvance":31.0078125,"chnl":15,"x":170,"y":320,"page":0},{"id":54,"width":33,"height":41,"xoffset":0,"yoffset":-30.1669921875,"xadvance":24.0966796875,"chnl":15,"x":211,"y":320,"page":0},{"id":38,"width":37,"height":41,"xoffset":0,"yoffset":-30.26953125,"xadvance":27.5625,"chnl":15,"x":246,"y":320,"page":0},{"id":71,"width":36,"height":41,"xoffset":0,"yoffset":-30.26953125,"xadvance":28.6083984375,"chnl":15,"x":285,"y":320,"page":0},{"id":56,"width":32,"height":41,"xoffset":0,"yoffset":-30.26953125,"xadvance":24.0966796875,"chnl":15,"x":323,"y":320,"page":0},{"id":83,"width":34,"height":41,"xoffset":0,"yoffset":-30.26953125,"xadvance":25.8193359375,"chnl":15,"x":357,"y":320,"page":0},{"id":57,"width":32,"height":41,"xoffset":0,"yoffset":-30.26953125,"xadvance":24.0966796875,"chnl":15,"x":393,"y":320,"page":0},{"id":121,"width":31,"height":41,"xoffset":0,"yoffset":-22.189453125,"xadvance":21.08203125,"chnl":15,"x":427,"y":320,"page":0},{"id":69,"width":33,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":23.625,"chnl":15,"x":181,"y":423,"page":0},{"id":76,"width":32,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":22.7431640625,"chnl":15,"x":216,"y":423,"page":0},{"id":78,"width":37,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":29.654296875,"chnl":15,"x":250,"y":423,"page":0},{"id":33,"width":19,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":11.4228515625,"chnl":15,"x":289,"y":423,"page":0},{"id":80,"width":36,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":27.0908203125,"chnl":15,"x":310,"y":423,"page":0},{"id":74,"width":31,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":23.4609375,"chnl":15,"x":348,"y":423,"page":0},{"id":82,"width":36,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":26.8037109375,"chnl":15,"x":381,"y":423,"page":0},{"id":73,"width":19,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":12.2431640625,"chnl":15,"x":419,"y":423,"page":0},{"id":84,"width":35,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":25.9833984375,"chnl":15,"x":440,"y":423,"page":0},{"id":85,"width":35,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":27.64453125,"chnl":15,"x":477,"y":423,"page":0},{"id":86,"width":37,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":27.4599609375,"chnl":15,"x":460,"y":320,"page":0},{"id":72,"width":37,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":29.6748046875,"chnl":15,"x":25,"y":268,"page":0},{"id":88,"width":36,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":26.6806640625,"chnl":15,"x":64,"y":268,"page":0},{"id":89,"width":36,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":25.962890625,"chnl":15,"x":102,"y":268,"page":0},{"id":90,"width":34,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":25.4501953125,"chnl":15,"x":140,"y":268,"page":0},{"id":75,"width":37,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":26.66015625,"chnl":15,"x":176,"y":268,"page":0},{"id":68,"width":35,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":27.2958984375,"chnl":15,"x":215,"y":268,"page":0},{"id":66,"width":35,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":26.8037109375,"chnl":15,"x":252,"y":268,"page":0},{"id":94,"width":27,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":18.3544921875,"chnl":15,"x":289,"y":268,"page":0},{"id":65,"width":38,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":28.259765625,"chnl":15,"x":318,"y":268,"page":0},{"id":35,"width":34,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":25.01953125,"chnl":15,"x":358,"y":268,"page":0},{"id":119,"width":40,"height":32,"xoffset":0,"yoffset":-22.189453125,"xadvance":30.8642578125,"chnl":15,"x":46,"y":473,"page":0},{"id":59,"width":19,"height":40,"xoffset":0,"yoffset":-22.88671875,"xadvance":11.0126953125,"chnl":15,"x":394,"y":268,"page":0},{"id":55,"width":32,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":24.0966796875,"chnl":15,"x":415,"y":268,"page":0},{"id":53,"width":32,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":24.0966796875,"chnl":15,"x":449,"y":268,"page":0},{"id":52,"width":33,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":24.0966796875,"chnl":15,"x":23,"y":216,"page":0},{"id":50,"width":32,"height":40,"xoffset":0,"yoffset":-30.26953125,"xadvance":24.0966796875,"chnl":15,"x":58,"y":216,"page":0},{"id":49,"width":26,"height":40,"xoffset":0,"yoffset":-29.900390625,"xadvance":24.0966796875,"chnl":15,"x":483,"y":268,"page":0},{"id":42,"width":29,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":19.03125,"chnl":15,"x":92,"y":216,"page":0},{"id":70,"width":32,"height":40,"xoffset":0,"yoffset":-29.859375,"xadvance":23.009765625,"chnl":15,"x":123,"y":216,"page":0},{"id":116,"width":23,"height":38,"xoffset":0,"yoffset":-27.64453125,"xadvance":14.19140625,"chnl":15,"x":157,"y":216,"page":0},{"id":43,"width":32,"height":35,"xoffset":0,"yoffset":-24.732421875,"xadvance":22.927734375,"chnl":15,"x":182,"y":216,"page":0},{"id":126,"width":35,"height":27,"xoffset":0,"yoffset":-16.9599609375,"xadvance":27.234375,"chnl":15,"x":88,"y":473,"page":0},{"id":117,"width":31,"height":33,"xoffset":0,"yoffset":-22.189453125,"xadvance":23.501953125,"chnl":15,"x":216,"y":216,"page":0},{"id":101,"width":32,"height":33,"xoffset":0,"yoffset":-22.599609375,"xadvance":22.7021484375,"chnl":15,"x":249,"y":216,"page":0},{"id":97,"width":31,"height":33,"xoffset":0,"yoffset":-22.599609375,"xadvance":22.517578125,"chnl":15,"x":283,"y":216,"page":0},{"id":110,"width":31,"height":33,"xoffset":0,"yoffset":-22.599609375,"xadvance":23.5224609375,"chnl":15,"x":316,"y":216,"page":0},{"id":111,"width":32,"height":33,"xoffset":0,"yoffset":-22.599609375,"xadvance":23.748046875,"chnl":15,"x":349,"y":216,"page":0},{"id":58,"width":19,"height":33,"xoffset":0,"yoffset":-22.88671875,"xadvance":11.853515625,"chnl":15,"x":383,"y":216,"page":0},{"id":62,"width":30,"height":33,"xoffset":0,"yoffset":-22.599609375,"xadvance":21.697265625,"chnl":15,"x":404,"y":216,"page":0},{"id":114,"width":25,"height":33,"xoffset":0,"yoffset":-22.599609375,"xadvance":15.3193359375,"chnl":15,"x":436,"y":216,"page":0},{"id":115,"width":30,"height":33,"xoffset":0,"yoffset":-22.599609375,"xadvance":21.5947265625,"chnl":15,"x":463,"y":216,"page":0},{"id":60,"width":29,"height":33,"xoffset":0,"yoffset":-22.6201171875,"xadvance":21.369140625,"chnl":15,"x":23,"y":162,"page":0},{"id":99,"width":31,"height":33,"xoffset":0,"yoffset":-22.599609375,"xadvance":21.90234375,"chnl":15,"x":54,"y":162,"page":0},{"id":118,"width":31,"height":32,"xoffset":0,"yoffset":-22.189453125,"xadvance":21.2255859375,"chnl":15,"x":87,"y":162,"page":0},{"id":120,"width":31,"height":32,"xoffset":0,"yoffset":-22.189453125,"xadvance":21.369140625,"chnl":15,"x":120,"y":162,"page":0},{"id":122,"width":30,"height":32,"xoffset":0,"yoffset":-22.189453125,"xadvance":21.369140625,"chnl":15,"x":153,"y":162,"page":0},{"id":61,"width":31,"height":30,"xoffset":0,"yoffset":-20.138671875,"xadvance":24.03515625,"chnl":15,"x":185,"y":162,"page":0},{"id":95,"width":29,"height":15,"xoffset":0,"yoffset":0,"xadvance":18.744140625,"chnl":15,"x":125,"y":473,"page":0},{"id":45,"width":24,"height":25,"xoffset":0,"yoffset":-15.17578125,"xadvance":16.283203125,"chnl":15,"x":218,"y":162,"page":0},{"id":44,"width":18,"height":23,"xoffset":0,"yoffset":-5.044921875,"xadvance":10.25390625,"chnl":15,"x":244,"y":162,"page":0},{"id":46,"width":19,"height":16,"xoffset":0,"yoffset":-6.0908203125,"xadvance":12.2021484375,"chnl":15,"x":23,"y":197,"page":0},{"id":32,"width":0,"height":0,"xoffset":0,"yoffset":0,"xadvance":10.458984375,"chnl":15,"x":0,"y":508,"page":0}],"info":{"face":"Roboto Bold","size":42,"bold":0,"italic":0,"charset":[" ","!","\\"","#","$","%","&","\'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"],"unicode":1,"stretchH":100,"smooth":1,"aa":1,"padding":[0,0,0,0],"spacing":[2,2]},"common":{"lineHeight":44.091796875,"base":38.96484375,"scaleW":512,"scaleH":512,"pages":1,"packed":0,"alphaChnl":0,"redChnl":0,"greenChnl":0,"blueChnl":0},"kernings":[{"first":32,"second":84,"amount":-1.23046875},{"first":34,"second":34,"amount":-0.7587890625},{"first":34,"second":39,"amount":-0.7587890625},{"first":34,"second":65,"amount":-2.4609375},{"first":34,"second":97,"amount":-1.025390625},{"first":34,"second":99,"amount":-1.2099609375},{"first":34,"second":100,"amount":-1.2099609375},{"first":34,"second":101,"amount":-1.2099609375},{"first":34,"second":103,"amount":-1.2099609375},{"first":34,"second":109,"amount":-0.41015625},{"first":34,"second":110,"amount":-0.41015625},{"first":34,"second":111,"amount":-1.8662109375},{"first":34,"second":112,"amount":-0.41015625},{"first":34,"second":113,"amount":-1.2099609375},{"first":34,"second":115,"amount":-1.88671875},{"first":39,"second":34,"amount":-0.7587890625},{"first":39,"second":39,"amount":-0.7587890625},{"first":39,"second":65,"amount":-2.4609375},{"first":39,"second":97,"amount":-1.025390625},{"first":39,"second":99,"amount":-1.2099609375},{"first":39,"second":100,"amount":-1.2099609375},{"first":39,"second":101,"amount":-1.2099609375},{"first":39,"second":103,"amount":-1.2099609375},{"first":39,"second":109,"amount":-0.41015625},{"first":39,"second":110,"amount":-0.41015625},{"first":39,"second":111,"amount":-1.8662109375},{"first":39,"second":112,"amount":-0.41015625},{"first":39,"second":113,"amount":-1.2099609375},{"first":39,"second":115,"amount":-1.88671875},{"first":40,"second":86,"amount":0.41015625},{"first":40,"second":87,"amount":0.779296875},{"first":40,"second":89,"amount":0.451171875},{"first":44,"second":34,"amount":-5.8447265625},{"first":44,"second":39,"amount":-5.8447265625},{"first":46,"second":34,"amount":-5.8447265625},{"first":46,"second":39,"amount":-5.8447265625},{"first":47,"second":47,"amount":-5.0859375},{"first":65,"second":34,"amount":-2.4609375},{"first":65,"second":39,"amount":-2.4609375},{"first":65,"second":67,"amount":-0.4306640625},{"first":65,"second":71,"amount":-0.4306640625},{"first":65,"second":79,"amount":-0.4306640625},{"first":65,"second":81,"amount":-0.4306640625},{"first":65,"second":84,"amount":-2.4609375},{"first":65,"second":85,"amount":-0.3486328125},{"first":65,"second":86,"amount":-1.5791015625},{"first":65,"second":87,"amount":-0.7998046875},{"first":65,"second":89,"amount":-3.076171875},{"first":65,"second":109,"amount":-0.984375},{"first":65,"second":110,"amount":-0.984375},{"first":65,"second":111,"amount":-0.24609375},{"first":65,"second":112,"amount":-0.984375},{"first":65,"second":117,"amount":-0.2255859375},{"first":65,"second":118,"amount":-1.025390625},{"first":65,"second":121,"amount":-1.025390625},{"first":65,"second":122,"amount":0.24609375},{"first":66,"second":84,"amount":-0.5537109375},{"first":66,"second":86,"amount":-0.4921875},{"first":66,"second":89,"amount":-1.1279296875},{"first":67,"second":84,"amount":-0.5947265625},{"first":68,"second":44,"amount":-2.501953125},{"first":68,"second":46,"amount":-2.501953125},{"first":68,"second":65,"amount":-0.4306640625},{"first":68,"second":84,"amount":-1.7431640625},{"first":68,"second":86,"amount":-0.451171875},{"first":68,"second":88,"amount":-0.451171875},{"first":68,"second":89,"amount":-0.8818359375},{"first":68,"second":90,"amount":-0.4716796875},{"first":69,"second":84,"amount":0.41015625},{"first":69,"second":99,"amount":-0.3896484375},{"first":69,"second":100,"amount":-0.3896484375},{"first":69,"second":101,"amount":-0.3896484375},{"first":69,"second":103,"amount":-0.3896484375},{"first":69,"second":111,"amount":-0.3896484375},{"first":69,"second":113,"amount":-0.3896484375},{"first":69,"second":117,"amount":-0.3486328125},{"first":69,"second":118,"amount":-0.533203125},{"first":69,"second":121,"amount":-0.533203125},{"first":70,"second":44,"amount":-5.619140625},{"first":70,"second":46,"amount":-5.619140625},{"first":70,"second":65,"amount":-3.9375},{"first":70,"second":74,"amount":-4.265625},{"first":70,"second":84,"amount":0.41015625},{"first":70,"second":97,"amount":-0.697265625},{"first":70,"second":99,"amount":-0.4306640625},{"first":70,"second":100,"amount":-0.4306640625},{"first":70,"second":101,"amount":-0.4306640625},{"first":70,"second":103,"amount":-0.4306640625},{"first":70,"second":111,"amount":-0.4306640625},{"first":70,"second":113,"amount":-0.4306640625},{"first":70,"second":114,"amount":-0.533203125},{"first":70,"second":117,"amount":-0.451171875},{"first":70,"second":118,"amount":-0.4921875},{"first":70,"second":121,"amount":-0.4921875},{"first":72,"second":65,"amount":0.369140625},{"first":72,"second":84,"amount":-0.5947265625},{"first":72,"second":88,"amount":0.3486328125},{"first":72,"second":89,"amount":-0.57421875},{"first":73,"second":65,"amount":0.369140625},{"first":73,"second":84,"amount":-0.5947265625},{"first":73,"second":88,"amount":0.3486328125},{"first":73,"second":89,"amount":-0.57421875},{"first":74,"second":65,"amount":-0.451171875},{"first":75,"second":45,"amount":-3.36328125},{"first":75,"second":67,"amount":-0.6357421875},{"first":75,"second":71,"amount":-0.6357421875},{"first":75,"second":79,"amount":-0.6357421875},{"first":75,"second":81,"amount":-0.6357421875},{"first":75,"second":99,"amount":-0.533203125},{"first":75,"second":100,"amount":-0.533203125},{"first":75,"second":101,"amount":-0.533203125},{"first":75,"second":103,"amount":-0.533203125},{"first":75,"second":111,"amount":-0.5537109375},{"first":75,"second":113,"amount":-0.533203125},{"first":75,"second":117,"amount":-0.4716796875},{"first":75,"second":118,"amount":-0.8203125},{"first":75,"second":121,"amount":-0.8203125},{"first":76,"second":34,"amount":-5.90625},{"first":76,"second":39,"amount":-5.90625},{"first":76,"second":65,"amount":0.3896484375},{"first":76,"second":67,"amount":-1.3125},{"first":76,"second":71,"amount":-1.3125},{"first":76,"second":79,"amount":-1.3125},{"first":76,"second":81,"amount":-1.3125},{"first":76,"second":84,"amount":-4.2041015625},{"first":76,"second":85,"amount":-0.4921875},{"first":76,"second":86,"amount":-4.224609375},{"first":76,"second":87,"amount":-1.9072265625},{"first":76,"second":89,"amount":-5.7216796875},{"first":76,"second":117,"amount":-0.287109375},{"first":76,"second":118,"amount":-2.5224609375},{"first":76,"second":121,"amount":-2.5224609375},{"first":77,"second":65,"amount":0.369140625},{"first":77,"second":84,"amount":-0.5947265625},{"first":77,"second":88,"amount":0.3486328125},{"first":77,"second":89,"amount":-0.57421875},{"first":78,"second":65,"amount":0.369140625},{"first":78,"second":84,"amount":-0.5947265625},{"first":78,"second":88,"amount":0.3486328125},{"first":78,"second":89,"amount":-0.57421875},{"first":79,"second":44,"amount":-2.501953125},{"first":79,"second":46,"amount":-2.501953125},{"first":79,"second":65,"amount":-0.4306640625},{"first":79,"second":84,"amount":-1.7431640625},{"first":79,"second":86,"amount":-0.451171875},{"first":79,"second":88,"amount":-0.451171875},{"first":79,"second":89,"amount":-0.8818359375},{"first":79,"second":90,"amount":-0.4716796875},{"first":80,"second":44,"amount":-8.28515625},{"first":80,"second":46,"amount":-8.28515625},{"first":80,"second":65,"amount":-3.650390625},{"first":80,"second":74,"amount":-3.7734375},{"first":80,"second":88,"amount":-1.0458984375},{"first":80,"second":90,"amount":-0.73828125},{"first":80,"second":97,"amount":-0.2255859375},{"first":80,"second":99,"amount":-0.2666015625},{"first":80,"second":100,"amount":-0.2666015625},{"first":80,"second":101,"amount":-0.2666015625},{"first":80,"second":103,"amount":-0.2666015625},{"first":80,"second":111,"amount":-0.2666015625},{"first":80,"second":113,"amount":-0.2666015625},{"first":80,"second":118,"amount":0.3076171875},{"first":80,"second":121,"amount":0.3076171875},{"first":81,"second":84,"amount":-0.6767578125},{"first":81,"second":86,"amount":-0.57421875},{"first":81,"second":87,"amount":-0.41015625},{"first":81,"second":89,"amount":-0.7177734375},{"first":82,"second":84,"amount":-1.025390625},{"first":82,"second":86,"amount":-0.3896484375},{"first":82,"second":89,"amount":-0.984375},{"first":84,"second":44,"amount":-5.291015625},{"first":84,"second":45,"amount":-5.578125},{"first":84,"second":46,"amount":-5.291015625},{"first":84,"second":65,"amount":-2.4609375},{"first":84,"second":67,"amount":-0.57421875},{"first":84,"second":71,"amount":-0.57421875},{"first":84,"second":74,"amount":-4.4296875},{"first":84,"second":79,"amount":-0.57421875},{"first":84,"second":81,"amount":-0.57421875},{"first":84,"second":83,"amount":-0.328125},{"first":84,"second":84,"amount":0.328125},{"first":84,"second":86,"amount":0.328125},{"first":84,"second":87,"amount":0.3076171875},{"first":84,"second":89,"amount":0.328125},{"first":84,"second":97,"amount":-3.4453125},{"first":84,"second":99,"amount":-1.8251953125},{"first":84,"second":100,"amount":-1.8251953125},{"first":84,"second":101,"amount":-1.8251953125},{"first":84,"second":103,"amount":-1.8251953125},{"first":84,"second":109,"amount":-1.8251953125},{"first":84,"second":110,"amount":-1.8251953125},{"first":84,"second":111,"amount":-4.265625},{"first":84,"second":112,"amount":-1.8251953125},{"first":84,"second":113,"amount":-1.8251953125},{"first":84,"second":115,"amount":-1.55859375},{"first":84,"second":117,"amount":-1.3330078125},{"first":84,"second":118,"amount":-1.681640625},{"first":84,"second":120,"amount":-1.5791015625},{"first":84,"second":121,"amount":-1.681640625},{"first":84,"second":122,"amount":-1.23046875},{"first":85,"second":65,"amount":-0.451171875},{"first":86,"second":44,"amount":-4.4091796875},{"first":86,"second":45,"amount":-3.2197265625},{"first":86,"second":46,"amount":-4.4091796875},{"first":86,"second":65,"amount":-1.5380859375},{"first":86,"second":67,"amount":-0.2666015625},{"first":86,"second":71,"amount":-0.2666015625},{"first":86,"second":79,"amount":-0.2666015625},{"first":86,"second":81,"amount":-0.2666015625},{"first":86,"second":97,"amount":-0.943359375},{"first":86,"second":99,"amount":-0.90234375},{"first":86,"second":100,"amount":-0.90234375},{"first":86,"second":101,"amount":-0.90234375},{"first":86,"second":103,"amount":-0.90234375},{"first":86,"second":111,"amount":-0.943359375},{"first":86,"second":113,"amount":-0.90234375},{"first":86,"second":117,"amount":-0.57421875},{"first":86,"second":118,"amount":-0.2255859375},{"first":86,"second":121,"amount":-0.2255859375},{"first":87,"second":44,"amount":-2.9326171875},{"first":87,"second":45,"amount":-1.23046875},{"first":87,"second":46,"amount":-2.9326171875},{"first":87,"second":65,"amount":-0.8818359375},{"first":87,"second":84,"amount":0.287109375},{"first":87,"second":97,"amount":-0.6767578125},{"first":87,"second":99,"amount":-0.6357421875},{"first":87,"second":100,"amount":-0.6357421875},{"first":87,"second":101,"amount":-0.6357421875},{"first":87,"second":103,"amount":-0.6357421875},{"first":87,"second":111,"amount":-0.6357421875},{"first":87,"second":113,"amount":-0.6357421875},{"first":87,"second":117,"amount":-0.3896484375},{"first":88,"second":45,"amount":-3.19921875},{"first":88,"second":67,"amount":-0.5126953125},{"first":88,"second":71,"amount":-0.5126953125},{"first":88,"second":79,"amount":-0.5126953125},{"first":88,"second":81,"amount":-0.5126953125},{"first":88,"second":86,"amount":0.287109375},{"first":88,"second":99,"amount":-0.533203125},{"first":88,"second":100,"amount":-0.533203125},{"first":88,"second":101,"amount":-0.533203125},{"first":88,"second":103,"amount":-0.533203125},{"first":88,"second":111,"amount":-0.4306640625},{"first":88,"second":113,"amount":-0.533203125},{"first":88,"second":117,"amount":-0.4306640625},{"first":88,"second":118,"amount":-0.6357421875},{"first":88,"second":121,"amount":-0.6357421875},{"first":89,"second":44,"amount":-4.7373046875},{"first":89,"second":45,"amount":-3.1171875},{"first":89,"second":46,"amount":-4.7373046875},{"first":89,"second":65,"amount":-3.076171875},{"first":89,"second":67,"amount":-0.5947265625},{"first":89,"second":71,"amount":-0.5947265625},{"first":89,"second":74,"amount":-1.96875},{"first":89,"second":79,"amount":-0.5947265625},{"first":89,"second":81,"amount":-0.5947265625},{"first":89,"second":83,"amount":-0.328125},{"first":89,"second":84,"amount":0.3486328125},{"first":89,"second":85,"amount":-1.96875},{"first":89,"second":86,"amount":0.369140625},{"first":89,"second":87,"amount":0.3486328125},{"first":89,"second":88,"amount":0.2666015625},{"first":89,"second":89,"amount":0.369140625},{"first":89,"second":97,"amount":-1.2919921875},{"first":89,"second":99,"amount":-1.3330078125},{"first":89,"second":100,"amount":-1.3330078125},{"first":89,"second":101,"amount":-1.3330078125},{"first":89,"second":103,"amount":-1.3330078125},{"first":89,"second":109,"amount":-0.8203125},{"first":89,"second":110,"amount":-0.8203125},{"first":89,"second":111,"amount":-1.3330078125},{"first":89,"second":112,"amount":-0.8203125},{"first":89,"second":113,"amount":-1.3330078125},{"first":89,"second":115,"amount":-1.189453125},{"first":89,"second":117,"amount":-0.7998046875},{"first":89,"second":118,"amount":-0.41015625},{"first":89,"second":120,"amount":-0.4716796875},{"first":89,"second":121,"amount":-0.41015625},{"first":89,"second":122,"amount":-0.615234375},{"first":90,"second":65,"amount":0.2666015625},{"first":90,"second":67,"amount":-0.533203125},{"first":90,"second":71,"amount":-0.533203125},{"first":90,"second":79,"amount":-0.533203125},{"first":90,"second":81,"amount":-0.533203125},{"first":90,"second":99,"amount":-0.4306640625},{"first":90,"second":100,"amount":-0.4306640625},{"first":90,"second":101,"amount":-0.4306640625},{"first":90,"second":103,"amount":-0.4306640625},{"first":90,"second":111,"amount":-0.4306640625},{"first":90,"second":113,"amount":-0.4306640625},{"first":90,"second":117,"amount":-0.3896484375},{"first":90,"second":118,"amount":-0.5537109375},{"first":90,"second":121,"amount":-0.5537109375},{"first":91,"second":74,"amount":-0.369140625},{"first":91,"second":85,"amount":-0.369140625},{"first":97,"second":34,"amount":-0.3486328125},{"first":97,"second":39,"amount":-0.3486328125},{"first":97,"second":118,"amount":-0.3076171875},{"first":97,"second":121,"amount":-0.3076171875},{"first":98,"second":34,"amount":-0.5947265625},{"first":98,"second":39,"amount":-0.5947265625},{"first":98,"second":118,"amount":-0.2255859375},{"first":98,"second":120,"amount":-0.3076171875},{"first":98,"second":121,"amount":-0.2255859375},{"first":98,"second":122,"amount":-0.3076171875},{"first":99,"second":34,"amount":-0.2255859375},{"first":99,"second":39,"amount":-0.2255859375},{"first":101,"second":34,"amount":-0.287109375},{"first":101,"second":39,"amount":-0.287109375},{"first":101,"second":118,"amount":-0.2666015625},{"first":101,"second":121,"amount":-0.2666015625},{"first":102,"second":34,"amount":0.328125},{"first":102,"second":39,"amount":0.328125},{"first":102,"second":41,"amount":0.41015625},{"first":102,"second":93,"amount":0.369140625},{"first":102,"second":99,"amount":-0.4921875},{"first":102,"second":100,"amount":-0.4921875},{"first":102,"second":101,"amount":-0.4921875},{"first":102,"second":103,"amount":-0.4921875},{"first":102,"second":113,"amount":-0.4921875},{"first":102,"second":125,"amount":0.3896484375},{"first":104,"second":34,"amount":-1.640625},{"first":104,"second":39,"amount":-1.640625},{"first":107,"second":99,"amount":-0.41015625},{"first":107,"second":100,"amount":-0.41015625},{"first":107,"second":101,"amount":-0.41015625},{"first":107,"second":103,"amount":-0.41015625},{"first":107,"second":113,"amount":-0.41015625},{"first":109,"second":34,"amount":-1.640625},{"first":109,"second":39,"amount":-1.640625},{"first":110,"second":34,"amount":-1.640625},{"first":110,"second":39,"amount":-1.640625},{"first":111,"second":34,"amount":-1.8046875},{"first":111,"second":39,"amount":-1.8046875},{"first":111,"second":118,"amount":-0.3076171875},{"first":111,"second":120,"amount":-0.4306640625},{"first":111,"second":121,"amount":-0.3076171875},{"first":111,"second":122,"amount":-0.328125},{"first":112,"second":34,"amount":-0.5947265625},{"first":112,"second":39,"amount":-0.5947265625},{"first":112,"second":118,"amount":-0.2255859375},{"first":112,"second":120,"amount":-0.3076171875},{"first":112,"second":121,"amount":-0.2255859375},{"first":112,"second":122,"amount":-0.3076171875},{"first":114,"second":34,"amount":0.328125},{"first":114,"second":39,"amount":0.328125},{"first":114,"second":44,"amount":-3.5478515625},{"first":114,"second":46,"amount":-3.5478515625},{"first":114,"second":97,"amount":-0.615234375},{"first":114,"second":99,"amount":-0.3896484375},{"first":114,"second":100,"amount":-0.3896484375},{"first":114,"second":101,"amount":-0.3896484375},{"first":114,"second":103,"amount":-0.3896484375},{"first":114,"second":111,"amount":-0.73828125},{"first":114,"second":113,"amount":-0.3896484375},{"first":114,"second":118,"amount":0.369140625},{"first":114,"second":121,"amount":0.369140625},{"first":116,"second":111,"amount":-0.615234375},{"first":118,"second":34,"amount":0.3076171875},{"first":118,"second":39,"amount":0.3076171875},{"first":118,"second":44,"amount":-3.4248046875},{"first":118,"second":46,"amount":-3.4248046875},{"first":118,"second":97,"amount":-0.3076171875},{"first":118,"second":99,"amount":-0.2666015625},{"first":118,"second":100,"amount":-0.2666015625},{"first":118,"second":101,"amount":-0.2666015625},{"first":118,"second":103,"amount":-0.2666015625},{"first":118,"second":111,"amount":-0.3076171875},{"first":118,"second":113,"amount":-0.2666015625},{"first":119,"second":44,"amount":-2.54296875},{"first":119,"second":46,"amount":-2.54296875},{"first":120,"second":99,"amount":-0.41015625},{"first":120,"second":100,"amount":-0.41015625},{"first":120,"second":101,"amount":-0.41015625},{"first":120,"second":103,"amount":-0.41015625},{"first":120,"second":111,"amount":-0.8203125},{"first":120,"second":113,"amount":-0.41015625},{"first":121,"second":34,"amount":0.3076171875},{"first":121,"second":39,"amount":0.3076171875},{"first":121,"second":44,"amount":-3.4248046875},{"first":121,"second":46,"amount":-3.4248046875},{"first":121,"second":97,"amount":-0.3076171875},{"first":121,"second":99,"amount":-0.2666015625},{"first":121,"second":100,"amount":-0.2666015625},{"first":121,"second":101,"amount":-0.2666015625},{"first":121,"second":103,"amount":-0.2666015625},{"first":121,"second":111,"amount":-0.3076171875},{"first":121,"second":113,"amount":-0.2666015625},{"first":122,"second":99,"amount":-0.328125},{"first":122,"second":100,"amount":-0.328125},{"first":122,"second":101,"amount":-0.328125},{"first":122,"second":103,"amount":-0.328125},{"first":122,"second":111,"amount":-0.328125},{"first":122,"second":113,"amount":-0.328125},{"first":123,"second":74,"amount":-0.41015625},{"first":123,"second":85,"amount":-0.41015625}]}')
}, function(t, e, n) {
    t.exports = n.p + "images/dot_default_2.png"
}, function(t, e, n) {
    t.exports = n.p + "images/dot_selected_2_2.png"
}, function(t, e, n) {
    t.exports = n.p + "images/line_default_2.png"
}, function(t, e, n) {
    t.exports = n.p + "images/line_selected_2_2.png"
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i = n(446),
        o = n(447),
        a = n(448),
        s = n(450),
        u = function(t) {
            o(!1, t)
        },
        c = String.prototype.replace,
        l = String.prototype.split,
        h = function(t) {
            var e = t % 100,
                n = e % 10;
            return 11 !== e && 1 === n ? 0 : 2 <= n && n <= 4 && !(e >= 12 && e <= 14) ? 1 : 2
        },
        f = {
            pluralTypes: {
                arabic: function(t) {
                    if (t < 3) return t;
                    var e = t % 100;
                    return e >= 3 && e <= 10 ? 3 : e >= 11 ? 4 : 5
                },
                bosnian_serbian: h,
                chinese: function() {
                    return 0
                },
                croatian: h,
                french: function(t) {
                    return t > 1 ? 1 : 0
                },
                german: function(t) {
                    return 1 !== t ? 1 : 0
                },
                russian: h,
                lithuanian: function(t) {
                    return t % 10 == 1 && t % 100 != 11 ? 0 : t % 10 >= 2 && t % 10 <= 9 && (t % 100 < 11 || t % 100 > 19) ? 1 : 2
                },
                czech: function(t) {
                    return 1 === t ? 0 : t >= 2 && t <= 4 ? 1 : 2
                },
                polish: function(t) {
                    if (1 === t) return 0;
                    var e = t % 10;
                    return 2 <= e && e <= 4 && (t % 100 < 10 || t % 100 >= 20) ? 1 : 2
                },
                icelandic: function(t) {
                    return t % 10 != 1 || t % 100 == 11 ? 1 : 0
                },
                slovenian: function(t) {
                    var e = t % 100;
                    return 1 === e ? 0 : 2 === e ? 1 : 3 === e || 4 === e ? 2 : 3
                }
            },
            pluralTypeToLanguages: {
                arabic: ["ar"],
                bosnian_serbian: ["bs-Latn-BA", "bs-Cyrl-BA", "srl-RS", "sr-RS"],
                chinese: ["id", "id-ID", "ja", "ko", "ko-KR", "lo", "ms", "th", "th-TH", "zh"],
                croatian: ["hr", "hr-HR"],
                german: ["fa", "da", "de", "en", "es", "fi", "el", "he", "hi-IN", "hu", "hu-HU", "it", "nl", "no", "pt", "sv", "tr"],
                french: ["fr", "tl", "pt-br"],
                russian: ["ru", "ru-RU"],
                lithuanian: ["lt"],
                czech: ["cs", "cs-CZ", "sk"],
                polish: ["pl"],
                icelandic: ["is"],
                slovenian: ["sl-SL"]
            }
        };

    function p(t, e) {
        var n, r, o = (n = t.pluralTypeToLanguages, r = {}, i(n, (function(t, e) {
            i(t, (function(t) {
                r[t] = e
            }))
        })), r);
        return o[e] || o[l.call(e, /-/, 1)[0]] || o.en
    }

    function d(t) {
        return t.replace(/[.*+?^${}()|[\]\\]/g, "\\$&")
    }
    var m = /%\{(.*?)\}/g;

    function v(t, e, n, r, i) {
        if ("string" != typeof t) throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");
        if (null == e) return t;
        var o = t,
            u = r || m,
            h = i || f,
            d = "number" == typeof e ? {
                smart_count: e
            } : e;
        if (null != d.smart_count && o) {
            var v = l.call(o, "||||");
            o = s(v[function(t, e, n) {
                return t.pluralTypes[p(t, e)](n)
            }(h, n || "en", d.smart_count)] || v[0])
        }
        return o = c.call(o, u, (function(t, e) {
            return a(d, e) && null != d[e] ? d[e] : t
        }))
    }

    function y(t) {
        var e = t || {};
        this.phrases = {}, this.extend(e.phrases || {}), this.currentLocale = e.locale || "en";
        var n = e.allowMissing ? v : null;
        this.onMissingKey = "function" == typeof e.onMissingKey ? e.onMissingKey : n, this.warn = e.warn || u, this.tokenRegex = function(t) {
            var e = t && t.prefix || "%{",
                n = t && t.suffix || "}";
            if ("||||" === e || "||||" === n) throw new RangeError('"||||" token is reserved for pluralization');
            return new RegExp(d(e) + "(.*?)" + d(n), "g")
        }(e.interpolation), this.pluralRules = e.pluralRules || f
    }
    y.prototype.locale = function(t) {
        return t && (this.currentLocale = t), this.currentLocale
    }, y.prototype.extend = function(t, e) {
        i(t, (function(t, n) {
            var i = e ? e + "." + n : n;
            "object" === r(t) ? this.extend(t, i) : this.phrases[i] = t
        }), this)
    }, y.prototype.unset = function(t, e) {
        "string" == typeof t ? delete this.phrases[t] : i(t, (function(t, n) {
            var i = e ? e + "." + n : n;
            "object" === r(t) ? this.unset(t, i) : delete this.phrases[i]
        }), this)
    }, y.prototype.clear = function() {
        this.phrases = {}
    }, y.prototype.replace = function(t) {
        this.clear(), this.extend(t)
    }, y.prototype.t = function(t, e) {
        var n, r, i = null == e ? {} : e;
        if ("string" == typeof this.phrases[t]) n = this.phrases[t];
        else if ("string" == typeof i._) n = i._;
        else if (this.onMissingKey) {
            r = (0, this.onMissingKey)(t, i, this.currentLocale, this.tokenRegex, this.pluralRules)
        } else this.warn('Missing translation for key: "' + t + '"'), r = t;
        return "string" == typeof n && (r = v(n, i, this.currentLocale, this.tokenRegex, this.pluralRules)), r
    }, y.prototype.has = function(t) {
        return a(this.phrases, t)
    }, y.transformPhrase = function(t, e, n) {
        return v(t, e, n)
    }, t.exports = y
}, function(t, e, n) {
    (function(t) {
        var r;

        function i(t) {
            return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            } : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            })(t)
        }! function(o, a) {
            "use strict";
            var s = "model",
                u = "name",
                c = "type",
                l = "vendor",
                h = "version",
                f = "mobile",
                p = "tablet",
                d = "smarttv",
                m = {
                    extend: function(t, e) {
                        var n = {};
                        for (var r in t) e[r] && e[r].length % 2 == 0 ? n[r] = e[r].concat(t[r]) : n[r] = t[r];
                        return n
                    },
                    has: function(t, e) {
                        return "string" == typeof t && -1 !== e.toLowerCase().indexOf(t.toLowerCase())
                    },
                    lowerize: function(t) {
                        return t.toLowerCase()
                    },
                    major: function(t) {
                        return "string" === i(t) ? t.replace(/[^\d\.]/g, "").split(".")[0] : void 0
                    },
                    trim: function(t) {
                        return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "")
                    }
                },
                v = {
                    rgx: function(t, e) {
                        for (var n, r, o, a, s, u, c = 0; c < e.length && !s;) {
                            var l = e[c],
                                h = e[c + 1];
                            for (n = r = 0; n < l.length && !s;)
                                if (s = l[n++].exec(t))
                                    for (o = 0; o < h.length; o++) u = s[++r], "object" === i(a = h[o]) && a.length > 0 ? 2 == a.length ? "function" == i(a[1]) ? this[a[0]] = a[1].call(this, u) : this[a[0]] = a[1] : 3 == a.length ? "function" !== i(a[1]) || a[1].exec && a[1].test ? this[a[0]] = u ? u.replace(a[1], a[2]) : void 0 : this[a[0]] = u ? a[1].call(this, u, a[2]) : void 0 : 4 == a.length && (this[a[0]] = u ? a[3].call(this, u.replace(a[1], a[2])) : void 0) : this[a] = u || void 0;
                            c += 2
                        }
                    },
                    str: function(t, e) {
                        for (var n in e)
                            if ("object" === i(e[n]) && e[n].length > 0) {
                                for (var r = 0; r < e[n].length; r++)
                                    if (m.has(e[n][r], t)) return "?" === n ? void 0 : n
                            } else if (m.has(e[n], t)) return "?" === n ? void 0 : n;
                        return t
                    }
                },
                y = {
                    browser: {
                        oldsafari: {
                            version: {
                                "1.0": "/8",
                                1.2: "/1",
                                1.3: "/3",
                                "2.0": "/412",
                                "2.0.2": "/416",
                                "2.0.3": "/417",
                                "2.0.4": "/419",
                                "?": "/"
                            }
                        }
                    },
                    device: {
                        amazon: {
                            model: {
                                "Fire Phone": ["SD", "KF"]
                            }
                        },
                        sprint: {
                            model: {
                                "Evo Shift 4G": "7373KT"
                            },
                            vendor: {
                                HTC: "APA",
                                Sprint: "Sprint"
                            }
                        }
                    },
                    os: {
                        windows: {
                            version: {
                                ME: "4.90",
                                "NT 3.11": "NT3.51",
                                "NT 4.0": "NT4.0",
                                2e3: "NT 5.0",
                                XP: ["NT 5.1", "NT 5.2"],
                                Vista: "NT 6.0",
                                7: "NT 6.1",
                                8: "NT 6.2",
                                8.1: "NT 6.3",
                                10: ["NT 6.4", "NT 10.0"],
                                RT: "ARM"
                            }
                        }
                    }
                },
                g = {
                    browser: [
                        [/(opera\smini)\/([\w\.-]+)/i, /(opera\s[mobiletab]+).+version\/([\w\.-]+)/i, /(opera).+version\/([\w\.]+)/i, /(opera)[\/\s]+([\w\.]+)/i],
                        [u, h],
                        [/(opios)[\/\s]+([\w\.]+)/i],
                        [
                            [u, "Opera Mini"], h
                        ],
                        [/\s(opr)\/([\w\.]+)/i],
                        [
                            [u, "Opera"], h
                        ],
                        [/(kindle)\/([\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i, /(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i, /(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i, /(?:ms|\()(ie)\s([\w\.]+)/i, /(rekonq)\/([\w\.]*)/i, /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],
                        [u, h],
                        [/(konqueror)\/([\w\.]+)/i],
                        [
                            [u, "Konqueror"], h
                        ],
                        [/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],
                        [
                            [u, "IE"], h
                        ],
                        [/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],
                        [
                            [u, "Edge"], h
                        ],
                        [/(yabrowser)\/([\w\.]+)/i],
                        [
                            [u, "Yandex"], h
                        ],
                        [/(Avast)\/([\w\.]+)/i],
                        [
                            [u, "Avast Secure Browser"], h
                        ],
                        [/(AVG)\/([\w\.]+)/i],
                        [
                            [u, "AVG Secure Browser"], h
                        ],
                        [/(puffin)\/([\w\.]+)/i],
                        [
                            [u, "Puffin"], h
                        ],
                        [/(focus)\/([\w\.]+)/i],
                        [
                            [u, "Firefox Focus"], h
                        ],
                        [/(opt)\/([\w\.]+)/i],
                        [
                            [u, "Opera Touch"], h
                        ],
                        [/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],
                        [
                            [u, "UCBrowser"], h
                        ],
                        [/(comodo_dragon)\/([\w\.]+)/i],
                        [
                            [u, /_/g, " "], h
                        ],
                        [/(windowswechat qbcore)\/([\w\.]+)/i],
                        [
                            [u, "WeChat(Win) Desktop"], h
                        ],
                        [/(micromessenger)\/([\w\.]+)/i],
                        [
                            [u, "WeChat"], h
                        ],
                        [/(brave)\/([\w\.]+)/i],
                        [
                            [u, "Brave"], h
                        ],
                        [/(qqbrowserlite)\/([\w\.]+)/i],
                        [u, h],
                        [/(QQ)\/([\d\.]+)/i],
                        [u, h],
                        [/m?(qqbrowser)[\/\s]?([\w\.]+)/i],
                        [u, h],
                        [/(baiduboxapp)[\/\s]?([\w\.]+)/i],
                        [u, h],
                        [/(2345Explorer)[\/\s]?([\w\.]+)/i],
                        [u, h],
                        [/(MetaSr)[\/\s]?([\w\.]+)/i],
                        [u],
                        [/(LBBROWSER)/i],
                        [u],
                        [/xiaomi\/miuibrowser\/([\w\.]+)/i],
                        [h, [u, "MIUI Browser"]],
                        [/;fbav\/([\w\.]+);/i],
                        [h, [u, "Facebook"]],
                        [/safari\s(line)\/([\w\.]+)/i, /android.+(line)\/([\w\.]+)\/iab/i],
                        [u, h],
                        [/headlesschrome(?:\/([\w\.]+)|\s)/i],
                        [h, [u, "Chrome Headless"]],
                        [/\swv\).+(chrome)\/([\w\.]+)/i],
                        [
                            [u, /(.+)/, "$1 WebView"], h
                        ],
                        [/((?:oculus|samsung)browser)\/([\w\.]+)/i],
                        [
                            [u, /(.+(?:g|us))(.+)/, "$1 $2"], h
                        ],
                        [/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],
                        [h, [u, "Android Browser"]],
                        [/(sailfishbrowser)\/([\w\.]+)/i],
                        [
                            [u, "Sailfish Browser"], h
                        ],
                        [/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],
                        [u, h],
                        [/(dolfin)\/([\w\.]+)/i],
                        [
                            [u, "Dolphin"], h
                        ],
                        [/(qihu|qhbrowser|qihoobrowser|360browser)/i],
                        [
                            [u, "360 Browser"]
                        ],
                        [/((?:android.+)crmo|crios)\/([\w\.]+)/i],
                        [
                            [u, "Chrome"], h
                        ],
                        [/(coast)\/([\w\.]+)/i],
                        [
                            [u, "Opera Coast"], h
                        ],
                        [/fxios\/([\w\.-]+)/i],
                        [h, [u, "Firefox"]],
                        [/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],
                        [h, [u, "Mobile Safari"]],
                        [/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],
                        [h, u],
                        [/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],
                        [
                            [u, "GSA"], h
                        ],
                        [/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],
                        [u, [h, v.str, y.browser.oldsafari.version]],
                        [/(webkit|khtml)\/([\w\.]+)/i],
                        [u, h],
                        [/(navigator|netscape)\/([\w\.-]+)/i],
                        [
                            [u, "Netscape"], h
                        ],
                        [/(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i, /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i, /(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i, /(links)\s\(([\w\.]+)/i, /(gobrowser)\/?([\w\.]*)/i, /(ice\s?browser)\/v?([\w\._]+)/i, /(mosaic)[\/\s]([\w\.]+)/i],
                        [u, h]
                    ],
                    cpu: [
                        [/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],
                        [
                            ["architecture", "amd64"]
                        ],
                        [/(ia32(?=;))/i],
                        [
                            ["architecture", m.lowerize]
                        ],
                        [/((?:i[346]|x)86)[;\)]/i],
                        [
                            ["architecture", "ia32"]
                        ],
                        [/windows\s(ce|mobile);\sppc;/i],
                        [
                            ["architecture", "arm"]
                        ],
                        [/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],
                        [
                            ["architecture", /ower/, "", m.lowerize]
                        ],
                        [/(sun4\w)[;\)]/i],
                        [
                            ["architecture", "sparc"]
                        ],
                        [/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],
                        [
                            ["architecture", m.lowerize]
                        ]
                    ],
                    device: [
                        [/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],
                        [s, l, [c, p]],
                        [/applecoremedia\/[\w\.]+ \((ipad)/],
                        [s, [l, "Apple"],
                            [c, p]
                        ],
                        [/(apple\s{0,1}tv)/i],
                        [
                            [s, "Apple TV"],
                            [l, "Apple"],
                            [c, d]
                        ],
                        [/(archos)\s(gamepad2?)/i, /(hp).+(touchpad)/i, /(hp).+(tablet)/i, /(kindle)\/([\w\.]+)/i, /\s(nook)[\w\s]+build\/(\w+)/i, /(dell)\s(strea[kpr\s\d]*[\dko])/i],
                        [l, s, [c, p]],
                        [/(kf[A-z]+)\sbuild\/.+silk\//i],
                        [s, [l, "Amazon"],
                            [c, p]
                        ],
                        [/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],
                        [
                            [s, v.str, y.device.amazon.model],
                            [l, "Amazon"],
                            [c, f]
                        ],
                        [/android.+aft([bms])\sbuild/i],
                        [s, [l, "Amazon"],
                            [c, d]
                        ],
                        [/\((ip[honed|\s\w*]+);.+(apple)/i],
                        [s, l, [c, f]],
                        [/\((ip[honed|\s\w*]+);/i],
                        [s, [l, "Apple"],
                            [c, f]
                        ],
                        [/(blackberry)[\s-]?(\w+)/i, /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i, /(hp)\s([\w\s]+\w)/i, /(asus)-?(\w+)/i],
                        [l, s, [c, f]],
                        [/\(bb10;\s(\w+)/i],
                        [s, [l, "BlackBerry"],
                            [c, f]
                        ],
                        [/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],
                        [s, [l, "Asus"],
                            [c, p]
                        ],
                        [/(sony)\s(tablet\s[ps])\sbuild\//i, /(sony)?(?:sgp.+)\sbuild\//i],
                        [
                            [l, "Sony"],
                            [s, "Xperia Tablet"],
                            [c, p]
                        ],
                        [/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],
                        [s, [l, "Sony"],
                            [c, f]
                        ],
                        [/\s(ouya)\s/i, /(nintendo)\s([wids3u]+)/i],
                        [l, s, [c, "console"]],
                        [/android.+;\s(shield)\sbuild/i],
                        [s, [l, "Nvidia"],
                            [c, "console"]
                        ],
                        [/(playstation\s[34portablevi]+)/i],
                        [s, [l, "Sony"],
                            [c, "console"]
                        ],
                        [/(sprint\s(\w+))/i],
                        [
                            [l, v.str, y.device.sprint.vendor],
                            [s, v.str, y.device.sprint.model],
                            [c, f]
                        ],
                        [/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i, /(zte)-(\w*)/i, /(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],
                        [l, [s, /_/g, " "],
                            [c, f]
                        ],
                        [/(nexus\s9)/i],
                        [s, [l, "HTC"],
                            [c, p]
                        ],
                        [/d\/huawei([\w\s-]+)[;\)]/i, /(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],
                        [s, [l, "Huawei"],
                            [c, f]
                        ],
                        [/android.+(bah2?-a?[lw]\d{2})/i],
                        [s, [l, "Huawei"],
                            [c, p]
                        ],
                        [/(microsoft);\s(lumia[\s\w]+)/i],
                        [l, s, [c, f]],
                        [/[\s\(;](xbox(?:\sone)?)[\s\);]/i],
                        [s, [l, "Microsoft"],
                            [c, "console"]
                        ],
                        [/(kin\.[onetw]{3})/i],
                        [
                            [s, /\./g, " "],
                            [l, "Microsoft"],
                            [c, f]
                        ],
                        [/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i, /mot[\s-]?(\w*)/i, /(XT\d{3,4}) build\//i, /(nexus\s6)/i],
                        [s, [l, "Motorola"],
                            [c, f]
                        ],
                        [/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],
                        [s, [l, "Motorola"],
                            [c, p]
                        ],
                        [/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],
                        [
                            [l, m.trim],
                            [s, m.trim],
                            [c, d]
                        ],
                        [/hbbtv.+maple;(\d+)/i],
                        [
                            [s, /^/, "SmartTV"],
                            [l, "Samsung"],
                            [c, d]
                        ],
                        [/\(dtv[\);].+(aquos)/i],
                        [s, [l, "Sharp"],
                            [c, d]
                        ],
                        [/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i, /((SM-T\w+))/i],
                        [
                            [l, "Samsung"], s, [c, p]
                        ],
                        [/smart-tv.+(samsung)/i],
                        [l, [c, d], s],
                        [/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i, /(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i, /sec-((sgh\w+))/i],
                        [
                            [l, "Samsung"], s, [c, f]
                        ],
                        [/sie-(\w*)/i],
                        [s, [l, "Siemens"],
                            [c, f]
                        ],
                        [/(maemo|nokia).*(n900|lumia\s\d+)/i, /(nokia)[\s_-]?([\w-]*)/i],
                        [
                            [l, "Nokia"], s, [c, f]
                        ],
                        [/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],
                        [s, [l, "Acer"],
                            [c, p]
                        ],
                        [/android.+([vl]k\-?\d{3})\s+build/i],
                        [s, [l, "LG"],
                            [c, p]
                        ],
                        [/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],
                        [
                            [l, "LG"], s, [c, p]
                        ],
                        [/(lg) netcast\.tv/i],
                        [l, s, [c, d]],
                        [/(nexus\s[45])/i, /lg[e;\s\/-]+(\w*)/i, /android.+lg(\-?[\d\w]+)\s+build/i],
                        [s, [l, "LG"],
                            [c, f]
                        ],
                        [/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],
                        [l, s, [c, p]],
                        [/android.+(ideatab[a-z0-9\-\s]+)/i],
                        [s, [l, "Lenovo"],
                            [c, p]
                        ],
                        [/(lenovo)[_\s-]?([\w-]+)/i],
                        [l, s, [c, f]],
                        [/linux;.+((jolla));/i],
                        [l, s, [c, f]],
                        [/((pebble))app\/[\d\.]+\s/i],
                        [l, s, [c, "wearable"]],
                        [/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],
                        [l, s, [c, f]],
                        [/crkey/i],
                        [
                            [s, "Chromecast"],
                            [l, "Google"],
                            [c, d]
                        ],
                        [/android.+;\s(glass)\s\d/i],
                        [s, [l, "Google"],
                            [c, "wearable"]
                        ],
                        [/android.+;\s(pixel c)[\s)]/i],
                        [s, [l, "Google"],
                            [c, p]
                        ],
                        [/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],
                        [s, [l, "Google"],
                            [c, f]
                        ],
                        [/android.+;\s(\w+)\s+build\/hm\1/i, /android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i, /android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i, /android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],
                        [
                            [s, /_/g, " "],
                            [l, "Xiaomi"],
                            [c, f]
                        ],
                        [/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],
                        [
                            [s, /_/g, " "],
                            [l, "Xiaomi"],
                            [c, p]
                        ],
                        [/android.+;\s(m[1-5]\snote)\sbuild/i],
                        [s, [l, "Meizu"],
                            [c, f]
                        ],
                        [/(mz)-([\w-]{2,})/i],
                        [
                            [l, "Meizu"], s, [c, f]
                        ],
                        [/android.+a000(1)\s+build/i, /android.+oneplus\s(a\d{4})[\s)]/i],
                        [s, [l, "OnePlus"],
                            [c, f]
                        ],
                        [/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],
                        [s, [l, "RCA"],
                            [c, p]
                        ],
                        [/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],
                        [s, [l, "Dell"],
                            [c, p]
                        ],
                        [/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],
                        [s, [l, "Verizon"],
                            [c, p]
                        ],
                        [/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],
                        [
                            [l, "Barnes & Noble"], s, [c, p]
                        ],
                        [/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],
                        [s, [l, "NuVision"],
                            [c, p]
                        ],
                        [/android.+;\s(k88)\sbuild/i],
                        [s, [l, "ZTE"],
                            [c, p]
                        ],
                        [/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],
                        [s, [l, "Swiss"],
                            [c, f]
                        ],
                        [/android.+[;\/]\s*(zur\d{3})\s+build/i],
                        [s, [l, "Swiss"],
                            [c, p]
                        ],
                        [/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],
                        [s, [l, "Zeki"],
                            [c, p]
                        ],
                        [/(android).+[;\/]\s+([YR]\d{2})\s+build/i, /android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],
                        [
                            [l, "Dragon Touch"], s, [c, p]
                        ],
                        [/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],
                        [s, [l, "Insignia"],
                            [c, p]
                        ],
                        [/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],
                        [s, [l, "NextBook"],
                            [c, p]
                        ],
                        [/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],
                        [
                            [l, "Voice"], s, [c, f]
                        ],
                        [/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],
                        [
                            [l, "LvTel"], s, [c, f]
                        ],
                        [/android.+;\s(PH-1)\s/i],
                        [s, [l, "Essential"],
                            [c, f]
                        ],
                        [/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],
                        [s, [l, "Envizen"],
                            [c, p]
                        ],
                        [/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],
                        [l, s, [c, p]],
                        [/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],
                        [s, [l, "MachSpeed"],
                            [c, p]
                        ],
                        [/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],
                        [l, s, [c, p]],
                        [/android.+[;\/]\s*TU_(1491)\s+build/i],
                        [s, [l, "Rotor"],
                            [c, p]
                        ],
                        [/android.+(KS(.+))\s+build/i],
                        [s, [l, "Amazon"],
                            [c, p]
                        ],
                        [/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],
                        [l, s, [c, p]],
                        [/\s(tablet|tab)[;\/]/i, /\s(mobile)(?:[;\/]|\ssafari)/i],
                        [
                            [c, m.lowerize], l, s
                        ],
                        [/[\s\/\(](smart-?tv)[;\)]/i],
                        [
                            [c, d]
                        ],
                        [/(android[\w\.\s\-]{0,9});.+build/i],
                        [s, [l, "Generic"]]
                    ],
                    engine: [
                        [/windows.+\sedge\/([\w\.]+)/i],
                        [h, [u, "EdgeHTML"]],
                        [/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],
                        [h, [u, "Blink"]],
                        [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i, /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i, /(icab)[\/\s]([23]\.[\d\.]+)/i],
                        [u, h],
                        [/rv\:([\w\.]{1,9}).+(gecko)/i],
                        [h, u]
                    ],
                    os: [
                        [/microsoft\s(windows)\s(vista|xp)/i],
                        [u, h],
                        [/(windows)\snt\s6\.2;\s(arm)/i, /(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i, /(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],
                        [u, [h, v.str, y.os.windows.version]],
                        [/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],
                        [
                            [u, "Windows"],
                            [h, v.str, y.os.windows.version]
                        ],
                        [/\((bb)(10);/i],
                        [
                            [u, "BlackBerry"], h
                        ],
                        [/(blackberry)\w*\/?([\w\.]*)/i, /(tizen|kaios)[\/\s]([\w\.]+)/i, /(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],
                        [u, h],
                        [/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],
                        [
                            [u, "Symbian"], h
                        ],
                        [/\((series40);/i],
                        [u],
                        [/mozilla.+\(mobile;.+gecko.+firefox/i],
                        [
                            [u, "Firefox OS"], h
                        ],
                        [/(nintendo|playstation)\s([wids34portablevu]+)/i, /(mint)[\/\s\(]?(\w*)/i, /(mageia|vectorlinux)[;\s]/i, /(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i, /(hurd|linux)\s?([\w\.]*)/i, /(gnu)\s?([\w\.]*)/i],
                        [u, h],
                        [/(cros)\s[\w]+\s([\w\.]+\w)/i],
                        [
                            [u, "Chromium OS"], h
                        ],
                        [/(sunos)\s?([\w\.\d]*)/i],
                        [
                            [u, "Solaris"], h
                        ],
                        [/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],
                        [u, h],
                        [/(haiku)\s(\w+)/i],
                        [u, h],
                        [/cfnetwork\/.+darwin/i, /ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],
                        [
                            [h, /_/g, "."],
                            [u, "iOS"]
                        ],
                        [/(mac\sos\sx)\s?([\w\s\.]*)/i, /(macintosh|mac(?=_powerpc)\s)/i],
                        [
                            [u, "Mac OS"],
                            [h, /_/g, "."]
                        ],
                        [/((?:open)?solaris)[\/\s-]?([\w\.]*)/i, /(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i, /(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i, /(unix)\s?([\w\.]*)/i],
                        [u, h]
                    ]
                },
                b = function t(e, n) {
                    if ("object" === i(e) && (n = e, e = void 0), !(this instanceof t)) return new t(e, n).getResult();
                    var r = e || (o && o.navigator && o.navigator.userAgent ? o.navigator.userAgent : ""),
                        a = n ? m.extend(g, n) : g;
                    return this.getBrowser = function() {
                        var t = {
                            name: void 0,
                            version: void 0
                        };
                        return v.rgx.call(t, r, a.browser), t.major = m.major(t.version), t
                    }, this.getCPU = function() {
                        var t = {
                            architecture: void 0
                        };
                        return v.rgx.call(t, r, a.cpu), t
                    }, this.getDevice = function() {
                        var t = {
                            vendor: void 0,
                            model: void 0,
                            type: void 0
                        };
                        return v.rgx.call(t, r, a.device), t
                    }, this.getEngine = function() {
                        var t = {
                            name: void 0,
                            version: void 0
                        };
                        return v.rgx.call(t, r, a.engine), t
                    }, this.getOS = function() {
                        var t = {
                            name: void 0,
                            version: void 0
                        };
                        return v.rgx.call(t, r, a.os), t
                    }, this.getResult = function() {
                        return {
                            ua: this.getUA(),
                            browser: this.getBrowser(),
                            engine: this.getEngine(),
                            os: this.getOS(),
                            device: this.getDevice(),
                            cpu: this.getCPU()
                        }
                    }, this.getUA = function() {
                        return r
                    }, this.setUA = function(t) {
                        return r = t, this
                    }, this
                };
            b.VERSION = "0.7.21", b.BROWSER = {
                NAME: u,
                MAJOR: "major",
                VERSION: h
            }, b.CPU = {
                ARCHITECTURE: "architecture"
            }, b.DEVICE = {
                MODEL: s,
                VENDOR: l,
                TYPE: c,
                CONSOLE: "console",
                MOBILE: f,
                SMARTTV: d,
                TABLET: p,
                WEARABLE: "wearable",
                EMBEDDED: "embedded"
            }, b.ENGINE = {
                NAME: u,
                VERSION: h
            }, b.OS = {
                NAME: u,
                VERSION: h
            }, "undefined" !== i(e) ? ("undefined" !== i(t) && t.exports && (e = t.exports = b), e.UAParser = b) : void 0 === (r = function() {
                return b
            }.call(e, n, e, t)) || (t.exports = r);
            var _ = o && (o.jQuery || o.Zepto);
            if (_ && !_.ua) {
                var w = new b;
                _.ua = w.getResult(), _.ua.get = function() {
                    return w.getUA()
                }, _.ua.set = function(t) {
                    w.setUA(t);
                    var e = w.getResult();
                    for (var n in e) _.ua[n] = e[n]
                }
            }
        }("object" === ("undefined" == typeof window ? "undefined" : i(window)) ? window : this)
    }).call(this, n(304)(t))
}, function(t, e, n) {
    "use strict";
    n(350), n(354), n(373), n(377), n(351), n(417);
    var r, i = n(38),
        o = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        a = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(o(arguments[e]));
            return t
        },
        s = function() {
            function t(t) {
                this.fetchedModules = [], this.engine = t, this.messageBus = t.msgBus, this.market = new u(t.market), this.commandBinder = t.commandBinder, this.waitForModule = t.waitForModule.bind(t), this.getModuleByParent = t.getModuleByParent.bind(t), this.getModuleSync = t.getModuleSync.bind(t), this.addComponent = t.addComponent.bind(t), this.getComponentByType = t.getComponentByType.bind(t), this.getComponents = t.getComponents.bind(t), this.removeComponent = t.removeComponent.bind(t), this.subscribe = t.subscribe.bind(t), this.unsubscribe = t.unsubscribe.bind(t), this.broadcast = t.broadcast.bind(t), this.claimRenderLayer = t.claimRenderLayer.bind(t), this.getRenderLayer = t.getRenderLayer.bind(t), this.disposeRenderLayer = t.disposeRenderLayer.bind(t), this.startGenerator = t.startGenerator.bind(t), this.stopGenerator = t.stopGenerator.bind(t), this.after = t.after.bind(t), this.deactivate = t.deactivate.bind(t), this.loadModules = t.loadModules.bind(t), this.unloadModule = t.unloadModule.bind(t), this.toggleRendering = t.toggleRendering.bind(t)
            }
            return t.prototype.getModule = function(t) {
                var e = this,
                    n = Date.now();
                return this.engine.getModule(t).then((function(t) {
                    var r = Date.now();
                    return e.fetchedModules.push({
                        moduleName: t.name,
                        isModule: !0,
                        startAwait: n,
                        finishAwait: r
                    }), t
                }))
            }, t.prototype.getLoadedDependencies = function() {
                return a(this.fetchedModules, this.market.getLoadedDependencies())
            }, Object.defineProperty(t.prototype, "msgBus", {
                get: function() {
                    return this.messageBus
                },
                enumerable: !0,
                configurable: !0
            }), t
        }(),
        u = function() {
            function t(t) {
                this.fetchedData = [], this.market = t, this.register = t.register.bind(t), this.unregister = t.unregister.bind(t), this.tryGetData = t.tryGetData.bind(t), this.getModuleNameFromData = t.getModuleNameFromData.bind(t)
            }
            return t.prototype.waitForData = function(t) {
                var e = this,
                    n = Date.now();
                return this.market.waitForData(t).then((function(t) {
                    var r = Date.now();
                    return e.fetchedData.push({
                        moduleName: e.getModuleNameFromData(Object(i.b)(t)),
                        isModule: !1,
                        startAwait: n,
                        finishAwait: r
                    }), t
                }))
            }, t.prototype.getLoadedDependencies = function() {
                return this.fetchedData
            }, t
        }(),
        c = n(33),
        l = n(3),
        h = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        f = new l.a("module-loader");
    ! function(t) {
        t[t.Registered = 0] = "Registered", t[t.Loading = 1] = "Loading", t[t.Initialized = 2] = "Initialized", t[t.Unloaded = 3] = "Unloaded"
    }(r || (r = {}));
    var p = function() {
            function t() {
                this.registeredModules = {}, this.typeLookup = new i.a(!0)
            }
            return t.prototype.registerModule = function(t, e) {
                var n = this.typeLookup.addIndexByType(t),
                    i = {
                        type: t,
                        es6ModulePromise: e,
                        ctorPromise: new c.a,
                        initPromise: new c.a,
                        state: r.Registered
                    };
                this.registeredModules[n] = i
            }, t.prototype.getTypeID = function(t) {
                var e = this.typeLookup.getIndexByType(t);
                if (-1 === e) throw Error("Trying to access unregistered Module");
                return e
            }, t.prototype.getTypeFromTypeID = function(t) {
                return this.typeLookup.getTypeByIndex(t)
            }, t.prototype.moduleRegistered = function(t) {
                return -1 !== this.typeLookup.getIndexByType(t)
            }, t.prototype.getModule = function(t) {
                var e = this.typeLookup.getIndexByType(t);
                if (-1 === e) throw Error("Trying to get " + Object(i.d)(t) + " before it was registered!");
                if (this.registeredModules[e].state === r.Unloaded) throw Error(Object(i.d)(t) + " module unloaded");
                return this.registeredModules[e].initPromise.nativePromise()
            }, t.prototype.getModuleByParent = function(t) {
                var e, n, r = this.typeLookup.getIndicesByType(t);
                if (0 === r.length) throw Error("No registered modules derive from " + Object(i.d)(t) + ".");
                var o = [];
                try {
                    for (var a = h(r), s = a.next(); !s.done; s = a.next()) {
                        var u = s.value;
                        o.push(this.registeredModules[u].initPromise.nativePromise())
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        s && !s.done && (n = a.return) && n.call(a)
                    } finally {
                        if (e) throw e.error
                    }
                }
                return Promise.race(o)
            }, t.prototype.getModuleSync = function(t) {
                var e = this.typeLookup.getIndexByType(t);
                if (-1 === e) throw new Error("Trying to get " + Object(i.d)(t) + " before it was registered!");
                var n = this.registeredModules[e];
                if (n.state !== r.Initialized) throw Error(Object(i.d)(t) + " module not loaded!");
                return n.module
            }, t.prototype.loadModule = function(t, e, n) {
                void 0 === n && (n = {});
                var o = this.typeLookup.getIndexByType(e);
                if (-1 === o) throw Error("Attempting to load an unregistered module");
                var a = this.registeredModules[o];
                if (a.state === r.Initialized) return a;
                if (a.state !== r.Registered && a.state !== r.Unloaded) throw Error(Object(i.d)(e) + " already loading");
                return a.state = r.Loading, a.es6ModulePromise().then((function(o) {
                    if (!o.default) throw new Error(Object(i.d)(e) + " has no default export during module loading");
                    var s = new o.default;
                    a.ctorPromise.resolve(s).then((function() {
                        var e = Date.now(),
                            i = !1;
                        setTimeout((function() {
                            i || f.debug(s.name + " init took over 2 seconds")
                        }), 2e3), s.init(n, t).then((function() {
                            f.debug(s.name + " init took " + (Date.now() - e) / 1e3 + " secs."), i = !0, a.state = r.Initialized, a.module = s, a.initPromise.resolve(s)
                        })).catch((function(t) {
                            a.initPromise.reject(t)
                        }))
                    }))
                })).catch((function(t) {
                    f.error("Failed to load es6Module for " + Object(i.d)(e) + ": " + t), a.initPromise.reject(t)
                })), a
            }, t.prototype.whenQueueEmpties = function() {
                var t = [];
                for (var e in this.registeredModules) {
                    var n = this.registeredModules[e];
                    n.state === r.Loading && t.push(n.initPromise)
                }
                return c.a.all(t).nativePromise()
            }, t.prototype.unloadModule = function(t) {
                var e = this.typeLookup.getIndexByType(t);
                if (-1 === e) throw Error("Attempting to unload unregistered module");
                var n = this.registeredModules[e];
                if (n.state === r.Unloaded || n.state === r.Registered) throw Error("Attempting to unload not-loaded module");
                n.state = r.Unloaded, n.ctorPromise = new c.a, n.initPromise = new c.a, n.module = void 0
            }, t
        }(),
        d = new l.a("market"),
        m = function() {
            function t(t) {
                this.typeLookup = new i.a, this.store = [], this.moduleRegistry = [], this.firstUpdatePromises = []
            }
            return t.prototype.register = function(t, e, n) {
                var r = this.typeLookup.getIndexByType(e, !0);
                if (this.moduleRegistry[r]) throw Error("Data can only be registered to one Module");
                this.moduleRegistry[r] = t, this.store[r] = n, n.commit(), this.firstUpdatePromises[r] && (this.firstUpdatePromises[r].resolve(this.store[r]), delete this.firstUpdatePromises[r])
            }, t.prototype.unregister = function(t, e) {
                var n = this.typeLookup.getIndexByType(e, !0);
                if (!this.moduleRegistry[n]) throw Error("No Data was registered to the Module");
                delete this.moduleRegistry[n], delete this.store[n]
            }, t.prototype.getData = function(t) {
                var e = this.typeLookup.getIndexByType(t);
                if (e in this.store) return this.store[e];
                throw Error("Data not present.")
            }, t.prototype.waitForData = function(t) {
                var e = this,
                    n = this.typeLookup.getIndexByType(t, !0);
                return n in this.store ? Promise.resolve(this.store[n]) : (this.firstUpdatePromises[n] || (this.firstUpdatePromises[n] = new c.a, setTimeout((function() {
                    l.a.level >= 3 && !(n in e.store) && d.debug("still waiting for " + (new t).name + "-data after 5 seconds")
                }), 5e3)), this.firstUpdatePromises[n].nativePromise())
            }, t.prototype.tryGetData = function(t) {
                try {
                    return this.getData(t)
                } catch (t) {
                    if ("Data not present." !== t.message) throw d.error("tryGetData", t.message), t
                }
                return null
            }, t.prototype.debugData = function() {
                var t = {};
                for (var e in this.moduleRegistry) {
                    var n = this.moduleRegistry[e];
                    n && (t[n.name] || (t[n.name] = []), t[n.name].push(this.store[e]))
                }
                return Object.freeze(t)
            }, t.prototype.getModuleNameFromData = function(t) {
                var e = this.typeLookup.getIndexByType(t);
                if (-1 !== e) {
                    var n = this.moduleRegistry[e];
                    if (n) return n.name
                }
                throw Error("Data not present.")
            }, t
        }(),
        v = n(242),
        y = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        g = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        b = function() {
            function t() {
                var t = this;
                this.typeLookup = new i.a, this.bindings = [], this.queuedCommands = {}, this.hookedCommands = {}, this.resetHooks = function() {
                    t.hookedCommands = {}
                }
            }
            return t.prototype.addBinding = function(t, e) {
                var n = this,
                    r = this.typeLookup.getIndexByType(t, !0);
                if (this.bindings[r]) throw Error("Command already bound to a callback");
                return this.bindings[r] = e, this.callQueuedCommands(r), {
                    renew: function() {
                        n.bindings[r] !== e && n.addBinding(t, e)
                    },
                    cancel: function() {
                        return n.removeBinding(t, e)
                    },
                    active: this.bindings[r] === e
                }
            }, t.prototype.removeBinding = function(t, e) {
                var n = this.typeLookup.getIndexByType(t);
                if (-1 === n) throw Error("Trying to unbind unbound command");
                if (this.bindings[n] !== e) throw Error("Trying to unbind unbound callback");
                delete this.bindings[n]
            }, t.prototype.issueCommand = function(t, e) {
                void 0 === e && (e = !0);
                var n = this.typeLookup.getIndexByInstance(t),
                    r = this.bindings[n];
                return r ? this.issueCommandHelper(t, n, r, e) : Promise.reject("Command not bound: " + t.id)
            }, t.prototype.issueCommandHelper = function(t, e, n, r) {
                return void 0 === r && (r = !0), this.hookedCommands[e] && !this.hookedCommands[e].resolving ? this.issueHookCommand(t, e) : n(t.payload)
            }, t.prototype.issueCommandWhenBound = function(t) {
                var e = this,
                    n = new c.a;
                return this.issueCommand(t).then((function(t) {
                    return n.resolve(t)
                })).catch((function(r) {
                    var i = e.typeLookup.getIndexByInstance(t, !0);
                    e.queuedCommands[i] || (e.queuedCommands[i] = []), e.queuedCommands[i].push({
                        command: t,
                        deferred: n
                    })
                })), n.nativePromise()
            }, t.prototype.callQueuedCommands = function(t) {
                var e = this,
                    n = [];
                this.queuedCommands[t] && (this.queuedCommands[t].forEach((function(t) {
                    n.push(e.issueCommand(t.command).then((function(e) {
                        return t.deferred.resolve(e)
                    })))
                })), Promise.all(n).then((function() {
                    delete e.queuedCommands[t]
                })))
            }, t.prototype.hookCommand = function(t, e, n) {
                var r = this.typeLookup.getIndexByType(t, !0);
                if (this.hookedCommands[r]) {
                    if (e && null !== this.hookedCommands[r].preCommandCallback) throw Error("Command " + t.name + " has already been pre hooked");
                    if (!e && null !== this.hookedCommands[r].postCommandCallback) throw Error("Command " + t.name + " has already been post hooked")
                } else this.hookedCommands[r] = {
                    preCommandCallback: null,
                    postCommandCallback: null,
                    resolving: !1
                };
                e ? this.hookedCommands[r].preCommandCallback = n : this.hookedCommands[r].postCommandCallback = n
            }, t.prototype.issueHookCommand = function(t, e) {
                return y(this, void 0, Promise, (function() {
                    var n, r, i, o, a, s, u;
                    return g(this, (function(c) {
                        switch (c.label) {
                            case 0:
                                n = this.hookedCommands[e], r = this.bindings[e], i = t.payload, o = n.preCommandCallback, a = n.postCommandCallback, c.label = 1;
                            case 1:
                                return c.trys.push([1, 7, , 8]), o ? [4, o(i)] : [3, 3];
                            case 2:
                                c.sent(), c.label = 3;
                            case 3:
                                return n.resolving = !0, [4, this.issueCommandHelper(t, e, r, !0)];
                            case 4:
                                return s = c.sent(), n.resolving = !1, a ? [4, a(i)] : [3, 6];
                            case 5:
                                c.sent(), c.label = 6;
                            case 6:
                                return [2, s];
                            case 7:
                                throw u = c.sent(), Error("Could not completely issueHookCommand - " + u);
                            case 8:
                                return [2]
                        }
                    }))
                }))
            }, t
        }(),
        _ = n(43),
        w = n(108),
        x = n(106),
        E = n(125),
        S = n(15),
        T = function() {
            function t() {
                this.phaseTimes = [], this.modules = {}, this.addAppPhase(S.a.UNINITIALIZED), window.profilingData = {
                    phaseTimes: this.phaseTimes,
                    modules: this.modules
                }
            }
            return t.prototype.addAppPhase = function(t) {
                this.phaseTimes[t] = Date.now()
            }, t.prototype.addModuleLoadTime = function(t, e, n, r) {
                var i = r.map((function(t) {
                        return t.moduleName
                    })).join(","),
                    o = r.reduce((function(t, e) {
                        return t + e.finishAwait - e.startAwait
                    }), 0) / (n - e) * 100;
                this.modules[t] = [t, t, null, e, n, null, o, i]
            }, t
        }(),
        M = n(66),
        O = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        P = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        A = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        L = new l.a("engine"),
        R = _.a.End,
        D = function() {
            function t(t) {
                void 0 === t && (t = !1);
                var e = this;
                this.moduleLookup = [], this.componentLookup = {}, this.deactivatedHack = !1, this.currentApplication = null, this.moduleProfiler = new T, this.commandBinder = new b, this.market = new m(this), this.messageBus = new v.a, this.engineGenerators = new w.d, this.layers = new x.a, this.moduleLoader = new p, this.afterPhasePromises = [], this.afterPhaseListenerCount = [], this.resetPromises(), this.subscribe(M.a, (function(t) {
                    return e.moduleProfiler.addAppPhase(t.phase)
                }))
            }
            return t.prototype.loadApplication = function(t, e, n) {
                return O(this, void 0, Promise, (function() {
                    var r, i, o, a, s, u, c, l, h, f, p, d, m, v, y, g, b, _;
                    return P(this, (function(w) {
                        switch (w.label) {
                            case 0:
                                if (t === this.currentApplication) throw Error("Application already loaded");
                                s = (this.currentApplication ? this.currentApplication.getManifest() : []).map((function(t) {
                                    return t.type
                                })), u = t.getManifest(), c = u.map((function(t) {
                                    return t.type
                                })), l = this.currentApplication, this.currentApplication = null, h = s.filter((function(t) {
                                    return -1 === c.indexOf(t)
                                }));
                                try {
                                    for (f = A(h), p = f.next(); !p.done; p = f.next()) d = p.value, this.unloadModule(d)
                                } catch (t) {
                                    r = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        p && !p.done && (i = f.return) && i.call(f)
                                    } finally {
                                        if (r) throw r.error
                                    }
                                }
                                m = u.filter((function(t) {
                                    return -1 === s.indexOf(t.type)
                                }));
                                try {
                                    for (v = A(m), y = v.next(); !y.done; y = v.next()) g = y.value, this.moduleLoader.moduleRegistered(g.type) || this.registerModule(g)
                                } catch (t) {
                                    o = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        y && !y.done && (a = v.return) && a.call(v)
                                    } finally {
                                        if (o) throw o.error
                                    }
                                }
                                if (!l) return [3, 4];
                                w.label = 1;
                            case 1:
                                return w.trys.push([1, 3, , 4]), [4, l.unload(this)];
                            case 2:
                                return w.sent(), [3, 4];
                            case 3:
                                return b = w.sent(), L.error(b), e(b), [3, 4];
                            case 4:
                                return w.trys.push([4, 6, , 7]), this.currentApplication = t, [4, t.load(this, {
                                    coldStart: null === l,
                                    autoPlay: n
                                })];
                            case 5:
                                return w.sent(), [3, 7];
                            case 6:
                                return _ = w.sent(), L.error(_), e(_), [3, 7];
                            case 7:
                                return [2]
                        }
                    }))
                }))
            }, t.prototype.registerModule = function(t) {
                if (this.currentApplication) throw Error("Cannot register modules while application is running");
                this.moduleLoader.registerModule(t.type, t.promise)
            }, t.prototype.loadModules = function(t) {
                var e, n, r = this,
                    i = [],
                    o = function(t) {
                        a.moduleLoadInjectionHook && (t.config = a.moduleLoadInjectionHook(t.type, t.config));
                        var e = new s(a),
                            n = Date.now(),
                            o = a.moduleLoader.loadModule(e, t.type, t.config);
                        o.ctorPromise.then((function(e) {
                            return r.moduleLookup[r.moduleLoader.getTypeID(t.type)] = {
                                module: e,
                                initialized: !1
                            }
                        })), o.initPromise.then((function(i) {
                            r.moduleProfiler.addModuleLoadTime(i.name, n, Date.now(), e.getLoadedDependencies()), r.moduleLookup[r.moduleLoader.getTypeID(t.type)].initialized = !0
                        })), i.push(o.initPromise.nativePromise())
                    },
                    a = this;
                try {
                    for (var u = A(t), c = u.next(); !c.done; c = u.next()) {
                        o(c.value)
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        c && !c.done && (n = u.return) && n.call(u)
                    } finally {
                        if (e) throw e.error
                    }
                }
                return Promise.all(i)
            }, t.prototype.setLoadInjection = function(t) {
                if (this.moduleLoadInjectionHook) throw Error("Hook already registered");
                this.moduleLoadInjectionHook = t
            }, t.prototype.unloadModule = function(t) {
                return O(this, void 0, void 0, (function() {
                    var e, n, r = this;
                    return P(this, (function(i) {
                        switch (i.label) {
                            case 0:
                                return e = this.getModuleSync(t), n = this.getModuleIndex(e), this.componentLookup[n] ? [4, Promise.all(this.componentLookup[n].map((function(t) {
                                    return O(r, void 0, void 0, (function() {
                                        return P(this, (function(n) {
                                            switch (n.label) {
                                                case 0:
                                                    return [4, this.removeComponent(e, t.component)];
                                                case 1:
                                                    return n.sent(), t.component.dispose(), [2]
                                            }
                                        }))
                                    }))
                                })))] : [3, 2];
                            case 1:
                                i.sent(), this.componentLookup[n] = [], i.label = 2;
                            case 2:
                                return this.moduleLoader.unloadModule(t), e.dispose(this), [2]
                        }
                    }))
                }))
            }, t.prototype.waitForModule = function(t) {
                return this.moduleLoader.getModule(t)
            }, t.prototype.waitForLoadingModules = function() {
                return this.moduleLoader.whenQueueEmpties()
            }, t.prototype.getModule = function(t) {
                return O(this, void 0, Promise, (function() {
                    return P(this, (function(e) {
                        return [2, this.moduleLoader.getModule(t)]
                    }))
                }))
            }, t.prototype.getModuleByParent = function(t) {
                return O(this, void 0, Promise, (function() {
                    return P(this, (function(e) {
                        return [2, this.moduleLoader.getModuleByParent(t)]
                    }))
                }))
            }, t.prototype.getModuleSync = function(t) {
                return this.moduleLoader.getModuleSync(t)
            }, t.prototype.getComponentByType = function(t) {
                var e, n;
                for (var r in this.moduleLookup) {
                    var i = this.moduleLookup[r].module,
                        o = this.getModuleIndex(i),
                        a = this.componentLookup[o] || [];
                    try {
                        for (var s = A(a), u = s.next(); !u.done; u = s.next()) {
                            var c = u.value;
                            if (c.component instanceof t) return c.component
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            u && !u.done && (n = s.return) && n.call(s)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }
                return null
            }, t.prototype.addComponent = function(t, e) {
                return O(this, void 0, void 0, (function() {
                    var n, r, i, o;
                    return P(this, (function(a) {
                        switch (a.label) {
                            case 0:
                                for (n = this.getModuleIndex(t), (r = this.componentLookup[n]) || (this.componentLookup[n] = r = []), i = -1, o = 0; o < r.length; o++)
                                    if (r[o].component === e) {
                                        i = o;
                                        break
                                    }
                                if (-1 === i && (i = r.push({
                                        component: e,
                                        active: !1
                                    }) - 1, e.init()), r[i].active) throw Error("Tried to add already active component: " + typeof e);
                                return [4, e.activate(this)];
                            case 1:
                                return a.sent(), r[i].active = !0, [2]
                        }
                    }))
                }))
            }, t.prototype.removeComponent = function(t, e) {
                return O(this, void 0, void 0, (function() {
                    var n, r, i, o, a, s, u, c;
                    return P(this, (function(l) {
                        switch (l.label) {
                            case 0:
                                if (i = this.getModuleIndex(t), !(o = this.componentLookup[i])) return [3, 2];
                                a = null;
                                try {
                                    for (s = A(o), u = s.next(); !u.done; u = s.next())
                                        if ((c = u.value).component === e) {
                                            a = c;
                                            break
                                        }
                                } catch (t) {
                                    n = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        u && !u.done && (r = s.return) && r.call(s)
                                    } finally {
                                        if (n) throw n.error
                                    }
                                }
                                return a && a.active ? [4, e.deactivate(this)] : [3, 2];
                            case 1:
                                l.sent(), a.active = !1, l.label = 2;
                            case 2:
                                return [2]
                        }
                    }))
                }))
            }, t.prototype.tick = function() {
                var t, e;
                if (!this.deactivatedHack) {
                    if (R !== _.a.End) throw Error("Engine.tick called outside of waiting. Did the engine get called recursively?!");
                    R = _.a.Begin, this.resolveAfterPhase(_.a.Begin);
                    var n = performance.now(),
                        r = this.lastTick ? n - this.lastTick : 16;
                    this.lastTick = n, R = _.a.Logic;
                    try {
                        try {
                            for (var i = A(this.moduleLookup), o = i.next(); !o.done; o = i.next()) {
                                var a = o.value;
                                a && a.initialized && a.module.onUpdate(r)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (e = i.return) && e.call(i)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    } catch (t) {
                        throw L.error(t), t
                    }
                    this.resolveAfterPhase(_.a.Logic), this.engineGenerators.processGenerators(w.a.Phase, _.a.Logic);
                    try {
                        this.renderComponents(r)
                    } catch (t) {
                        throw L.error(t), t
                    }
                    try {
                        R = _.a.Render, this.resolveAfterPhase(_.a.Render), this.engineGenerators.processGenerators(w.a.Phase, _.a.Render), R = _.a.End, this.resolveAfterPhase(_.a.End), this.engineGenerators.processGenerators(w.a.None), this.engineGenerators.processGenerators(w.a.Promise), this.engineGenerators.processGenerators(w.a.Duration)
                    } catch (t) {
                        throw L.error(t), t
                    }
                }
            }, t.prototype.subscribe = function(t, e, n) {
                return void 0 === n && (n = v.b.PERMANENT), this.messageBus.subscribe(t, e, n)
            }, t.prototype.unsubscribe = function(t, e) {
                this.messageBus.unsubscribe(t, e)
            }, t.prototype.broadcast = function(t) {
                this.messageBus.broadcast(t)
            }, t.prototype.claimRenderLayer = function(t) {
                return this.layers.claimLayer(t)
            }, t.prototype.getRenderLayer = function(t) {
                return this.layers.getLayer(t)
            }, t.prototype.disposeRenderLayer = function(t) {
                this.layers.disposeLayer(t)
            }, t.prototype.startGenerator = function(t) {
                this.engineGenerators.startGenerator(t)
            }, t.prototype.stopGenerator = function(t) {
                this.engineGenerators.stopGenerator(t)
            }, t.prototype.after = function(t) {
                return this.afterPhaseListenerCount[t]++, this.afterPhasePromises[t].nativePromise()
            }, t.prototype.getModuleIndex = function(t) {
                for (var e = 0; e < this.moduleLookup.length; e++)
                    if (this.moduleLookup[e] && this.moduleLookup[e].module === t) return e;
                return -1
            }, t.prototype.getComponents = function() {
                var t, e, n, r, i, o, a, s, u, c;
                return P(this, (function(l) {
                    switch (l.label) {
                        case 0:
                            for (r in n = [], this.moduleLookup) n.push(r);
                            i = 0, l.label = 1;
                        case 1:
                            if (!(i < n.length)) return [3, 10];
                            if (o = n[i], !(a = this.componentLookup[o])) return [3, 9];
                            l.label = 2;
                        case 2:
                            l.trys.push([2, 7, 8, 9]), s = A(a), u = s.next(), l.label = 3;
                        case 3:
                            return u.done ? [3, 6] : [4, u.value];
                        case 4:
                            l.sent(), l.label = 5;
                        case 5:
                            return u = s.next(), [3, 3];
                        case 6:
                            return [3, 9];
                        case 7:
                            return c = l.sent(), t = {
                                error: c
                            }, [3, 9];
                        case 8:
                            try {
                                u && !u.done && (e = s.return) && e.call(s)
                            } finally {
                                if (t) throw t.error
                            }
                            return [7];
                        case 9:
                            return i++, [3, 1];
                        case 10:
                            return [2]
                    }
                }))
            }, t.prototype.toggleRendering = function(t, e) {
                var n, r, i = this.getModuleIndex(t),
                    o = this.componentLookup[i];
                if (o) try {
                    for (var a = A(o), s = a.next(); !s.done; s = a.next()) {
                        s.value.active = e
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        s && !s.done && (r = a.return) && r.call(a)
                    } finally {
                        if (n) throw n.error
                    }
                }
            }, t.prototype.renderComponents = function(t) {
                var e, n, r, i;
                for (var o in this.moduleLookup) {
                    if (u = this.componentLookup[o]) try {
                        for (var a = A(u), s = a.next(); !s.done; s = a.next()) {
                            (h = s.value).active && h.component.beforeRender && h.component.beforeRender(t)
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            s && !s.done && (n = a.return) && n.call(a)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }
                for (var o in this.moduleLookup) {
                    var u;
                    if (o)
                        if (u = this.componentLookup[o]) try {
                            for (var c = A(u), l = c.next(); !l.done; l = c.next()) {
                                var h;
                                (h = l.value).active && h.component.render(t)
                            }
                        } catch (t) {
                            r = {
                                error: t
                            }
                        } finally {
                            try {
                                l && !l.done && (i = c.return) && i.call(c)
                            } finally {
                                if (r) throw r.error
                            }
                        }
                }
            }, t.prototype.resetPromises = function() {
                this.resetAfterPhasePromises()
            }, t.prototype.resetAfterPhasePromises = function() {
                this.resetAfterPhasePromise(_.a.Logic), this.resetAfterPhasePromise(_.a.Render), this.resetAfterPhasePromise(_.a.Begin), this.resetAfterPhasePromise(_.a.End)
            }, t.prototype.resetAfterPhasePromise = function(t) {
                this.afterPhasePromises[t] = new c.a, this.afterPhaseListenerCount[t] = 0
            }, t.prototype.resolveAfterPhase = function(t) {
                this.afterPhaseListenerCount[t] > 0 && (this.afterPhasePromises[t].resolve(), this.resetAfterPhasePromise(t))
            }, t.prototype.deactivate = function() {
                var t, e;
                this.getModuleSync(E.default).clearInterface();
                try {
                    for (var n = A(this.moduleLookup), r = n.next(); !r.done; r = n.next()) {
                        var i = r.value;
                        if (i && i.initialized) {
                            var o = this.getModuleType(i.module);
                            o && this.unloadModule(o)
                        }
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (e = n.return) && e.call(n)
                    } finally {
                        if (t) throw t.error
                    }
                }
                this.deactivatedHack = !0
            }, t.prototype.getModuleType = function(t) {
                for (var e = 0; e < this.moduleLookup.length; e++) {
                    var n = this.moduleLookup[e];
                    if (n && n.module === t) return this.moduleLoader.getTypeFromTypeID(e)
                }
                return null
            }, Object.defineProperty(t.prototype, "msgBus", {
                get: function() {
                    return this.messageBus
                },
                enumerable: !0,
                configurable: !0
            }), t
        }();
    e.a = D
}, , , , , , , function(t, e, n) {
    "use strict";
    t.exports = n(353).polyfill()
}, function(t, e, n) {
    "use strict";
    n(388)() || Object.defineProperty(n(292), "Set", {
        value: n(389),
        configurable: !0,
        enumerable: !1,
        writable: !0
    })
}, , function(t, e, n) {
    (function(r, i) {
        var o, a, s;

        function u(t) {
            return (u = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            } : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            })(t)
        }
        s = function() {
            "use strict";

            function t(t) {
                return "function" == typeof t
            }
            var e = Array.isArray ? Array.isArray : function(t) {
                    return "[object Array]" === Object.prototype.toString.call(t)
                },
                n = 0,
                o = void 0,
                a = void 0,
                s = function(t, e) {
                    m[n] = t, m[n + 1] = e, 2 === (n += 2) && (a ? a(v) : w())
                },
                c = "undefined" != typeof window ? window : void 0,
                l = c || {},
                h = l.MutationObserver || l.WebKitMutationObserver,
                f = "undefined" == typeof self && void 0 !== r && "[object process]" === {}.toString.call(r),
                p = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel;

            function d() {
                var t = setTimeout;
                return function() {
                    return t(v, 1)
                }
            }
            var m = new Array(1e3);

            function v() {
                for (var t = 0; t < n; t += 2)(0, m[t])(m[t + 1]), m[t] = void 0, m[t + 1] = void 0;
                n = 0
            }
            var y, g, b, _, w = void 0;

            function x(t, e) {
                var n = this,
                    r = new this.constructor(T);
                void 0 === r[S] && j(r);
                var i = n._state;
                if (i) {
                    var o = arguments[i - 1];
                    s((function() {
                        return N(i, r, o, n._result)
                    }))
                } else I(n, r, t, e);
                return r
            }

            function E(t) {
                if (t && "object" === u(t) && t.constructor === this) return t;
                var e = new this(T);
                return A(e, t), e
            }
            f ? w = function() {
                return r.nextTick(v)
            } : h ? (g = 0, b = new h(v), _ = document.createTextNode(""), b.observe(_, {
                characterData: !0
            }), w = function() {
                _.data = g = ++g % 2
            }) : p ? ((y = new MessageChannel).port1.onmessage = v, w = function() {
                return y.port2.postMessage(0)
            }) : w = void 0 === c ? function() {
                try {
                    var t = Function("return this")().require("vertx");
                    return void 0 !== (o = t.runOnLoop || t.runOnContext) ? function() {
                        o(v)
                    } : d()
                } catch (t) {
                    return d()
                }
            }() : d();
            var S = Math.random().toString(36).substring(2);

            function T() {}
            var M = {
                error: null
            };

            function O(t) {
                try {
                    return t.then
                } catch (t) {
                    return M.error = t, M
                }
            }

            function P(e, n, r) {
                n.constructor === e.constructor && r === x && n.constructor.resolve === E ? function(t, e) {
                    1 === e._state ? R(t, e._result) : 2 === e._state ? D(t, e._result) : I(e, void 0, (function(e) {
                        return A(t, e)
                    }), (function(e) {
                        return D(t, e)
                    }))
                }(e, n) : r === M ? (D(e, M.error), M.error = null) : void 0 === r ? R(e, n) : t(r) ? function(t, e, n) {
                    s((function(t) {
                        var r = !1,
                            i = function(t, e, n, r) {
                                try {
                                    t.call(e, n, r)
                                } catch (t) {
                                    return t
                                }
                            }(n, e, (function(n) {
                                r || (r = !0, e !== n ? A(t, n) : R(t, n))
                            }), (function(e) {
                                r || (r = !0, D(t, e))
                            }), t._label);
                        !r && i && (r = !0, D(t, i))
                    }), t)
                }(e, n, r) : R(e, n)
            }

            function A(t, e) {
                var n, r;
                t === e ? D(t, new TypeError("You cannot resolve a promise with itself")) : (r = u(n = e), null === n || "object" !== r && "function" !== r ? R(t, e) : P(t, e, O(e)))
            }

            function L(t) {
                t._onerror && t._onerror(t._result), C(t)
            }

            function R(t, e) {
                void 0 === t._state && (t._result = e, t._state = 1, 0 !== t._subscribers.length && s(C, t))
            }

            function D(t, e) {
                void 0 === t._state && (t._state = 2, t._result = e, s(L, t))
            }

            function I(t, e, n, r) {
                var i = t._subscribers,
                    o = i.length;
                t._onerror = null, i[o] = e, i[o + 1] = n, i[o + 2] = r, 0 === o && t._state && s(C, t)
            }

            function C(t) {
                var e = t._subscribers,
                    n = t._state;
                if (0 !== e.length) {
                    for (var r = void 0, i = void 0, o = t._result, a = 0; a < e.length; a += 3) r = e[a], i = e[a + n], r ? N(n, r, i, o) : i(o);
                    t._subscribers.length = 0
                }
            }

            function N(e, n, r, i) {
                var o = t(r),
                    a = void 0,
                    s = void 0,
                    u = void 0,
                    c = void 0;
                if (o) {
                    if ((a = function(t, e) {
                            try {
                                return t(e)
                            } catch (t) {
                                return M.error = t, M
                            }
                        }(r, i)) === M ? (c = !0, s = a.error, a.error = null) : u = !0, n === a) return void D(n, new TypeError("A promises callback cannot return that same promise."))
                } else a = i, u = !0;
                void 0 !== n._state || (o && u ? A(n, a) : c ? D(n, s) : 1 === e ? R(n, a) : 2 === e && D(n, a))
            }
            var U = 0;

            function j(t) {
                t[S] = U++, t._state = void 0, t._result = void 0, t._subscribers = []
            }
            var k = function() {
                    function t(t, n) {
                        this._instanceConstructor = t, this.promise = new t(T), this.promise[S] || j(this.promise), e(n) ? (this.length = n.length, this._remaining = n.length, this._result = new Array(this.length), 0 === this.length ? R(this.promise, this._result) : (this.length = this.length || 0, this._enumerate(n), 0 === this._remaining && R(this.promise, this._result))) : D(this.promise, new Error("Array Methods must be provided an Array"))
                    }
                    return t.prototype._enumerate = function(t) {
                        for (var e = 0; void 0 === this._state && e < t.length; e++) this._eachEntry(t[e], e)
                    }, t.prototype._eachEntry = function(t, e) {
                        var n = this._instanceConstructor,
                            r = n.resolve;
                        if (r === E) {
                            var i = O(t);
                            if (i === x && void 0 !== t._state) this._settledAt(t._state, e, t._result);
                            else if ("function" != typeof i) this._remaining--, this._result[e] = t;
                            else if (n === F) {
                                var o = new n(T);
                                P(o, t, i), this._willSettleAt(o, e)
                            } else this._willSettleAt(new n((function(e) {
                                return e(t)
                            })), e)
                        } else this._willSettleAt(r(t), e)
                    }, t.prototype._settledAt = function(t, e, n) {
                        var r = this.promise;
                        void 0 === r._state && (this._remaining--, 2 === t ? D(r, n) : this._result[e] = n), 0 === this._remaining && R(r, this._result)
                    }, t.prototype._willSettleAt = function(t, e) {
                        var n = this;
                        I(t, void 0, (function(t) {
                            return n._settledAt(1, e, t)
                        }), (function(t) {
                            return n._settledAt(2, e, t)
                        }))
                    }, t
                }(),
                F = function() {
                    function t(e) {
                        this[S] = U++, this._result = this._state = void 0, this._subscribers = [], T !== e && ("function" != typeof e && function() {
                            throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")
                        }(), this instanceof t ? function(t, e) {
                            try {
                                e((function(e) {
                                    A(t, e)
                                }), (function(e) {
                                    D(t, e)
                                }))
                            } catch (e) {
                                D(t, e)
                            }
                        }(this, e) : function() {
                            throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")
                        }())
                    }
                    return t.prototype.catch = function(t) {
                        return this.then(null, t)
                    }, t.prototype.finally = function(t) {
                        var e = this.constructor;
                        return this.then((function(n) {
                            return e.resolve(t()).then((function() {
                                return n
                            }))
                        }), (function(n) {
                            return e.resolve(t()).then((function() {
                                throw n
                            }))
                        }))
                    }, t
                }();
            return F.prototype.then = x, F.all = function(t) {
                return new k(this, t).promise
            }, F.race = function(t) {
                var n = this;
                return e(t) ? new n((function(e, r) {
                    for (var i = t.length, o = 0; o < i; o++) n.resolve(t[o]).then(e, r)
                })) : new n((function(t, e) {
                    return e(new TypeError("You must pass an array to race."))
                }))
            }, F.resolve = E, F.reject = function(t) {
                var e = new this(T);
                return D(e, t), e
            }, F._setScheduler = function(t) {
                a = t
            }, F._setAsap = function(t) {
                s = t
            }, F._asap = s, F.polyfill = function() {
                var t = void 0;
                if (void 0 !== i) t = i;
                else if ("undefined" != typeof self) t = self;
                else try {
                    t = Function("return this")()
                } catch (t) {
                    throw new Error("polyfill failed because global object is unavailable in this environment")
                }
                var e = t.Promise;
                if (e) {
                    var n = null;
                    try {
                        n = Object.prototype.toString.call(e.resolve())
                    } catch (t) {}
                    if ("[object Promise]" === n && !e.cast) return
                }
                t.Promise = F
            }, F.Promise = F, F
        }, "object" === u(e) && void 0 !== t ? t.exports = s() : void 0 === (a = "function" == typeof(o = s) ? o.call(e, n, e, t) : o) || (t.exports = a)
    }).call(this, n(271), n(225))
}, function(t, e, n) {
    t.exports = n(355)
}, function(t, e, n) {
    n(356);
    var r = n(191);
    t.exports = r.Object.getOwnPropertySymbols
}, function(t, e, n) {
    "use strict";
    var r = n(272),
        i = n(93),
        o = n(279),
        a = n(130),
        s = n(287),
        u = n(147),
        c = n(121),
        l = n(288),
        h = n(149),
        f = n(169),
        p = n(289),
        d = n(148),
        m = n(229),
        v = n(228),
        y = n(363),
        g = n(235),
        b = n(233),
        _ = n(366),
        w = n(286),
        x = n(226),
        E = n(150),
        S = n(227),
        T = n(168),
        M = n(278),
        O = n(170),
        P = n(231),
        A = n(190),
        L = n(232),
        R = n(192),
        D = n(290),
        I = n(367),
        C = n(368),
        N = n(281),
        U = n(369).forEach,
        j = P("hidden"),
        k = R("toPrimitive"),
        F = N.set,
        B = N.getterFor("Symbol"),
        G = Object.prototype,
        z = i.Symbol,
        H = i.JSON,
        V = H && H.stringify,
        W = x.f,
        X = E.f,
        q = _.f,
        Y = S.f,
        K = O("symbols"),
        Z = O("op-symbols"),
        Q = O("string-to-symbol-registry"),
        J = O("symbol-to-string-registry"),
        $ = O("wks"),
        tt = i.QObject,
        et = !tt || !tt.prototype || !tt.prototype.findChild,
        nt = a && u((function() {
            return 7 != y(X({}, "a", {
                get: function() {
                    return X(this, "a", {
                        value: 7
                    }).a
                }
            })).a
        })) ? function(t, e, n) {
            var r = W(G, e);
            r && delete G[e], X(t, e, n), r && t !== G && X(G, e, r)
        } : X,
        rt = function(t, e) {
            var n = K[t] = y(z.prototype);
            return F(n, {
                type: "Symbol",
                tag: t,
                description: e
            }), a || (n.description = e), n
        },
        it = s && "symbol" == typeof z.iterator ? function(t) {
            return "symbol" == typeof t
        } : function(t) {
            return Object(t) instanceof z
        },
        ot = function(t, e, n) {
            t === G && ot(Z, e, n), f(t);
            var r = m(e, !0);
            return f(n), c(K, r) ? (n.enumerable ? (c(t, j) && t[j][r] && (t[j][r] = !1), n = y(n, {
                enumerable: v(0, !1)
            })) : (c(t, j) || X(t, j, v(1, {})), t[j][r] = !0), nt(t, r, n)) : X(t, r, n)
        },
        at = function(t, e) {
            f(t);
            var n = d(e),
                r = g(n).concat(lt(n));
            return U(r, (function(e) {
                a && !st.call(n, e) || ot(t, e, n[e])
            })), t
        },
        st = function(t) {
            var e = m(t, !0),
                n = Y.call(this, e);
            return !(this === G && c(K, e) && !c(Z, e)) && (!(n || !c(this, e) || !c(K, e) || c(this, j) && this[j][e]) || n)
        },
        ut = function(t, e) {
            var n = d(t),
                r = m(e, !0);
            if (n !== G || !c(K, r) || c(Z, r)) {
                var i = W(n, r);
                return !i || !c(K, r) || c(n, j) && n[j][r] || (i.enumerable = !0), i
            }
        },
        ct = function(t) {
            var e = q(d(t)),
                n = [];
            return U(e, (function(t) {
                c(K, t) || c(A, t) || n.push(t)
            })), n
        },
        lt = function(t) {
            var e = t === G,
                n = q(e ? Z : d(t)),
                r = [];
            return U(n, (function(t) {
                !c(K, t) || e && !c(G, t) || r.push(K[t])
            })), r
        };
    s || (M((z = function() {
        if (this instanceof z) throw TypeError("Symbol is not a constructor");
        var t = arguments.length && void 0 !== arguments[0] ? String(arguments[0]) : void 0,
            e = L(t),
            n = function(t) {
                this === G && n.call(Z, t), c(this, j) && c(this[j], e) && (this[j][e] = !1), nt(this, e, v(1, t))
            };
        return a && et && nt(G, e, {
            configurable: !0,
            set: n
        }), rt(e, t)
    }).prototype, "toString", (function() {
        return B(this).tag
    })), S.f = st, E.f = ot, x.f = ut, b.f = _.f = ct, w.f = lt, a && (X(z.prototype, "description", {
        configurable: !0,
        get: function() {
            return B(this).description
        }
    }), o || M(G, "propertyIsEnumerable", st, {
        unsafe: !0
    })), D.f = function(t) {
        return rt(R(t), t)
    }), r({
        global: !0,
        wrap: !0,
        forced: !s,
        sham: !s
    }, {
        Symbol: z
    }), U(g($), (function(t) {
        I(t)
    })), r({
        target: "Symbol",
        stat: !0,
        forced: !s
    }, {
        for: function(t) {
            var e = String(t);
            if (c(Q, e)) return Q[e];
            var n = z(e);
            return Q[e] = n, J[n] = e, n
        },
        keyFor: function(t) {
            if (!it(t)) throw TypeError(t + " is not a symbol");
            if (c(J, t)) return J[t]
        },
        useSetter: function() {
            et = !0
        },
        useSimple: function() {
            et = !1
        }
    }), r({
        target: "Object",
        stat: !0,
        forced: !s,
        sham: !a
    }, {
        create: function(t, e) {
            return void 0 === e ? y(t) : at(y(t), e)
        },
        defineProperty: ot,
        defineProperties: at,
        getOwnPropertyDescriptor: ut
    }), r({
        target: "Object",
        stat: !0,
        forced: !s
    }, {
        getOwnPropertyNames: ct,
        getOwnPropertySymbols: lt
    }), r({
        target: "Object",
        stat: !0,
        forced: u((function() {
            w.f(1)
        }))
    }, {
        getOwnPropertySymbols: function(t) {
            return w.f(p(t))
        }
    }), H && r({
        target: "JSON",
        stat: !0,
        forced: !s || u((function() {
            var t = z();
            return "[null]" != V([t]) || "{}" != V({
                a: t
            }) || "{}" != V(Object(t))
        }))
    }, {
        stringify: function(t) {
            for (var e, n, r = [t], i = 1; arguments.length > i;) r.push(arguments[i++]);
            if (n = e = r[1], (h(e) || void 0 !== t) && !it(t)) return l(e) || (e = function(t, e) {
                if ("function" == typeof n && (e = n.call(this, t, e)), !it(e)) return e
            }), r[1] = e, V.apply(H, r)
        }
    }), z.prototype[k] || T(z.prototype, k, z.prototype.valueOf), C(z, "Symbol"), A[j] = !0
}, function(t, e, n) {
    var r = n(93),
        i = n(280),
        o = r.WeakMap;
    t.exports = "function" == typeof o && /native code/.test(i.call(o))
}, function(t, e, n) {
    var r = n(121),
        i = n(359),
        o = n(226),
        a = n(150);
    t.exports = function(t, e) {
        for (var n = i(e), s = a.f, u = o.f, c = 0; c < n.length; c++) {
            var l = n[c];
            r(t, l) || s(t, l, u(e, l))
        }
    }
}, function(t, e, n) {
    var r = n(282),
        i = n(233),
        o = n(286),
        a = n(169);
    t.exports = r("Reflect", "ownKeys") || function(t) {
        var e = i.f(a(t)),
            n = o.f;
        return n ? e.concat(n(t)) : e
    }
}, function(t, e, n) {
    var r = n(148),
        i = n(284),
        o = n(361),
        a = function(t) {
            return function(e, n, a) {
                var s, u = r(e),
                    c = i(u.length),
                    l = o(a, c);
                if (t && n != n) {
                    for (; c > l;)
                        if ((s = u[l++]) != s) return !0
                } else
                    for (; c > l; l++)
                        if ((t || l in u) && u[l] === n) return t || l || 0;
                return !t && -1
            }
        };
    t.exports = {
        includes: a(!0),
        indexOf: a(!1)
    }
}, function(t, e, n) {
    var r = n(285),
        i = Math.max,
        o = Math.min;
    t.exports = function(t, e) {
        var n = r(t);
        return n < 0 ? i(n + e, 0) : o(n, e)
    }
}, function(t, e, n) {
    var r = n(147),
        i = /#|\.prototype\./,
        o = function(t, e) {
            var n = s[a(t)];
            return n == c || n != u && ("function" == typeof e ? r(e) : !!e)
        },
        a = o.normalize = function(t) {
            return String(t).replace(i, ".").toLowerCase()
        },
        s = o.data = {},
        u = o.NATIVE = "N",
        c = o.POLYFILL = "P";
    t.exports = o
}, function(t, e, n) {
    var r = n(169),
        i = n(364),
        o = n(234),
        a = n(190),
        s = n(365),
        u = n(277),
        c = n(231)("IE_PROTO"),
        l = function() {},
        h = function() {
            var t, e = u("iframe"),
                n = o.length;
            for (e.style.display = "none", s.appendChild(e), e.src = String("javascript:"), (t = e.contentWindow.document).open(), t.write("<script>document.F=Object<\/script>"), t.close(), h = t.F; n--;) delete h.prototype[o[n]];
            return h()
        };
    t.exports = Object.create || function(t, e) {
        var n;
        return null !== t ? (l.prototype = r(t), n = new l, l.prototype = null, n[c] = t) : n = h(), void 0 === e ? n : i(n, e)
    }, a[c] = !0
}, function(t, e, n) {
    var r = n(130),
        i = n(150),
        o = n(169),
        a = n(235);
    t.exports = r ? Object.defineProperties : function(t, e) {
        o(t);
        for (var n, r = a(e), s = r.length, u = 0; s > u;) i.f(t, n = r[u++], e[n]);
        return t
    }
}, function(t, e, n) {
    var r = n(282);
    t.exports = r("document", "documentElement")
}, function(t, e, n) {
    var r = n(148),
        i = n(233).f,
        o = {}.toString,
        a = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
    t.exports.f = function(t) {
        return a && "[object Window]" == o.call(t) ? function(t) {
            try {
                return i(t)
            } catch (t) {
                return a.slice()
            }
        }(t) : i(r(t))
    }
}, function(t, e, n) {
    var r = n(191),
        i = n(121),
        o = n(290),
        a = n(150).f;
    t.exports = function(t) {
        var e = r.Symbol || (r.Symbol = {});
        i(e, t) || a(e, t, {
            value: o.f(t)
        })
    }
}, function(t, e, n) {
    var r = n(150).f,
        i = n(121),
        o = n(192)("toStringTag");
    t.exports = function(t, e, n) {
        t && !i(t = n ? t : t.prototype, o) && r(t, o, {
            configurable: !0,
            value: e
        })
    }
}, function(t, e, n) {
    var r = n(370),
        i = n(273),
        o = n(289),
        a = n(284),
        s = n(372),
        u = [].push,
        c = function(t) {
            var e = 1 == t,
                n = 2 == t,
                c = 3 == t,
                l = 4 == t,
                h = 6 == t,
                f = 5 == t || h;
            return function(p, d, m, v) {
                for (var y, g, b = o(p), _ = i(b), w = r(d, m, 3), x = a(_.length), E = 0, S = v || s, T = e ? S(p, x) : n ? S(p, 0) : void 0; x > E; E++)
                    if ((f || E in _) && (g = w(y = _[E], E, b), t))
                        if (e) T[E] = g;
                        else if (g) switch (t) {
                    case 3:
                        return !0;
                    case 5:
                        return y;
                    case 6:
                        return E;
                    case 2:
                        u.call(T, y)
                } else if (l) return !1;
                return h ? -1 : c || l ? l : T
            }
        };
    t.exports = {
        forEach: c(0),
        map: c(1),
        filter: c(2),
        some: c(3),
        every: c(4),
        find: c(5),
        findIndex: c(6)
    }
}, function(t, e, n) {
    var r = n(371);
    t.exports = function(t, e, n) {
        if (r(t), void 0 === e) return t;
        switch (n) {
            case 0:
                return function() {
                    return t.call(e)
                };
            case 1:
                return function(n) {
                    return t.call(e, n)
                };
            case 2:
                return function(n, r) {
                    return t.call(e, n, r)
                };
            case 3:
                return function(n, r, i) {
                    return t.call(e, n, r, i)
                }
        }
        return function() {
            return t.apply(e, arguments)
        }
    }
}, function(t, e) {
    t.exports = function(t) {
        if ("function" != typeof t) throw TypeError(String(t) + " is not a function");
        return t
    }
}, function(t, e, n) {
    var r = n(149),
        i = n(288),
        o = n(192)("species");
    t.exports = function(t, e) {
        var n;
        return i(t) && ("function" != typeof(n = t.constructor) || n !== Array && !i(n.prototype) ? r(n) && null === (n = n[o]) && (n = void 0) : n = void 0), new(void 0 === n ? Array : n)(0 === e ? 0 : e)
    }
}, function(t, e, n) {
    t.exports = n(374)
}, function(t, e, n) {
    n(375);
    var r = n(191);
    t.exports = r.Object.values
}, function(t, e, n) {
    var r = n(272),
        i = n(376).values;
    r({
        target: "Object",
        stat: !0
    }, {
        values: function(t) {
            return i(t)
        }
    })
}, function(t, e, n) {
    var r = n(130),
        i = n(235),
        o = n(148),
        a = n(227).f,
        s = function(t) {
            return function(e) {
                for (var n, s = o(e), u = i(s), c = u.length, l = 0, h = []; c > l;) n = u[l++], r && !a.call(s, n) || h.push(t ? [n, s[n]] : s[n]);
                return h
            }
        };
    t.exports = {
        entries: s(!0),
        values: s(!1)
    }
}, function(t, e, n) {
    "use strict";
    n(291)() || Object.defineProperty(n(292), "Symbol", {
        value: n(293),
        configurable: !0,
        enumerable: !1,
        writable: !0
    })
}, function(t, e, n) {
    "use strict";
    t.exports = function() {
        var t, e = Object.assign;
        return "function" == typeof e && (e(t = {
            foo: "raz"
        }, {
            bar: "dwa"
        }, {
            trzy: "trzy"
        }), t.foo + t.bar + t.trzy === "razdwatrzy")
    }
}, function(t, e, n) {
    "use strict";
    var r = n(380),
        i = n(116),
        o = Math.max;
    t.exports = function(t, e) {
        var n, a, s, u = o(arguments.length, 2);
        for (t = Object(i(t)), s = function(r) {
                try {
                    t[r] = e[r]
                } catch (t) {
                    n || (n = t)
                }
            }, a = 1; a < u; ++a) e = arguments[a], r(e).forEach(s);
        if (void 0 !== n) throw n;
        return t
    }
}, function(t, e, n) {
    "use strict";
    t.exports = n(381)() ? Object.keys : n(382)
}, function(t, e, n) {
    "use strict";
    t.exports = function() {
        try {
            return Object.keys("primitive"), !0
        } catch (t) {
            return !1
        }
    }
}, function(t, e, n) {
    "use strict";
    var r = n(151),
        i = Object.keys;
    t.exports = function(t) {
        return i(r(t) ? Object(t) : t)
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t) {
        return "function" == typeof t
    }
}, function(t, e, n) {
    "use strict";
    var r = "razdwatrzy";
    t.exports = function() {
        return "function" == typeof r.contains && (!0 === r.contains("dwa") && !1 === r.contains("foo"))
    }
}, function(t, e, n) {
    "use strict";
    var r = String.prototype.indexOf;
    t.exports = function(t) {
        return r.call(this, t, arguments[1]) > -1
    }
}, function(t, e, n) {
    "use strict";
    var r = n(387);
    t.exports = function(t) {
        if (!r(t)) throw new TypeError(t + " is not a symbol");
        return t
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    t.exports = function(t) {
        return !!t && ("symbol" === r(t) || !!t.constructor && ("Symbol" === t.constructor.name && "Symbol" === t[t.constructor.toStringTag]))
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function() {
        var t, e;
        return "function" == typeof Set && (t = new Set(["raz", "dwa", "trzy"]), "[object Set]" === String(t) && (3 === t.size && ("function" == typeof t.add && ("function" == typeof t.clear && ("function" == typeof t.delete && ("function" == typeof t.entries && ("function" == typeof t.forEach && ("function" == typeof t.has && ("function" == typeof t.keys && ("function" == typeof t.values && (!1 === (e = t.values().next()).done && "raz" === e.value)))))))))))
    }
}, function(t, e, n) {
    "use strict";
    var r, i, o, a = n(296),
        s = n(390),
        u = n(193),
        c = n(117),
        l = n(131),
        h = n(400),
        f = n(122),
        p = n(300),
        d = n(402),
        m = n(415),
        v = n(416),
        y = Function.prototype.call,
        g = Object.defineProperty,
        b = Object.getPrototypeOf;
    v && (o = Set), t.exports = r = function() {
        var t, e = arguments[0];
        if (!(this instanceof r)) throw new TypeError("Constructor requires 'new'");
        return t = v && u ? u(new o, b(this)) : this, null != e && p(e), g(t, "__setData__", l("c", [])), e ? (d(e, (function(t) {
            -1 === s.call(this, t) && this.push(t)
        }), t.__setData__), t) : t
    }, v && (u && u(r, o), r.prototype = Object.create(o.prototype, {
        constructor: l(r)
    })), h(Object.defineProperties(r.prototype, {
        add: l((function(t) {
            return this.has(t) ? this : (this.emit("_add", this.__setData__.push(t) - 1, t), this)
        })),
        clear: l((function() {
            this.__setData__.length && (a.call(this.__setData__), this.emit("_clear"))
        })),
        delete: l((function(t) {
            var e = s.call(this.__setData__, t);
            return -1 !== e && (this.__setData__.splice(e, 1), this.emit("_delete", e, t), !0)
        })),
        entries: l((function() {
            return new m(this, "key+value")
        })),
        forEach: l((function(t) {
            var e, n, r, i = arguments[1];
            for (c(t), n = (e = this.values())._next(); void 0 !== n;) r = e._resolve(n), y.call(t, i, r, r, this), n = e._next()
        })),
        has: l((function(t) {
            return -1 !== s.call(this.__setData__, t)
        })),
        keys: l(i = function() {
            return this.values()
        }),
        size: l.gs((function() {
            return this.__setData__.length
        })),
        values: l((function() {
            return new m(this)
        })),
        toString: l((function() {
            return "[object Set]"
        }))
    })), g(r.prototype, f.iterator, l(i)), g(r.prototype, f.toStringTag, l("c", "Set"))
}, function(t, e, n) {
    "use strict";
    var r = n(391),
        i = n(297),
        o = n(116),
        a = Array.prototype.indexOf,
        s = Object.prototype.hasOwnProperty,
        u = Math.abs,
        c = Math.floor;
    t.exports = function(t) {
        var e, n, l, h;
        if (!r(t)) return a.apply(this, arguments);
        for (n = i(o(this).length), l = arguments[1], e = l = isNaN(l) ? 0 : l >= 0 ? c(l) : i(this.length) - c(u(l)); e < n; ++e)
            if (s.call(this, e) && (h = this[e], r(h))) return e;
        return -1
    }
}, function(t, e, n) {
    "use strict";
    t.exports = n(392)() ? Number.isNaN : n(393)
}, function(t, e, n) {
    "use strict";
    t.exports = function() {
        var t = Number.isNaN;
        return "function" == typeof t && (!t({}) && t(NaN) && !t(34))
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t) {
        return t != t
    }
}, function(t, e, n) {
    "use strict";
    var r = n(395),
        i = Math.abs,
        o = Math.floor;
    t.exports = function(t) {
        return isNaN(t) ? 0 : 0 !== (t = Number(t)) && isFinite(t) ? r(t) * o(i(t)) : t
    }
}, function(t, e, n) {
    "use strict";
    t.exports = n(396)() ? Math.sign : n(397)
}, function(t, e, n) {
    "use strict";
    t.exports = function() {
        var t = Math.sign;
        return "function" == typeof t && (1 === t(10) && -1 === t(-20))
    }
}, function(t, e, n) {
    "use strict";
    t.exports = function(t) {
        return t = Number(t), isNaN(t) || 0 === t ? t : t > 0 ? 1 : -1
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i = n(151),
        o = {
            function: !0,
            object: !0
        };
    t.exports = function(t) {
        return i(t) && o[r(t)] || !1
    }
}, function(t, e, n) {
    "use strict";
    var r, i, o, a, s = Object.create;
    n(298)() || (r = n(299)), t.exports = r ? 1 !== r.level ? s : (i = {}, o = {}, a = {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: void 0
    }, Object.getOwnPropertyNames(Object.prototype).forEach((function(t) {
        o[t] = "__proto__" !== t ? a : {
            configurable: !0,
            enumerable: !1,
            writable: !0,
            value: void 0
        }
    })), Object.defineProperties(i, o), Object.defineProperty(r, "nullPolyfill", {
        configurable: !1,
        enumerable: !1,
        writable: !1,
        value: i
    }), function(t, e) {
        return s(null === t ? i : t, e)
    }) : s
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i, o, a, s, u, c, l, h = n(131),
        f = n(117),
        p = Function.prototype.apply,
        d = Function.prototype.call,
        m = Object.create,
        v = Object.defineProperty,
        y = Object.defineProperties,
        g = Object.prototype.hasOwnProperty,
        b = {
            configurable: !0,
            enumerable: !1,
            writable: !0
        };
    o = function(t, e) {
        var n, r;
        return f(e), r = this, i.call(this, t, n = function() {
            a.call(r, t, n), p.call(e, this, arguments)
        }), n.__eeOnceListener__ = e, this
    }, u = {
        on: i = function(t, e) {
            var n;
            return f(e), g.call(this, "__ee__") ? n = this.__ee__ : (n = b.value = m(null), v(this, "__ee__", b), b.value = null), n[t] ? "object" === r(n[t]) ? n[t].push(e) : n[t] = [n[t], e] : n[t] = e, this
        },
        once: o,
        off: a = function(t, e) {
            var n, i, o, a;
            if (f(e), !g.call(this, "__ee__")) return this;
            if (!(n = this.__ee__)[t]) return this;
            if ("object" === r(i = n[t]))
                for (a = 0; o = i[a]; ++a) o !== e && o.__eeOnceListener__ !== e || (2 === i.length ? n[t] = i[a ? 0 : 1] : i.splice(a, 1));
            else i !== e && i.__eeOnceListener__ !== e || delete n[t];
            return this
        },
        emit: s = function(t) {
            var e, n, i, o, a;
            if (g.call(this, "__ee__") && (o = this.__ee__[t]))
                if ("object" === r(o)) {
                    for (n = arguments.length, a = new Array(n - 1), e = 1; e < n; ++e) a[e - 1] = arguments[e];
                    for (o = o.slice(), e = 0; i = o[e]; ++e) p.call(i, this, a)
                } else switch (arguments.length) {
                    case 1:
                        d.call(o, this);
                        break;
                    case 2:
                        d.call(o, this, arguments[1]);
                        break;
                    case 3:
                        d.call(o, this, arguments[1], arguments[2]);
                        break;
                    default:
                        for (n = arguments.length, a = new Array(n - 1), e = 1; e < n; ++e) a[e - 1] = arguments[e];
                        p.call(o, this, a)
                }
        }
    }, c = {
        on: h(i),
        once: h(o),
        off: h(a),
        emit: h(s)
    }, l = y({}, c), t.exports = e = function(t) {
        return null == t ? m(l) : y(Object(t), c)
    }, e.methods = u
}, function(t, e, n) {
    "use strict";
    var r = n(194),
        i = n(151),
        o = n(195),
        a = n(122).iterator,
        s = Array.isArray;
    t.exports = function(t) {
        return !!i(t) && (!!s(t) || (!!o(t) || (!!r(t) || "function" == typeof t[a])))
    }
}, function(t, e, n) {
    "use strict";
    var r = n(194),
        i = n(117),
        o = n(195),
        a = n(403),
        s = Array.isArray,
        u = Function.prototype.call,
        c = Array.prototype.some;
    t.exports = function(t, e) {
        var n, l, h, f, p, d, m, v, y = arguments[2];
        if (s(t) || r(t) ? n = "array" : o(t) ? n = "string" : t = a(t), i(e), h = function() {
                f = !0
            }, "array" !== n)
            if ("string" !== n)
                for (l = t.next(); !l.done;) {
                    if (u.call(e, y, l.value, h), f) return;
                    l = t.next()
                } else
                    for (d = t.length, p = 0; p < d && (m = t[p], p + 1 < d && (v = m.charCodeAt(0)) >= 55296 && v <= 56319 && (m += t[++p]), u.call(e, y, m, h), !f); ++p);
            else c.call(t, (function(t) {
                return u.call(e, y, t, h), f
            }))
    }
}, function(t, e, n) {
    "use strict";
    var r = n(194),
        i = n(195),
        o = n(404),
        a = n(414),
        s = n(300),
        u = n(122).iterator;
    t.exports = function(t) {
        return "function" == typeof s(t)[u] ? t[u]() : r(t) ? new o(t) : i(t) ? new a(t) : new o(t)
    }
}, function(t, e, n) {
    "use strict";
    var r, i = n(193),
        o = n(237),
        a = n(131),
        s = n(122),
        u = n(238),
        c = Object.defineProperty;
    r = t.exports = function(t, e) {
        if (!(this instanceof r)) throw new TypeError("Constructor requires 'new'");
        u.call(this, t), e = e ? o.call(e, "key+value") ? "key+value" : o.call(e, "key") ? "key" : "value" : "value", c(this, "__kind__", a("", e))
    }, i && i(r, u), delete r.prototype.constructor, r.prototype = Object.create(u.prototype, {
        _resolve: a((function(t) {
            return "value" === this.__kind__ ? this.__list__[t] : "key+value" === this.__kind__ ? [t, this.__list__[t]] : t
        }))
    }), c(r.prototype, s.toStringTag, a("c", "Array Iterator"))
}, function(t, e, n) {
    "use strict";
    var r, i = n(406),
        o = n(295),
        a = n(117),
        s = n(411),
        u = n(117),
        c = n(116),
        l = Function.prototype.bind,
        h = Object.defineProperty,
        f = Object.prototype.hasOwnProperty;
    r = function(t, e, n) {
        var r, o = c(e) && u(e.value);
        return delete(r = i(e)).writable, delete r.value, r.get = function() {
            return !n.overwriteDefinition && f.call(this, t) ? o : (e.value = l.call(o, n.resolveContext ? n.resolveContext(this) : this), h(this, t, e), this[t])
        }, r
    }, t.exports = function(t) {
        var e = o(arguments[1]);
        return null != e.resolveContext && a(e.resolveContext), s(t, (function(t, n) {
            return r(n, t, e)
        }))
    }
}, function(t, e, n) {
    "use strict";
    var r = n(407),
        i = n(236),
        o = n(116);
    t.exports = function(t) {
        var e = Object(o(t)),
            n = arguments[1],
            a = Object(arguments[2]);
        if (e !== t && !n) return e;
        var s = {};
        return n ? r(n, (function(e) {
            (a.ensure || e in t) && (s[e] = t[e])
        })) : i(s, t), s
    }
}, function(t, e, n) {
    "use strict";
    t.exports = n(408)() ? Array.from : n(409)
}, function(t, e, n) {
    "use strict";
    t.exports = function() {
        var t, e, n = Array.from;
        return "function" == typeof n && (e = n(t = ["raz", "dwa"]), Boolean(e && e !== t && "dwa" === e[1]))
    }
}, function(t, e, n) {
    "use strict";
    var r = n(122).iterator,
        i = n(194),
        o = n(410),
        a = n(297),
        s = n(117),
        u = n(116),
        c = n(151),
        l = n(195),
        h = Array.isArray,
        f = Function.prototype.call,
        p = {
            configurable: !0,
            enumerable: !0,
            writable: !0,
            value: null
        },
        d = Object.defineProperty;
    t.exports = function(t) {
        var e, n, m, v, y, g, b, _, w, x, E = arguments[1],
            S = arguments[2];
        if (t = Object(u(t)), c(E) && s(E), this && this !== Array && o(this)) e = this;
        else {
            if (!E) {
                if (i(t)) return 1 !== (y = t.length) ? Array.apply(null, t) : ((v = new Array(1))[0] = t[0], v);
                if (h(t)) {
                    for (v = new Array(y = t.length), n = 0; n < y; ++n) v[n] = t[n];
                    return v
                }
            }
            v = []
        }
        if (!h(t))
            if (void 0 !== (w = t[r])) {
                for (b = s(w).call(t), e && (v = new e), _ = b.next(), n = 0; !_.done;) x = E ? f.call(E, S, _.value, n) : _.value, e ? (p.value = x, d(v, n, p)) : v[n] = x, _ = b.next(), ++n;
                y = n
            } else if (l(t)) {
            for (y = t.length, e && (v = new e), n = 0, m = 0; n < y; ++n) x = t[n], n + 1 < y && (g = x.charCodeAt(0)) >= 55296 && g <= 56319 && (x += t[++n]), x = E ? f.call(E, S, x, m) : x, e ? (p.value = x, d(v, m, p)) : v[m] = x, ++m;
            y = m
        }
        if (void 0 === y)
            for (y = a(t.length), e && (v = new e(y)), n = 0; n < y; ++n) x = E ? f.call(E, S, t[n], n) : t[n], e ? (p.value = x, d(v, n, p)) : v[n] = x;
        return e && (p.value = null, v.length = y), v
    }
}, function(t, e, n) {
    "use strict";
    var r = Object.prototype.toString,
        i = r.call(n(294));
    t.exports = function(t) {
        return "function" == typeof t && r.call(t) === i
    }
}, function(t, e, n) {
    "use strict";
    var r = n(117),
        i = n(412),
        o = Function.prototype.call;
    t.exports = function(t, e) {
        var n = {},
            a = arguments[2];
        return r(e), i(t, (function(t, r, i, s) {
            n[r] = o.call(e, a, t, r, i, s)
        })), n
    }
}, function(t, e, n) {
    "use strict";
    t.exports = n(413)("forEach")
}, function(t, e, n) {
    "use strict";
    var r = n(117),
        i = n(116),
        o = Function.prototype.bind,
        a = Function.prototype.call,
        s = Object.keys,
        u = Object.prototype.propertyIsEnumerable;
    t.exports = function(t, e) {
        return function(n, c) {
            var l, h = arguments[2],
                f = arguments[3];
            return n = Object(i(n)), r(c), l = s(n), f && l.sort("function" == typeof f ? o.call(f, n) : void 0), "function" != typeof t && (t = l[t]), a.call(t, l, (function(t, r) {
                return u.call(n, t) ? a.call(c, h, n[t], t, n, r) : e
            }))
        }
    }
}, function(t, e, n) {
    "use strict";
    var r, i = n(193),
        o = n(131),
        a = n(122),
        s = n(238),
        u = Object.defineProperty;
    r = t.exports = function(t) {
        if (!(this instanceof r)) throw new TypeError("Constructor requires 'new'");
        t = String(t), s.call(this, t), u(this, "__length__", o("", t.length))
    }, i && i(r, s), delete r.prototype.constructor, r.prototype = Object.create(s.prototype, {
        _next: o((function() {
            if (this.__list__) return this.__nextIndex__ < this.__length__ ? this.__nextIndex__++ : void this._unBind()
        })),
        _resolve: o((function(t) {
            var e, n = this.__list__[t];
            return this.__nextIndex__ === this.__length__ ? n : (e = n.charCodeAt(0)) >= 55296 && e <= 56319 ? n + this.__list__[this.__nextIndex__++] : n
        }))
    }), u(r.prototype, a.toStringTag, o("c", "String Iterator"))
}, function(t, e, n) {
    "use strict";
    var r, i = n(193),
        o = n(237),
        a = n(131),
        s = n(238),
        u = n(122).toStringTag,
        c = Object.defineProperty;
    r = t.exports = function(t, e) {
        if (!(this instanceof r)) return new r(t, e);
        s.call(this, t.__setData__, t), e = e && o.call(e, "key+value") ? "key+value" : "value", c(this, "__kind__", a("", e))
    }, i && i(r, s), r.prototype = Object.create(s.prototype, {
        constructor: a(r),
        _resolve: a((function(t) {
            return "value" === this.__kind__ ? this.__list__[t] : [this.__list__[t], this.__list__[t]]
        })),
        toString: a((function() {
            return "[object Set Iterator]"
        }))
    }), c(r.prototype, u, a("c", "Set Iterator"))
}, function(t, e, n) {
    "use strict";
    t.exports = "undefined" != typeof Set && "[object Set]" === Object.prototype.toString.call(Set.prototype)
}, function(t, e) {
    if (Math.sign || (Math.sign = function(t) {
            return t > 0 ? 1 : 0 === t ? 0 : -1
        }), Number.parseInt || (Number.parseInt = window.parseInt), Number.parseFloat || (Number.parseFloat = window.parseFloat), Math.log2 || (Math.log2 = function(t) {
            return Math.log(t) * Math.LOG2E
        }), !window.location.origin) {
        var n = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ":" + window.location.port : "");
        window.location.origin = n
    }
    String.prototype.includes || (String.prototype.includes = function(t, e) {
        "use strict";
        return "number" != typeof e && (e = 0), !(e + t.length > this.length) && -1 !== this.indexOf(t, e)
    }), Array.prototype.includes || Object.defineProperty(Array.prototype, "includes", {
        enumerable: !1,
        value: function(t) {
            return this.filter((function(e) {
                return e == t
            })).length > 0
        }
    });
    var r = Object.keys;
    Object.keys = function(t) {
        switch (typeof t) {
            case "string":
                for (var e = [], n = 0; n < t.length; n++) e.push(n.toString());
                return e;
            case "boolean":
            case "number":
            case "function":
                return [];
            default:
                return r(t)
        }
    }, Array.prototype.fill || Object.defineProperty(Array.prototype, "fill", {
        value: function(t) {
            if (null == this) throw new TypeError("this is null or not defined");
            for (var e = Object(this), n = e.length >>> 0, r = arguments[1], i = r >> 0, o = i < 0 ? Math.max(n + i, 0) : Math.min(i, n), a = arguments[2], s = void 0 === a ? n : a >> 0, u = s < 0 ? Math.max(n + s, 0) : Math.min(s, n); o < u;) e[o] = t, o++;
            return e
        }
    }), "function" != typeof Object.assign && Object.defineProperty(Object, "assign", {
        value: function(t, e) {
            "use strict";
            if (null == t) throw new TypeError("Cannot convert undefined or null to object");
            for (var n = Object(t), r = 1; r < arguments.length; r++) {
                var i = arguments[r];
                if (null != i)
                    for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o])
            }
            return n
        },
        writable: !0,
        configurable: !0
    }), Array.prototype.find || Object.defineProperty(Array.prototype, "find", {
        value: function(t) {
            if (null == this) throw new TypeError('"this" is null or not defined');
            var e = Object(this),
                n = e.length >>> 0;
            if ("function" != typeof t) throw new TypeError("predicate must be a function");
            for (var r = arguments[1], i = 0; i < n;) {
                var o = e[i];
                if (t.call(r, o, i, e)) return o;
                i++
            }
        }
    }), Array.prototype.findIndex || Object.defineProperty(Array.prototype, "findIndex", {
        value: function(t) {
            if (null == this) throw new TypeError('"this" is null or not defined');
            var e = Object(this),
                n = e.length >>> 0;
            if ("function" != typeof t) throw new TypeError("predicate must be a function");
            for (var r = arguments[1], i = 0; i < n;) {
                var o = e[i];
                if (t.call(r, o, i, e)) return i;
                i++
            }
            return -1
        }
    }), Array.prototype.every || (Array.prototype.every = function(t, e) {
        "use strict";
        var n, r;
        if (null == this) throw new TypeError("this is null or not defined");
        var i = Object(this),
            o = i.length >>> 0;
        if ("function" != typeof t && "[object Function]" !== Object.prototype.toString.call(t)) throw new TypeError;
        for (arguments.length > 1 && (n = e), r = 0; r < o;) {
            var a;
            if (r in i)
                if (a = i[r], !(n ? t.call(n, a, r, i) : t(a, r, i))) return !1;
            r++
        }
        return !0
    })
}, function(t, e, n) {
    (function(t, r) {
        var i;

        function o(t) {
            return (o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            } : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            })(t)
        }! function(a) {
            var s = "object" == o(e) && e && !e.nodeType && e,
                u = "object" == o(t) && t && !t.nodeType && t,
                c = "object" == (void 0 === r ? "undefined" : o(r)) && r;
            c.global !== c && c.window !== c && c.self !== c || (a = c);
            var l, h, f = 2147483647,
                p = /^xn--/,
                d = /[^\x20-\x7E]/,
                m = /[\x2E\u3002\uFF0E\uFF61]/g,
                v = {
                    overflow: "Overflow: input needs wider integers to process",
                    "not-basic": "Illegal input >= 0x80 (not a basic code point)",
                    "invalid-input": "Invalid input"
                },
                y = Math.floor,
                g = String.fromCharCode;

            function b(t) {
                throw RangeError(v[t])
            }

            function _(t, e) {
                for (var n = t.length, r = []; n--;) r[n] = e(t[n]);
                return r
            }

            function w(t, e) {
                var n = t.split("@"),
                    r = "";
                return n.length > 1 && (r = n[0] + "@", t = n[1]), r + _((t = t.replace(m, ".")).split("."), e).join(".")
            }

            function x(t) {
                for (var e, n, r = [], i = 0, o = t.length; i < o;)(e = t.charCodeAt(i++)) >= 55296 && e <= 56319 && i < o ? 56320 == (64512 & (n = t.charCodeAt(i++))) ? r.push(((1023 & e) << 10) + (1023 & n) + 65536) : (r.push(e), i--) : r.push(e);
                return r
            }

            function E(t) {
                return _(t, (function(t) {
                    var e = "";
                    return t > 65535 && (e += g((t -= 65536) >>> 10 & 1023 | 55296), t = 56320 | 1023 & t), e += g(t)
                })).join("")
            }

            function S(t, e) {
                return t + 22 + 75 * (t < 26) - ((0 != e) << 5)
            }

            function T(t, e, n) {
                var r = 0;
                for (t = n ? y(t / 700) : t >> 1, t += y(t / e); t > 455; r += 36) t = y(t / 35);
                return y(r + 36 * t / (t + 38))
            }

            function M(t) {
                var e, n, r, i, o, a, s, u, c, l, h, p = [],
                    d = t.length,
                    m = 0,
                    v = 128,
                    g = 72;
                for ((n = t.lastIndexOf("-")) < 0 && (n = 0), r = 0; r < n; ++r) t.charCodeAt(r) >= 128 && b("not-basic"), p.push(t.charCodeAt(r));
                for (i = n > 0 ? n + 1 : 0; i < d;) {
                    for (o = m, a = 1, s = 36; i >= d && b("invalid-input"), ((u = (h = t.charCodeAt(i++)) - 48 < 10 ? h - 22 : h - 65 < 26 ? h - 65 : h - 97 < 26 ? h - 97 : 36) >= 36 || u > y((f - m) / a)) && b("overflow"), m += u * a, !(u < (c = s <= g ? 1 : s >= g + 26 ? 26 : s - g)); s += 36) a > y(f / (l = 36 - c)) && b("overflow"), a *= l;
                    g = T(m - o, e = p.length + 1, 0 == o), y(m / e) > f - v && b("overflow"), v += y(m / e), m %= e, p.splice(m++, 0, v)
                }
                return E(p)
            }

            function O(t) {
                var e, n, r, i, o, a, s, u, c, l, h, p, d, m, v, _ = [];
                for (p = (t = x(t)).length, e = 128, n = 0, o = 72, a = 0; a < p; ++a)(h = t[a]) < 128 && _.push(g(h));
                for (r = i = _.length, i && _.push("-"); r < p;) {
                    for (s = f, a = 0; a < p; ++a)(h = t[a]) >= e && h < s && (s = h);
                    for (s - e > y((f - n) / (d = r + 1)) && b("overflow"), n += (s - e) * d, e = s, a = 0; a < p; ++a)
                        if ((h = t[a]) < e && ++n > f && b("overflow"), h == e) {
                            for (u = n, c = 36; !(u < (l = c <= o ? 1 : c >= o + 26 ? 26 : c - o)); c += 36) v = u - l, m = 36 - l, _.push(g(S(l + v % m, 0))), u = y(v / m);
                            _.push(g(S(u, 0))), o = T(n, d, r == i), n = 0, ++r
                        }++n, ++e
                }
                return _.join("")
            }
            if (l = {
                    version: "1.3.2",
                    ucs2: {
                        decode: x,
                        encode: E
                    },
                    decode: M,
                    encode: O,
                    toASCII: function(t) {
                        return w(t, (function(t) {
                            return d.test(t) ? "xn--" + O(t) : t
                        }))
                    },
                    toUnicode: function(t) {
                        return w(t, (function(t) {
                            return p.test(t) ? M(t.slice(4).toLowerCase()) : t
                        }))
                    }
                }, "object" == o(n(223)) && n(223)) void 0 === (i = function() {
                return l
            }.call(e, n, e, t)) || (t.exports = i);
            else if (s && u)
                if (t.exports == s) u.exports = l;
                else
                    for (h in l) l.hasOwnProperty(h) && (s[h] = l[h]);
            else a.punycode = l
        }(this)
    }).call(this, n(304)(t), n(225))
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    t.exports = {
        isString: function(t) {
            return "string" == typeof t
        },
        isObject: function(t) {
            return "object" === r(t) && null !== t
        },
        isNull: function(t) {
            return null === t
        },
        isNullOrUndefined: function(t) {
            return null == t
        }
    }
}, function(t, e, n) {
    "use strict";
    e.decode = e.parse = n(421), e.encode = e.stringify = n(422)
}, function(t, e, n) {
    "use strict";

    function r(t, e) {
        return Object.prototype.hasOwnProperty.call(t, e)
    }
    t.exports = function(t, e, n, o) {
        e = e || "&", n = n || "=";
        var a = {};
        if ("string" != typeof t || 0 === t.length) return a;
        var s = /\+/g;
        t = t.split(e);
        var u = 1e3;
        o && "number" == typeof o.maxKeys && (u = o.maxKeys);
        var c = t.length;
        u > 0 && c > u && (c = u);
        for (var l = 0; l < c; ++l) {
            var h, f, p, d, m = t[l].replace(s, "%20"),
                v = m.indexOf(n);
            v >= 0 ? (h = m.substr(0, v), f = m.substr(v + 1)) : (h = m, f = ""), p = decodeURIComponent(h), d = decodeURIComponent(f), r(a, p) ? i(a[p]) ? a[p].push(d) : a[p] = [a[p], d] : a[p] = d
        }
        return a
    };
    var i = Array.isArray || function(t) {
        return "[object Array]" === Object.prototype.toString.call(t)
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i = function(t) {
        switch (r(t)) {
            case "string":
                return t;
            case "boolean":
                return t ? "true" : "false";
            case "number":
                return isFinite(t) ? t : "";
            default:
                return ""
        }
    };
    t.exports = function(t, e, n, u) {
        return e = e || "&", n = n || "=", null === t && (t = void 0), "object" === r(t) ? a(s(t), (function(r) {
            var s = encodeURIComponent(i(r)) + n;
            return o(t[r]) ? a(t[r], (function(t) {
                return s + encodeURIComponent(i(t))
            })).join(e) : s + encodeURIComponent(i(t[r]))
        })).join(e) : u ? encodeURIComponent(i(u)) + n + encodeURIComponent(i(t)) : ""
    };
    var o = Array.isArray || function(t) {
        return "[object Array]" === Object.prototype.toString.call(t)
    };

    function a(t, e) {
        if (t.map) return t.map(e);
        for (var n = [], r = 0; r < t.length; r++) n.push(e(t[r], r));
        return n
    }
    var s = Object.keys || function(t) {
        var e = [];
        for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e.push(n);
        return e
    }
}, function(t, e, n) {}, , function(t, e, n) {
    var r = n(426),
        i = n(427),
        o = n(428),
        a = ["x", "e", "a", "o", "n", "s", "r", "c", "u", "m", "v", "w", "z"],
        s = ["m", "w"],
        u = ["H", "I", "N", "E", "F", "K", "L", "T", "U", "V", "W", "X", "Y", "Z"],
        c = "\t".charCodeAt(0),
        l = " ".charCodeAt(0);

    function h(t) {
        this.glyphs = [], this._measure = this.computeMetrics.bind(this), this.update(t)
    }

    function f(t) {
        return new Function(["return function " + t + "() {", "  return this._" + t, "}"].join("\n"))()
    }

    function p(t, e) {
        if (!t.chars || 0 === t.chars.length) return null;
        var n = m(t.chars, e);
        return n >= 0 ? t.chars[n] : null
    }

    function d(t, e, n) {
        if (!t.kernings || 0 === t.kernings.length) return 0;
        for (var r = t.kernings, i = 0; i < r.length; i++) {
            var o = r[i];
            if (o.first === e && o.second === n) return o.amount
        }
        return 0
    }

    function m(t, e, n) {
        for (var r = n = n || 0; r < t.length; r++)
            if (t[r].id === e) return r;
        return -1
    }
    t.exports = function(t) {
        return new h(t)
    }, h.prototype.update = function(t) {
        if (t = i({
                measure: this._measure
            }, t), this._opt = t, this._opt.tabSize = o(this._opt.tabSize, 4), !t.font) throw new Error("must provide a valid bitmap font");
        var e = this.glyphs,
            n = t.text || "",
            s = t.font;
        this._setupSpaceGlyphs(s);
        var c = r.lines(n, t),
            l = t.width || 0;
        e.length = 0;
        var h = c.reduce((function(t, e) {
                return Math.max(t, e.width, l)
            }), 0),
            f = 0,
            p = 0,
            v = o(t.lineHeight, s.common.lineHeight),
            y = s.common.base,
            g = v - y,
            b = t.letterSpacing || 0,
            _ = v * c.length - g,
            w = function(t) {
                if ("center" === t) return 1;
                if ("right" === t) return 2;
                return 0
            }(this._opt.align);
        p -= _, this._width = h, this._height = _, this._descender = v - y, this._baseline = y, this._xHeight = function(t) {
            for (var e = 0; e < a.length; e++) {
                var n = a[e].charCodeAt(0),
                    r = m(t.chars, n);
                if (r >= 0) return t.chars[r].height
            }
            return 0
        }(s), this._capHeight = function(t) {
            for (var e = 0; e < u.length; e++) {
                var n = u[e].charCodeAt(0),
                    r = m(t.chars, n);
                if (r >= 0) return t.chars[r].height
            }
            return 0
        }(s), this._lineHeight = v, this._ascender = v - g - this._xHeight;
        var x = this;
        c.forEach((function(t, r) {
            for (var i, o = t.start, a = t.end, u = t.width, c = o; c < a; c++) {
                var l = n.charCodeAt(c),
                    m = x.getGlyph(s, l);
                if (m) {
                    i && (f += d(s, i.id, m.id));
                    var y = f;
                    1 === w ? y += (h - u) / 2 : 2 === w && (y += h - u), e.push({
                        position: [y, p],
                        data: m,
                        index: c,
                        line: r
                    }), f += m.xadvance + b, i = m
                }
            }
            p += v, f = 0
        })), this._linesTotal = c.length
    }, h.prototype._setupSpaceGlyphs = function(t) {
        if (this._fallbackSpaceGlyph = null, this._fallbackTabGlyph = null, t.chars && 0 !== t.chars.length) {
            var e = p(t, l) || function(t) {
                    for (var e = 0; e < s.length; e++) {
                        var n = s[e].charCodeAt(0),
                            r = m(t.chars, n);
                        if (r >= 0) return t.chars[r]
                    }
                    return 0
                }(t) || t.chars[0],
                n = this._opt.tabSize * e.xadvance;
            this._fallbackSpaceGlyph = e, this._fallbackTabGlyph = i(e, {
                x: 0,
                y: 0,
                xadvance: n,
                id: c,
                xoffset: 0,
                yoffset: 0,
                width: 0,
                height: 0
            })
        }
    }, h.prototype.getGlyph = function(t, e) {
        var n = p(t, e);
        return n || (e === c ? this._fallbackTabGlyph : e === l ? this._fallbackSpaceGlyph : null)
    }, h.prototype.computeMetrics = function(t, e, n, r) {
        var i, o = this._opt.letterSpacing || 0,
            a = this._opt.font,
            s = 0,
            u = 0,
            c = 0;
        if (!a.chars || 0 === a.chars.length) return {
            start: e,
            end: e,
            width: 0
        };
        n = Math.min(t.length, n);
        for (var l = e; l < n; l++) {
            var h, f = t.charCodeAt(l);
            if (h = this.getGlyph(a, f)) {
                h.xoffset;
                var p = (s += i ? d(a, i.id, h.id) : 0) + h.xadvance + o,
                    m = s + h.width;
                if (m >= r || p >= r) break;
                s = p, u = m, i = h
            }
            c++
        }
        return i && (u += i.xoffset), {
            start: e,
            end: e + c,
            width: u
        }
    }, ["width", "height", "descender", "ascender", "xHeight", "baseline", "capHeight", "lineHeight"].forEach((function(t) {
        Object.defineProperty(h.prototype, t, {
            get: f(t),
            configurable: !0
        })
    }))
}, function(t, e) {
    var n = /\n/,
        r = /\s/;

    function i(t, e, n, r) {
        var i = t.indexOf(e, n);
        return -1 === i || i > r ? r : i
    }

    function o(t) {
        return r.test(t)
    }

    function a(t, e, n, r) {
        return {
            start: e,
            end: e + Math.min(r, n - e)
        }
    }
    t.exports = function(e, n) {
        return t.exports.lines(e, n).map((function(t) {
            return e.substring(t.start, t.end)
        })).join("\n")
    }, t.exports.lines = function(t, e) {
        if (0 === (e = e || {}).width && "nowrap" !== e.mode) return [];
        t = t || "";
        var r = "number" == typeof e.width ? e.width : Number.MAX_VALUE,
            s = Math.max(0, e.start || 0),
            u = "number" == typeof e.end ? e.end : t.length,
            c = e.mode,
            l = e.measure || a;
        return "pre" === c ? function(t, e, r, i, o) {
            for (var a = [], s = r, u = r; u < i && u < e.length; u++) {
                var c = e.charAt(u),
                    l = n.test(c);
                if (l || u === i - 1) {
                    var h = t(e, s, l ? u : u + 1, o);
                    a.push(h), s = u + 1
                }
            }
            return a
        }(l, t, s, u, r) : function(t, e, n, r, a, s) {
            var u = [],
                c = a;
            "nowrap" === s && (c = Number.MAX_VALUE);
            for (; n < r && n < e.length;) {
                for (var l = i(e, "\n", n, r); n < l && o(e.charAt(n));) n++;
                var h = t(e, n, l, c),
                    f = n + (h.end - h.start),
                    p = f + "\n".length;
                if (f < l) {
                    for (; f > n && !o(e.charAt(f));) f--;
                    if (f === n) p > n + "\n".length && p--, f = p;
                    else
                        for (p = f; f > n && o(e.charAt(f - "\n".length));) f--
                }
                if (f >= n) {
                    var d = t(e, n, f, c);
                    u.push(d)
                }
                n = p
            }
            return u
        }(l, t, s, u, r, c)
    }
}, function(t, e) {
    t.exports = function() {
        for (var t = {}, e = 0; e < arguments.length; e++) {
            var r = arguments[e];
            for (var i in r) n.call(r, i) && (t[i] = r[i])
        }
        return t
    };
    var n = Object.prototype.hasOwnProperty
}, function(t, e) {
    t.exports = function(t, e) {
        return "number" == typeof t ? t : "number" == typeof e ? e : 0
    }
}, function(t, e) {
    "function" == typeof Object.create ? t.exports = function(t, e) {
        t.super_ = e, t.prototype = Object.create(e.prototype, {
            constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        })
    } : t.exports = function(t, e) {
        t.super_ = e;
        var n = function() {};
        n.prototype = e.prototype, t.prototype = new n, t.prototype.constructor = t
    }
}, function(t, e, n) {
    var r = n(311),
        i = n(431),
        o = n(432),
        a = [0, 2, 3],
        s = [2, 1, 3];
    t.exports = function(t, e) {
        t && (i(t) || o(t)) || (e = t || {}, t = null);
        for (var n = "string" == typeof(e = "number" == typeof e ? {
                count: e
            } : e || {}).type ? e.type : "uint16", u = "number" == typeof e.count ? e.count : 1, c = e.start || 0, l = !1 !== e.clockwise ? a : s, h = l[0], f = l[1], p = l[2], d = 6 * u, m = t || new(r(n))(d), v = 0, y = 0; v < d; v += 6, y += 4) {
            var g = v + c;
            m[g + 0] = y + 0, m[g + 1] = y + 1, m[g + 2] = y + 2, m[g + 3] = y + h, m[g + 4] = y + f, m[g + 5] = y + p
        }
        return m
    }
}, function(t, e) {
    var n = Object.prototype.toString;
    t.exports = function(t) {
        return t.BYTES_PER_ELEMENT && "[object ArrayBuffer]" === n.call(t.buffer) || Array.isArray(t)
    }
}, function(t, e) {
    function n(t) {
        return !!t.constructor && "function" == typeof t.constructor.isBuffer && t.constructor.isBuffer(t)
    }
    t.exports = function(t) {
        return null != t && (n(t) || function(t) {
            return "function" == typeof t.readFloatLE && "function" == typeof t.slice && n(t.slice(0, 0))
        }(t) || !!t._isBuffer)
    }
}, function(t, e, n) {
    var r = n(434);

    function i(t, e, n, i) {
        return e = r(e = e || [], i), (t = new THREE.BufferAttribute(e, n)).itemSize = n, t.needsUpdate = !0, t
    }
    t.exports.attr = function(t, e, n, r, o) {
        "number" != typeof r && (r = 3);
        "string" != typeof o && (o = "float32");
        if (Array.isArray(n) && Array.isArray(n[0]) && n[0].length !== r) throw new Error("Nested vertex array has unexpected size; expected " + r + " but found " + n[0].length);
        var a = i(t.getAttribute(e), n, r, o);
        t.setAttribute(e, a)
    }, t.exports.index = function(t, e, n, r) {
        "number" != typeof n && (n = 1);
        "string" != typeof r && (r = "uint16");
        var o = !t.index && "function" != typeof t.setIndex,
            a = i(o ? t.getAttribute("index") : t.index, e, n, r);
        a && (o ? t.addAttribute("index", a) : t.index = a)
    }
}, function(t, e, n) {
    var r = n(311);
    t.exports = function(t, e, n) {
        if (!t) throw new TypeError("must specify data as first parameter");
        if (n = 0 | +(n || 0), Array.isArray(t) && t[0] && "number" == typeof t[0][0]) {
            var i, o, a, s, u = t[0].length,
                c = t.length * u;
            e && "string" != typeof e || (e = new(r(e || "float32"))(c + n));
            var l = e.length - n;
            if (c !== l) throw new Error("source length " + c + " (" + u + "x" + t.length + ") does not match destination length " + l);
            for (i = 0, a = n; i < t.length; i++)
                for (o = 0; o < u; o++) e[a++] = null === t[i][o] ? NaN : t[i][o]
        } else if (e && "string" != typeof e) e.set(t, n);
        else {
            var h = r(e || "float32");
            if (Array.isArray(t) || "array" === e)
                for (e = new h(t.length + n), i = 0, a = n, s = e.length; a < s; a++, i++) e[a] = null === t[i] ? NaN : t[i];
            else 0 === n ? e = new h(t) : (e = new h(t.length + n)).set(t, n)
        }
        return e
    }
}, function(t, e) {
    t.exports.pages = function(t) {
        var e = new Float32Array(4 * t.length * 1),
            n = 0;
        return t.forEach((function(t) {
            var r = t.data.page || 0;
            e[n++] = r, e[n++] = r, e[n++] = r, e[n++] = r
        })), e
    }, t.exports.uvs = function(t, e, n, r) {
        var i = new Float32Array(4 * t.length * 2),
            o = 0;
        return t.forEach((function(t) {
            var a = t.data,
                s = a.x + a.width,
                u = a.y + a.height,
                c = a.x / e,
                l = a.y / n,
                h = s / e,
                f = u / n;
            r && (l = (n - a.y) / n, f = (n - u) / n), i[o++] = c, i[o++] = l, i[o++] = c, i[o++] = f, i[o++] = h, i[o++] = f, i[o++] = h, i[o++] = l
        })), i
    }, t.exports.positions = function(t) {
        var e = new Float32Array(4 * t.length * 2),
            n = 0;
        return t.forEach((function(t) {
            var r = t.data,
                i = t.position[0] + r.xoffset,
                o = t.position[1] + r.yoffset,
                a = r.width,
                s = r.height;
            e[n++] = i, e[n++] = o, e[n++] = i, e[n++] = o + s, e[n++] = i + a, e[n++] = o + s, e[n++] = i + a, e[n++] = o
        })), e
    }
}, function(t, e) {
    var n = {
        min: [0, 0],
        max: [0, 0]
    };

    function r(t) {
        var e = t.length / 2;
        n.min[0] = t[0], n.min[1] = t[1], n.max[0] = t[0], n.max[1] = t[1];
        for (var r = 0; r < e; r++) {
            var i = t[2 * r + 0],
                o = t[2 * r + 1];
            n.min[0] = Math.min(i, n.min[0]), n.min[1] = Math.min(o, n.min[1]), n.max[0] = Math.max(i, n.max[0]), n.max[1] = Math.max(o, n.max[1])
        }
    }
    t.exports.computeBox = function(t, e) {
        r(t), e.min.set(n.min[0], n.min[1], 0), e.max.set(n.max[0], n.max[1], 0)
    }, t.exports.computeSphere = function(t, e) {
        r(t);
        var i = n.min[0],
            o = n.min[1],
            a = n.max[0] - i,
            s = n.max[1] - o,
            u = Math.sqrt(a * a + s * s);
        e.center.set(i + a / 2, o + s / 2, 0), e.radius = u / 2
    }
}, function(t, e) {
    t.exports = "uniform float opacity;\nuniform vec3 color;\nuniform sampler2D bg;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec4 bgColor = texture2D(bg, vUv);\n  gl_FragColor = vec4(bgColor.rgb, bgColor.a * opacity);\n}\n"
}, function(t, e) {
    t.exports = "#include <common>\n\nuniform float linewidth;\nuniform vec2 resolution;\n\nattribute vec3 instanceStart;\nattribute vec3 instanceEnd;\n\nattribute vec3 instanceColorStart;\nattribute vec3 instanceColorEnd;\n\nvarying vec2 vUv;\n\n#ifdef USE_DASH\n\n  uniform float dashScale;\n  attribute float instanceDistanceStart;\n  attribute float instanceDistanceEnd;\n  varying float vLineDistance;\n\n#endif\n\nvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n  // trim end segment so it terminates between the camera plane and the near plane\n\n  // conservative estimate of the near plane\n  float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n  float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n  float nearEstimate = - 0.5 * b / a;\n\n  float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n  end.xyz = mix( start.xyz, end.xyz, alpha );\n\n}\n\nvoid main() {\n\n  #ifdef USE_COLOR\n    vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n  #endif\n\n  #ifdef USE_DASH\n    vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n  #endif\n\n  float aspect = resolution.x / resolution.y;\n  vUv = uv;\n\n  // camera space\n  vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n  vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n  // special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n  // clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n  // but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n  // perhaps there is a more elegant solution -- WestLangley\n\n  bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n  if ( perspective ) {\n    if ( start.z < 0.0 && end.z >= 0.0 ) {\n      trimSegment( start, end );\n    } else if ( end.z < 0.0 && start.z >= 0.0 ) {\n      trimSegment( end, start );\n    }\n  }\n\n  // clip space\n  vec4 clipStart = projectionMatrix * start;\n  vec4 clipEnd = projectionMatrix * end;\n\n  // ndc space\n  vec2 ndcStart = clipStart.xy / clipStart.w;\n  vec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n  // direction\n  vec2 dir = ndcEnd - ndcStart;\n\n  // account for clip-space aspect ratio\n  dir.x *= aspect;\n  dir = normalize( dir );\n\n  // perpendicular to dir\n  vec2 offset = vec2( dir.y, - dir.x );\n\n  // undo aspect ratio adjustment\n  dir.x /= aspect;\n  offset.x /= aspect;\n\n  // sign flip\n  if ( position.x < 0.0 ) offset *= - 1.0;\n\n  // adjust for linewidth\n  offset *= linewidth;\n\n  // adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n  offset /= resolution.y;\n\n  // select end\n  vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n  // convert back to clip space.\n#ifdef USE_MASK\n  // instead of choosing which clip to use based on position in the line, just merge them together, it helps with\n  // glancing angles while using alpha / uvs. the difference is it still shows some perspective instead of being strictly\n  // pixel width, but it looks better in pretty much all cases except when the line is directly on the view direction\n  // meh. - DB - 10/19\n  offset *= (clipEnd.w + clipStart.w) * 0.5;\n#else\n  // swapping the value works better for no texture though, since it stays a stable width on screen.\n  offset *= clip.w;\n#endif\n\n  clip.xy += offset;\n\n  gl_Position = clip;\n\n  #include <worldpos_vertex>\n\n}"
}, function(t, e) {
    t.exports = "uniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D mask;\n\n#ifdef USE_DASH\n  uniform float dashSize;\n  uniform float gapSize;\n#endif\n\nvarying float vLineDistance;\n\n#include <common>\n\nvarying vec2 vUv;\n\nvoid main() {\n  #ifdef USE_DASH\n    if ( vUv.y < -1.0 || vUv.y > 1.0 ) discard; // TODO (measure) - unused now?\n    if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard;\n  #endif\n\n  // TODO (measure): I don't think this ever even gets run now that uv's are between 0-2\n  // and it wasn't clear wtf it was doing to begin with?\n  //if ( abs( vUv.y ) > 1.0 ) {\n  //  float a = vUv.x;\n  //  float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n  //  float len2 = a * a + b * b;\n  //  if ( len2 > 1.0 ) discard;\n  //}\n\n  #ifdef USE_MASK\n    vec2 modUv = vec2(vUv);\n    modUv *= 2.0;\n    vec4 texelColor = texture2D( mask, modUv );\n    gl_FragColor = vec4( texelColor.rgb, min(texelColor.a, opacity) );\n  #else\n    gl_FragColor = vec4( diffuse, opacity );\n  #endif\n}"
}, function(t, e, n) {}, , function(t, e) {
    t.exports = "data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyMzAuMDUgNDkuNzUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6I2Y1ZjRmM30uc3Qye2ZpbGw6I2ZmZn0uc3Qze2ZpbGw6Izk5OX08L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik02MS4yOCAzNi4xNHYtOC44MmwtLjI0LTUuMDkuMTktLjA0IDIuMDUgNC41NCA0LjgyIDguODYgNC44Mi04Ljg2IDIuMDYtNC41NC4xOC4wNC0uMjQgNS4wOXY4LjgyaDUuMTRWMTQuNGgtNS44MWwtNi4xMSAxMS43N2gtLjA3TDYxLjk1IDE0LjRoLTUuODF2MjEuNzR6TTIxMi42OSAzMC42M2MwIDMuNiAxLjk0IDUuNSA1LjYxIDUuNWgzLjE3di00LjQ1aC0zLjQ1di05LjQ5aDMuNzR2LTQuMzZoLTQuMTV2LTQuMjFoLTQuOTF2MTcuMDF6TTIxMS4yNiAxNy44M2gtLjg3Yy0zLjAxIDAtNC40NCAyLjAzLTQuODkgMy40M2gtLjE4di0zLjQzSDIwMHYxOC4zMWg1LjMyVjI1LjcyYzAtMS4wOC40MS0xLjg0LjkzLTIuMzMuODktLjg2IDIuNzktMS4xMSA1LjAxLTEuMTF2LTQuNDV6TTE1OC42MyAxNy44M2gtLjg3Yy0zLjAxIDAtNC40NCAyLjAzLTQuODkgMy40M2gtLjE4di0zLjQzaC01LjMydjE4LjMxaDUuMzJWMjUuNzJjMC0xLjA4LjQxLTEuODQuOTMtMi4zMy44OS0uODYgMi43OS0xLjExIDUuMDEtMS4xMXYtNC40NXpNMTI3LjQ4IDI3LjI1YzAtNS45NyAzLjE3LTkuODYgOC44NS05Ljg2IDYuMjYgMCA4Ljc4IDQuNTMgOC43OCA5LjY0djEuNThoLTEyLjEydi4xOGMwIDIuMTIgMS4xNCAzLjYgNC4xNyAzLjYgMi4yMyAwIDMuNDUtMS4wNCA0LjY0LTIuMjdsMi42NiAzLjMxYy0xLjY5IDEuOTQtNC40NiAzLjEzLTcuOTEgMy4xMy01LjguMDEtOS4wNy0zLjI3LTkuMDctOS4zMXptNS41LTIuMDV2LjI5aDYuNjJ2LS4zMmMwLTIuMy0xLjA0LTMuODUtMy4xNy0zLjg1cy0zLjQ1IDEuNTQtMy40NSAzLjg4ek0xODAuMDQgMjcuMjVjMC02LjA4IDMuMzEtOS44NiA4Ljg1LTkuODYgNS41NCAwIDguODUgMy43OCA4Ljg1IDkuODZzLTMuMzEgOS4zMi04Ljg1IDkuMzJjLTUuNTUgMC04Ljg1LTMuMjQtOC44NS05LjMyem0xMi4xNSAxLjM3di0zLjI3YzAtMi4zNy0xLjIyLTMuNzQtMy4zMS0zLjc0cy0zLjMxIDEuMzctMy4zMSAzLjc0djMuMjdjMCAyLjM3IDEuMjIgMy43NCAzLjMxIDMuNzRzMy4zMS0xLjM3IDMuMzEtMy43NHpNMTIyLjQyIDEzLjYyaC00Ljc4djIuMTljMCAxLjMtLjQzIDIuMDEtMS44NyAyLjAxaC0xLjMzdjQuMzZoMi42NnY4LjQ0YzAgMy42IDEuOTQgNS41IDUuNjEgNS41aDMuMTd2LTQuNDVoLTMuNDV2LTkuNDloMy43NHYtNC4zNmgtMy43NHYtNC4yek0xMDkuMTcgMTMuNjJoLTQuNzh2Mi4xOWMwIDEuMy0uNDMgMi4wMS0xLjg3IDIuMDFoLTEuMzN2NC4zNmgyLjY2djguNDRjMCAzLjYgMS45NCA1LjUgNS42MSA1LjVoMy4xN3YtNC40NWgtMy40NXYtOS40OWgzLjc0di00LjM2aC0zLjc0di00LjJ6TTE3MC45IDE3LjM5Yy0yLjQ1IDAtNC41MyAxLjUxLTUuMDcgMy42aC0uMTh2LTMuMTdoLTUuMzJ2MjMuODJoNS4zMnYtOC42N2guMThjLjU0IDIuMDUgMi42MyAzLjYgNS4wNyAzLjYgNC43OCAwIDcuMjctMi45MSA3LjI3LTkuMzItLjAxLTYuNC0yLjQ5LTkuODYtNy4yNy05Ljg2em0xLjcyIDExLjUyYzAgMi4zNy0xLjQ4IDMuMzUtMy40OSAzLjM1LTIuMDEgMC0zLjQ5LTEuMDQtMy40OS0yLjc3di01YzAtMS43MyAxLjQ4LTIuNzcgMy40OS0yLjc3IDIuMDEgMCAzLjQ5IDEuNTUgMy40OSAzLjkydjMuMjd6TTk3LjgzIDM2LjE0Yy0xLjkxIDAtMy4yNy0xLjMtMy42LTMuMzFoLS4yMmMtLjU4IDIuNDUtMi42NiAzLjc0LTUuNTQgMy43NC0zLjc4IDAtNS44Ni0yLjIzLTUuODYtNS41IDAtMy45OSAzLjA5LTUuOSA4LjA5LTUuOWgyLjk5di0uNjFjMC0xLjgzLS45LTIuOTktMy4xMy0yLjk5LTIuMTIgMC0zLjI0IDEuMDgtNC4wNiAyLjIzbC0zLjE3LTIuODFjMS41MS0yLjIzIDMuNjctMy42IDcuNjMtMy42IDUuMzIgMCA4LjA2IDIuNDUgOC4wNiA2LjkxdjcuMzhoMS43NnY0LjQ1aC0yLjk1em0tNC4xMy01Ljcydi0yLjIzaC0yLjU5Yy0yLjA1IDAtMy4xMy43Ni0zLjEzIDIuMTJ2LjU0YzAgMS4zNy45IDIuMDEgMi40OCAyLjAxIDEuNzYgMCAzLjI0LS43MiAzLjI0LTIuNDR6Ii8+PGc+PHBhdGggZD0iTTM5LjA1IDYuOTFMMjYuMjQgMTAuNSAxMy40MiA2LjkxIDguMyA4LjM1djMzLjA2bDUuMTMgMS40NCAxMi44Mi0zLjU5IDEyLjgyIDMuNTkgNS4xMy0xLjQ0VjguMzVsLTUuMTUtMS40NHptLTUuMTIgMjQuNjdsLTcuNjktMi4xNS03LjY5IDIuMTV2LTEzLjRsNy42OSAyLjE1IDcuNjktMi4xNXYxMy40eiIgZmlsbD0iI2I3YmFiYiIvPjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0yNi4yNCAxMy4zN3Y2Ljk2bC0xMi44Mi0zLjU5djI2LjFMOC4zIDQxLjQxVjguMzV6TTMzLjkzIDM0LjQ1bC03LjY5LTIuMTZ2Ni45NmwxMi44MSAzLjU5di0yNi4xbC01LjEyIDEuNDR6Ii8+PGc+PHBhdGggY2xhc3M9InN0MyIgZD0iTTM5LjA1IDYuOTFsNS4xMyAxLjQ0LTE3Ljk0IDUuMDJMOC4zIDguMzVsNS4xMi0xLjQ0IDEyLjgyIDMuNTl6TTI2LjI0IDI5LjQybDcuNjkgMi4xNnYyLjg3bC03LjY5LTIuMTYtNy42OSAyLjE2di0yLjg3eiIvPjwvZz48L2c+PC9zdmc+"
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(174),
        o = n(85),
        a = n(2),
        s = n(173),
        u = n(20),
        c = n(246),
        l = n(3),
        h = n(60),
        f = n(14),
        p = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        d = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        m = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        v = new l.a("camera-start"),
        y = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "camera-start", e
            }
            return p(e, t), e.prototype.init = function(t, e) {
                return d(this, void 0, void 0, (function() {
                    var n, r, a, u, c, l, f, p, d;
                    return m(this, (function(m) {
                        switch (m.label) {
                            case 0:
                                return this.engine = e, n = this, [4, e.market.waitForData(h.a)];
                            case 1:
                                return n.sweepData = m.sent(), [4, t.cameraStartSync.load()];
                            case 2:
                                return r = m.sent(), a = this, [4, e.market.waitForData(i.a)];
                            case 3:
                                return a.snapshotsData = m.sent(), (u = s.a.deserialize()) && (c = this.parseNavigationPose(u), this.validStartPano(c) ? (this.startingPose = new o.b, this.startingPose.copy(c), v.debug("Starting Camera Pose", this.startingPose)) : v.error("Invalid start pose", c)), l = r && r.icon || void 0, f = r && r.hasCameraPose && this.validStartPano(r.pose) && r.pose, p = r && r.thumb || this.getIconThumbnail(l) || void 0, d = this.getIconStartPose(l) || f || this.getStartFallback(), this.data = new o.a(l, p, d), e.market.register(this, o.a, this.data), t.createSyncMonitor && t.cameraStartSync.addMonitor(t.createSyncMonitor()), [2]
                        }
                    }))
                }))
            }, e.prototype.getStartingPose = function() {
                return this.startingPose || this.data.pose
            }, e.prototype.parseNavigationPose = function(t) {
                var e = t.mode,
                    n = t.quaternion,
                    r = t.position,
                    i = t.floorVisibility,
                    o = t.sweepIndex,
                    a = t.zoom,
                    s = t.panoId;
                if (!s && void 0 !== o) {
                    var u = this.sweepData.getSweepByIndex(o);
                    u ? s = u.id : v.debug("Failed to load sweep index " + o)
                }
                return {
                    mode: e,
                    camera: {
                        position: r,
                        rotation: n,
                        zoom: a
                    },
                    pano: {
                        uuid: s,
                        position: r,
                        rotation: n
                    },
                    floorVisibility: i
                }
            }, e.prototype.updateStartLocationFromSnapshot = function(t) {
                var e = this.buildCameraStart(t),
                    n = new o.a(t.sid, t.thumbnailUrl, e);
                this.engine.broadcast(new c.a(t.is360)), this.data.copy(n), this.data.commit()
            }, e.prototype.buildCameraStart = function(t) {
                var e = {
                    mode: t.metadata.camera_mode,
                    camera: {
                        position: t.metadata.camera_position,
                        rotation: t.metadata.camera_quaternion,
                        zoom: t.metadata.ortho_zoom
                    },
                    pano: {}
                };
                return e.mode === u.a.Panorama && (e.pano = {
                    uuid: t.metadata.scan_id,
                    position: t.metadata.camera_position,
                    rotation: t.metadata.camera_quaternion
                }), e.floorVisibility = t.metadata.floorVisibility, e
            }, e.prototype.defaultCameraStart = function(t) {
                return {
                    mode: u.a.Panorama,
                    camera: {
                        position: t.position,
                        rotation: Object(f.m)(t.rotation),
                        zoom: 0
                    },
                    pano: {
                        uuid: t.id,
                        position: t.position,
                        rotation: t.rotation
                    }
                }
            }, e.prototype.validStartPano = function(t) {
                return !!t && (t.mode !== u.a.Panorama || !!t.pano.uuid && this.sweepData.containsSweep(t.pano.uuid))
            }, e.prototype.getStartFallback = function() {
                var t = this.sweepData.getFirstAlignedSweep();
                return this.defaultCameraStart(t || this.sweepData.getFirstSweep())
            }, e.prototype.getIconStartPose = function(t) {
                var e = null;
                return t && t in this.snapshotsData.collection && (e = (new o.b).copy(this.buildCameraStart(this.snapshotsData.get(t)))), this.validStartPano(e) || (e = null), e
            }, e.prototype.getIconThumbnail = function(t) {
                if (t && t in this.snapshotsData.collection) return this.snapshotsData.get(t).thumbnailUrl
            }, e
        }(a.d);
    e.default = y
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(2),
        o = n(174),
        a = n(60),
        s = n(154),
        u = n(20),
        c = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        l = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        h = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        f = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "snapshots", e
            }
            return c(e, t), e.prototype.init = function(t, e) {
                return l(this, void 0, void 0, (function() {
                    var n, r, i;
                    return h(this, (function(s) {
                        switch (s.label) {
                            case 0:
                                return [4, t.snapshotsStore.read()];
                            case 1:
                                return n = s.sent() || {}, r = this, [4, e.market.waitForData(a.a)];
                            case 2:
                                for (i in r.sweepData = s.sent(), n) this.processSnapshot(n[i]);
                                return this.snapshotsData = new o.a(n), e.market.register(this, o.a, this.snapshotsData), [2]
                        }
                    }))
                }))
            }, e.prototype.processSnapshot = function(t) {
                var e = t.metadata.camera_mode === u.a.Panorama,
                    n = !Object(s.b)(this.sweepData, t.metadata.scan_id);
                if (t.is360 = e && n, e) {
                    var r = this.sweepData.getSweep(t.metadata.scan_id);
                    r && t.metadata.camera_position.copy(r.position)
                }
            }, e.prototype.addSnapshot = function(t) {
                this.processSnapshot(t), this.snapshotsData.add(t), this.snapshotsData.commit()
            }, e
        }(i.sb);
    e.default = f
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(2),
        o = n(77),
        a = n(3),
        s = n(341),
        u = (n(45), n(6)),
        c = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        l = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        h = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        f = new a.a("Locale"),
        p = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "locale", e._languageCode = "en-US", e
            }
            return c(e, t), e.prototype.init = function(t, n) {
                return l(this, void 0, void 0, (function() {
                    var r, i, a, c, l, p;
                    return h(this, (function(h) {
                        switch (h.label) {
                            case 0:
                                return [4, n.market.waitForData(o.a)];
                            case 1:
                                return r = h.sent(), i = r.tryGetProperty("lang", Object(u.f)()), e.languageCodeMap.hasOwnProperty(i) && (this._languageCode = e.languageCodeMap[i]), a = this._languageCode.substr(0, 2), this.polyglot = new s({
                                    locale: a,
                                    interpolation: {
                                        prefix: "%{",
                                        suffix: "}"
                                    },
                                    onMissingKey: function(t) {
                                        return f.warn("Missing phrase key:" + t), e.missingPrefix + t
                                    }
                                }), c = "./locale/strings-" + this._languageCode + ".json", [4, t.queue.get(c)];
                            case 2:
                                return l = h.sent(), p = JSON.parse(l), this.polyglot.extend(p), f.info("Loaded phrases - " + c + " for " + a), [2]
                        }
                    }))
                }))
            }, e.prototype.t = function(t, e) {
                return this.polyglot.t(t, e)
            }, Object.defineProperty(e.prototype, "languageCode", {
                get: function() {
                    return this._languageCode
                },
                enumerable: !0,
                configurable: !0
            }), e.languageCodeMap = {
                en: "en-US",
                es: "es-MX",
                fr: "fr-FR",
                de: "de-DE",
                ru: "ru-RU",
                ja: "ja-JP",
                zh: "zh-CN",
                cn: "zh-CN",
                jp: "ja-JP"
            }, e.missingPrefix = "FIX-", e
        }(i.F);
    e.default = p
}, function(t, e, n) {
    "use strict";
    var r = n(240),
        i = Object.prototype.toString,
        o = Object.prototype.hasOwnProperty,
        a = function(t, e, n) {
            for (var r = 0, i = t.length; r < i; r++) o.call(t, r) && (null == n ? e(t[r], r, t) : e.call(n, t[r], r, t))
        },
        s = function(t, e, n) {
            for (var r = 0, i = t.length; r < i; r++) null == n ? e(t.charAt(r), r, t) : e.call(n, t.charAt(r), r, t)
        },
        u = function(t, e, n) {
            for (var r in t) o.call(t, r) && (null == n ? e(t[r], r, t) : e.call(n, t[r], r, t))
        };
    t.exports = function(t, e, n) {
        if (!r(e)) throw new TypeError("iterator must be a function");
        var o;
        arguments.length >= 3 && (o = n), "[object Array]" === i.call(t) ? a(t, e, o) : "string" == typeof t ? s(t, e, o) : u(t, e, o)
    }
}, function(t, e, n) {
    "use strict";
    var r = function() {};
    t.exports = r
}, function(t, e, n) {
    "use strict";
    var r = n(196);
    t.exports = r.call(Function.call, Object.prototype.hasOwnProperty)
}, function(t, e, n) {
    "use strict";
    var r = "Function.prototype.bind called on incompatible ",
        i = Array.prototype.slice,
        o = Object.prototype.toString;
    t.exports = function(t) {
        var e = this;
        if ("function" != typeof e || "[object Function]" !== o.call(e)) throw new TypeError(r + e);
        for (var n, a = i.call(arguments, 1), s = function() {
                if (this instanceof n) {
                    var r = e.apply(this, a.concat(i.call(arguments)));
                    return Object(r) === r ? r : this
                }
                return e.apply(t, a.concat(i.call(arguments)))
            }, u = Math.max(0, e.length - a.length), c = [], l = 0; l < u; l++) c.push("$" + l);
        if (n = Function("binder", "return function (" + c.join(",") + "){ return binder.apply(this,arguments); }")(s), e.prototype) {
            var h = function() {};
            h.prototype = e.prototype, n.prototype = new h, h.prototype = null
        }
        return n
    }
}, function(t, e, n) {
    "use strict";
    var r = n(196),
        i = n(314),
        o = n(315),
        a = n(316),
        s = n(462),
        u = r.call(Function.call, a());
    i(u, {
        getPolyfill: a,
        implementation: o,
        shim: s
    }), t.exports = u
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i = Object.prototype.hasOwnProperty,
        o = Object.prototype.toString,
        a = Array.prototype.slice,
        s = n(452),
        u = Object.prototype.propertyIsEnumerable,
        c = !u.call({
            toString: null
        }, "toString"),
        l = u.call((function() {}), "prototype"),
        h = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"],
        f = function(t) {
            var e = t.constructor;
            return e && e.prototype === t
        },
        p = {
            $console: !0,
            $external: !0,
            $frame: !0,
            $frameElement: !0,
            $frames: !0,
            $innerHeight: !0,
            $innerWidth: !0,
            $outerHeight: !0,
            $outerWidth: !0,
            $pageXOffset: !0,
            $pageYOffset: !0,
            $parent: !0,
            $scrollLeft: !0,
            $scrollTop: !0,
            $scrollX: !0,
            $scrollY: !0,
            $self: !0,
            $webkitIndexedDB: !0,
            $webkitStorageInfo: !0,
            $window: !0
        },
        d = function() {
            if ("undefined" == typeof window) return !1;
            for (var t in window) try {
                if (!p["$" + t] && i.call(window, t) && null !== window[t] && "object" === r(window[t])) try {
                    f(window[t])
                } catch (t) {
                    return !0
                }
            } catch (t) {
                return !0
            }
            return !1
        }(),
        m = function(t) {
            var e = null !== t && "object" === r(t),
                n = "[object Function]" === o.call(t),
                a = s(t),
                u = e && "[object String]" === o.call(t),
                p = [];
            if (!e && !n && !a) throw new TypeError("Object.keys called on a non-object");
            var m = l && n;
            if (u && t.length > 0 && !i.call(t, 0))
                for (var v = 0; v < t.length; ++v) p.push(String(v));
            if (a && t.length > 0)
                for (var y = 0; y < t.length; ++y) p.push(String(y));
            else
                for (var g in t) m && "prototype" === g || !i.call(t, g) || p.push(String(g));
            if (c)
                for (var b = function(t) {
                        if ("undefined" == typeof window || !d) return f(t);
                        try {
                            return f(t)
                        } catch (t) {
                            return !1
                        }
                    }(t), _ = 0; _ < h.length; ++_) b && "constructor" === h[_] || !i.call(t, h[_]) || p.push(h[_]);
            return p
        };
    m.shim = function() {
        if (Object.keys) {
            if (! function() {
                    return 2 === (Object.keys(arguments) || "").length
                }(1, 2)) {
                var t = Object.keys;
                Object.keys = function(e) {
                    return s(e) ? t(a.call(e)) : t(e)
                }
            }
        } else Object.keys = m;
        return Object.keys || m
    }, t.exports = m
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i = Object.prototype.toString;
    t.exports = function(t) {
        var e = i.call(t),
            n = "[object Arguments]" === e;
        return n || (n = "[object Array]" !== e && null !== t && "object" === r(t) && "number" == typeof t.length && t.length >= 0 && "[object Function]" === i.call(t.callee)), n
    }
}, function(t, e) {
    var n = Object.prototype.hasOwnProperty,
        r = Object.prototype.toString;
    t.exports = function(t, e, i) {
        if ("[object Function]" !== r.call(e)) throw new TypeError("iterator must be a function");
        var o = t.length;
        if (o === +o)
            for (var a = 0; a < o; a++) e.call(i, t[a], a, t);
        else
            for (var s in t) n.call(t, s) && e.call(i, t[s], s, t)
    }
}, function(t, e, n) {
    "use strict";

    function r(t) {
        return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    var i = n(455),
        o = n(456),
        a = n(457),
        s = n(458),
        u = n(240),
        c = n(459),
        l = n(461),
        h = {
            ToPrimitive: c,
            ToBoolean: function(t) {
                return !!t
            },
            ToNumber: function(t) {
                return Number(t)
            },
            ToInteger: function(t) {
                var e = this.ToNumber(t);
                return i(e) ? 0 : 0 !== e && o(e) ? a(e) * Math.floor(Math.abs(e)) : e
            },
            ToInt32: function(t) {
                return this.ToNumber(t) >> 0
            },
            ToUint32: function(t) {
                return this.ToNumber(t) >>> 0
            },
            ToUint16: function(t) {
                var e = this.ToNumber(t);
                if (i(e) || 0 === e || !o(e)) return 0;
                var n = a(e) * Math.floor(Math.abs(e));
                return s(n, 65536)
            },
            ToString: function(t) {
                return String(t)
            },
            ToObject: function(t) {
                return this.CheckObjectCoercible(t), Object(t)
            },
            CheckObjectCoercible: function(t, e) {
                if (null == t) throw new TypeError(e || "Cannot call method on " + t);
                return t
            },
            IsCallable: u,
            SameValue: function(t, e) {
                return t === e ? 0 !== t || 1 / t == 1 / e : i(t) && i(e)
            },
            Type: function(t) {
                return null === t ? "Null" : void 0 === t ? "Undefined" : "function" == typeof t || "object" === r(t) ? "Object" : "number" == typeof t ? "Number" : "boolean" == typeof t ? "Boolean" : "string" == typeof t ? "String" : void 0
            },
            IsPropertyDescriptor: function(t) {
                if ("Object" !== this.Type(t)) return !1;
                var e = {
                    "[[Configurable]]": !0,
                    "[[Enumerable]]": !0,
                    "[[Get]]": !0,
                    "[[Set]]": !0,
                    "[[Value]]": !0,
                    "[[Writable]]": !0
                };
                for (var n in t)
                    if (l(t, n) && !e[n]) return !1;
                var r = l(t, "[[Value]]"),
                    i = l(t, "[[Get]]") || l(t, "[[Set]]");
                if (r && i) throw new TypeError("Property Descriptors may not be both accessor and data descriptors");
                return !0
            },
            IsAccessorDescriptor: function(t) {
                if (void 0 === t) return !1;
                if (!this.IsPropertyDescriptor(t)) throw new TypeError("Desc must be a Property Descriptor");
                return !(!l(t, "[[Get]]") && !l(t, "[[Set]]"))
            },
            IsDataDescriptor: function(t) {
                if (void 0 === t) return !1;
                if (!this.IsPropertyDescriptor(t)) throw new TypeError("Desc must be a Property Descriptor");
                return !(!l(t, "[[Value]]") && !l(t, "[[Writable]]"))
            },
            IsGenericDescriptor: function(t) {
                if (void 0 === t) return !1;
                if (!this.IsPropertyDescriptor(t)) throw new TypeError("Desc must be a Property Descriptor");
                return !this.IsAccessorDescriptor(t) && !this.IsDataDescriptor(t)
            },
            FromPropertyDescriptor: function(t) {
                if (void 0 === t) return t;
                if (!this.IsPropertyDescriptor(t)) throw new TypeError("Desc must be a Property Descriptor");
                if (this.IsDataDescriptor(t)) return {
                    value: t["[[Value]]"],
                    writable: !!t["[[Writable]]"],
                    enumerable: !!t["[[Enumerable]]"],
                    configurable: !!t["[[Configurable]]"]
                };
                if (this.IsAccessorDescriptor(t)) return {
                    get: t["[[Get]]"],
                    set: t["[[Set]]"],
                    enumerable: !!t["[[Enumerable]]"],
                    configurable: !!t["[[Configurable]]"]
                };
                throw new TypeError("FromPropertyDescriptor must be called with a fully populated Property Descriptor")
            },
            ToPropertyDescriptor: function(t) {
                if ("Object" !== this.Type(t)) throw new TypeError("ToPropertyDescriptor requires an object");
                var e = {};
                if (l(t, "enumerable") && (e["[[Enumerable]]"] = this.ToBoolean(t.enumerable)), l(t, "configurable") && (e["[[Configurable]]"] = this.ToBoolean(t.configurable)), l(t, "value") && (e["[[Value]]"] = t.value), l(t, "writable") && (e["[[Writable]]"] = this.ToBoolean(t.writable)), l(t, "get")) {
                    var n = t.get;
                    if (void 0 !== n && !this.IsCallable(n)) throw new TypeError("getter must be a function");
                    e["[[Get]]"] = n
                }
                if (l(t, "set")) {
                    var r = t.set;
                    if (void 0 !== r && !this.IsCallable(r)) throw new TypeError("setter must be a function");
                    e["[[Set]]"] = r
                }
                if ((l(e, "[[Get]]") || l(e, "[[Set]]")) && (l(e, "[[Value]]") || l(e, "[[Writable]]"))) throw new TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");
                return e
            }
        };
    t.exports = h
}, function(t, e) {
    t.exports = Number.isNaN || function(t) {
        return t != t
    }
}, function(t, e) {
    var n = Number.isNaN || function(t) {
        return t != t
    };
    t.exports = Number.isFinite || function(t) {
        return "number" == typeof t && !n(t) && t !== 1 / 0 && t !== -1 / 0
    }
}, function(t, e) {
    t.exports = function(t) {
        return t >= 0 ? 1 : -1
    }
}, function(t, e) {
    t.exports = function(t, e) {
        var n = t % e;
        return Math.floor(n >= 0 ? n : n + e)
    }
}, function(t, e, n) {
    "use strict";
    var r = Object.prototype.toString,
        i = n(460),
        o = n(240),
        a = function(t, e) {
            var n = e || ("[object Date]" === r.call(t) ? String : Number);
            if (n === String || n === Number) {
                var a, s, u = n === String ? ["toString", "valueOf"] : ["valueOf", "toString"];
                for (s = 0; s < u.length; ++s)
                    if (o(t[u[s]]) && (a = t[u[s]](), i(a))) return a;
                throw new TypeError("No default value")
            }
            throw new TypeError("invalid [[DefaultValue]] hint supplied")
        };
    t.exports = function(t, e) {
        return i(t) ? t : a(t, e)
    }
}, function(t, e) {
    function n(t) {
        return (n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
            return typeof t
        } : function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }
    t.exports = function(t) {
        return null === t || "function" != typeof t && "object" !== n(t)
    }
}, function(t, e, n) {
    var r = n(196);
    t.exports = r.call(Function.call, Object.prototype.hasOwnProperty)
}, function(t, e, n) {
    "use strict";
    var r = n(314),
        i = n(316);
    t.exports = function() {
        var t = i();
        return r(String.prototype, {
            trim: t
        }, {
            trim: function() {
                return String.prototype.trim !== t
            }
        }), t
    }
}, function(t, e) {
    t.exports = "varying vec3 vWorldPos;\nvoid main() {\n  vWorldPos = vec3(-position.x, -position.y, position.z);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}"
}, function(t, e) {
    t.exports = "varying vec3 vWorldPos;\nuniform float alpha;\nuniform samplerCube tDiffuse;\nvoid main() {\n  vec4 texColor = textureCube(tDiffuse, vWorldPos);\n  gl_FragColor = vec4(texColor.rgb, texColor.a * alpha);\n}"
}, function(t, e) {
    t.exports = "varying vec2 vUv;\nuniform float alpha;\nuniform sampler2D tDiffuse;\nvoid main() {\n  vec4 texColor = texture2D(tDiffuse, vUv);\n  gl_FragColor = vec4(texColor.rgb, texColor.a * alpha);\n}"
}, function(t, e) {
    t.exports = "void main() {\n  gl_Position = vec4(position, 1.0);\n}\n"
}, function(t, e) {
    t.exports = "uniform vec3 color;\nuniform float opacity;\nvoid main() {\n  gl_FragColor = vec4(color, opacity);\n}"
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(2),
        o = n(146),
        a = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        s = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        u = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        c = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return a(e, t), e
        }(Error),
        l = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "container-resizer", e.resizeContainer = function() {
                    e.containerElement.style.height = window.innerHeight + "px"
                }, e
            }
            return a(e, t), e.prototype.init = function(t) {
                return s(this, void 0, void 0, (function() {
                    return u(this, (function(e) {
                        if (!t.container) throw new c;
                        return this.containerElement = t.container, this.resizeSub = Object(o.c)(o.b.RESIZE, this.resizeContainer), this.resizeSub.renew(), [2]
                    }))
                }))
            }, e.prototype.dispose = function() {
                this.resizeSub.cancel()
            }, e
        }(i.b);
    e.default = l
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(2),
        o = n(118),
        a = n(161),
        s = n(317),
        u = n(72),
        c = n(33),
        l = n(328),
        h = n(27),
        f = n(214),
        p = n(146),
        d = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        m = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        v = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        y = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        g = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return d(e, t), e
        }(Error),
        b = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "canvas", e.getNewX = function() {
                    return 0
                }, e.getNewY = function() {
                    return 0
                }, e.getNewWidth = function(t) {
                    return t.width
                }, e.getNewHeight = function(t) {
                    return t.height
                }, e.activeTransitions = [], e.activeTransitionMap = {
                    left: null,
                    top: null,
                    width: null,
                    height: null
                }, e.onResize = function(t) {
                    t.propertyName in u.b && (e.resolveActiveTransition(t.propertyName), e._canvas.style.transitionDuration = e.stringifyTransitionDurations())
                }, e.onWindowResize = function() {
                    e.transitionDurations.left = e.transitionDurations.top = e.transitionDurations.width = e.transitionDurations.height = "0s", e._canvas.style.transitionDuration = e.stringifyTransitionDurations(), e.applySize(), e.applyPosition(), e.activeTransitions.forEach(e.resolveActiveTransition.bind(e)), e._canvas.style.transitionDuration = e.stringifyTransitionDurations()
                }, e.resizeCanvas = function(t) {
                    return m(e, void 0, void 0, (function() {
                        var e, n = this;
                        return v(this, (function(r) {
                            return t.resizeDimensions ? (this.activeTransitions.forEach(this.resolveActiveTransition.bind(this)), e = t.resizeDimensions.map((function(t) {
                                var e = t.property,
                                    r = t.setDimension,
                                    i = t.duration;
                                switch (e) {
                                    case u.b.height:
                                        n.setHeight(r, i);
                                        break;
                                    case u.b.width:
                                        n.setWidth(r, i);
                                        break;
                                    case u.b.top:
                                        n.setY(r, i);
                                        break;
                                    case u.b.left:
                                        n.setX(r, i)
                                }
                                var o = new c.a;
                                return n.activeTransitionMap[e] = o, n.activeTransitions.push(e), o
                            })), this.resolveNoopTransitions(), this.hasActiveTransitions() || (this.canvasBounds = this._canvas.getBoundingClientRect()), [2, Promise.all(e)]) : [2]
                        }))
                    }))
                }, e
            }
            return d(e, t), e.prototype.init = function(t, e) {
                return m(this, void 0, void 0, (function() {
                    var n, r, i, a, s = this;
                    return v(this, (function(c) {
                        if (this.engine = e, this.container = t.container, !this.container) throw new g;
                        this.container.appendChild(t.canvas), this.containerBounds = this.container.getBoundingClientRect(), this._canvas = t.canvas, this._canvas.setAttribute("tabindex", "-1"), this._canvas.style.position = "absolute", this._canvas.style.left = "0", this._canvas.style.top = "0", this.transitionDurations = {
                            left: "0s",
                            top: "0s",
                            width: "0s",
                            height: "0s",
                            filter: "0.4s"
                        }, this._canvas.style.transitionProperty = Object.keys(this.transitionDurations).join(","), this._canvas.style.transitionDuration = this.stringifyTransitionDurations(), this.updateTransitions(), this.bindings.push(Object(p.c)(p.b.RESIZE, this.onWindowResize), e.commandBinder.addBinding(u.a, this.resizeCanvas), this.makeTransitionEndSubscription(), e.commandBinder.addBinding(l.a, (function(t) {
                            return m(s, void 0, void 0, (function() {
                                return v(this, (function(e) {
                                    return [2, this.screenToCanvasPoint(t.x, t.y)]
                                }))
                            }))
                        })), e.commandBinder.addBinding(f.a, this.blur.bind(this)));
                        try {
                            for (i = y(this.bindings), a = i.next(); !a.done; a = i.next()) a.value.renew()
                        } catch (t) {
                            n = {
                                error: t
                            }
                        } finally {
                            try {
                                a && !a.done && (r = i.return) && r.call(i)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                        return this.canvasBounds = this._canvas.getBoundingClientRect(), this.containerBounds = this.container.getBoundingClientRect(), this.data = new o.a(this.canvasBounds.width, this.canvasBounds.height), e.market.register(this, o.a, this.data), [2]
                    }))
                }))
            }, e.prototype.resolveNoopTransitions = function() {
                var t = this.containerBounds;
                this.getNewHeight(t) !== this.data.height && parseInt(this.transitionDurations[u.b.height], 10) || this.resolveActiveTransition(u.b.height), this.getNewWidth(t) !== this.data.width && parseInt(this.transitionDurations[u.b.width], 10) || this.resolveActiveTransition(u.b.width), this.getNewY(t) !== this.data.y && parseInt(this.transitionDurations[u.b.top], 10) || this.resolveActiveTransition(u.b.top), this.getNewX(t) !== this.data.x && parseInt(this.transitionDurations[u.b.left], 10) || this.resolveActiveTransition(u.b.left), this._canvas.style.transitionDuration = this.stringifyTransitionDurations()
            }, e.prototype.makeTransitionEndSubscription = function() {
                var t = this,
                    e = !1;
                return {
                    renew: function() {
                        e || (t.element.addEventListener("transitionend", t.onResize), e = !0)
                    },
                    cancel: function() {
                        e && (t.element.removeEventListener("transitionend", t.onResize), e = !1)
                    }
                }
            }, e.prototype.dispose = function(e) {
                t.prototype.dispose.call(this, e)
            }, Object.defineProperty(e.prototype, "element", {
                get: function() {
                    return this._canvas
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "width", {
                get: function() {
                    return this.canvasBounds.width
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "height", {
                get: function() {
                    return this.canvasBounds.height
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "x", {
                get: function() {
                    return this.canvasBounds.left
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "y", {
                get: function() {
                    return this.canvasBounds.top
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.onUpdate = function() {
                var t = this.container.getBoundingClientRect(),
                    e = this.containerHasChanged(t);
                e && (this.containerBounds = t, this.updateTransitions()), (e || this.hasActiveTransitions()) && (this.canvasBounds = this._canvas.getBoundingClientRect());
                var n = this.data.width !== this.width || this.data.height !== this.height,
                    r = this.data.x !== this.x || this.data.y !== this.y;
                n && (this.data.width = this.width, this.data.height = this.height, this.data.commit(), this.engine.broadcast(new a.a(this.width, this.height))), r && (this.data.x = this.x, this.data.y = this.y, this.data.commit(), this.engine.broadcast(new s.a(this.x - this.containerBounds.left, this.y - this.containerBounds.top)))
            }, e.prototype.containerHasChanged = function(t) {
                return t.left !== this.containerBounds.left || t.top !== this.containerBounds.top || t.width !== this.containerBounds.width || t.height !== this.containerBounds.height
            }, e.prototype.setX = function(t, e) {
                void 0 === e && (e = 0), this.getNewX = "number" == typeof t ? function() {
                    return t
                } : t, this.transitionDurations.left = e + "ms", this.updateTransitions()
            }, e.prototype.setY = function(t, e) {
                void 0 === e && (e = 0), this.getNewY = "number" == typeof t ? function() {
                    return t
                } : t, this.transitionDurations.top = e + "ms", this.updateTransitions()
            }, e.prototype.setWidth = function(t, e) {
                void 0 === e && (e = 0), this.getNewWidth = "number" == typeof t ? function() {
                    return t
                } : t, this.transitionDurations.width = e + "ms", this.updateTransitions()
            }, e.prototype.setHeight = function(t, e) {
                void 0 === e && (e = 0), this.getNewHeight = "number" == typeof t ? function() {
                    return t
                } : t, this.transitionDurations.height = e + "ms", this.updateTransitions()
            }, e.prototype.screenToCanvasPoint = function(t, e) {
                return {
                    x: t - this.x,
                    y: e - this.y
                }
            }, e.prototype.blur = function(t) {
                return m(this, void 0, void 0, (function() {
                    return v(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return this.transitionDurations.filter = t.duration + "ms", this._canvas.style.transitionDuration = this.stringifyTransitionDurations(), this._canvas.style.filter = "blur(" + t.pixelBlur + "px)", [4, Object(h.d)(t.duration)];
                            case 1:
                                return e.sent(), 0 === t.pixelBlur && (this._canvas.style.filter = null), [2]
                        }
                    }))
                }))
            }, e.prototype.updateTransitions = function() {
                this._canvas.style.transitionDuration = this.stringifyTransitionDurations(), this.applySize(), this.applyPosition()
            }, e.prototype.applySize = function() {
                this._canvas.style.width = this.getNewWidth(this.containerBounds) + "px", this._canvas.style.height = this.getNewHeight(this.containerBounds) + "px"
            }, e.prototype.applyPosition = function() {
                this._canvas.style.left = this.getNewX(this.containerBounds) + "px", this._canvas.style.top = this.getNewY(this.containerBounds) + "px"
            }, e.prototype.stringifyTransitionDurations = function() {
                var t = this;
                return Object.keys(this.transitionDurations).map((function(e) {
                    return t.transitionDurations[e]
                })).join(",")
            }, e.prototype.resolveActiveTransition = function(t) {
                var e = this.activeTransitions.indexOf(t); - 1 !== e && this.activeTransitions.splice(e, 1);
                var n = this.activeTransitionMap[t];
                n && n.resolve(), this.activeTransitionMap[t] = null, this.transitionDurations[t] = "0s"
            }, e.prototype.hasActiveTransitions = function() {
                return this.activeTransitions.length > 0
            }, e
        }(i.e);
    e.default = b
}, function(t, e, n) {
    t.exports = n.p + "images/icon_Google_Chrome_2011.png"
}, function(t, e, n) {
    t.exports = n.p + "images/icon_Mozilla_Firefox.png"
}, function(t, e, n) {
    t.exports = n.p + "images/icon_Internet_Explorer_10.png"
}, function(t, e, n) {
    t.exports = n.p + "images/icon_MacOSX_Safari.png"
}, function(t, e, n) {}, , function(t, e, n) {
    "use strict";
    n.r(e);
    var r = n(6),
        i = Object.freeze({
            profiling: {
                enabled: r.z("mem", !1)
            }
        }),
        o = n(2),
        a = n(50),
        s = n(0),
        u = n(13),
        c = n(327),
        l = n(163),
        h = n(7),
        f = {
            alphamap_fragment: "\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",
            alphamap_pars_fragment: "\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",
            alphatest_fragment: "\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",
            aomap_fragment: "\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n",
            aomap_pars_fragment: "\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n",
            begin_vertex: "\nvec3 transformed = vec3( position );\n",
            beginnormal_vertex: "\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n",
            bsdfs: '\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via \'environmentBRDF\' from "Physically Based Shading on Mobile"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n}\n\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t// this is intended to be used on spot and point lights who are represented as luminous intensity\n\t// but who must be converted to luminous irradiance for surface lighting calculation\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif( cutoffDistance > 0.0 ) {\n\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t}\n\n\treturn distanceFalloff;\n\n#else\n\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n#endif\n\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick \'94\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH \'13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\n\t// See F_Schlick\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\n\treturn Fr * fresnel + F0;\n\n}\n\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney’s reparameterization\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\t// geometry term (normalized) = G(l)⋅G(v) / 4(n⋅l)(n⋅v)\n\t// also see #12151\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\n\treturn 1.0 / ( gl * gv );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney’s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4\'s roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\n\treturn specularColor * brdf.x + brdf.y;\n\n} // validated\n\n// Fdez-Agüera\'s "Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L94\nfloat D_Charlie(float roughness, float NoH) {\n\t// Estevez and Kulla 2017, "Production Friendly Microfacet Sheen BRDF"\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L136\nfloat V_Neubelt(float NoV, float NoL) {\n\t// Neubelt and Pettineo 2013, "Crafting a Next-gen Material Pipeline for The Order: 1886"\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\n\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n\n}\n\n#endif\n',
            bumpmap_pars_fragment: "\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n",
            clipping_planes_fragment: "\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n",
            clipping_planes_pars_fragment: "\n#if NUM_CLIPPING_PLANES > 0\n\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n",
            clipping_planes_pars_vertex: "\n#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif\n",
            clipping_planes_vertex: "\n#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",
            color_fragment: "\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n",
            color_pars_fragment: "\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",
            color_pars_vertex: "\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",
            color_vertex: "\n#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif\n",
            common: "\n#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#ifndef saturate\n// <tonemapping_pars_fragment> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\n// https://en.wikipedia.org/wiki/Relative_luminance\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\n\treturn dot( weights, color.rgb );\n\n}\n\nbool isPerspectiveMatrix( mat4 m ) {\n\n  return m[ 2 ][ 3 ] == - 1.0;\n\n}\n",
            cube_uv_reflection_fragment: "\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n#define cubeUV_textureSize (1024.0)\n\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\n\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\t// Clamp the value to the max mip level counts. hard coded to 6 mips\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\n\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\t// float powScale = exp2(roughnessLevel + mipLevel);\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\t// float scale =  1.0 / exp2(roughnessLevel + 2.0 + mipLevel);\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\t// float mipOffset = 0.75*(1.0 - 1.0/exp2(mipLevel))/exp2(roughnessLevel);\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\n\tfloat rcpPowScale = 1.0 / powScale;\n\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\n\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\n\t// round to nearest mipmap if we are not interpolating.\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\n\t// Tri linear interpolation.\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\n\tvec4 result = mix(color10, color20, t);\n\n\treturn vec4(result.rgb, 1.0);\n}\n\n#endif\n",
            defaultnormal_vertex: "\nvec3 transformedNormal = objectNormal;\n\n#ifdef USE_INSTANCING\n\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n\n#endif\n\ntransformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n",
            displacementmap_pars_vertex: "\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n",
            displacementmap_vertex: "\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n\n#endif\n",
            emissivemap_fragment: "\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n",
            emissivemap_pars_fragment: "\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n",
            encodings_fragment: "\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n",
            encodings_pars_fragment: "\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\n\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\n\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\n\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\n\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",
            envmap_fragment: "\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t}  else {\n\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\n\t\t}\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\tvec2 sampleUV;\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\tenvColor = envMapTexelToLinear( envColor );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n",
            envmap_common_pars_fragment: "\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n",
            envmap_pars_fragment: "\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n",
            envmap_pars_vertex: "\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n",
            envmap_physical_pars_fragment: "\n#if defined( USE_ENVMAP )\n\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\n\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\n\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#else\n\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\n\t\t#else\n\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\n\t\t#endif\n\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t}\n\n\t// Trowbridge-Reitz distribution to Mip level, following the logic of http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\n\t\t// clamp to allowable LOD ranges.\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t}\n\n\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\n\t\t  // Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t#else\n\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\n\t\t#endif\n\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#endif\n\n\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t}\n\n#endif\n",
            envmap_vertex: "\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex;\n\n\t\tif ( isOrthographic ) { \n\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\t}\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",
            fog_vertex: "\n#ifdef USE_FOG\n\n\tfogDepth = -mvPosition.z;\n\n#endif\n",
            fog_pars_vertex: "\n#ifdef USE_FOG\n\n\tvarying float fogDepth;\n\n#endif\n",
            fog_fragment: "\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n",
            fog_pars_fragment: "\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n",
            gradientmap_pars_fragment: "\n#ifdef TOON\n\n\tuniform sampler2D gradientMap;\n\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t\t// dotNL will be from -1.0 to 1.0\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t\t#ifdef USE_GRADIENTMAP\n\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t\t#else\n\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t\t#endif\n\n\n\t}\n\n#endif\n",
            lightmap_fragment: "\n#ifdef USE_LIGHTMAP\n\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\n\n#endif\n",
            lightmap_pars_fragment: "\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n",
            lights_lambert_vertex: "\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\n#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\n#endif\n\n/*\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\t// TODO (abelnation): implement\n\n\t}\n\n#endif\n*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\n\t\t#endif\n\n\t}\n\n#endif\n",
            lights_pars_begin: "\nuniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI;\n\n\t#endif\n\n\treturn irradiance;\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n",
            lights_phong_fragment: "\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",
            lights_phong_pars_fragment: "\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct BlinnPhongMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t#ifdef TOON\n\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\t#else\n\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\n\t#endif\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n",
            lights_physical_fragment: "\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n\n#ifdef REFLECTIVITY\n\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\n#endif\n\n#ifdef CLEARCOAT\n\n\tmaterial.clearcoat = saturate( clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\n\n#endif\n#ifdef USE_SHEEN\n\n\tmaterial.sheenColor = sheen;\n\n#endif\n",
            lights_physical_pars_fragment: "\nstruct PhysicalMaterial {\n\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n\n};\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tccIrradiance *= PI; // punctual light\n\n\t\t#endif\n\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\n\t// Both indirect specular and indirect diffuse light accumulate here\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n",
            lights_fragment_begin: "\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t}\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n",
            lights_fragment_maps: "\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, maxMipLevel );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\n\t#ifdef CLEARCOAT\n\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\n\t#endif\n\n#endif\n",
            lights_fragment_end: "\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n",
            logdepthbuf_fragment: "\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\t// Doing a strict comparison with == 1.0 can cause noise artifacts\n\t// on some platforms. See issue #17623.\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n",
            logdepthbuf_pars_fragment: "\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n\n#endif\n",
            logdepthbuf_pars_vertex: "\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n",
            logdepthbuf_vertex: "\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\n\t#else\n\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\t\tgl_Position.z *= gl_Position.w;\n\n\t\t}\n\n\t#endif\n\n#endif\n",
            map_fragment: "\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n",
            map_pars_fragment: "\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n",
            map_particle_fragment: "\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n#endif\n\n#ifdef USE_MAP\n\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n",
            map_particle_pars_fragment: "\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tuniform mat3 uvTransform;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",
            metalnessmap_fragment: "\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n",
            metalnessmap_pars_fragment: "\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n",
            morphnormal_vertex: "\n#ifdef USE_MORPHNORMALS\n\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n",
            morphtarget_pars_vertex: "\n#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif\n",
            morphtarget_vertex: "\n#ifdef USE_MORPHTARGETS\n\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n",
            normal_fragment_begin: "\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n",
            normal_fragment_maps: "\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( TANGENTSPACE_NORMALMAP )\n\n\t#ifdef USE_TANGENT\n\n\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tnormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, normalScale, normalMap );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n",
            normalmap_pars_fragment: "\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 normalScale, in sampler2D normalMap ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\n\t\tmapN.xy *= normalScale;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t// Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331\n\n\t\t\tbool frontFacing = dot( cross( S, T ), N ) > 0.0;\n\n\t\t\tmapN.xy *= ( float( frontFacing ) * 2.0 - 1.0 );\n\n\t\t#else\n\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n",
            clearcoat_normal_fragment_begin: "\n#ifdef CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n",
            clearcoat_normal_fragment_maps: "\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\t#ifdef USE_TANGENT\n\n\t\tmat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = clearcoatNormalScale * mapN.xy;\n\t\tclearcoatNormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatNormalScale, clearcoatNormalMap );\n\n\t#endif\n\n#endif\n",
            clearcoat_normalmap_pars_fragment: "\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n",
            packing: "\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec4 encodeHalfRGBA ( vec2 v ) {\n\tvec4 encoded = vec4( 0.0 );\n\tconst vec2 offset = vec2( 1.0 / 255.0, 0.0 );\n\n\tencoded.xy = vec2( v.x, fract( v.x * 255.0 ) );\n\tencoded.xy = encoded.xy - ( encoded.yy * offset );\n\n\tencoded.zw = vec2( v.y, fract( v.y * 255.0 ) );\n\tencoded.zw = encoded.zw - ( encoded.ww * offset );\n\n\treturn encoded;\n}\n\nvec2 decodeHalfRGBA( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",
            premultiplied_alpha_fragment: "\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n",
            project_vertex: "\nvec4 mvPosition = vec4( transformed, 1.0 );\n\n#ifdef USE_INSTANCING\n\n\tmvPosition = instanceMatrix * mvPosition;\n\n#endif\n\nmvPosition = modelViewMatrix * mvPosition;\n\ngl_Position = projectionMatrix * mvPosition;\n",
            dithering_fragment: "\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n",
            dithering_pars_fragment: "\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n",
            roughnessmap_fragment: "\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n",
            roughnessmap_pars_fragment: "\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n",
            shadowmap_pars_fragment: "\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn decodeHalfRGBA( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\n\t\tvec2 f = fract( uv * size + 0.5 );\n\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\n\t\treturn c;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n",
            shadowmap_pars_vertex: "\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n",
            shadowmap_vertex: "\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n",
            shadowmask_pars_fragment: "\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLight directionalLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLight spotLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLight pointLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n",
            skinbase_vertex: "\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n",
            skinning_pars_vertex: "\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n",
            skinning_vertex: "\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n",
            skinnormal_vertex: "\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n",
            specularmap_fragment: "\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n",
            specularmap_pars_fragment: "\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n",
            tonemapping_fragment: "\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n",
            tonemapping_pars_fragment: "\n#ifndef saturate\n// <common> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\n\t// John Hable's filmic operator from Uncharted 2 video game\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n\n}\n",
            uv_pars_fragment: "\n#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\n\tvarying vec2 vUv;\n\n#endif\n",
            uv_pars_vertex: "\n#ifdef USE_UV\n\n\t#ifdef UVS_VERTEX_ONLY\n\n\t\tvec2 vUv;\n\n\t#else\n\n\t\tvarying vec2 vUv;\n\n\t#endif\n\n\tuniform mat3 uvTransform;\n\n#endif\n",
            uv_vertex: "\n#ifdef USE_UV\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n",
            uv2_pars_fragment: "\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n",
            uv2_pars_vertex: "\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n#endif\n",
            uv2_vertex: "\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = uv2;\n\n#endif\n",
            worldpos_vertex: "\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t#ifdef USE_INSTANCING\n\n\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t#endif\n\n\tworldPosition = modelMatrix * worldPosition;\n\n#endif\n",
            background_frag: "\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",
            background_vert: "\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n",
            cube_frag: "\nuniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\nvoid main() {\n\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",
            cube_vert: "\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n",
            depth_frag: "\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\n\t#endif\n\n}\n",
            depth_vert: "\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n}\n",
            distanceRGBA_frag: "\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n",
            distanceRGBA_vert: "\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n",
            equirect_frag: "\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV;\n\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",
            equirect_vert: "\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n",
            linedashed_frag: "\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",
            linedashed_vert: "\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\n\tvLineDistance = scale * lineDistance;\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n",
            meshbasic_frag: "\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",
            meshbasic_vert: "\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n",
            meshlambert_frag: "\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
            meshlambert_vert: "\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
            meshmatcap_frag: "\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( 1.0 );\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",
            meshmatcap_vert: "\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\t\tvNormal = normalize( transformedNormal );\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n",
            meshphong_frag: "\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",
            meshphong_vert: "\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",
            meshphysical_frag: "\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t// this is a stub for the transparency model\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",
            meshphysical_vert: "\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",
            normal_frag: "\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n",
            normal_vert: "\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n",
            points_frag: "\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",
            points_vert: "\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n",
            shadow_frag: "\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <fog_fragment>\n\n}\n",
            shadow_vert: "\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",
            sprite_frag: "\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",
            sprite_vert: "\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n"
        },
        p = n(30),
        d = n(5),
        m = n(1),
        v = n(11),
        y = n(18),
        g = n(42),
        b = {
            basic: {
                uniforms: Object(p.c)([v.a.common, v.a.specularmap, v.a.envmap, v.a.aomap, v.a.lightmap, v.a.fog]),
                vertexShader: f.meshbasic_vert,
                fragmentShader: f.meshbasic_frag
            },
            lambert: {
                uniforms: Object(p.c)([v.a.common, v.a.specularmap, v.a.envmap, v.a.aomap, v.a.lightmap, v.a.emissivemap, v.a.fog, v.a.lights, {
                    emissive: {
                        value: new y.a(0)
                    }
                }]),
                vertexShader: f.meshlambert_vert,
                fragmentShader: f.meshlambert_frag
            },
            phong: {
                uniforms: Object(p.c)([v.a.common, v.a.specularmap, v.a.envmap, v.a.aomap, v.a.lightmap, v.a.emissivemap, v.a.bumpmap, v.a.normalmap, v.a.displacementmap, v.a.gradientmap, v.a.fog, v.a.lights, {
                    emissive: {
                        value: new y.a(0)
                    },
                    specular: {
                        value: new y.a(1118481)
                    },
                    shininess: {
                        value: 30
                    }
                }]),
                vertexShader: f.meshphong_vert,
                fragmentShader: f.meshphong_frag
            },
            standard: {
                uniforms: Object(p.c)([v.a.common, v.a.envmap, v.a.aomap, v.a.lightmap, v.a.emissivemap, v.a.bumpmap, v.a.normalmap, v.a.displacementmap, v.a.roughnessmap, v.a.metalnessmap, v.a.fog, v.a.lights, {
                    emissive: {
                        value: new y.a(0)
                    },
                    roughness: {
                        value: .5
                    },
                    metalness: {
                        value: .5
                    },
                    envMapIntensity: {
                        value: 1
                    }
                }]),
                vertexShader: f.meshphysical_vert,
                fragmentShader: f.meshphysical_frag
            },
            matcap: {
                uniforms: Object(p.c)([v.a.common, v.a.bumpmap, v.a.normalmap, v.a.displacementmap, v.a.fog, {
                    matcap: {
                        value: null
                    }
                }]),
                vertexShader: f.meshmatcap_vert,
                fragmentShader: f.meshmatcap_frag
            },
            points: {
                uniforms: Object(p.c)([v.a.points, v.a.fog]),
                vertexShader: f.points_vert,
                fragmentShader: f.points_frag
            },
            dashed: {
                uniforms: Object(p.c)([v.a.common, v.a.fog, {
                    scale: {
                        value: 1
                    },
                    dashSize: {
                        value: 1
                    },
                    totalSize: {
                        value: 2
                    }
                }]),
                vertexShader: f.linedashed_vert,
                fragmentShader: f.linedashed_frag
            },
            depth: {
                uniforms: Object(p.c)([v.a.common, v.a.displacementmap]),
                vertexShader: f.depth_vert,
                fragmentShader: f.depth_frag
            },
            normal: {
                uniforms: Object(p.c)([v.a.common, v.a.bumpmap, v.a.normalmap, v.a.displacementmap, {
                    opacity: {
                        value: 1
                    }
                }]),
                vertexShader: f.normal_vert,
                fragmentShader: f.normal_frag
            },
            sprite: {
                uniforms: Object(p.c)([v.a.sprite, v.a.fog]),
                vertexShader: f.sprite_vert,
                fragmentShader: f.sprite_frag
            },
            background: {
                uniforms: {
                    uvTransform: {
                        value: new g.a
                    },
                    t2D: {
                        value: null
                    }
                },
                vertexShader: f.background_vert,
                fragmentShader: f.background_frag
            },
            cube: {
                uniforms: {
                    tCube: {
                        value: null
                    },
                    tFlip: {
                        value: -1
                    },
                    opacity: {
                        value: 1
                    }
                },
                vertexShader: f.cube_vert,
                fragmentShader: f.cube_frag
            },
            equirect: {
                uniforms: {
                    tEquirect: {
                        value: null
                    }
                },
                vertexShader: f.equirect_vert,
                fragmentShader: f.equirect_frag
            },
            distanceRGBA: {
                uniforms: Object(p.c)([v.a.common, v.a.displacementmap, {
                    referencePosition: {
                        value: new m.a
                    },
                    nearDistance: {
                        value: 1
                    },
                    farDistance: {
                        value: 1e3
                    }
                }]),
                vertexShader: f.distanceRGBA_vert,
                fragmentShader: f.distanceRGBA_frag
            },
            shadow: {
                uniforms: Object(p.c)([v.a.lights, v.a.fog, {
                    color: {
                        value: new y.a(0)
                    },
                    opacity: {
                        value: 1
                    }
                }]),
                vertexShader: f.shadow_vert,
                fragmentShader: f.shadow_frag
            }
        };
    b.physical = {
        uniforms: Object(p.c)([b.standard.uniforms, {
            transparency: {
                value: 0
            },
            clearcoat: {
                value: 0
            },
            clearcoatRoughness: {
                value: 0
            },
            sheen: {
                value: new y.a(0)
            },
            clearcoatNormalScale: {
                value: new d.a(1, 1)
            },
            clearcoatNormalMap: {
                value: null
            }
        }]),
        vertexShader: f.meshphysical_vert,
        fragmentShader: f.meshphysical_frag
    };
    var _ = n(26);

    function w() {
        var t = null,
            e = !1,
            n = null;

        function r(i, o) {
            !1 !== e && (n(i, o), t.requestAnimationFrame(r))
        }
        return {
            start: function() {
                !0 !== e && null !== n && (t.requestAnimationFrame(r), e = !0)
            },
            stop: function() {
                e = !1
            },
            setAnimationLoop: function(t) {
                n = t
            },
            setContext: function(e) {
                t = e
            }
        }
    }

    function x(t) {
        var e = new WeakMap;
        return {
            get: function(t) {
                return t.isInterleavedBufferAttribute && (t = t.data), e.get(t)
            },
            remove: function(n) {
                n.isInterleavedBufferAttribute && (n = n.data);
                var r = e.get(n);
                r && (t.deleteBuffer(r.buffer), e.delete(n))
            },
            update: function(n, r) {
                n.isInterleavedBufferAttribute && (n = n.data);
                var i = e.get(n);
                void 0 === i ? e.set(n, function(e, n) {
                    var r = e.array,
                        i = e.usage,
                        o = t.createBuffer();
                    t.bindBuffer(n, o), t.bufferData(n, r, i), e.onUploadCallback();
                    var a = t.FLOAT;
                    return r instanceof Float32Array ? a = t.FLOAT : r instanceof Float64Array ? console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.") : r instanceof Uint16Array ? a = t.UNSIGNED_SHORT : r instanceof Int16Array ? a = t.SHORT : r instanceof Uint32Array ? a = t.UNSIGNED_INT : r instanceof Int32Array ? a = t.INT : r instanceof Int8Array ? a = t.BYTE : r instanceof Uint8Array && (a = t.UNSIGNED_BYTE), {
                        buffer: o,
                        type: a,
                        bytesPerElement: r.BYTES_PER_ELEMENT,
                        version: e.version
                    }
                }(n, r)) : i.version < n.version && (! function(e, n, r) {
                    var i = n.array,
                        o = n.updateRange;
                    t.bindBuffer(r, e), -1 === o.count ? t.bufferSubData(r, 0, i) : (t.bufferSubData(r, o.offset * i.BYTES_PER_ELEMENT, i.subarray(o.offset, o.offset + o.count)), o.count = -1)
                }(i.buffer, n, r), i.version = n.version)
            }
        }
    }
    var E = n(74),
        S = n(65),
        T = n(79),
        M = n(29);

    function O(t, e, n, r) {
        var i, o, a = new y.a(0),
            u = 0,
            c = null,
            l = 0;

        function h(t, n) {
            e.buffers.color.setClear(t.r, t.g, t.b, n, r)
        }
        return {
            getClearColor: function() {
                return a
            },
            setClearColor: function(t, e) {
                a.set(t), h(a, u = void 0 !== e ? e : 1)
            },
            getClearAlpha: function() {
                return u
            },
            setClearAlpha: function(t) {
                h(a, u = t)
            },
            render: function(e, r, f, d) {
                var m = r.background,
                    v = t.vr,
                    y = v.getSession && v.getSession();
                if (y && "additive" === y.environmentBlendMode && (m = null), null === m ? (h(a, u), c = null, l = 0) : m && m.isColor && (h(m, 1), d = !0, c = null, l = 0), (t.autoClear || d) && t.clear(t.autoClearColor, t.autoClearDepth, t.autoClearStencil), m && (m.isCubeTexture || m.isWebGLRenderTargetCube)) {
                    void 0 === o && ((o = new M.a(new E.a(1, 1, 1), new T.a({
                        type: "BackgroundCubeMaterial",
                        uniforms: Object(p.b)(b.cube.uniforms),
                        vertexShader: b.cube.vertexShader,
                        fragmentShader: b.cube.fragmentShader,
                        side: s.h,
                        depthTest: !1,
                        depthWrite: !1,
                        fog: !1
                    }))).geometry.deleteAttribute("normal"), o.geometry.deleteAttribute("uv"), o.onBeforeRender = function(t, e, n) {
                        this.matrixWorld.copyPosition(n.matrixWorld)
                    }, Object.defineProperty(o.material, "map", {
                        get: function() {
                            return this.uniforms.tCube.value
                        }
                    }), n.update(o));
                    var g = m.isWebGLRenderTargetCube ? m.texture : m;
                    o.material.uniforms.tCube.value = g, o.material.uniforms.tFlip.value = m.isWebGLRenderTargetCube ? 1 : -1, c === m && l === g.version || (o.material.needsUpdate = !0, c = m, l = g.version), e.unshift(o, o.geometry, o.material, 0, 0, null)
                } else m && m.isTexture && (void 0 === i && ((i = new M.a(new S.a(2, 2), new T.a({
                    type: "BackgroundMaterial",
                    uniforms: Object(p.b)(b.background.uniforms),
                    vertexShader: b.background.vertexShader,
                    fragmentShader: b.background.fragmentShader,
                    side: s.F,
                    depthTest: !1,
                    depthWrite: !1,
                    fog: !1
                }))).geometry.deleteAttribute("normal"), Object.defineProperty(i.material, "map", {
                    get: function() {
                        return this.uniforms.t2D.value
                    }
                }), n.update(i)), i.material.uniforms.t2D.value = m, !0 === m.matrixAutoUpdate && m.updateMatrix(), i.material.uniforms.uvTransform.value.copy(m.matrix), c === m && l === m.version || (i.material.needsUpdate = !0, c = m, l = m.version), e.unshift(i, i.geometry, i.material, 0, 0, null))
            }
        }
    }

    function P(t, e, n, r) {
        var i, o = r.isWebGL2;
        this.setMode = function(t) {
            i = t
        }, this.render = function(e, r) {
            t.drawArrays(i, e, r), n.update(r, i)
        }, this.renderInstances = function(r, a, s, u) {
            if (0 !== u) {
                var c, l;
                if (o) c = t, l = "drawArraysInstanced";
                else if (l = "drawArraysInstancedANGLE", null === (c = e.get("ANGLE_instanced_arrays"))) return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                c[l](i, a, s, u), n.update(s, i, u)
            }
        }
    }

    function A(t, e, n) {
        var r;

        function i(e) {
            if ("highp" === e) {
                if (t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.HIGH_FLOAT).precision > 0 && t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_FLOAT).precision > 0) return "highp";
                e = "mediump"
            }
            return "mediump" === e && t.getShaderPrecisionFormat(t.VERTEX_SHADER, t.MEDIUM_FLOAT).precision > 0 && t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.MEDIUM_FLOAT).precision > 0 ? "mediump" : "lowp"
        }
        var o = "undefined" != typeof WebGL2RenderingContext && t instanceof WebGL2RenderingContext || "undefined" != typeof WebGL2ComputeRenderingContext && t instanceof WebGL2ComputeRenderingContext,
            a = void 0 !== n.precision ? n.precision : "highp",
            s = i(a);
        s !== a && (console.warn("THREE.WebGLRenderer:", a, "not supported, using", s, "instead."), a = s);
        var u = !0 === n.logarithmicDepthBuffer,
            c = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),
            l = t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
            h = t.getParameter(t.MAX_TEXTURE_SIZE),
            f = t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),
            p = t.getParameter(t.MAX_VERTEX_ATTRIBS),
            d = t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),
            m = t.getParameter(t.MAX_VARYING_VECTORS),
            v = t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),
            y = l > 0,
            g = o || !!e.get("OES_texture_float");
        return {
            isWebGL2: o,
            getMaxAnisotropy: function() {
                if (void 0 !== r) return r;
                var n = e.get("EXT_texture_filter_anisotropic");
                return r = null !== n ? t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
            },
            getMaxPrecision: i,
            precision: a,
            logarithmicDepthBuffer: u,
            maxTextures: c,
            maxVertexTextures: l,
            maxTextureSize: h,
            maxCubemapSize: f,
            maxAttributes: p,
            maxVertexUniforms: d,
            maxVaryings: m,
            maxFragmentUniforms: v,
            vertexTextures: y,
            floatFragmentTextures: g,
            floatVertexTextures: y && g,
            maxSamples: o ? t.getParameter(t.MAX_SAMPLES) : 0
        }
    }
    var L = n(57);

    function R() {
        var t = this,
            e = null,
            n = 0,
            r = !1,
            i = !1,
            o = new L.a,
            a = new g.a,
            s = {
                value: null,
                needsUpdate: !1
            };

        function u() {
            s.value !== e && (s.value = e, s.needsUpdate = n > 0), t.numPlanes = n, t.numIntersection = 0
        }

        function c(e, n, r, i) {
            var u = null !== e ? e.length : 0,
                c = null;
            if (0 !== u) {
                if (c = s.value, !0 !== i || null === c) {
                    var l = r + 4 * u,
                        h = n.matrixWorldInverse;
                    a.getNormalMatrix(h), (null === c || c.length < l) && (c = new Float32Array(l));
                    for (var f = 0, p = r; f !== u; ++f, p += 4) o.copy(e[f]).applyMatrix4(h, a), o.normal.toArray(c, p), c[p + 3] = o.constant
                }
                s.value = c, s.needsUpdate = !0
            }
            return t.numPlanes = u, c
        }
        this.uniform = s, this.numPlanes = 0, this.numIntersection = 0, this.init = function(t, i, o) {
            var a = 0 !== t.length || i || 0 !== n || r;
            return r = i, e = c(t, o, 0), n = t.length, a
        }, this.beginShadows = function() {
            i = !0, c(null)
        }, this.endShadows = function() {
            i = !1, u()
        }, this.setState = function(t, o, a, l, h, f) {
            if (!r || null === t || 0 === t.length || i && !a) i ? c(null) : u();
            else {
                var p = i ? 0 : n,
                    d = 4 * p,
                    m = h.clippingState || null;
                s.value = m, m = c(t, l, d, f);
                for (var v = 0; v !== d; ++v) m[v] = e[v];
                h.clippingState = m, this.numIntersection = o ? this.numPlanes : 0, this.numPlanes += p
            }
        }
    }

    function D(t) {
        var e = {};
        return {
            get: function(n) {
                if (void 0 !== e[n]) return e[n];
                var r;
                switch (n) {
                    case "WEBGL_depth_texture":
                        r = t.getExtension("WEBGL_depth_texture") || t.getExtension("MOZ_WEBGL_depth_texture") || t.getExtension("WEBKIT_WEBGL_depth_texture");
                        break;
                    case "EXT_texture_filter_anisotropic":
                        r = t.getExtension("EXT_texture_filter_anisotropic") || t.getExtension("MOZ_EXT_texture_filter_anisotropic") || t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                        break;
                    case "WEBGL_compressed_texture_s3tc":
                        r = t.getExtension("WEBGL_compressed_texture_s3tc") || t.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                        break;
                    case "WEBGL_compressed_texture_pvrtc":
                        r = t.getExtension("WEBGL_compressed_texture_pvrtc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                        break;
                    default:
                        r = t.getExtension(n)
                }
                return null === r && console.warn("THREE.WebGLRenderer: " + n + " extension not supported."), e[n] = r, r
            }
        }
    }
    var I = n(12),
        C = n(24),
        N = n(204);

    function U(t, e, n) {
        var r = new WeakMap,
            i = new WeakMap;

        function o(t) {
            var a = t.target,
                s = r.get(a);
            for (var u in null !== s.index && e.remove(s.index), s.attributes) e.remove(s.attributes[u]);
            a.removeEventListener("dispose", o), r.delete(a);
            var c = i.get(s);
            c && (e.remove(c), i.delete(s)), n.memory.geometries--
        }

        function a(n) {
            var r = [],
                o = n.index,
                a = n.attributes.position,
                s = 0;
            if (null !== o) {
                var u = o.array;
                s = o.version;
                for (var c = 0, l = u.length; c < l; c += 3) {
                    var h = u[c + 0],
                        f = u[c + 1],
                        p = u[c + 2];
                    r.push(h, f, f, p, p, h)
                }
            } else {
                u = a.array;
                s = a.version;
                for (c = 0, l = u.length / 3 - 1; c < l; c += 3) {
                    h = c + 0, f = c + 1, p = c + 2;
                    r.push(h, f, f, p, p, h)
                }
            }
            var d = new(Object(N.a)(r) > 65535 ? I.d : I.c)(r, 1);
            d.version = s, e.update(d, t.ELEMENT_ARRAY_BUFFER);
            var m = i.get(n);
            m && e.remove(m), i.set(n, d)
        }
        return {
            get: function(t, e) {
                var i = r.get(e);
                return i || (e.addEventListener("dispose", o), e.isBufferGeometry ? i = e : e.isGeometry && (void 0 === e._bufferGeometry && (e._bufferGeometry = (new C.a).setFromObject(t)), i = e._bufferGeometry), r.set(e, i), n.memory.geometries++, i)
            },
            update: function(n) {
                var r = n.index,
                    i = n.attributes;
                for (var o in null !== r && e.update(r, t.ELEMENT_ARRAY_BUFFER), i) e.update(i[o], t.ARRAY_BUFFER);
                var a = n.morphAttributes;
                for (var o in a)
                    for (var s = a[o], u = 0, c = s.length; u < c; u++) e.update(s[u], t.ARRAY_BUFFER)
            },
            getWireframeAttribute: function(t) {
                var e = i.get(t);
                if (e) {
                    var n = t.index;
                    null !== n && e.version < n.version && a(t)
                } else a(t);
                return i.get(t)
            }
        }
    }

    function j(t, e, n, r) {
        var i, o, a, s = r.isWebGL2;
        this.setMode = function(t) {
            i = t
        }, this.setIndex = function(t) {
            o = t.type, a = t.bytesPerElement
        }, this.render = function(e, r) {
            t.drawElements(i, r, o, e * a), n.update(r, i)
        }, this.renderInstances = function(r, u, c, l) {
            if (0 !== l) {
                var h, f;
                if (s) h = t, f = "drawElementsInstanced";
                else if (f = "drawElementsInstancedANGLE", null === (h = e.get("ANGLE_instanced_arrays"))) return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                h[f](i, c, o, u * a, l), n.update(c, i, l)
            }
        }
    }

    function k(t) {
        var e = {
            frame: 0,
            calls: 0,
            triangles: 0,
            points: 0,
            lines: 0
        };
        return {
            memory: {
                geometries: 0,
                textures: 0
            },
            render: e,
            programs: null,
            autoReset: !0,
            reset: function() {
                e.frame++, e.calls = 0, e.triangles = 0, e.points = 0, e.lines = 0
            },
            update: function(n, r, i) {
                switch (i = i || 1, e.calls++, r) {
                    case t.TRIANGLES:
                        e.triangles += i * (n / 3);
                        break;
                    case t.TRIANGLE_STRIP:
                    case t.TRIANGLE_FAN:
                        e.triangles += i * (n - 2);
                        break;
                    case t.LINES:
                        e.lines += i * (n / 2);
                        break;
                    case t.LINE_STRIP:
                        e.lines += i * (n - 1);
                        break;
                    case t.LINE_LOOP:
                        e.lines += i * n;
                        break;
                    case t.POINTS:
                        e.points += i * n;
                        break;
                    default:
                        console.error("THREE.WebGLInfo: Unknown draw mode:", r)
                }
            }
        }
    }

    function F(t, e) {
        return Math.abs(e[1]) - Math.abs(t[1])
    }

    function B(t) {
        var e = {},
            n = new Float32Array(8);
        return {
            update: function(r, i, o, a) {
                var s = r.morphTargetInfluences,
                    u = s.length,
                    c = e[i.id];
                if (void 0 === c) {
                    c = [];
                    for (var l = 0; l < u; l++) c[l] = [l, 0];
                    e[i.id] = c
                }
                var h = o.morphTargets && i.morphAttributes.position,
                    f = o.morphNormals && i.morphAttributes.normal;
                for (l = 0; l < u; l++) {
                    0 !== (p = c[l])[1] && (h && i.deleteAttribute("morphTarget" + l), f && i.deleteAttribute("morphNormal" + l))
                }
                for (l = 0; l < u; l++) {
                    (p = c[l])[0] = l, p[1] = s[l]
                }
                for (c.sort(F), l = 0; l < 8; l++) {
                    var p;
                    if (p = c[l]) {
                        var d = p[0],
                            m = p[1];
                        if (m) {
                            h && i.setAttribute("morphTarget" + l, h[d]), f && i.setAttribute("morphNormal" + l, f[d]), n[l] = m;
                            continue
                        }
                    }
                    n[l] = 0
                }
                a.getUniforms().setValue(t, "morphTargetInfluences", n)
            }
        }
    }

    function G(t, e, n, r) {
        var i = {};
        return {
            update: function(o) {
                var a = r.render.frame,
                    s = o.geometry,
                    u = e.get(o, s);
                return i[u.id] !== a && (s.isGeometry && u.updateFromObject(o), e.update(u), i[u.id] = a), o.isInstancedMesh && n.update(o.instanceMatrix, t.ARRAY_BUFFER), u
            },
            dispose: function() {
                i = {}
            }
        }
    }
    var z = n(172),
        H = n(41);

    function V(t, e, n, r) {
        H.a.call(this, null), this.image = {
            data: t || null,
            width: e || 1,
            height: n || 1,
            depth: r || 1
        }, this.magFilter = s.eb, this.minFilter = s.eb, this.wrapR = s.l, this.generateMipmaps = !1, this.flipY = !1, this.needsUpdate = !0
    }

    function W(t, e, n, r) {
        H.a.call(this, null), this.image = {
            data: t || null,
            width: e || 1,
            height: n || 1,
            depth: r || 1
        }, this.magFilter = s.eb, this.minFilter = s.eb, this.wrapR = s.l, this.generateMipmaps = !1, this.flipY = !1, this.needsUpdate = !0
    }
    V.prototype = Object.create(H.a.prototype), V.prototype.constructor = V, V.prototype.isDataTexture2DArray = !0, W.prototype = Object.create(H.a.prototype), W.prototype.constructor = W, W.prototype.isDataTexture3D = !0;
    var X = new H.a,
        q = new V,
        Y = new W,
        K = new z.a,
        Z = [],
        Q = [],
        J = new Float32Array(16),
        $ = new Float32Array(9),
        tt = new Float32Array(4);

    function et(t, e, n) {
        var r = t[0];
        if (r <= 0 || r > 0) return t;
        var i = e * n,
            o = Z[i];
        if (void 0 === o && (o = new Float32Array(i), Z[i] = o), 0 !== e) {
            r.toArray(o, 0);
            for (var a = 1, s = 0; a !== e; ++a) s += n, t[a].toArray(o, s)
        }
        return o
    }

    function nt(t, e) {
        if (t.length !== e.length) return !1;
        for (var n = 0, r = t.length; n < r; n++)
            if (t[n] !== e[n]) return !1;
        return !0
    }

    function rt(t, e) {
        for (var n = 0, r = e.length; n < r; n++) t[n] = e[n]
    }

    function it(t, e) {
        var n = Q[e];
        void 0 === n && (n = new Int32Array(e), Q[e] = n);
        for (var r = 0; r !== e; ++r) n[r] = t.allocateTextureUnit();
        return n
    }

    function ot(t, e) {
        var n = this.cache;
        n[0] !== e && (t.uniform1f(this.addr, e), n[0] = e)
    }

    function at(t, e) {
        var n = this.cache;
        if (void 0 !== e.x) n[0] === e.x && n[1] === e.y || (t.uniform2f(this.addr, e.x, e.y), n[0] = e.x, n[1] = e.y);
        else {
            if (nt(n, e)) return;
            t.uniform2fv(this.addr, e), rt(n, e)
        }
    }

    function st(t, e) {
        var n = this.cache;
        if (void 0 !== e.x) n[0] === e.x && n[1] === e.y && n[2] === e.z || (t.uniform3f(this.addr, e.x, e.y, e.z), n[0] = e.x, n[1] = e.y, n[2] = e.z);
        else if (void 0 !== e.r) n[0] === e.r && n[1] === e.g && n[2] === e.b || (t.uniform3f(this.addr, e.r, e.g, e.b), n[0] = e.r, n[1] = e.g, n[2] = e.b);
        else {
            if (nt(n, e)) return;
            t.uniform3fv(this.addr, e), rt(n, e)
        }
    }

    function ut(t, e) {
        var n = this.cache;
        if (void 0 !== e.x) n[0] === e.x && n[1] === e.y && n[2] === e.z && n[3] === e.w || (t.uniform4f(this.addr, e.x, e.y, e.z, e.w), n[0] = e.x, n[1] = e.y, n[2] = e.z, n[3] = e.w);
        else {
            if (nt(n, e)) return;
            t.uniform4fv(this.addr, e), rt(n, e)
        }
    }

    function ct(t, e) {
        var n = this.cache,
            r = e.elements;
        if (void 0 === r) {
            if (nt(n, e)) return;
            t.uniformMatrix2fv(this.addr, !1, e), rt(n, e)
        } else {
            if (nt(n, r)) return;
            tt.set(r), t.uniformMatrix2fv(this.addr, !1, tt), rt(n, r)
        }
    }

    function lt(t, e) {
        var n = this.cache,
            r = e.elements;
        if (void 0 === r) {
            if (nt(n, e)) return;
            t.uniformMatrix3fv(this.addr, !1, e), rt(n, e)
        } else {
            if (nt(n, r)) return;
            $.set(r), t.uniformMatrix3fv(this.addr, !1, $), rt(n, r)
        }
    }

    function ht(t, e) {
        var n = this.cache,
            r = e.elements;
        if (void 0 === r) {
            if (nt(n, e)) return;
            t.uniformMatrix4fv(this.addr, !1, e), rt(n, e)
        } else {
            if (nt(n, r)) return;
            J.set(r), t.uniformMatrix4fv(this.addr, !1, J), rt(n, r)
        }
    }

    function ft(t, e, n) {
        var r = this.cache,
            i = n.allocateTextureUnit();
        r[0] !== i && (t.uniform1i(this.addr, i), r[0] = i), n.safeSetTexture2D(e || X, i)
    }

    function pt(t, e, n) {
        var r = this.cache,
            i = n.allocateTextureUnit();
        r[0] !== i && (t.uniform1i(this.addr, i), r[0] = i), n.setTexture2DArray(e || q, i)
    }

    function dt(t, e, n) {
        var r = this.cache,
            i = n.allocateTextureUnit();
        r[0] !== i && (t.uniform1i(this.addr, i), r[0] = i), n.setTexture3D(e || Y, i)
    }

    function mt(t, e, n) {
        var r = this.cache,
            i = n.allocateTextureUnit();
        r[0] !== i && (t.uniform1i(this.addr, i), r[0] = i), n.safeSetTextureCube(e || K, i)
    }

    function vt(t, e) {
        var n = this.cache;
        n[0] !== e && (t.uniform1i(this.addr, e), n[0] = e)
    }

    function yt(t, e) {
        var n = this.cache;
        nt(n, e) || (t.uniform2iv(this.addr, e), rt(n, e))
    }

    function gt(t, e) {
        var n = this.cache;
        nt(n, e) || (t.uniform3iv(this.addr, e), rt(n, e))
    }

    function bt(t, e) {
        var n = this.cache;
        nt(n, e) || (t.uniform4iv(this.addr, e), rt(n, e))
    }

    function _t(t, e) {
        t.uniform1fv(this.addr, e)
    }

    function wt(t, e) {
        t.uniform1iv(this.addr, e)
    }

    function xt(t, e) {
        t.uniform2iv(this.addr, e)
    }

    function Et(t, e) {
        t.uniform3iv(this.addr, e)
    }

    function St(t, e) {
        t.uniform4iv(this.addr, e)
    }

    function Tt(t, e) {
        var n = et(e, this.size, 2);
        t.uniform2fv(this.addr, n)
    }

    function Mt(t, e) {
        var n = et(e, this.size, 3);
        t.uniform3fv(this.addr, n)
    }

    function Ot(t, e) {
        var n = et(e, this.size, 4);
        t.uniform4fv(this.addr, n)
    }

    function Pt(t, e) {
        var n = et(e, this.size, 4);
        t.uniformMatrix2fv(this.addr, !1, n)
    }

    function At(t, e) {
        var n = et(e, this.size, 9);
        t.uniformMatrix3fv(this.addr, !1, n)
    }

    function Lt(t, e) {
        var n = et(e, this.size, 16);
        t.uniformMatrix4fv(this.addr, !1, n)
    }

    function Rt(t, e, n) {
        var r = e.length,
            i = it(n, r);
        t.uniform1iv(this.addr, i);
        for (var o = 0; o !== r; ++o) n.safeSetTexture2D(e[o] || X, i[o])
    }

    function Dt(t, e, n) {
        var r = e.length,
            i = it(n, r);
        t.uniform1iv(this.addr, i);
        for (var o = 0; o !== r; ++o) n.safeSetTextureCube(e[o] || K, i[o])
    }

    function It(t, e, n) {
        this.id = t, this.addr = n, this.cache = [], this.setValue = function(t) {
            switch (t) {
                case 5126:
                    return ot;
                case 35664:
                    return at;
                case 35665:
                    return st;
                case 35666:
                    return ut;
                case 35674:
                    return ct;
                case 35675:
                    return lt;
                case 35676:
                    return ht;
                case 35678:
                case 36198:
                    return ft;
                case 35679:
                    return dt;
                case 35680:
                    return mt;
                case 36289:
                    return pt;
                case 5124:
                case 35670:
                    return vt;
                case 35667:
                case 35671:
                    return yt;
                case 35668:
                case 35672:
                    return gt;
                case 35669:
                case 35673:
                    return bt
            }
        }(e.type)
    }

    function Ct(t, e, n) {
        this.id = t, this.addr = n, this.cache = [], this.size = e.size, this.setValue = function(t) {
            switch (t) {
                case 5126:
                    return _t;
                case 35664:
                    return Tt;
                case 35665:
                    return Mt;
                case 35666:
                    return Ot;
                case 35674:
                    return Pt;
                case 35675:
                    return At;
                case 35676:
                    return Lt;
                case 35678:
                    return Rt;
                case 35680:
                    return Dt;
                case 5124:
                case 35670:
                    return wt;
                case 35667:
                case 35671:
                    return xt;
                case 35668:
                case 35672:
                    return Et;
                case 35669:
                case 35673:
                    return St
            }
        }(e.type)
    }

    function Nt(t) {
        this.id = t, this.seq = [], this.map = {}
    }
    Ct.prototype.updateCache = function(t) {
        var e = this.cache;
        t instanceof Float32Array && e.length !== t.length && (this.cache = new Float32Array(t.length)), rt(e, t)
    }, Nt.prototype.setValue = function(t, e, n) {
        for (var r = this.seq, i = 0, o = r.length; i !== o; ++i) {
            var a = r[i];
            a.setValue(t, e[a.id], n)
        }
    };
    var Ut = /([\w\d_]+)(\])?(\[|\.)?/g;

    function jt(t, e) {
        t.seq.push(e), t.map[e.id] = e
    }

    function kt(t, e, n) {
        var r = t.name,
            i = r.length;
        for (Ut.lastIndex = 0;;) {
            var o = Ut.exec(r),
                a = Ut.lastIndex,
                s = o[1],
                u = "]" === o[2],
                c = o[3];
            if (u && (s |= 0), void 0 === c || "[" === c && a + 2 === i) {
                jt(n, void 0 === c ? new It(s, t, e) : new Ct(s, t, e));
                break
            }
            var l = n.map[s];
            void 0 === l && jt(n, l = new Nt(s)), n = l
        }
    }

    function Ft(t, e) {
        this.seq = [], this.map = {};
        for (var n = t.getProgramParameter(e, t.ACTIVE_UNIFORMS), r = 0; r < n; ++r) {
            var i = t.getActiveUniform(e, r);
            kt(i, t.getUniformLocation(e, i.name), this)
        }
    }

    function Bt(t, e, n) {
        var r = t.createShader(e);
        return t.shaderSource(r, n), t.compileShader(r), r
    }
    Ft.prototype.setValue = function(t, e, n, r) {
        var i = this.map[e];
        void 0 !== i && i.setValue(t, n, r)
    }, Ft.prototype.setOptional = function(t, e, n) {
        var r = e[n];
        void 0 !== r && this.setValue(t, n, r)
    }, Ft.upload = function(t, e, n, r) {
        for (var i = 0, o = e.length; i !== o; ++i) {
            var a = e[i],
                s = n[a.id];
            !1 !== s.needsUpdate && a.setValue(t, s.value, r)
        }
    }, Ft.seqWithValue = function(t, e) {
        for (var n = [], r = 0, i = t.length; r !== i; ++r) {
            var o = t[r];
            o.id in e && n.push(o)
        }
        return n
    };
    var Gt = 0;

    function zt(t) {
        switch (t) {
            case s.O:
                return ["Linear", "( value )"];
            case s.Dc:
                return ["sRGB", "( value )"];
            case s.Tb:
                return ["RGBE", "( value )"];
            case s.Wb:
                return ["RGBM", "( value, 7.0 )"];
            case s.Vb:
                return ["RGBM", "( value, 16.0 )"];
            case s.Sb:
                return ["RGBD", "( value, 256.0 )"];
            case s.G:
                return ["Gamma", "( value, float( GAMMA_FACTOR ) )"];
            case s.V:
                return ["LogLuv", "( value )"];
            default:
                throw new Error("unsupported encoding: " + t)
        }
    }

    function Ht(t, e, n) {
        var r = t.getShaderParameter(e, t.COMPILE_STATUS),
            i = t.getShaderInfoLog(e).trim();
        return r && "" === i ? "" : "THREE.WebGLShader: gl.getShaderInfoLog() " + n + "\n" + i + function(t) {
            for (var e = t.split("\n"), n = 0; n < e.length; n++) e[n] = n + 1 + ": " + e[n];
            return e.join("\n")
        }(t.getShaderSource(e))
    }

    function Vt(t, e) {
        var n = zt(e);
        return "vec4 " + t + "( vec4 value ) { return " + n[0] + "ToLinear" + n[1] + "; }"
    }

    function Wt(t, e) {
        var n;
        switch (e) {
            case s.U:
                n = "Linear";
                break;
            case s.cc:
                n = "Reinhard";
                break;
            case s.sc:
                n = "Uncharted2";
                break;
            case s.k:
                n = "OptimizedCineon";
                break;
            case s.a:
                n = "ACESFilmic";
                break;
            default:
                throw new Error("unsupported toneMapping: " + e)
        }
        return "vec3 " + t + "( vec3 color ) { return " + n + "ToneMapping( color ); }"
    }

    function Xt(t) {
        return "" !== t
    }

    function qt(t, e) {
        return t.replace(/NUM_DIR_LIGHTS/g, e.numDirLights).replace(/NUM_SPOT_LIGHTS/g, e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g, e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, e.numPointLights).replace(/NUM_HEMI_LIGHTS/g, e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g, e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g, e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g, e.numPointLightShadows)
    }

    function Yt(t, e) {
        return t.replace(/NUM_CLIPPING_PLANES/g, e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g, e.numClippingPlanes - e.numClipIntersection)
    }
    var Kt = /^[ \t]*#include +<([\w\d./]+)>/gm;

    function Zt(t) {
        return t.replace(Kt, Qt)
    }

    function Qt(t, e) {
        var n = f[e];
        if (void 0 === n) throw new Error("Can not resolve #include <" + e + ">");
        return Zt(n)
    }
    var Jt = /#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;

    function $t(t) {
        return t.replace(Jt, te)
    }

    function te(t, e, n, r) {
        for (var i = "", o = parseInt(e); o < parseInt(n); o++) i += r.replace(/\[ i \]/g, "[ " + o + " ]").replace(/UNROLLED_LOOP_INDEX/g, o);
        return i
    }

    function ee(t) {
        var e = "precision " + t.precision + " float;\nprecision " + t.precision + " int;";
        return "highp" === t.precision ? e += "\n#define HIGH_PRECISION" : "mediump" === t.precision ? e += "\n#define MEDIUM_PRECISION" : "lowp" === t.precision && (e += "\n#define LOW_PRECISION"), e
    }

    function ne(t, e, n, r, i, o) {
        var a, u, c, l, h, p = t.getContext(),
            d = r.defines,
            m = i.vertexShader,
            v = i.fragmentShader,
            y = function(t) {
                var e = "SHADOWMAP_TYPE_BASIC";
                return t.shadowMapType === s.vb ? e = "SHADOWMAP_TYPE_PCF" : t.shadowMapType === s.wb ? e = "SHADOWMAP_TYPE_PCF_SOFT" : t.shadowMapType === s.Ac && (e = "SHADOWMAP_TYPE_VSM"), e
            }(o),
            g = function(t) {
                var e = "ENVMAP_TYPE_CUBE";
                if (t.envMap) switch (t.envMapMode) {
                    case s.m:
                    case s.n:
                        e = "ENVMAP_TYPE_CUBE";
                        break;
                    case s.o:
                    case s.p:
                        e = "ENVMAP_TYPE_CUBE_UV";
                        break;
                    case s.B:
                    case s.C:
                        e = "ENVMAP_TYPE_EQUIREC";
                        break;
                    case s.gc:
                        e = "ENVMAP_TYPE_SPHERE"
                }
                return e
            }(o),
            b = function(t) {
                var e = "ENVMAP_MODE_REFLECTION";
                if (t.envMap) switch (t.envMapMode) {
                    case s.n:
                    case s.C:
                        e = "ENVMAP_MODE_REFRACTION"
                }
                return e
            }(o),
            _ = function(t) {
                var e = "ENVMAP_BLENDING_MULTIPLY";
                if (t.envMap) switch (t.combine) {
                    case s.db:
                        e = "ENVMAP_BLENDING_MULTIPLY";
                        break;
                    case s.bb:
                        e = "ENVMAP_BLENDING_MIX";
                        break;
                    case s.c:
                        e = "ENVMAP_BLENDING_ADD"
                }
                return e
            }(o),
            w = t.gammaFactor > 0 ? t.gammaFactor : 1,
            x = o.isWebGL2 ? "" : function(t, e, n) {
                return [(t = t || {}).derivatives || e.envMapCubeUV || e.bumpMap || e.tangentSpaceNormalMap || e.clearcoatNormalMap || e.flatShading ? "#extension GL_OES_standard_derivatives : enable" : "", (t.fragDepth || e.logarithmicDepthBuffer) && n.get("EXT_frag_depth") ? "#extension GL_EXT_frag_depth : enable" : "", t.drawBuffers && n.get("WEBGL_draw_buffers") ? "#extension GL_EXT_draw_buffers : require" : "", (t.shaderTextureLOD || e.envMap) && n.get("EXT_shader_texture_lod") ? "#extension GL_EXT_shader_texture_lod : enable" : ""].filter(Xt).join("\n")
            }(r.extensions, o, e),
            E = function(t) {
                var e = [];
                for (var n in t) {
                    var r = t[n];
                    !1 !== r && e.push("#define " + n + " " + r)
                }
                return e.join("\n")
            }(d),
            S = p.createProgram(),
            T = o.numMultiviewViews;
        if (r.isRawShaderMaterial ? ((a = [E].filter(Xt).join("\n")).length > 0 && (a += "\n"), (u = [x, E].filter(Xt).join("\n")).length > 0 && (u += "\n")) : (a = [ee(o), "#define SHADER_NAME " + i.name, E, o.instancing ? "#define USE_INSTANCING" : "", o.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", "#define GAMMA_FACTOR " + w, "#define MAX_BONES " + o.maxBones, o.useFog && o.fog ? "#define USE_FOG" : "", o.useFog && o.fogExp2 ? "#define FOG_EXP2" : "", o.map ? "#define USE_MAP" : "", o.envMap ? "#define USE_ENVMAP" : "", o.envMap ? "#define " + b : "", o.lightMap ? "#define USE_LIGHTMAP" : "", o.aoMap ? "#define USE_AOMAP" : "", o.emissiveMap ? "#define USE_EMISSIVEMAP" : "", o.bumpMap ? "#define USE_BUMPMAP" : "", o.normalMap ? "#define USE_NORMALMAP" : "", o.normalMap && o.objectSpaceNormalMap ? "#define OBJECTSPACE_NORMALMAP" : "", o.normalMap && o.tangentSpaceNormalMap ? "#define TANGENTSPACE_NORMALMAP" : "", o.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "", o.displacementMap && o.supportsVertexTextures ? "#define USE_DISPLACEMENTMAP" : "", o.specularMap ? "#define USE_SPECULARMAP" : "", o.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", o.metalnessMap ? "#define USE_METALNESSMAP" : "", o.alphaMap ? "#define USE_ALPHAMAP" : "", o.vertexTangents ? "#define USE_TANGENT" : "", o.vertexColors ? "#define USE_COLOR" : "", o.vertexUvs ? "#define USE_UV" : "", o.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "", o.flatShading ? "#define FLAT_SHADED" : "", o.skinning ? "#define USE_SKINNING" : "", o.useVertexTexture ? "#define BONE_TEXTURE" : "", o.morphTargets ? "#define USE_MORPHTARGETS" : "", o.morphNormals && !1 === o.flatShading ? "#define USE_MORPHNORMALS" : "", o.doubleSided ? "#define DOUBLE_SIDED" : "", o.flipSided ? "#define FLIP_SIDED" : "", o.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", o.shadowMapEnabled ? "#define " + y : "", o.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", o.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", o.logarithmicDepthBuffer && (o.isWebGL2 || e.get("EXT_frag_depth")) ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "uniform bool isOrthographic;", "#ifdef USE_INSTANCING", " attribute mat4 instanceMatrix;", "#endif", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "#ifdef USE_TANGENT", "\tattribute vec4 tangent;", "#endif", "#ifdef USE_COLOR", "\tattribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "\tattribute vec3 morphTarget0;", "\tattribute vec3 morphTarget1;", "\tattribute vec3 morphTarget2;", "\tattribute vec3 morphTarget3;", "\t#ifdef USE_MORPHNORMALS", "\t\tattribute vec3 morphNormal0;", "\t\tattribute vec3 morphNormal1;", "\t\tattribute vec3 morphNormal2;", "\t\tattribute vec3 morphNormal3;", "\t#else", "\t\tattribute vec3 morphTarget4;", "\t\tattribute vec3 morphTarget5;", "\t\tattribute vec3 morphTarget6;", "\t\tattribute vec3 morphTarget7;", "\t#endif", "#endif", "#ifdef USE_SKINNING", "\tattribute vec4 skinIndex;", "\tattribute vec4 skinWeight;", "#endif", "\n"].filter(Xt).join("\n"), u = [x, ee(o), "#define SHADER_NAME " + i.name, E, o.alphaTest ? "#define ALPHATEST " + o.alphaTest + (o.alphaTest % 1 ? "" : ".0") : "", "#define GAMMA_FACTOR " + w, o.useFog && o.fog ? "#define USE_FOG" : "", o.useFog && o.fogExp2 ? "#define FOG_EXP2" : "", o.map ? "#define USE_MAP" : "", o.matcap ? "#define USE_MATCAP" : "", o.envMap ? "#define USE_ENVMAP" : "", o.envMap ? "#define " + g : "", o.envMap ? "#define " + b : "", o.envMap ? "#define " + _ : "", o.lightMap ? "#define USE_LIGHTMAP" : "", o.aoMap ? "#define USE_AOMAP" : "", o.emissiveMap ? "#define USE_EMISSIVEMAP" : "", o.bumpMap ? "#define USE_BUMPMAP" : "", o.normalMap ? "#define USE_NORMALMAP" : "", o.normalMap && o.objectSpaceNormalMap ? "#define OBJECTSPACE_NORMALMAP" : "", o.normalMap && o.tangentSpaceNormalMap ? "#define TANGENTSPACE_NORMALMAP" : "", o.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "", o.specularMap ? "#define USE_SPECULARMAP" : "", o.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", o.metalnessMap ? "#define USE_METALNESSMAP" : "", o.alphaMap ? "#define USE_ALPHAMAP" : "", o.sheen ? "#define USE_SHEEN" : "", o.vertexTangents ? "#define USE_TANGENT" : "", o.vertexColors ? "#define USE_COLOR" : "", o.vertexUvs ? "#define USE_UV" : "", o.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "", o.gradientMap ? "#define USE_GRADIENTMAP" : "", o.flatShading ? "#define FLAT_SHADED" : "", o.doubleSided ? "#define DOUBLE_SIDED" : "", o.flipSided ? "#define FLIP_SIDED" : "", o.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", o.shadowMapEnabled ? "#define " + y : "", o.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "", o.physicallyCorrectLights ? "#define PHYSICALLY_CORRECT_LIGHTS" : "", o.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", o.logarithmicDepthBuffer && (o.isWebGL2 || e.get("EXT_frag_depth")) ? "#define USE_LOGDEPTHBUF_EXT" : "", (r.extensions && r.extensions.shaderTextureLOD || o.envMap) && (o.isWebGL2 || e.get("EXT_shader_texture_lod")) ? "#define TEXTURE_LOD_EXT" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", "uniform bool isOrthographic;", o.toneMapping !== s.mb ? "#define TONE_MAPPING" : "", o.toneMapping !== s.mb ? f.tonemapping_pars_fragment : "", o.toneMapping !== s.mb ? Wt("toneMapping", o.toneMapping) : "", o.dithering ? "#define DITHERING" : "", o.outputEncoding || o.mapEncoding || o.matcapEncoding || o.envMapEncoding || o.emissiveMapEncoding ? f.encodings_pars_fragment : "", o.mapEncoding ? Vt("mapTexelToLinear", o.mapEncoding) : "", o.matcapEncoding ? Vt("matcapTexelToLinear", o.matcapEncoding) : "", o.envMapEncoding ? Vt("envMapTexelToLinear", o.envMapEncoding) : "", o.emissiveMapEncoding ? Vt("emissiveMapTexelToLinear", o.emissiveMapEncoding) : "", o.outputEncoding ? (c = "linearToOutputTexel", l = o.outputEncoding, h = zt(l), "vec4 " + c + "( vec4 value ) { return LinearTo" + h[0] + h[1] + "; }") : "", o.depthPacking ? "#define DEPTH_PACKING " + r.depthPacking : "", "\n"].filter(Xt).join("\n")), m = Yt(m = qt(m = Zt(m), o), o), v = Yt(v = qt(v = Zt(v), o), o), m = $t(m), v = $t(v), o.isWebGL2 && !r.isRawShaderMaterial) {
            var M = !1,
                O = /^\s*#version\s+300\s+es\s*\n/;
            r.isShaderMaterial && null !== m.match(O) && null !== v.match(O) && (M = !0, m = m.replace(O, ""), v = v.replace(O, "")), a = ["#version 300 es\n", "#define attribute in", "#define varying out", "#define texture2D texture"].join("\n") + "\n" + a, u = ["#version 300 es\n", "#define varying in", M ? "" : "out highp vec4 pc_fragColor;", M ? "" : "#define gl_FragColor pc_fragColor", "#define gl_FragDepthEXT gl_FragDepth", "#define texture2D texture", "#define textureCube texture", "#define texture2DProj textureProj", "#define texture2DLodEXT textureLod", "#define texture2DProjLodEXT textureProjLod", "#define textureCubeLodEXT textureLod", "#define texture2DGradEXT textureGrad", "#define texture2DProjGradEXT textureProjGrad", "#define textureCubeGradEXT textureGrad"].join("\n") + "\n" + u, T > 0 && (a = (a = a.replace("#version 300 es\n", ["#version 300 es\n", "#extension GL_OVR_multiview2 : require", "layout(num_views = " + T + ") in;", "#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace(["uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;"].join("\n"), ["uniform mat4 modelViewMatrices[" + T + "];", "uniform mat4 projectionMatrices[" + T + "];", "uniform mat4 viewMatrices[" + T + "];", "uniform mat3 normalMatrices[" + T + "];", "#define modelViewMatrix modelViewMatrices[VIEW_ID]", "#define projectionMatrix projectionMatrices[VIEW_ID]", "#define viewMatrix viewMatrices[VIEW_ID]", "#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")), u = (u = u.replace("#version 300 es\n", ["#version 300 es\n", "#extension GL_OVR_multiview2 : require", "#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace("uniform mat4 viewMatrix;", ["uniform mat4 viewMatrices[" + T + "];", "#define viewMatrix viewMatrices[VIEW_ID]"].join("\n")))
        }
        var P, A, L = a + m,
            R = u + v,
            D = Bt(p, p.VERTEX_SHADER, L),
            I = Bt(p, p.FRAGMENT_SHADER, R);
        if (p.attachShader(S, D), p.attachShader(S, I), void 0 !== r.index0AttributeName ? p.bindAttribLocation(S, 0, r.index0AttributeName) : !0 === o.morphTargets && p.bindAttribLocation(S, 0, "position"), p.linkProgram(S), t.debug.checkShaderErrors) {
            var C = p.getProgramInfoLog(S).trim(),
                N = p.getShaderInfoLog(D).trim(),
                U = p.getShaderInfoLog(I).trim(),
                j = !0,
                k = !0;
            if (!1 === p.getProgramParameter(S, p.LINK_STATUS)) {
                j = !1;
                var F = Ht(p, D, "vertex"),
                    B = Ht(p, I, "fragment");
                console.error("THREE.WebGLProgram: shader error: ", p.getError(), "gl.VALIDATE_STATUS", p.getProgramParameter(S, p.VALIDATE_STATUS), "gl.getProgramInfoLog", C, F, B)
            } else "" !== C ? console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", C) : "" !== N && "" !== U || (k = !1);
            k && (this.diagnostics = {
                runnable: j,
                material: r,
                programLog: C,
                vertexShader: {
                    log: N,
                    prefix: a
                },
                fragmentShader: {
                    log: U,
                    prefix: u
                }
            })
        }
        return p.deleteShader(D), p.deleteShader(I), this.getUniforms = function() {
            return void 0 === P && (P = new Ft(p, S)), P
        }, this.getAttributes = function() {
            return void 0 === A && (A = function(t, e) {
                for (var n = {}, r = t.getProgramParameter(e, t.ACTIVE_ATTRIBUTES), i = 0; i < r; i++) {
                    var o = t.getActiveAttrib(e, i).name;
                    n[o] = t.getAttribLocation(e, o)
                }
                return n
            }(p, S)), A
        }, this.destroy = function() {
            p.deleteProgram(S), this.program = void 0
        }, this.name = i.name, this.id = Gt++, this.cacheKey = n, this.usedTimes = 1, this.program = S, this.vertexShader = D, this.fragmentShader = I, this.numMultiviewViews = T, this
    }

    function re(t, e, n) {
        var r = [],
            i = n.isWebGL2,
            o = n.logarithmicDepthBuffer,
            a = n.floatVertexTextures,
            u = n.precision,
            c = n.maxVertexUniforms,
            l = n.vertexTextures,
            h = {
                MeshDepthMaterial: "depth",
                MeshDistanceMaterial: "distanceRGBA",
                MeshNormalMaterial: "normal",
                MeshBasicMaterial: "basic",
                MeshLambertMaterial: "lambert",
                MeshPhongMaterial: "phong",
                MeshToonMaterial: "phong",
                MeshStandardMaterial: "physical",
                MeshPhysicalMaterial: "physical",
                MeshMatcapMaterial: "matcap",
                LineBasicMaterial: "basic",
                LineDashedMaterial: "dashed",
                PointsMaterial: "points",
                ShadowMaterial: "shadow",
                SpriteMaterial: "sprite"
            },
            f = ["precision", "isWebGL2", "supportsVertexTextures", "outputEncoding", "instancing", "numMultiviewViews", "map", "mapEncoding", "matcap", "matcapEncoding", "envMap", "envMapMode", "envMapEncoding", "envMapCubeUV", "lightMap", "aoMap", "emissiveMap", "emissiveMapEncoding", "bumpMap", "normalMap", "objectSpaceNormalMap", "tangentSpaceNormalMap", "clearcoatNormalMap", "displacementMap", "specularMap", "roughnessMap", "metalnessMap", "gradientMap", "alphaMap", "combine", "vertexColors", "vertexTangents", "vertexUvs", "uvsVertexOnly", "fog", "useFog", "fogExp2", "flatShading", "sizeAttenuation", "logarithmicDepthBuffer", "skinning", "maxBones", "useVertexTexture", "morphTargets", "morphNormals", "maxMorphTargets", "maxMorphNormals", "premultipliedAlpha", "numDirLights", "numPointLights", "numSpotLights", "numHemiLights", "numRectAreaLights", "numDirLightShadows", "numPointLightShadows", "numSpotLightShadows", "shadowMapEnabled", "shadowMapType", "toneMapping", "physicallyCorrectLights", "alphaTest", "doubleSided", "flipSided", "numClippingPlanes", "numClipIntersection", "depthPacking", "dithering", "sheen"];

        function p(t, e) {
            var n;
            return t ? t.isTexture ? n = t.encoding : t.isWebGLRenderTarget && (console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."), n = t.texture.encoding) : n = s.O, n === s.O && e && (n = s.G), n
        }
        this.getParameters = function(e, r, f, d, m, v, y) {
            var g = h[e.type],
                b = y.isSkinnedMesh ? function(t) {
                    var e = t.skeleton.bones;
                    if (a) return 1024;
                    var n = c,
                        r = Math.floor((n - 20) / 4),
                        i = Math.min(r, e.length);
                    return i < e.length ? (console.warn("THREE.WebGLRenderer: Skeleton has " + e.length + " bones. This GPU supports " + i + "."), 0) : i
                }(y) : 0;
            null !== e.precision && (u = n.getMaxPrecision(e.precision)) !== e.precision && console.warn("THREE.WebGLProgram.getParameters:", e.precision, "not supported, using", u, "instead.");
            var _ = t.getRenderTarget(),
                w = _ && _.isWebGLMultiviewRenderTarget ? _.numViews : 0;
            return {
                isWebGL2: i,
                shaderID: g,
                precision: u,
                instancing: !0 === y.isInstancedMesh,
                supportsVertexTextures: l,
                numMultiviewViews: w,
                outputEncoding: p(_ ? _.texture : null, t.gammaOutput),
                map: !!e.map,
                mapEncoding: p(e.map, t.gammaInput),
                matcap: !!e.matcap,
                matcapEncoding: p(e.matcap, t.gammaInput),
                envMap: !!e.envMap,
                envMapMode: e.envMap && e.envMap.mapping,
                envMapEncoding: p(e.envMap, t.gammaInput),
                envMapCubeUV: !!e.envMap && (e.envMap.mapping === s.o || e.envMap.mapping === s.p),
                lightMap: !!e.lightMap,
                aoMap: !!e.aoMap,
                emissiveMap: !!e.emissiveMap,
                emissiveMapEncoding: p(e.emissiveMap, t.gammaInput),
                bumpMap: !!e.bumpMap,
                normalMap: !!e.normalMap,
                objectSpaceNormalMap: e.normalMapType === s.pb,
                tangentSpaceNormalMap: e.normalMapType === s.nc,
                clearcoatNormalMap: !!e.clearcoatNormalMap,
                displacementMap: !!e.displacementMap,
                roughnessMap: !!e.roughnessMap,
                metalnessMap: !!e.metalnessMap,
                specularMap: !!e.specularMap,
                alphaMap: !!e.alphaMap,
                gradientMap: !!e.gradientMap,
                sheen: !!e.sheen,
                combine: e.combine,
                vertexTangents: e.normalMap && e.vertexTangents,
                vertexColors: e.vertexColors,
                vertexUvs: !!(e.map || e.bumpMap || e.normalMap || e.specularMap || e.alphaMap || e.emissiveMap || e.roughnessMap || e.metalnessMap || e.clearcoatNormalMap || e.displacementMap),
                uvsVertexOnly: !(e.map || e.bumpMap || e.normalMap || e.specularMap || e.alphaMap || e.emissiveMap || e.roughnessMap || e.metalnessMap || e.clearcoatNormalMap || !e.displacementMap),
                fog: !!d,
                useFog: e.fog,
                fogExp2: d && d.isFogExp2,
                flatShading: e.flatShading,
                sizeAttenuation: e.sizeAttenuation,
                logarithmicDepthBuffer: o,
                skinning: e.skinning && b > 0,
                maxBones: b,
                useVertexTexture: a,
                morphTargets: e.morphTargets,
                morphNormals: e.morphNormals,
                maxMorphTargets: t.maxMorphTargets,
                maxMorphNormals: t.maxMorphNormals,
                numDirLights: r.directional.length,
                numPointLights: r.point.length,
                numSpotLights: r.spot.length,
                numRectAreaLights: r.rectArea.length,
                numHemiLights: r.hemi.length,
                numDirLightShadows: r.directionalShadowMap.length,
                numPointLightShadows: r.pointShadowMap.length,
                numSpotLightShadows: r.spotShadowMap.length,
                numClippingPlanes: m,
                numClipIntersection: v,
                dithering: e.dithering,
                shadowMapEnabled: t.shadowMap.enabled && f.length > 0,
                shadowMapType: t.shadowMap.type,
                toneMapping: e.toneMapped ? t.toneMapping : s.mb,
                physicallyCorrectLights: t.physicallyCorrectLights,
                premultipliedAlpha: e.premultipliedAlpha,
                alphaTest: e.alphaTest,
                doubleSided: e.side === s.w,
                flipSided: e.side === s.h,
                depthPacking: void 0 !== e.depthPacking && e.depthPacking
            }
        }, this.getProgramCacheKey = function(e, n) {
            var r = [];
            if (n.shaderID ? r.push(n.shaderID) : (r.push(e.fragmentShader), r.push(e.vertexShader)), void 0 !== e.defines)
                for (var i in e.defines) r.push(i), r.push(e.defines[i]);
            for (var o = 0; o < f.length; o++) r.push(n[f[o]]);
            return r.push(e.onBeforeCompile.toString()), r.push(t.gammaOutput), r.push(t.gammaFactor), r.join()
        }, this.acquireProgram = function(n, i, o, a) {
            for (var s, u = 0, c = r.length; u < c; u++) {
                var l = r[u];
                if (l.cacheKey === a) {
                    ++(s = l).usedTimes;
                    break
                }
            }
            return void 0 === s && (s = new ne(t, e, a, n, i, o), r.push(s)), s
        }, this.releaseProgram = function(t) {
            if (0 == --t.usedTimes) {
                var e = r.indexOf(t);
                r[e] = r[r.length - 1], r.pop(), t.destroy()
            }
        }, this.programs = r
    }

    function ie() {
        var t = new WeakMap;
        return {
            get: function(e) {
                var n = t.get(e);
                return void 0 === n && (n = {}, t.set(e, n)), n
            },
            remove: function(e) {
                t.delete(e)
            },
            update: function(e, n, r) {
                t.get(e)[n] = r
            },
            dispose: function() {
                t = new WeakMap
            }
        }
    }

    function oe(t, e) {
        return t.groupOrder !== e.groupOrder ? t.groupOrder - e.groupOrder : t.renderOrder !== e.renderOrder ? t.renderOrder - e.renderOrder : t.program !== e.program ? t.program.id - e.program.id : t.material.id !== e.material.id ? t.material.id - e.material.id : t.z !== e.z ? t.z - e.z : t.id - e.id
    }

    function ae(t, e) {
        return t.groupOrder !== e.groupOrder ? t.groupOrder - e.groupOrder : t.renderOrder !== e.renderOrder ? t.renderOrder - e.renderOrder : t.z !== e.z ? e.z - t.z : t.id - e.id
    }

    function se() {
        var t = [],
            e = 0,
            n = [],
            r = [],
            i = {
                id: -1
            };

        function o(n, r, o, a, s, u) {
            var c = t[e];
            return void 0 === c ? (c = {
                id: n.id,
                object: n,
                geometry: r,
                material: o,
                program: o.program || i,
                groupOrder: a,
                renderOrder: n.renderOrder,
                z: s,
                group: u
            }, t[e] = c) : (c.id = n.id, c.object = n, c.geometry = r, c.material = o, c.program = o.program || i, c.groupOrder = a, c.renderOrder = n.renderOrder, c.z = s, c.group = u), e++, c
        }
        return {
            opaque: n,
            transparent: r,
            init: function() {
                e = 0, n.length = 0, r.length = 0
            },
            push: function(t, e, i, a, s, u) {
                var c = o(t, e, i, a, s, u);
                (!0 === i.transparent ? r : n).push(c)
            },
            unshift: function(t, e, i, a, s, u) {
                var c = o(t, e, i, a, s, u);
                (!0 === i.transparent ? r : n).unshift(c)
            },
            sort: function() {
                n.length > 1 && n.sort(oe), r.length > 1 && r.sort(ae)
            }
        }
    }

    function ue() {
        var t = new WeakMap;

        function e(n) {
            var r = n.target;
            r.removeEventListener("dispose", e), t.delete(r)
        }
        return {
            get: function(n, r) {
                var i, o = t.get(n);
                return void 0 === o ? (i = new se, t.set(n, new WeakMap), t.get(n).set(r, i), n.addEventListener("dispose", e)) : void 0 === (i = o.get(r)) && (i = new se, o.set(r, i)), i
            },
            dispose: function() {
                t = new WeakMap
            }
        }
    }

    function ce() {
        var t = {};
        return {
            get: function(e) {
                if (void 0 !== t[e.id]) return t[e.id];
                var n;
                switch (e.type) {
                    case "DirectionalLight":
                        n = {
                            direction: new m.a,
                            color: new y.a,
                            shadow: !1,
                            shadowBias: 0,
                            shadowRadius: 1,
                            shadowMapSize: new d.a
                        };
                        break;
                    case "SpotLight":
                        n = {
                            position: new m.a,
                            direction: new m.a,
                            color: new y.a,
                            distance: 0,
                            coneCos: 0,
                            penumbraCos: 0,
                            decay: 0,
                            shadow: !1,
                            shadowBias: 0,
                            shadowRadius: 1,
                            shadowMapSize: new d.a
                        };
                        break;
                    case "PointLight":
                        n = {
                            position: new m.a,
                            color: new y.a,
                            distance: 0,
                            decay: 0,
                            shadow: !1,
                            shadowBias: 0,
                            shadowRadius: 1,
                            shadowMapSize: new d.a,
                            shadowCameraNear: 1,
                            shadowCameraFar: 1e3
                        };
                        break;
                    case "HemisphereLight":
                        n = {
                            direction: new m.a,
                            skyColor: new y.a,
                            groundColor: new y.a
                        };
                        break;
                    case "RectAreaLight":
                        n = {
                            color: new y.a,
                            position: new m.a,
                            halfWidth: new m.a,
                            halfHeight: new m.a
                        }
                }
                return t[e.id] = n, n
            }
        }
    }
    var le = 0;

    function he(t, e) {
        return (e.castShadow ? 1 : 0) - (t.castShadow ? 1 : 0)
    }

    function fe() {
        for (var t = new ce, e = {
                version: 0,
                hash: {
                    directionalLength: -1,
                    pointLength: -1,
                    spotLength: -1,
                    rectAreaLength: -1,
                    hemiLength: -1,
                    numDirectionalShadows: -1,
                    numPointShadows: -1,
                    numSpotShadows: -1
                },
                ambient: [0, 0, 0],
                probe: [],
                directional: [],
                directionalShadowMap: [],
                directionalShadowMatrix: [],
                spot: [],
                spotShadowMap: [],
                spotShadowMatrix: [],
                rectArea: [],
                point: [],
                pointShadowMap: [],
                pointShadowMatrix: [],
                hemi: [],
                numDirectionalShadows: -1,
                numPointShadows: -1,
                numSpotShadows: -1
            }, n = 0; n < 9; n++) e.probe.push(new m.a);
        var r = new m.a,
            i = new h.a,
            o = new h.a;
        return {
            setup: function(n, a, s) {
                for (var u = 0, c = 0, l = 0, h = 0; h < 9; h++) e.probe[h].set(0, 0, 0);
                var f = 0,
                    p = 0,
                    d = 0,
                    m = 0,
                    v = 0,
                    y = 0,
                    g = 0,
                    b = 0,
                    _ = s.matrixWorldInverse;
                n.sort(he), h = 0;
                for (var w = n.length; h < w; h++) {
                    var x = n[h],
                        E = x.color,
                        S = x.intensity,
                        T = x.distance,
                        M = x.shadow && x.shadow.map ? x.shadow.map.texture : null;
                    if (x.isAmbientLight) u += E.r * S, c += E.g * S, l += E.b * S;
                    else if (x.isLightProbe)
                        for (var O = 0; O < 9; O++) e.probe[O].addScaledVector(x.sh.coefficients[O], S);
                    else if (x.isDirectionalLight) {
                        if ((A = t.get(x)).color.copy(x.color).multiplyScalar(x.intensity), A.direction.setFromMatrixPosition(x.matrixWorld), r.setFromMatrixPosition(x.target.matrixWorld), A.direction.sub(r), A.direction.transformDirection(_), A.shadow = x.castShadow, x.castShadow) {
                            var P = x.shadow;
                            A.shadowBias = P.bias, A.shadowRadius = P.radius, A.shadowMapSize = P.mapSize, e.directionalShadowMap[f] = M, e.directionalShadowMatrix[f] = x.shadow.matrix, y++
                        }
                        e.directional[f] = A, f++
                    } else if (x.isSpotLight) {
                        if ((A = t.get(x)).position.setFromMatrixPosition(x.matrixWorld), A.position.applyMatrix4(_), A.color.copy(E).multiplyScalar(S), A.distance = T, A.direction.setFromMatrixPosition(x.matrixWorld), r.setFromMatrixPosition(x.target.matrixWorld), A.direction.sub(r), A.direction.transformDirection(_), A.coneCos = Math.cos(x.angle), A.penumbraCos = Math.cos(x.angle * (1 - x.penumbra)), A.decay = x.decay, A.shadow = x.castShadow, x.castShadow) {
                            P = x.shadow;
                            A.shadowBias = P.bias, A.shadowRadius = P.radius, A.shadowMapSize = P.mapSize, e.spotShadowMap[d] = M, e.spotShadowMatrix[d] = x.shadow.matrix, b++
                        }
                        e.spot[d] = A, d++
                    } else if (x.isRectAreaLight) {
                        (A = t.get(x)).color.copy(E).multiplyScalar(S), A.position.setFromMatrixPosition(x.matrixWorld), A.position.applyMatrix4(_), o.identity(), i.copy(x.matrixWorld), i.premultiply(_), o.extractRotation(i), A.halfWidth.set(.5 * x.width, 0, 0), A.halfHeight.set(0, .5 * x.height, 0), A.halfWidth.applyMatrix4(o), A.halfHeight.applyMatrix4(o), e.rectArea[m] = A, m++
                    } else if (x.isPointLight) {
                        if ((A = t.get(x)).position.setFromMatrixPosition(x.matrixWorld), A.position.applyMatrix4(_), A.color.copy(x.color).multiplyScalar(x.intensity), A.distance = x.distance, A.decay = x.decay, A.shadow = x.castShadow, x.castShadow) {
                            P = x.shadow;
                            A.shadowBias = P.bias, A.shadowRadius = P.radius, A.shadowMapSize = P.mapSize, A.shadowCameraNear = P.camera.near, A.shadowCameraFar = P.camera.far, e.pointShadowMap[p] = M, e.pointShadowMatrix[p] = x.shadow.matrix, g++
                        }
                        e.point[p] = A, p++
                    } else if (x.isHemisphereLight) {
                        var A;
                        (A = t.get(x)).direction.setFromMatrixPosition(x.matrixWorld), A.direction.transformDirection(_), A.direction.normalize(), A.skyColor.copy(x.color).multiplyScalar(S), A.groundColor.copy(x.groundColor).multiplyScalar(S), e.hemi[v] = A, v++
                    }
                }
                e.ambient[0] = u, e.ambient[1] = c, e.ambient[2] = l;
                var L = e.hash;
                L.directionalLength === f && L.pointLength === p && L.spotLength === d && L.rectAreaLength === m && L.hemiLength === v && L.numDirectionalShadows === y && L.numPointShadows === g && L.numSpotShadows === b || (e.directional.length = f, e.spot.length = d, e.rectArea.length = m, e.point.length = p, e.hemi.length = v, e.directionalShadowMap.length = y, e.pointShadowMap.length = g, e.spotShadowMap.length = b, e.directionalShadowMatrix.length = y, e.pointShadowMatrix.length = g, e.spotShadowMatrix.length = b, L.directionalLength = f, L.pointLength = p, L.spotLength = d, L.rectAreaLength = m, L.hemiLength = v, L.numDirectionalShadows = y, L.numPointShadows = g, L.numSpotShadows = b, e.version = le++)
            },
            state: e
        }
    }

    function pe() {
        var t = new fe,
            e = [],
            n = [];
        return {
            init: function() {
                e.length = 0, n.length = 0
            },
            state: {
                lightsArray: e,
                shadowsArray: n,
                lights: t
            },
            setupLights: function(r) {
                t.setup(e, n, r)
            },
            pushLight: function(t) {
                e.push(t)
            },
            pushShadow: function(t) {
                n.push(t)
            }
        }
    }

    function de() {
        var t = new WeakMap;

        function e(n) {
            var r = n.target;
            r.removeEventListener("dispose", e), t.delete(r)
        }
        return {
            get: function(n, r) {
                var i;
                return !1 === t.has(n) ? (i = new pe, t.set(n, new WeakMap), t.get(n).set(r, i), n.addEventListener("dispose", e)) : !1 === t.get(n).has(r) ? (i = new pe, t.get(n).set(r, i)) : i = t.get(n).get(r), i
            },
            dispose: function() {
                t = new WeakMap
            }
        }
    }
    var me = n(103),
        ve = n(47);

    function ye(t) {
        ve.a.call(this), this.type = "MeshDepthMaterial", this.depthPacking = s.i, this.skinning = !1, this.morphTargets = !1, this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.setValues(t)
    }

    function ge(t) {
        ve.a.call(this), this.type = "MeshDistanceMaterial", this.referencePosition = new m.a, this.nearDistance = 1, this.farDistance = 1e3, this.skinning = !1, this.morphTargets = !1, this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.fog = !1, this.setValues(t)
    }
    ye.prototype = Object.create(ve.a.prototype), ye.prototype.constructor = ye, ye.prototype.isMeshDepthMaterial = !0, ye.prototype.copy = function(t) {
        return ve.a.prototype.copy.call(this, t), this.depthPacking = t.depthPacking, this.skinning = t.skinning, this.morphTargets = t.morphTargets, this.map = t.map, this.alphaMap = t.alphaMap, this.displacementMap = t.displacementMap, this.displacementScale = t.displacementScale, this.displacementBias = t.displacementBias, this.wireframe = t.wireframe, this.wireframeLinewidth = t.wireframeLinewidth, this
    }, ge.prototype = Object.create(ve.a.prototype), ge.prototype.constructor = ge, ge.prototype.isMeshDistanceMaterial = !0, ge.prototype.copy = function(t) {
        return ve.a.prototype.copy.call(this, t), this.referencePosition.copy(t.referencePosition), this.nearDistance = t.nearDistance, this.farDistance = t.farDistance, this.skinning = t.skinning, this.morphTargets = t.morphTargets, this.map = t.map, this.alphaMap = t.alphaMap, this.displacementMap = t.displacementMap, this.displacementScale = t.displacementScale, this.displacementBias = t.displacementBias, this
    };

    function be(t, e, n) {
        var r = new l.a,
            i = new d.a,
            o = new d.a,
            a = new _.a,
            u = [],
            c = [],
            h = {},
            f = {
                0: s.h,
                1: s.F,
                2: s.w
            },
            p = new T.a({
                defines: {
                    SAMPLE_RATE: .25,
                    HALF_SAMPLE_RATE: 1 / 8
                },
                uniforms: {
                    shadow_pass: {
                        value: null
                    },
                    resolution: {
                        value: new d.a
                    },
                    radius: {
                        value: 4
                    }
                },
                vertexShader: "\n\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n\n",
                fragmentShader: "\nuniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n\n#include <packing>\n\nvoid main() {\n\n  float mean = 0.0;\n  float squared_mean = 0.0;\n  \n\t// This seems totally useless but it's a crazy work around for a Adreno compiler bug\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\n    #ifdef HORIZONAL_PASS\n\n      vec2 distribution = decodeHalfRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\n    #else\n\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n\n    #endif\n\n  }\n\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n\n  float std_dev = pow( squared_mean - mean * mean, 0.5 );\n\n  gl_FragColor = encodeHalfRGBA( vec2( mean, std_dev ) );\n\n}\n"
            }),
            m = p.clone();
        m.defines.HORIZONAL_PASS = 1;
        var v = new C.a;
        v.setAttribute("position", new I.a(new Float32Array([-1, -1, .5, 3, -1, .5, -1, 3, .5]), 3));
        var y = new M.a(v, p),
            g = this;

        function b(n, r) {
            var i = e.update(y);
            p.uniforms.shadow_pass.value = n.map.texture, p.uniforms.resolution.value = n.mapSize, p.uniforms.radius.value = n.radius, t.setRenderTarget(n.mapPass), t.clear(), t.renderBufferDirect(r, null, i, p, y, null), m.uniforms.shadow_pass.value = n.mapPass.texture, m.uniforms.resolution.value = n.mapSize, m.uniforms.radius.value = n.radius, t.setRenderTarget(n.map), t.clear(), t.renderBufferDirect(r, null, i, m, y, null)
        }

        function w(t, e, n) {
            var r = t << 0 | e << 1 | n << 2,
                i = u[r];
            return void 0 === i && (i = new ye({
                depthPacking: s.xb,
                morphTargets: t,
                skinning: e
            }), u[r] = i), i
        }

        function x(t, e, n) {
            var r = t << 0 | e << 1 | n << 2,
                i = c[r];
            return void 0 === i && (i = new ge({
                morphTargets: t,
                skinning: e
            }), c[r] = i), i
        }

        function E(e, n, r, i, o, a) {
            var u = e.geometry,
                c = null,
                l = w,
                p = e.customDepthMaterial;
            if (!0 === r.isPointLight && (l = x, p = e.customDistanceMaterial), void 0 === p) {
                var d = !1;
                !0 === n.morphTargets && (!0 === u.isBufferGeometry ? d = u.morphAttributes && u.morphAttributes.position && u.morphAttributes.position.length > 0 : !0 === u.isGeometry && (d = u.morphTargets && u.morphTargets.length > 0));
                var m = !1;
                !0 === e.isSkinnedMesh && (!0 === n.skinning ? m = !0 : console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:", e)), c = l(d, m, !0 === e.isInstancedMesh)
            } else c = p;
            if (t.localClippingEnabled && !0 === n.clipShadows && 0 !== n.clippingPlanes.length) {
                var v = c.uuid,
                    y = n.uuid,
                    g = h[v];
                void 0 === g && (g = {}, h[v] = g);
                var b = g[y];
                void 0 === b && (b = c.clone(), g[y] = b), c = b
            }
            return c.visible = n.visible, c.wireframe = n.wireframe, a === s.Ac ? c.side = null !== n.shadowSide ? n.shadowSide : n.side : c.side = null !== n.shadowSide ? n.shadowSide : f[n.side], c.clipShadows = n.clipShadows, c.clippingPlanes = n.clippingPlanes, c.clipIntersection = n.clipIntersection, c.wireframeLinewidth = n.wireframeLinewidth, c.linewidth = n.linewidth, !0 === r.isPointLight && !0 === c.isMeshDistanceMaterial && (c.referencePosition.setFromMatrixPosition(r.matrixWorld), c.nearDistance = i, c.farDistance = o), c
        }

        function S(n, i, o, a, u) {
            if (!1 !== n.visible) {
                if (n.layers.test(i.layers) && (n.isMesh || n.isLine || n.isPoints) && (n.castShadow || n.receiveShadow && u === s.Ac) && (!n.frustumCulled || r.intersectsObject(n))) {
                    n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse, n.matrixWorld);
                    var c = e.update(n),
                        l = n.material;
                    if (Array.isArray(l))
                        for (var h = c.groups, f = 0, p = h.length; f < p; f++) {
                            var d = h[f],
                                m = l[d.materialIndex];
                            if (m && m.visible) {
                                var v = E(n, m, a, o.near, o.far, u);
                                t.renderBufferDirect(o, null, c, v, n, d)
                            }
                        } else if (l.visible) {
                            v = E(n, l, a, o.near, o.far, u);
                            t.renderBufferDirect(o, null, c, v, n, null)
                        }
                }
                for (var y = n.children, g = 0, b = y.length; g < b; g++) S(y[g], i, o, a, u)
            }
        }
        this.enabled = !1, this.autoUpdate = !0, this.needsUpdate = !1, this.type = s.vb, this.render = function(e, u, c) {
            if (!1 !== g.enabled && (!1 !== g.autoUpdate || !1 !== g.needsUpdate) && 0 !== e.length) {
                var l = t.getRenderTarget(),
                    h = t.getActiveCubeFace(),
                    f = t.getActiveMipmapLevel(),
                    p = t.state;
                p.setBlending(s.kb), p.buffers.color.setClear(1, 1, 1, 1), p.buffers.depth.setTest(!0), p.setScissorTest(!1);
                for (var d = 0, m = e.length; d < m; d++) {
                    var v = e[d],
                        y = v.shadow;
                    if (void 0 !== y) {
                        i.copy(y.mapSize);
                        var _ = y.getFrameExtents();
                        if (i.multiply(_), o.copy(y.mapSize), (i.x > n || i.y > n) && (console.warn("THREE.WebGLShadowMap:", v, "has shadow exceeding max texture size, reducing"), i.x > n && (o.x = Math.floor(n / _.x), i.x = o.x * _.x, y.mapSize.x = o.x), i.y > n && (o.y = Math.floor(n / _.y), i.y = o.y * _.y, y.mapSize.y = o.y)), null === y.map && !y.isPointLightShadow && this.type === s.Ac) {
                            var w = {
                                minFilter: s.P,
                                magFilter: s.P,
                                format: s.yb
                            };
                            y.map = new me.a(i.x, i.y, w), y.map.texture.name = v.name + ".shadowMap", y.mapPass = new me.a(i.x, i.y, w), y.camera.updateProjectionMatrix()
                        }
                        if (null === y.map) {
                            w = {
                                minFilter: s.eb,
                                magFilter: s.eb,
                                format: s.yb
                            };
                            y.map = new me.a(i.x, i.y, w), y.map.texture.name = v.name + ".shadowMap", y.camera.updateProjectionMatrix()
                        }
                        t.setRenderTarget(y.map), t.clear();
                        for (var x = y.getViewportCount(), E = 0; E < x; E++) {
                            var T = y.getViewport(E);
                            a.set(o.x * T.x, o.y * T.y, o.x * T.z, o.y * T.w), p.viewport(a), y.updateMatrices(v, E), r = y.getFrustum(), S(u, c, y.camera, v, this.type)
                        }
                        y.isPointLightShadow || this.type !== s.Ac || b(y, c)
                    } else console.warn("THREE.WebGLShadowMap:", v, "has no shadow.")
                }
                g.needsUpdate = !1, t.setRenderTarget(l, h, f)
            }
        }
    }

    function _e(t, e, n) {
        return e in t ? Object.defineProperty(t, e, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0
        }) : t[e] = n, t
    }

    function we(t, e, n) {
        var r, i, o = n.isWebGL2;
        var a = new function() {
                var e = !1,
                    n = new _.a,
                    r = null,
                    i = new _.a(0, 0, 0, 0);
                return {
                    setMask: function(n) {
                        r === n || e || (t.colorMask(n, n, n, n), r = n)
                    },
                    setLocked: function(t) {
                        e = t
                    },
                    setClear: function(e, r, o, a, s) {
                        !0 === s && (e *= a, r *= a, o *= a), n.set(e, r, o, a), !1 === i.equals(n) && (t.clearColor(e, r, o, a), i.copy(n))
                    },
                    reset: function() {
                        e = !1, r = null, i.set(-1, 0, 0, 0)
                    }
                }
            },
            u = new function() {
                var e = !1,
                    n = null,
                    r = null,
                    i = null;
                return {
                    setTest: function(e) {
                        e ? z(t.DEPTH_TEST) : H(t.DEPTH_TEST)
                    },
                    setMask: function(r) {
                        n === r || e || (t.depthMask(r), n = r)
                    },
                    setFunc: function(e) {
                        if (r !== e) {
                            if (e) switch (e) {
                                case s.jb:
                                    t.depthFunc(t.NEVER);
                                    break;
                                case s.f:
                                    t.depthFunc(t.ALWAYS);
                                    break;
                                case s.M:
                                    t.depthFunc(t.LESS);
                                    break;
                                case s.N:
                                    t.depthFunc(t.LEQUAL);
                                    break;
                                case s.A:
                                    t.depthFunc(t.EQUAL);
                                    break;
                                case s.I:
                                    t.depthFunc(t.GEQUAL);
                                    break;
                                case s.H:
                                    t.depthFunc(t.GREATER);
                                    break;
                                case s.ob:
                                    t.depthFunc(t.NOTEQUAL);
                                    break;
                                default:
                                    t.depthFunc(t.LEQUAL)
                            } else t.depthFunc(t.LEQUAL);
                            r = e
                        }
                    },
                    setLocked: function(t) {
                        e = t
                    },
                    setClear: function(e) {
                        i !== e && (t.clearDepth(e), i = e)
                    },
                    reset: function() {
                        e = !1, n = null, r = null, i = null
                    }
                }
            },
            c = new function() {
                var e = !1,
                    n = null,
                    r = null,
                    i = null,
                    o = null,
                    a = null,
                    s = null,
                    u = null,
                    c = null;
                return {
                    setTest: function(n) {
                        e || (n ? z(t.STENCIL_TEST) : H(t.STENCIL_TEST))
                    },
                    setMask: function(r) {
                        n === r || e || (t.stencilMask(r), n = r)
                    },
                    setFunc: function(e, n, a) {
                        r === e && i === n && o === a || (t.stencilFunc(e, n, a), r = e, i = n, o = a)
                    },
                    setOp: function(e, n, r) {
                        a === e && s === n && u === r || (t.stencilOp(e, n, r), a = e, s = n, u = r)
                    },
                    setLocked: function(t) {
                        e = t
                    },
                    setClear: function(e) {
                        c !== e && (t.clearStencil(e), c = e)
                    },
                    reset: function() {
                        e = !1, n = null, r = null, i = null, o = null, a = null, s = null, u = null, c = null
                    }
                }
            },
            l = t.getParameter(t.MAX_VERTEX_ATTRIBS),
            h = new Uint8Array(l),
            f = new Uint8Array(l),
            p = new Uint8Array(l),
            d = {},
            m = null,
            v = null,
            y = null,
            g = null,
            b = null,
            w = null,
            x = null,
            E = null,
            S = null,
            T = !1,
            M = null,
            O = null,
            P = null,
            A = null,
            L = null,
            R = t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),
            D = !1,
            I = 0,
            C = t.getParameter(t.VERSION); - 1 !== C.indexOf("WebGL") ? (I = parseFloat(/^WebGL\ ([0-9])/.exec(C)[1]), D = I >= 1) : -1 !== C.indexOf("OpenGL ES") && (I = parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(C)[1]), D = I >= 2);
        var N = null,
            U = {},
            j = new _.a,
            k = new _.a;

        function F(e, n, r) {
            var i = new Uint8Array(4),
                o = t.createTexture();
            t.bindTexture(e, o), t.texParameteri(e, t.TEXTURE_MIN_FILTER, t.NEAREST), t.texParameteri(e, t.TEXTURE_MAG_FILTER, t.NEAREST);
            for (var a = 0; a < r; a++) t.texImage2D(n + a, 0, t.RGBA, 1, 1, 0, t.RGBA, t.UNSIGNED_BYTE, i);
            return o
        }
        var B = {};

        function G(n, r) {
            (h[n] = 1, 0 === f[n] && (t.enableVertexAttribArray(n), f[n] = 1), p[n] !== r) && ((o ? t : e.get("ANGLE_instanced_arrays"))[o ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"](n, r), p[n] = r)
        }

        function z(e) {
            !0 !== d[e] && (t.enable(e), d[e] = !0)
        }

        function H(e) {
            !1 !== d[e] && (t.disable(e), d[e] = !1)
        }
        B[t.TEXTURE_2D] = F(t.TEXTURE_2D, t.TEXTURE_2D, 1), B[t.TEXTURE_CUBE_MAP] = F(t.TEXTURE_CUBE_MAP, t.TEXTURE_CUBE_MAP_POSITIVE_X, 6), a.setClear(0, 0, 0, 1), u.setClear(1), c.setClear(0), z(t.DEPTH_TEST), u.setFunc(s.N), Y(!1), K(s.q), z(t.CULL_FACE), q(s.kb);
        var V = (_e(r = {}, s.b, t.FUNC_ADD), _e(r, s.lc, t.FUNC_SUBTRACT), _e(r, s.ec, t.FUNC_REVERSE_SUBTRACT), r);
        if (o) V[s.Z] = t.MIN, V[s.Y] = t.MAX;
        else {
            var W = e.get("EXT_blend_minmax");
            null !== W && (V[s.Z] = W.MIN_EXT, V[s.Y] = W.MIN_EXT)
        }
        var X = (_e(i = {}, s.Cc, t.ZERO), _e(i, s.qb, t.ONE), _e(i, s.jc, t.SRC_COLOR), _e(i, s.hc, t.SRC_ALPHA), _e(i, s.ic, t.SRC_ALPHA_SATURATE), _e(i, s.y, t.DST_COLOR), _e(i, s.x, t.DST_ALPHA), _e(i, s.ub, t.ONE_MINUS_SRC_COLOR), _e(i, s.tb, t.ONE_MINUS_SRC_ALPHA), _e(i, s.sb, t.ONE_MINUS_DST_COLOR), _e(i, s.rb, t.ONE_MINUS_DST_ALPHA), i);

        function q(e, n, r, i, o, a, u, c) {
            if (e !== s.kb) {
                if (v || (z(t.BLEND), v = !0), e === s.t) o = o || n, a = a || r, u = u || i, n === g && o === x || (t.blendEquationSeparate(V[n], V[o]), g = n, x = o), r === b && i === w && a === E && u === S || (t.blendFuncSeparate(X[r], X[i], X[a], X[u]), b = r, w = i, E = a, S = u), y = e, T = null;
                else if (e !== y || c !== T) {
                    if (g === s.b && x === s.b || (t.blendEquation(t.FUNC_ADD), g = s.b, x = s.b), c) switch (e) {
                        case s.nb:
                            t.blendFuncSeparate(t.ONE, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA);
                            break;
                        case s.d:
                            t.blendFunc(t.ONE, t.ONE);
                            break;
                        case s.mc:
                            t.blendFuncSeparate(t.ZERO, t.ZERO, t.ONE_MINUS_SRC_COLOR, t.ONE_MINUS_SRC_ALPHA);
                            break;
                        case s.cb:
                            t.blendFuncSeparate(t.ZERO, t.SRC_COLOR, t.ZERO, t.SRC_ALPHA);
                            break;
                        default:
                            console.error("THREE.WebGLState: Invalid blending: ", e)
                    } else switch (e) {
                        case s.nb:
                            t.blendFuncSeparate(t.SRC_ALPHA, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA);
                            break;
                        case s.d:
                            t.blendFunc(t.SRC_ALPHA, t.ONE);
                            break;
                        case s.mc:
                            t.blendFunc(t.ZERO, t.ONE_MINUS_SRC_COLOR);
                            break;
                        case s.cb:
                            t.blendFunc(t.ZERO, t.SRC_COLOR);
                            break;
                        default:
                            console.error("THREE.WebGLState: Invalid blending: ", e)
                    }
                    b = null, w = null, E = null, S = null, y = e, T = c
                }
            } else v && (H(t.BLEND), v = !1)
        }

        function Y(e) {
            M !== e && (e ? t.frontFace(t.CW) : t.frontFace(t.CCW), M = e)
        }

        function K(e) {
            e !== s.s ? (z(t.CULL_FACE), e !== O && (e === s.q ? t.cullFace(t.BACK) : e === s.r ? t.cullFace(t.FRONT) : t.cullFace(t.FRONT_AND_BACK))) : H(t.CULL_FACE), O = e
        }

        function Z(e, n, r) {
            e ? (z(t.POLYGON_OFFSET_FILL), A === n && L === r || (t.polygonOffset(n, r), A = n, L = r)) : H(t.POLYGON_OFFSET_FILL)
        }

        function Q(e) {
            void 0 === e && (e = t.TEXTURE0 + R - 1), N !== e && (t.activeTexture(e), N = e)
        }
        return {
            buffers: {
                color: a,
                depth: u,
                stencil: c
            },
            initAttributes: function() {
                for (var t = 0, e = h.length; t < e; t++) h[t] = 0
            },
            enableAttribute: function(t) {
                G(t, 0)
            },
            enableAttributeAndDivisor: G,
            disableUnusedAttributes: function() {
                for (var e = 0, n = f.length; e !== n; ++e) f[e] !== h[e] && (t.disableVertexAttribArray(e), f[e] = 0)
            },
            enable: z,
            disable: H,
            useProgram: function(e) {
                return m !== e && (t.useProgram(e), m = e, !0)
            },
            setBlending: q,
            setMaterial: function(e, n) {
                e.side === s.w ? H(t.CULL_FACE) : z(t.CULL_FACE);
                var r = e.side === s.h;
                n && (r = !r), Y(r), e.blending === s.nb && !1 === e.transparent ? q(s.kb) : q(e.blending, e.blendEquation, e.blendSrc, e.blendDst, e.blendEquationAlpha, e.blendSrcAlpha, e.blendDstAlpha, e.premultipliedAlpha), u.setFunc(e.depthFunc), u.setTest(e.depthTest), u.setMask(e.depthWrite), a.setMask(e.colorWrite);
                var i = e.stencilWrite;
                c.setTest(i), i && (c.setMask(e.stencilWriteMask), c.setFunc(e.stencilFunc, e.stencilRef, e.stencilFuncMask), c.setOp(e.stencilFail, e.stencilZFail, e.stencilZPass)), Z(e.polygonOffset, e.polygonOffsetFactor, e.polygonOffsetUnits)
            },
            setFlipSided: Y,
            setCullFace: K,
            setLineWidth: function(e) {
                e !== P && (D && t.lineWidth(e), P = e)
            },
            setPolygonOffset: Z,
            setScissorTest: function(e) {
                e ? z(t.SCISSOR_TEST) : H(t.SCISSOR_TEST)
            },
            activeTexture: Q,
            bindTexture: function(e, n) {
                null === N && Q();
                var r = U[N];
                void 0 === r && (r = {
                    type: void 0,
                    texture: void 0
                }, U[N] = r), r.type === e && r.texture === n || (t.bindTexture(e, n || B[e]), r.type = e, r.texture = n)
            },
            unbindTexture: function() {
                var e = U[N];
                void 0 !== e && void 0 !== e.type && (t.bindTexture(e.type, null), e.type = void 0, e.texture = void 0)
            },
            compressedTexImage2D: function() {
                try {
                    t.compressedTexImage2D.apply(t, arguments)
                } catch (t) {
                    console.error("THREE.WebGLState:", t)
                }
            },
            texImage2D: function() {
                try {
                    t.texImage2D.apply(t, arguments)
                } catch (t) {
                    console.error("THREE.WebGLState:", t)
                }
            },
            texImage3D: function() {
                try {
                    t.texImage3D.apply(t, arguments)
                } catch (t) {
                    console.error("THREE.WebGLState:", t)
                }
            },
            scissor: function(e) {
                !1 === j.equals(e) && (t.scissor(e.x, e.y, e.z, e.w), j.copy(e))
            },
            viewport: function(e) {
                !1 === k.equals(e) && (t.viewport(e.x, e.y, e.z, e.w), k.copy(e))
            },
            reset: function() {
                for (var e = 0; e < f.length; e++) 1 === f[e] && (t.disableVertexAttribArray(e), f[e] = 0);
                d = {}, N = null, U = {}, m = null, y = null, M = null, O = null, a.reset(), u.reset(), c.reset()
            }
        }
    }

    function xe(t, e, n) {
        return e in t ? Object.defineProperty(t, e, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0
        }) : t[e] = n, t
    }

    function Ee(t, e, n, r, i, o, a) {
        var c, l, h, f = i.isWebGL2,
            p = i.maxTextures,
            d = i.maxCubemapSize,
            m = i.maxTextureSize,
            v = i.maxSamples,
            y = new WeakMap,
            g = "undefined" != typeof OffscreenCanvas && null !== new OffscreenCanvas(1, 1).getContext("2d");

        function b(t, e) {
            return g ? new OffscreenCanvas(t, e) : document.createElementNS("http://www.w3.org/1999/xhtml", "canvas")
        }

        function _(t, e, n, r) {
            var i = 1;
            if ((t.width > r || t.height > r) && (i = r / Math.max(t.width, t.height)), i < 1 || !0 === e) {
                if ("undefined" != typeof HTMLImageElement && t instanceof HTMLImageElement || "undefined" != typeof HTMLCanvasElement && t instanceof HTMLCanvasElement || "undefined" != typeof ImageBitmap && t instanceof ImageBitmap) {
                    var o = e ? u.a.floorPowerOfTwo : Math.floor,
                        a = o(i * t.width),
                        s = o(i * t.height);
                    void 0 === h && (h = b(a, s));
                    var c = n ? b(a, s) : h;
                    return c.width = a, c.height = s, c.getContext("2d").drawImage(t, 0, 0, a, s), console.warn("THREE.WebGLRenderer: Texture has been resized from (" + t.width + "x" + t.height + ") to (" + a + "x" + s + ")."), c
                }
                return "data" in t && console.warn("THREE.WebGLRenderer: Image in DataTexture is too big (" + t.width + "x" + t.height + ")."), t
            }
            return t
        }

        function w(t) {
            return u.a.isPowerOfTwo(t.width) && u.a.isPowerOfTwo(t.height)
        }

        function x(t, e) {
            return t.generateMipmaps && e && t.minFilter !== s.eb && t.minFilter !== s.P
        }

        function E(e, n, i, o) {
            t.generateMipmap(e), r.get(n).__maxMipLevel = Math.log(Math.max(i, o)) * Math.LOG2E
        }

        function S(n, r) {
            if (!1 === f) return n;
            var i = n;
            return n === t.RED && (r === t.FLOAT && (i = t.R32F), r === t.HALF_FLOAT && (i = t.R16F), r === t.UNSIGNED_BYTE && (i = t.R8)), n === t.RGB && (r === t.FLOAT && (i = t.RGB32F), r === t.HALF_FLOAT && (i = t.RGB16F), r === t.UNSIGNED_BYTE && (i = t.RGB8)), n === t.RGBA && (r === t.FLOAT && (i = t.RGBA32F), r === t.HALF_FLOAT && (i = t.RGBA16F), r === t.UNSIGNED_BYTE && (i = t.RGBA8)), i === t.R16F || i === t.R32F || i === t.RGBA16F || i === t.RGBA32F ? e.get("EXT_color_buffer_float") : i !== t.RGB16F && i !== t.RGB32F || console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."), i
        }

        function T(e) {
            return e === s.eb || e === s.ib || e === s.hb ? t.NEAREST : t.LINEAR
        }

        function M(e) {
            var n = e.target;
            n.removeEventListener("dispose", M),
                function(e) {
                    var n = r.get(e);
                    if (void 0 === n.__webglInit) return;
                    t.deleteTexture(n.__webglTexture), r.remove(e)
                }(n), n.isVideoTexture && y.delete(n), a.memory.textures--
        }

        function O(e) {
            var n = e.target;
            n.removeEventListener("dispose", O),
                function(e) {
                    var n = r.get(e),
                        i = r.get(e.texture);
                    if (!e) return;
                    void 0 !== i.__webglTexture && t.deleteTexture(i.__webglTexture);
                    e.depthTexture && e.depthTexture.dispose();
                    if (e.isWebGLRenderTargetCube)
                        for (var o = 0; o < 6; o++) t.deleteFramebuffer(n.__webglFramebuffer[o]), n.__webglDepthbuffer && t.deleteRenderbuffer(n.__webglDepthbuffer[o]);
                    else t.deleteFramebuffer(n.__webglFramebuffer), n.__webglDepthbuffer && t.deleteRenderbuffer(n.__webglDepthbuffer);
                    if (e.isWebGLMultiviewRenderTarget) {
                        t.deleteTexture(n.__webglColorTexture), t.deleteTexture(n.__webglDepthStencilTexture), a.memory.textures -= 2;
                        o = 0;
                        for (var s = n.__webglViewFramebuffers.length; o < s; o++) t.deleteFramebuffer(n.__webglViewFramebuffers[o])
                    }
                    r.remove(e.texture), r.remove(e)
                }(n), a.memory.textures--
        }
        var P = 0;

        function A(e, i) {
            var o = r.get(e);
            if (e.isVideoTexture && function(t) {
                    var e = a.render.frame;
                    y.get(t) !== e && (y.set(t, e), t.update())
                }(e), e.version > 0 && o.__version !== e.version) {
                var s = e.image;
                if (void 0 === s) console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");
                else {
                    if (!1 !== s.complete) return void U(o, e, i);
                    console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")
                }
            }
            n.activeTexture(t.TEXTURE0 + i), n.bindTexture(t.TEXTURE_2D, o.__webglTexture)
        }

        function L(e, i) {
            if (6 === e.image.length) {
                var a = r.get(e);
                if (e.version > 0 && a.__version !== e.version) {
                    N(a, e), n.activeTexture(t.TEXTURE0 + i), n.bindTexture(t.TEXTURE_CUBE_MAP, a.__webglTexture), t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL, e.flipY);
                    for (var u = e && e.isCompressedTexture, c = e.image[0] && e.image[0].isDataTexture, l = [], h = 0; h < 6; h++) l[h] = u || c ? c ? e.image[h].image : e.image[h] : _(e.image[h], !1, !0, d);
                    var p, m = l[0],
                        v = w(m) || f,
                        y = o.convert(e.format),
                        g = o.convert(e.type),
                        b = S(y, g);
                    if (C(t.TEXTURE_CUBE_MAP, e, v), u) {
                        for (h = 0; h < 6; h++) {
                            p = l[h].mipmaps;
                            for (var T = 0; T < p.length; T++) {
                                var M = p[T];
                                e.format !== s.yb && e.format !== s.Ub ? null !== y ? n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + h, T, b, M.width, M.height, 0, M.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()") : n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + h, T, b, M.width, M.height, 0, y, g, M.data)
                            }
                        }
                        a.__maxMipLevel = p.length - 1
                    } else {
                        p = e.mipmaps;
                        for (h = 0; h < 6; h++)
                            if (c) {
                                n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + h, 0, b, l[h].width, l[h].height, 0, y, g, l[h].data);
                                for (T = 0; T < p.length; T++) {
                                    var O = (M = p[T]).image[h].image;
                                    n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + h, T + 1, b, O.width, O.height, 0, y, g, O.data)
                                }
                            } else {
                                n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + h, 0, b, y, g, l[h]);
                                for (T = 0; T < p.length; T++) {
                                    M = p[T];
                                    n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + h, T + 1, b, y, g, M.image[h])
                                }
                            }
                        a.__maxMipLevel = p.length
                    }
                    x(e, v) && E(t.TEXTURE_CUBE_MAP, e, m.width, m.height), a.__version = e.version, e.onUpdate && e.onUpdate(e)
                } else n.activeTexture(t.TEXTURE0 + i), n.bindTexture(t.TEXTURE_CUBE_MAP, a.__webglTexture)
            }
        }

        function R(e, i) {
            n.activeTexture(t.TEXTURE0 + i), n.bindTexture(t.TEXTURE_CUBE_MAP, r.get(e).__webglTexture)
        }
        var D = (xe(c = {}, s.dc, t.REPEAT), xe(c, s.l, t.CLAMP_TO_EDGE), xe(c, s.ab, t.MIRRORED_REPEAT), c),
            I = (xe(l = {}, s.eb, t.NEAREST), xe(l, s.ib, t.NEAREST_MIPMAP_NEAREST), xe(l, s.hb, t.NEAREST_MIPMAP_LINEAR), xe(l, s.P, t.LINEAR), xe(l, s.T, t.LINEAR_MIPMAP_NEAREST), xe(l, s.S, t.LINEAR_MIPMAP_LINEAR), l);

        function C(n, o, a) {
            a ? (t.texParameteri(n, t.TEXTURE_WRAP_S, D[o.wrapS]), t.texParameteri(n, t.TEXTURE_WRAP_T, D[o.wrapT]), n !== t.TEXTURE_3D && n !== t.TEXTURE_2D_ARRAY || t.texParameteri(n, t.TEXTURE_WRAP_R, D[o.wrapR]), t.texParameteri(n, t.TEXTURE_MAG_FILTER, I[o.magFilter]), t.texParameteri(n, t.TEXTURE_MIN_FILTER, I[o.minFilter])) : (t.texParameteri(n, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(n, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), n !== t.TEXTURE_3D && n !== t.TEXTURE_2D_ARRAY || t.texParameteri(n, t.TEXTURE_WRAP_R, t.CLAMP_TO_EDGE), o.wrapS === s.l && o.wrapT === s.l || console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."), t.texParameteri(n, t.TEXTURE_MAG_FILTER, T(o.magFilter)), t.texParameteri(n, t.TEXTURE_MIN_FILTER, T(o.minFilter)), o.minFilter !== s.eb && o.minFilter !== s.P && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));
            var u = e.get("EXT_texture_filter_anisotropic");
            if (u) {
                if (o.type === s.E && null === e.get("OES_texture_float_linear")) return;
                if (o.type === s.J && null === (f || e.get("OES_texture_half_float_linear"))) return;
                (o.anisotropy > 1 || r.get(o).__currentAnisotropy) && (t.texParameterf(n, u.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(o.anisotropy, i.getMaxAnisotropy())), r.get(o).__currentAnisotropy = o.anisotropy)
            }
        }

        function N(e, n) {
            void 0 === e.__webglInit && (e.__webglInit = !0, n.addEventListener("dispose", M), e.__webglTexture = t.createTexture(), a.memory.textures++)
        }

        function U(e, r, i) {
            var a = t.TEXTURE_2D;
            r.isDataTexture2DArray && (a = t.TEXTURE_2D_ARRAY), r.isDataTexture3D && (a = t.TEXTURE_3D), N(e, r), n.activeTexture(t.TEXTURE0 + i), n.bindTexture(a, e.__webglTexture), t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL, r.flipY), t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL, r.premultiplyAlpha), t.pixelStorei(t.UNPACK_ALIGNMENT, r.unpackAlignment);
            var u = function(t) {
                    return !f && (t.wrapS !== s.l || t.wrapT !== s.l || t.minFilter !== s.eb && t.minFilter !== s.P)
                }(r) && !1 === w(r.image),
                c = _(r.image, u, !1, m),
                l = w(c) || f,
                h = o.convert(r.format),
                p = o.convert(r.type),
                d = S(h, p);
            C(a, r, l);
            var v, y = r.mipmaps;
            if (r.isDepthTexture) {
                if (d = t.DEPTH_COMPONENT, r.type === s.E) {
                    if (!1 === f) throw new Error("Float Depth Texture only supported in WebGL2.0");
                    d = t.DEPTH_COMPONENT32F
                } else f && (d = t.DEPTH_COMPONENT16);
                r.format === s.u && d === t.DEPTH_COMPONENT && r.type !== s.zc && r.type !== s.vc && (console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."), r.type = s.zc, p = o.convert(r.type)), r.format === s.v && (d = t.DEPTH_STENCIL, r.type !== s.uc && (console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."), r.type = s.uc, p = o.convert(r.type))), n.texImage2D(t.TEXTURE_2D, 0, d, c.width, c.height, 0, h, p, null)
            } else if (r.isDataTexture)
                if (y.length > 0 && l) {
                    for (var g = 0, b = y.length; g < b; g++) v = y[g], n.texImage2D(t.TEXTURE_2D, g, d, v.width, v.height, 0, h, p, v.data);
                    r.generateMipmaps = !1, e.__maxMipLevel = y.length - 1
                } else n.texImage2D(t.TEXTURE_2D, 0, d, c.width, c.height, 0, h, p, c.data), e.__maxMipLevel = 0;
            else if (r.isCompressedTexture) {
                for (g = 0, b = y.length; g < b; g++) v = y[g], r.format !== s.yb && r.format !== s.Ub ? null !== h ? n.compressedTexImage2D(t.TEXTURE_2D, g, d, v.width, v.height, 0, v.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : n.texImage2D(t.TEXTURE_2D, g, d, v.width, v.height, 0, h, p, v.data);
                e.__maxMipLevel = y.length - 1
            } else if (r.isDataTexture2DArray) n.texImage3D(t.TEXTURE_2D_ARRAY, 0, d, c.width, c.height, c.depth, 0, h, p, c.data), e.__maxMipLevel = 0;
            else if (r.isDataTexture3D) n.texImage3D(t.TEXTURE_3D, 0, d, c.width, c.height, c.depth, 0, h, p, c.data), e.__maxMipLevel = 0;
            else if (y.length > 0 && l) {
                for (g = 0, b = y.length; g < b; g++) v = y[g], n.texImage2D(t.TEXTURE_2D, g, d, h, p, v);
                r.generateMipmaps = !1, e.__maxMipLevel = y.length - 1
            } else n.texImage2D(t.TEXTURE_2D, 0, d, h, p, c), e.__maxMipLevel = 0;
            x(r, l) && E(t.TEXTURE_2D, r, c.width, c.height), e.__version = r.version, r.onUpdate && r.onUpdate(r)
        }

        function j(e, i, a, s) {
            var u = o.convert(i.texture.format),
                c = o.convert(i.texture.type),
                l = S(u, c);
            n.texImage2D(s, 0, l, i.width, i.height, 0, u, c, null), t.bindFramebuffer(t.FRAMEBUFFER, e), t.framebufferTexture2D(t.FRAMEBUFFER, a, s, r.get(i.texture).__webglTexture, 0), t.bindFramebuffer(t.FRAMEBUFFER, null)
        }

        function k(e, n, r) {
            if (t.bindRenderbuffer(t.RENDERBUFFER, e), n.depthBuffer && !n.stencilBuffer) {
                if (r) {
                    var i = B(n);
                    t.renderbufferStorageMultisample(t.RENDERBUFFER, i, t.DEPTH_COMPONENT16, n.width, n.height)
                } else t.renderbufferStorage(t.RENDERBUFFER, t.DEPTH_COMPONENT16, n.width, n.height);
                t.framebufferRenderbuffer(t.FRAMEBUFFER, t.DEPTH_ATTACHMENT, t.RENDERBUFFER, e)
            } else if (n.depthBuffer && n.stencilBuffer) {
                if (r) {
                    i = B(n);
                    t.renderbufferStorageMultisample(t.RENDERBUFFER, i, t.DEPTH24_STENCIL8, n.width, n.height)
                } else t.renderbufferStorage(t.RENDERBUFFER, t.DEPTH_STENCIL, n.width, n.height);
                t.framebufferRenderbuffer(t.FRAMEBUFFER, t.DEPTH_STENCIL_ATTACHMENT, t.RENDERBUFFER, e)
            } else {
                var a = S(o.convert(n.texture.format), o.convert(n.texture.type));
                if (r) {
                    i = B(n);
                    t.renderbufferStorageMultisample(t.RENDERBUFFER, i, a, n.width, n.height)
                } else t.renderbufferStorage(t.RENDERBUFFER, a, n.width, n.height)
            }
            t.bindRenderbuffer(t.RENDERBUFFER, null)
        }

        function F(e) {
            var n = r.get(e),
                i = !0 === e.isWebGLRenderTargetCube;
            if (e.depthTexture) {
                if (i) throw new Error("target.depthTexture not supported in Cube render targets");
                ! function(e, n) {
                    if (n && n.isWebGLRenderTargetCube) throw new Error("Depth Texture with cube render targets is not supported");
                    if (t.bindFramebuffer(t.FRAMEBUFFER, e), !n.depthTexture || !n.depthTexture.isDepthTexture) throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");
                    r.get(n.depthTexture).__webglTexture && n.depthTexture.image.width === n.width && n.depthTexture.image.height === n.height || (n.depthTexture.image.width = n.width, n.depthTexture.image.height = n.height, n.depthTexture.needsUpdate = !0), A(n.depthTexture, 0);
                    var i = r.get(n.depthTexture).__webglTexture;
                    if (n.depthTexture.format === s.u) t.framebufferTexture2D(t.FRAMEBUFFER, t.DEPTH_ATTACHMENT, t.TEXTURE_2D, i, 0);
                    else {
                        if (n.depthTexture.format !== s.v) throw new Error("Unknown depthTexture format");
                        t.framebufferTexture2D(t.FRAMEBUFFER, t.DEPTH_STENCIL_ATTACHMENT, t.TEXTURE_2D, i, 0)
                    }
                }(n.__webglFramebuffer, e)
            } else if (i) {
                n.__webglDepthbuffer = [];
                for (var o = 0; o < 6; o++) t.bindFramebuffer(t.FRAMEBUFFER, n.__webglFramebuffer[o]), n.__webglDepthbuffer[o] = t.createRenderbuffer(), k(n.__webglDepthbuffer[o], e)
            } else t.bindFramebuffer(t.FRAMEBUFFER, n.__webglFramebuffer), n.__webglDepthbuffer = t.createRenderbuffer(), k(n.__webglDepthbuffer, e);
            t.bindFramebuffer(t.FRAMEBUFFER, null)
        }

        function B(t) {
            return f && t.isWebGLMultisampleRenderTarget ? Math.min(v, t.samples) : 0
        }
        var G = !1,
            z = !1;
        this.allocateTextureUnit = function() {
            var t = P;
            return t >= p && console.warn("THREE.WebGLTextures: Trying to use " + t + " texture units while this GPU supports only " + p), P += 1, t
        }, this.resetTextureUnits = function() {
            P = 0
        }, this.setTexture2D = A, this.setTexture2DArray = function(e, i) {
            var o = r.get(e);
            e.version > 0 && o.__version !== e.version ? U(o, e, i) : (n.activeTexture(t.TEXTURE0 + i), n.bindTexture(t.TEXTURE_2D_ARRAY, o.__webglTexture))
        }, this.setTexture3D = function(e, i) {
            var o = r.get(e);
            e.version > 0 && o.__version !== e.version ? U(o, e, i) : (n.activeTexture(t.TEXTURE0 + i), n.bindTexture(t.TEXTURE_3D, o.__webglTexture))
        }, this.setTextureCube = L, this.setTextureCubeDynamic = R, this.setupRenderTarget = function(i) {
            var s = r.get(i),
                u = r.get(i.texture);
            i.addEventListener("dispose", O), u.__webglTexture = t.createTexture(), a.memory.textures++;
            var c = !0 === i.isWebGLRenderTargetCube,
                l = !0 === i.isWebGLMultisampleRenderTarget,
                h = !0 === i.isWebGLMultiviewRenderTarget,
                p = w(i) || f;
            if (c) {
                s.__webglFramebuffer = [];
                for (var d = 0; d < 6; d++) s.__webglFramebuffer[d] = t.createFramebuffer()
            } else if (s.__webglFramebuffer = t.createFramebuffer(), l)
                if (f) {
                    s.__webglMultisampledFramebuffer = t.createFramebuffer(), s.__webglColorRenderbuffer = t.createRenderbuffer(), t.bindRenderbuffer(t.RENDERBUFFER, s.__webglColorRenderbuffer);
                    var m = S(o.convert(i.texture.format), o.convert(i.texture.type)),
                        v = B(i);
                    t.renderbufferStorageMultisample(t.RENDERBUFFER, v, m, i.width, i.height), t.bindFramebuffer(t.FRAMEBUFFER, s.__webglMultisampledFramebuffer), t.framebufferRenderbuffer(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.RENDERBUFFER, s.__webglColorRenderbuffer), t.bindRenderbuffer(t.RENDERBUFFER, null), i.depthBuffer && (s.__webglDepthRenderbuffer = t.createRenderbuffer(), k(s.__webglDepthRenderbuffer, i, !0)), t.bindFramebuffer(t.FRAMEBUFFER, null)
                } else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");
            else if (h) {
                var y = i.width,
                    g = i.height,
                    b = i.numViews;
                t.bindFramebuffer(t.FRAMEBUFFER, s.__webglFramebuffer);
                var _ = e.get("OVR_multiview2");
                a.memory.textures += 2;
                var T = t.createTexture();
                t.bindTexture(t.TEXTURE_2D_ARRAY, T), t.texParameteri(t.TEXTURE_2D_ARRAY, t.TEXTURE_MAG_FILTER, t.NEAREST), t.texParameteri(t.TEXTURE_2D_ARRAY, t.TEXTURE_MIN_FILTER, t.NEAREST), t.texImage3D(t.TEXTURE_2D_ARRAY, 0, t.RGBA8, y, g, b, 0, t.RGBA, t.UNSIGNED_BYTE, null), _.framebufferTextureMultiviewOVR(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, T, 0, 0, b);
                var M = t.createTexture();
                t.bindTexture(t.TEXTURE_2D_ARRAY, M), t.texParameteri(t.TEXTURE_2D_ARRAY, t.TEXTURE_MAG_FILTER, t.NEAREST), t.texParameteri(t.TEXTURE_2D_ARRAY, t.TEXTURE_MIN_FILTER, t.NEAREST), t.texImage3D(t.TEXTURE_2D_ARRAY, 0, t.DEPTH24_STENCIL8, y, g, b, 0, t.DEPTH_STENCIL, t.UNSIGNED_INT_24_8, null), _.framebufferTextureMultiviewOVR(t.FRAMEBUFFER, t.DEPTH_STENCIL_ATTACHMENT, M, 0, 0, b);
                var P = new Array(b);
                for (d = 0; d < b; ++d) P[d] = t.createFramebuffer(), t.bindFramebuffer(t.FRAMEBUFFER, P[d]), t.framebufferTextureLayer(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, T, 0, d);
                s.__webglColorTexture = T, s.__webglDepthStencilTexture = M, s.__webglViewFramebuffers = P, t.bindFramebuffer(t.FRAMEBUFFER, null), t.bindTexture(t.TEXTURE_2D_ARRAY, null)
            }
            if (c) {
                n.bindTexture(t.TEXTURE_CUBE_MAP, u.__webglTexture), C(t.TEXTURE_CUBE_MAP, i.texture, p);
                for (d = 0; d < 6; d++) j(s.__webglFramebuffer[d], i, t.COLOR_ATTACHMENT0, t.TEXTURE_CUBE_MAP_POSITIVE_X + d);
                x(i.texture, p) && E(t.TEXTURE_CUBE_MAP, i.texture, i.width, i.height), n.bindTexture(t.TEXTURE_CUBE_MAP, null)
            } else h || (n.bindTexture(t.TEXTURE_2D, u.__webglTexture), C(t.TEXTURE_2D, i.texture, p), j(s.__webglFramebuffer, i, t.COLOR_ATTACHMENT0, t.TEXTURE_2D), x(i.texture, p) && E(t.TEXTURE_2D, i.texture, i.width, i.height), n.bindTexture(t.TEXTURE_2D, null));
            i.depthBuffer && F(i)
        }, this.updateRenderTargetMipmap = function(e) {
            var i = e.texture;
            if (x(i, w(e) || f)) {
                var o = e.isWebGLRenderTargetCube ? t.TEXTURE_CUBE_MAP : t.TEXTURE_2D,
                    a = r.get(i).__webglTexture;
                n.bindTexture(o, a), E(o, i, e.width, e.height), n.bindTexture(o, null)
            }
        }, this.updateMultisampleRenderTarget = function(e) {
            if (e.isWebGLMultisampleRenderTarget)
                if (f) {
                    var n = r.get(e);
                    t.bindFramebuffer(t.READ_FRAMEBUFFER, n.__webglMultisampledFramebuffer), t.bindFramebuffer(t.DRAW_FRAMEBUFFER, n.__webglFramebuffer);
                    var i = e.width,
                        o = e.height,
                        a = t.COLOR_BUFFER_BIT;
                    e.depthBuffer && (a |= t.DEPTH_BUFFER_BIT), e.stencilBuffer && (a |= t.STENCIL_BUFFER_BIT), t.blitFramebuffer(0, 0, i, o, 0, 0, i, o, a, t.NEAREST)
                } else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")
        }, this.safeSetTexture2D = function(t, e) {
            t && t.isWebGLRenderTarget && (!1 === G && (console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."), G = !0), t = t.texture), A(t, e)
        }, this.safeSetTextureCube = function(t, e) {
            t && t.isWebGLRenderTargetCube && (!1 === z && (console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."), z = !0), t = t.texture), t && t.isCubeTexture || Array.isArray(t.image) && 6 === t.image.length ? L(t, e) : R(t, e)
        }
    }

    function Se(t, e, n) {
        var r = n.isWebGL2;
        return {
            convert: function(n) {
                var i;
                if (n === s.tc) return t.UNSIGNED_BYTE;
                if (n === s.wc) return t.UNSIGNED_SHORT_4_4_4_4;
                if (n === s.xc) return t.UNSIGNED_SHORT_5_5_5_1;
                if (n === s.yc) return t.UNSIGNED_SHORT_5_6_5;
                if (n === s.j) return t.BYTE;
                if (n === s.fc) return t.SHORT;
                if (n === s.zc) return t.UNSIGNED_SHORT;
                if (n === s.K) return t.INT;
                if (n === s.vc) return t.UNSIGNED_INT;
                if (n === s.E) return t.FLOAT;
                if (n === s.J) return r ? t.HALF_FLOAT : null !== (i = e.get("OES_texture_half_float")) ? i.HALF_FLOAT_OES : null;
                if (n === s.e) return t.ALPHA;
                if (n === s.Ub) return t.RGB;
                if (n === s.yb) return t.RGBA;
                if (n === s.X) return t.LUMINANCE;
                if (n === s.W) return t.LUMINANCE_ALPHA;
                if (n === s.u) return t.DEPTH_COMPONENT;
                if (n === s.v) return t.DEPTH_STENCIL;
                if (n === s.bc) return t.RED;
                if (n === s.ac || n === s.Pb || n === s.Qb || n === s.Rb) {
                    if (null === (i = e.get("WEBGL_compressed_texture_s3tc"))) return null;
                    if (n === s.ac) return i.COMPRESSED_RGB_S3TC_DXT1_EXT;
                    if (n === s.Pb) return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                    if (n === s.Qb) return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                    if (n === s.Rb) return i.COMPRESSED_RGBA_S3TC_DXT5_EXT
                }
                if (n === s.Zb || n === s.Yb || n === s.Ob || n === s.Nb) {
                    if (null === (i = e.get("WEBGL_compressed_texture_pvrtc"))) return null;
                    if (n === s.Zb) return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                    if (n === s.Yb) return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                    if (n === s.Ob) return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                    if (n === s.Nb) return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
                }
                return n === s.Xb ? null !== (i = e.get("WEBGL_compressed_texture_etc1")) ? i.COMPRESSED_RGB_ETC1_WEBGL : null : n === s.Fb || n === s.Gb || n === s.Hb || n === s.Ib || n === s.Jb || n === s.Kb || n === s.Lb || n === s.Mb || n === s.Ab || n === s.Bb || n === s.Cb || n === s.zb || n === s.Db || n === s.Eb ? null !== (i = e.get("WEBGL_compressed_texture_astc")) ? n : null : n === s.uc ? r ? t.UNSIGNED_INT_24_8 : null !== (i = e.get("WEBGL_depth_texture")) ? i.UNSIGNED_INT_24_8_WEBGL : null : void 0
            }
        }
    }

    function Te(t, e, n, r) {
        me.a.call(this, t, e, r), this.depthBuffer = !1, this.stencilBuffer = !1, this.numViews = n
    }

    function Me(t, e) {
        var n, r, i, o, a, s, u, c = t.extensions,
            l = t.properties,
            f = 0;

        function p(t) {
            return t.isArrayCamera ? t.cameras : (a[0] = t, a)
        }
        this.isAvailable = function() {
            if (void 0 === u) {
                var t = c.get("OVR_multiview2");
                if (u = null !== t && !1 === e.getContextAttributes().antialias) {
                    f = e.getParameter(t.MAX_VIEWS_OVR), n = new Te(0, 0, 2), s = new d.a, o = [], i = [], a = [];
                    for (var r = 0; r < f; r++) o[r] = new h.a, i[r] = new g.a
                }
            }
            return u
        }, this.attachCamera = function(e) {
            !1 !== function(t) {
                if (void 0 === t.isArrayCamera) return !0;
                var e = t.cameras;
                if (e.length > f) return !1;
                for (var n = 1, r = e.length; n < r; n++)
                    if (e[0].viewport.z !== e[n].viewport.z || e[0].viewport.w !== e[n].viewport.w) return !1;
                return !0
            }(e) && (r = t.getRenderTarget(), function(e) {
                if (r ? s.set(r.width, r.height) : t.getDrawingBufferSize(s), e.isArrayCamera) {
                    var i = e.cameras[0].viewport;
                    n.setSize(i.z, i.w), n.setNumViews(e.cameras.length)
                } else n.setSize(s.x, s.y), n.setNumViews(2)
            }(e), t.setRenderTarget(n))
        }, this.detachCamera = function(i) {
            n === t.getRenderTarget() && (t.setRenderTarget(r), function(t) {
                var r = n,
                    i = r.numViews,
                    o = l.get(r).__webglViewFramebuffers,
                    a = r.width,
                    u = r.height;
                if (t.isArrayCamera)
                    for (var c = 0; c < i; c++) {
                        var h = t.cameras[c].viewport,
                            f = h.x,
                            p = h.y,
                            d = f + h.z,
                            m = p + h.w;
                        e.bindFramebuffer(e.READ_FRAMEBUFFER, o[c]), e.blitFramebuffer(0, 0, a, u, f, p, d, m, e.COLOR_BUFFER_BIT, e.NEAREST)
                    } else e.bindFramebuffer(e.READ_FRAMEBUFFER, o[0]), e.blitFramebuffer(0, 0, a, u, 0, 0, s.x, s.y, e.COLOR_BUFFER_BIT, e.NEAREST)
            }(i))
        }, this.updateCameraProjectionMatricesUniform = function(t, n) {
            for (var r = p(t), i = 0; i < r.length; i++) o[i].copy(r[i].projectionMatrix);
            n.setValue(e, "projectionMatrices", o)
        }, this.updateCameraViewMatricesUniform = function(t, n) {
            for (var r = p(t), i = 0; i < r.length; i++) o[i].copy(r[i].matrixWorldInverse);
            n.setValue(e, "viewMatrices", o)
        }, this.updateObjectMatricesUniforms = function(t, n, r) {
            for (var a = p(n), s = 0; s < a.length; s++) o[s].multiplyMatrices(a[s].matrixWorldInverse, t.matrixWorld), i[s].getNormalMatrix(o[s]);
            r.setValue(e, "modelViewMatrices", o), r.setValue(e, "normalMatrices", i)
        }
    }
    Te.prototype = Object.assign(Object.create(me.a.prototype), {
        constructor: Te,
        isWebGLMultiviewRenderTarget: !0,
        copy: function(t) {
            return me.a.prototype.copy.call(this, t), this.numViews = t.numViews, this
        },
        setNumViews: function(t) {
            return this.numViews !== t && (this.numViews = t, this.dispose()), this
        }
    });
    var Oe = n(64),
        Pe = n(155),
        Ae = n(16),
        Le = n(51);

    function Re(t) {
        Le.a.call(this), this.cameras = t || []
    }
    Re.prototype = Object.assign(Object.create(Le.a.prototype), {
        constructor: Re,
        isArrayCamera: !0
    });
    var De = new m.a,
        Ie = new m.a;

    function Ce(t, e, n) {
        De.setFromMatrixPosition(e.matrixWorld), Ie.setFromMatrixPosition(n.matrixWorld);
        var r = De.distanceTo(Ie),
            i = e.projectionMatrix.elements,
            o = n.projectionMatrix.elements,
            a = i[14] / (i[10] - 1),
            s = i[14] / (i[10] + 1),
            u = (i[9] + 1) / i[5],
            c = (i[9] - 1) / i[5],
            l = (i[8] - 1) / i[0],
            h = (o[8] + 1) / o[0],
            f = a * l,
            p = a * h,
            d = r / (-l + h),
            m = d * -l;
        e.matrixWorld.decompose(t.position, t.quaternion, t.scale), t.translateX(m), t.translateZ(d), t.matrixWorld.compose(t.position, t.quaternion, t.scale), t.matrixWorldInverse.getInverse(t.matrixWorld);
        var v = a + d,
            y = s + d,
            g = f - m,
            b = p + (r - m),
            _ = u * s / y * v,
            w = c * s / y * v;
        t.projectionMatrix.makePerspective(g, b, _, w, v, y)
    }

    function Ne(t) {
        var e, n, r = this,
            i = null,
            o = null,
            a = null,
            s = [],
            u = new h.a,
            c = new h.a,
            l = 1,
            f = "local-floor";
        "undefined" != typeof window && "VRFrameData" in window && (o = new window.VRFrameData, window.addEventListener("vrdisplaypresentchange", M, !1));
        var p = new h.a,
            v = new Ae.a,
            y = new m.a,
            g = new Le.a;
        g.viewport = new _.a, g.layers.enable(1);
        var b = new Le.a;
        b.viewport = new _.a, b.layers.enable(2);
        var x = new Re([g, b]);

        function E() {
            return null !== i && !0 === i.isPresenting
        }
        x.layers.enable(1), x.layers.enable(2);
        var S, T = new d.a;

        function M() {
            if (E()) {
                var o = i.getEyeParameters("left");
                e = 2 * o.renderWidth * l, n = o.renderHeight * l, S = t.getPixelRatio(), t.getSize(T), t.setDrawingBufferSize(e, n, 1), g.viewport.set(0, 0, e / 2, n), b.viewport.set(e / 2, 0, e / 2, n), L.start(), r.dispatchEvent({
                    type: "sessionstart"
                })
            } else r.enabled && t.setDrawingBufferSize(T.width, T.height, S), L.stop(), r.dispatchEvent({
                type: "sessionend"
            })
        }
        var O = [];

        function P(t) {
            for (var e = navigator.getGamepads && navigator.getGamepads(), n = 0, r = e.length; n < r; n++) {
                var i = e[n];
                if (i && ("Daydream Controller" === i.id || "Gear VR Controller" === i.id || "Oculus Go Controller" === i.id || "OpenVR Gamepad" === i.id || i.id.startsWith("Oculus Touch") || i.id.startsWith("HTC Vive Focus") || i.id.startsWith("Spatial Controller"))) {
                    var o = i.hand;
                    if (0 === t && ("" === o || "right" === o)) return i;
                    if (1 === t && "left" === o) return i
                }
            }
        }

        function A(t, r) {
            null !== r && 4 === r.length && t.set(r[0] * e, r[1] * n, r[2] * e, r[3] * n)
        }
        this.enabled = !1, this.getController = function(t) {
            var e = s[t];
            return void 0 === e && ((e = new Pe.a).matrixAutoUpdate = !1, e.visible = !1, s[t] = e), e
        }, this.getDevice = function() {
            return i
        }, this.setDevice = function(t) {
            void 0 !== t && (i = t), L.setContext(t)
        }, this.setFramebufferScaleFactor = function(t) {
            l = t
        }, this.setReferenceSpaceType = function(t) {
            f = t
        }, this.setPoseTarget = function(t) {
            void 0 !== t && (a = t)
        }, this.getCamera = function(t) {
            var e = "local-floor" === f ? 1.6 : 0;
            if (!1 === E()) return t.position.set(0, e, 0), t.rotation.set(0, 0, 0), t;
            if (i.depthNear = t.near, i.depthFar = t.far, i.getFrameData(o), "local-floor" === f) {
                var n = i.stageParameters;
                n ? u.fromArray(n.sittingToStandingTransform) : u.makeTranslation(0, e, 0)
            }
            var r = o.pose,
                l = null !== a ? a : t;
            l.matrix.copy(u), l.matrix.decompose(l.position, l.quaternion, l.scale), null !== r.orientation && (v.fromArray(r.orientation), l.quaternion.multiply(v)), null !== r.position && (v.setFromRotationMatrix(u), y.fromArray(r.position), y.applyQuaternion(v), l.position.add(y)), l.updateMatrixWorld(), g.near = t.near, b.near = t.near, g.far = t.far, b.far = t.far, g.matrixWorldInverse.fromArray(o.leftViewMatrix), b.matrixWorldInverse.fromArray(o.rightViewMatrix), c.getInverse(u), "local-floor" === f && (g.matrixWorldInverse.multiply(c), b.matrixWorldInverse.multiply(c));
            var h = l.parent;
            null !== h && (p.getInverse(h.matrixWorld), g.matrixWorldInverse.multiply(p), b.matrixWorldInverse.multiply(p)), g.matrixWorld.getInverse(g.matrixWorldInverse), b.matrixWorld.getInverse(b.matrixWorldInverse), g.projectionMatrix.fromArray(o.leftProjectionMatrix), b.projectionMatrix.fromArray(o.rightProjectionMatrix), Ce(x, g, b);
            var d = i.getLayers();
            if (d.length) {
                var m = d[0];
                A(g.viewport, m.leftBounds), A(b.viewport, m.rightBounds)
            }
            return function() {
                for (var t = 0; t < s.length; t++) {
                    var e = s[t],
                        n = P(t);
                    if (void 0 !== n && void 0 !== n.pose) {
                        if (null === n.pose) return;
                        var r = n.pose;
                        !1 === r.hasPosition && e.position.set(.2, -.6, -.05), null !== r.position && e.position.fromArray(r.position), null !== r.orientation && e.quaternion.fromArray(r.orientation), e.matrix.compose(e.position, e.quaternion, e.scale), e.matrix.premultiply(u), e.matrix.decompose(e.position, e.quaternion, e.scale), e.matrixWorldNeedsUpdate = !0, e.visible = !0;
                        var i = "Daydream Controller" === n.id ? 0 : 1;
                        void 0 === O[t] && (O[t] = !1), O[t] !== n.buttons[i].pressed && (O[t] = n.buttons[i].pressed, !0 === O[t] ? e.dispatchEvent({
                            type: "selectstart"
                        }) : (e.dispatchEvent({
                            type: "selectend"
                        }), e.dispatchEvent({
                            type: "select"
                        })))
                    } else e.visible = !1
                }
            }(), x
        }, this.getStandingMatrix = function() {
            return u
        }, this.isPresenting = E;
        var L = new w;
        this.setAnimationLoop = function(t) {
            L.setAnimationLoop(t), E() && L.start()
        }, this.submitFrame = function() {
            E() && i.submitFrame()
        }, this.dispose = function() {
            "undefined" != typeof window && window.removeEventListener("vrdisplaypresentchange", M)
        }, this.setFrameOfReferenceType = function() {
            console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")
        }
    }

    function Ue(t, e) {
        var n = this,
            r = null,
            i = null,
            o = "local-floor",
            a = null,
            s = [],
            u = [];

        function c() {
            return null !== r && null !== i
        }
        var l = new Le.a;
        l.layers.enable(1), l.viewport = new _.a;
        var f = new Le.a;
        f.layers.enable(2), f.viewport = new _.a;
        var p = new Re([l, f]);

        function d(t) {
            for (var e = 0; e < s.length; e++) u[e] === t.inputSource && s[e].dispatchEvent({
                type: t.type
            })
        }

        function m() {
            t.setFramebuffer(null), t.setRenderTarget(t.getRenderTarget()), E.stop(), n.dispatchEvent({
                type: "sessionend"
            })
        }

        function v(t) {
            i = t, E.setContext(r), E.start(), n.dispatchEvent({
                type: "sessionstart"
            })
        }

        function y() {
            for (var t = 0; t < s.length; t++) u[t] = g(t)
        }

        function g(t) {
            for (var e = r.inputSources, n = 0; n < e.length; n++) {
                var i = e[n],
                    o = i.handedness;
                if (0 === t && ("none" === o || "right" === o)) return i;
                if (1 === t && "left" === o) return i
            }
        }

        function b(t, e) {
            null === e ? t.matrixWorld.copy(t.matrix) : t.matrixWorld.multiplyMatrices(e.matrixWorld, t.matrix), t.matrixWorldInverse.getInverse(t.matrixWorld)
        }
        p.layers.enable(1), p.layers.enable(2), this.enabled = !1, this.getController = function(t) {
            var e = s[t];
            return void 0 === e && ((e = new Pe.a).matrixAutoUpdate = !1, e.visible = !1, s[t] = e), e
        }, this.setFramebufferScaleFactor = function() {}, this.setReferenceSpaceType = function(t) {
            o = t
        }, this.getSession = function() {
            return r
        }, this.setSession = function(t) {
            null !== (r = t) && (r.addEventListener("select", d), r.addEventListener("selectstart", d), r.addEventListener("selectend", d), r.addEventListener("end", m), r.updateRenderState({
                baseLayer: new XRWebGLLayer(r, e)
            }), r.requestReferenceSpace(o).then(v), r.addEventListener("inputsourceschange", y), y())
        }, this.getCamera = function(t) {
            if (c()) {
                var e = t.parent,
                    n = p.cameras;
                b(p, e);
                for (var r = 0; r < n.length; r++) b(n[r], e);
                t.matrixWorld.copy(p.matrixWorld);
                for (var i = t.children, o = (r = 0, i.length); r < o; r++) i[r].updateMatrixWorld(!0);
                return Ce(p, l, f), p
            }
            return t
        }, this.isPresenting = c;
        var x = null;
        var E = new w;
        E.setAnimationLoop((function(e, n) {
            if (null !== (a = n.getViewerPose(i))) {
                var o = a.views,
                    c = r.renderState.baseLayer;
                t.setFramebuffer(c.framebuffer);
                for (var l = 0; l < o.length; l++) {
                    var h = o[l],
                        f = c.getViewport(h),
                        d = h.transform.inverse.matrix,
                        m = p.cameras[l];
                    m.matrix.fromArray(d).getInverse(m.matrix), m.projectionMatrix.fromArray(h.projectionMatrix), m.viewport.set(f.x, f.y, f.width, f.height), 0 === l && p.matrix.copy(m.matrix)
                }
            }
            for (l = 0; l < s.length; l++) {
                var v = s[l],
                    y = u[l];
                if (y) {
                    var g = n.getPose(y.targetRaySpace, i);
                    if (null !== g) {
                        v.matrix.fromArray(g.transform.matrix), v.matrix.decompose(v.position, v.rotation, v.scale), v.visible = !0;
                        continue
                    }
                }
                v.visible = !1
            }
            x && x(e)
        })), this.setAnimationLoop = function(t) {
            x = t
        }, this.dispose = function() {}, this.getStandingMatrix = function() {
            return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."), new h.a
        }, this.getDevice = function() {
            console.warn("THREE.WebXRManager: getDevice() has been deprecated.")
        }, this.setDevice = function() {
            console.warn("THREE.WebXRManager: setDevice() has been deprecated.")
        }, this.setFrameOfReferenceType = function() {
            console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")
        }, this.submitFrame = function() {}
    }

    function je(t) {
        var e = void 0 !== (t = t || {}).canvas ? t.canvas : document.createElementNS("http://www.w3.org/1999/xhtml", "canvas"),
            n = void 0 !== t.context ? t.context : null,
            r = void 0 !== t.alpha && t.alpha,
            i = void 0 === t.depth || t.depth,
            o = void 0 === t.stencil || t.stencil,
            a = void 0 !== t.antialias && t.antialias,
            f = void 0 === t.premultipliedAlpha || t.premultipliedAlpha,
            y = void 0 !== t.preserveDrawingBuffer && t.preserveDrawingBuffer,
            g = void 0 !== t.powerPreference ? t.powerPreference : "default",
            E = void 0 !== t.failIfMajorPerformanceCaveat && t.failIfMajorPerformanceCaveat,
            S = null,
            T = null;
        this.domElement = e, this.debug = {
            checkShaderErrors: !0
        }, this.autoClear = !0, this.autoClearColor = !0, this.autoClearDepth = !0, this.autoClearStencil = !0, this.sortObjects = !0, this.clippingPlanes = [], this.localClippingEnabled = !1, this.gammaFactor = 2, this.gammaInput = !1, this.gammaOutput = !1, this.physicallyCorrectLights = !1, this.toneMapping = s.U, this.toneMappingExposure = 1, this.toneMappingWhitePoint = 1, this.maxMorphTargets = 8, this.maxMorphNormals = 4;
        var M, L, I, C, N, F, z, H, V, W, X, q, Y, K, Z, Q, J, $, tt = this,
            et = !1,
            nt = null,
            rt = 0,
            it = 0,
            ot = null,
            at = null,
            st = -1,
            ut = {
                geometry: null,
                program: null,
                wireframe: !1
            },
            ct = null,
            lt = null,
            ht = new _.a,
            ft = new _.a,
            pt = null,
            dt = e.width,
            mt = e.height,
            vt = 1,
            yt = new _.a(0, 0, dt, mt),
            gt = new _.a(0, 0, dt, mt),
            bt = !1,
            _t = new l.a,
            wt = new R,
            xt = !1,
            Et = !1,
            St = new h.a,
            Tt = new m.a;

        function Mt() {
            return null === ot ? vt : 1
        }
        try {
            var Ot = {
                alpha: r,
                depth: i,
                stencil: o,
                antialias: a,
                premultipliedAlpha: f,
                preserveDrawingBuffer: y,
                powerPreference: g,
                failIfMajorPerformanceCaveat: E,
                xrCompatible: !0
            };
            if (e.addEventListener("webglcontextlost", Dt, !1), e.addEventListener("webglcontextrestored", It, !1), null === (M = n || e.getContext("webgl", Ot) || e.getContext("experimental-webgl", Ot))) throw null !== e.getContext("webgl") ? new Error("Error creating WebGL context with your selected attributes.") : new Error("Error creating WebGL context.");
            void 0 === M.getShaderPrecisionFormat && (M.getShaderPrecisionFormat = function() {
                return {
                    rangeMin: 1,
                    rangeMax: 1,
                    precision: 1
                }
            })
        } catch (t) {
            throw console.error("THREE.WebGLRenderer: " + t.message), t
        }

        function Pt() {
            L = new D(M), !1 === (I = new A(M, L, t)).isWebGL2 && (L.get("WEBGL_depth_texture"), L.get("OES_texture_float"), L.get("OES_texture_half_float"), L.get("OES_texture_half_float_linear"), L.get("OES_standard_derivatives"), L.get("OES_element_index_uint"), L.get("ANGLE_instanced_arrays")), L.get("OES_texture_float_linear"), $ = new Se(M, L, I), (C = new we(M, L, I)).scissor(ft.copy(gt).multiplyScalar(vt).floor()), C.viewport(ht.copy(yt).multiplyScalar(vt).floor()), N = new k(M), F = new ie, z = new Ee(M, L, C, F, I, $, N), H = new x(M), V = new U(M, H, N), W = new G(M, V, H, N), Z = new B(M), X = new re(tt, L, I), q = new ue, Y = new de, K = new O(tt, C, W, f), Q = new P(M, L, N, I), J = new j(M, L, N, I), N.programs = X.programs, tt.capabilities = I, tt.extensions = L, tt.properties = F, tt.renderLists = q, tt.state = C, tt.info = N
        }
        Pt();
        var At = "undefined" != typeof navigator && "xr" in navigator && "isSessionSupported" in navigator.xr ? new Ue(tt, M) : new Ne(tt);
        this.vr = At;
        var Lt = new Me(tt, M),
            Rt = new be(tt, W, I.maxTextureSize);

        function Dt(t) {
            t.preventDefault(), console.log("THREE.WebGLRenderer: Context Lost."), et = !0
        }

        function It() {
            console.log("THREE.WebGLRenderer: Context Restored."), et = !1, Pt()
        }

        function Ct(t) {
            var e = t.target;
            e.removeEventListener("dispose", Ct),
                function(t) {
                    Nt(t), F.remove(t)
                }(e)
        }

        function Nt(t) {
            var e = F.get(t).program;
            t.program = void 0, void 0 !== e && X.releaseProgram(e)
        }
        this.shadowMap = Rt, this.getContext = function() {
            return M
        }, this.getContextAttributes = function() {
            return M.getContextAttributes()
        }, this.forceContextLoss = function() {
            var t = L.get("WEBGL_lose_context");
            t && t.loseContext()
        }, this.forceContextRestore = function() {
            var t = L.get("WEBGL_lose_context");
            t && t.restoreContext()
        }, this.getPixelRatio = function() {
            return vt
        }, this.setPixelRatio = function(t) {
            void 0 !== t && (vt = t, this.setSize(dt, mt, !1))
        }, this.getSize = function(t) {
            return void 0 === t && (console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"), t = new d.a), t.set(dt, mt)
        }, this.setSize = function(t, n, r) {
            At.isPresenting() ? console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.") : (dt = t, mt = n, e.width = Math.floor(t * vt), e.height = Math.floor(n * vt), !1 !== r && (e.style.width = t + "px", e.style.height = n + "px"), this.setViewport(0, 0, t, n))
        }, this.getDrawingBufferSize = function(t) {
            return void 0 === t && (console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"), t = new d.a), t.set(dt * vt, mt * vt).floor()
        }, this.setDrawingBufferSize = function(t, n, r) {
            dt = t, mt = n, vt = r, e.width = Math.floor(t * r), e.height = Math.floor(n * r), this.setViewport(0, 0, t, n)
        }, this.getCurrentViewport = function(t) {
            return void 0 === t && (console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"), t = new _.a), t.copy(ht)
        }, this.getViewport = function(t) {
            return t.copy(yt)
        }, this.setViewport = function(t, e, n, r) {
            t.isVector4 ? yt.set(t.x, t.y, t.z, t.w) : yt.set(t, e, n, r), C.viewport(ht.copy(yt).multiplyScalar(vt).floor())
        }, this.getScissor = function(t) {
            return t.copy(gt)
        }, this.setScissor = function(t, e, n, r) {
            t.isVector4 ? gt.set(t.x, t.y, t.z, t.w) : gt.set(t, e, n, r), C.scissor(ft.copy(gt).multiplyScalar(vt).floor())
        }, this.getScissorTest = function() {
            return bt
        }, this.setScissorTest = function(t) {
            C.setScissorTest(bt = t)
        }, this.getClearColor = function() {
            return K.getClearColor()
        }, this.setClearColor = function() {
            K.setClearColor.apply(K, arguments)
        }, this.getClearAlpha = function() {
            return K.getClearAlpha()
        }, this.setClearAlpha = function() {
            K.setClearAlpha.apply(K, arguments)
        }, this.clear = function(t, e, n) {
            var r = 0;
            (void 0 === t || t) && (r |= M.COLOR_BUFFER_BIT), (void 0 === e || e) && (r |= M.DEPTH_BUFFER_BIT), (void 0 === n || n) && (r |= M.STENCIL_BUFFER_BIT), M.clear(r)
        }, this.clearColor = function() {
            this.clear(!0, !1, !1)
        }, this.clearDepth = function() {
            this.clear(!1, !0, !1)
        }, this.clearStencil = function() {
            this.clear(!1, !1, !0)
        }, this.dispose = function() {
            e.removeEventListener("webglcontextlost", Dt, !1), e.removeEventListener("webglcontextrestored", It, !1), q.dispose(), Y.dispose(), F.dispose(), W.dispose(), At.dispose(), jt.stop()
        }, this.renderBufferImmediate = function(t, e) {
            C.initAttributes();
            var n = F.get(t);
            t.hasPositions && !n.position && (n.position = M.createBuffer()), t.hasNormals && !n.normal && (n.normal = M.createBuffer()), t.hasUvs && !n.uv && (n.uv = M.createBuffer()), t.hasColors && !n.color && (n.color = M.createBuffer());
            var r = e.getAttributes();
            t.hasPositions && (M.bindBuffer(M.ARRAY_BUFFER, n.position), M.bufferData(M.ARRAY_BUFFER, t.positionArray, M.DYNAMIC_DRAW), C.enableAttribute(r.position), M.vertexAttribPointer(r.position, 3, M.FLOAT, !1, 0, 0)), t.hasNormals && (M.bindBuffer(M.ARRAY_BUFFER, n.normal), M.bufferData(M.ARRAY_BUFFER, t.normalArray, M.DYNAMIC_DRAW), C.enableAttribute(r.normal), M.vertexAttribPointer(r.normal, 3, M.FLOAT, !1, 0, 0)), t.hasUvs && (M.bindBuffer(M.ARRAY_BUFFER, n.uv), M.bufferData(M.ARRAY_BUFFER, t.uvArray, M.DYNAMIC_DRAW), C.enableAttribute(r.uv), M.vertexAttribPointer(r.uv, 2, M.FLOAT, !1, 0, 0)), t.hasColors && (M.bindBuffer(M.ARRAY_BUFFER, n.color), M.bufferData(M.ARRAY_BUFFER, t.colorArray, M.DYNAMIC_DRAW), C.enableAttribute(r.color), M.vertexAttribPointer(r.color, 3, M.FLOAT, !1, 0, 0)), C.disableUnusedAttributes(), M.drawArrays(M.TRIANGLES, 0, t.count), t.count = 0
        }, this.renderBufferDirect = function(t, e, n, r, i, o) {
            var a = i.isMesh && i.matrixWorld.determinant() < 0;
            C.setMaterial(r, a);
            var u = Ht(t, e, r, i),
                c = !1;
            ut.geometry === n.id && ut.program === u.id && ut.wireframe === (!0 === r.wireframe) || (ut.geometry = n.id, ut.program = u.id, ut.wireframe = !0 === r.wireframe, c = !0), i.morphTargetInfluences && (Z.update(i, n, r, u), c = !0);
            var l, h = n.index,
                f = n.attributes.position,
                p = 1;
            !0 === r.wireframe && (h = V.getWireframeAttribute(n), p = 2);
            var d = Q;
            null !== h && (l = H.get(h), (d = J).setIndex(l)), c && (! function(t, e, n, r) {
                if (!1 === I.isWebGL2 && (t.isInstancedMesh || e.isInstancedBufferGeometry) && null === L.get("ANGLE_instanced_arrays")) return;
                C.initAttributes();
                var i = e.attributes,
                    o = r.getAttributes(),
                    a = n.defaultAttributeValues;
                for (var s in o) {
                    var u = o[s];
                    if (u >= 0) {
                        var c = i[s];
                        if (void 0 !== c) {
                            var l = c.normalized,
                                h = c.itemSize;
                            if (void 0 === (g = H.get(c))) continue;
                            var f = g.buffer,
                                p = g.type,
                                d = g.bytesPerElement;
                            if (c.isInterleavedBufferAttribute) {
                                var m = c.data,
                                    v = m.stride,
                                    y = c.offset;
                                m && m.isInstancedInterleavedBuffer ? (C.enableAttributeAndDivisor(u, m.meshPerAttribute), void 0 === e.maxInstancedCount && (e.maxInstancedCount = m.meshPerAttribute * m.count)) : C.enableAttribute(u), M.bindBuffer(M.ARRAY_BUFFER, f), M.vertexAttribPointer(u, h, p, l, v * d, y * d)
                            } else c.isInstancedBufferAttribute ? (C.enableAttributeAndDivisor(u, c.meshPerAttribute), void 0 === e.maxInstancedCount && (e.maxInstancedCount = c.meshPerAttribute * c.count)) : C.enableAttribute(u), M.bindBuffer(M.ARRAY_BUFFER, f), M.vertexAttribPointer(u, h, p, l, 0, 0)
                        } else if ("instanceMatrix" === s) {
                            var g;
                            if (void 0 === (g = H.get(t.instanceMatrix))) continue;
                            f = g.buffer, p = g.type;
                            C.enableAttributeAndDivisor(u + 0, 1), C.enableAttributeAndDivisor(u + 1, 1), C.enableAttributeAndDivisor(u + 2, 1), C.enableAttributeAndDivisor(u + 3, 1), M.bindBuffer(M.ARRAY_BUFFER, f), M.vertexAttribPointer(u + 0, 4, p, !1, 64, 0), M.vertexAttribPointer(u + 1, 4, p, !1, 64, 16), M.vertexAttribPointer(u + 2, 4, p, !1, 64, 32), M.vertexAttribPointer(u + 3, 4, p, !1, 64, 48)
                        } else if (void 0 !== a) {
                            var b = a[s];
                            if (void 0 !== b) switch (b.length) {
                                case 2:
                                    M.vertexAttrib2fv(u, b);
                                    break;
                                case 3:
                                    M.vertexAttrib3fv(u, b);
                                    break;
                                case 4:
                                    M.vertexAttrib4fv(u, b);
                                    break;
                                default:
                                    M.vertexAttrib1fv(u, b)
                            }
                        }
                    }
                }
                C.disableUnusedAttributes()
            }(i, n, r, u), null !== h && M.bindBuffer(M.ELEMENT_ARRAY_BUFFER, l.buffer));
            var m = 1 / 0;
            null !== h ? m = h.count : void 0 !== f && (m = f.count);
            var v = n.drawRange.start * p,
                y = n.drawRange.count * p,
                g = null !== o ? o.start * p : 0,
                b = null !== o ? o.count * p : 1 / 0,
                _ = Math.max(v, g),
                w = Math.min(m, v + y, g + b) - 1,
                x = Math.max(0, w - _ + 1);
            if (0 !== x) {
                if (i.isMesh)
                    if (!0 === r.wireframe) C.setLineWidth(r.wireframeLinewidth * Mt()), d.setMode(M.LINES);
                    else switch (i.drawMode) {
                        case s.qc:
                            d.setMode(M.TRIANGLES);
                            break;
                        case s.pc:
                            d.setMode(M.TRIANGLE_STRIP);
                            break;
                        case s.oc:
                            d.setMode(M.TRIANGLE_FAN)
                    } else if (i.isLine) {
                        var E = r.linewidth;
                        void 0 === E && (E = 1), C.setLineWidth(E * Mt()), i.isLineSegments ? d.setMode(M.LINES) : i.isLineLoop ? d.setMode(M.LINE_LOOP) : d.setMode(M.LINE_STRIP)
                    } else i.isPoints ? d.setMode(M.POINTS) : i.isSprite && d.setMode(M.TRIANGLES);
                i.isInstancedMesh ? d.renderInstances(n, _, x, i.count) : n.isInstancedBufferGeometry ? d.renderInstances(n, _, x, n.maxInstancedCount) : d.render(_, x)
            }
        }, this.compile = function(t, e) {
            (T = Y.get(t, e)).init(), t.traverse((function(t) {
                t.isLight && (T.pushLight(t), t.castShadow && T.pushShadow(t))
            })), T.setupLights(e), t.traverse((function(e) {
                if (e.material)
                    if (Array.isArray(e.material))
                        for (var n = 0; n < e.material.length; n++) zt(e.material[n], t.fog, e);
                    else zt(e.material, t.fog, e)
            }))
        };
        var Ut = null;
        var jt = new w;

        function kt(t, e, n, r) {
            if (!1 !== t.visible) {
                if (t.layers.test(e.layers))
                    if (t.isGroup) n = t.renderOrder;
                    else if (t.isLOD) !0 === t.autoUpdate && t.update(e);
                else if (t.isLight) T.pushLight(t), t.castShadow && T.pushShadow(t);
                else if (t.isSprite) {
                    if (!t.frustumCulled || _t.intersectsSprite(t)) {
                        r && Tt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(St);
                        var i = W.update(t);
                        (o = t.material).visible && S.push(t, i, o, n, Tt.z, null)
                    }
                } else if (t.isImmediateRenderObject) r && Tt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(St), S.push(t, null, t.material, n, Tt.z, null);
                else if ((t.isMesh || t.isLine || t.isPoints) && (t.isSkinnedMesh && t.skeleton.frame !== N.render.frame && (t.skeleton.update(), t.skeleton.frame = N.render.frame), !t.frustumCulled || _t.intersectsObject(t))) {
                    r && Tt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(St);
                    i = W.update(t);
                    var o = t.material;
                    if (Array.isArray(o))
                        for (var a = i.groups, s = 0, u = a.length; s < u; s++) {
                            var c = a[s],
                                l = o[c.materialIndex];
                            l && l.visible && S.push(t, i, l, n, Tt.z, c)
                        } else o.visible && S.push(t, i, o, n, Tt.z, null)
                }
                var h = t.children;
                for (s = 0, u = h.length; s < u; s++) kt(h[s], e, n, r)
            }
        }

        function Bt(t, e, n, r) {
            for (var i = 0, o = t.length; i < o; i++) {
                var a = t[i],
                    s = a.object,
                    u = a.geometry,
                    c = void 0 === r ? a.material : r,
                    l = a.group;
                if (n.isArrayCamera)
                    if (lt = n, At.enabled && Lt.isAvailable()) Gt(s, e, n, u, c, l);
                    else
                        for (var h = n.cameras, f = 0, p = h.length; f < p; f++) {
                            var d = h[f];
                            s.layers.test(d.layers) && (C.viewport(ht.copy(d.viewport)), T.setupLights(d), Gt(s, e, d, u, c, l))
                        } else lt = null, Gt(s, e, n, u, c, l)
            }
        }

        function Gt(t, e, n, r, i, o) {
            if (t.onBeforeRender(tt, e, n, r, i, o), T = Y.get(e, lt || n), t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse, t.matrixWorld), t.normalMatrix.getNormalMatrix(t.modelViewMatrix), t.isImmediateRenderObject) {
                C.setMaterial(i);
                var a = Ht(n, e.fog, i, t);
                ut.geometry = null, ut.program = null, ut.wireframe = !1,
                    function(t, e) {
                        t.render((function(t) {
                            tt.renderBufferImmediate(t, e)
                        }))
                    }(t, a)
            } else tt.renderBufferDirect(n, e.fog, r, i, t, o);
            t.onAfterRender(tt, e, n, r, i, o), T = Y.get(e, lt || n)
        }

        function zt(t, e, n) {
            var r = F.get(t),
                i = T.state.lights,
                o = T.state.shadowsArray,
                a = i.state.version,
                s = X.getParameters(t, i.state, o, e, wt.numPlanes, wt.numIntersection, n),
                u = X.getProgramCacheKey(t, s),
                c = r.program,
                l = !0;
            if (void 0 === c) t.addEventListener("dispose", Ct);
            else if (c.cacheKey !== u) Nt(t);
            else if (r.lightsStateVersion !== a) r.lightsStateVersion = a, l = !1;
            else {
                if (void 0 !== s.shaderID) return;
                l = !1
            }
            if (l) {
                if (s.shaderID) {
                    var h = b[s.shaderID];
                    r.shader = {
                        name: t.type,
                        uniforms: Object(p.b)(h.uniforms),
                        vertexShader: h.vertexShader,
                        fragmentShader: h.fragmentShader
                    }
                } else r.shader = {
                    name: t.type,
                    uniforms: t.uniforms,
                    vertexShader: t.vertexShader,
                    fragmentShader: t.fragmentShader
                };
                t.onBeforeCompile(r.shader, tt), u = X.getProgramCacheKey(t, s), c = X.acquireProgram(t, r.shader, s, u), r.program = c, t.program = c
            }
            var f = c.getAttributes();
            if (t.morphTargets) {
                t.numSupportedMorphTargets = 0;
                for (var d = 0; d < tt.maxMorphTargets; d++) f["morphTarget" + d] >= 0 && t.numSupportedMorphTargets++
            }
            if (t.morphNormals) {
                t.numSupportedMorphNormals = 0;
                for (d = 0; d < tt.maxMorphNormals; d++) f["morphNormal" + d] >= 0 && t.numSupportedMorphNormals++
            }
            var m = r.shader.uniforms;
            (t.isShaderMaterial || t.isRawShaderMaterial) && !0 !== t.clipping || (r.numClippingPlanes = wt.numPlanes, r.numIntersection = wt.numIntersection, m.clippingPlanes = wt.uniform), r.fog = e, r.needsLights = function(t) {
                return t.isMeshLambertMaterial || t.isMeshPhongMaterial || t.isMeshStandardMaterial || t.isShadowMaterial || t.isShaderMaterial && !0 === t.lights
            }(t), r.lightsStateVersion = a, r.needsLights && (m.ambientLightColor.value = i.state.ambient, m.lightProbe.value = i.state.probe, m.directionalLights.value = i.state.directional, m.spotLights.value = i.state.spot, m.rectAreaLights.value = i.state.rectArea, m.pointLights.value = i.state.point, m.hemisphereLights.value = i.state.hemi, m.directionalShadowMap.value = i.state.directionalShadowMap, m.directionalShadowMatrix.value = i.state.directionalShadowMatrix, m.spotShadowMap.value = i.state.spotShadowMap, m.spotShadowMatrix.value = i.state.spotShadowMatrix, m.pointShadowMap.value = i.state.pointShadowMap, m.pointShadowMatrix.value = i.state.pointShadowMatrix);
            var v = r.program.getUniforms(),
                y = Ft.seqWithValue(v.seq, m);
            r.uniformsList = y
        }

        function Ht(t, e, n, r) {
            z.resetTextureUnits();
            var i = F.get(n),
                o = T.state.lights;
            if (xt && (Et || t !== ct)) {
                var a = t === ct && n.id === st;
                wt.setState(n.clippingPlanes, n.clipIntersection, n.clipShadows, t, i, a)
            }!1 === n.needsUpdate && (void 0 === i.program ? n.needsUpdate = !0 : n.fog && i.fog !== e ? n.needsUpdate = !0 : i.needsLights && i.lightsStateVersion !== o.state.version ? n.needsUpdate = !0 : void 0 === i.numClippingPlanes || i.numClippingPlanes === wt.numPlanes && i.numIntersection === wt.numIntersection || (n.needsUpdate = !0)), n.needsUpdate && (zt(n, e, r), n.needsUpdate = !1);
            var l, h, f = !1,
                p = !1,
                d = !1,
                m = i.program,
                y = m.getUniforms(),
                g = i.shader.uniforms;
            if (C.useProgram(m.program) && (f = !0, p = !0, d = !0), n.id !== st && (st = n.id, p = !0), f || ct !== t) {
                if (m.numMultiviewViews > 0 ? Lt.updateCameraProjectionMatricesUniform(t, y) : y.setValue(M, "projectionMatrix", t.projectionMatrix), I.logarithmicDepthBuffer && y.setValue(M, "logDepthBufFC", 2 / (Math.log(t.far + 1) / Math.LN2)), ct !== t && (ct = t, p = !0, d = !0), n.isShaderMaterial || n.isMeshPhongMaterial || n.isMeshStandardMaterial || n.envMap) {
                    var b = y.map.cameraPosition;
                    void 0 !== b && b.setValue(M, Tt.setFromMatrixPosition(t.matrixWorld))
                }(n.isMeshPhongMaterial || n.isMeshLambertMaterial || n.isMeshBasicMaterial || n.isMeshStandardMaterial || n.isShaderMaterial) && y.setValue(M, "isOrthographic", !0 === t.isOrthographicCamera), (n.isMeshPhongMaterial || n.isMeshLambertMaterial || n.isMeshBasicMaterial || n.isMeshStandardMaterial || n.isShaderMaterial || n.skinning) && (m.numMultiviewViews > 0 ? Lt.updateCameraViewMatricesUniform(t, y) : y.setValue(M, "viewMatrix", t.matrixWorldInverse))
            }
            if (n.skinning) {
                y.setOptional(M, r, "bindMatrix"), y.setOptional(M, r, "bindMatrixInverse");
                var _ = r.skeleton;
                if (_) {
                    var w = _.bones;
                    if (I.floatVertexTextures) {
                        if (void 0 === _.boneTexture) {
                            var x = Math.sqrt(4 * w.length);
                            x = u.a.ceilPowerOfTwo(x), x = Math.max(x, 4);
                            var E = new Float32Array(x * x * 4);
                            E.set(_.boneMatrices);
                            var S = new c.a(E, x, x, s.yb, s.E);
                            _.boneMatrices = E, _.boneTexture = S, _.boneTextureSize = x
                        }
                        y.setValue(M, "boneTexture", _.boneTexture, z), y.setValue(M, "boneTextureSize", _.boneTextureSize)
                    } else y.setOptional(M, _, "boneMatrices")
                }
            }
            return (p || i.receiveShadow !== r.receiveShadow) && (i.receiveShadow = r.receiveShadow, y.setValue(M, "receiveShadow", r.receiveShadow)), p && (y.setValue(M, "toneMappingExposure", tt.toneMappingExposure), y.setValue(M, "toneMappingWhitePoint", tt.toneMappingWhitePoint), i.needsLights && (h = d, (l = g).ambientLightColor.needsUpdate = h, l.lightProbe.needsUpdate = h, l.directionalLights.needsUpdate = h, l.pointLights.needsUpdate = h, l.spotLights.needsUpdate = h, l.rectAreaLights.needsUpdate = h, l.hemisphereLights.needsUpdate = h), e && n.fog && function(t, e) {
                t.fogColor.value.copy(e.color), e.isFog ? (t.fogNear.value = e.near, t.fogFar.value = e.far) : e.isFogExp2 && (t.fogDensity.value = e.density)
            }(g, e), n.isMeshBasicMaterial ? Vt(g, n) : n.isMeshLambertMaterial ? (Vt(g, n), function(t, e) {
                e.emissiveMap && (t.emissiveMap.value = e.emissiveMap)
            }(g, n)) : n.isMeshPhongMaterial ? (Vt(g, n), n.isMeshToonMaterial ? function(t, e) {
                Wt(t, e), e.gradientMap && (t.gradientMap.value = e.gradientMap)
            }(g, n) : Wt(g, n)) : n.isMeshStandardMaterial ? (Vt(g, n), n.isMeshPhysicalMaterial ? function(t, e) {
                Xt(t, e), t.reflectivity.value = e.reflectivity, t.clearcoat.value = e.clearcoat, t.clearcoatRoughness.value = e.clearcoatRoughness, e.sheen && t.sheen.value.copy(e.sheen);
                e.clearcoatNormalMap && (t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale), t.clearcoatNormalMap.value = e.clearcoatNormalMap, e.side === s.h && t.clearcoatNormalScale.value.negate());
                t.transparency.value = e.transparency
            }(g, n) : Xt(g, n)) : n.isMeshMatcapMaterial ? (Vt(g, n), function(t, e) {
                e.matcap && (t.matcap.value = e.matcap);
                e.bumpMap && (t.bumpMap.value = e.bumpMap, t.bumpScale.value = e.bumpScale, e.side === s.h && (t.bumpScale.value *= -1));
                e.normalMap && (t.normalMap.value = e.normalMap, t.normalScale.value.copy(e.normalScale), e.side === s.h && t.normalScale.value.negate());
                e.displacementMap && (t.displacementMap.value = e.displacementMap, t.displacementScale.value = e.displacementScale, t.displacementBias.value = e.displacementBias)
            }(g, n)) : n.isMeshDepthMaterial ? (Vt(g, n), function(t, e) {
                e.displacementMap && (t.displacementMap.value = e.displacementMap, t.displacementScale.value = e.displacementScale, t.displacementBias.value = e.displacementBias)
            }(g, n)) : n.isMeshDistanceMaterial ? (Vt(g, n), function(t, e) {
                e.displacementMap && (t.displacementMap.value = e.displacementMap, t.displacementScale.value = e.displacementScale, t.displacementBias.value = e.displacementBias);
                t.referencePosition.value.copy(e.referencePosition), t.nearDistance.value = e.nearDistance, t.farDistance.value = e.farDistance
            }(g, n)) : n.isMeshNormalMaterial ? (Vt(g, n), function(t, e) {
                e.bumpMap && (t.bumpMap.value = e.bumpMap, t.bumpScale.value = e.bumpScale, e.side === s.h && (t.bumpScale.value *= -1));
                e.normalMap && (t.normalMap.value = e.normalMap, t.normalScale.value.copy(e.normalScale), e.side === s.h && t.normalScale.value.negate());
                e.displacementMap && (t.displacementMap.value = e.displacementMap, t.displacementScale.value = e.displacementScale, t.displacementBias.value = e.displacementBias)
            }(g, n)) : n.isLineBasicMaterial ? (function(t, e) {
                t.diffuse.value.copy(e.color), t.opacity.value = e.opacity
            }(g, n), n.isLineDashedMaterial && function(t, e) {
                t.dashSize.value = e.dashSize, t.totalSize.value = e.dashSize + e.gapSize, t.scale.value = e.scale
            }(g, n)) : n.isPointsMaterial ? function(t, e) {
                t.diffuse.value.copy(e.color), t.opacity.value = e.opacity, t.size.value = e.size * vt, t.scale.value = .5 * mt, e.map && (t.map.value = e.map);
                e.alphaMap && (t.alphaMap.value = e.alphaMap);
                var n;
                e.map ? n = e.map : e.alphaMap && (n = e.alphaMap);
                void 0 !== n && (!0 === n.matrixAutoUpdate && n.updateMatrix(), t.uvTransform.value.copy(n.matrix))
            }(g, n) : n.isSpriteMaterial ? function(t, e) {
                t.diffuse.value.copy(e.color), t.opacity.value = e.opacity, t.rotation.value = e.rotation, e.map && (t.map.value = e.map);
                e.alphaMap && (t.alphaMap.value = e.alphaMap);
                var n;
                e.map ? n = e.map : e.alphaMap && (n = e.alphaMap);
                void 0 !== n && (!0 === n.matrixAutoUpdate && n.updateMatrix(), t.uvTransform.value.copy(n.matrix))
            }(g, n) : n.isShadowMaterial && (g.color.value.copy(n.color), g.opacity.value = n.opacity), void 0 !== g.ltc_1 && (g.ltc_1.value = v.a.LTC_1), void 0 !== g.ltc_2 && (g.ltc_2.value = v.a.LTC_2), Ft.upload(M, i.uniformsList, g, z), n.isShaderMaterial && (n.uniformsNeedUpdate = !1)), n.isShaderMaterial && !0 === n.uniformsNeedUpdate && (Ft.upload(M, i.uniformsList, g, z), n.uniformsNeedUpdate = !1), n.isSpriteMaterial && y.setValue(M, "center", r.center), m.numMultiviewViews > 0 ? Lt.updateObjectMatricesUniforms(r, t, y) : (y.setValue(M, "modelViewMatrix", r.modelViewMatrix), y.setValue(M, "normalMatrix", r.normalMatrix)), y.setValue(M, "modelMatrix", r.matrixWorld), m
        }

        function Vt(t, e) {
            var n;
            t.opacity.value = e.opacity, e.color && t.diffuse.value.copy(e.color), e.emissive && t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity), e.map && (t.map.value = e.map), e.alphaMap && (t.alphaMap.value = e.alphaMap), e.specularMap && (t.specularMap.value = e.specularMap), e.envMap && (t.envMap.value = e.envMap, t.flipEnvMap.value = e.envMap.isCubeTexture ? -1 : 1, t.reflectivity.value = e.reflectivity, t.refractionRatio.value = e.refractionRatio, t.maxMipLevel.value = F.get(e.envMap).__maxMipLevel), e.lightMap && (t.lightMap.value = e.lightMap, t.lightMapIntensity.value = e.lightMapIntensity), e.aoMap && (t.aoMap.value = e.aoMap, t.aoMapIntensity.value = e.aoMapIntensity), e.map ? n = e.map : e.specularMap ? n = e.specularMap : e.displacementMap ? n = e.displacementMap : e.normalMap ? n = e.normalMap : e.bumpMap ? n = e.bumpMap : e.roughnessMap ? n = e.roughnessMap : e.metalnessMap ? n = e.metalnessMap : e.alphaMap ? n = e.alphaMap : e.emissiveMap && (n = e.emissiveMap), void 0 !== n && (n.isWebGLRenderTarget && (n = n.texture), !0 === n.matrixAutoUpdate && n.updateMatrix(), t.uvTransform.value.copy(n.matrix))
        }

        function Wt(t, e) {
            t.specular.value.copy(e.specular), t.shininess.value = Math.max(e.shininess, 1e-4), e.emissiveMap && (t.emissiveMap.value = e.emissiveMap), e.bumpMap && (t.bumpMap.value = e.bumpMap, t.bumpScale.value = e.bumpScale, e.side === s.h && (t.bumpScale.value *= -1)), e.normalMap && (t.normalMap.value = e.normalMap, t.normalScale.value.copy(e.normalScale), e.side === s.h && t.normalScale.value.negate()), e.displacementMap && (t.displacementMap.value = e.displacementMap, t.displacementScale.value = e.displacementScale, t.displacementBias.value = e.displacementBias)
        }

        function Xt(t, e) {
            t.roughness.value = e.roughness, t.metalness.value = e.metalness, e.roughnessMap && (t.roughnessMap.value = e.roughnessMap), e.metalnessMap && (t.metalnessMap.value = e.metalnessMap), e.emissiveMap && (t.emissiveMap.value = e.emissiveMap), e.bumpMap && (t.bumpMap.value = e.bumpMap, t.bumpScale.value = e.bumpScale, e.side === s.h && (t.bumpScale.value *= -1)), e.normalMap && (t.normalMap.value = e.normalMap, t.normalScale.value.copy(e.normalScale), e.side === s.h && t.normalScale.value.negate()), e.displacementMap && (t.displacementMap.value = e.displacementMap, t.displacementScale.value = e.displacementScale, t.displacementBias.value = e.displacementBias), e.envMap && (t.envMapIntensity.value = e.envMapIntensity)
        }
        jt.setAnimationLoop((function(t) {
            At.isPresenting() || Ut && Ut(t)
        })), "undefined" != typeof window && jt.setContext(window), this.setAnimationLoop = function(t) {
            Ut = t, At.setAnimationLoop(t), jt.start()
        }, this.render = function(t, e) {
            var n, r;
            if (void 0 !== arguments[2] && (console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."), n = arguments[2]), void 0 !== arguments[3] && (console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."), r = arguments[3]), e && e.isCamera) {
                if (!et) {
                    ut.geometry = null, ut.program = null, ut.wireframe = !1, st = -1, ct = null, !0 === t.autoUpdate && t.updateMatrixWorld(), null === e.parent && e.updateMatrixWorld(), At.enabled && (e = At.getCamera(e)), (T = Y.get(t, e)).init(), t.onBeforeRender(tt, t, e, n || ot), St.multiplyMatrices(e.projectionMatrix, e.matrixWorldInverse), _t.setFromMatrix(St), Et = this.localClippingEnabled, xt = wt.init(this.clippingPlanes, Et, e), (S = q.get(t, e)).init(), kt(t, e, 0, tt.sortObjects), !0 === tt.sortObjects && S.sort(), xt && wt.beginShadows();
                    var i = T.state.shadowsArray;
                    Rt.render(i, t, e), T.setupLights(e), xt && wt.endShadows(), this.info.autoReset && this.info.reset(), void 0 !== n && this.setRenderTarget(n), At.enabled && Lt.isAvailable() && Lt.attachCamera(e), K.render(S, t, e, r);
                    var o = S.opaque,
                        a = S.transparent;
                    if (t.overrideMaterial) {
                        var s = t.overrideMaterial;
                        o.length && Bt(o, t, e, s), a.length && Bt(a, t, e, s)
                    } else o.length && Bt(o, t, e), a.length && Bt(a, t, e);
                    t.onAfterRender(tt, t, e), null !== ot && (z.updateRenderTargetMipmap(ot), z.updateMultisampleRenderTarget(ot)), C.buffers.depth.setTest(!0), C.buffers.depth.setMask(!0), C.buffers.color.setMask(!0), C.setPolygonOffset(!1), At.enabled && (Lt.isAvailable() && Lt.detachCamera(e), At.submitFrame()), S = null, T = null
                }
            } else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")
        }, this.setFramebuffer = function(t) {
            nt !== t && null === ot && M.bindFramebuffer(M.FRAMEBUFFER, t), nt = t
        }, this.getActiveCubeFace = function() {
            return rt
        }, this.getActiveMipmapLevel = function() {
            return it
        }, this.getRenderTarget = function() {
            return ot
        }, this.setRenderTarget = function(t, e, n) {
            ot = t, rt = e, it = n, t && void 0 === F.get(t).__webglFramebuffer && z.setupRenderTarget(t);
            var r = nt,
                i = !1;
            if (t) {
                var o = F.get(t).__webglFramebuffer;
                t.isWebGLRenderTargetCube ? (r = o[e || 0], i = !0) : r = t.isWebGLMultisampleRenderTarget ? F.get(t).__webglMultisampledFramebuffer : o, ht.copy(t.viewport), ft.copy(t.scissor), pt = t.scissorTest
            } else ht.copy(yt).multiplyScalar(vt).floor(), ft.copy(gt).multiplyScalar(vt).floor(), pt = bt;
            if (at !== r && (M.bindFramebuffer(M.FRAMEBUFFER, r), at = r), C.viewport(ht), C.scissor(ft), C.setScissorTest(pt), i) {
                var a = F.get(t.texture);
                M.framebufferTexture2D(M.FRAMEBUFFER, M.COLOR_ATTACHMENT0, M.TEXTURE_CUBE_MAP_POSITIVE_X + (e || 0), a.__webglTexture, n || 0)
            }
        }, this.readRenderTargetPixels = function(t, e, n, r, i, o, a) {
            if (t && t.isWebGLRenderTarget) {
                var u = F.get(t).__webglFramebuffer;
                if (t.isWebGLRenderTargetCube && void 0 !== a && (u = u[a]), u) {
                    var c = !1;
                    u !== at && (M.bindFramebuffer(M.FRAMEBUFFER, u), c = !0);
                    try {
                        var l = t.texture,
                            h = l.format,
                            f = l.type;
                        if (h !== s.yb && $.convert(h) !== M.getParameter(M.IMPLEMENTATION_COLOR_READ_FORMAT)) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
                        if (!(f === s.tc || $.convert(f) === M.getParameter(M.IMPLEMENTATION_COLOR_READ_TYPE) || f === s.E && (I.isWebGL2 || L.get("OES_texture_float") || L.get("WEBGL_color_buffer_float")) || f === s.J && (I.isWebGL2 ? L.get("EXT_color_buffer_float") : L.get("EXT_color_buffer_half_float")))) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");
                        M.checkFramebufferStatus(M.FRAMEBUFFER) === M.FRAMEBUFFER_COMPLETE ? e >= 0 && e <= t.width - r && n >= 0 && n <= t.height - i && M.readPixels(e, n, r, i, $.convert(h), $.convert(f), o) : console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")
                    } finally {
                        c && M.bindFramebuffer(M.FRAMEBUFFER, at)
                    }
                }
            } else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")
        }, this.copyFramebufferToTexture = function(t, e, n) {
            void 0 === n && (n = 0);
            var r = Math.pow(2, -n),
                i = Math.floor(e.image.width * r),
                o = Math.floor(e.image.height * r),
                a = $.convert(e.format);
            z.setTexture2D(e, 0), M.copyTexImage2D(M.TEXTURE_2D, n, a, t.x, t.y, i, o, 0), C.unbindTexture()
        }, this.copyTextureToTexture = function(t, e, n, r) {
            var i = e.image.width,
                o = e.image.height,
                a = $.convert(n.format),
                s = $.convert(n.type);
            z.setTexture2D(n, 0), e.isDataTexture ? M.texSubImage2D(M.TEXTURE_2D, r || 0, t.x, t.y, i, o, a, s, e.image.data) : M.texSubImage2D(M.TEXTURE_2D, r || 0, t.x, t.y, a, s, e.image), C.unbindTexture()
        }, this.initTexture = function(t) {
            z.setTexture2D(t, 0), C.unbindTexture()
        }, "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", {
            detail: this
        }))
    }
    Object.assign(Ne.prototype, Oe.a.prototype), Object.assign(Ue.prototype, Oe.a.prototype);
    var ke = n(142),
        Fe = n(17);

    function Be(t, e, n, r) {
        Fe.a.call(this), this.type = "CubeCamera";
        var i = new Le.a(90, 1, t, e);
        i.up.set(0, -1, 0), i.lookAt(new m.a(1, 0, 0)), this.add(i);
        var o = new Le.a(90, 1, t, e);
        o.up.set(0, -1, 0), o.lookAt(new m.a(-1, 0, 0)), this.add(o);
        var a = new Le.a(90, 1, t, e);
        a.up.set(0, 0, 1), a.lookAt(new m.a(0, 1, 0)), this.add(a);
        var u = new Le.a(90, 1, t, e);
        u.up.set(0, 0, -1), u.lookAt(new m.a(0, -1, 0)), this.add(u);
        var c = new Le.a(90, 1, t, e);
        c.up.set(0, -1, 0), c.lookAt(new m.a(0, 0, 1)), this.add(c);
        var l = new Le.a(90, 1, t, e);
        l.up.set(0, -1, 0), l.lookAt(new m.a(0, 0, -1)), this.add(l), r = r || {
            format: s.Ub,
            magFilter: s.P,
            minFilter: s.P
        }, this.renderTarget = new Ge(n, n, r), this.renderTarget.texture.name = "CubeCamera", this.update = function(t, e) {
            null === this.parent && this.updateMatrixWorld();
            var n = t.getRenderTarget(),
                r = this.renderTarget,
                s = r.texture.generateMipmaps;
            r.texture.generateMipmaps = !1, t.setRenderTarget(r, 0), t.render(e, i), t.setRenderTarget(r, 1), t.render(e, o), t.setRenderTarget(r, 2), t.render(e, a), t.setRenderTarget(r, 3), t.render(e, u), t.setRenderTarget(r, 4), t.render(e, c), r.texture.generateMipmaps = s, t.setRenderTarget(r, 5), t.render(e, l), t.setRenderTarget(n)
        }, this.clear = function(t, e, n, r) {
            for (var i = t.getRenderTarget(), o = this.renderTarget, a = 0; a < 6; a++) t.setRenderTarget(o, a), t.clear(e, n, r);
            t.setRenderTarget(i)
        }
    }

    function Ge(t, e, n) {
        me.a.call(this, t, e, n)
    }
    Be.prototype = Object.create(Fe.a.prototype), Be.prototype.constructor = Be, Ge.prototype = Object.create(me.a.prototype), Ge.prototype.constructor = Ge, Ge.prototype.isWebGLRenderTargetCube = !0, Ge.prototype.fromEquirectangularTexture = function(t, e) {
        this.texture.type = e.type, this.texture.format = e.format, this.texture.encoding = e.encoding;
        var n = new ke.a,
            r = {
                uniforms: {
                    tEquirect: {
                        value: null
                    }
                },
                vertexShader: ["varying vec3 vWorldDirection;", "vec3 transformDirection( in vec3 dir, in mat4 matrix ) {", "\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );", "}", "void main() {", "\tvWorldDirection = transformDirection( position, modelMatrix );", "\t#include <begin_vertex>", "\t#include <project_vertex>", "}"].join("\n"),
                fragmentShader: ["uniform sampler2D tEquirect;", "varying vec3 vWorldDirection;", "#define RECIPROCAL_PI 0.31830988618", "#define RECIPROCAL_PI2 0.15915494", "void main() {", "\tvec3 direction = normalize( vWorldDirection );", "\tvec2 sampleUV;", "\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;", "\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;", "\tgl_FragColor = texture2D( tEquirect, sampleUV );", "}"].join("\n")
            },
            i = new T.a({
                type: "CubemapFromEquirect",
                uniforms: Object(p.b)(r.uniforms),
                vertexShader: r.vertexShader,
                fragmentShader: r.fragmentShader,
                side: s.h,
                blending: s.kb
            });
        i.uniforms.tEquirect.value = e;
        var o = new M.a(new E.a(5, 5, 5), i);
        n.add(o);
        var a = new Be(1, 10, 1);
        return a.renderTarget = this, a.renderTarget.texture.name = "CubeCameraTexture", a.update(t, n), o.geometry.dispose(), o.material.dispose(), this
    };
    var ze, He = n(247),
        Ve = n(114),
        We = n(98),
        Xe = n(133),
        qe = n(134),
        Ye = {
            copyCubeMap: {
                uniforms: {
                    tDiffuse: {
                        type: "t",
                        value: null
                    },
                    alpha: {
                        type: "f",
                        value: 1
                    }
                },
                vertexShader: qe + n(463),
                fragmentShader: Xe + n(464)
            }
        },
        Ke = {
            basicTextured: {
                uniforms: {
                    tDiffuse: {
                        type: "t",
                        value: null
                    },
                    alpha: {
                        type: "f",
                        value: 1
                    }
                },
                vertexShader: qe + n(268),
                fragmentShader: Xe + n(465)
            },
            screenSpaceColored: {
                uniforms: {
                    color: {
                        type: "v3",
                        value: new m.a(0, 0, 0)
                    },
                    opacity: {
                        type: "f",
                        value: 1
                    }
                },
                vertexShader: qe + n(466),
                fragmentShader: Xe + n(467)
            }
        };
    ! function(t) {
        t[t.Texture2D = 0] = "Texture2D", t[t.TextureCube = 1] = "TextureCube"
    }(ze || (ze = {}));
    var Ze, Qe = ze,
        Je = n(144),
        $e = n(127),
        tn = n(206),
        en = function() {
            function t(t, e, n, r, i, o) {
                var a, u, c, l, h, f, p = this;
                this.textures = [], this.cachedSize = new d.a, this.updateTextureMemory = function() {
                    return function() {
                        var t = 0;
                        for (var e in p.textures) {
                            var n = p.textures[e];
                            n.width && n.height && (t += n.width * n.height * 4)
                        }
                        t
                    }
                }, this.renderToCubeMap = (f = !1, function(t, e, n, r, i, o, d, m, v, y, g, b, _, w, x, E) {
                    f || ((u = new He.a(-.5, .5, .5, -.5, -200, 200)).position.z = 150, (a = new ke.a).add(u), c = new Ve.a({
                        uniforms: {
                            tDiffuse: {
                                type: "t",
                                value: null
                            },
                            alpha: {
                                type: "f",
                                value: 1
                            }
                        },
                        vertexShader: Ke.basicTextured.vertexShader,
                        fragmentShader: Ke.basicTextured.fragmentShader,
                        depthWrite: !1,
                        depthTest: !1,
                        side: s.w
                    }), l = new S.a(1, 1), (h = new M.a(l, c)).position.z = 0, a.add(h), f = !0);
                    var T = l.getAttribute("uv");
                    T.setUsage(s.z), T.needsUpdate = !0;
                    var O = T.array,
                        P = i / n,
                        A = o / r,
                        L = d / n,
                        R = m / r;
                    O[0] = P, O[1] = A + R, O[2] = P + L, O[3] = A + R, O[4] = P, O[5] = A, O[6] = P + L, O[7] = A;
                    var D = l.getAttribute("position");
                    D.setUsage(s.z), D.needsUpdate = !0;
                    var I = D.array,
                        C = v / e.width - .5,
                        N = y / e.height - .5,
                        U = g / e.width,
                        j = b / e.height;
                    I[0] = C, I[1] = N + j, I[3] = C + U, I[4] = N + j, I[6] = C, I[7] = N, I[9] = C + U, I[10] = N, c.uniforms.tDiffuse.value = t, c.blending = w || s.kb, c.transparent = !!x, null == E && (E = 1), c.uniforms.alpha.value = E, c.needsUpdate = !0, e.viewport.set(0, 0, e.width, e.height);
                    var k = p.threeRenderer.autoClear;
                    p.threeRenderer.autoClear = !1, p.threeRenderer.setRenderTarget(e, _), p.threeRenderer.render(a, u), p.threeRenderer.setRenderTarget(null), p.threeRenderer.autoClear = k
                }), this.copyCubeMap = function() {
                    var t, e, n, r, i, o = !1,
                        a = new We.a,
                        u = p;
                    return function(c, l, h, f, p, d, m, v, y) {
                        if (!o) {
                            (e = new He.a(-1, 1, 1, -1, 0, 200)).position.set(0, 0, 0), (t = new ke.a).add(e), n = new Ve.a({
                                uniforms: {
                                    tDiffuse: {
                                        type: "t",
                                        value: null
                                    },
                                    alpha: {
                                        type: "f",
                                        value: 1
                                    }
                                },
                                vertexShader: Ye.copyCubeMap.vertexShader,
                                fragmentShader: Ye.copyCubeMap.fragmentShader,
                                depthWrite: !1,
                                depthTest: !1,
                                side: s.w
                            }), r = new E.b(2, 2, 2), i = new M.a(r, n), t.add(i), o = !0
                        }
                        for (var g = 0; g < 6; g++) {
                            nn(g, a), i.rotation.copy(a), i.matrixWorldNeedsUpdate = !0, i.updateMatrixWorld(!0), n.uniforms.tDiffuse.value = c, n.blending = m || s.kb, n.transparent = !!v, null == y && (y = 1), n.uniforms.alpha.value = y, n.needsUpdate = !0, l.viewport.set(0, 0, p, d), u.threeRenderer.setRenderTarget(l, g), u.threeRenderer.render(t, e)
                        }
                    }
                }(), this.threeRenderer = this.createRenderer(t, e, n, r, i, o)
            }
            return Object.defineProperty(t.prototype, "renderer", {
                get: function() {
                    return this.threeRenderer
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "maxCubemapSize", {
                get: function() {
                    return this._maxCubemapSize
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "maxTextureSize", {
                get: function() {
                    return this._maxTextureSize
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "gpuInfo", {
                get: function() {
                    return this._gpuInfo
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.getSize = function() {
                return this.threeRenderer.getSize(this.cachedSize)
            }, t.prototype.getPixelRatio = function() {
                return this.threeRenderer.getPixelRatio()
            }, t.prototype.setSize = function(t, e, n) {
                void 0 === n && (n = 1), this.threeRenderer.setPixelRatio(n), this.threeRenderer.setSize(t, e, !1)
            }, t.prototype.dispose = function() {
                this.threeRenderer.dispose()
            }, t.prototype.createRenderer = function(t, e, n, r, i, o) {
                var a = null;
                try {
                    (a = new je({
                        canvas: t.element,
                        antialias: n,
                        alpha: !0
                    })).autoClear = e, a.setPixelRatio(i), a.setSize(o.width, o.height, !1);
                    var s = a.getContext();
                    this._maxCubemapSize = s.getParameter(s.MAX_CUBE_MAP_TEXTURE_SIZE), this._maxTextureSize = s.getParameter(s.MAX_TEXTURE_SIZE), this._gpuInfo = Object(tn.a)(s)
                } catch (t) {
                    throw new $e.b("Unable to create a WebGL rendering context")
                }
                return r && this.overrideTextures(a), a
            }, t.prototype.overrideTextures = function(t) {
                var e = this,
                    n = t.getContext(),
                    r = 0,
                    i = n.createTexture;
                n.createTexture = function() {
                    var t = i.call(n);
                    return t.id = r++, e.textures[t.id] = t, t
                };
                var o = n.texImage2D;
                n.texImage2D = function(t, r, i, a, s, u, c, l, h) {
                    var f = null,
                        p = e.getTextureTypeFromTarget(n, t);
                    f = p === Qe.TextureCube ? n.getParameter(n.TEXTURE_BINDING_CUBE_MAP) : n.getParameter(n.TEXTURE_BINDING_2D), void 0 !== c ? o.call(n, t, r, i, a, s, u, c, l, h) : (c = a, l = s, a = (h = u).naturalWidth, s = h.naturalHeight, o.call(n, t, r, i, c, l, h));
                    var d = e.textures[f.id];
                    d.width = p === Qe.TextureCube ? 6 * a : a, d.height = s
                };
                var a = n.deleteTexture;
                n.deleteTexture = function(t) {
                    delete e.textures[t.id], a.call(n, t)
                }
            }, t.prototype.getTextureTypeFromTarget = function(t, e) {
                switch (e) {
                    case t.TEXTURE_CUBE_MAP_POSITIVE_X:
                    case t.TEXTURE_CUBE_MAP_NEGATIVE_X:
                    case t.TEXTURE_CUBE_MAP_POSITIVE_Y:
                    case t.TEXTURE_CUBE_MAP_NEGATIVE_Y:
                    case t.TEXTURE_CUBE_MAP_POSITIVE_Z:
                    case t.TEXTURE_CUBE_MAP_NEGATIVE_Z:
                        return Qe.TextureCube;
                    case t.TEXTURE_2D:
                        return Qe.Texture2D;
                    default:
                        return null
                }
            }, t.prototype.initSizedTexture2D = function(t, e) {
                var n = this.threeRenderer.getContext(),
                    r = this.threeRenderer.state;
                (e = e || new H.a).addEventListener("dispose", (function() {
                    return n.deleteTexture(a.__webglTexture)
                }));
                var i = rn(e.format, this.threeRenderer),
                    o = rn(e.type, this.threeRenderer),
                    a = this.threeRenderer.properties.get(e),
                    s = n.createTexture();
                r.bindTexture(n.TEXTURE_2D, s), n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL, e.flipY), n.texImage2D(n.TEXTURE_2D, 0, i, t, t, 0, i, o, null);
                var u = rn(e.wrapS, this.threeRenderer),
                    c = rn(e.wrapT, this.threeRenderer);
                return n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_S, u), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_T, c), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MAG_FILTER, rn(e.magFilter, this.threeRenderer)), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MIN_FILTER, rn(e.minFilter, this.threeRenderer)), e.generateMipmaps && n.generateMipmap(n.TEXTURE_2D), r.bindTexture(n.TEXTURE_2D, null), a.__webglTexture = s, e
            }, t.prototype.initSizedCubeMap = function(t, e) {
                var n = this.threeRenderer.getContext(),
                    r = this.threeRenderer.state,
                    i = new z.a([null, null, null, null, null, null]);
                i.flipY = !1, i.generateMipmaps = e;
                var o = rn(i.format, this.threeRenderer),
                    a = rn(i.type, this.threeRenderer),
                    u = this.threeRenderer.properties.get(i),
                    c = n.createTexture();
                r.bindTexture(n.TEXTURE_CUBE_MAP, c), n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL, i.flipY);
                for (var l = 0; l < 6; l++) n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X + l, 0, o, t, t, 0, o, a, null);
                return e ? (i.magFilter = s.P, i.minFilter = s.Q, n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_MAG_FILTER, n.LINEAR), n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_MIN_FILTER, n.LINEAR_MIPMAP_LINEAR), n.generateMipmap(n.TEXTURE_CUBE_MAP)) : (i.magFilter = s.P, i.minFilter = s.P, n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_MAG_FILTER, n.LINEAR), n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_MIN_FILTER, n.LINEAR)), r.bindTexture(n.TEXTURE_CUBE_MAP, null), u.__image__webglTextureCube = c, i
            }, t.prototype.initRenderTargetCube = function(t, e) {
                var n = this.threeRenderer,
                    r = new Ge(t, t, {
                        stencilBuffer: !1
                    }),
                    i = new z.a([]);
                r.texture = i, i.image = [null, null, null, null, null, null], i.flipY = !0, e ? (i.generateMipmaps = !0, i.magFilter = s.P, i.minFilter = s.Q) : (i.generateMipmaps = !1, i.magFilter = s.P, i.minFilter = s.P), i.format = s.yb, n.setRenderTarget(r), n.setRenderTarget(null);
                var o = n.properties.get(i);
                return o.__image__webglTextureCube = o.__webglTexture, r
            }, t.prototype.deallocateCubeTexture = function(t) {
                var e = this.threeRenderer.getContext(),
                    n = this.threeRenderer.properties.get(t);
                e.deleteTexture(n.__image__webglTextureCube)
            }, t.prototype.uploadTexture2D = function(t, e, n, r) {
                var i = this.threeRenderer.getContext(),
                    o = this.threeRenderer.state,
                    a = i.getParameter(i.TEXTURE_BINDING_2D),
                    s = this.threeRenderer.properties.get(e);
                o.bindTexture(i.TEXTURE_2D, s.__webglTexture), i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL, e.flipY), i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL, e.premultiplyAlpha), i.pixelStorei(i.UNPACK_ALIGNMENT, e.unpackAlignment), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_S, rn(e.wrapS, this.threeRenderer)), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_T, rn(e.wrapT, this.threeRenderer)), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MAG_FILTER, rn(e.magFilter, this.threeRenderer)), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MIN_FILTER, rn(e.minFilter, this.threeRenderer));
                var u = rn(e.format, this.threeRenderer),
                    c = rn(e.type, this.threeRenderer);
                i.texSubImage2D(i.TEXTURE_2D, 0, n, r, u, c, t), e.generateMipmaps && i.generateMipmap(i.TEXTURE_2D), o.bindTexture(i.TEXTURE_2D, a)
            }, t.prototype.uploadTexture3D = function(t, e, n, r, i, o, a) {
                var s = this.threeRenderer.getContext(),
                    u = this.threeRenderer.state,
                    c = this.threeRenderer.properties.get(e);
                u.bindTexture(s.TEXTURE_CUBE_MAP, c.__image__webglTextureCube), s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL, e.flipY), s.texSubImage2D(i, 0, n, r, s.RGBA, s.UNSIGNED_BYTE, t), e.generateMipmaps && s.generateMipmap(s.TEXTURE_CUBE_MAP), u.bindTexture(s.TEXTURE_CUBE_MAP, null)
            }, t.prototype.rebuildMipMaps2D = function(t) {
                var e = this.threeRenderer.getContext(),
                    n = this.threeRenderer.state;
                e.generateMipmap(e.TEXTURE_2D), n.bindTexture(e.TEXTURE_2D, null)
            }, t.prototype.rebuildMipMaps3D = function(t) {
                var e = this.threeRenderer.getContext(),
                    n = this.threeRenderer.state,
                    r = this.threeRenderer.properties.get(t);
                n.bindTexture(e.TEXTURE_CUBE_MAP, r.__image__webglTextureCube), e.generateMipmap(e.TEXTURE_CUBE_MAP), n.bindTexture(e.TEXTURE_CUBE_MAP, null)
            }, t
        }(),
        nn = function(t, e) {
            switch (t) {
                case Je.a.GL_TEXTURE_CUBE_MAP_POSITIVE_X:
                    e.set(0, -Math.PI / 2, 0);
                    break;
                case Je.a.GL_TEXTURE_CUBE_MAP_NEGATIVE_X:
                    e.set(0, Math.PI / 2, 0);
                    break;
                case Je.a.GL_TEXTURE_CUBE_MAP_POSITIVE_Y:
                    e.set(Math.PI / 2, Math.PI, 0);
                    break;
                case Je.a.GL_TEXTURE_CUBE_MAP_NEGATIVE_Y:
                    e.set(-Math.PI / 2, Math.PI, 0);
                    break;
                case Je.a.GL_TEXTURE_CUBE_MAP_POSITIVE_Z:
                    e.set(0, -Math.PI, 0);
                    break;
                case Je.a.GL_TEXTURE_CUBE_MAP_NEGATIVE_Z:
                    e.set(0, 0, 0)
            }
        },
        rn = function(t, e) {
            var n, r = e.extensions,
                i = e.getContext();
            switch (t) {
                case s.dc:
                    return i.REPEAT;
                case s.l:
                    return i.CLAMP_TO_EDGE;
                case s.ab:
                    return i.MIRRORED_REPEAT;
                case s.eb:
                    return i.NEAREST;
                case s.gb:
                    return i.NEAREST_MIPMAP_NEAREST;
                case s.fb:
                    return i.NEAREST_MIPMAP_LINEAR;
                case s.P:
                    return i.LINEAR;
                case s.R:
                    return i.LINEAR_MIPMAP_NEAREST;
                case s.Q:
                    return i.LINEAR_MIPMAP_LINEAR;
                case s.tc:
                    return i.UNSIGNED_BYTE;
                case s.wc:
                    return i.UNSIGNED_SHORT_4_4_4_4;
                case s.xc:
                    return i.UNSIGNED_SHORT_5_5_5_1;
                case s.yc:
                    return i.UNSIGNED_SHORT_5_6_5;
                case s.j:
                    return i.BYTE;
                case s.fc:
                    return i.SHORT;
                case s.zc:
                    return i.UNSIGNED_SHORT;
                case s.K:
                    return i.INT;
                case s.vc:
                    return i.UNSIGNED_INT;
                case s.E:
                    return i.FLOAT
            }
            if (null !== (n = r.get("OES_texture_half_float")) && t === s.J) return n.HALF_FLOAT_OES;
            switch (t) {
                case s.e:
                    return i.ALPHA;
                case s.Ub:
                    return i.RGB;
                case s.yb:
                    return i.RGBA;
                case s.X:
                    return i.LUMINANCE;
                case s.W:
                    return i.LUMINANCE_ALPHA;
                case s.b:
                    return i.FUNC_ADD;
                case s.lc:
                    return i.FUNC_SUBTRACT;
                case s.ec:
                    return i.FUNC_REVERSE_SUBTRACT;
                case s.Cc:
                    return i.ZERO;
                case s.qb:
                    return i.ONE;
                case s.jc:
                    return i.SRC_COLOR;
                case s.ub:
                    return i.ONE_MINUS_SRC_COLOR;
                case s.hc:
                    return i.SRC_ALPHA;
                case s.tb:
                    return i.ONE_MINUS_SRC_ALPHA;
                case s.x:
                    return i.DST_ALPHA;
                case s.rb:
                    return i.ONE_MINUS_DST_ALPHA;
                case s.y:
                    return i.DST_COLOR;
                case s.sb:
                    return i.ONE_MINUS_DST_COLOR;
                case s.ic:
                    return i.SRC_ALPHA_SATURATE
            }
            if (null !== (n = r.get("WEBGL_compressed_texture_s3tc"))) {
                if (t === s.ac) return n.COMPRESSED_RGB_S3TC_DXT1_EXT;
                if (t === s.Pb) return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                if (t === s.Qb) return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                if (t === s.Rb) return n.COMPRESSED_RGBA_S3TC_DXT5_EXT
            }
            if (null !== (n = r.get("WEBGL_compressed_texture_pvrtc"))) {
                if (t === s.Zb) return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                if (t === s.Yb) return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                if (t === s.Ob) return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                if (t === s.Nb) return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
            }
            if (null !== (n = r.get("WEBGL_compressed_texture_etc1")) && t === s.Xb) return n.COMPRESSED_RGB_ETC1_WEBGL;
            if (null !== (n = r.get("EXT_blend_minmax"))) {
                if (t === s.Z) return n.MIN_EXT;
                if (t === s.Y) return n.MAX_EXT
            }
            return 0
        },
        on = n(118),
        an = n(61),
        sn = n(161),
        un = n(43),
        cn = n(95),
        ln = (Ze = function(t, e) {
            return (Ze = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            Ze(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        hn = function(t) {
            function e(e) {
                var n = t.call(this, new S.a(2, 2, 1, 1), new Ve.a({
                    uniforms: p.a.clone(Ke.screenSpaceColored.uniforms),
                    vertexShader: Ke.screenSpaceColored.vertexShader,
                    fragmentShader: Ke.screenSpaceColored.fragmentShader,
                    transparent: !0,
                    depthTest: !1,
                    depthWrite: !1
                })) || this;
                return n._opacity = 1, n.material.uniforms.color.value = new y.a(e), n.renderOrder = cn.a.colorOverlay, n
            }
            return ln(e, t), Object.defineProperty(e.prototype, "opacity", {
                get: function() {
                    return this._opacity
                },
                set: function(t) {
                    this.visible = t > 0, this._opacity = t, this.material.uniforms.opacity.value = t
                },
                enumerable: !0,
                configurable: !0
            }), e
        }(M.a),
        fn = n(178),
        pn = n(3),
        dn = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        mn = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        vn = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        yn = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        gn = new pn.a("webgl-renderer"),
        bn = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "webgl-renderer", e.contextLostError = null, e.blackoutOverlayMesh = new hn(0), e.setContextLostError = function(t) {
                    e.contextLostError = t
                }, e.getPixelRatioFor = function(t, e) {
                    var n = window.devicePixelRatio || 1;
                    return t * e * n <= o.G ? n : 1
                }, e.createRenderer = function(t, n) {
                    var r = e.getPixelRatioFor(n.width, n.height);
                    return gn.debug("Setting initial pixel ratio to " + r), new en(t, !1, e.antialias, i.profiling.enabled, r, n)
                }, e
            }
            return dn(e, t), e.prototype.init = function(t, e) {
                return mn(this, void 0, void 0, (function() {
                    var n, r = this;
                    return vn(this, (function(i) {
                        switch (i.label) {
                            case 0:
                                if (!("WebGLRenderingContext" in window)) throw new $e.c("WebGL not supported");
                                return this.engine = e, this.antialias = void 0 !== t.antialias && t.antialias, [4, Promise.all([e.getModule(o.e), e.market.waitForData(on.a), e.market.waitForData(an.a)])];
                            case 1:
                                return n = yn.apply(void 0, [i.sent(), 3]), this.canvasModule = n[0], this.canvasData = n[1], this.cameraData = n[2], this.cwfRenderer = this.createRenderer(this.canvasModule, this.canvasData), this.scene = new a.b(this.cwfRenderer, this.cameraData, this.canvasData), e.addComponent(this, this.scene), this.bindings.push(e.subscribe(sn.a, (function(t) {
                                    return r.setSize(t.width, t.height)
                                }))), this.scene.addChild(a.a.CameraRig, this.blackoutOverlayMesh), this.canvasModule.element.addEventListener("webglcontextlost", this.setContextLostError), [2]
                        }
                    }))
                }))
            }, e.prototype.dispose = function(e) {
                t.prototype.dispose.call(this, e), this.canvasModule.element.removeEventListener("webglcontextlost", this.setContextLostError)
            }, e.prototype.onUpdate = function(t) {
                if (this.cameraData && (this.blackoutOverlayMesh.opacity = this.cameraData.transition.blackoutProgress.value), this.contextLostError) throw new $e.a("WebGL context lost: " + (this.contextLostError.statusMessage || "no status given"))
            }, Object.defineProperty(e.prototype, "maxCubemapSize", {
                get: function() {
                    return this.cwfRenderer.maxCubemapSize
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "maxTextureSize", {
                get: function() {
                    return this.cwfRenderer.maxTextureSize
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.getScene = function() {
                return this.scene
            }, e.prototype.renderOnce = function() {
                return mn(this, void 0, void 0, (function() {
                    var t = this;
                    return vn(this, (function(e) {
                        return this.scene.startRender(!0), [2, this.engine.after(un.a.Render).then((function() {
                            return t.scene.startRender(!1)
                        }))]
                    }))
                }))
            }, e.prototype.startRender = function(t) {
                void 0 === t && (t = !0), this.scene.startRender(t), this.engine.broadcast(new fn.a(this.cwfRenderer.getPixelRatio()))
            }, e.prototype.setSize = function(t, e) {
                var n = this.getPixelRatioFor(t, e);
                n !== this.cwfRenderer.getPixelRatio() && (gn.debug("Setting pixel ratio to " + n), this.engine.broadcast(new fn.a(n))), this.cwfRenderer.setSize(t, e, n), this.scene.setSize(t, e)
            }, e
        }(o.Nb);
    e.default = bn
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(2),
        o = n(38),
        a = n(318),
        s = n(32),
        u = n(71),
        c = new(n(3).a)("passive-support"),
        l = function() {
            var t = !1;
            try {
                var e = Object.defineProperty({}, "passive", {
                    get: function() {
                        t = !0
                    }
                });
                return window.addEventListener("testPassive", (function() {}), e), window.removeEventListener("testPassive", (function() {}), e), t
            } catch (t) {
                return c.warn("Passive Option for addEventListener is not supported, Safari zoom may not perform as expected: " + t), !1
            }
        }(),
        h = n(27),
        f = n(6);
    ! function(t) {
        t.MOUSE = "mouse", t.TOUCH = "touch", t.PEN = "pen"
    }(r || (r = {}));
    var p, d = function() {
            function t(t, e, n, r) {
                var i = this;
                if (this.config = t, this.canvasData = n, this.handledTouchesAsPointer = 0, this.activeButtons = s.b.NONE, this.onEventCallback = r, window.PointerEvent || (e.addEventListener("mousedown", (function(t) {
                        return i.onMouseDown(t)
                    })), e.addEventListener("mouseup", (function(t) {
                        return i.onMouseUp(t)
                    })), e.addEventListener("mousemove", (function(t) {
                        return i.onMouseMove(t)
                    })), e.addEventListener("mouseenter", (function(t) {
                        return i.onMouseEnter(t)
                    }))), e.addEventListener("contextmenu", (function(t) {
                        return t.preventDefault()
                    })), e.addEventListener("touchstart", (function(t) {
                        return i.onTouchStart(t)
                    })), e.addEventListener("touchend", (function(t) {
                        return i.onTouchEnd(t)
                    })), e.addEventListener("touchmove", (function(t) {
                        return i.onTouchMove(t)
                    })), e.addEventListener("touchcancel", (function(t) {
                        return i.onTouchEnd(t)
                    })), e.addEventListener("pointerdown", (function(t) {
                        return i.onPointerDown(t)
                    })), e.addEventListener("pointerup", (function(t) {
                        return i.onPointerUp(t)
                    })), e.addEventListener("pointermove", (function(t) {
                        return i.onPointerMove(t)
                    })), e.addEventListener("pointercancel", (function(t) {
                        return i.onPointerUp(t)
                    })), e.addEventListener("pointerenter", (function(t) {
                        return i.onMouseEnter(t)
                    })), Object(f.l)() || Object(f.r)()) {
                    var o = !!l && {
                        passive: !1
                    };
                    document.addEventListener("touchmove", this.preventMultiTouchGesture, o)
                }
            }
            return t.prototype.preventMultiTouchGesture = function(t) {
                var e = t.touches && t.touches.length > 1,
                    n = "scale" in t && 1 !== t.scale;
                (e || n) && t.preventDefault()
            }, t.prototype.onMouseDown = function(t) {
                t.currentTarget.focus(), this.tryPreventDefault(t), this.activeButtons |= 1 << t.button, this.onEventCallback(new u.a(this.getPointerId(t), this.getPointerPosition(t), t.button, !0))
            }, t.prototype.onMouseUp = function(t) {
                this.tryPreventDefault(t), this.activeButtons &= ~(1 << t.button), this.onEventCallback(new u.a(this.getPointerId(t), this.getPointerPosition(t), t.button, !1))
            }, t.prototype.onMouseMove = function(t) {
                this.tryPreventDefault(t), this.onEventCallback(new u.b(this.getPointerId(t), this.getPointerPosition(t), this.activeButtons))
            }, t.prototype.onMouseEnter = function(t) {
                for (var e = Object(h.m)(t.buttons, s.a.MIDDLE, s.a.SECONDARY), n = (this.activeButtons ^ e) & ~e, r = s.a.PRIMARY; r < s.a.COUNT; ++r) {
                    var i = Object(s.c)(r);
                    i && (n & i) > 0 && this.onEventCallback(new u.a(this.getPointerId(t), this.getPointerPosition(t), r, !1))
                }
                this.activeButtons = e
            }, t.prototype.onTouchStart = function(t) {
                if (t.currentTarget.focus(), t.preventDefault(), this.handledTouchesAsPointer) --this.handledTouchesAsPointer;
                else
                    for (var e = 0; e < t.changedTouches.length; e++) {
                        var n = t.changedTouches.item(e),
                            r = this.getTouchPosition(n);
                        this.onEventCallback(new u.a(n.identifier, r, s.a.PRIMARY, !0))
                    }
            }, t.prototype.onTouchEnd = function(t) {
                if (t.preventDefault(), this.handledTouchesAsPointer) --this.handledTouchesAsPointer;
                else
                    for (var e = 0; e < t.changedTouches.length; e++) {
                        var n = t.changedTouches.item(e),
                            r = this.getTouchPosition(n);
                        this.onEventCallback(new u.a(n.identifier, r, s.a.PRIMARY, !1))
                    }
            }, t.prototype.onTouchMove = function(t) {
                if (t.preventDefault(), this.handledTouchesAsPointer) --this.handledTouchesAsPointer;
                else
                    for (var e = 0; e < t.changedTouches.length; e++) {
                        var n = t.changedTouches.item(e),
                            r = this.getTouchPosition(n);
                        this.onEventCallback(new u.b(n.identifier, r, s.b.PRIMARY))
                    }
            }, t.prototype.onPointerDown = function(t) {
                switch (this.tryPreventDefault(t), t.pointerType) {
                    case r.MOUSE:
                        this.onMouseDown(t);
                        break;
                    case r.TOUCH:
                        ++this.handledTouchesAsPointer, this.onEventCallback(new u.a(t.pointerId, this.getPointerPosition(t), s.a.PRIMARY, !0))
                }
            }, t.prototype.onPointerUp = function(t) {
                switch (this.tryPreventDefault(t), t.pointerType) {
                    case r.MOUSE:
                        this.onMouseUp(t);
                        break;
                    case r.TOUCH:
                        ++this.handledTouchesAsPointer, this.onEventCallback(new u.a(t.pointerId, this.getPointerPosition(t), s.a.PRIMARY, !1))
                }
            }, t.prototype.onPointerMove = function(t) {
                switch (this.tryPreventDefault(t), t.pointerType) {
                    case r.MOUSE:
                        -1 !== t.button ? this.activeButtons < t.buttons ? this.onMouseDown(t) : this.activeButtons > t.buttons && this.onMouseUp(t) : this.onMouseMove(t);
                        break;
                    case r.TOUCH:
                        ++this.handledTouchesAsPointer, this.onEventCallback(new u.b(t.pointerId, this.getPointerPosition(t), s.b.PRIMARY))
                }
            }, t.prototype.getPointerId = function(t) {
                return Object(a.a)(t) ? t.pointerId : 0
            }, t.prototype.getPointerPosition = function(t) {
                return this.normalizePosition(t.clientX, t.clientY)
            }, t.prototype.getTouchPosition = function(t) {
                return this.normalizePosition(t.clientX, t.clientY)
            }, t.prototype.normalizePosition = function(t, e) {
                return {
                    x: 2 * (t - this.canvasData.x) / this.canvasData.width - 1,
                    y: -2 * (e - this.canvasData.y) / this.canvasData.height + 1
                }
            }, t.prototype.tryPreventDefault = function(t) {
                this.config.pointerPreventDefault && t.preventDefault()
            }, t
        }(),
        m = n(91),
        v = n(152),
        y = n(153);
    ! function(t) {
        t[t.SEMICOLON = 59] = "SEMICOLON", t[t.PLUSEQUALS = 61] = "PLUSEQUALS", t[t.DASHUNDERSCORE = 173] = "DASHUNDERSCORE"
    }(p || (p = {}));
    var g, b = function() {
            function t(t) {
                this.keysDown = {}, this.onEventCallback = t, this.bindHandlers()
            }
            return t.prototype.bindHandlers = function() {
                var t = this;
                if (window && window.document) {
                    var e = window.document;
                    window.addEventListener("blur", (function() {
                        Object.keys(t.keysDown).forEach((function(e) {
                            return t.keysDown[e] = !1
                        }))
                    })), e.addEventListener("keydown", (function(e) {
                        if (!e.ctrlKey && !e.metaKey) {
                            e.preventDefault();
                            var n = t.translateFirefoxKeys(e.which || e.keyCode);
                            t.keysDown[n] = !0, t.onEventCallback(new y.a(n, v.a.DOWN, e))
                        }
                    })), e.addEventListener("keyup", (function(e) {
                        if (!e.ctrlKey && !e.metaKey) {
                            e.preventDefault();
                            var n = t.translateFirefoxKeys(e.which || e.keyCode);
                            t.keysDown[n] && t.onEventCallback(new y.a(n, v.a.PRESSED, e)), t.keysDown[n] = !1, t.onEventCallback(new y.a(n, v.a.UP, e))
                        }
                    }))
                }
            }, t.prototype.translateFirefoxKeys = function(t) {
                switch (t) {
                    case p.SEMICOLON:
                        return m.a.SEMICOLON;
                    case p.PLUSEQUALS:
                        return m.a.PLUSEQUALS;
                    case p.DASHUNDERSCORE:
                        return m.a.DASHUNDERSCORE
                }
                return t
            }, t
        }(),
        _ = n(5);
    ! function(t) {
        t[t.WAITING = 0] = "WAITING", t[t.WAITINGTOEXCEEDTHRESHOLD = 1] = "WAITINGTOEXCEEDTHRESHOLD", t[t.GESTURING = 2] = "GESTURING"
    }(g || (g = {}));
    var w, x = n(136),
        E = function() {
            function t(t, e) {
                void 0 === t && (t = .01), void 0 === e && (e = 300), this.startPosition = new _.a, this.pointerDelta = new _.a, this.activeButtons = s.b.NONE, this.state = g.WAITING, this.dragLimit = t, this.holdLimit = e
            }
            return t.prototype.start = function(t) {
                if (this.state === g.WAITING && this.startPosition.copy(t.position), 0 == (t.buttons & t.buttons - 1)) this.startTime = Date.now(), this.activeButtons = t.buttons, this.state = g.WAITINGTOEXCEEDTHRESHOLD;
                else if (this.activeButtons) return this.state = g.GESTURING, new x.a(t.position, this.activeButtons)
            }, t.prototype.stop = function() {
                var t;
                return this.state === g.WAITINGTOEXCEEDTHRESHOLD && Date.now() - this.startTime < this.holdLimit && (t = new x.b(this.startPosition.add(this.pointerDelta), Object(s.d)(this.activeButtons)), this.pointerDelta.set(0, 0)), this.state = g.WAITING, t
            }, t.prototype.onMove = function(t) {
                if (this.state === g.WAITINGTOEXCEEDTHRESHOLD && (this.pointerDelta.copy(t.position).sub(this.startPosition), this.pointerDelta.length() > this.dragLimit)) return this.state = g.GESTURING, new x.a(t.position, t.buttons)
            }, t.prototype.compareState = function(t) {
                return t === this.state
            }, t
        }(),
        S = n(100),
        T = function() {
            function t(t) {
                void 0 === t && (t = .01), this.startPosition = new _.a, this.previousPosition = new _.a, this.pointerDelta = new _.a, this.lastPointerMove = Date.now(), this.state = g.WAITING, this.threshold = t
            }
            return t.prototype.start = function(t) {
                return this.state === g.WAITING && (this.startPosition.copy(t.position), this.previousPosition.copy(this.startPosition), this.state = g.WAITINGTOEXCEEDTHRESHOLD), new S.a(t.position, t.buttons)
            }, t.prototype.stop = function() {
                this.state === g.WAITING && this.pointerDelta.set(0, 0), this.state = g.WAITING;
                var t = Date.now() - this.lastPointerMove,
                    e = (new _.a).copy(this.previousPosition).sub(this.startPosition);
                return new S.b(this.previousPosition, this.pointerDelta, s.b.NONE, t, e)
            }, t.prototype.onMove = function(t) {
                var e;
                return this.state === g.WAITINGTOEXCEEDTHRESHOLD && (this.pointerDelta.copy(t.position).sub(this.startPosition), this.pointerDelta.length() > this.threshold && (this.state = g.GESTURING)), this.state === g.GESTURING && (this.pointerDelta.copy(t.position).sub(this.previousPosition), this.pointerDelta.length() > 0 && (e = new S.c(this.previousPosition, this.pointerDelta, t.buttons))), this.previousPosition.copy(t.position), this.lastPointerMove = Date.now(), e
            }, t.prototype.compareState = function(t) {
                return t === this.state
            }, t.prototype.compareStartPoint = function(t) {
                return t.equals(this.startPosition)
            }, t.prototype.compareDelta = function(t) {
                return t.equals(this.pointerDelta)
            }, t
        }(),
        M = n(157),
        O = 2 * Math.SQRT2,
        P = function() {
            function t(t) {
                void 0 === t && (t = .01), this.threshold = t, this.startDistance = 0, this.previousDistance = 0, this.pointerDelta = new _.a, this.lastPointerMove = Date.now(), this.pinchDelta = 0, this.state = g.WAITING
            }
            return t.prototype.start = function(t, e) {
                this.state === g.WAITING && (this.state = g.WAITINGTOEXCEEDTHRESHOLD, this.startDistance = t.position.distanceTo(e.position) / O, this.previousDistance = this.startDistance)
            }, t.prototype.stop = function() {
                this.state = g.WAITING;
                var t = Date.now() - this.lastPointerMove;
                return new M.a(this.pinchDelta, t)
            }, t.prototype.onMove = function(t, e) {
                this.pointerDelta.copy(t.position).sub(e.position);
                var n, r = this.pointerDelta.length() / O;
                if (this.state === g.WAITINGTOEXCEEDTHRESHOLD) {
                    var i = r - this.startDistance;
                    Math.abs(i) > this.threshold && (this.state = g.GESTURING)
                }
                if (this.state === g.GESTURING) {
                    i = r - this.previousDistance;
                    Math.abs(i) > 0 && (this.pinchDelta = i, n = new M.b(i))
                }
                return this.previousDistance = r, this.lastPointerMove = Date.now(), n
            }, t
        }(),
        A = n(14),
        L = n(158),
        R = function() {
            function t(t) {
                void 0 === t && (t = .1), this.startPointerDelta = new _.a, this.previousPointerDelta = new _.a, this.pointerDelta = new _.a, this.lastPointerMove = Date.now(), this.angleWithDirection = 0, this.state = g.WAITING, this.threshold = t
            }
            return t.prototype.start = function(t, e) {
                this.state === g.WAITING && (this.state = g.WAITINGTOEXCEEDTHRESHOLD, this.startPointerDelta.copy(t.position).sub(e.position).normalize(), this.pointerDelta.copy(this.startPointerDelta), this.previousPointerDelta.copy(this.pointerDelta))
            }, t.prototype.stop = function() {
                this.state = g.WAITING;
                var t = Date.now() - this.lastPointerMove;
                return new L.a(this.angleWithDirection, t)
            }, t.prototype.onMove = function(t, e) {
                var n, r;
                (this.pointerDelta.copy(t.position).sub(e.position).normalize(), this.state === g.WAITINGTOEXCEEDTHRESHOLD) && ((r = Math.acos(Object(A.e)(this.pointerDelta.dot(this.startPointerDelta), -1, 1))) > this.threshold && (this.state = g.GESTURING));
                if (this.state === g.GESTURING && (r = Math.acos(Object(A.e)(this.pointerDelta.dot(this.previousPointerDelta), -1, 1))) > 0) {
                    var i = this.previousPointerDelta.x * this.pointerDelta.y - this.previousPointerDelta.y * this.pointerDelta.x;
                    this.angleWithDirection = i >= 0 ? r : -r, n = new L.b(this.angleWithDirection)
                }
                return this.previousPointerDelta.copy(this.pointerDelta), this.lastPointerMove = Date.now(), n
            }, t.prototype.compareState = function(t) {
                return t === this.state
            }, t
        }(),
        D = n(156),
        I = function() {
            function t(t) {
                void 0 === t && (t = .01), this.startEpicenter = new _.a, this.previousEpicenter = new _.a, this.deltaEpicenter = new _.a, this.currentEpicenter = new _.a, this.pointerCount = 0, this.lastPointerMove = Date.now(), this.state = g.WAITING, this.threshold = t
            }
            return t.prototype.start = function(t) {
                this.state === g.WAITING && (Object(h.a)(this.getPointerPositions(t), this.startEpicenter), this.previousEpicenter.copy(this.startEpicenter), this.currentEpicenter.copy(this.previousEpicenter), this.state = g.WAITINGTOEXCEEDTHRESHOLD, this.pointerCount = t.length)
            }, t.prototype.stop = function() {
                this.state = g.WAITING;
                var t = this.pointerCount;
                this.pointerCount = 0;
                var e = Date.now() - this.lastPointerMove;
                return new D.a(t, this.currentEpicenter, this.deltaEpicenter, e)
            }, t.prototype.onMove = function(t) {
                var e;
                (Object(h.a)(this.getPointerPositions(t), this.currentEpicenter), this.state === g.WAITINGTOEXCEEDTHRESHOLD) && (this.currentEpicenter.distanceTo(this.startEpicenter) > this.threshold && (this.state = g.GESTURING));
                return this.state === g.GESTURING && (this.deltaEpicenter.copy(this.currentEpicenter).sub(this.previousEpicenter), e = new D.b(t.length, this.currentEpicenter, this.deltaEpicenter)), this.previousEpicenter.copy(this.currentEpicenter), this.lastPointerMove = Date.now(), e
            }, t.prototype.getPointerPositions = function(t) {
                return t.map((function(t) {
                    return t.position
                }))
            }, t
        }(),
        C = n(199),
        N = n(31),
        U = function() {
            function t(t, e) {
                void 0 === e && (e = 500), this.onEventCallback = t, this.state = g.WAITING, this.startPosition = new _.a, this.pointerDelta = new _.a, this.lpThreshold = e
            }
            return t.prototype.start = function(t) {
                var e = this;
                this.state === g.WAITING && this.startPosition.copy(t.position), 0 == (t.buttons & t.buttons - 1) && (this.state = g.WAITINGTOEXCEEDTHRESHOLD, this.holdTimeout = window.setTimeout((function() {
                    e.onEventCallback(new N.h(t.position, t.buttons, e.lpThreshold))
                }), this.lpThreshold))
            }, t.prototype.stop = function() {
                this.state === g.WAITING && this.pointerDelta.set(0, 0), window.clearTimeout(this.holdTimeout), this.onEventCallback(new N.g), this.state = g.WAITING
            }, t.prototype.onMove = function(t) {
                this.state === g.WAITINGTOEXCEEDTHRESHOLD && (this.pointerDelta.copy(t.position).sub(this.startPosition), this.pointerDelta.length() > .1 && (window.clearTimeout(this.holdTimeout), this.onEventCallback(new N.g)))
            }, t
        }();
    ! function(t) {
        t[t.NONE = 0] = "NONE", t[t.CLICK_DRAG_LONGPRESS = 1] = "CLICK_DRAG_LONGPRESS", t[t.PINCH_ROTATE = 2] = "PINCH_ROTATE", t[t.MULTI_SWIPE_ONLY = 3] = "MULTI_SWIPE_ONLY"
    }(w || (w = {}));
    var j, k = function() {
            function t(t, e, n) {
                this.activeGesture = w.NONE, this.pointers = [], this.couldBeClick = !1, this.onEventCallback = n, this.clicker = new E(t.dragThreshold), this.longPress = new U(n, t.holdThreshold), this.dragger = new T(t.dragThreshold), this.pincher = new P(t.pinchThreshold), this.rotater = new R(t.rotateThreshold), this.multiswiper = new I(t.dragThreshold), t.disableWheel || this.bindWheelHandlers(e.element)
            }
            return Object.defineProperty(t.prototype, "activePointers", {
                get: function() {
                    return this.pointers.length
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onPointerChange = function(t) {
                this.isMoveEvent(t) ? this.onPointerMove(t) : this.onPointerButton(t)
            }, t.prototype.isMoveEvent = function(t) {
                return !t.hasOwnProperty("down")
            }, t.prototype.onPointerMove = function(t) {
                this.movePointer(t.id, t.position, t.buttons)
            }, t.prototype.onPointerButton = function(t) {
                t.down ? this.addPointer(t.id, t.position, t.button) : this.removePointer(t.id, t.button)
            }, t.prototype.bindWheelHandlers = function(t) {
                var e = this;
                t.addEventListener("wheel", (function(t) {
                    t.preventDefault(), e.onEventCallback(new C.a({
                        x: t.clientX,
                        y: t.clientY
                    }, {
                        x: e.normalizeWheelDelta(t.deltaMode, t.deltaX),
                        y: e.normalizeWheelDelta(t.deltaMode, t.deltaY)
                    }))
                }))
            }, t.prototype.normalizeWheelDelta = function(t, e) {
                return t === WheelEvent.DOM_DELTA_LINE ? .7 * e * e * e + 13 * e : e
            }, t.prototype.addPointer = function(t, e, n) {
                var r = Object(s.c)(n);
                if (r) {
                    var i = this.getPointer(t);
                    i && 0 == (i.buttons & r) ? (i.buttons |= r, i.activeButtons++) : this.pointers.push({
                        id: t,
                        position: new _.a(e.x, e.y),
                        buttons: r,
                        activeButtons: 1
                    }), this.toggleGestures()
                }
            }, t.prototype.removePointer = function(t, e) {
                var n = Object(s.c)(e);
                if (n) {
                    var r = this.getPointerIndex(t);
                    if (-1 !== r) {
                        var i = this.pointers[r];
                        0 != (i.buttons & n) && (i.buttons &= ~n, i.activeButtons--), i.activeButtons || this.pointers.splice(r, 1), this.toggleGestures()
                    }
                }
            }, t.prototype.movePointer = function(t, e, n) {
                var r = this.getPointer(t);
                if (r) switch (r.position.copy(e), r.buttons !== n && this.updateOffscreenPointer(r, n), this.activeGesture) {
                    case w.CLICK_DRAG_LONGPRESS:
                        var i = this.clicker.onMove(r);
                        i && this.onEventCallback(i);
                        var o = this.dragger.onMove(r);
                        o && this.onEventCallback(o), this.longPress.onMove(r);
                        break;
                    case w.PINCH_ROTATE:
                        var a = this.pincher.onMove(this.pointers[0], this.pointers[1]),
                            s = this.rotater.onMove(this.pointers[0], this.pointers[1]);
                        a && this.onEventCallback(a), s && this.onEventCallback(s);
                    case w.MULTI_SWIPE_ONLY:
                        var u = this.multiswiper.onMove(this.pointers);
                        u && this.onEventCallback(u)
                }
            }, t.prototype.getPointer = function(t) {
                var e = this.getPointerIndex(t);
                if (-1 !== e) return this.pointers[e]
            }, t.prototype.toggleGestures = function() {
                var t = this.activeGesture;
                if (this.activeGesture = this.pointers.length, t === w.CLICK_DRAG_LONGPRESS && this.activeGesture === w.NONE && this.couldBeClick) {
                    var e = this.clicker.stop();
                    e && this.onEventCallback(e)
                }
                if (this.couldBeClick = t === w.NONE && this.activeGesture === w.CLICK_DRAG_LONGPRESS, this.activeGesture === w.CLICK_DRAG_LONGPRESS) {
                    var n = this.clicker.start(this.pointers[0]);
                    n && this.onEventCallback(n);
                    var r = this.dragger.start(this.pointers[0]);
                    r && this.onEventCallback(r), this.longPress.start(this.pointers[0])
                } else if (t === w.CLICK_DRAG_LONGPRESS) {
                    var i = this.dragger.stop();
                    this.longPress.stop(), this.onEventCallback(i)
                }
                this.activeGesture === w.PINCH_ROTATE ? (this.pincher.start(this.pointers[0], this.pointers[1]), this.rotater.start(this.pointers[0], this.pointers[1]), this.multiswiper.start(this.pointers)) : t === w.PINCH_ROTATE && (this.onEventCallback(this.pincher.stop()), this.onEventCallback(this.rotater.stop()), this.onEventCallback(this.multiswiper.stop())), this.activeGesture === w.MULTI_SWIPE_ONLY ? this.multiswiper.start(this.pointers) : t === w.MULTI_SWIPE_ONLY && this.onEventCallback(this.multiswiper.stop())
            }, t.prototype.getPointerIndex = function(t) {
                for (var e = 0; e < this.pointers.length; e++) {
                    if (this.pointers[e].id === t) return e
                }
                return -1
            }, t.prototype.updateOffscreenPointer = function(t, e) {
                if (t.buttons = e, 0 === e) {
                    var n = this.getPointerIndex(t.id);
                    this.pointers.splice(n, 1), this.toggleGestures()
                }
            }, t
        }(),
        F = n(241),
        B = n(86),
        G = n(118),
        z = (j = function(t, e) {
            return (j = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            j(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        H = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        V = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        W = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        X = function() {
            function t(t, e, n) {
                this._renew = t, this._cancel = e, this.active = n
            }
            return t.prototype.renew = function() {
                this.active() || this._renew()
            }, t.prototype.cancel = function() {
                this.active() && this._cancel()
            }, t
        }(),
        q = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "input-ini", e.fallbackHandlerMap = {}, e.meshHandlerMap = {}, e.priorityHandlerMap = {}, e.unfilteredHandlerMap = {}, e.captureHandlerMap = {}, e.gesturing = !1, e.gestureCapture = new F.a((function(t) {
                    return t.object.id
                })), e.activeIntersections = new F.a((function(t) {
                    return t.object.id
                })), e.eventTypeLookup = new o.a, e.meshTypeLookup = new o.a, e.hoveredMesh = null, e.registerMesh = function(t, n, r) {
                    void 0 === r && (r = "default-group"), e.raycaster.addTarget(t, n, r)
                }, e.unregisterMesh = function(t) {
                    e.raycaster.removeTarget(t)
                }, e.enableMeshGroup = function(t, n) {
                    e.raycaster.enableForGroup(t, n)
                }, e
            }
            return z(e, t), e.prototype.init = function(t, e) {
                return H(this, void 0, void 0, (function() {
                    var n, r, o, a, s = this;
                    return V(this, (function(u) {
                        switch (u.label) {
                            case 0:
                                return n = {
                                    disableWheel: !!t.disableWheel
                                }, [4, e.getModule(i.e)];
                            case 1:
                                return r = u.sent(), [4, e.market.waitForData(G.a)];
                            case 2:
                                return o = u.sent(), a = this, [4, e.getModule(i.eb)];
                            case 3:
                                return a.raycaster = u.sent().getRaycaster(), new d({
                                    pointerPreventDefault: t.pointerPreventDefault
                                }, r.element, o, (function(t) {
                                    return s.onPointerEvent(t)
                                })), new b((function(t) {
                                    return s.onEvent(t)
                                })), this.inputGesture = new k(n, r, (function(t) {
                                    return s.onEvent(t)
                                })), [2]
                        }
                    }))
                }))
            }, e.prototype.registerHandler = function(t, e) {
                var n = this;
                this.insertHandler(t, this.fallbackHandlerMap, e);
                var r = this.eventTypeLookup.getIndexByType(t, !0);
                return new X((function() {
                    return n.registerHandler(t, e)
                }), (function() {
                    return n.unregisterHandler(t, e)
                }), (function() {
                    return -1 !== n.fallbackHandlerMap[r].indexOf(e)
                }))
            }, e.prototype.unregisterHandler = function(t, e) {
                this.removeHandler(t, this.fallbackHandlerMap, e)
            }, e.prototype.registerMeshHandler = function(t, e, n) {
                return this._registerMeshHandler(t, {
                    comparator: e,
                    callback: n
                })
            }, e.prototype._registerMeshHandler = function(t, e) {
                var n = this,
                    r = this.eventTypeLookup.getIndexByType(t, !0);
                this.meshHandlerMap[r] || (this.meshHandlerMap[r] = []);
                var i = this.meshHandlerMap[r];
                return i.push(e), new X((function() {
                    return n._registerMeshHandler(t, e)
                }), (function() {
                    return n.unregisterMeshHandler(t, e)
                }), (function() {
                    return -1 !== i.indexOf(e)
                }))
            }, e.prototype.unregisterMeshHandler = function(t, e) {
                var n = this.eventTypeLookup.getIndexByType(t, !0);
                if (this.meshHandlerMap[n]) {
                    var r = this.meshHandlerMap[n],
                        i = r.indexOf(e);
                    i > -1 && r.splice(i, 1)
                }
            }, e.prototype.registerPriorityHandler = function(t, e, n) {
                var r = this,
                    i = this.eventTypeLookup.getIndexByType(t, !0),
                    a = this.meshTypeLookup.getIndexByType(e, !0);
                this.priorityHandlerMap[i] || (this.priorityHandlerMap[i] = {});
                var s = this.priorityHandlerMap[i];
                if (s[a]) {
                    var u = Object(o.c)(t),
                        c = Object(o.c)(e);
                    throw Error(u + " already has a priority handler registered for mesh type: " + c)
                }
                return s[a] = n, new X((function() {
                    return r.registerPriorityHandler(t, e, n)
                }), (function() {
                    return r.unregisterPriorityHandler(t, e, n)
                }), (function() {
                    return void 0 !== s[a]
                }))
            }, e.prototype.unregisterPriorityHandler = function(t, e, n) {
                var r = this.eventTypeLookup.getIndexByType(t),
                    i = this.priorityHandlerMap[r];
                if (i) {
                    var o = this.meshTypeLookup.getIndexByType(e),
                        a = i[o];
                    a && n === a && delete i[o]
                }
            }, e.prototype.registerUnfilteredHandler = function(t, e) {
                var n = this;
                this.insertHandler(t, this.unfilteredHandlerMap, e);
                var r = this.eventTypeLookup.getIndexByType(t);
                return new X((function() {
                    return n.registerUnfilteredHandler(t, e)
                }), (function() {
                    return n.unregisterUnfilteredHandler(t, e)
                }), (function() {
                    return -1 !== n.unfilteredHandlerMap[r].indexOf(e)
                }))
            }, e.prototype.unregisterUnfilteredHandler = function(t, e) {
                this.removeHandler(t, this.unfilteredHandlerMap, e)
            }, e.prototype.captureNext = function(t, e) {
                return this.insertHandler(t, this.captureHandlerMap, e), e
            }, e.prototype.removeCaptureHandler = function(t, e) {
                this.removeHandler(t, this.captureHandlerMap, e)
            }, e.prototype.onPointerEvent = function(t) {
                var e, n, r, i, o = !t.hasOwnProperty("down"),
                    a = !o && t.down,
                    s = !a && !o;
                if (o || a) {
                    this.raycaster.updatePointerPosition(t.position), this.activeIntersections.clear();
                    try {
                        for (var u = W(this.raycaster.cast()), c = u.next(); !c.done; c = u.next()) {
                            var l = c.value;
                            this.activeIntersections.add(l)
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            c && !c.done && (n = u.return) && n.call(u)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                    if (!this.gesturing) {
                        this.gestureCapture.clear();
                        try {
                            for (var h = W(this.activeIntersections), f = h.next(); !f.done; f = h.next()) {
                                l = f.value;
                                this.gestureCapture.add(l)
                            }
                        } catch (t) {
                            r = {
                                error: t
                            }
                        } finally {
                            try {
                                f && !f.done && (i = h.return) && i.call(h)
                            } finally {
                                if (r) throw r.error
                            }
                        }
                        this.updateHoveredMesh()
                    }
                    a && (this.gesturing = !0), this.onEvent(t)
                }
                this.inputGesture.onPointerChange(t), s && this.onEvent(t), 0 === this.inputGesture.activePointers && (this.activeIntersections.clear(), this.gestureCapture.clear(), this.gesturing = !1)
            }, e.prototype.updateHoveredMesh = function() {
                var t, e, n, r, i = this.activeIntersections.getByIndex(0),
                    a = !1;
                if (this.hoveredMesh && (void 0 === i || i.object !== this.hoveredMesh)) {
                    var s = this.getMeshHandler(B.b, Object(o.b)(this.hoveredMesh), this.priorityHandlerMap);
                    if (s && (a = s(new B.b, this.hoveredMesh, i) || !1), !a) {
                        var u = this.meshHandlerMap[this.eventTypeLookup.getIndexByType(B.b)];
                        if (u) try {
                            for (var c = W(u), l = c.next(); !l.done; l = c.next()) {
                                (v = l.value).comparator.compare(this.hoveredMesh) && v.callback(new B.b, this.hoveredMesh, i)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                l && !l.done && (e = c.return) && e.call(c)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    }
                }
                var h = !1;
                if (i && i.object !== this.hoveredMesh) {
                    var f = this.getMeshHandler(B.a, Object(o.b)(i.object), this.priorityHandlerMap);
                    if (f && (h = f(new B.a, i.object, i) || !1), !h) {
                        var p = this.meshHandlerMap[this.eventTypeLookup.getIndexByType(B.a)];
                        if (p) try {
                            for (var d = W(p), m = d.next(); !m.done; m = d.next()) {
                                var v;
                                (v = m.value).comparator.compare(i.object) && v.callback(new B.a, i.object, i)
                            }
                        } catch (t) {
                            n = {
                                error: t
                            }
                        } finally {
                            try {
                                m && !m.done && (r = d.return) && r.call(d)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                    }
                }
                this.hoveredMesh = i && i.object || null
            }, e.prototype.onEvent = function(t) {
                var e, n, r, i, o, a, s = this.eventTypeLookup.getIndexByInstance(t),
                    u = this.captureHandlerMap[s];
                if (u && u.length > 0) {
                    try {
                        for (var c = W(u), l = c.next(); !l.done; l = c.next()) {
                            (0, l.value)(t)
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            l && !l.done && (n = c.return) && n.call(c)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                    u.length = 0
                } else {
                    var h = this.unfilteredHandlerMap[s];
                    if (h) try {
                        for (var f = W(h), p = f.next(); !p.done; p = f.next()) {
                            (0, p.value)(t)
                        }
                    } catch (t) {
                        r = {
                            error: t
                        }
                    } finally {
                        try {
                            p && !p.done && (i = f.return) && i.call(f)
                        } finally {
                            if (r) throw r.error
                        }
                    }
                    var d = this.iterateMeshCallbacks(t, this.gesturing ? this.gestureCapture : this.activeIntersections),
                        m = this.fallbackHandlerMap[s];
                    if (!d && m) try {
                        for (var v = W(m), y = v.next(); !y.done; y = v.next()) {
                            (0, y.value)(t)
                        }
                    } catch (t) {
                        o = {
                            error: t
                        }
                    } finally {
                        try {
                            y && !y.done && (a = v.return) && a.call(v)
                        } finally {
                            if (o) throw o.error
                        }
                    }
                }
            }, e.prototype.iterateMeshCallbacks = function(t, e) {
                var n, r, i, o, a = !1,
                    s = this.eventTypeLookup.getIndexByInstance(t);
                try {
                    for (var u = W(e), c = u.next(); !c.done; c = u.next()) {
                        var l = c.value;
                        if (a) break;
                        var h = l.object,
                            f = this.activeIntersections.get(h.id);
                        for (var p in this.priorityHandlerMap[s])
                            if (l.object instanceof this.meshTypeLookup.getTypeByIndex(parseInt(p, 10))) {
                                var d = this.priorityHandlerMap[s] && this.priorityHandlerMap[s][p];
                                if (d && (a = !0, d(t, h, f))) return !0
                            }
                        var m = this.meshHandlerMap[s];
                        if (m) try {
                            for (var v = W(m), y = v.next(); !y.done; y = v.next()) {
                                var g = y.value;
                                g.comparator.compare(h) && (a = !0, g.callback(t, h, f))
                            }
                        } catch (t) {
                            i = {
                                error: t
                            }
                        } finally {
                            try {
                                y && !y.done && (o = v.return) && o.call(v)
                            } finally {
                                if (i) throw i.error
                            }
                        }
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        c && !c.done && (r = u.return) && r.call(u)
                    } finally {
                        if (n) throw n.error
                    }
                }
                return a
            }, e.prototype.insertHandler = function(t, e, n) {
                var r = this.eventTypeLookup.getIndexByType(t, !0);
                e[r] || (e[r] = []), e[r].push(n)
            }, e.prototype.removeHandler = function(t, e, n) {
                var r = e[this.eventTypeLookup.getIndexByType(t)];
                if (r)
                    for (var i = 0; i < r.length; i++)
                        if (r[i] === n) {
                            r.splice(i, 1);
                            break
                        }
            }, e.prototype.getMeshHandler = function(t, e, n) {
                var r = n[this.eventTypeLookup.getIndexByType(t)];
                return r ? r[this.meshTypeLookup.getIndexByType(e)] : null
            }, e
        }(i.x);
    e.default = q
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(2),
        o = n(119),
        a = n(69),
        s = n(6),
        u = n(27),
        c = n(342),
        l = function(t, e) {
            var n;
            void 0 === e && (e = {}), this.context = t, this.options = {
                model_id: Object(a.c)(),
                start_source: s.z("play", !1) ? "autoplay" : s.g() ? "click" : "fullpage",
                autoplay: s.z("play", !1) || !s.g(),
                quickstart: 1 === s.z("qust", 0) || 1 === s.z("qs", 0),
                language_tag: s.z("lang", null),
                is_mobile: s.o(),
                iframe: s.g(),
                aspect_ratio: s.A(),
                session_id: Object(u.p)(),
                window: {
                    height: window.innerHeight,
                    width: window.innerWidth
                },
                platform: (n = (new c.UAParser).getResult(), {
                    browser: {
                        name: n.browser.name,
                        major: n.browser.major,
                        version: n.browser.version,
                        language: navigator.language || "",
                        languages: navigator.languages ? navigator.languages.join(", ") : ""
                    },
                    os: {
                        name: n.os.name,
                        version: n.os.version
                    },
                    device: {
                        vendor: n.device.vendor,
                        model: n.device.model,
                        type: n.device.type
                    }
                })
            }, this.options = Object.assign(this.options, e)
        },
        h = n(165),
        f = n(324),
        p = n(75),
        d = function() {
            this.handlers = [{
                msgType: f.a,
                func: function(t, e, n) {
                    var r = n.tryGetData(p.a);
                    r && t.track("interaction_mode_changed", {
                        interaction_mode_prev: e.fromMode,
                        interaction_mode: e.mode,
                        interaction_source: r.source
                    })
                }
            }]
        },
        m = n(154),
        v = n(46),
        y = n(198),
        g = n(197),
        b = n(96);
    ! function(t) {
        t.USER = "self-guided", t.TOUR = "tour"
    }(r || (r = {}));
    var _, w, x = function() {
            function t() {
                var t = this;
                this.startLoadTime = Date.now(), this.endLoadTime = Date.now(), this.panosViewed = 0, this.navSource = r.USER, this.interactSource = v.a.None, this.handlers = [{
                    msgType: y.a,
                    func: function(e, n, r) {
                        t.onMoveToSweepBegin(n.timestamp)
                    }
                }, {
                    msgType: g.a,
                    func: function(e, n, i) {
                        var o = i.tryGetData(p.a),
                            a = i.tryGetData(b.b);
                        t.endLoadTime = Date.now();
                        var s = t.endLoadTime - t.startLoadTime;
                        t.interactSource = o ? o.source : t.interactSource, t.navSource = a && a.tourPlaying ? r.TOUR : r.USER, e.track("pano_viewed", {
                            pano_id: n.toSweep,
                            pano_view_count: ++t.panosViewed,
                            alignment_type: Object(m.c)(n.alignmentType, n.placementType),
                            interaction_source: t.interactSource,
                            navigation_source: t.navSource,
                            load_time: s / 1e3
                        })
                    }
                }]
            }
            return t.prototype.onMoveToSweepBegin = function(t) {
                this.startLoadTime = t
            }, t
        }(),
        E = n(255),
        S = function() {
            this.handlers = [{
                msgType: E.a,
                func: function(t, e, n) {
                    var r = n.tryGetData(p.a),
                        i = {
                            view_mode: e.toMode
                        };
                    r && (i.interaction_source = r.source), t.track("mode_changed", i)
                }
            }]
        },
        T = n(269),
        M = n(259),
        O = function() {
            this.handlers = [{
                msgType: M.a,
                func: function(t, e, n) {
                    var r = n.tryGetData(p.a);
                    r && t.track("floor_changed", {
                        floor_id: e.floorName,
                        interaction_source: r.source
                    })
                }
            }]
        },
        P = n(325),
        A = n(60),
        L = function() {
            function t() {
                var t = this;
                this.firstZoom = !0, this.fromZoom = 1, this.toZoom = 1, this.handlers = [{
                    msgType: P.a,
                    func: function(e, n, r) {
                        t.analytics || (t.analytics = e);
                        var i = r.tryGetData(A.a);
                        i && i.currentSweep !== t.currentPano && (t.firstZoom = !0, t.currentPano = i.currentSweep, t.fromZoom = 1), t.toZoom = n.zoomLevel, clearTimeout(t.sendTimeout), t.sendTimeout = window.setTimeout(t.trackZoomEvent.bind(t), 150)
                    }
                }]
            }
            return t.prototype.trackZoomEvent = function() {
                var t = this.firstZoom ? "initial" : "followup";
                this.analytics.track("zoom_" + t, {
                    from: this.fromZoom,
                    to: this.toZoom,
                    pano: this.currentPano
                }), this.firstZoom = !1, this.fromZoom = this.toZoom
            }, t
        }(),
        R = n(66),
        D = n(15),
        I = n(25),
        C = (_ = function(t, e) {
            return (_ = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            _(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        N = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "timing", e.modelLoadingStartTime = 0, e.waitingStartTime = 0, e.appPlayingTime = 0, e.appStartedTime = 0, e
            }
            return C(e, t), e.prototype.copy = function(t) {
                this.modelLoadingStartTime = t.modelLoadingStartTime, this.waitingStartTime = t.waitingStartTime, this.appPlayingTime = t.appPlayingTime, this.appStartedTime = t.appStartedTime
            }, Object.defineProperty(e.prototype, "totalTimeToAppStarting", {
                get: function() {
                    var t = this.appStartedTime - performance.timing.navigationStart;
                    return this.modelLoadingStartTime && this.waitingStartTime && (t -= this.modelLoadingStartTime - this.waitingStartTime), t
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "totalTimeToAppPlaying", {
                get: function() {
                    var t = this.appPlayingTime - performance.timing.navigationStart;
                    return this.modelLoadingStartTime && this.waitingStartTime && (t -= this.modelLoadingStartTime - this.waitingStartTime), t
                },
                enumerable: !0,
                configurable: !0
            }), e
        }(I.a),
        U = n(3),
        j = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        k = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        F = new U.a("showcase-session"),
        B = new N,
        G = function() {
            function t(t, e) {
                var n = this;
                this.analytics = t, this.engine = e, this.handlers = [{
                    msgType: R.a,
                    func: function(t, e, r) {
                        return j(n, void 0, void 0, (function() {
                            var n, o, a, u, c, l;
                            return k(this, (function(h) {
                                switch (h.label) {
                                    case 0:
                                        switch (e.phase) {
                                            case D.a.WAITING:
                                                return [3, 1];
                                            case D.a.LOADING:
                                                return [3, 2];
                                            case D.a.STARTING:
                                                return [3, 3];
                                            case D.a.PLAYING:
                                                return [3, 5];
                                            case D.a.ERROR:
                                                return [3, 6]
                                        }
                                        return [3, 8];
                                    case 1:
                                        return B.waitingStartTime = Date.now(), B.commit(), t.track("impression", {
                                            url_params: s.b(),
                                            visible: !0
                                        }), [3, 8];
                                    case 2:
                                        return B.modelLoadingStartTime = Date.now(), B.commit(), [3, 8];
                                    case 3:
                                        return B.appStartedTime = Date.now(), B.commit(), F.info("First render, model loaded " + B.totalTimeToAppStarting / 1e3), [4, this.engine.waitForModule(i.R)];
                                    case 4:
                                        return n = h.sent(), t.track("model_loaded", {
                                            has_hlr: (f = n.getModel(), f.data && f.playerOptions && f.playerOptions.highlightReel),
                                            duration: Date.now() - B.modelLoadingStartTime,
                                            duration_from_navigation_start: Date.now() - performance.timing.navigationStart
                                        }), [3, 8];
                                    case 5:
                                        return B.appPlayingTime = Date.now(), B.commit(), F.info("Playing, session started " + B.totalTimeToAppPlaying / 1e3), t.track("session_started"), window.addEventListener("unload", this.sessionEnded), t.track("load_times", {
                                            time_to_app_start: B.totalTimeToAppStarting,
                                            time_to_app_playing: B.totalTimeToAppPlaying
                                        }), [3, 8];
                                    case 6:
                                        return [4, r.waitForData(D.c)];
                                    case 7:
                                        return o = h.sent(), a = o.error && o.error.constructor ? o.error.constructor.name : null, u = o.error ? o.error.message : null, c = o.error && o.error.stack ? o.error.stack.split("\n") : [], l = c.length >= 2 ? c[1].match(/\s+at\s+([^\s]+)/) : null, t.track("error_displayed", {
                                            exception: {
                                                message: a + ": " + u,
                                                function: l ? l[1] : null,
                                                stack: c.slice(1, 5).join("\n")
                                            },
                                            duration: Date.now() - B.modelLoadingStartTime,
                                            duration_from_navigation_start: Date.now() - performance.timing.navigationStart
                                        }), [3, 8];
                                    case 8:
                                        return [2]
                                }
                                var f
                            }))
                        }))
                    }
                }], this.sessionEnded = function() {
                    n.analytics.trackAsync("session_ended", {
                        duration: Date.now() - B.appPlayingTime
                    })
                }
            }
            return t.prototype.dispose = function() {
                window.removeEventListener("unload", this.sessionEnded)
            }, t
        }(),
        z = n(250),
        H = n(77),
        V = n(112),
        W = n(48),
        X = function() {
            this.handlers = [{
                msgType: W.f,
                func: function(t, e) {
                    var n = {
                        measure_sid: e.data.sid,
                        start_position: e.data.startPosition,
                        end_position: e.data.endPosition,
                        length: e.data.totalLength,
                        segments: e.data.segments,
                        temporary: e.data.temporary,
                        viewmode: e.data.viewmode,
                        floor: e.data.floor,
                        feature_type: e.data.featureType,
                        constraint_style: e.data.constraint,
                        continuous: e.data.continuous
                    };
                    t.track("measure_segment_add", n)
                }
            }, {
                msgType: W.b,
                func: function(t, e) {
                    var n = {
                        measure_sid: e.data.sid,
                        length: e.data.totalLength,
                        segments: e.data.segments,
                        temporary: e.data.temporary,
                        viewmode: e.data.viewmode,
                        floor: e.data.floor,
                        feature_type: e.data.featureType,
                        measure_type: e.data.type,
                        constraint_style: e.data.constraint,
                        continuous: e.data.continuous
                    };
                    t.track("measure_add", n)
                }
            }, {
                msgType: W.g,
                func: function(t, e) {
                    var n = {
                        measure_sid: e.sid,
                        measure_text: e.text
                    };
                    t.track("measure_add_title", n)
                }
            }, {
                msgType: W.h,
                func: function(t, e) {
                    var n = {
                        measure_sid: e.sid,
                        measure_old_text: e.oldText,
                        measure_new_text: e.newText
                    };
                    t.track("measure_update_title", n)
                }
            }, {
                msgType: W.d,
                func: function(t, e) {
                    var n = {
                        measure_sid: e.data.sid,
                        length: e.data.totalLength,
                        segments: e.data.segments,
                        temporary: e.data.temporary,
                        viewmode: e.data.viewmode,
                        floor: e.data.floor,
                        measure_count: e.data.count,
                        continuous: e.data.continuous
                    };
                    t.track("measure_remove", n)
                }
            }, {
                msgType: W.a,
                func: function(t, e) {
                    var n = {
                        measure_count: e.count
                    };
                    t.track("measure_count", n)
                }
            }, {
                msgType: W.i,
                func: function(t, e) {
                    var n = {
                        measure_sid: e.data.sid,
                        length: e.data.totalLength,
                        segments: e.data.segments,
                        temporary: e.data.temporary,
                        viewmode: e.data.viewmode,
                        floor: e.data.floor,
                        feature_type: e.data.featureType,
                        constraint_style: e.data.constraint,
                        continuous: e.data.continuous
                    };
                    t.track("measure_update", n)
                }
            }, {
                msgType: W.e,
                func: function(t, e) {
                    var n = e.opened ? "measure_mode_enter" : "measure_mode_exit",
                        r = {
                            viewmode: e.viewmode,
                            measure_count: e.count
                        };
                    t.track(n, r)
                }
            }, {
                msgType: W.c,
                func: function(t, e) {
                    t.track("measure_cancelled", {})
                }
            }]
        },
        q = n(326),
        Y = n(129);
    ! function(t) {
        t.USER = "self-guided", t.TOUR = "tour"
    }(w || (w = {}));
    var K = function() {
            var t = this;
            this.navSource = w.USER, this.interactSource = v.a.None, this.handlers = [{
                msgType: q.a,
                func: function(e, n, r) {
                    var i = r.tryGetData(p.a),
                        o = r.tryGetData(b.b);
                    t.navSource = o && o.tourPlaying ? w.TOUR : w.USER, t.interactSource = i ? i.source : t.interactSource;
                    var a = {
                        room_id: n.roomId,
                        room_index: n.roomIndex,
                        room_type: n.roomType,
                        viewmode: n.viewmode ? Y.d[n.viewmode] : n.viewmode,
                        room_visit_count: n.visitCount,
                        room_count: n.roomCount,
                        navigation_source: t.navSource,
                        interaction_source: t.interactSource
                    };
                    e.track("room_visited", a)
                }
            }]
        },
        Z = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        Q = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        J = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        $ = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        tt = new U.a("showcase-analytics"),
        et = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "showcase-analytics", e.loaded = !1, e.handlers = [], e.track = function(t, n) {
                    e.analytics.track(t, n)
                }, e
            }
            return Z(e, t), e.prototype.init = function(t, e) {
                return Q(this, void 0, void 0, (function() {
                    var n, r, a, s, u, c, f, p, m, v, y, g, b, _, w, E, M, P, A, R, D, I, C, N, U = this;
                    return J(this, (function(j) {
                        switch (j.label) {
                            case 0:
                                return a = this, [4, e.getModule(o.default)];
                            case 1:
                                return a.analytics = j.sent(), [4, e.getModule(i.a)];
                            case 2:
                                return s = j.sent().getApi(), [4, e.market.waitForData(H.a)];
                            case 3:
                                return u = j.sent(), [4, e.waitForModule(i.F)];
                            case 4:
                                c = j.sent(), f = "";
                                try {
                                    f = Intl.DateTimeFormat().resolvedOptions().timeZone
                                } catch (t) {}
                                return p = {
                                    app: {
                                        name: u.getProperty(V.a),
                                        version: "3.0.35.5-0-g683e0bbd4"
                                    },
                                    screen: {
                                        width: window.screen.width,
                                        height: window.screen.height,
                                        density: window.devicePixelRatio
                                    },
                                    locale: c.languageCode,
                                    timezone: f || "",
                                    location: {
                                        city: null,
                                        country: null
                                    }
                                }, s.getGeoIpLocation().then((function(t) {
                                    p.location = {
                                        city: t.city,
                                        country: t.country_name
                                    }
                                })), this.context = new l(p, t.additionalValues || {}), this.addMessageHandler(new G(this.analytics, e), e), this.addMessageHandler(new S, e), this.addMessageHandler(new x, e), this.addMessageHandler(new d, e), this.addMessageHandler(new O, e), this.addMessageHandler(new T.a, e), this.addMessageHandler(new L, e), this.addMessageHandler(new X, e), this.addMessageHandler(new z.a, e), this.addMessageHandler(new K, e), m = u.getProperty(V.b), void 0 === t.provider ? [3, 5] : (y = t.provider, [3, 7]);
                            case 5:
                                return [4, s.getAppKey(m, V.d)];
                            case 6:
                                y = j.sent(), j.label = 7;
                            case 7:
                                if (g = [], b = [], !(v = y)) return [3, 21];
                                _ = v.split(","), j.label = 8;
                            case 8:
                                j.trys.push([8, 18, 19, 20]), w = $(_), E = w.next(), j.label = 9;
                            case 9:
                                return E.done ? [3, 17] : (M = E.value, Object.values(h.a).includes(M) ? null === (P = h.b[M]).key ? [3, 11] : [4, s.getAppKey(m, P.key)] : [3, 16]);
                            case 10:
                                return R = j.sent(), [3, 12];
                            case 11:
                                R = null, j.label = 12;
                            case 12:
                                return A = R, null === P.url ? [3, 14] : [4, s.getAppKey(m, P.url)];
                            case 13:
                                return I = j.sent(), [3, 15];
                            case 14:
                                I = null, j.label = 15;
                            case 15:
                                D = I, null === P.key || null !== A && null === P.url || null !== D ? (g.push({
                                    provider: M,
                                    token: A,
                                    url: D
                                }), b.push(A)) : tt.warn("Failed to set up " + M + ", token/url required but not found in config"), j.label = 16;
                            case 16:
                                return E = w.next(), [3, 9];
                            case 17:
                                return [3, 20];
                            case 18:
                                return C = j.sent(), n = {
                                    error: C
                                }, [3, 20];
                            case 19:
                                try {
                                    E && !E.done && (r = w.return) && r.call(w)
                                } finally {
                                    if (n) throw n.error
                                }
                                return [7];
                            case 20:
                                g.length < 1 && g.push({
                                    provider: V.c,
                                    token: null,
                                    url: null
                                }), j.label = 21;
                            case 21:
                                return N = s.user, this.analytics.load(g, s.getQueue(), this.context.options, this.context.context, N).then((function() {
                                    U.loaded = !0
                                })), [2]
                        }
                    }))
                }))
            }, e.prototype.addMessageHandler = function(t, e) {
                var n = this;
                this.handlers.push(t), t.handlers.forEach((function(t, r) {
                    n.bindings.push(e.subscribe(t.msgType, (function(r) {
                        t.func(n.analytics, r, e.market)
                    })))
                }))
            }, e.prototype.onUpdate = function(t) {
                this.loaded && Object(z.b)(this.analytics, t)
            }, e.prototype.dispose = function(e) {
                var n, r;
                t.prototype.dispose.call(this, e);
                try {
                    for (var i = $(this.handlers), o = i.next(); !o.done; o = i.next()) {
                        var a = o.value;
                        a.dispose && a.dispose()
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        o && !o.done && (r = i.return) && r.call(i)
                    } finally {
                        if (n) throw n.error
                    }
                }
                this.handlers = []
            }, e.prototype.getSessionId = function() {
                return this.context.options.session_id
            }, e
        }(i.mb);
    e.default = et
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r = n(2),
        i = n(5),
        o = n(17),
        a = n(1),
        s = n(26),
        u = n(76),
        c = n(176),
        l = n(7),
        h = n(46),
        f = n(14),
        p = n(37),
        d = n(29),
        m = n(24),
        v = n(12),
        y = n(49),
        g = n(109),
        b = n(137),
        _ = new a.a,
        w = new a.a;

    function x(t, e) {
        b.a.call(this, t, e), this.type = "LineSegments"
    }
    x.prototype = Object.assign(Object.create(b.a.prototype), {
        constructor: x,
        isLineSegments: !0,
        computeLineDistances: function() {
            var t = this.geometry;
            if (t.isBufferGeometry)
                if (null === t.index) {
                    for (var e = t.attributes.position, n = [], r = 0, i = e.count; r < i; r += 2) _.fromBufferAttribute(e, r), w.fromBufferAttribute(e, r + 1), n[r] = 0 === r ? 0 : n[r - 1], n[r + 1] = n[r] + _.distanceTo(w);
                    t.setAttribute("lineDistance", new v.b(n, 1))
                } else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
            else if (t.isGeometry) {
                var o = t.vertices;
                for (n = t.lineDistances, r = 0, i = o.length; r < i; r += 2) _.copy(o[r]), w.copy(o[r + 1]), n[r] = 0 === r ? 0 : n[r - 1], n[r + 1] = n[r] + _.distanceTo(w)
            }
            return this
        }
    });
    var E, S, T = n(107),
        M = n(205),
        O = (E = function(t, e) {
            return (E = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            E(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        P = function(t) {
            function e(e, n) {
                var r = this,
                    i = e.max,
                    o = e.min,
                    a = [1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, -1, -1, 1, -1, -1, -1, -1, 1, -1, -1];
                a[0] = i.x, a[1] = i.y, a[2] = i.z, a[3] = o.x, a[4] = i.y, a[5] = i.z, a[6] = o.x, a[7] = o.y, a[8] = i.z, a[9] = i.x, a[10] = o.y, a[11] = i.z, a[12] = i.x, a[13] = i.y, a[14] = o.z, a[15] = o.x, a[16] = i.y, a[17] = o.z, a[18] = o.x, a[19] = o.y, a[20] = o.z, a[21] = i.x, a[22] = o.y, a[23] = o.z;
                var s = void 0 !== n ? n : 16776960,
                    u = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7]),
                    c = new m.a;
                return c.setIndex(new v.a(u, 1)), c.setAttribute("position", new v.b(a, 3)), c.computeBoundingSphere(), (r = t.call(this, c, new T.a({
                    color: s
                })) || this).box = e, r
            }
            return O(e, t), e.prototype.updateMatrixWorld = function(t) {
                var e = this.box;
                e.isEmpty() || (e.getCenter(this.position), e.getSize(this.scale), this.scale.multiplyScalar(.5), o.a.prototype.updateMatrixWorld.call(this, t))
            }, e
        }(x),
        A = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        L = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        R = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        D = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        I = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t = t.concat(D(arguments[e]));
            return t
        },
        C = new l.a,
        N = function() {
            function t() {
                this.parent = null, this.raycastDistance = 1 / 0
            }
            return t.prototype.updateRaycastDistance = function(t) {
                this.raycastDistance = this.bounds.distanceToPoint(t)
            }, t
        }(),
        U = function(t) {
            function e(e, n) {
                var r = t.call(this) || this;
                return r.mesh = e, r.geometry = r.makeGeometryFromFaces(n), r
            }
            return A(e, t), e.prototype.makeGeometryFromFaces = function(t) {
                var e, n, r = new Float32Array(9 * t.length),
                    i = 0,
                    o = {};
                try {
                    for (var a = R(t), s = a.next(); !s.done; s = a.next()) {
                        var u = s.value;
                        (h = o[u.materialIndex]) || (h = o[u.materialIndex] = {
                            start: i / 3,
                            count: 0,
                            materialIndex: u.materialIndex
                        }), h.count += 3, r[i++] = u.ax, r[i++] = u.ay, r[i++] = u.az, r[i++] = u.bx, r[i++] = u.by, r[i++] = u.bz, r[i++] = u.cx, r[i++] = u.cy, r[i++] = u.cz
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        s && !s.done && (n = a.return) && n.call(a)
                    } finally {
                        if (e) throw e.error
                    }
                }
                var c = new m.a;
                for (var l in c.setAttribute("position", new v.a(r, 3)), c.computeBoundingBox(), c.boundingSphere = c.boundingBox.getBoundingSphere(new y.a), o) {
                    var h = o[l];
                    c.addGroup(h.start, h.count, h.materialIndex)
                }
                return c
            }, Object.defineProperty(e.prototype, "bounds", {
                get: function() {
                    return this.geometry.boundingBox
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.raycast = function(t, e) {
                var n = this.mesh.geometry,
                    r = this.mesh.matrixWorld,
                    i = this.mesh.matrix;
                this.mesh.geometry = this.geometry, this.mesh.matrix = C, this.mesh.matrixWorld = C, this.mesh.raycast(t, e), this.mesh.geometry = n, this.mesh.matrix = i, this.mesh.matrixWorld = r
            }, e
        }(N),
        j = function(t) {
            function e(e) {
                var n = t.call(this) || this;
                return n.mesh = e, n._bounds = new p.a, n.mesh.geometry.boundingBox || n.mesh.geometry.computeBoundingBox(), n
            }
            return A(e, t), Object.defineProperty(e.prototype, "bounds", {
                get: function() {
                    return this._bounds.copy(this.mesh.geometry.boundingBox).applyMatrix4(this.mesh.matrixWorld)
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.raycast = function(t, e) {
                this.mesh.visible && this.mesh.raycast(t, e)
            }, e
        }(N),
        k = function(t, e, n, r, i, o, s, u, c, l) {
            this.materialIndex = t, this.ax = e, this.ay = n, this.az = r, this.bx = i, this.by = o, this.bz = s, this.cx = u, this.cy = c, this.cz = l, this.bounds = new p.a(new a.a(Math.min(e, i, u), Math.min(n, o, c), Math.min(r, s, l)), new a.a(Math.max(e, i, u), Math.max(n, o, c), Math.max(r, s, l)))
        },
        F = function(t) {
            function e(e, n, r, i) {
                var o = t.call(this) || this;
                return o.level = n, o.leafMinSize = r, o.leafMaxFaces = i, o.childNodes = [], o.children = [], o.listeners = {}, o.bounds = e.clone(), o.size = e.getSize(new a.a), o
            }
            return A(e, t), e.prototype.addMeshes = function(t) {
                var e, n, r, i, o, a, s, u, c;
                return L(this, (function(l) {
                    switch (l.label) {
                        case 0:
                            t.updateMatrixWorld(!0), r = [], t.traverse((function(t) {
                                t instanceof d.a && r.push(t)
                            })), l.label = 1;
                        case 1:
                            l.trys.push([1, 8, 9, 10]), i = R(r), o = i.next(), l.label = 2;
                        case 2:
                            return o.done ? [3, 7] : (a = o.value, s = new j(a), a.geometry instanceof m.a && this.bounds.containsBox(s.bounds) ? (u = this.geometryToFaces(a.geometry, a.matrixWorld), [4]) : [3, 5]);
                        case 3:
                            return l.sent(), [5, R(this.addFaces(a, u))];
                        case 4:
                            return l.sent(), [3, 6];
                        case 5:
                            this.addMesh(s), l.label = 6;
                        case 6:
                            return o = i.next(), [3, 2];
                        case 7:
                            return [3, 10];
                        case 8:
                            return c = l.sent(), e = {
                                error: c
                            }, [3, 10];
                        case 9:
                            try {
                                o && !o.done && (n = i.return) && n.call(i)
                            } finally {
                                if (e) throw e.error
                            }
                            return [7];
                        case 10:
                            return [2]
                    }
                }))
            }, e.prototype.removeMeshes = function(t) {
                for (var e = !1, n = 0; n < this.children.length; n++) {
                    var r = this.children[n];
                    (r instanceof j || r instanceof U) && r.mesh.id === t.id && (r.parent = null, this.children.splice(n, 1), this.emit("removed", this, r), e = !0)
                }
                if (!e) throw new Error("Mesh that is being attempted removed does not exist in this node.")
            }, e.prototype.addMesh = function(t) {
                var e, n, r = !1;
                if (this.size.length() > this.leafMinSize) {
                    0 === this.childNodes.length && this.buildChildNodes();
                    try {
                        for (var i = R(this.childNodes), o = i.next(); !o.done; o = i.next()) {
                            var a = o.value;
                            a.bounds.containsBox(t.bounds) && (r = !0, a.addMesh(t))
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (n = i.return) && n.call(i)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }
                r || this.add(t)
            }, e.prototype.add = function(t) {
                if (t.parent) throw new Error("ColliderNode already has a parent, remove before trying to add in another node");
                t.parent = this, this.children.push(t), this.emit("added", this, t)
            }, e.prototype.addFaces = function(t, e) {
                var n;
                return L(this, (function(r) {
                    switch (r.label) {
                        case 0:
                            return e.length > this.leafMaxFaces && this.size.length() > this.leafMinSize ? (0 === this.childNodes.length && this.buildChildNodes(), [5, R(this.splitFaces(t, e))]) : [3, 2];
                        case 1:
                            return r.sent(), [3, 4];
                        case 2:
                            return e.length > 0 ? ((n = new U(t, e)).bounds.intersect(this.bounds), [4, this.addMesh(n)]) : [3, 4];
                        case 3:
                            r.sent(), r.label = 4;
                        case 4:
                            return [4];
                        case 5:
                            return r.sent(), [2]
                    }
                }))
            }, e.prototype.splitFaces = function(t, e) {
                var n, r, i, o, a, s, u, c, l, h, f, p;
                return L(this, (function(d) {
                    switch (d.label) {
                        case 0:
                            d.trys.push([0, 5, 6, 7]), a = R(this.childNodes), s = a.next(), d.label = 1;
                        case 1:
                            if (s.done) return [3, 4];
                            u = s.value, c = [];
                            try {
                                for (l = R(e), h = l.next(); !h.done; h = l.next()) f = h.value, u.bounds.intersectsBox(f.bounds) && c.push(f)
                            } catch (t) {
                                i = {
                                    error: t
                                }
                            } finally {
                                try {
                                    h && !h.done && (o = l.return) && o.call(l)
                                } finally {
                                    if (i) throw i.error
                                }
                            }
                            return [5, R(u.addFaces(t, c))];
                        case 2:
                            d.sent(), d.label = 3;
                        case 3:
                            return s = a.next(), [3, 1];
                        case 4:
                            return [3, 7];
                        case 5:
                            return p = d.sent(), n = {
                                error: p
                            }, [3, 7];
                        case 6:
                            try {
                                s && !s.done && (r = a.return) && r.call(a)
                            } finally {
                                if (n) throw n.error
                            }
                            return [7];
                        case 7:
                            return [2]
                    }
                }))
            }, e.prototype.buildChildNodes = function() {
                for (var t = this.size.multiplyScalar(.5), n = 0; n < 2; n++)
                    for (var r = 0; r < 2; r++)
                        for (var i = 0; i < 2; i++) {
                            var o = this.bounds.min.x + t.x * i,
                                s = o + t.x,
                                u = this.bounds.min.y + t.y * n,
                                c = u + t.y,
                                l = this.bounds.min.z + t.z * r,
                                h = l + t.z,
                                f = new e(new p.a(new a.a(o, u, l), new a.a(s, c, h)), this.level + 1, this.leafMinSize, this.leafMaxFaces);
                            this.childNodes.push(f), this.add(f)
                        }
            }, e.prototype.raycast = function(t, e) {
                var n, r;
                if (!0 === t.ray.intersectsBox(this.bounds)) try {
                    for (var i = R(this.children), o = i.next(); !o.done; o = i.next()) {
                        o.value.raycast(t, e)
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        o && !o.done && (r = i.return) && r.call(i)
                    } finally {
                        if (n) throw n.error
                    }
                }
            }, e.prototype.pick = function(t, n, r) {
                var i, o, a, s, u, c;
                if (!t.ray.intersectsBox(this.bounds)) return n;
                try {
                    for (var l = R(this.children), h = l.next(); !h.done; h = l.next()) {
                        (d = h.value).updateRaycastDistance(t.ray.origin)
                    }
                } catch (t) {
                    i = {
                        error: t
                    }
                } finally {
                    try {
                        h && !h.done && (o = l.return) && o.call(l)
                    } finally {
                        if (i) throw i.error
                    }
                }
                this.children.sort((function(t, e) {
                    return t.raycastDistance - e.raycastDistance
                }));
                try {
                    for (var f = R(this.children), p = f.next(); !p.done; p = f.next()) {
                        var d = p.value;
                        if (n && n.distance < d.raycastDistance) break;
                        if (r(d))
                            if (d instanceof e) n = d.pick(t, n, r);
                            else {
                                var m = [];
                                d.raycast(t, m);
                                try {
                                    for (var v = R(m), y = v.next(); !y.done; y = v.next()) {
                                        var g = y.value;
                                        (!n || n.distance > g.distance) && (n = g)
                                    }
                                } catch (t) {
                                    u = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        y && !y.done && (c = v.return) && c.call(v)
                                    } finally {
                                        if (u) throw u.error
                                    }
                                }
                            }
                    }
                } catch (t) {
                    a = {
                        error: t
                    }
                } finally {
                    try {
                        p && !p.done && (s = f.return) && s.call(f)
                    } finally {
                        if (a) throw a.error
                    }
                }
                return n
            }, e.prototype.geometryToFaces = function(t, e) {
                var n, r, i, o, a = t.getAttribute("position");
                if (a instanceof g.a) throw new Error("InterleavedBufferAttribute not supported");
                e.equals(C) || (a = a.clone(), e.applyToBufferAttribute(a));
                var s, u = a.array;
                if (t.index) {
                    var c = t.index.array;
                    s = new Array(c.length / 3);
                    var l = 0,
                        h = t.groups.length > 0 ? t.groups : [{
                            start: 0,
                            count: c.length,
                            materialIndex: 0
                        }];
                    try {
                        for (var f = R(h), p = f.next(); !p.done; p = f.next())
                            for (var d = (w = p.value).start; d < w.start + w.count; d += 3) {
                                var m = 3 * c[d],
                                    v = 3 * c[d + 1],
                                    y = 3 * c[d + 2];
                                s[l++] = new k(w.materialIndex || 0, u[m], u[m + 1], u[m + 2], u[v], u[v + 1], u[v + 2], u[y], u[y + 1], u[y + 2])
                            }
                    } catch (t) {
                        n = {
                            error: t
                        }
                    } finally {
                        try {
                            p && !p.done && (r = f.return) && r.call(f)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                } else {
                    s = new Array(u.length / 9);
                    l = 0, h = t.groups.length > 0 ? t.groups : [{
                        start: 0,
                        count: u.length / 3,
                        materialIndex: 0
                    }];
                    try {
                        for (var b = R(h), _ = b.next(); !_.done; _ = b.next()) {
                            var w;
                            for (d = 3 * (w = _.value).start; d < 3 * (w.start + w.count); d += 9) s[l++] = new k(w.materialIndex || 0, u[d], u[d + 1], u[d + 2], u[d + 3], u[d + 4], u[d + 5], u[d + 6], u[d + 7], u[d + 8])
                        }
                    } catch (t) {
                        i = {
                            error: t
                        }
                    } finally {
                        try {
                            _ && !_.done && (o = b.return) && o.call(b)
                        } finally {
                            if (i) throw i.error
                        }
                    }
                }
                return s
            }, e.prototype.getAllBounds = function(t) {
                var n, r;
                try {
                    for (var i = R(this.children), o = i.next(); !o.done; o = i.next()) {
                        var a = o.value;
                        t.push(a.bounds.clone()), a instanceof e && a.getAllBounds(t)
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        o && !o.done && (r = i.return) && r.call(i)
                    } finally {
                        if (n) throw n.error
                    }
                }
            }, e.prototype.emit = function(t) {
                for (var e, n, r, i = [], o = 1; o < arguments.length; o++) i[o - 1] = arguments[o];
                var a = this.listeners[t] || [];
                try {
                    for (var s = R(a), u = s.next(); !u.done; u = s.next()) {
                        var c = u.value;
                        c.apply(void 0, I(i))
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        u && !u.done && (n = s.return) && n.call(s)
                    } finally {
                        if (e) throw e.error
                    }
                }
                this.parent && (r = this.parent).emit.apply(r, I([t], i))
            }, e.prototype.on = function(t, e) {
                this.listeners[t] || (this.listeners[t] = []), this.listeners[t].push(e)
            }, e
        }(N),
        B = function() {
            function t(t, e, n) {
                var r = this;
                this.meshToNodes = {};
                var i = Object(f.n)(t);
                this.root = new F(i, 0, e, n), this.root.on("added", (function(t, e) {
                    (e instanceof j || e instanceof U) && (r.meshToNodes[e.mesh.id] || (r.meshToNodes[e.mesh.id] = []), r.meshToNodes[e.mesh.id].push(e))
                })), this.root.on("removed", (function(t, e) {
                    if (e instanceof j || e instanceof U)
                        for (var n = r.meshToNodes[e.mesh.id], i = 0; i < n.length; i++) n[i] === e && n.splice(i, 1)
                }))
            }
            return t.prototype.addMeshesAsync = function(t) {
                return L(this, (function(e) {
                    switch (e.label) {
                        case 0:
                            return [5, R(this.root.addMeshes(t))];
                        case 1:
                            return e.sent(), [2]
                    }
                }))
            }, t.prototype.addMeshes = function(t) {
                var e, n;
                try {
                    for (var r = R(this.root.addMeshes(t)), i = r.next(); !i.done; i = r.next()) i.value
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        i && !i.done && (n = r.return) && n.call(r)
                    } finally {
                        if (e) throw e.error
                    }
                }
            }, t.prototype.removeMeshes = function(t) {
                var e = this;
                t.traverse((function(t) {
                    var n, r, i = e.meshToNodes[t.id] || [];
                    try {
                        for (var o = R(i), a = o.next(); !a.done; a = o.next()) {
                            var s = a.value;
                            s.parent && s.parent.removeMeshes(t)
                        }
                    } catch (t) {
                        n = {
                            error: t
                        }
                    } finally {
                        try {
                            a && !a.done && (r = o.return) && r.call(o)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                }))
            }, t.prototype.raycast = function(t) {
                var e = [];
                return this.root.raycast(t, e), e
            }, t.prototype.getAllBounds = function() {
                var t = [];
                return this.root.getAllBounds(t), t
            }, t.prototype.pick = function(t, e) {
                return this.root.pick(t, null, (function(t) {
                    return !e || !(t instanceof j || t instanceof U) || e(t.mesh) && t.mesh.visible
                }))
            }, t.prototype.getDebugMesh = function() {
                var t, e, n = this.getAllBounds(),
                    r = [];
                try {
                    for (var i = R(n), o = i.next(); !o.done; o = i.next()) {
                        var a = o.value,
                            s = new P(a);
                        r.push(s.geometry)
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        o && !o.done && (e = i.return) && e.call(i)
                    } finally {
                        if (t) throw t.error
                    }
                }
                return new x(Object(M.a)(r), new T.a({
                    color: 16777215
                }))
            }, t
        }(),
        G = n(138),
        z = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        H = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        V = (function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            z(e, t)
        }(o.a), function() {
            function t(t, e, n) {
                var r = this;
                this.camera = t, this.cameraData = e, this.onRayHit = n, this.meshes = {}, this.meshGroups = {}, this.groupMeshes = {}, this.groupEnabled = {}, this.octreeEnabledMeshes = {}, this.raycaster = new c.a, this.pointer = new i.a(-2, -2), this.prevRay = new u.a, this.screenCenter = new i.a, this.rayDirection = new a.a, this.rayOrigin = new a.a, this._pointerRay = new u.a, this._pointerHits = [], this._hitCache = [], this.realNorm = new s.a, this.tmp = new l.a, this.getDebugMesh = function() {
                    var t = r.octree.getDebugMesh();
                    return t.updateMatrixWorld(!0), t
                }, this.setInteractionmodeData = function(t) {
                    r.interactionmodeData = t
                }, this.addTarget = function(t, e, n) {
                    void 0 === n && (n = "default-group");
                    var i = t,
                        o = i.collider ? i.collider : t;
                    r.meshes[t.id] = o, r.meshGroups[t.id] = n;
                    var a = r.groupEnabled[n];
                    null == a && r.enableForGroup(n, !0);
                    var s = r.groupMeshes[n];
                    s || (r.groupMeshes[n] = s = []), r.octreeEnabledMeshes[t.id] = e, r.octree && e && r.octree.addMeshes(t)
                }, this.enableForGroup = function(t, e) {
                    r.groupEnabled[t] = e
                }, this.removeTarget = function(t) {
                    r.octree && r.octreeEnabledMeshes[t.id] && r.octree.removeMeshes(t);
                    var e = r.meshGroups[t.id];
                    if (e)
                        for (var n = r.groupMeshes[e], i = 0; i < n.length; i++)
                            if (n[i].id === t.id) {
                                n[i] = n[n.length - 1], n.length--;
                                break
                            }
                    delete r.meshes[t.id]
                }, this.raycaster.linePrecision = .01
            }
            return t.prototype.render = function() {}, t.prototype.init = function() {}, t.prototype.activate = function() {}, t.prototype.dispose = function() {
                this.meshes = {}
            }, t.prototype.deactivate = function(t) {}, t.prototype.beforeRender = function() {
                if (this.prevRay.copy(this.raycaster.ray), this.interactionmodeData && this.updateRay(this.cameraData.pose.position, this.interactionmodeData.mode), this._pointerHits = this.cast().slice(), this._pointerHits.length > 0) {
                    var t = this._pointerHits[0];
                    if (t && t.face) {
                        var e = t.face.normal;
                        this.realNorm.set(e.x, e.y, e.z, 0), this.tmp.extractRotation(t.object.matrixWorld), this.realNorm.applyMatrix4(this.tmp);
                        var n = new G.a(t.point.clone(), new a.a(this.realNorm.x, this.realNorm.y, this.realNorm.z), t.object);
                        this.onRayHit(n)
                    }
                } else this.onRayHit(null)
            }, t.prototype.ray = function() {
                return this.raycaster.ray
            }, t.prototype.cast = function(t, e, n) {
                var r = this;
                if (t && e && (this.prevRay.copy(this.raycaster.ray), this.raycaster.set(t, e)), this.prevRay.equals(this.raycaster.ray)) return this._hitCache;
                this._hitCache.length = 0;
                if (this.octree) {
                    var i = this.octree.pick(this.raycaster, (function(t) {
                        var e = r.meshGroups[t.id];
                        return !(!r.octreeEnabledMeshes[t.id] || !(e && r.groupEnabled[e] || n && n.length > 0 && -1 !== n.indexOf(e)))
                    }));
                    i && this._hitCache.push(i)
                }
                for (var o in this.meshes) {
                    var a = this.meshGroups[o];
                    if (!this.octreeEnabledMeshes[o] && (a && this.groupEnabled[a] || n && n.length > 0 && -1 !== n.indexOf(a))) {
                        var s = this.meshes[o],
                            u = this.raycaster.intersectObject(s, !0);
                        this._hitCache = this._hitCache.concat(u)
                    }
                }
                return this._hitCache.sort((function(t, e) {
                    return t.distance > e.distance ? 1 : t.distance < e.distance ? -1 : 0
                })), this.prevRay.copy(this.raycaster.ray), this._hitCache
            }, t.prototype.pick = function(t, e, n) {
                return this.raycaster.set(t, e), this.octree.pick(this.raycaster, n)
            }, Object.defineProperty(t.prototype, "hits", {
                get: function() {
                    return this._pointerHits
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "pointerRay", {
                get: function() {
                    return this._pointerRay
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.setupOctree = function(t) {
                var e, n;
                this.octree = new B(t.boundingBox, .5, 200);
                try {
                    for (var r = H(Object.keys(this.meshes)), i = r.next(); !i.done; i = r.next()) {
                        var o = i.value;
                        if (this.octreeEnabledMeshes[o]) {
                            var a = this.meshes[o];
                            this.octree.addMeshes(a)
                        }
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        i && !i.done && (n = r.return) && n.call(r)
                    } finally {
                        if (e) throw e.error
                    }
                }
                return this.octree
            }, t.prototype.updateRay = function(t, e) {
                switch (e) {
                    case h.b.Desktop:
                    case h.b.Mobile:
                        this.rayOrigin.set(this.pointer.x, this.pointer.y, -1).unproject(this.camera), this.rayDirection.set(this.pointer.x, this.pointer.y, 1).unproject(this.camera), this.raycaster.set(this.rayOrigin, this.rayDirection.sub(this.rayOrigin).normalize());
                        break;
                    case h.b.VrOrientOnly:
                        this.raycaster.setFromCamera(this.screenCenter, this.camera);
                        break;
                    case h.b.VrWithController:
                    case h.b.VrWithTrackedController:
                        this.raycaster.ray.origin.copy(t)
                }
                this._pointerRay.copy(this.raycaster.ray)
            }, t.prototype.updatePointerPosition = function(t) {
                this.pointer.distanceToSquared(t) > 2e-5 && this.pointer.set(t.x, t.y), this.interactionmodeData && this.updateRay(this.cameraData.pose.position, this.interactionmodeData.mode)
            }, t
        }()),
        W = n(80),
        X = n(120),
        q = n(145),
        Y = n(13),
        K = n(3),
        Z = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        Q = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        J = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        $ = new K.a("surface-edge-finder"),
        tt = new q.a,
        et = ["a", "b", "c"],
        nt = function(t) {
            function e(e, n, r, i) {
                var o = t.call(this, e.a, e.b, e.c, e.normal) || this;
                return o.va = n, o.vb = r, o.vc = i, o.area = tt.set(o.va.vector, o.vb.vector, o.vc.vector).getArea(), o.midpoint = tt.getMidpoint(new a.a), o.vertices = [o.va, o.vb, o.vc], n.faces.push(o), r.faces.push(o), i.faces.push(o), o
            }
            return Z(e, t), e
        }(X.a),
        rt = function(t) {
            this.vector = t, this.faces = []
        },
        it = function() {
            function t() {
                this.area = 0, this.normal = new a.a, this.midpoint = new a.a, this.faces = [], this.normalSum = new a.a, this.midpointSum = new a.a
            }
            return t.prototype.add = function(t) {
                t.surface && t.surface.remove(t), this.faces.push(t), this.area += t.area, this.midpointSum.add(t.midpoint), this.normalSum.add(t.normal), this.recalcFromSums(), t.surface = this
            }, t.prototype.remove = function(t) {
                t.surface && (this.faces.splice(this.faces.indexOf(t), 1), this.area -= t.area, this.midpointSum.sub(t.midpoint), this.normalSum.sub(t.normal), this.recalcFromSums()), t.surface = null
            }, t.prototype.recalcFromSums = function() {
                this.normal.copy(this.normalSum).normalize(), this.midpoint.copy(this.midpointSum).divideScalar(this.faces.length)
            }, t.prototype.mergeSurfaces = function(t) {
                var e, n;
                try {
                    for (var r = J(t.faces), i = r.next(); !i.done; i = r.next()) {
                        var o = i.value;
                        o.surface = this, this.faces.push(o)
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        i && !i.done && (n = r.return) && n.call(r)
                    } finally {
                        if (e) throw e.error
                    }
                }
                this.area += t.area, this.normalSum.add(t.normalSum), this.midpointSum.add(t.midpointSum), this.recalcFromSums(), t.faces = [], t.area = 0, t.normal.set(0, 0, 0), t.normalSum.set(0, 0, 0), t.midpointSum.set(0, 0, 0), t.midpoint.set(0, 0, 0)
            }, t.prototype.getEdges = function() {
                var t, e, n, r, i = {},
                    o = {};
                try {
                    for (var a = J(this.faces), s = a.next(); !s.done; s = a.next())
                        for (var u = s.value, c = 0; c < 3; c++) {
                            var l = u[et[c]],
                                h = u[et[(c + 1) % 3]],
                                f = Math.min(l, h) + "," + Math.max(l, h);
                            if (void 0 === i[f]) {
                                var p = {
                                    edge1: l,
                                    edge2: h,
                                    isEdge: !0
                                };
                                i[f] = p
                            } else i[f].isEdge = !1
                        }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        s && !s.done && (e = a.return) && e.call(a)
                    } finally {
                        if (t) throw t.error
                    }
                }
                try {
                    for (var d = J(Object.values(i)), m = d.next(); !m.done; m = d.next()) {
                        var v = m.value;
                        l = v.edge1, h = v.edge2;
                        v.isEdge && (o[l] || (o[l] = []), o[l].push(h), o[h] || (o[h] = []), o[h].push(l))
                    }
                } catch (t) {
                    n = {
                        error: t
                    }
                } finally {
                    try {
                        m && !m.done && (r = d.return) && r.call(d)
                    } finally {
                        if (n) throw n.error
                    }
                }
                return o
            }, t.prototype.getCircularPaths = function(t) {
                for (var e, n, r, i = this.getEdges(), o = new Set, a = [], s = Object.keys(i).map((function(t) {
                        return parseInt(t, 10)
                    })); r = s.pop();) {
                    for (var u = []; r;) {
                        u.push(t[r]);
                        var c = void 0,
                            l = 0;
                        try {
                            for (var h = J(i[r]), f = h.next(); !f.done; f = h.next()) {
                                var p = f.value,
                                    d = Math.min(r, p) + "," + Math.max(r, p);
                                if (!o.has(d)) {
                                    var m = t[r].vector.distanceToSquared(this.midpoint);
                                    (void 0 === c || m > l) && (c = p, l = m)
                                }
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                f && !f.done && (n = h.return) && n.call(h)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        if (!c) break;
                        d = Math.min(r, c) + "," + Math.max(r, c);
                        o.add(d), r = c
                    }
                    u.length > 2 && a.push(u)
                }
                return a
            }, t
        }(),
        ot = function() {
            function t(t, e) {
                this.roomIndex = t, this.floorIndex = e, this.surfaces = new Set, this.lines = [], this.points = []
            }
            return t.prototype.run = function(t, e, n, r, i) {
                var o, a, s, u, c, l, h, p, d, m, v, y, g, b, _, w, x, E, S, T, M, O, P, A, L, R, D, I, C, N, U, j, k, F, B, G, z, H, V, X, q, Y, K, Z, tt, et, ot, at;
                return void 0 === e && (e = [1, 5, 10]), void 0 === n && (n = .2), void 0 === r && (r = .01), void 0 === i && (i = 20), Q(this, (function(Q) {
                    switch (Q.label) {
                        case 0:
                            g = t.vertices.map((function(t) {
                                return new rt(t)
                            })), b = [], Q.label = 1;
                        case 1:
                            Q.trys.push([1, 6, 7, 8]), _ = J(t.faces), w = _.next(), Q.label = 2;
                        case 2:
                            return w.done ? [3, 5] : (A = w.value, b.push(new nt(A, g[A.a], g[A.b], g[A.c])), [4]);
                        case 3:
                            Q.sent(), Q.label = 4;
                        case 4:
                            return w = _.next(), [3, 2];
                        case 5:
                            return [3, 8];
                        case 6:
                            return x = Q.sent(), o = {
                                error: x
                            }, [3, 8];
                        case 7:
                            try {
                                w && !w.done && (a = _.return) && a.call(_)
                            } finally {
                                if (o) throw o.error
                            }
                            return [7];
                        case 8:
                            for (Y = 0, tt = b.length; Y < tt; Y++) A = b[Y], (C = new it).add(A);
                            Q.label = 9;
                        case 9:
                            Q.trys.push([9, 14, 15, 16]), E = J(e), S = E.next(), Q.label = 10;
                        case 10:
                            return S.done ? [3, 13] : (T = S.value, [5, J(this.mergeSurfacesByNormal(b, T))]);
                        case 11:
                            Q.sent(), Q.label = 12;
                        case 12:
                            return S = E.next(), [3, 10];
                        case 13:
                            return [3, 16];
                        case 14:
                            return M = Q.sent(), s = {
                                error: M
                            }, [3, 16];
                        case 15:
                            try {
                                S && !S.done && (u = E.return) && u.call(E)
                            } finally {
                                if (s) throw s.error
                            }
                            return [7];
                        case 16:
                            try {
                                for (O = J(b), P = O.next(); !P.done; P = O.next()) A = P.value, this.surfaces.add(A.surface)
                            } catch (t) {
                                c = {
                                    error: t
                                }
                            } finally {
                                try {
                                    P && !P.done && (l = O.return) && l.call(O)
                                } finally {
                                    if (c) throw c.error
                                }
                            }
                            L = 0, R = [], Q.label = 17;
                        case 17:
                            Q.trys.push([17, 22, 23, 24]), D = J(this.surfaces), I = D.next(), Q.label = 18;
                        case 18:
                            if (I.done) return [3, 21];
                            if ((C = I.value).area <= n) return [3, 20];
                            N = C.getCircularPaths(g);
                            try {
                                for (U = J(N), j = U.next(); !j.done; j = U.next()) q = j.value, this.cullPath(q, (function(t, e) {
                                    if (t.length() < r || e.length() < r) return L++, !1;
                                    var n = t.angleTo(e) * f.c;
                                    return !(n < i || n > 180 - i) || (L++, !1)
                                })), q.length > 2 && R.push(q)
                            } catch (t) {
                                d = {
                                    error: t
                                }
                            } finally {
                                try {
                                    j && !j.done && (m = U.return) && m.call(U)
                                } finally {
                                    if (d) throw d.error
                                }
                            }
                            return [4];
                        case 19:
                            Q.sent(), Q.label = 20;
                        case 20:
                            return I = D.next(), [3, 18];
                        case 21:
                            return [3, 24];
                        case 22:
                            return k = Q.sent(), h = {
                                error: k
                            }, [3, 24];
                        case 23:
                            try {
                                I && !I.done && (p = D.return) && p.call(D)
                            } finally {
                                if (h) throw h.error
                            }
                            return [7];
                        case 24:
                            $.debug("Culled " + L + " path points"), F = new Set, B = new Set, G = function(t) {
                                return t.x.toFixed(3) + "," + t.y.toFixed(3) + "," + t.z.toFixed(3)
                            }, z = function(t) {
                                return G(t.start) + ":" + G(t.end)
                            }, H = function(t) {
                                return G(t.end) + ":" + G(t.start)
                            };
                            try {
                                for (V = J(R), X = V.next(); !X.done; X = V.next())
                                    for (q = X.value, Y = 0; Y < q.length; Y++) K = q[Y].vector, Z = q[(Y + 1) % q.length].vector, tt = new W.a(K, Z, this.roomIndex, this.floorIndex), et = z(tt), ot = H(tt), at = G(K), B.has(et) || B.has(ot) || (B.add(et), B.add(ot), this.lines.push(tt)), F.has(at) || (F.add(at), this.points.push(new W.b(K, this.roomIndex, this.floorIndex)))
                            } catch (t) {
                                v = {
                                    error: t
                                }
                            } finally {
                                try {
                                    X && !X.done && (y = V.return) && y.call(V)
                                } finally {
                                    if (v) throw v.error
                                }
                            }
                            return [4];
                        case 25:
                            return Q.sent(), [2]
                    }
                }))
            }, t.prototype.cullPath = function(t, e) {
                for (var n = new a.a, r = new a.a, i = !0; i;) {
                    i = !1;
                    for (var o = 0; o < t.length && t.length > 2; o++) {
                        var s = t[0 === o ? t.length - 1 : o - 1].vector,
                            u = t[o].vector,
                            c = t[(o + 1) % t.length].vector;
                        n.copy(s).sub(u), r.copy(c).sub(u), e(n, r) || (t.splice(o, 1), i = !0, o--)
                    }
                }
            }, t.prototype.mergeSurfacesByNormal = function(t, e, n) {
                var r, i, o, a, s, u, c, l, h, f, p, d, m, v, y, g, b, _, w, x, E;
                return void 0 === n && (n = 5), Q(this, (function(S) {
                    switch (S.label) {
                        case 0:
                            c = -1, l = 0, S.label = 1;
                        case 1:
                            if (!(0 !== c && l++ < n)) return [3, 11];
                            $.debug("Merging surfaces by normal angle threshold: " + e), h = Math.cos(Y.a.DEG2RAD * e), c = 0, f = 0, S.label = 2;
                        case 2:
                            S.trys.push([2, 8, 9, 10]), p = J(t), d = p.next(), S.label = 3;
                        case 3:
                            return d.done ? [3, 7] : (m = d.value, f++ % 1e3 != 0 ? [3, 5] : [4]);
                        case 4:
                            S.sent(), S.label = 5;
                        case 5:
                            try {
                                for (v = J(m.vertices), y = v.next(); !y.done; y = v.next()) {
                                    g = y.value;
                                    try {
                                        for (b = J(g.faces), _ = b.next(); !_.done; _ = b.next()) w = _.value, x = w.surface, m.surface !== x && m.surface.normal.dot(x.normal) >= h && (m.surface.faces.length > x.faces.length ? m.surface.mergeSurfaces(x) : x.mergeSurfaces(m.surface), c++)
                                    } catch (t) {
                                        s = {
                                            error: t
                                        }
                                    } finally {
                                        try {
                                            _ && !_.done && (u = b.return) && u.call(b)
                                        } finally {
                                            if (s) throw s.error
                                        }
                                    }
                                }
                            } catch (t) {
                                o = {
                                    error: t
                                }
                            } finally {
                                try {
                                    y && !y.done && (a = v.return) && a.call(v)
                                } finally {
                                    if (o) throw o.error
                                }
                            }
                            S.label = 6;
                        case 6:
                            return d = p.next(), [3, 3];
                        case 7:
                            return [3, 10];
                        case 8:
                            return E = S.sent(), r = {
                                error: E
                            }, [3, 10];
                        case 9:
                            try {
                                d && !d.done && (i = p.return) && i.call(p)
                            } finally {
                                if (r) throw r.error
                            }
                            return [7];
                        case 10:
                            return c && $.debug("Merged " + c + " surfaces by normal..."), [3, 1];
                        case 11:
                            return [2]
                    }
                }))
            }, t
        }(),
        at = n(57),
        st = n(258),
        ut = n(54),
        ct = n(58),
        lt = n(0),
        ht = n(82),
        ft = n(207),
        pt = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        dt = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        mt = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        vt = new K.a("snapcaster");
    ! function(t) {
        t[t.UNINITIALIZED = 0] = "UNINITIALIZED", t[t.WORKING = 1] = "WORKING", t[t.READY = 2] = "READY"
    }(S || (S = {}));
    var yt = function() {
            function t(t) {
                this.cameraData = t, this.edgeFinders = [], this.raycaster = new c.a, this.modelRaycaster = new c.a, this.status = S.UNINITIALIZED
            }
            return t.prototype.render = function() {}, t.prototype.init = function() {}, t.prototype.dispose = function() {}, t.prototype.deactivate = function(t) {}, t.prototype.activate = function(t) {
                return pt(this, void 0, void 0, (function() {
                    var e, n, i, a, s = this;
                    return dt(this, (function(u) {
                        switch (u.label) {
                            case 0:
                                return this.engine = t, [4, t.waitForModule(ht.default)];
                            case 1:
                                return e = u.sent(), [4, t.waitForModule(r.Nb)];
                            case 2:
                                return n = u.sent().getScene().scene, e.registerButton("Snapping", "Visualize Snapping", (function() {
                                    if (i) return n.remove(i), void(i = null);
                                    i = new o.a, n.add(i);
                                    var t = new st.b(.02, 5, 5),
                                        e = new ut.a({
                                            color: 65280
                                        });
                                    s.snappingOctree.traverse((function(n) {
                                        if (n instanceof W.a) {
                                            var r = (new ct.a).setFromPoints([n.start, n.end]),
                                                o = .2 + .8 * Math.random(),
                                                a = .2 + .8 * Math.random(),
                                                s = .2 + .8 * Math.random(),
                                                u = new b.a(r, new T.a({
                                                    color: 16711680 * o + 65280 * a + 255 * s
                                                }));
                                            i.add(u)
                                        } else if (n instanceof W.b) {
                                            (u = new d.a(t, e)).position.copy(n), i.add(u)
                                        }
                                    }))
                                })), e.registerButton("Snapping", "Visualize Snap Surfaces", (function() {
                                    var t, e, r, i, o, u;
                                    if (a) return n.remove(a), void(a = null);
                                    var c = new m.a,
                                        l = [],
                                        h = [];
                                    try {
                                        for (var f = mt(s.edgeFinders), p = f.next(); !p.done; p = f.next()) {
                                            var y = p.value;
                                            try {
                                                for (var g = mt(y.surfaces), b = g.next(); !b.done; b = g.next()) {
                                                    var _ = b.value,
                                                        w = _.area > .1,
                                                        x = Math.random(),
                                                        E = w ? 0 : .2 + .8 * x,
                                                        S = w ? .2 + .8 * x : 0;
                                                    try {
                                                        for (var T = mt(_.faces), M = T.next(); !M.done; M = T.next()) {
                                                            var O = M.value,
                                                                P = O.va.vector,
                                                                A = O.vb.vector,
                                                                L = O.vc.vector;
                                                            l.push(P.x, P.y, P.z), l.push(A.x, A.y, A.z), l.push(L.x, L.y, L.z), h.push(E, S, 0, E, S, 0, E, S, 0)
                                                        }
                                                    } catch (t) {
                                                        o = {
                                                            error: t
                                                        }
                                                    } finally {
                                                        try {
                                                            M && !M.done && (u = T.return) && u.call(T)
                                                        } finally {
                                                            if (o) throw o.error
                                                        }
                                                    }
                                                }
                                            } catch (t) {
                                                r = {
                                                    error: t
                                                }
                                            } finally {
                                                try {
                                                    b && !b.done && (i = g.return) && i.call(g)
                                                } finally {
                                                    if (r) throw r.error
                                                }
                                            }
                                        }
                                    } catch (e) {
                                        t = {
                                            error: e
                                        }
                                    } finally {
                                        try {
                                            p && !p.done && (e = f.return) && e.call(f)
                                        } finally {
                                            if (t) throw t.error
                                        }
                                    }
                                    c.setAttribute("position", new v.b(l, 3)), c.setAttribute("color", new v.b(h, 3)), a = new d.a(c, new ut.a({
                                        vertexColors: lt.Bc
                                    })), n.add(a)
                                })), [2]
                        }
                    }))
                }))
            }, Object.defineProperty(t.prototype, "snappingOctree", {
                get: function() {
                    return this.status === S.UNINITIALIZED && this.preloadMeshSnapping(), this._snappingOctree
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.setupOctree = function(t, e) {
                this.modelOctree = e, this.modelMesh = t, this._snappingOctree = new W.c(this.modelMesh.boundingBox)
            }, t.prototype.preloadMeshSnapping = function() {
                return pt(this, void 0, void 0, (function() {
                    var t;
                    return dt(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return this.status !== S.UNINITIALIZED ? [3, 3] : (this.status = S.WORKING, t = this, [4, this.engine.commandBinder.issueCommand(new ft.a("snapping", this.buildSnappingForModel(), 6e4))]);
                            case 1:
                                return t.populateProcess = e.sent(), [4, this.populateProcess.promise];
                            case 2:
                                e.sent(), this.status = S.READY, this.populateProcess = null, e.label = 3;
                            case 3:
                                return [2]
                        }
                    }))
                }))
            }, t.prototype.buildSnappingForModel = function() {
                var t, e, n, r, i, o, s, u, c, l, h, f, p, d, m = this;
                return dt(this, (function(v) {
                    switch (v.label) {
                        case 0:
                            i = [];
                            try {
                                for (o = mt(this.modelMesh.floorMeshes), s = o.next(); !s.done; s = o.next()) {
                                    u = s.value;
                                    try {
                                        for (c = mt(u.roomMeshes), l = c.next(); !l.done; l = c.next()) p = l.value, i.push({
                                            room: p,
                                            distanceToCamera: 1 / 0
                                        })
                                    } catch (t) {
                                        n = {
                                            error: t
                                        }
                                    } finally {
                                        try {
                                            l && !l.done && (r = c.return) && r.call(c)
                                        } finally {
                                            if (n) throw n.error
                                        }
                                    }
                                }
                            } catch (e) {
                                t = {
                                    error: e
                                }
                            } finally {
                                try {
                                    s && !s.done && (e = o.return) && e.call(o)
                                } finally {
                                    if (t) throw t.error
                                }
                            }
                            h = new a.a, f = function() {
                                i.forEach((function(t) {
                                    return t.distanceToCamera = t.room.boundingBox.getCenter(h).distanceTo(m.cameraData.pose.position)
                                })), i.sort((function(t, e) {
                                    return e.distanceToCamera - t.distanceToCamera
                                }))
                            }, v.label = 1;
                        case 1:
                            return i.length ? (f(), p = i.pop().room, d = (new ct.a).fromBufferGeometry(p.geometry), [5, mt(this.buildSnappingForGeometry(d, p.roomIndex, p.floorIndex))]) : [3, 4];
                        case 2:
                            return v.sent(), [4];
                        case 3:
                            return v.sent(), [3, 1];
                        case 4:
                            return vt.info("Snapping found " + this._snappingOctree.pointCount + " points and " + this._snappingOctree.lineCount + " lines"), [2]
                    }
                }))
            }, t.prototype.buildSnappingForGeometry = function(t, e, n) {
                var r, i, o, a, s, u, c, l, h, f, p;
                return dt(this, (function(d) {
                    switch (d.label) {
                        case 0:
                            return t.computeFaceNormals(), [4];
                        case 1:
                            return d.sent(), s = new ot(e, n), [5, mt(s.run(t))];
                        case 2:
                            d.sent(), vt.debug("Room done, added " + s.points.length + " points and " + s.lines.length + " lines");
                            try {
                                for (u = mt(s.points), c = u.next(); !c.done; c = u.next()) l = c.value, this._snappingOctree.add(l)
                            } catch (t) {
                                r = {
                                    error: t
                                }
                            } finally {
                                try {
                                    c && !c.done && (i = u.return) && i.call(u)
                                } finally {
                                    if (r) throw r.error
                                }
                            }
                            try {
                                for (h = mt(s.lines), f = h.next(); !f.done; f = h.next()) p = f.value, this._snappingOctree.add(p)
                            } catch (t) {
                                o = {
                                    error: t
                                }
                            } finally {
                                try {
                                    f && !f.done && (a = h.return) && a.call(h)
                                } finally {
                                    if (o) throw o.error
                                }
                            }
                            return this.edgeFinders.push(s), [2]
                    }
                }))
            }, t.prototype.cast = function(t, e, n, r) {
                var i;
                n && r && (i = (new at.a).setFromNormalAndCoplanarPoint(r, n)), this.raycaster.set(t.origin, t.direction);
                var o = this.snappingOctree.raycast(this.raycaster, e) || [],
                    s = function(t) {
                        var e = (1 + t.distance) * Math.pow(1 + t.distanceToRay, 2);
                        return (t.object instanceof W.b || t.object instanceof a.a) && (e /= 10), i && i.distanceToPoint(t.point) < -.2 && (e += 10), e
                    };
                return o.sort((function(t, e) {
                    return s(t) - s(e)
                })), o
            }, t.prototype.pick = function(t, e, n, r, i) {
                var o, a;
                n || (n = this.cast(t, e, r, i));
                var s = null;
                try {
                    for (var u = mt(n), c = u.next(); !c.done; c = u.next()) {
                        var l = c.value;
                        if (this.modelRaycaster.ray.origin.copy(t.origin), this.modelRaycaster.ray.direction.copy(l.point).sub(t.origin).normalize(), this.modelRaycaster.far = l.distance - .05, !this.modelOctree.raycast(this.modelRaycaster)[0]) {
                            s = l;
                            break
                        }
                    }
                } catch (t) {
                    o = {
                        error: t
                    }
                } finally {
                    try {
                        c && !c.done && (a = u.return) && a.call(u)
                    } finally {
                        if (o) throw o.error
                    }
                }
                return s ? {
                    isLineOctreeIntersection: !0,
                    distance: s.distance,
                    distanceToRay: s.distanceToRay,
                    point: s.point,
                    object: s.object
                } : null
            }, t.prototype.add = function(t) {
                this.snappingOctree.add(t)
            }, t.prototype.remove = function(t) {
                this.snappingOctree.remove(t)
            }, t
        }(),
        gt = n(50),
        bt = n(61),
        _t = n(75),
        wt = n(73),
        xt = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        Et = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        St = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        Tt = function(t, e) {
            var n = "function" == typeof Symbol && t[Symbol.iterator];
            if (!n) return t;
            var r, i, o = n.call(t),
                a = [];
            try {
                for (;
                    (void 0 === e || e-- > 0) && !(r = o.next()).done;) a.push(r.value)
            } catch (t) {
                i = {
                    error: t
                }
            } finally {
                try {
                    r && !r.done && (n = o.return) && n.call(o)
                } finally {
                    if (i) throw i.error
                }
            }
            return a
        },
        Mt = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        Ot = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "raycaster", e.raycasterData = new G.b, e.snapCast = function(t, n, r, i) {
                    return e.snapcaster.cast(t, n, r, i)
                }, e.snapPick = function(t, n, r, i, o) {
                    return e.snapcaster.pick(t, n, r, i, o)
                }, e
            }
            return xt(e, t), e.prototype.init = function(t, e) {
                return Et(this, void 0, void 0, (function() {
                    var t, n, i, o, a, s, u = this;
                    return St(this, (function(c) {
                        switch (c.label) {
                            case 0:
                                return e.market.register(this, G.b, this.raycasterData), [4, Promise.all([e.getModule(r.Nb), e.getModule(ht.default), e.market.waitForData(bt.a)])];
                            case 1:
                                return t = Tt.apply(void 0, [c.sent(), 3]), n = t[0], i = t[1], o = t[2], this.cameraData = o, a = n.getScene(), s = function(t) {
                                    u.raycasterData.hit = t, u.raycasterData.commit()
                                }, this.raycaster = new V(a.camera, this.cameraData, s), e.addComponent(this, this.raycaster), this.snapcaster = new yt(this.cameraData), e.addComponent(this, this.snapcaster), e.market.waitForData(_t.a).then((function(t) {
                                    return u.raycaster.setInteractionmodeData(t)
                                })), i.registerButton("Octree", "Visualize Collision Tree", (function() {
                                    var t = u.raycaster.getDebugMesh();
                                    a.addChild(gt.a.Root, t)
                                })), [2]
                        }
                    }))
                }))
            }, e.prototype.getRaycaster = function() {
                return this.raycaster
            }, e.prototype.getPointerHits = function() {
                return this.raycaster.hits
            }, e.prototype.getPointerRay = function() {
                return this.raycaster.pointerRay
            }, e.prototype.setupOctree = function(t) {
                var e = this.raycaster.setupOctree(t);
                this.snapcaster.setupOctree(t, e)
            }, e.prototype.snapAddFeatures = function() {
                for (var t, e, n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r];
                try {
                    for (var i = Mt(n), o = i.next(); !o.done; o = i.next()) {
                        var a = o.value;
                        this.snapcaster.add(a)
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        o && !o.done && (e = i.return) && e.call(i)
                    } finally {
                        if (t) throw t.error
                    }
                }
            }, e.prototype.snapRemoveFeatures = function() {
                for (var t, e, n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r];
                try {
                    for (var i = Mt(n), o = i.next(); !o.done; o = i.next()) {
                        var a = o.value;
                        this.snapcaster.remove(a)
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        o && !o.done && (e = i.return) && e.call(i)
                    } finally {
                        if (t) throw t.error
                    }
                }
            }, e.prototype.snapPreload = function() {
                this.snapcaster.preloadMeshSnapping()
            }, e.prototype.cast = function(t, e, n) {
                return void 0 === n && (n = []), this.raycaster.cast(t, e, n)
            }, e.prototype.castNDCPosition = function(t) {
                var e = Object(wt.a)(this.cameraData, new i.a(t.x, t.y)),
                    n = this.cameraData.pose.position;
                return this.cast(n, e.sub(n).normalize())
            }, e
        }(r.eb);
    e.default = Ot
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(2),
        o = n(45),
        a = n(6),
        s = function(t) {
            return {
                problem: "",
                solution: t.t(o.a.ERROR_BROWSER_SOLUTION),
                explanation: t.t(o.a.ERROR_BROWSER_EXPLANATION),
                actions: Object(a.o)() ? "" : ["<div id='browser-tiles'>", "<a href='https://www.google.com/chrome/browser/' target='_blank'>", "<div class='tile'>", "<img src=" + n(470) + ">", "</div>", "</a>", "<a href='https://www.mozilla.org/en-US/firefox/new/' target='_blank'>", "<div class='tile'>", "<img src=" + n(471) + ">", "</div>", "</a>", "<a href='http://windows.microsoft.com/en-us/internet-explorer/download-ie' target='_blank'>", "<div class='tile'>", "<img src=" + n(472) + ">", "</div>", "</a>", "<a href='https://support.apple.com/en-us/HT204416' target='_blank'>", "<div class='tile'>", "<img src=" + n(473) + ">", "</div>", "</a>", "</div>"].join("")
            }
        },
        u = function() {
            return (u = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        c = function(t) {
            return u({}, s(t), {
                problem: "" + t.t(o.a.ERROR_WEBGL_UNSUPPORTED_PROBLEM)
            })
        },
        l = "https://support.matterport.com/hc/articles/208220058",
        h = function(t) {
            return {
                problem: t.t(o.a.ERROR_GENERIC_PROBLEM),
                solution: t.t(o.a.ERROR_GENERIC_SOLUTION),
                explanation: "",
                actions: ["" + t.t(o.a.ERROR_GENERIC_ACTIONS_1)].concat(Object(a.o)() ? [] : ["<a id='install-browser' href='#'>" + t.t(o.a.ERROR_GENERIC_ACTIONS_2) + "</a>", "" + t.t(o.a.ERROR_GENERIC_ACTIONS_3)]).concat(["<a href=" + l + " target='_blank'>" + t.t(o.a.ERROR_GENERIC_ACTIONS_4) + "</a>"]).join("")
            }
        },
        f = function(t) {
            return {
                problem: t.t(o.a.ERROR_LOADING_FAILED_PROBLEM),
                solution: "",
                explanation: "",
                actions: ["" + t.t(o.a.ERROR_LOADING_FAILED_ACTIONS_1), "<a href=" + l + " target='_blank'>" + t.t(o.a.ERROR_LOADING_FAILED_ACTIONS_2) + "</a>"].join("")
            }
        },
        p = (n(474), r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        d = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        m = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        v = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "error-gui", e
            }
            return p(e, t), e.prototype.init = function(t, e) {
                return d(this, void 0, void 0, (function() {
                    var t;
                    return m(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                return this.container = document.querySelector("#error-container"), this.problem = document.querySelector("#error-problem"), this.solution = document.querySelector("#error-solution"), this.explanation = document.querySelector("#error-explanation"), this.actions = document.querySelector("#error-actions"), t = this, [4, e.getModule(i.F)];
                            case 1:
                                return t.localeModule = n.sent(), [2]
                        }
                    }))
                }))
            }, e.prototype.showError = function(t) {
                var e = this;
                switch (t) {
                    case i.o.UNSUPPORTED:
                        this.populateErrorScreen(c);
                        break;
                    case i.o.WEBGL:
                        this.populateErrorScreen(h);
                        var n = this.actions.querySelector("#install-browser");
                        n && n.addEventListener("click", (function() {
                            return e.populateErrorScreen(s)
                        }));
                        break;
                    case i.o.GENERIC:
                    default:
                        this.populateErrorScreen(f)
                }
            }, e.prototype.populateErrorScreen = function(t) {
                var e = t(this.localeModule);
                this.container.classList.remove("hidden"), this.problem.innerText = e.problem, this.solution.innerText = e.solution, this.explanation.innerText = e.explanation, this.actions.innerHTML = e.actions
            }, e
        }(i.n);
    e.default = v
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(2),
        o = n(201),
        a = function() {
            function t(t) {
                this.name = t, this.taskDurations = new o.a(100)
            }
            return Object.defineProperty(t.prototype, "typicalStepDuration", {
                get: function() {
                    return 1
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.addTaskDuration = function(t) {
                this.taskDurations.push(t)
            }, t
        }();
    ! function(t) {
        t.WAITING = "waiting", t.STARTED = "started", t.DONE = "done"
    }(r || (r = {}));
    var s, u = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        c = function() {
            function t() {
                this.tasks = [], this.types = {}
            }
            return t.prototype.getType = function(t) {
                return this.types[t] || (this.types[t] = new a(t)), this.types[t]
            }, t.prototype.addTask = function(t) {
                this.tasks.push(t)
            }, t.prototype.update = function(t) {
                var e, n;
                this.tasks = this.tasks.filter((function(t) {
                    return t.status !== r.DONE
                })), this.tasks.sort((function(t, e) {
                    return e.urgency - t.urgency
                }));
                var i = 0;
                try {
                    t: for (var o = u(this.tasks), a = o.next(); !a.done; a = o.next())
                        for (var s = a.value; s.status !== r.DONE;) {
                            var c = performance.now(),
                                l = i + s.type.typicalStepDuration > t,
                                h = c >= s.deadline;
                            if (l && !h) break t;
                            var f = c;
                            s.run();
                            var p = performance.now() - f;
                            s.type.addTaskDuration(p), i += p
                        }
                }
                catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        a && !a.done && (n = o.return) && n.call(o)
                    } finally {
                        if (e) throw e.error
                    }
                }
            }, t
        }(),
        l = n(270),
        h = n(207),
        f = function() {
            function t(t, e, n, i) {
                var o = this;
                this.type = t, this.func = e, this.deadline = n, this.steps = i, this.status = r.WAITING, this.promise = new Promise((function(t, e) {
                    o.onSuccess = t, o.onError = e
                }))
            }
            return t.prototype.run = function() {
                var t;
                this.status = r.STARTED;
                try {
                    t = this.func.next()
                } catch (t) {
                    return this.status = r.DONE, void this.onError(t)
                }
                this.steps -= 1, t.done && (this.status = r.DONE, this.onSuccess(t.value))
            }, Object.defineProperty(t.prototype, "estimatedDuration", {
                get: function() {
                    return this.steps * this.type.typicalStepDuration
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "urgency", {
                get: function() {
                    var t = this.deadline - performance.now();
                    return t <= 0 ? 1e6 - t : this.estimatedDuration / t / t
                },
                enumerable: !0,
                configurable: !0
            }), t
        }(),
        p = (s = function(t, e) {
            return (s = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            s(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        d = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        m = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        v = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "scheduler-module", e.scheduler = new c, e
            }
            return p(e, t), e.prototype.init = function(t, e) {
                return d(this, void 0, void 0, (function() {
                    var t = this;
                    return m(this, (function(n) {
                        return this.engine = e, this.engine.commandBinder.addBinding(l.a, (function(e) {
                            return d(t, void 0, void 0, (function() {
                                var t;
                                return m(this, (function(n) {
                                    return t = new f(this.scheduler.getType(e.type), e.func, performance.now() + e.maxDelay, e.steps), this.scheduler.addTask(t), [2, t]
                                }))
                            }))
                        })), this.engine.commandBinder.addBinding(h.a, (function(e) {
                            return d(t, void 0, void 0, (function() {
                                var t;
                                return m(this, (function(n) {
                                    return t = new f(this.scheduler.getType(e.type), e.func, performance.now() + e.maxDelay, e.steps), this.scheduler.addTask(t), [2, t]
                                }))
                            }))
                        })), [2]
                    }))
                }))
            }, e.prototype.onUpdate = function(t) {
                this.scheduler.update(4)
            }, e
        }(i.kb);
    e.default = v
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i, o = n(56),
        a = n(161),
        s = n(2),
        u = n(61),
        c = n(162),
        l = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        h = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return l(e, t), e
        }(c.a),
        f = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        p = function(t) {
            function e() {
                return null !== t && t.apply(this, arguments) || this
            }
            return f(e, t), e
        }(c.a),
        d = n(33),
        m = n(94),
        v = n(166),
        y = n(77),
        g = n(118),
        b = n(14),
        _ = n(108),
        w = n(62),
        x = function() {
            var t = function(e, n) {
                return (t = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(t, e) {
                        t.__proto__ = e
                    } || function(t, e) {
                        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                    })(e, n)
            };
            return function(e, n) {
                function r() {
                    this.constructor = e
                }
                t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
            }
        }(),
        E = function() {
            return (E = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        S = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        T = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        M = ((i = {})[w.a.Instant] = {
            blackoutTime: 0,
            transitionTime: 0
        }, i[w.a.FadeToBlack] = {
            blackoutTime: v.a.camera.transitionBlackoutTime,
            transitionTime: 2 * v.a.camera.transitionBlackoutTime
        }, i[w.a.Interpolate] = {
            blackoutTime: 0,
            transitionTime: v.a.camera.transitionFadeTime
        }, i),
        O = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "camera-data", e
            }
            return x(e, t), e.prototype.init = function(t, e) {
                return S(this, void 0, void 0, (function() {
                    var n, r = this;
                    return T(this, (function(i) {
                        switch (i.label) {
                            case 0:
                                return this.engine = e, this.market = e.market, n = this, [4, e.market.waitForData(g.a)];
                            case 1:
                                return n.canvas = i.sent(), this.cameraData = new u.a(this.canvas.width, this.canvas.height), this.market.register(this, u.a, this.cameraData), this.baseTransitionTime = t.baseTransitionTime || v.a.camera.baseTransitionTime, e.market.waitForData(y.a).then((function(t) {
                                    t.onPropertyChanged(s.Rb, (function(t) {
                                        r.baseTransitionTime = t
                                    }))
                                })), this.bindings.push(e.subscribe(a.a, (function(t) {
                                    return r.cameraData.setCameraDimensions(t.width, t.height)
                                }))), this.transitionSpeed = t.transitionSpeed || v.a.camera.transitionSpeed, [2]
                        }
                    }))
                }))
            }, e.prototype.getData = function(t) {
                return void 0 === t && (t = !0), t ? Object.freeze(this.cameraData.clone()) : this.cameraData
            }, e.prototype.onUpdate = function(t) {}, e.prototype.fromPose = function() {
                return {
                    position: this.cameraData.pose.position.clone(),
                    rotation: this.cameraData.pose.rotation.clone(),
                    projection: this.cameraData.pose.projection.clone()
                }
            }, e.prototype.updateCameraProjection = function(t) {
                t && (this.cameraData.pose.projection.copy(t), this.cameraData.pose.commit(), this.broadcastCameraMoved({
                    projection: t
                }))
            }, e.prototype.updateCameraFocus = function(t) {
                this.cameraData.pose.focalDistance = t, this.cameraData.pose.commit()
            }, e.prototype.updateCameraRotation = function(t) {
                t && (this.cameraData.pose.rotation.copy(t), this.cameraData.pose.commit(), this.broadcastCameraMoved({
                    rotation: t
                }))
            }, e.prototype.updateCameraPosition = function(t) {
                t && (this.cameraData.pose.position.copy(t), this.cameraData.pose.commit(), this.broadcastCameraMoved({
                    position: t
                }))
            }, e.prototype.broadcastCameraMoved = function(t) {
                var e = this.fromPose(),
                    n = E({}, e, t);
                this.engine.broadcast(new c.a(n, e))
            }, e.prototype.updateCameraPose = function(t) {
                t.position && (this.cameraData.pose.position.copy(t.position), this.cameraData.pose.commit(), this.broadcastCameraMoved({
                    position: t.position
                })), t.rotation && (this.cameraData.pose.rotation.copy(t.rotation), this.cameraData.pose.commit(), this.broadcastCameraMoved({
                    rotation: t.rotation
                }))
            }, e.prototype.canMove = function() {
                return this.cameraData.canTransition()
            }, e.prototype.moveTo = function(t) {
                if (this.cameraData.transition.active) return d.a.reject("Cannot move while the camera is already moving");
                var e = M[t.transitionType],
                    n = e.blackoutTime,
                    r = t.pose.rotation,
                    i = t.pose.position,
                    a = t.projection;
                t.pose.zoom && (a && Object(o.o)(a) || this.cameraData.isOrtho()) && (a = this.adjustProjectionZoom(a || this.cameraData.pose.projection.clone(), t.pose.zoom));
                var s = t.transitionType === w.a.Instant ? 0 : t.transitionTime;
                if (void 0 === s)
                    if (t.transitionType === w.a.Interpolate && i) {
                        var u = i.distanceTo(this.cameraData.pose.position);
                        s = this.baseTransitionTime + 166 * Math.log2(1 + u) * this.transitionSpeed
                    } else s = e.transitionTime;
                this.beginInternalTransition({
                    transitionType: t.transitionType,
                    transitionTime: s,
                    blackoutTime: n,
                    pose: {
                        position: i,
                        rotation: r
                    },
                    projection: a,
                    easing: t.easing,
                    rotationDelay: t.rotationDelay || 0,
                    rotationDuration: t.rotationDuration || 1,
                    matrixDelay: t.matrixDelay || 0,
                    matrixDuration: t.matrixDuration || 1
                });
                var c = {
                        position: t.pose.position ? t.pose.position.clone() : void 0,
                        rotation: t.pose.rotation ? t.pose.rotation.clone() : void 0,
                        projection: t.projection ? t.projection.clone() : void 0
                    },
                    l = this.fromPose();
                this.engine.broadcast(new h(c, l));
                var f = new d.a,
                    m = this.progressInternalTransition.bind(this),
                    v = this.endInternalTransition.bind(this),
                    y = this;
                return f.notify(0), this.engine.startGenerator((function() {
                    var e, r;
                    return T(this, (function(i) {
                        switch (i.label) {
                            case 0:
                                return (e = 16) >= y.cameraData.transition.duration ? (f.notify(.5), [4, new _.b]) : [3, 2];
                            case 1:
                                i.sent(), i.label = 2;
                            case 2:
                                return e < y.cameraData.transition.duration ? (m(e, n), r = Object(b.e)(e / y.cameraData.transition.duration, 0, 1), f.notify(r), [4, new _.b]) : [3, 4];
                            case 3:
                                return i.sent(), e = 16 + Date.now() - y.cameraData.transition.startTime, [3, 2];
                            case 4:
                                return v(t.transitionType), t.focalDistance && y.updateCameraFocus(t.focalDistance), y.cameraData.commit(), f.notify(1), f.resolve(), y.engine.broadcast(new p(c, l)), [2]
                        }
                    }))
                })), f.promise()
            }, e.prototype.cancelTransition = function() {
                return S(this, void 0, Promise, (function() {
                    var t = this;
                    return T(this, (function(e) {
                        return this.cameraData.transition.active ? [2, new Promise((function(e) {
                            Object(u.b)(t.cameraData.pose, t.cameraData.transition.to, !1);
                            var n = Date.now() - t.cameraData.transition.startTime;
                            t.cameraData.transition.duration = n, t.cameraData.transition.progress.stop(1), t.cameraData.pose.commit(), t.cameraData.transition.commit();
                            var r = t.cameraData.transition.onPropertyChanged("active", (function(t) {
                                t || (r && r.cancel(), e())
                            }))
                        }))] : [2, Promise.resolve()]
                    }))
                }))
            }, e.prototype.updateTransitionSpeed = function(t) {
                if (this.cameraData.transition.active) {
                    var e = Date.now(),
                        n = e - this.cameraData.transition.startTime,
                        r = n / t,
                        i = this.cameraData.transition.progress,
                        o = (i.duration - n) / t + r;
                    this.cameraData.transition.duration = o, this.cameraData.transition.startTime = e - r, i.modifyAnimation(i.value, i.endValue, o, i.easing, r), this.cameraData.transition.commit()
                }
            }, e.prototype.beginExternalTransition = function() {
                this.cameraData.transition.activeInternal || (this.cameraData.transition.startTime = Date.now(), this.cameraData.transition.active = !0, this.cameraData.transition.commit())
            }, e.prototype.endExternalTransition = function() {
                this.cameraData.transition.activeInternal || (this.cameraData.transition.active = !1, this.cameraData.transition.commit())
            }, e.prototype.beginInternalTransition = function(t) {
                var e = t.transitionTime || 0;
                this.cameraData.transition.startTime = Date.now(), this.cameraData.transition.duration = e, this.cameraData.transition.active = !0, this.cameraData.transition.activeInternal = !0, this.cameraData.transition.type = t.transitionType, this.cameraData.transition.progress.modifyAnimation(0, 1, e, t.easing || m.d), this.cameraData.transition.rotationDelay = t.rotationDelay || 0, this.cameraData.transition.rotationDuration = t.rotationDuration || 1, this.cameraData.transition.matrixDelay = t.matrixDelay || 0, this.cameraData.transition.matrixDuration = t.matrixDuration || 1, t.transitionType === w.a.FadeToBlack && this.cameraData.transition.blackoutProgress.modifyAnimation(0, 1, t.blackoutTime), this.cameraData.transition.from.position = this.cameraData.pose.position.clone(), this.cameraData.transition.from.rotation = this.cameraData.pose.rotation.clone(), this.cameraData.transition.from.projection = this.cameraData.pose.projection.clone(), this.cameraData.transition.to.position = t.pose.position ? t.pose.position.clone() : void 0, this.cameraData.transition.to.rotation = t.pose.rotation ? t.pose.rotation.clone() : void 0, this.cameraData.transition.to.projection = t.projection ? t.projection.clone() : void 0, this.cameraData.transition.commit()
            }, e.prototype.progressInternalTransition = function(t, e) {
                if (this.cameraData.transition.active) {
                    if (this.cameraData.transition.progress.updateAbsolute(t), this.cameraData.transition.type === w.a.Interpolate) {
                        var n = this.cameraData.transition.from,
                            r = this.cameraData.transition.to;
                        if (r.position && n.position && this.cameraData.pose.position.copy(n.position).lerp(r.position, this.cameraData.transition.progress.value), r.rotation && n.rotation) {
                            var i = Object(m.a)(this.cameraData.transition.progress.easing, this.cameraData.transition.progress.value, this.cameraData.transition.progress.elapsed, this.cameraData.transition.progress.duration * this.cameraData.transition.rotationDuration, this.cameraData.transition.rotationDelay);
                            this.cameraData.pose.rotation.copy(n.rotation).slerp(r.rotation, i)
                        }
                        if (r.projection && n.projection) {
                            i = Object(m.a)(m.g, this.cameraData.transition.progress.value, this.cameraData.transition.progress.elapsed, this.cameraData.transition.progress.duration * this.cameraData.transition.matrixDuration, this.cameraData.transition.matrixDelay);
                            ! function(t, e, n, r) {
                                for (var i = r.elements, o = t.elements, a = e.elements, s = 0; s < 16; s++) i[s] = o[s] * (1 - n) + a[s] * n
                            }(n.projection, r.projection, i, this.cameraData.pose.projection)
                        }
                    } else if (this.cameraData.transition.type === w.a.FadeToBlack) {
                        var o = 0,
                            a = this.cameraData.transition.duration;
                        t <= e ? o = t : (Object(u.b)(this.cameraData.transition.to, this.cameraData.pose, !1), o = t >= a - e ? a - t : e), this.cameraData.transition.blackoutProgress.updateAbsolute(o), this.cameraData.transition.progress.updateAbsolute(t <= e ? 0 : a)
                    }
                    this.cameraData.pose.commit(), this.cameraData.transition.commit()
                }
            }, e.prototype.endInternalTransition = function(t) {
                Object(u.b)(this.cameraData.transition.to, this.cameraData.pose, !1), this.cameraData.transition.type = null, this.cameraData.transition.active = !1, this.cameraData.transition.activeInternal = !1, this.cameraData.transition.progress.stop(1), t === w.a.FadeToBlack && this.cameraData.transition.blackoutProgress.stop(0), this.cameraData.pose.commit(), this.cameraData.transition.commit()
            }, e.prototype.adjustProjectionZoom = function(t, e) {
                var n = 1 / e;
                return t.elements[0] = n / this.canvas.aspectRatio, t.elements[5] = n, t
            }, e.prototype.setBaseProjection = function(t) {
                this.cameraData.setBaseProjection(t)
            }, e
        }(s.c);
    e.default = O
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(3),
        o = n(6),
        a = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        s = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        u = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        c = new i.a("api"),
        l = function() {
            function t(t, e) {
                this.api = t, this.baseUrl = e, this.loggedIn = !1
            }
            return t.prototype.load = function() {
                return a(this, void 0, Promise, (function() {
                    var t, e, n, r, i, a, l, h, f, p, d, m, v, y;
                    return s(this, (function(s) {
                        switch (s.label) {
                            case 0:
                                i = this.baseUrl + "/api/v1/user/", s.label = 1;
                            case 1:
                                return s.trys.push([1, 3, , 4]), [4, this.api.get(i, {
                                    responseType: "json"
                                })];
                            case 2:
                                return a = s.sent(), [3, 4];
                            case 3:
                                throw l = s.sent(), c.error("Failed to get User data"), l;
                            case 4:
                                if (this.sid = a.user_sid, this.firstName = a.first_name, this.lastName = a.last_name, this.email = a.email, this.loggedIn = !!a.user_sid, this.flags = new Set(a.flags), a.memberships) {
                                    h = Object(o.z)("organization", "");
                                    try {
                                        for (f = u(a.memberships), p = f.next(); !p.done; p = f.next())
                                            if (d = p.value, "" === h || d.organization_sid === h) try {
                                                for (m = u(d.flags), v = m.next(); !v.done; v = m.next()) y = v.value, this.flags.add(y)
                                            } catch (t) {
                                                n = {
                                                    error: t
                                                }
                                            } finally {
                                                try {
                                                    v && !v.done && (r = m.return) && r.call(m)
                                                } finally {
                                                    if (n) throw n.error
                                                }
                                            }
                                    } catch (e) {
                                        t = {
                                            error: e
                                        }
                                    } finally {
                                        try {
                                            p && !p.done && (e = f.return) && e.call(f)
                                        } finally {
                                            if (t) throw t.error
                                        }
                                    }
                                }
                                return [2]
                        }
                    }))
                }))
            }, t.prototype.getFlags = function(t) {
                void 0 === t && (t = "");
                var e = new Set;
                return this.flags.forEach((function(n) {
                    if (0 === n.indexOf(t)) {
                        var r = n.replace(t, "");
                        e.add(r)
                    }
                })), e
            }, t
        }(),
        h = n(135),
        f = n(69),
        p = n(33),
        d = function() {
            return (d = Object.assign || function(t) {
                for (var e, n = 1, r = arguments.length; n < r; n++)
                    for (var i in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                return t
            }).apply(this, arguments)
        },
        m = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        v = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        y = new i.a("api"),
        g = Object.freeze({
            cacheClearTimeout: 6e4,
            retryTimeout: 1e3
        }),
        b = function() {
            function t(t, e, n) {
                void 0 === e && (e = {}), void 0 === n && (n = window.location.origin);
                var r = this;
                this.prefetchedData = e, this.baseUrl = n, this._configCache = {}, t || (t = new h.RequestQueue({
                    retries: 0
                })), this.queue = t, setTimeout((function() {
                    r.prefetchedData = {}
                }), g.cacheClearTimeout), this.needAuth = {}
            }
            return t.prototype.init = function(t) {
                return m(this, void 0, void 0, (function() {
                    var e;
                    return v(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                return this.user = new l(this, this.baseUrl), e = [this.user.load()], t && e.push(this.getConfigs(t)), [4, Promise.all(e)];
                            case 1:
                                return n.sent(), [2]
                        }
                    }))
                }))
            }, t.prototype.get = function(t, e) {
                var n = this;
                if (e && e.prefetchFrom && this.prefetchedData[e.prefetchFrom]) return Promise.resolve(this.prefetchedData[e.prefetchFrom]);
                var r = d({}, e);
                this.needAuth[t] && (r = this.addAuthToOptions(e));
                var i = this.queue.get(t, r).then((function(e) {
                    if (null === e) throw Error("Data from get was null, possibly unparsable JSON");
                    return n.needAuth[t] = !1, e
                })).catch((function(e) {
                    return !n.needAuth[t] && e.status_code >= 400 && e.status_code < 500 ? (r = n.addAuthToOptions(r), n.queue.get(t, r).then((function(e) {
                        return n.needAuth[t] = !0, e
                    }))) : i
                }));
                return i
            }, t.prototype.addAuthToOptions = function(t) {
                return this.authToken || (this.authToken = Object(f.a)()), d({}, t, {
                    auth: this.authToken
                })
            }, t.prototype.getImage = function(t, e) {
                return this.get(t, d({}, e, {
                    responseType: "image"
                }))
            }, t.prototype.getImageBitmap = function(t, e, n, r) {
                return void 0 === r && (r = {}), m(this, void 0, Promise, (function() {
                    var i, o, a;
                    return v(this, (function(s) {
                        switch (s.label) {
                            case 0:
                                return "createImageBitmap" in window ? (i = -1 !== t.indexOf("?"), o = t + (i ? "&" : "?") + "imgopt=1", [4, this.get(o, d({}, r, {
                                    responseType: "blob"
                                }))]) : [3, 2];
                            case 1:
                                return a = s.sent(), [2, createImageBitmap(a, 0, 0, e, n, {
                                    imageOrientation: r.flipY ? "flipY" : "none"
                                })];
                            case 2:
                                return [2, this.getImage(t, r)]
                        }
                    }))
                }))
            }, t.prototype.getImageViaBrowser = function(t, e) {
                void 0 === e && (e = 3);
                var n = new p.a,
                    r = new Image,
                    i = this,
                    o = function() {
                        i.getImageViaBrowser(t, e - 1).then(n.resolve.bind(n)).progress(n.notify.bind(n)).catch(n.reject.bind(n))
                    };
                return r.onerror = function() {
                    e > 0 ? setTimeout(o, 1e3) : n.reject()
                }, r.onload = function() {
                    n.resolve(r)
                }, r.crossOrigin = "anonymous", r.src = t, n.promise()
            }, t.prototype.getConfigs = function(t, e) {
                return m(this, void 0, Promise, (function() {
                    var n, r, i;
                    return v(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                if (t = t.toLowerCase(), !e && this._configCache[t]) return [2, this._configCache[t]];
                                n = e ? {
                                    responseType: "json"
                                } : {
                                    responseType: "json",
                                    prefetchFrom: "config"
                                }, r = {}, i = this.baseUrl + "/api/v1/config/" + t, o.label = 1;
                            case 1:
                                return o.trys.push([1, 3, , 4]), [4, this.get(i, n)];
                            case 2:
                                return r = o.sent(), [3, 4];
                            case 3:
                                return o.sent(), y.warn("Failed to load config from " + i + ", ignoring"), [3, 4];
                            case 4:
                                return e || (this._configCache[t] = r), [2, r || {}]
                        }
                    }))
                }))
            }, t.prototype.getAppKey = function(t, e, n) {
                return m(this, void 0, Promise, (function() {
                    var r;
                    return v(this, (function(i) {
                        switch (i.label) {
                            case 0:
                                return "" === t || "" === e ? [2, null] : [4, this.getConfigs(t, n)];
                            case 1:
                                return (r = i.sent()).hasOwnProperty(e) ? [2, r[e]] : [2, null]
                        }
                    }))
                }))
            }, t.prototype.getGeoIpLocation = function() {
                return m(this, void 0, Promise, (function() {
                    return v(this, (function(t) {
                        return [2, this.queue.get("https://static.matterport.com/geoip/", {
                            responseType: "json",
                            priority: h.RequestPriority.LOW
                        })]
                    }))
                }))
            }, t.prototype.getQueue = function() {
                return this.queue
            }, t
        }(),
        _ = n(2),
        w = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        x = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        E = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        S = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "api-client", e
            }
            return w(e, t), e.prototype.init = function(t, e) {
                return x(this, void 0, void 0, (function() {
                    return E(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return this.api = new b(t.queue, t.prefetchedData, t.baseUrl), [4, this.api.init(t.preloadConfig)];
                            case 1:
                                return e.sent(), [2]
                        }
                    }))
                }))
            }, e.prototype.getApi = function() {
                return this.api
            }, e
        }(_.a);
    e.default = S
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(2),
        o = n(323),
        a = function(t) {
            this.sid = t.sid, this.uuid = t.job.uuid, this.vrSupported = t.is_vr, this.data = {
                sid: t.sid,
                name: t.name,
                presentedBy: t.presented_by,
                summary: t.summary,
                formattedAddress: s(t.address),
                contact: {
                    email: t.contact_email,
                    name: t.contact_name,
                    phone: t.contact_phone,
                    formattedPhone: t.formatted_contact_phone
                },
                externalUrl: t.external_url
            }, this.playerOptions = {
                address: t.player_options.address,
                autoplay: t.player_options.autoplay,
                contactEmail: t.player_options.contact_email,
                contactName: t.player_options.contact_name,
                contactPhone: t.player_options.contact_phone,
                dollhouse: t.player_options.dollhouse,
                externalUrl: t.player_options.external_url,
                fastTransitions: t.player_options.fast_transitions,
                floorplan: t.player_options.floor_plan,
                highlightReel: t.player_options.highlight_reel,
                labels: t.player_options.labels,
                modelName: t.player_options.model_name,
                modelSummary: t.player_options.model_summary,
                presentedBy: t.player_options.presented_by,
                tourButtons: t.player_options.tour_buttons
            }
        },
        s = function(t) {
            if ("string" == typeof t) try {
                t = JSON.parse(t)
            } catch (t) {
                return ""
            }
            if (!(t && (t.address_1 || t.address_2 || t.city || t.state || t.zip))) return "";
            var e = [];
            return t.address_1 && e.push(t.address_1), t.address_2 && e.push(t.address_2), t.city && (e.length > 0 && e.push(", "), e.push(t.city)), t.state && (e.length > 0 && e.push(", "), e.push(t.state)), t.zip && (e.length > 0 && e.push(", "), e.push(t.zip)), e.join("")
        },
        u = n(60),
        c = n(99),
        l = n(3),
        h = n(69),
        f = n(135),
        p = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        d = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        m = function(t) {
            var e = "function" == typeof Symbol && t[Symbol.iterator],
                n = 0;
            return e ? e.call(t) : {
                next: function() {
                    return t && n >= t.length && (t = void 0), {
                        value: t && t[n++],
                        done: !t
                    }
                }
            }
        },
        v = new l.a("modelurls"),
        y = function() {
            function t() {
                this.version = 1, this.cache = null, this.expires = 0
            }
            return t.prototype.validate = function(t) {
                return "catalog.json" in t && Object.keys(t).length > 0
            }, t.prototype.update = function(t) {
                return this.cache = t, this.expires = Date.now() + c.a.signedUrlDefaultExpireTime, Promise.resolve()
            }, t.prototype.get = function(t) {
                return this.cache[t]
            }, t
        }(),
        g = function() {
            function t() {
                this.version = 2, this.baseUrl = "", this.cache = null, this.expires = 0
            }
            return t.prototype.validate = function(t) {
                return "catalog.json" in t && "base.url" in t && Object.keys(t).length > 1
            }, t.prototype.update = function(t) {
                return this.baseUrl = t["base.url"], this.cache = t, this.expires = Date.now() + c.a.signedUrlDefaultExpireTime, Promise.resolve()
            }, t.prototype.get = function(t) {
                var e = this.cache[t];
                if (!e) throw Error("URL path not found: " + t);
                return this.baseUrl.replace("{{filename}}", t) + e
            }, t
        }(),
        b = function() {
            function t() {
                this.version = 3, this.baseUrl = "", this.expires = 0
            }
            return t.prototype.validate = function(t) {
                return t.templates && t.catalog_file && (!t.expires || 1e3 * t.expires > Date.now())
            }, t.prototype.update = function(t) {
                if (!t.templates) throw new Error("No templates found.");
                return this.baseUrl = t.templates[0], t.expires ? this.expires = 1e3 * t.expires : this.expires = Date.now() + c.a.signedUrlDefaultExpireTime, Promise.resolve()
            }, t.prototype.get = function(t) {
                return this.baseUrl && this.baseUrl.replace("{{filename}}", t)
            }, t
        }(),
        _ = function() {
            function t(t, e) {
                this.api = t, this.endpoint = e, this.urlContainer = null, this.authorizationHeader = Object(h.a)(), this.previousRefreshPromise = null, this.containerClasses = [b, g, y], this.endpoint = e + "?type=3"
            }
            return t.prototype.needsRefresh = function() {
                var t = this.urlContainer ? this.urlContainer.expires : Date.now();
                return Date.now() + c.a.signedUrlRefreshBuffer > t
            }, t.prototype.refresh = function() {
                if (!this.needsRefresh()) return Promise.resolve();
                if (!this.previousRefreshPromise) {
                    v.debug("Refreshing urls...");
                    var t = this;
                    this.previousRefreshPromise = this._refresh().then((function() {
                        v.debug("Refreshed"), t.previousRefreshPromise = null
                    }), (function() {
                        v.error("Failed url refresh, urls might go stale soon"), t.previousRefreshPromise = null
                    }))
                }
                return this.previousRefreshPromise
            }, t.prototype._refresh = function(t) {
                return void 0 === t && (t = !0), p(this, void 0, Promise, (function() {
                    var e, n, r, i, o, a, s;
                    return d(this, (function(u) {
                        switch (u.label) {
                            case 0:
                                return [4, this.api.get(this.endpoint, {
                                    responseType: "json",
                                    prefetchFrom: t ? "files" : void 0,
                                    auth: this.authorizationHeader,
                                    priority: f.RequestPriority.HIGHEST
                                })];
                            case 1:
                                if (r = u.sent(), this.urlContainer && this.urlContainer.validate(r)) return [2, this.urlContainer.update(r)];
                                try {
                                    for (i = m(this.containerClasses), o = i.next(); !o.done; o = i.next())
                                        if (a = o.value, (s = new a).validate(r)) return v.info("Using urls version " + s.version), this.urlContainer = s, [2, this.urlContainer.update(r)]
                                } catch (t) {
                                    e = {
                                        error: t
                                    }
                                } finally {
                                    try {
                                        o && !o.done && (n = i.return) && n.call(i)
                                    } finally {
                                        if (e) throw e.error
                                    }
                                }
                                if (t) return [2, this._refresh(!1)];
                                throw new Error("missing-urls")
                        }
                    }))
                }))
            }, t.prototype.getSignedUrl = function(t) {
                return p(this, void 0, Promise, (function() {
                    var e;
                    return d(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                return [4, this.refresh()];
                            case 1:
                                if (n.sent(), !this.urlContainer) throw new Error("Tried to use ModelUrls.get before urlContainer is established.");
                                if (!(e = this.urlContainer.get(t))) throw new Error("Could not get signed URL for path " + t);
                                return [2, e]
                        }
                    }))
                }))
            }, t.prototype.getFile = function(t, e, n) {
                return p(this, void 0, Promise, (function() {
                    var r, i;
                    return d(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return i = h.d, [4, this.getSignedUrl(t)];
                            case 1:
                                return r = i.apply(void 0, [o.sent(), n]), [2, this.api.get(r, e)]
                        }
                    }))
                }))
            }, t.prototype.getImage = function(t, e, n) {
                return p(this, void 0, Promise, (function() {
                    var r, i;
                    return d(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return i = h.d, [4, this.getSignedUrl(t)];
                            case 1:
                                return r = i.apply(void 0, [o.sent(), n]), [2, this.api.getImage(r, e)]
                        }
                    }))
                }))
            }, t.prototype.getImageBitmap = function(t, e, n, r, i) {
                return p(this, void 0, Promise, (function() {
                    var o, a;
                    return d(this, (function(s) {
                        switch (s.label) {
                            case 0:
                                return a = h.d, [4, this.getSignedUrl(t)];
                            case 1:
                                return o = a.apply(void 0, [s.sent(), i]), [2, this.api.getImageBitmap(o, e, n, r)]
                        }
                    }))
                }))
            }, t
        }(),
        w = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        x = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        E = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        S = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "model-data", e
            }
            return w(e, t), e.prototype.init = function(t, e) {
                return x(this, void 0, void 0, (function() {
                    var n, r, s, c;
                    return E(this, (function(l) {
                        switch (l.label) {
                            case 0:
                                return [4, e.getModule(i.a)];
                            case 1:
                                return n = l.sent(), r = n.getApi(), [4, t.modelDetailsStore.read()];
                            case 2:
                                if (!(s = l.sent())) throw Error("Could not fetch model data");
                                return this.model = new a(s), this.signedUrls = new _(r, r.baseUrl + "/api/player/models/" + t.sid + "/files"), [4, e.market.waitForData(u.a)];
                            case 3:
                                return c = l.sent(), e.broadcast(new o.a(this.signedUrls, this.model.sid, this.model.vrSupported, c.getSweepList())), [2]
                        }
                    }))
                }))
            }, e.prototype.getModel = function() {
                return this.model
            }, e.prototype.getSignedUrls = function() {
                return this.signedUrls
            }, e
        }(i.R);
    e.default = S
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(2),
        o = n(60),
        a = n(62),
        s = n(102),
        u = n(197),
        c = n(198),
        l = n(33),
        h = n(94),
        f = n(61),
        p = n(3),
        d = n(140),
        m = n(115),
        v = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        y = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        g = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        b = new p.a("sweep-module"),
        _ = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.internalProgress = !1, e.name = "sweep-data", e.defaultEasing = h.c, e.moveToSweep = function(t) {
                    var n = new l.a;
                    return t.prevSweepId = t.prevSweepId || e.sweepData.currentSweep, e.activateSweep(t).then((function() {
                        return e.beginSweepTransition(t), e.defaultSweepCameraMove(n, t)
                    })).then((function() {
                        e.endSweepTransition(t), n.resolve()
                    })).catch((function(e) {
                        b.error("Failure moving to sweep " + t.sweepId, e), n.reject(e)
                    })), n.promise()
                }, e.activateSweep = function(t) {
                    return y(e, void 0, void 0, (function() {
                        return g(this, (function(e) {
                            if (!this.sweepData.canTransition() || !this.cameraData.canTransition()) throw new Error("Tried to start sweep transition while another transition was active!");
                            if (!this.sweepData.containsSweep(t.sweepId)) throw new Error("invalid sweep");
                            return [2, this.activateSweepUnsafe(t)]
                        }))
                    }))
                }, e.activateSweepUnsafe = function(t) {
                    return y(e, void 0, void 0, (function() {
                        var e, n, r = this;
                        return g(this, (function(o) {
                            switch (o.label) {
                                case 0:
                                    return this.sweepPanoModule ? [3, 2] : (e = this, [4, this.engine.getModuleByParent(i.vb)]);
                                case 1:
                                    e.sweepPanoModule = o.sent(), o.label = 2;
                                case 2:
                                    return n = this.sweepPanoModule.getRenderer(), this.sweepData.setTransitionPending(!0), [2, n.activateSweep(t.sweepId).then((function() {
                                        return r.sweepData.setTransitionPending(!1)
                                    }))]
                            }
                        }))
                    }))
                }, e.instantSweepTransition = function(t) {
                    var n = e.sweepData.currentSweep;
                    e.beginSweepTransition({
                        sweepId: t,
                        transitionTime: 0,
                        internalProgress: !0,
                        prevSweepId: n
                    }), e.sweepData.currentSweep = t, e.sweepData.commit(), e.engine.broadcast(new d.a(t, n)), e.endSweepTransition({
                        sweepId: t,
                        prevSweepId: n
                    })
                }, e.beginSweepTransition = function(t) {
                    e.sweepData.activateTransition(t.sweepId, t.prevSweepId), e.internalProgress = t.internalProgress || !1, e.sweepData.transition.progress.modifyAnimation(0, 1, t.transitionTime || 0, t.easing || e.defaultEasing), e.sweepData.commit(), e.engine.broadcast(new c.a(t.sweepId, t.prevSweepId))
                }, e.endSweepTransition = function(t) {
                    e.sweepData.setTransitionPending(!1);
                    var n = e.sweepData.getSweep(t.sweepId);
                    e.sweepData.deactivateTransition(), e.sweepData.currentSweep = t.sweepId, e.sweepData.transition.progress.stop(1), e.internalProgress = !1, e.sweepData.commit(), e.engine.broadcast(new u.a(t.sweepId, n.alignmentType, n.placementType, t.prevSweepId))
                }, e.defaultSweepCameraMove = function(t, n) {
                    return y(e, void 0, Promise, (function() {
                        var e, r, i, o, u, c = this;
                        return g(this, (function(l) {
                            return e = {
                                position: this.sweepData.getSweep(n.sweepId).position,
                                rotation: n.rotation
                            }, r = Object(s.c)(this.cameraData.aspect()), i = a.a.Interpolate, void 0 !== n.transitionType && a.a[n.transitionType] && (i = n.transitionType), o = this.cameraModule.moveTo({
                                transitionType: i,
                                pose: e,
                                transitionTime: n.transitionTime,
                                projection: r,
                                easing: n.easing,
                                rotationDelay: n.rotationDelay
                            }), u = !1, o.progress((function(e) {
                                c.sweepData.transition.progress.updateProgress(e), t.notify(e), e >= .5 && !u && (u = !0, c.sweepData.currentSweep = n.sweepId, c.sweepData.commit(), c.engine.broadcast(new d.a(n.sweepId, n.prevSweepId)))
                            })), [2, o.nativePromise()]
                        }))
                    }))
                }, e
            }
            return v(e, t), e.prototype.init = function(t, e) {
                return y(this, void 0, void 0, (function() {
                    var n, r, a, s;
                    return g(this, (function(u) {
                        switch (u.label) {
                            case 0:
                                return this.engine = e, this.market = this.engine.market, [4, t.sweepSync.load()];
                            case 1:
                                return n = u.sent() || {}, r = function(t) {
                                    var e = Object(m.b)();
                                    for (var n in t) {
                                        var r = t[n];
                                        e.set(r.id, r)
                                    }
                                    return e
                                }(n), this.sweepData = new o.a(r), this.market.register(this, o.a, this.sweepData), t.createSyncMonitor && t.sweepSync.addMonitor(t.createSyncMonitor(r)), a = this, [4, this.engine.getModule(i.c)];
                            case 2:
                                return a.cameraModule = u.sent(), s = this, [4, e.market.waitForData(f.a)];
                            case 3:
                                return s.cameraData = u.sent(), [2]
                        }
                    }))
                }))
            }, e.prototype.onUpdate = function(t) {
                this.internalProgress && this.sweepData.transition.active && this.sweepData.transition.progress.tick(t)
            }, e
        }(i.ub);
    e.default = _
}, function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(2),
        o = n(66),
        a = n(15),
        s = n(33),
        u = n(244),
        c = function() {
            function t(t) {
                this.lastProgress = 0, this.currentProgress = 0, this.webpackChunks = [], this.meshAlloc = {
                    alloc: 2e6,
                    loaded: 0
                }, this.showingProgress = !1, this.progressElm = document.getElementById("bar"), window.addEventListener("WebpackChunkProgress", this.onWebpackChunkProgress.bind(this)), this.engine = t, this.meshProgressBinding = this.onMeshLoadProgress.bind(this), this.engine.subscribe(u.a, this.meshProgressBinding)
            }
            return t.prototype.showProgress = function() {
                this.showingProgress = !0, this.setProgress(this.currentProgress)
            }, t.prototype.setDone = function() {
                this.currentProgress = 100, this.setProgress(this.currentProgress), this.engine.unsubscribe(u.a, this.meshProgressBinding)
            }, t.prototype.setProgress = function(t) {
                if (this.progressElm && !isNaN(t)) {
                    this.lastProgress = Math.max(this.lastProgress, t), t = this.lastProgress;
                    var e = Number.parseFloat(this.progressElm.getAttribute("r") || "0"),
                        n = Math.PI * (2 * e),
                        r = (100 - (t = Math.max(Math.min(t, 100), 0))) / 100 * n;
                    this.progressElm.style.strokeDashoffset = r.toString(10)
                }
            }, t.prototype.calcProgress = function() {
                var t = 0,
                    e = 0;
                this.webpackChunks.forEach((function(n) {
                    t += n.loaded, e += n.total
                })), t += this.meshAlloc.loaded, e += this.meshAlloc.alloc, this.currentProgress = 75 * Math.min(t / e, 1), this.showingProgress && this.setProgress(this.currentProgress)
            }, t.prototype.onWebpackChunkProgress = function(t) {
                this.webpackChunks[t.chunkID] ? this.webpackChunks[t.chunkID].loaded = t.loaded : this.webpackChunks[t.chunkID] = {
                    loaded: t.loaded,
                    total: t.total
                }, this.calcProgress()
            }, t.prototype.onMeshLoadProgress = function(t) {
                this.meshAlloc.loaded = t.loaded / t.total * this.meshAlloc.alloc, this.calcProgress()
            }, t
        }(),
        l = n(6),
        h = n(45),
        f = (n(440), n(27)),
        p = n(245),
        d = n(3),
        m = (r = function(t, e) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(t, e) {
                    t.__proto__ = e
                } || function(t, e) {
                    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n])
                })(t, e)
        }, function(t, e) {
            function n() {
                this.constructor = t
            }
            r(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n)
        }),
        v = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        y = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        },
        g = new d.a("loading-gui"),
        b = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.name = "loading-ui", e.playPromise = new s.a, e
            }
            return m(e, t), e.prototype.init = function(t, e) {
                return v(this, void 0, void 0, (function() {
                    var n, r;
                    return y(this, (function(a) {
                        switch (a.label) {
                            case 0:
                                return this.engine = e, n = this, [4, e.getModule(i.F)];
                            case 1:
                                return n.locale = a.sent(), [4, t.modelDetailsStore.read()];
                            case 2:
                                return r = a.sent(), this.config = {
                                    quickstart: !!t.quickstart,
                                    autoplay: !!t.autoplay,
                                    startNewTab: !!t.startNewTab,
                                    hideTitle: !!t.hideTitle,
                                    hideBranding: !!t.hideBranding,
                                    sid: t.sid,
                                    baseUrl: t.baseUrl
                                }, this.progressUI = new c(e), this.hideUI = this.hideUI.bind(this), this.resolvePlayPromise = this.resolvePlayPromise.bind(this), this.bindings.push(this.engine.subscribe(o.a, this.hideUI)), this.renderSplashScreen(r), this.bindings.push(e.commandBinder.addBinding(p.a, this.resolvePlayPromise)), [2]
                        }
                    }))
                }))
            }, Object.defineProperty(e.prototype, "waitForPlaying", {
                get: function() {
                    return this.playPromise.nativePromise()
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.getLoadingElements = function() {
                if (this.uiRoot = document.getElementById("loading-gui"), !this.uiRoot) throw Error("Loading GUI root not found");
                this.uiRoot.classList.remove("hidden"), this.config.quickstart && (this.uiRoot.style.pointerEvents = "none"), this.presentedBy = document.getElementById("loading-presented-by"), this.poweredBy = document.getElementById("loading-powered-by"), this.mpLogo = document.getElementById("loading-mp-logo"), this.mpLogo.src = n(442), this.nameHeader = document.getElementById("loading-header"), this.background = document.getElementById("loading-background"), this.tint = document.getElementById("tint"), this.playIcon = document.getElementById("showcase-play")
            }, e.prototype.addCobrand = function(t) {
                if (t && t.presented_by) {
                    var e = this.presentedBy.querySelector(".loading-label");
                    e && (e.textContent = this.locale.t(h.a.PRESENTED_BY_CAPS));
                    var n = this.presentedBy.querySelector(".subheader");
                    n && (n.textContent = t.presented_by), this.presentedBy.classList.remove("hidden")
                }
            }, e.prototype.hidePlayButtonUI = function() {
                this.background.style.backgroundImage = "", this.presentedBy.style.transition = "none", this.presentedBy.classList.remove("faded-in"), this.poweredBy.style.transition = "none", this.poweredBy.classList.remove("faded-in"), this.nameHeader.classList.add("hidden"), this.tint.classList.add("hidden"), document.getElementById("circleLoader").classList.add("hidden"), this.uiRoot.classList.add("quickstart")
            }, e.prototype.showQuickstartUI = function() {
                return v(this, void 0, Promise, (function() {
                    return y(this, (function(t) {
                        switch (t.label) {
                            case 0:
                                return this.background.classList.add("faded-out"), [4, Object(f.d)(500)];
                            case 1:
                                return t.sent(), this.presentedBy.style.transition = "", this.presentedBy.classList.add("faded-in"), this.poweredBy.style.transition = "", this.poweredBy.classList.add("faded-in"), [4, Object(f.d)(2500)];
                            case 2:
                                return t.sent(), this.presentedBy.classList.remove("faded-in"), this.poweredBy.classList.remove("faded-in"), this.uiRoot.classList.add("faded-out"), [2]
                        }
                    }))
                }))
            }, e.prototype.showLoadingUI = function(t) {
                var e = document.createAttribute("data-status");
                e.value = this.locale.t(h.a.LOADING);
                var n = document.getElementById("loader-cont");
                n.attributes.setNamedItem(e), n.classList.add(this.locale.languageCode), n.classList.add("loading"), t.classList.add("faded-out"), this.presentedBy.classList.add("faded-in")
            }, e.prototype.renderSplashScreen = function(t) {
                var e = this;
                this.getLoadingElements();
                var n = document.getElementById("play-prompt");
                this.config.hideTitle && this.nameHeader.classList.add("hidden"), this.config.hideBranding || this.addCobrand(t), this.nameHeader.textContent = t.name, this.poweredBy.classList.add("faded-in"), this.tint.classList.add("faded-in"), this.playPromise.then((function() {
                    e.config.quickstart ? e.hidePlayButtonUI() : e.showLoadingUI(n)
                })), this.config.autoplay ? (this.progressUI.showProgress(), this.playPromise.resolve()) : (n.classList.remove("hidden"), n.innerText = this.locale.t(h.a.EXPLORE_3D_SPACE), this.playIcon.classList.remove("hidden"), this.uiRoot.addEventListener("click", this.resolvePlayPromise));
                var r = window.devicePixelRatio || 1,
                    i = Math.max(window.innerWidth, 400);
                this.background.style.backgroundImage = "url(" + this.config.baseUrl + "/api/v1/player/models/" + this.config.sid + "/thumb?width=" + i + "&dpr=" + r + "&disable=upscale)"
            }, e.prototype.resolvePlayPromise = function() {
                return v(this, void 0, void 0, (function() {
                    return y(this, (function(t) {
                        if (Object(l.o)()) {
                            if (this.config.startNewTab) return window.open(self.location.href, "_blank"), [2];
                            try {
                                return top.location.href = self.location.href, [2]
                            } catch (t) {
                                g.debug("Couldn't set top window location; was Showcase sandboxed?"), g.debug(t)
                            }
                        }
                        return this.playIcon.classList.add("hidden"), this.progressUI.showProgress(), this.playPromise.resolve(), [2]
                    }))
                }))
            }, e.prototype.hideUI = function(t) {
                return v(this, void 0, Promise, (function() {
                    return y(this, (function(e) {
                        return t.phase !== a.a.STARTING && t.phase !== a.a.PLAYING && t.phase !== a.a.ERROR || (this.progressUI.setDone(), this.config.quickstart ? this.showQuickstartUI() : this.uiRoot.classList.add("faded-out"), this.dispose(this.engine)), [2]
                    }))
                }))
            }, e
        }(i.E);
    e.default = b
}, , , , , , , , , , , , , , , , , , , , , , , , , function(t, e, n) {
    var r, i, o;
    o = function() {
        var t, e, n = document,
            r = n.getElementsByTagName("head")[0],
            i = {},
            o = {},
            a = {},
            s = {};

        function u(t, e) {
            for (var n = 0, r = t.length; n < r; ++n)
                if (!e(t[n])) return !1;
            return 1
        }

        function c(t, e) {
            u(t, (function(t) {
                return e(t), 1
            }))
        }

        function l(e, n, r) {
            e = e.push ? e : [e];
            var f = n && n.call,
                p = f ? n : r,
                d = f ? e.join("") : n,
                m = e.length;

            function v(t) {
                return t.call ? t() : i[t]
            }

            function y() {
                if (!--m)
                    for (var t in i[d] = 1, p && p(), a) u(t.split("|"), v) && !c(a[t], v) && (a[t] = [])
            }
            return setTimeout((function() {
                c(e, (function e(n, r) {
                    return null === n ? y() : (r || /^https?:\/\//.test(n) || !t || (n = -1 === n.indexOf(".js") ? t + n + ".js" : t + n), s[n] ? (d && (o[d] = 1), 2 == s[n] ? y() : setTimeout((function() {
                        e(n, !0)
                    }), 0)) : (s[n] = 1, d && (o[d] = 1), void h(n, y)))
                }))
            }), 0), l
        }

        function h(t, i) {
            var o, a = n.createElement("script");
            a.onload = a.onerror = a.onreadystatechange = function() {
                a.readyState && !/^c|loade/.test(a.readyState) || o || (a.onload = a.onreadystatechange = null, o = 1, s[t] = 2, i())
            }, a.async = 1, a.src = e ? t + (-1 === t.indexOf("?") ? "?" : "&") + e : t, r.insertBefore(a, r.lastChild)
        }
        return l.get = h, l.order = function(t, e, n) {
            ! function r(i) {
                i = t.shift(), t.length ? l(i, r) : l(i, e, n)
            }()
        }, l.path = function(e) {
            t = e
        }, l.urlArgs = function(t) {
            e = t
        }, l.ready = function(t, e, n) {
            t = t.push ? t : [t];
            var r, o = [];
            return !c(t, (function(t) {
                i[t] || o.push(t)
            })) && u(t, (function(t) {
                return i[t]
            })) ? e() : (r = t.join("|"), a[r] = a[r] || [], a[r].push(e), n && n(o)), l
        }, l.done = function(t) {
            l([null], t)
        }, l
    }, t.exports ? t.exports = o() : void 0 === (i = "function" == typeof(r = o) ? r.call(e, n, e, t) : r) || (t.exports = i)
}, , , , , , function(t, e, n) {
    "use strict";
    n.r(e);
    var r, i = n(343),
        o = n(211),
        a = n(511),
        s = n(125),
        u = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        c = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        };
    ! function(t) {
        function e(t) {
            return u(this, void 0, Promise, (function() {
                return c(this, (function(e) {
                    if (t) return [2, new Promise((function(e, n) {
                        try {
                            a(t, (function() {
                                var t = window["sdk-client"];
                                delete window["sdk-client"], t && t.SdkBuilder && "function" == typeof t.SdkBuilder && e(t.SdkBuilder)
                            }))
                        } catch (e) {
                            n("Could not load the sdk from " + t)
                        }
                    }))];
                    throw new Error("Unabled to load the sdk")
                }))
            }))
        }
        t.connect = function(t, n, r) {
            return u(this, void 0, void 0, (function() {
                var i, o;
                return c(this, (function(a) {
                    switch (a.label) {
                        case 0:
                            if ("string" != typeof n) throw Error("invalid key");
                            if ("string" != typeof r) throw Error("invalid version");
                            return i = window.location.protocol + "//" + window.location.host, [4, t.waitForModule(s.default)];
                        case 1:
                            return [4, a.sent().connect(n, r, i)];
                        case 2:
                            return [4, e((o = a.sent()).scriptUrl)];
                        case 3:
                            return [2, new(a.sent())(o.messengerFactory).build(o.serializedInterface)]
                    }
                }))
            }))
        }
    }(r || (r = {}));
    var l = n(6),
        h = function(t, e, n, r) {
            return new(n || (n = Promise))((function(i, o) {
                function a(t) {
                    try {
                        u(r.next(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function s(t) {
                    try {
                        u(r.throw(t))
                    } catch (t) {
                        o(t)
                    }
                }

                function u(t) {
                    t.done ? i(t.value) : new n((function(e) {
                        e(t.value)
                    })).then(a, s)
                }
                u((r = r.apply(t, e || [])).next())
            }))
        },
        f = function(t, e) {
            var n, r, i, o, a = {
                label: 0,
                sent: function() {
                    if (1 & i[0]) throw i[1];
                    return i[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;
                            switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {
                                case 0:
                                case 1:
                                    i = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, r = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(i = (i = a.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < i[1]) {
                                        a.label = i[1], i = o;
                                        break
                                    }
                                    if (i && a.label < i[2]) {
                                        a.label = i[2], a.ops.push(o);
                                        break
                                    }
                                    i[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = e.call(t, a)
                        } catch (t) {
                            o = [6, t], r = 0
                        } finally {
                            n = i = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        };
    window.addEventListener("app-start", (function(t) {
        var e = new i.a,
            n = t.detail ? t.detail.config : {},
            a = new o.b([o.a], n);
        e.loadApplication(a, a.setError.bind(a)), l.c() || document.body.classList.add("no-touch"),
            function(t) {
                var e = this;
                window.MP_SDK = {
                    connect: function(n, i, o) {
                        return h(e, void 0, void 0, (function() {
                            return f(this, (function(e) {
                                return [2, r.connect(t, i, o)]
                            }))
                        }))
                    }
                }
            }(e)
    }), !0)
}]);